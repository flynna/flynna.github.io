<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>å‰ç«¯å¼€å‘è¿‡ç¨‹ä¸­èƒ½è®©ä½ è§£æ”¾åŒæ‰‹çš„ä¸€äº›æ’ä»¶</title>
      <link href="/engineering/plugins/"/>
      <url>/engineering/plugins/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><div class="info"><blockquote><p>ä»‹ç»åœ¨ <code>vue/react</code> é¡¹ç›®ä¸­å¸¸ç”¨çš„ä¸€äº›æ’ä»¶ã€‚ä¾‹å¦‚è‡ªåŠ¨å¼•å…¥ã€æŒ‰éœ€å¯¼å…¥ç­‰ç­‰â€¦</p><p>æŒç»­æ›´æ–°ä¸­â€¦</p></blockquote></div><span id="more"></span><h3 id="unplugin-auto-import"><a href="#unplugin-auto-import" class="headerlink" title="unplugin-auto-import"></a><a href="https://github.com/unplugin/unplugin-auto-import#install">unplugin-auto-import</a></h3><p>ç”¨ä½œæ¨¡å—çš„è‡ªåŠ¨å¯¼å…¥ï¼Œä¸‹é¢å°†ä»¥ <code>vue</code> é¡¹ç›®ä¸ºä¾‹ä»‹ç»ï¼ˆ<code>v2ã€v3</code>å‡å¯ï¼‰ï¼Œå®Œæ•´çš„æ’ä»¶é…ç½®é¡¹å¯ç‚¹å‡»æ ‡é¢˜é“¾æ¥æŸ¥çœ‹ã€‚</p><h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">pnpm</span> <span class="token function">add</span> unplugin-auto-import -D</code></pre><h4 id="é…ç½®-vite-config-ts-or-vue-config-js"><a href="#é…ç½®-vite-config-ts-or-vue-config-js" class="headerlink" title="é…ç½® vite.config.ts or vue.config.js"></a>é…ç½® <code>vite.config.ts or vue.config.js</code></h4><pre class="language-diff" data-language="diff"><code class="language-diff">import &#123; defineConfig &#125; from 'vite';// const &#123; defineConfig &#125; = require('@vue/cli-service');import autoImport from 'unplugin-auto-import/vite';# const autoImport = require('unplugin-auto-import/webpack');export default defineConfig(&#123;<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> # ...</span><span class="token prefix unchanged"> </span><span class="token line"> plugins: [</span><span class="token prefix unchanged"> </span><span class="token line">   vue(),</span><span class="token prefix unchanged"> </span><span class="token line">   vueJsx(),</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   autoImport(&#123;</span><span class="token prefix inserted">+</span><span class="token line">     imports: [</span><span class="token prefix inserted">+</span><span class="token line">       'vue',</span><span class="token prefix inserted">+</span><span class="token line">       &#123;</span><span class="token prefix inserted">+</span><span class="token line">         'vue-router': ['useRouter', 'useRoute'],</span><span class="token prefix inserted">+</span><span class="token line">       &#125;,</span><span class="token prefix inserted">+</span><span class="token line">       &#123;</span><span class="token prefix inserted">+</span><span class="token line">         'vue-i18n': ['useI18n'],</span><span class="token prefix inserted">+</span><span class="token line">       &#125;,</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       # &#123;</span><span class="token prefix unchanged"> </span><span class="token line">       #   '@vueuse/core': ['useVModel', 'useVModels', 'useMouse'],</span><span class="token prefix unchanged"> </span><span class="token line">       # &#125;,</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     ],</span><span class="token prefix inserted">+</span><span class="token line">   &#125;)</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> ]</span></span>&#125;);</code></pre><p>ä¿å­˜ï¼Œé‡æ–°ç¼–è¯‘å¯åŠ¨ä¼šåœ¨é»˜è®¤è·¯å¾„ï¼ˆ<code>/</code>ï¼‰ä¸‹è‡ªåŠ¨ç”Ÿæˆ <code>auto-imports.d.ts</code> æ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«äº†è‡ªåŠ¨å¯¼å…¥çš„æ¨¡å—ã€‚å½¢å¦‚ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">/* eslint-disable */</span><span class="token comment">/* prettier-ignore */</span><span class="token comment">// @ts-nocheck</span><span class="token comment">// noinspection JSUnusedGlobalSymbols</span><span class="token comment">// Generated by unplugin-auto-import</span><span class="token keyword">export</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token keyword">declare</span> global <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> useAttrs<span class="token operator">:</span> <span class="token keyword">typeof</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'vue'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'useAttrs'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> useCssModule<span class="token operator">:</span> <span class="token keyword">typeof</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'vue'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'useCssModule'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> useCssVars<span class="token operator">:</span> <span class="token keyword">typeof</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'vue'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'useCssVars'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> useMouse<span class="token operator">:</span> <span class="token keyword">typeof</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@vueuse/core'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'useMouse'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> useRoute<span class="token operator">:</span> <span class="token keyword">typeof</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'vue-router'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'useRoute'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> useRouter<span class="token operator">:</span> <span class="token keyword">typeof</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'vue-router'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'useRouter'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> useSlots<span class="token operator">:</span> <span class="token keyword">typeof</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'vue'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'useSlots'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// ...</span><span class="token punctuation">&#125;</span><span class="token comment">// for type re-export</span><span class="token keyword">declare</span> global <span class="token punctuation">&#123;</span>  <span class="token comment">// @ts-ignore</span>  <span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token punctuation">&#123;</span> Component<span class="token punctuation">,</span> ComponentPublicInstance<span class="token punctuation">,</span> ComputedRef<span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="é…ç½®-tsconfig-json"><a href="#é…ç½®-tsconfig-json" class="headerlink" title="é…ç½® tsconfig.json"></a>é…ç½® <code>tsconfig.json</code></h4><p>ä¸ºäº†è®©é¡¹ç›®èƒ½å¤ŸåŠ è½½è¯†åˆ«æ¨¡å—å£°æ˜ï¼Œé¿å…ç¼–è¾‘å™¨çš„æ ¡éªŒé”™è¯¯æç¤ºï¼ˆè™½ç„¶ä¸é…ç½®ä¸å½±å“å®é™…åŠŸèƒ½ï¼‰ï¼š</p><pre class="language-diff" data-language="diff"><code class="language-diff">&#123;<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> # ...</span><span class="token prefix unchanged"> </span><span class="token line"> "include": [</span><span class="token prefix unchanged"> </span><span class="token line">   # ...</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   "./auto-imports.d.ts"</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> ]</span></span>&#125;</code></pre><h4 id="é…ç½®-eslintrc-js"><a href="#é…ç½®-eslintrc-js" class="headerlink" title="é…ç½® .eslintrc.js"></a>é…ç½® <code>.eslintrc.js</code></h4><p>æ ¹æ®æ’ä»¶å®˜æ–¹æ¨èï¼Œåœ¨ä½¿ç”¨ <code>typescript</code> çš„æ—¶å€™ï¼Œå…³æ‰ <code>eslint</code> çš„éƒ¨åˆ†è§„åˆ™æ ¡éªŒï¼š</p><pre class="language-diff" data-language="diff"><code class="language-diff">module.exports = &#123;<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> # ...</span><span class="token prefix unchanged"> </span><span class="token line"> rules: &#123;</span><span class="token prefix unchanged"> </span><span class="token line">   # ...</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   'no-undef': 'off',</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &#125;</span></span>&#125;</code></pre><p>å¦‚æœè¿˜å­˜åœ¨æ ¡éªŒå¼‚å¸¸ï¼Œè¯·ç§»æ­¥å®˜æ–¹æŸ¥çœ‹æ¨èé…ç½®ï¼š<a href="https://github.com/unplugin/unplugin-auto-import#eslint">https://github.com/unplugin/unplugin-auto-import#eslint</a></p><h4 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h4><p>å®Œæˆä¸Šé¢é…ç½®åï¼Œåœ¨é¡¹ç›®é‡Œæ— éœ€å¼•å…¥ï¼Œå³å¯ä½¿ç”¨æŸäº›æ¨¡å—ã€‚å¯¹æ¯”ä½¿ç”¨ï¼š</p><pre class="language-diff" data-language="diff"><code class="language-diff"># é…ç½®äº†æ’ä»¶ä»¥åï¼Œä¸‹é¢çš„å¼•å…¥è¯­å¥å³å¯ç›´æ¥çœç•¥<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> import &#123; defineProps, withDefaults, defineEmits, defineExpose &#125; from 'vue';</span></span>withDefaults(<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> defineProps&lt;&#123;</span><span class="token prefix unchanged"> </span><span class="token line">   activeId: string;</span><span class="token prefix unchanged"> </span><span class="token line">   onlyReview: boolean;</span><span class="token prefix unchanged"> </span><span class="token line"> &#125;>(),</span><span class="token prefix unchanged"> </span><span class="token line"> &#123;</span><span class="token prefix unchanged"> </span><span class="token line">   activeId: '',</span><span class="token prefix unchanged"> </span><span class="token line">   onlyReview: false,</span><span class="token prefix unchanged"> </span><span class="token line"> &#125;,</span></span>);defineEmits&lt;&#123;<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> (e: 'select', id: string): void;</span><span class="token prefix unchanged"> </span><span class="token line"> (e: 'delete', ids: string[]): void;</span></span>&#125;>();defineExpose(&#123; handleAddComponent, handleDeleteComponent &#125;);function handleAddComponent() &#123;&#125;function handleDeleteComponent() &#123;&#125;</code></pre><p>æœ‰æ²¡æœ‰è§‰å¾—æ–¹ä¾¿å¾ˆå¤šï¼Ÿå¦‚æœä½ å®‰è£…äº†è¯¥æ’ä»¶å¹¶æ­£ç¡®é…ç½®äº†ï¼Œä½†æ˜¯æ²¡æœ‰ç”Ÿæ•ˆï¼Œå¯èƒ½æ˜¯ç¼“å­˜åŸå› ï¼Œè¯·å…ˆåˆ é™¤ç¼“å­˜ï¼ˆ<code>/node_modules/.cache</code>ï¼‰ï¼Œç„¶åé‡å¯ç¼–è¾‘å™¨ï¼Œæ‰§è¡Œ <code>npm run dev.</code></p><h3 id="unplugin-vue-components"><a href="#unplugin-vue-components" class="headerlink" title="unplugin-vue-components"></a><a href="https://github.com/unplugin/unplugin-vue-components#installation">unplugin-vue-components</a></h3><p>é¡µé¢ç»„ä»¶è‡ªåŠ¨å¼•å…¥å¹¶æ³¨å†Œï¼ˆè‡ªèº«å¹¶æœªæ”¯æŒæŒ‰éœ€å¼•å…¥ï¼‰ã€‚è¯¥æ’ä»¶å†…ç½®äº† <code>VUE-UI</code> ç›¸å…³ç»„ä»¶åº“çš„è§£æå™¨å¤„ç†ï¼ˆåç»­æ˜¯ç”±ç»„ä»¶åº“è‡ªèº«æä¾›æ”¯æŒï¼‰ï¼Œæ–¹ä¾¿åœ¨é¡¹ç›®ä¸­ç›´æ¥ä½¿ç”¨ç»„ä»¶åº“è€Œæ— éœ€å•ç‹¬å¼•å…¥æ³¨å†Œã€‚</p><h4 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># pnpm add element-plus</span><span class="token function">pnpm</span> <span class="token function">add</span> unplugin-vue-components -D</code></pre><h4 id="é…ç½®-vite-config-ts-or-vue-config-js-1"><a href="#é…ç½®-vite-config-ts-or-vue-config-js-1" class="headerlink" title="é…ç½® vite.config.ts or vue.config.js"></a>é…ç½® <code>vite.config.ts or vue.config.js</code></h4><p>åœ¨ <code>vite.config.ts</code> ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p><pre class="language-diff" data-language="diff"><code class="language-diff"># ...import Components from 'unplugin-vue-components/vite';# import &#123; ElementPlusResolver &#125; from 'unplugin-vue-components/resolvers';export default defineConfig(&#123;<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> # ...</span><span class="token prefix unchanged"> </span><span class="token line"> plugins: [</span><span class="token prefix unchanged"> </span><span class="token line">   # ...</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    Components(&#123;</span><span class="token prefix inserted">+</span><span class="token line">      // é…ç½®æ–‡ä»¶ç”Ÿæˆçš„ä½ç½®</span><span class="token prefix inserted">+</span><span class="token line">      dts: 'components.d.ts',</span><span class="token prefix inserted">+</span><span class="token line">      // æŒ‡å®šéœ€è¦è‡ªåŠ¨å¯¼å…¥çš„ç»„ä»¶åº“è·¯å¾„ï¼ˆå¯ä»¥æ˜¯è‡ªå®šä¹‰å®ç°çš„ 'src/components'ï¼‰,é…ç½®åï¼Œåœ¨ä½¿ç”¨æ—¶å³å¯æ— éœ€å†å¼•å…¥åˆ° script</span><span class="token prefix inserted">+</span><span class="token line">      // åŒæ—¶ï¼Œè¯¥è·¯å¾„ä¸‹çš„æ‰€æœ‰ç»„ä»¶éƒ½ä¼šæ·»åŠ åˆ° components.d.ts çš„å£°æ˜ä¸­</span><span class="token prefix inserted">+</span><span class="token line">      dirs: [],</span></span># +      resolvers: [ElementPlusResolver()],<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      resolvers: [],</span><span class="token prefix inserted">+</span><span class="token line">    &#125;),</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> ]</span></span>&#125;)</code></pre><p>æ·»åŠ ä¸Šé¢é…ç½®ï¼Œåœ¨é»˜è®¤çš„è·¯å¾„ï¼ˆ<code>/</code>ï¼‰ä¸‹ä¼šç”Ÿæˆ <code>components.d.ts</code>ï¼Œå½¢å¦‚ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">/* eslint-disable */</span><span class="token comment">/* prettier-ignore */</span><span class="token comment">// @ts-nocheck</span><span class="token comment">// Generated by unplugin-vue-components</span><span class="token comment">// Read more: https://github.com/vuejs/core/pull/3399</span><span class="token keyword">export</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'vue'</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">GlobalComponents</span> <span class="token punctuation">&#123;</span>    HelloWorld<span class="token operator">:</span> <span class="token keyword">typeof</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./src/components/HelloWorld.vue'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'default'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment">// ElLink: typeof import('element-plus/es')['ElLink'];</span>    RouterLink<span class="token operator">:</span> <span class="token keyword">typeof</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'vue-router'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'RouterLink'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    RouterView<span class="token operator">:</span> <span class="token keyword">typeof</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'vue-router'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'RouterView'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è™½ç„¶åŸºäºè¯¥æ’ä»¶ä»¥åŠè§£æå™¨çš„å®ç°ï¼Œå¯ä»¥å®Œæˆå¯¹ä¸‰æ–¹ç»„ä»¶åº“çš„ç»„ä»¶çš„è‡ªåŠ¨å¼•å…¥ï¼ˆå³ä¸æ­é…å…¶ä»–æ’ä»¶ï¼Œæ­¤æ—¶å·²ç»<strong>æ— éœ€åœ¨ <code>main.ts</code> é‡Œå…¨å±€æ³¨å†Œæˆ–è€…é¡µé¢ç»„ä»¶å†…éƒ¨å¼•å…¥å¹¶å±€éƒ¨æ³¨å†Œ</strong>ï¼‰ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰åšåˆ°æŒ‰éœ€åŠ è½½â€¦</p><h5 id="æŒ‰éœ€åŠ è½½"><a href="#æŒ‰éœ€åŠ è½½" class="headerlink" title="æŒ‰éœ€åŠ è½½"></a>æŒ‰éœ€åŠ è½½</h5><p>ä»¥æˆ‘åœ¨æ¡ˆä¾‹ä¸­ä½¿ç”¨çš„ <code>element-plus</code> ä¸ºä¾‹ï¼Œæ ¹æ®<a href="https://element-plus.org/zh-CN/guide/quickstart.html#%E6%8C%89%E9%9C%80%E5%AF%BC%E5%85%A5">å®˜æ–¹æ¨è</a>çš„æ–¹å¼ï¼Œ è¿˜éœ€è¦ç»“åˆ <code>unplugin-auto-import</code> æ’ä»¶ä½¿ç”¨ï¼Œè¾¾åˆ°æŒ‰éœ€åŠ è½½çš„ç›®çš„ï¼š</p><pre class="language-diff" data-language="diff"><code class="language-diff"># ...import autoImport from 'unplugin-auto-import/vite';export default defineConfig(&#123;<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> # ...</span><span class="token prefix unchanged"> </span><span class="token line"> plugins: [</span><span class="token prefix unchanged"> </span><span class="token line">   # ...</span><span class="token prefix unchanged"> </span><span class="token line">   autoImport(&#123;</span><span class="token prefix unchanged"> </span><span class="token line">     # ...</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     resolvers: [ElementPlusResolver()],</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &#125;),</span><span class="token prefix unchanged"> </span><span class="token line"> ]</span></span>&#125;)</code></pre><p>ä¸Šé¢çš„é…ç½®æ˜¯åŸºäºé«˜ç‰ˆæœ¬çš„ï¼Œå¦‚æœæ˜¯ä½ç‰ˆæœ¬çš„ <code>element-plus or element-ui...</code>ï¼Œå¯ç»“åˆç»„ä»¶åº“è‡ªèº«æ¨èçš„æ–¹å¼ï¼Œä¾‹å¦‚æ­é… <code>babel-plugin-component or babel-plugin-import</code> å®ç°ï¼Œä¸‹é¢æä¾›å¯è¡Œæ€§æ–¹æ¡ˆï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># vant</span><span class="token function">pnpm</span> <span class="token function">add</span> babel-plugin-import -D<span class="token comment"># element-ui</span><span class="token function">pnpm</span> <span class="token function">add</span> babel-plugin-component -D</code></pre><p>å†æ·»åŠ  <code>babel</code> é…ç½®ï¼š</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// babel.config.js</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@vue/cli-plugin-babel/preset'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">[</span>      <span class="token string">'component'</span><span class="token punctuation">,</span>      <span class="token punctuation">&#123;</span>        <span class="token literal-property property">libraryName</span><span class="token operator">:</span> <span class="token string">'element-ui'</span><span class="token punctuation">,</span>        <span class="token literal-property property">styleLibraryName</span><span class="token operator">:</span> <span class="token string">'theme-chalk'</span><span class="token punctuation">,</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span>      <span class="token string">'import'</span><span class="token punctuation">,</span>      <span class="token punctuation">&#123;</span>        <span class="token literal-property property">libraryName</span><span class="token operator">:</span> <span class="token string">'vant'</span><span class="token punctuation">,</span>        <span class="token literal-property property">libraryDirectory</span><span class="token operator">:</span> <span class="token string">'es'</span><span class="token punctuation">,</span>        <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><p>ç„¶ååœ¨ <code>unplugin-vue-components çš„ Components</code> é…ç½®ä¸­æ·»åŠ  <code>ElementUiResolverã€VantResolver</code> å³å¯ï¼ˆè‡ªåŠ¨å®Œæˆæ³¨å†Œï¼‰ã€‚</p><h4 id="é…ç½®-tsconfig-json-1"><a href="#é…ç½®-tsconfig-json-1" class="headerlink" title="é…ç½® tsconfig.json"></a>é…ç½® <code>tsconfig.json</code></h4><p>å°†ç”Ÿæˆçš„ <code>components.d.ts</code> æ–‡ä»¶åœ°å€æ”¾å…¥é…ç½®çš„ <code>includes</code> ä¸­ï¼Œè¿™æ ·åœ¨ <code>vue</code> ç»„ä»¶å†…ä½¿ç”¨ä¸‰æ–¹ç»„ä»¶æ—¶ï¼Œå¦‚æœç»„ä»¶åº“æä¾›æœ‰ç±»å‹æ”¯æŒï¼Œæ­¤æ—¶ä¼šæœ‰ç›¸å…³<code>prop</code> ç±»å‹æç¤ºã€‚</p><pre class="language-diff" data-language="diff"><code class="language-diff">&#123;<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> # ...</span><span class="token prefix unchanged"> </span><span class="token line"> "include": [</span><span class="token prefix unchanged"> </span><span class="token line">   # ...</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   "./components.d.ts"</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> ]</span></span>&#125;</code></pre><h4 id="ä½¿ç”¨-1"><a href="#ä½¿ç”¨-1" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h4><p>å®Œæˆä¸Šè¿°é…ç½®ï¼Œå¯ä»¥åœ¨ç»„ä»¶å†…ç›´æ¥ä½¿ç”¨ç›¸å…³ç»„ä»¶ï¼š</p><pre class="language-diff" data-language="diff"><code class="language-diff"><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">script setup lang="ts"></span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> import &#123; ElLink &#125; from 'element-plus';</span><span class="token prefix deleted">-</span><span class="token line"> import HelloWorld from './components/HelloWorld.vue'</span></span><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/script></span></span><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">template></span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;HelloWorld msg="You did it!" /></span><span class="token prefix unchanged"> </span><span class="token line"> &lt;el-link type="primary">primary&lt;/el-link></span></span><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/template></span></span></code></pre><div class="waring"><blockquote><p><strong>æ³¨æ„ï¼šåœ¨ä½¿ç”¨æ’ä»¶è¿›è¡Œè‡ªåŠ¨å¼•å…¥æ³¨å†Œæ—¶ï¼Œä¸‰æ–¹åº“çš„æ ·å¼æ˜¯ååŠ è½½çš„ã€‚æ„å‘³ç€å¯èƒ½å­˜åœ¨è‡ªå®šä¹‰æ ·å¼å’Œç»„ä»¶è‡ªèº«æ ·å¼ä¼˜å…ˆçº§çš„é—®é¢˜ã€‚é€‚å½“ä¸ºè‡ªå®šä¹‰æ ·å¼æ·»åŠ æƒé‡å³å¯ã€‚</strong></p></blockquote></div>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å·¥ç¨‹åŒ– </category>
          
          <category> æ’ä»¶ä½¿ç”¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> unplugin-auto-import </tag>
            
            <tag> unplugin-vue-components </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºå¼€æºé¡¹ç›®äºŒæ¬¡å¼€å‘çš„è§£å†³æ–¹æ¡ˆ</title>
      <link href="/posts/second-development/"/>
      <url>/posts/second-development/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="Before"><a href="#Before" class="headerlink" title="Before..."></a><code>Before...</code></h3><p>é’ˆå¯¹å¼€æºé¡¹ç›®è¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼Œåœ¨æ—¥å¸¸å¼€å‘ä¸­å·²ç»å¾ˆå¸¸è§äº†ã€‚å®ƒå¯ä»¥ä¸ºæˆ‘ä»¬æä¾›å¾ˆå¤šä¾¿åˆ©ï¼š</p><ul><li><p>å®šåˆ¶éœ€æ±‚ï¼šå¼€æºé¡¹ç›®é€šå¸¸æ˜¯é€šç”¨æ€§çš„ï¼Œä¸ºäº†æ»¡è¶³ç‰¹å®šç»„ç»‡æˆ–é¡¹ç›®çš„éœ€æ±‚ï¼Œå¯èƒ½éœ€è¦å®šåˆ¶åŠŸèƒ½ã€ç•Œé¢ã€‚</p></li><li><p>åŠŸèƒ½æ‰©å±•ï¼šæœ‰æ—¶å€™ï¼Œå¼€æºé¡¹ç›®çš„åŠŸèƒ½ä¸è¶³ä»¥æ»¡è¶³ç‰¹å®šç”¨ä¾‹çš„éœ€æ±‚ï¼Œä½ å¯ä»¥æ‰©å±•å’Œå¢å¼ºç°æœ‰åŠŸèƒ½ã€‚</p></li><li><p>ä¿®å¤é”™è¯¯å’Œæ¼æ´ï¼šå¼€æºé¡¹ç›®å¯èƒ½å­˜åœ¨é”™è¯¯å’Œæ¼æ´ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥æ <code>PR</code> ä¿®å¤ï¼Œè´¡çŒ®ç¤¾åŒºã€‚</p></li><li><p>æ•´åˆä¸äº’æ“ä½œï¼šåœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¯èƒ½éœ€è¦å°†å¤šä¸ªå¼€æºé¡¹ç›®æ•´åˆåœ¨ä¸€èµ·ï¼Œä»¥æ„å»ºæ›´å¤§çš„ç³»ç»Ÿã€‚</p></li><li><p>æ€§èƒ½ä¼˜åŒ–ï¼šä½ å¯ä»¥å¯¹å¼€æºé¡¹ç›®è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ï¼Œä»¥æ»¡è¶³ç‰¹å®šçš„æ€§èƒ½éœ€æ±‚ï¼Œä¾‹å¦‚æé«˜å“åº”æ—¶é—´æˆ–å‡å°‘èµ„æºæ¶ˆè€—ã€‚</p></li></ul><span id="more"></span><p>äº†è§£äº†äºŒæ¬¡å¼€å‘çš„å¿…è¦æ€§ï¼Œä¸‹é¢æˆ‘ä»¬å¼€å§‹å‡†å¤‡å·¥ä½œï¼š</p><h3 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h3><p>å‡†å¤‡ä¸€ä¸ªè¿œç¨‹ä»“åº“ï¼Œç”¨äºå­˜æ”¾äºŒæ¬¡å¼€å‘åçš„ä»£ç ã€‚<del>å½“ç„¶ï¼Œè¿™ä¸ªä»“åº“å¯ä»¥æ˜¯å…¬å¸ç§æœ</del></p><p>å…‹éš†å¼€æºé¡¹ç›®åˆ°æœ¬åœ°ï¼Œå¹¶åˆ›å»ºè‡ªå·±çš„å¼€å‘åˆ†æ”¯ã€‚ä¸ºäº†æ–¹ä¾¿åæœŸç»´æŠ¤ï¼Œå»ºè®®å°†å¼€æºé¡¹ç›®çš„ç‰ˆæœ¬å·ä½œä¸ºåˆ†æ”¯åã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> clone https://github.com/ElemeFE/element.git<span class="token builtin class-name">cd</span> element<span class="token comment"># åŸºäº 2.15.13 ç‰ˆæœ¬åˆ›å»ºè‡ªå·±çš„å¼€å‘åˆ†æ”¯</span><span class="token function">git</span> checkout -b my2.x v2.15.13</code></pre><p>ä¿®æ”¹å½“å‰ <code>remote</code> åç§°ï¼Œå¹¶å°†æ–°çš„ <code>remote</code> æŒ‡å‘è‡ªå·±çš„è¿œç¨‹ä»“åº“ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æŸ¥çœ‹ç°åœ¨çš„ origin</span><span class="token function">git</span> remote -v<span class="token comment"># æ”¹å</span><span class="token function">git</span> remote <span class="token function">rename</span> origin element<span class="token comment"># æ·»åŠ æ–°çš„ remoteï¼Œå…³è”åˆ°è‡ªå·±çš„è¿œç¨‹ä»“åº“</span><span class="token function">git</span> remote <span class="token function">add</span> origin https://github.com/flynna/el-dev.git<span class="token comment"># æ·»åŠ è¿œç¨‹è·Ÿè¸ªï¼Œä¸æœ¬åœ°åˆ†æ”¯å’Œæ–°çš„è¿œç¨‹åˆ†æ”¯ä¹‹é—´çš„å…³è”</span><span class="token function">git</span> branch --set-upstream-to<span class="token operator">=</span>origin/my2.x</code></pre><p>æ¨é€ä»£ç åˆ°è¿œç¨‹</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> push origin my2.x<span class="token comment"># è®¾ç½®äº† --set-upstream-to åï¼Œå¯ä»¥ç®€åŒ–</span><span class="token function">git</span> push<span class="token function">git</span> pull</code></pre><p>å‡†å¤‡å·²å°±ç»ªï¼Œç°åœ¨äºŒæ¬¡å¼€å‘çš„é¡¹ç›®ä»“åº“å’Œé…ç½®å°±æ­å»ºå¥½äº†ã€‚ä½ å¯ä»¥å†™ä¸€äº›è‡ªå·±çš„ä»£ç ç„¶åæ¨é€ï¼ˆæ­¤æ—¶æ¨é€åˆ°çš„æ˜¯è‡ªå·±çš„è¿œç¨‹ä»“åº“ï¼‰</p><h3 id="æ›´æ–°"><a href="#æ›´æ–°" class="headerlink" title="æ›´æ–°"></a>æ›´æ–°</h3><p>å½“å¼€æºé¡¹ç›®æ›´æ–°æ—¶ï¼Œå¦‚æœä½ æœ‰éœ€è¦ï¼Œä½ å¯ä»¥å°†å®ƒæ›´æ–°çš„ä»£ç åˆå¹¶åˆ°è‡ªå·±å¼€å‘çš„åˆ†æ”¯ä¸­ï¼Œç„¶åå†æ¨é€åˆ°åˆ›å»ºçš„è¿œç¨‹ä»“åº“ã€‚</p><p>æ›´æ–°å¼€æºé¡¹ç›®è¿œç«¯åº“çš„ <code>tags</code>ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> fetch element --tags</code></pre><p>åˆå¹¶æ–°çš„åŠŸèƒ½åˆ†æ”¯ï¼ˆ<code>tag</code>ï¼‰åˆ°å½“å‰å¼€å‘åˆ†æ”¯ï¼ˆå‡è®¾æœ‰æ–°çš„èµ„æº <code>v2.15.14</code>ï¼‰ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> merge refs/tags/v2.15.14</code></pre><blockquote><p><strong>æ³¨æ„ï¼š<code>tags</code> æ•°æ®åœ¨ <code>fetch</code> ä¸‹æ¥åæ˜¯ä¸åˆ†è¿œç«¯åº“çš„ï¼ˆå³ä½¿å®ƒæœ‰å¤šä¸ªè¿œç«¯åº“ï¼‰ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥ç›´æ¥åˆå¹¶ï¼Œæ—¥å¸¸å¼€å‘åº”è¯¥æ³¨æ„é¿å…ç›¸åŒ <code>tag</code> å¯¼è‡´å†²çª</strong></p></blockquote><p>æ¨é€æ›´æ–°èµ„æºåˆ°è‡ªå·±çš„è¿œç¨‹ä»“åº“ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> push</code></pre><p>è¿‡ç¨‹å¦‚å›¾ï¼š</p><p><a href="/images/posts/second-development/p1.png"><img src="/images/posts/second-development/p1.png" alt="second-development-p1" loading="lazy"></a></p><p><a href="/images/posts/second-development/p2.png"><img src="/images/posts/second-development/p2.png" alt="second-development-p2" loading="lazy"></a></p>]]></content>
      
      
      <categories>
          
          <category> æ”¶è—å®‰åˆ© </category>
          
          <category> Github </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äºŒæ¬¡å¼€å‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäº Qiankun çš„å¾®å‰ç«¯è§£å†³æ–¹æ¡ˆå®è·µ</title>
      <link href="/share/qiankun/"/>
      <url>/share/qiankun/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="ä»€ä¹ˆæ˜¯å¾®å‰ç«¯ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å¾®å‰ç«¯ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å¾®å‰ç«¯ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å¾®å‰ç«¯ï¼Ÿ</h3><blockquote><p><code>Techniques, strategies and recipes for building a modern web app with multiple teams that can ship features independently. -- Micro Frontends</code></p><p>å¾®å‰ç«¯æ˜¯ä¸€ç§å¤šä¸ªå›¢é˜Ÿé€šè¿‡ç‹¬ç«‹å‘å¸ƒåŠŸèƒ½çš„æ–¹å¼æ¥å…±åŒæ„å»ºç°ä»£åŒ– <code>web</code> åº”ç”¨çš„æŠ€æœ¯æ‰‹æ®µåŠæ–¹æ³•ç­–ç•¥ã€‚</p></blockquote><p>ç®€å•è¯´å°±æ˜¯ï¼š<strong>å°†å‰ç«¯åº”ç”¨ç¨‹åºåˆ†è§£æˆå¤šä¸ªå°å—ï¼Œæ¯ä¸ªå°å—è¢«ç§°ä¸ºå¾®å‰ç«¯ã€‚æ¯ä¸ªå¾®å‰ç«¯éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„éƒ¨åˆ†ï¼Œå¯ä»¥ç”±ä¸åŒçš„å›¢é˜Ÿå¼€å‘å’Œç»´æŠ¤ã€‚è¿™äº›å¾®å‰ç«¯å¯ä»¥ç‹¬ç«‹éƒ¨ç½²ï¼Œç”šè‡³å¯ä»¥ä½¿ç”¨ä¸åŒçš„æŠ€æœ¯æ ˆå’Œæ¡†æ¶å¼€å‘ã€‚æœ€ç»ˆç»„åˆåœ¨ä¸€èµ·å‘ˆç°å‡ºå®Œæ•´çš„å‰ç«¯åº”ç”¨ç¨‹åº</strong></p><span id="more"></span><h3 id="å¾®å‰ç«¯èƒ½å¤Ÿè§£å†³å“ªäº›é—®é¢˜ï¼Ÿ"><a href="#å¾®å‰ç«¯èƒ½å¤Ÿè§£å†³å“ªäº›é—®é¢˜ï¼Ÿ" class="headerlink" title="å¾®å‰ç«¯èƒ½å¤Ÿè§£å†³å“ªäº›é—®é¢˜ï¼Ÿ"></a>å¾®å‰ç«¯èƒ½å¤Ÿè§£å†³å“ªäº›é—®é¢˜ï¼Ÿ</h3><ul><li><p>é™ä½å¼€å‘æˆæœ¬ã€‚åº”ç”¨ç¨‹åºæ—¥æ¸å¤æ‚ï¼Œå¼€å‘æŠ€æœ¯è¿­ä»£ï¼Œæœ‰è®¸å¤šå†å²å·²æœ‰é¡¹ç›®åŠŸèƒ½éœ€è¦åœ¨æ–°é¡¹ç›®ä¸­é›†æˆä½¿ç”¨ã€‚</p></li><li><p>æå‡ç”¨æˆ·ä½“éªŒã€‚æ¨¡å—åˆ†è§£åï¼Œä¸»ç¨‹åºèµ„æºå¤§å°ä¼šå¤§å¹…ç¼©å‡ï¼Œç”¨æˆ·åªæœ‰ä½¿ç”¨åˆ°å…¶ä¸­æŸä¸ªåŠŸèƒ½æ¨¡å—æ—¶æ‰ä¼šåŠ è½½ç›¸åº”èµ„æºã€‚</p></li><li><p>æ›´æ–¹ä¾¿ä¸šåŠ¡é›†æˆæ‰©å±•ã€‚å¾®å‰ç«¯æ›´å…·çµæ´»æ€§ï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚æ·»åŠ æ–°çš„å¾®å‰ç«¯æ¨¡å—ï¼ŒåŒæ—¶ä¸å—æŠ€æœ¯æ ˆé™åˆ¶ã€‚</p></li></ul><h3 id="ä¸ºä»€ä¹ˆé€‰æ‹©-qiankunï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆé€‰æ‹©-qiankunï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆé€‰æ‹© qiankunï¼Ÿ"></a>ä¸ºä»€ä¹ˆé€‰æ‹© <code>qiankun</code>ï¼Ÿ</h3><blockquote><p><code>qiankun</code> æ˜¯ä¸€ä¸ªåŸºäº <code>single-spa</code> çš„å¾®å‰ç«¯å®ç°åº“ï¼Œæ—¨åœ¨å¸®åŠ©å¤§å®¶èƒ½æ›´ç®€å•ã€æ— ç—›çš„æ„å»ºä¸€ä¸ªç”Ÿäº§å¯ç”¨å¾®å‰ç«¯æ¶æ„ç³»ç»Ÿã€‚</p></blockquote><p>ç‰¹æ€§ï¼ˆæ‘˜è‡ª<a href="https://qiankun.umijs.org/zh/guide#%E7%89%B9%E6%80%A7">å®˜ç½‘</a>ï¼‰ï¼š</p><ul><li><p>ğŸ“¦ åŸºäº <code>single-spa</code> å°è£…ï¼Œæä¾›äº†æ›´åŠ å¼€ç®±å³ç”¨çš„ <code>API</code>ã€‚</p></li><li><p>ğŸ“± æŠ€æœ¯æ ˆæ— å…³ï¼Œä»»æ„æŠ€æœ¯æ ˆçš„åº”ç”¨å‡å¯ ä½¿ç”¨&#x2F;æ¥å…¥ï¼Œä¸è®ºæ˜¯ <code>React/Vue/- Angular/JQuery</code> è¿˜æ˜¯å…¶ä»–ç­‰æ¡†æ¶ã€‚</p></li><li><p>ğŸ’ª <code>HTML Entry</code> æ¥å…¥æ–¹å¼ï¼Œè®©ä½ æ¥å…¥å¾®åº”ç”¨åƒä½¿ç”¨ <code>iframe</code> ä¸€æ ·ç®€å•ã€‚</p></li><li><p>ğŸ›¡â€‹ æ ·å¼éš”ç¦»ï¼Œç¡®ä¿å¾®åº”ç”¨ä¹‹é—´æ ·å¼äº’ç›¸ä¸å¹²æ‰°ã€‚</p></li><li><p>ğŸ§³ <code>JS</code> æ²™ç®±ï¼Œç¡®ä¿å¾®åº”ç”¨ä¹‹é—´ å…¨å±€å˜é‡&#x2F;äº‹ä»¶ ä¸å†²çªã€‚</p></li><li><p>âš¡ï¸ èµ„æºé¢„åŠ è½½ï¼Œåœ¨æµè§ˆå™¨ç©ºé—²æ—¶é—´é¢„åŠ è½½æœªæ‰“å¼€çš„å¾®åº”ç”¨èµ„æºï¼ŒåŠ é€Ÿå¾®åº”ç”¨æ‰“å¼€é€Ÿåº¦ã€‚</p></li><li><p>ğŸ”Œ <code>umi</code> æ’ä»¶ï¼Œæä¾›äº† <code>@umijs/plugin-qiankun</code> ä¾› <code>umi</code> åº”ç”¨ä¸€é”®åˆ‡æ¢æˆå¾®å‰ç«¯æ¶æ„ç³»ç»Ÿã€‚</p></li></ul><h3 id="äº†è§£-single-spa"><a href="#äº†è§£-single-spa" class="headerlink" title="äº†è§£ single-spa"></a>äº†è§£ <code>single-spa</code></h3><blockquote><p><code>single-spa</code> æ˜¯ä¸€ä¸ª <code>JavaScript</code> å‰ç«¯å¾®å‰ç«¯æ¡†æ¶ï¼Œå®ƒå…è®¸æ‚¨æ„å»ºå’Œç»„ç»‡å¤šä¸ªç‹¬ç«‹çš„å‰ç«¯åº”ç”¨ç¨‹åºï¼ˆå¾®å‰ç«¯ï¼‰ä»¥å®ç°å•ä¸€é¡µé¢åº”ç”¨ç¨‹åºï¼ˆ<code>SPA</code>ï¼‰çš„é›†æˆ</p></blockquote><p>å®ƒåšçš„äº‹æƒ…å…¶å®å°±æ˜¯: <strong>æ³¨å†Œä¸€ä¸ªå¾®åº”ç”¨ â€”&gt; ç›‘å¬ <code>URL</code> å˜åŒ– â€”&gt; åŠ è½½å¾®åº”ç”¨ â€”&gt; æ¸²æŸ“å¾®åº”ç”¨ â€”&gt; å¸è½½å¾®åº”ç”¨</strong>ã€‚</p><p>å¤§è‡´æ˜¯è¿™æ ·ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> singleSpa <span class="token keyword">from</span> <span class="token string">'single-spa'</span><span class="token punctuation">;</span><span class="token comment">// å®šä¹‰å¾®åº”ç”¨çš„é…ç½®</span><span class="token keyword">const</span> microAppConfig <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token function-variable function">app</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token comment">// micro-app ç›¸å…³èµ„æº</span>    <span class="token function">loadScripts</span><span class="token punctuation">(</span><span class="token string">'./chunk-a.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">loadScripts</span><span class="token punctuation">(</span><span class="token string">'./chunk-b.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">loadScripts</span><span class="token punctuation">(</span><span class="token string">'./entry.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token comment">// åŠ è½½å¾®åº”ç”¨çš„å…¥å£æ¨¡å—</span>  activeWhen<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'/micro-app'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// è§¦å‘å¾®åº”ç”¨çš„URLè·¯å¾„</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">// æ³¨å†Œå¾®åº”ç”¨</span>singleSpa<span class="token punctuation">.</span><span class="token function">registerApplication</span><span class="token punctuation">(</span><span class="token string">'micro-app'</span><span class="token punctuation">,</span> microAppConfig<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// å¯åŠ¨Single-spa</span>singleSpa<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>å­åº”ç”¨æä¾›ç›¸å¯¹åº”çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œæ–¹ä¾¿ <code>single-spa</code> è¿›è¡Œç®¡ç†ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// micro-app/src/index.js</span><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span><span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App'</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">bootstrap</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// åˆå§‹åŒ–å¾®åº”ç”¨ï¼Œå¦‚æœæœ‰éœ€è¦çš„è¯</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">mount</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">unmount</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  ReactDOM<span class="token punctuation">.</span><span class="token function">unmountComponentAtNode</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// å¯¼å‡ºç”Ÿå‘½å‘¨æœŸé’©å­</span><span class="token keyword">export</span> <span class="token punctuation">&#123;</span> bootstrap<span class="token punctuation">,</span> mount<span class="token punctuation">,</span> unmount <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><p>å¦‚æ­¤ä¾¿èƒ½å¤Ÿæ»¡è¶³å¾®å‰ç«¯çš„åŸºæœ¬éœ€æ±‚ï¼š<code>URL</code> å˜åŒ–çš„æ—¶å€™åŠ è½½&#x2F;å¸è½½å­åº”ç”¨ã€‚</p><p>ä½†å®ƒæœ¬èº«å¹¶ä¸å¤Ÿå®Œå–„ï¼Œæ¯”å¦‚ä¸èƒ½å®ç° <code>JS/CSS</code> éš”ç¦»ï¼Œå¯èƒ½å­˜åœ¨é€»è¾‘&#x2F;æ ·å¼å†²çªï¼Œæ­¤å¤–å­åº”ç”¨ä¹‹é—´çš„é€šä¿¡å¤„ç†ä¹Ÿéœ€è¦è‡ªå·±è§£å†³â€¦</p><h3 id="äº†è§£-qiankun"><a href="#äº†è§£-qiankun" class="headerlink" title="äº†è§£ qiankun"></a>äº†è§£ <code>qiankun</code></h3><p><code>qiankun</code> æ˜¯åŸºäº <code>single-spa</code> å®ç°çš„ï¼Œå®ƒè§£å†³äº† <code>single-spa</code> çš„ä¸€äº›ç—›ç‚¹ï¼Œæ˜¯æ›´å®Œå–„çš„å¾®å‰ç«¯è§£å†³æ–¹æ¡ˆã€‚</p><h4 id="èµ„æºè‡ªåŠ¨åŒ–åŠ è½½"><a href="#èµ„æºè‡ªåŠ¨åŒ–åŠ è½½" class="headerlink" title="èµ„æºè‡ªåŠ¨åŒ–åŠ è½½"></a>èµ„æºè‡ªåŠ¨åŒ–åŠ è½½</h4><p><code>qiankun</code> ä¼šåŠ è½½å­åº”ç”¨å…¥å£çš„ <code>html</code>ï¼Œå°† <code>head</code> éƒ¨åˆ†è½¬æ¢ä¸º <code>qiankun-head</code>ï¼Œè§£æå‡º <code>scripts/styles</code>ï¼Œå•ç‹¬å»åŠ è½½ï¼ˆå®ç°åœ¨ <code> import-html-entry</code> è¿™ä¸ªæ¨¡å—é‡Œï¼‰ã€‚è€Œæ— éœ€å¼€å‘è€…æŒ‡å®šå¦‚ä½•å»åŠ è½½èµ„æºï¼Œå¦‚å›¾ï¼š</p><p><a href="/images/share/qiankun/p1.png"><img src="/images/share/qiankun/p1.png" alt="qiankun-p1" loading="lazy"></a></p><p><code>single-spa</code> çš„å®ç°å«åš <code>Config Entry</code> æˆ–è€… <code>JS Entry</code>ï¼Œä¹Ÿå°±æ˜¯è¦è‡ªå·±æŒ‡å®šæ€ä¹ˆåŠ è½½å­åº”ç”¨ï¼Œè€Œ <code>qiankun</code> è¿™ç§å«åš <code>Html Entry</code>ï¼Œä¼šè‡ªåŠ¨è§£æ <code>html</code> å®ç°åŠ è½½ã€‚</p><h4 id="JSã€CSS-æ²™ç®±"><a href="#JSã€CSS-æ²™ç®±" class="headerlink" title="JSã€CSS æ²™ç®±"></a><code>JSã€CSS</code> æ²™ç®±</h4><p>ç†è®ºä¸Šéš”ç¦» <code>JS</code> åªéœ€è¦å®Œæˆ <code>window</code> å…¨å±€å˜é‡éš”ç¦»å³å¯ï¼Œå‡½æ•°å†…æœ¬å°±æ˜¯åœ¨ä¸åŒä½œç”¨åŸŸä¸‹æ‰§è¡Œçš„ã€‚</p><p>å¯å®è¡Œçš„æ–¹æ¡ˆï¼š</p><ul><li><p><code>å¿«ç…§ã€diff æ¯”å¯¹</code> åŠ è½½ä¹‹å‰è®°å½•ï¼Œå¸è½½åå†æ¢å¤ã€‚ç¼ºé™·å°±æ˜¯ä¸èƒ½åŒæ—¶å­˜åœ¨å¤šä¸ªå­åº”ç”¨ã€‚</p></li><li><p><code>Proxy ä»£ç†</code>ï¼Œé€šè¿‡ä»£ç†å¯¹è±¡è®¿é—®ã€‚è¿™ä¹Ÿæ˜¯æ¯”è¾ƒå¸¸ç”¨çš„æ–¹æ¡ˆã€‚</p></li></ul><p><code>CSS</code> çš„éš”ç¦»å¯å®è¡Œæ–¹æ¡ˆï¼š</p><ul><li><p>ä½¿ç”¨ <code>shadow dom</code> å®ç°ï¼Œè¿™æ˜¯æµè§ˆå™¨æ”¯æŒçš„ç‰¹æ€§ï¼Œ<code>shadow root</code> çš„ <code>dom</code> ä¸ä¼šå½±å“å…¶ä»– <code>dom</code>ã€‚</p></li><li><p><code>scoped css</code>ï¼Œä¸ºå…ƒç´ æ·»åŠ å±æ€§ <code>id</code>ï¼Œåœ¨ <code>css</code> é‡Œé€šè¿‡å‰ç¼€è¿›è¡Œçº¦æŸã€‚</p></li></ul><p>ä»¥ä¸Šæ–¹æ¡ˆéƒ½å¯ä»¥é€šè¿‡é…ç½®æ¥é€‰æ‹©ã€‚</p><h4 id="å­åº”ç”¨é—´é€šä¿¡"><a href="#å­åº”ç”¨é—´é€šä¿¡" class="headerlink" title="å­åº”ç”¨é—´é€šä¿¡"></a>å­åº”ç”¨é—´é€šä¿¡</h4><ul><li>é€šè¿‡æ³¨å†Œæ—¶ä¼ å…¥çš„ <code>props</code> å’Œå›è°ƒæ¥å®ç°çŠ¶æ€ç®¡ç†ï¼Œå¦‚ä¸‹ï¼š</li></ul><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token function">registerMicroApps</span><span class="token punctuation">(</span><span class="token punctuation">[</span>  <span class="token punctuation">&#123;</span>    name<span class="token operator">:</span> <span class="token string">'sub-app'</span><span class="token punctuation">,</span>    entry<span class="token operator">:</span> <span class="token string">'http://localhost:3001'</span><span class="token punctuation">,</span> <span class="token comment">// å­åº”ç”¨çš„å…¥å£</span>    container<span class="token operator">:</span> <span class="token string">'#sub-app-container'</span><span class="token punctuation">,</span>    activeRule<span class="token operator">:</span> <span class="token string">'/sub-app'</span><span class="token punctuation">,</span>    props<span class="token operator">:</span> <span class="token punctuation">&#123;</span>      sharedState<span class="token operator">:</span> <span class="token punctuation">&#123;</span>        message<span class="token operator">:</span> <span class="token string">'Hello from Main App'</span><span class="token punctuation">,</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token comment">// å°†å…±äº«çŠ¶æ€ä¼ é€’ç»™å­åº”ç”¨</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>å­åº”ç”¨ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> container <span class="token punctuation">&#125;</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>  ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>    <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>    container <span class="token operator">?</span> container<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#root'</span><span class="token punctuation">)</span> <span class="token operator">:</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#root'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">mount</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> sharedState <span class="token punctuation">&#125;</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>  <span class="token function">render</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><ul><li>é€šè¿‡ <code>initGlobalState</code> æ¥å®ç°çŠ¶æ€ç®¡ç†</li></ul><p>ä¸»åº”ç”¨é‡Œå®šä¹‰å­åº”ç”¨è·å–å…¨å±€çŠ¶æ€çš„æ–¹æ³•ï¼š<code>getGlobalState</code> å’Œ ç›‘å¬çŠ¶æ€å˜åŒ–çš„ <code>onGlobalStateChange</code>ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> initGlobalState <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'qiankun'</span><span class="token punctuation">;</span><span class="token comment">// åˆå§‹åŒ–å…¨å±€çŠ¶æ€</span><span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token function">initGlobalState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  count<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// å®šä¹‰ä¸€ä¸ªæ”¹å˜çŠ¶æ€çš„æ–¹æ³•</span>actions<span class="token punctuation">.</span><span class="token function">onGlobalStateChange</span><span class="token punctuation">(</span><span class="token punctuation">(</span>newState<span class="token punctuation">,</span> prev<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Global state changed:'</span><span class="token punctuation">,</span> newState<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>actions<span class="token punctuation">.</span><span class="token function-variable function">getGlobalState</span> <span class="token operator">=</span> <span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> key <span class="token operator">?</span> initialState<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">:</span> initialState<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">// å®šä¹‰ä¸€ä¸ªè®¾ç½®çŠ¶æ€çš„æ–¹æ³•</span>actions<span class="token punctuation">.</span><span class="token function">setGlobalState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> count<span class="token operator">:</span> <span class="token number">42</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// å¯¼å‡º actions å¯¹è±¡</span><span class="token keyword">export</span> <span class="token keyword">default</span> actions<span class="token punctuation">;</span></code></pre><p>å­åº”ç”¨é‡Œé€šè¿‡ <code>props</code> è·å–çŠ¶æ€å’Œä¿®æ”¹çŠ¶æ€ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">mount</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> setGlobalState<span class="token punctuation">,</span> getGlobalState <span class="token punctuation">&#125;</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>  props<span class="token punctuation">.</span><span class="token function">setGlobalState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> message<span class="token operator">:</span> <span class="token string">'hello'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="å®è·µ"><a href="#å®è·µ" class="headerlink" title="å®è·µ"></a>å®è·µ</h3><p>æœ¬æ¬¡ <code>qiankun</code> å®è·µæ˜¯åœ¨ <code>vue</code> åº”ç”¨ï¼ˆ<code>hash</code> æ¨¡å¼ï¼‰é‡Œé›†æˆ <code>umi</code> å­åº”ç”¨ï¼ˆ<code>hash</code> æ¨¡å¼ï¼‰çš„éƒ¨åˆ†é¡µé¢ã€‚</p><p>åœ¨æ”¹é€ ä¹‹å‰ï¼Œä¸¤ä¸ªåº”ç”¨éƒ½æ˜¯å•ç‹¬éƒ¨ç½²è¿è¡Œçš„ï¼Œæ˜¯é€šè¿‡ <code>iframe</code> çš„æ–¹å¼è¿›è¡Œé›†æˆã€‚æ‰€ä»¥è¿™é‡Œé‡‡ç”¨äº† <code>loadMicroApp</code> è¿›è¡Œå­åº”ç”¨çš„åŠ è½½ï¼š</p><h4 id="ä¸»åº”ç”¨æ”¹é€ "><a href="#ä¸»åº”ç”¨æ”¹é€ " class="headerlink" title="ä¸»åº”ç”¨æ”¹é€ "></a>ä¸»åº”ç”¨æ”¹é€ </h4><p>é¦–å…ˆå®‰è£… <code>qiankun</code>ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">yarn</span> <span class="token function">add</span> qiankun</code></pre><p>ä¸‹é¢å¼€å§‹é¡µé¢ç»„ä»¶æ”¹é€ ï¼Œé€šè¿‡ <code>loadMicroApp</code> åœ¨ç»„ä»¶å†…éƒ¨åŠ¨æ€åŠ è½½å’Œå¸è½½å­åº”ç”¨ã€‚ä¾‹å¦‚ä¹‹å‰é›†æˆäº†ä¸€ä¸ª <code>http://www.site.com:8000/appA/#/pageA</code> è¿™æ ·ä¸€ä¸ªé¡µé¢ã€‚è¿™ä¸ªåœ°å€çš„ç»„æˆï¼š<code>http://www.site.com:8000/appA/</code> æ˜¯å­åº”ç”¨ <code>appA</code> çš„é¡¹ç›®æ ¹åœ°å€ï¼Œæˆ‘ä»¬éœ€è¦é›†æˆå®ƒçš„ <code>/pageA</code> é¡µé¢ï¼š</p><p>æ·»åŠ ç›¸å…³çš„è·¯ç”±ï¼Œå¹¶ä¿è¯ä¸€è‡´æ€§ï¼ˆæœ€åæ€»ç»“æœ‰è§£é‡Šä¸ºä»€ä¹ˆéœ€è¦æ·»åŠ å­åº”ç”¨ç›¸å…³è·¯ç”±ï¼‰ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// router/index.ts</span><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span><span class="token keyword">import</span> VueRouter <span class="token keyword">from</span> <span class="token string">'vue-router'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">&#123;</span> RouteConfig <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span><span class="token punctuation">;</span>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueRouter<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> routes<span class="token operator">:</span> RouteConfig<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>  <span class="token punctuation">&#123;</span>    path<span class="token operator">:</span> <span class="token string">'/pageA'</span><span class="token punctuation">,</span> <span class="token comment">// å’Œå­åº”ç”¨è·¯ç”±ä¸€è‡´ ï¼ˆå½“ç„¶ä½ å¯ä»¥æ·»åŠ è‡ªå®šä¹‰çš„ä¸»åº”ç”¨è·¯ç”±å‰ç¼€ï¼Œä¾‹å¦‚ /pcï¼Œå³ /pc/pageAï¼Œç„¶åæ·»åŠ ç›¸å…³é…ç½®å³å¯ï¼Œåé¢æœ‰æåˆ°ï¼‰</span>    name<span class="token operator">:</span> <span class="token string">'pageA'</span><span class="token punctuation">,</span>    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/pageA/index.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  routes<span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> router<span class="token punctuation">;</span></code></pre><p>ç„¶ååœ¨ <code>pageA/index.vue</code> ç»„ä»¶ä¸­æ‰‹åŠ¨åŠ è½½ç›¸å…³é¡µé¢èµ„æºï¼š</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!-- pageA/index.vue --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>containerRef<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">  <span class="token keyword">import</span> type <span class="token punctuation">&#123;</span> MicroApp <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'qiakun'</span><span class="token punctuation">;</span>  <span class="token keyword">import</span> <span class="token punctuation">&#123;</span> loadMicroApp <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'qiankun'</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> containerRef <span class="token operator">=</span> ref<span class="token operator">&lt;</span>HTMLDivElement<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> app <span class="token operator">=</span> ref<span class="token operator">&lt;</span>MicroApp<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// å­åº”ç”¨ appA çš„æ ¹åœ°å€</span>  <span class="token keyword">const</span> entryUrl <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://www.site.com:8000/appA/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>containerRef<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      app<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token function">loadMicroApp</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'appA'</span><span class="token punctuation">,</span>        <span class="token literal-property property">entry</span><span class="token operator">:</span> entryUrl<span class="token punctuation">.</span>value<span class="token punctuation">,</span> <span class="token comment">// å­åº”ç”¨å…¥å£ index.html</span>        <span class="token literal-property property">container</span><span class="token operator">:</span> containerRef<span class="token punctuation">.</span>value<span class="token punctuation">,</span> <span class="token comment">// æŒ‚è½½çš„ dom</span>        <span class="token comment">// eg.1</span>        <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>          <span class="token literal-property property">history</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'hash'</span><span class="token punctuation">,</span> <span class="token comment">// æŒ‡å®šå­åº”ç”¨ä½¿ç”¨çš„è·¯ç”±æ¨¡å¼</span>          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>          <span class="token comment">// è®¿é—®å­åº”ç”¨æ—¶æµè§ˆå™¨çš„è·¯ç”±å‰ç¼€ï¼Œé»˜è®¤å°±æ˜¯ /ï¼Œå¦‚æœåƒä¸Šé¢æˆ‘æåˆ°çš„è·¯ç”±å‰ç¼€æ·»åŠ äº† /pcï¼Œé‚£ä¹ˆè¿™é‡Œå°±æ˜¯ /pc</span>          <span class="token comment">// base: '/' æ—¶ï¼š /pageA -> /pageA, base: '/pc' æ—¶ï¼š /pc/pageAï¼ˆä¸»ï¼‰ -> /pageAï¼ˆå­ï¼‰</span>          <span class="token literal-property property">base</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token comment">// eg.2</span>        <span class="token comment">// props æŒ‡å®šé»˜è®¤çš„å­åº”ç”¨é¡µé¢ æ›´åŠ çš„åŠ¨æ€åŒ–ï¼Œå°±åƒæ˜¯ä½¿ç”¨ iframe ä¸€æ ·æ–¹ä¾¿</span>        <span class="token comment">// props: &#123;</span>        <span class="token comment">//   history: &#123;</span>        <span class="token comment">//     // å­åº”ç”¨é‡Œä¸æ˜¯è¿™ä¸ªæ¨¡å¼ï¼Œè¿™é‡ŒåŒæ ·å¯ä»¥è®¾ç½®ä¸º memory</span>        <span class="token comment">//     // memory æ¨¡å¼ä¸‹ï¼Œå­åº”ç”¨è·¯ç”±è·³è½¬ä¸æ”¹å˜æµè§ˆå™¨çš„ URlï¼Œé€šå¸¸ç”¨äº mobile ç«¯</span>        <span class="token comment">//     type: 'memory',</span>        <span class="token comment">//     initialEntries: [initEntry.value], // è®¾ç½®é»˜è®¤çš„å­åº”ç”¨è·¯ç”±ä¿¡æ¯</span>        <span class="token comment">//     initialIndex: 0, // ä¸ä¼ é»˜è®¤å– initialEntries çš„ç¬¬ä¸€ä¸ªå€¼ï¼Œå³é»˜è®¤è®¿é—®çš„å­åº”ç”¨è·¯ç”±</span>        <span class="token comment">//   &#125;,</span>        <span class="token comment">// &#125;,</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">onBeforeUnmount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    app<span class="token punctuation">.</span>value<span class="token operator">?.</span><span class="token function">unmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>less<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre><p>è¿™é‡Œå¹¶æ²¡æœ‰æŒ‡å®šé»˜è®¤æ‰“å¼€çš„å­åº”ç”¨è·¯ç”±é¡µé¢ï¼Œæ‰€ä»¥ä½¿ç”¨çš„æ˜¯å­åº”ç”¨æ ¹è·¯ç”±ã€<strong>è¿™é‡Œä¸æ˜¯éœ€è¦ <code>/pageA</code> å—ï¼Ÿä¸¤ç§æ–¹æ¡ˆï¼šä¸€ç§æ˜¯ä¸Šé¢çš„é…ç½®æŒ‡å®šè·¯ç”±æ¨¡å¼ä¸º <code>memory</code>ï¼Œç„¶åé…ç½®é»˜è®¤çš„è·¯ç”±é¡µé¢ï¼ˆå¹¶æ— é™åˆ¶å­åº”ç”¨éœ€è¦æ˜¯è¿™ä¸ªè·¯ç”±æ¨¡å¼ï¼‰ï¼›ä¸€ç§æ˜¯ä¸ºå­åº”ç”¨æ ¹è·¯ç”±æ·»åŠ é‡å®šå‘</strong>ã€‘ã€‚</p><p>è‡³æ­¤ï¼Œä¸»åº”ç”¨çš„æ”¹é€ å°±å®Œæˆäº†ï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Ÿ</p><h4 id="å­åº”ç”¨æ”¹é€ "><a href="#å­åº”ç”¨æ”¹é€ " class="headerlink" title="å­åº”ç”¨æ”¹é€ "></a>å­åº”ç”¨æ”¹é€ </h4><p><code>umi</code> é¡¹ç›®å†…ç½®äº† <code>qiankun</code>ï¼Œåªéœ€è¦å¼€å¯é…ç½®å³å¯ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// /config/config.ts</span><span class="token keyword">const</span> pathPrefix <span class="token operator">=</span> isDev <span class="token operator">?</span> <span class="token string">'/'</span> <span class="token operator">:</span> <span class="token string">'/appA/'</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  <span class="token comment">// ...</span>  hash<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  base<span class="token operator">:</span> pathPrefix<span class="token punctuation">,</span>  publicPath<span class="token operator">:</span> pathPrefix<span class="token punctuation">,</span>  headScripts<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span> src<span class="token operator">:</span> <span class="token string">'./scripts/loading.js'</span><span class="token punctuation">,</span> async<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// ç±»ä¼¼è¿™æ ·çš„é…ç½®ï¼Œå°†èµ„æºè·¯å¾„æ”¹ä¸ºç›¸å¯¹è·¯å¾„</span>  <span class="token comment">// å¼€å¯ qiankun</span>  qiankun<span class="token operator">:</span> <span class="token punctuation">&#123;</span>    slave<span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ç¡®ä¿å­åº”ç”¨ä¸­å­˜åœ¨åˆšåˆšä¸»åº”ç”¨é›†æˆçš„è·¯ç”±ï¼Œæ²¡æœ‰åˆ™æ·»åŠ ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// /config/routes.ts</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">[</span>  <span class="token punctuation">&#123;</span>    path<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>    redirect<span class="token operator">:</span> <span class="token string">'/pageA'</span><span class="token punctuation">,</span> <span class="token comment">// è¿™é‡Œå†™äº† redirectï¼Œæ‰€ä»¥ä¸»åº”ç”¨æŒ‚è½½æ—¶å¹¶æ²¡æœ‰æŒ‡å®šå…·ä½“è·¯ç”±</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#123;</span>    path<span class="token operator">:</span> <span class="token string">'/pageA'</span><span class="token punctuation">,</span>    component<span class="token operator">:</span> <span class="token string">'@/pages/pageA'</span><span class="token punctuation">,</span> <span class="token comment">// ç»„ä»¶æ­£å¸¸ç¼–å†™å³å¯ï¼Œæ— éœ€ç‰¹æ®Šå¤„ç†</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><div class="info"><blockquote><p><code>Tips</code>:</p><ol><li><p>åŒºåˆ† <code>loadMicroApp</code> å’Œ <code>registerMicroApps</code> ä¸¤è€…åœ¨è·¯ç”±è§„åˆ™ä¸Šçš„å·®å¼‚ï¼šå‰è€…æœ¬èº«å¹¶æ²¡æœ‰å†…ç½®è·¯ç”±çš„ç®¡ç†å’Œæ‹¦æˆªæœºåˆ¶ï¼Œæ‰€ä»¥éœ€è¦ä¿è¯å­åº”ç”¨è·¯ç”±å’Œä¸»åº”ç”¨è·¯ç”±ä¸€è‡´ï¼Œé˜²æ­¢è§¦å‘æµè§ˆå™¨çš„é¡µé¢åˆ·æ–°è¡Œä¸ºï¼ˆ<code>memory</code> è·¯ç”±æ¨¡å¼é™¤å¤–ï¼‰ã€‚åè€…é€šè¿‡åŒ¹é…åˆ° <code>activeRule</code> æ—¶ï¼ŒåŠ è½½å­åº”ç”¨æ¨¡å—ï¼Œå†…éƒ¨å®ç°äº†è·¯ç”±æ‹¦æˆªæœºåˆ¶ï¼Œæ‰€ä»¥æ— éœ€ä¿è¯å­åº”ç”¨è·¯ç”±å’Œä¸»åº”ç”¨è·¯ç”±ä¸€è‡´ã€‚</p></li><li><p><code>loadMicroApp</code> æ›´é€‚ç”¨äºåŠ¨æ€å’Œä¸ªåˆ«å­åº”ç”¨åŠ è½½çš„åœºæ™¯ï¼ˆä¾‹å¦‚ä¹‹å‰ <code>iframe</code> é›†æˆæŸä¸ªé¡µé¢æ—¶ï¼‰ï¼Œè€Œ <code>registerMicroApps</code> é€‚ç”¨äºæ•´ä½“çš„å­åº”ç”¨é…ç½®ç®¡ç†ã€‚</p></li><li><p>åªæœ‰ <code>memory</code> è·¯ç”±æ¨¡å¼ä¸‹æ‰èƒ½é€šè¿‡ <code>initialEntries</code> è®¾ç½®åˆå§‹åŒ–è·¯ç”±ï¼ˆè¿™æ— å…³ä¹é‡‡ç”¨çš„æ˜¯ <code>loadMicroApp</code> è¿˜æ˜¯ <code>registerMicroApps</code>ï¼‰ã€‚</p></li></ol></blockquote></div>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> å¾®å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> qiankun </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäº zip-stream å®ç°æ‰¹é‡æ–‡ä»¶çš„æ‰“åŒ…å‹ç¼©ä¸‹è½½</title>
      <link href="/share/download-zip-file/"/>
      <url>/share/download-zip-file/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><p>ä¹‹å‰çš„ä¸€ä¸ªé¡¹ç›®éœ€æ±‚ï¼šâ€œç”¨æˆ·ä»åˆ—è¡¨ä¸­å‹¾é€‰ä¸€äº›æ•°æ®ï¼Œè¿™äº›æ•°æ®åŒ…å«äº†æ–‡ä»¶ä¿¡æ¯ã€‚éœ€è¦ä¸‹è½½æ‰€å‹¾é€‰æ•°æ®ä¸­çš„æ‰€æœ‰æ–‡ä»¶â€</p><p>ç›´æ¥é€šè¿‡ä¼ ç»Ÿæ–¹å¼ <code>location.href æˆ–è€… aæ ‡ç­¾</code> ä¸‹è½½ï¼Œä¼šå‘ç°å¹¶ä¸èƒ½å¹¶è¡Œä¸‹è½½ï¼Œæœ€å¤šåªèƒ½åŒæ—¶ä¸‹è½½ä¸€ä¸ªæ–‡ä»¶â€¦</p><p>ç„¶åå°è¯•é€šè¿‡åŸºäº <code>iframe</code> å¹¶è¡Œä¸‹è½½ï¼Œä½†ä¼šåœ¨æµè§ˆå™¨ä¸Šäº§ç”Ÿå¾ˆå¤šçš„ä¸‹è½½ä»»åŠ¡ï¼Œç”Ÿæˆä¸€ä¸²çš„æ–‡ä»¶åœ¨æµè§ˆå™¨åº•éƒ¨æ˜¾ç¤ºï¼Œçœ‹ç€éƒ½å¾ˆä¸ç§‘å­¦â€¦</p><div class="info"><blockquote><p>ä¸ºä»€ä¹ˆæ˜¯åŸºäº <code>iframe</code> è€Œä¸æ˜¯ <code>a</code> é“¾æ¥ä¸‹è½½ï¼Ÿ</p><p>å—æµè§ˆå™¨å®‰å…¨ç­–ç•¥å½±å“ï¼Œæµè§ˆå™¨ä¼šé˜»æ­¢è¶…è¿‡ä¸€ä¸ªä¸‹è½½ä»»åŠ¡çš„è¯·æ±‚ï¼Œå¦‚æœå­˜åœ¨å¤šä¸ªï¼Œä¼šå–æ¶ˆæ‰å‰é¢çš„ä¸‹è½½ä»»åŠ¡ã€‚</p><p>é™¤äº†ä½¿ç”¨ <code>iframe</code> ä»¥å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡ <code>setTimeout</code> æ¥è§„é¿ï¼Œï¼ˆä½†éœ€è¦çŸ¥é“ä¸Šä¸€ä¸ªä»»åŠ¡çš„ä¸‹è½½æ˜¯å¦å®Œæˆï¼Œä¸”ç†è®ºä¸Šä¹Ÿå¹¶ä¸æ˜¯å¹¶è¡Œä¸‹è½½ï¼‰</p></blockquote></div><p>æœ€åæƒ³äº†ä¸‹è¿˜æ˜¯åŸºäº <code>node</code> åœ¨ä¸­é—´å±‚å°è£…ä¸€ä¸ª <code>zip</code> çš„ä¸‹è½½æ¥å£ï¼Œå°†è¿™ä¸€æ‰¹æ–‡ä»¶ç»Ÿä¸€æ‰“åŒ…å¤„ç†å†ä¾›ç»™å‰ç«¯ä¸‹è½½ã€‚</p><span id="more"></span><h3 id="å®¢æˆ·ç«¯å®ç°"><a href="#å®¢æˆ·ç«¯å®ç°" class="headerlink" title="å®¢æˆ·ç«¯å®ç°"></a>å®¢æˆ·ç«¯å®ç°</h3><h4 id="åŸºäº-POST-ä¸‹è½½"><a href="#åŸºäº-POST-ä¸‹è½½" class="headerlink" title="åŸºäº POST ä¸‹è½½"></a>åŸºäº <code>POST</code> ä¸‹è½½</h4><p>é€šå¸¸æˆ‘ä»¬ä¸Šä¼ æ–‡ä»¶æ•°æ®åï¼Œéƒ½æ˜¯å°†æ–‡ä»¶å¯è®¿é—®è·¯å¾„ä½œä¸ºå€¼å­˜åœ¨è¡¨å•é‡Œï¼Œå½“æˆ‘ä»¬éœ€è¦æ‰¹é‡ä¸‹è½½æ—¶ï¼ˆå‰ææ˜¯åç«¯å¹¶æ²¡æœ‰å®ç°è¿™ä¸ªæ¥å£ï¼Œéœ€è¦æˆ‘ä»¬åœ¨ä¸­é—´å±‚è‡ªå·±å°è£…å®ç°ï¼‰ï¼Œéœ€è¦å°†è¿™äº›è·¯å¾„æ‹¼æ¥åˆ° <code>query</code> ä¸­ï¼Œå¾ˆå®¹æ˜“å°±ä¼šå¯¼è‡´è·¯å¾„è¿‡é•¿è¶…å‡ºæµè§ˆå™¨é™åˆ¶ã€‚æ­¤æ—¶å°±éœ€è¦æˆ‘ä»¬é€šè¿‡ <code>POST</code> æ–¹å¼è¿›è¡Œä¸‹è½½ã€‚</p><p>å‰ç«¯åªéœ€è¦å°†è¿”å›çš„æ–‡ä»¶æµé€šè¿‡ <code>blob</code> çš„æ–¹å¼ä¸‹è½½åˆ°å®¢æˆ·ç«¯å³å¯ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">download</span><span class="token punctuation">(</span>file<span class="token operator">:</span> Blob<span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> link <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  link<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>  link<span class="token punctuation">.</span>download <span class="token operator">=</span> name<span class="token punctuation">;</span>  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">;</span>  link<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">revokeObjectURL</span><span class="token punctuation">(</span>link<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">downloadFiles</span><span class="token punctuation">(</span>files<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> path<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> zipRes <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/downloadFilesZip</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>    method<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>    data<span class="token operator">:</span> <span class="token punctuation">&#123;</span> list<span class="token operator">:</span> files <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    responseType<span class="token operator">:</span> <span class="token string">'blob'</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> blob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span>zipStreamRes<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> type<span class="token operator">:</span> <span class="token string">'application/octet-stream'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">download</span><span class="token punctuation">(</span>blob<span class="token punctuation">,</span> <span class="token string">'é™„ä»¶èµ„æº.zip'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="åŸºäº-GET-ä¸‹è½½ï¼ˆæ¨èï¼‰"><a href="#åŸºäº-GET-ä¸‹è½½ï¼ˆæ¨èï¼‰" class="headerlink" title="åŸºäº GET ä¸‹è½½ï¼ˆæ¨èï¼‰"></a>åŸºäº <code>GET</code> ä¸‹è½½ï¼ˆæ¨èï¼‰</h4><p>ä¸ºäº†è§„é¿ä¸Šé¢æåˆ°çš„ <code>GET</code> é“¾æ¥è¶…é•¿çš„é—®é¢˜ï¼Œå¯ä»¥å…ˆè°ƒç”¨ <code>POST</code> å°†éœ€è¦ä¸‹è½½çš„æ–‡ä»¶ä»»åŠ¡å­˜åœ¨ <code>session</code> ä¸­ï¼Œç„¶åå†è°ƒç”¨ <code>GET</code> æ‰§è¡Œä¸‹è½½ã€‚</p><div class="info"><blockquote><p>ä¸ºä»€ä¹ˆå‰é¢æåˆ°äº† <code>GET</code> çš„åŠ£åŠ¿ï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦ä½¿ç”¨ <code>GET</code> è¿›è¡Œä¸‹è½½ï¼Ÿ</p><p><code>POST</code> è¯·æ±‚ä¸‹è½½é€šå¸¸æ˜¯éœ€è¦å‰ç«¯ç”Ÿæˆ <code>Blob</code> æ–‡ä»¶å¯¹è±¡ï¼Œè€Œè¿™åˆæ˜¯ç›´æ¥å­˜å‚¨åœ¨å†…å­˜å½“ä¸­çš„ï¼Œæ„å‘³ç€å½“æ–‡ä»¶è¿‡å¤§çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸‹è½½å¼‚å¸¸ã€‚</p></blockquote></div><p>æ”¹é€ ä¸€ä¸‹å‰é¢çš„ <code>POST</code> ä¸‹è½½ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">downloadFiles</span><span class="token punctuation">(</span>files<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> path<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// è°ƒç”¨æ¥å£ï¼Œåªæ˜¯å°† files æ•°æ®å­˜åˆ° sessionï¼Œè€ŒéçœŸæ­£æ„ä¹‰ä¸Šçš„ä¸‹è½½</span>  <span class="token keyword">await</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/setupDownloadFilesZip</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> method<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token punctuation">&#123;</span> list<span class="token operator">:</span> files <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ä¸­é—´å±‚æä¾›çš„ GET /downloadFilesZip æ¥å£ä¸‹è½½</span>  location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/downloadFilesZip</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="æœåŠ¡ç«¯å®ç°"><a href="#æœåŠ¡ç«¯å®ç°" class="headerlink" title="æœåŠ¡ç«¯å®ç°"></a>æœåŠ¡ç«¯å®ç°</h3><p>æœåŠ¡ç«¯å®ç°ç›¸å¯¹ <code>client</code> æ¥è¯´ç¨å¾®å¤æ‚ä¸€ç‚¹ã€‚éœ€è¦å°†å®¢æˆ·ç«¯æä¾›çš„æ–‡ä»¶é“¾æ¥åœ¨æœåŠ¡ç«¯è¯·æ±‚ä¸‹è½½å¹¶åšå‹ç¼©è½¬å‘ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">File</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> path<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ISession</span> <span class="token keyword">extends</span> <span class="token class-name">Express</span><span class="token punctuation">.</span>Session <span class="token punctuation">&#123;</span>  pendingDownloadTasks<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token punctuation">&#123;</span>    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>    path<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">Post</span></span><span class="token punctuation">(</span><span class="token string">'/downloadFilesZip'</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">setFilesZip</span><span class="token punctuation">(</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Session</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> session<span class="token operator">:</span> ISession<span class="token punctuation">,</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Body</span></span><span class="token punctuation">(</span><span class="token string">'list'</span><span class="token punctuation">)</span> pendingList<span class="token operator">:</span> File<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  session<span class="token punctuation">.</span>pendingDownloadTasks <span class="token operator">=</span> pendingList<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">Get</span></span><span class="token punctuation">(</span><span class="token string">'/downloadFilesZip'</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">downloadFilesZip</span><span class="token punctuation">(</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Session</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> session<span class="token operator">:</span> ISession<span class="token punctuation">,</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Res</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> res<span class="token operator">:</span> Response<span class="token punctuation">,</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// download...</span><span class="token punctuation">&#125;</span></code></pre><p>åŒ <code>client</code> å®ç°æ€è·¯ï¼Œå…ˆå°†éœ€è¦æ‰“åŒ…å‹ç¼©çš„æ–‡ä»¶ä¿¡æ¯å­˜åˆ° <code>session</code>ï¼Œç„¶ååœ¨ <code>Get</code> è¯·æ±‚ä¸­æ‰§è¡Œä¸‹è½½ã€‚ä¸‹é¢æ˜¯ <code>downloadFilesZip</code> å‡½æ•°çš„ä¸¤ç§å®ç°</p><h4 id="åŸºäº-archiver-å®ç°"><a href="#åŸºäº-archiver-å®ç°" class="headerlink" title="åŸºäº archiver å®ç°"></a>åŸºäº <code>archiver</code> å®ç°</h4><blockquote><p><code>archiver</code> æ˜¯ä¸€ä¸ªæµå¼çš„ã€é«˜çº§åˆ«çš„æ‰“åŒ…å·¥å…·ï¼Œæ”¯æŒåˆ›å»ºå„ç§å‹ç¼©æ ¼å¼ï¼Œå¦‚ <code>ZIPã€TARã€TAR.GZ</code>ã€‚é€‚ç”¨äºå¤§å‹å’Œå¤æ‚çš„æ‰“åŒ…ä»»åŠ¡ã€‚</p><p><code>p-limit</code> åœ¨å¼‚æ­¥ä»»åŠ¡ä¸­æ§åˆ¶å¹¶å‘æ“ä½œæ•°é‡ï¼Œé¿å…èµ„æºçš„è¿‡æ¸¡æ¶ˆè€—ã€‚</p></blockquote><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> Archiver <span class="token keyword">from</span> <span class="token string">'archiver'</span><span class="token punctuation">;</span><span class="token keyword">import</span> pLimit <span class="token keyword">from</span> <span class="token string">'p-limit'</span><span class="token punctuation">;</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">zipFile</span><span class="token punctuation">(</span>zipArchive<span class="token operator">:</span> Archiver<span class="token punctuation">.</span>Archiver<span class="token punctuation">,</span> file<span class="token operator">:</span> File<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> fileStream <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>path<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> responseType<span class="token operator">:</span> <span class="token string">'stream'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">></span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    zipArchive<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>fileStream<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> file<span class="token punctuation">.</span>name <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    fileStream<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">file </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>file<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> download success</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    fileStream<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">downloadFilesZip</span><span class="token punctuation">(</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">Session</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> session<span class="token operator">:</span> ISession<span class="token punctuation">,</span> <span class="token decorator"><span class="token at operator">@</span><span class="token function">Res</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> res<span class="token operator">:</span> Response<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> fileList <span class="token operator">=</span> session<span class="token punctuation">.</span>pendingDownloadTasks<span class="token punctuation">;</span>  session<span class="token punctuation">.</span>pendingDownloadTasks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// ä¸‹è½½åç«‹å³æ¸…é™¤sessionä¸­ä¿å­˜çš„ä¸‹è½½ä»»åŠ¡</span>  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">></span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    session<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>fileList <span class="token operator">&amp;&amp;</span> fileList<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BadRequestException</span><span class="token punctuation">(</span><span class="token string">'å½“å‰ä¼šè¯æ²¡æœ‰å¾…æ‰“åŒ…ä¸‹è½½æ–‡ä»¶æ•°æ®'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token comment">// è®¾ç½®å‹ç¼©ç­‰çº§</span>  <span class="token keyword">const</span> zipArchive <span class="token operator">=</span> <span class="token function">Archiver</span><span class="token punctuation">(</span><span class="token string">'zip'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> zlib<span class="token operator">:</span> <span class="token punctuation">&#123;</span> level<span class="token operator">:</span> <span class="token number">9</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// è®¾ç½®å“åº”å¤´</span>  res<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token string">'zip'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  res<span class="token punctuation">.</span><span class="token function">attachment</span><span class="token punctuation">(</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span><span class="token string">'é™„ä»¶èµ„æº.zip'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// é€šè¿‡ç®¡é“å“åº”æµå¼æ•°æ®ï¼Œä¸­é—´å±‚åªåšæµè½¬å‘ä¸åšå­˜å‚¨</span>  zipArchive<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// æ§åˆ¶å¹¶å‘æ•°2</span>    <span class="token keyword">const</span> limit <span class="token operator">=</span> <span class="token function">pLimit</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> tasks <span class="token operator">=</span> fileList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">limit</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">zipFile</span><span class="token punctuation">(</span>zipArchive<span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">await</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>tasks<span class="token punctuation">)</span><span class="token punctuation">;</span>    zipArchive<span class="token punctuation">.</span><span class="token function">finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">&#123;</span>    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">download error: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token punctuation">(</span>error <span class="token keyword">as</span> Error<span class="token punctuation">)</span><span class="token operator">?.</span>message<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">HttpException</span><span class="token punctuation">(</span><span class="token punctuation">(</span>error <span class="token keyword">as</span> Error<span class="token punctuation">)</span><span class="token operator">?.</span>message<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="åŸºäº-zip-stream-å®ç°ï¼ˆæ¨èï¼‰"><a href="#åŸºäº-zip-stream-å®ç°ï¼ˆæ¨èï¼‰" class="headerlink" title="åŸºäº zip-stream å®ç°ï¼ˆæ¨èï¼‰"></a>åŸºäº <code>zip-stream</code> å®ç°ï¼ˆæ¨èï¼‰</h4><blockquote><p><code>zip-stream</code> æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ã€æµå¼çš„ <code>zip</code> å‹ç¼©å·¥å…·ï¼Œä¸“æ³¨äº <code>zip</code> æ ¼å¼ã€‚ç›¸è¾ƒäºå‰è€…æ›´è½»é‡ï¼Œåœ¨æœ¬ä¾‹åœºæ™¯ä¸­æ›´åŠ é€‚ç”¨ã€‚</p><p><code>promisify</code> æ˜¯ä¸€ä¸ª <code>node</code> å†…ç½®çš„ <code>util</code> æ¨¡å—å‡½æ•°ï¼Œç”¨äºå°†å›è°ƒå‡½æ•°è½¬æ¢ä¸º <code>promise</code> å¯¹è±¡ã€‚</p></blockquote><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> promisify <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'util'</span><span class="token punctuation">;</span><span class="token keyword">import</span> ZipStream <span class="token keyword">from</span> <span class="token string">'zip-stream'</span><span class="token punctuation">;</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">downloadFilesZip</span><span class="token punctuation">(</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">Session</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> session<span class="token operator">:</span> ISession<span class="token punctuation">,</span> <span class="token decorator"><span class="token at operator">@</span><span class="token function">Res</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> res<span class="token operator">:</span> Response<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> fileList <span class="token operator">=</span> session<span class="token punctuation">.</span>pendingDownloadTasks<span class="token punctuation">;</span>  session<span class="token punctuation">.</span>pendingDownloadTasks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// ä¸‹è½½åç«‹å³æ¸…é™¤sessionä¸­ä¿å­˜çš„ä¸‹è½½ä»»åŠ¡</span>  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">></span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    session<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>fileList <span class="token operator">&amp;&amp;</span> fileList<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BadRequestException</span><span class="token punctuation">(</span><span class="token string">'å½“å‰ä¼šè¯æ²¡æœ‰å¾…æ‰“åŒ…ä¸‹è½½æ–‡ä»¶æ•°æ®'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">const</span> zipArchive <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ZipStream</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> zlib<span class="token operator">:</span> <span class="token punctuation">&#123;</span> level<span class="token operator">:</span> <span class="token number">9</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  res<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token string">'zip'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  res<span class="token punctuation">.</span><span class="token function">attachment</span><span class="token punctuation">(</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span><span class="token string">'é™„ä»¶èµ„æºåˆ—è¡¨.zip'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  zipArchive<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> addEntry <span class="token operator">=</span> <span class="token function">promisify</span><span class="token punctuation">(</span>zipArchive<span class="token punctuation">.</span>entry<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>zipArchive<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> abortController <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AbortController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// å®¢æˆ·ç«¯æ–­å¼€æ—¶ï¼Œåœæ­¢ä¸‹è½½</span>  res<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'close'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> aborted <span class="token operator">=</span> <span class="token operator">!</span>res<span class="token punctuation">.</span>writableFinished<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>aborted<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">client disconnected</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>      abortController<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      zipArchive<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>res<span class="token punctuation">.</span>headersSent<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> message<span class="token operator">:</span> <span class="token string">'Client disconnect'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> file <span class="token keyword">of</span> fileList<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">start download file </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>file<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> download</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">const</span> fileStream <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>path<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>        responseType<span class="token operator">:</span> <span class="token string">'stream'</span><span class="token punctuation">,</span>        signal<span class="token operator">:</span> abortController<span class="token punctuation">.</span>signal<span class="token punctuation">,</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">await</span> <span class="token function">addEntry</span><span class="token punctuation">(</span>fileStream<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>        name<span class="token operator">:</span> file<span class="token punctuation">.</span>name<span class="token punctuation">,</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">complete download file </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>file<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> download</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>axios<span class="token punctuation">.</span><span class="token function">isCancel</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">break</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">failed to add entry</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  zipArchive<span class="token punctuation">.</span><span class="token function">finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> åŠŸèƒ½å®ç° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> archiver </tag>
            
            <tag> zipStream </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯å®ç°æ–‡ä»¶ä¸‹è½½çš„å‡ ç§æ–¹æ¡ˆ</title>
      <link href="/share/download-file/"/>
      <url>/share/download-file/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><p><code>å‰ç«¯ä¸‹è½½æ–‡ä»¶å·²ç»æ˜¯ä¸€ä¸ªéå¸¸æ™®éçš„éœ€æ±‚äº†ï¼ŒåŒæ—¶ä¹Ÿå·²æœ‰äº†éå¸¸æˆç†Ÿçš„è§£å†³æ–¹æ¡ˆã€‚ç®€å•åšä¸ªç½—åˆ—ï¼Œå¹¶æŠŠå¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜æè¿°å‡ºæ¥</code></p><span id="more"></span><h3 id="window-open-æˆ–-window-location-href"><a href="#window-open-æˆ–-window-location-href" class="headerlink" title="window.open æˆ– window.location.href"></a><code>window.open</code> æˆ– <code>window.location.href</code></h3><p>æœ€ç®€å•çš„æ–¹å¼ï¼ŒåŒ <code>a</code> æ ‡ç­¾è®¿é—®ä¸‹è½½</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript">window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// é»˜è®¤æ˜¯ '_self' é¡µé¢ä¼šé—ªä¸€ä¸‹ï¼Œä½“éªŒä¸æ˜¯å¾ˆå®Œç¾</span>window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> url<span class="token punctuation">;</span></code></pre><blockquote><p><code>url</code> å¯ä»¥æ˜¯æ–‡ä»¶åœ°å€ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª <code>GET</code> ä¸‹è½½è¯·æ±‚åœ°å€</p><p>æµè§ˆå™¨å¯ç›´æ¥æµè§ˆçš„æ–‡ä»¶ç±»å‹æ˜¯ä¸èƒ½é€šè¿‡è¿™ç§æ–¹å¼ä¸‹è½½çš„ï¼ˆå½“ç„¶æˆ‘æŒ‡çš„æ˜¯ <code>url</code> ä¸æ˜¯ä¸€ä¸ªä¸‹è½½çš„ <code>get</code> è¯·æ±‚æ—¶ï¼‰ã€‚ä¾‹å¦‚ï¼š<code>txt/png/pdf...</code></p><p>åŒæ—¶ï¼Œè¿™ç§æ–¹å¼è¿˜æœ‰ä¸ªå¼Šç«¯ï¼Œæ— æ³•è·å–ä¸‹è½½è¿›åº¦</p></blockquote><h3 id="a-æ ‡ç­¾ä¸‹è½½"><a href="#a-æ ‡ç­¾ä¸‹è½½" class="headerlink" title="a æ ‡ç­¾ä¸‹è½½"></a><code>a</code> æ ‡ç­¾ä¸‹è½½</h3><p>æŒ‡å®šä¸‹è½½çš„æ–‡ä»¶åå¹¶æ·»åŠ ä¸‹è½½å±æ€§ï¼Œä¸è®¾ç½®é»˜è®¤å³ä¸ºæ–‡ä»¶åŸåï¼ˆè€ƒè™‘åˆ°å…¼å®¹æ€§é—®é¢˜ï¼Œ<code>filename</code> åé¢å°½é‡åŠ ä¸Šæ–‡ä»¶çš„ç±»å‹åç¼€ï¼‰ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span> <span class="token attr-name">download</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>filename<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¸‹è½½<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></code></pre><blockquote><p>ç›¸æ¯”è¾ƒå‰é¢é€šè¿‡ <code>location.href</code> çš„æ–¹å¼ï¼Œè¿™ç§æ–¹å¼å¯ä»¥ä¸‹è½½ä»»æ„ç±»å‹çš„æ–‡ä»¶ã€‚</p></blockquote><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">downloadFile</span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> filename<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  a<span class="token punctuation">.</span>href <span class="token operator">=</span> url<span class="token punctuation">;</span>  a<span class="token punctuation">.</span>download <span class="token operator">=</span> filename<span class="token punctuation">;</span>  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// appendChild æ˜¯ä¸ºäº†æ›´å¥½çš„å…¼å®¹</span>  a<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="iframe-ä¸‹è½½"><a href="#iframe-ä¸‹è½½" class="headerlink" title="iframe ä¸‹è½½"></a><code>iframe</code> ä¸‹è½½</h3><p>ç›¸è¾ƒäºå‰ä¸¤ç§ä¸‹è½½æ–¹å¼ï¼Œ<code>iframe</code> ä¸‹è½½æ–¹å¼æ²¡æœ‰å¹¶å‘æ•°é™åˆ¶ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">downloadFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> iframe <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'iframe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  iframe<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>  iframe<span class="token punctuation">.</span>src <span class="token operator">=</span> url<span class="token punctuation">;</span> <span class="token comment">// url æ˜¯å¯ä¸‹è½½çš„æ–‡ä»¶é“¾æ¥</span>  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>iframe<span class="token punctuation">)</span><span class="token punctuation">;</span>  iframe<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>iframe<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="åŸºäº-Blob-å¯¹è±¡ä¸‹è½½"><a href="#åŸºäº-Blob-å¯¹è±¡ä¸‹è½½" class="headerlink" title="åŸºäº Blob å¯¹è±¡ä¸‹è½½"></a>åŸºäº <code>Blob</code> å¯¹è±¡ä¸‹è½½</h3><p>è¿™ç§æ–¹å¼å¯ä»¥è¯´æ˜¯æœ€é€šç”¨çš„ä¸‹è½½æ–¹å¼äº†ï¼Œå…¼å®¹æ€§ä¹Ÿå¾ˆå¥½ã€‚é€šè¿‡ç½‘ç»œè¯·æ±‚ä»åç«¯è·å–ï¼Œåˆ©ç”¨ <code>Blob</code> å¯¹è±¡å°†æ–‡ä»¶æµè½¬åŒ–ä¸º <code>Blob</code> äºŒè¿›åˆ¶å¯¹è±¡:</p><blockquote><p>ç°åœ¨ä¸»æµçš„ç½‘ç»œè¯·æ±‚å·¥å…·ï¼Œä¾‹å¦‚ <code>axios...</code> æ˜¯æ”¯æŒè®¾ç½® <code>responseType</code> çš„ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ä½¿ç”¨ <code>responseType = &#39;blob&#39;</code> çš„æ–¹å¼ä¸‹è½½ã€‚</p></blockquote><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">downloadFile</span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> filename<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>    responseType<span class="token operator">:</span> <span class="token string">'blob'</span><span class="token punctuation">,</span>    params<span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> resData <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>  <span class="token keyword">const</span> link <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  link<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>resData<span class="token punctuation">)</span><span class="token punctuation">;</span>  link<span class="token punctuation">.</span>download <span class="token operator">=</span> filename<span class="token punctuation">;</span>  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">;</span>  link<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">revokeObjectURL</span><span class="token punctuation">(</span>link<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><blockquote><p><code>URL.createObjectURL</code> ä½œç”¨åŒ <code>fileReader.readAsDataURL</code>ï¼Œåªä¸è¿‡åè€…æ˜¯è½¬ä¸º <code>Data(base64) URL</code>ï¼Œå‰è€…è½¬ä¸º <code>Blob URL</code>ã€‚</p></blockquote><p>é€šè¿‡ç½‘ç»œè¯·æ±‚ä¸‹è½½ï¼Œå¯ä»¥é…ç½®å‡½æ•°æ¥è‡ªå®šä¹‰ä¸‹è½½è¿›åº¦æ˜¾ç¤ºï¼ˆä¾‹ï¼š <code>axios</code>ï¼Œåˆ™åœ¨è¯·æ±‚ä½“çš„ <code>config.onUploadProgress</code> ä¸­ï¼‰ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">const</span> fileConfig <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">const</span> defaultUploadProgress<span class="token operator">:</span> <span class="token function-variable function">OnUploadProgress</span> <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> percentage <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>loaded <span class="token operator">/</span> e<span class="token punctuation">.</span>total<span class="token operator">!</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>percentage <span class="token operator">!==</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    fileConfig<span class="token punctuation">.</span>percentage <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>percentage<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><p>é€šå¸¸ï¼Œåœ¨ä¸‹è½½æ–‡ä»¶æ—¶ï¼Œä¼šåœ¨æœåŠ¡ç«¯ç”Ÿæˆå¯¹è¯·æ±‚æ–‡ä»¶ç±»å‹çš„æè¿°ä¿¡æ¯ï¼Œä¾‹å¦‚ <code>Content-Type</code>ï¼Œ<code>Content-Disposition</code> ç­‰ï¼Œè¿™äº›ä¿¡æ¯éœ€è¦ä¸ä¸‹è½½çš„æ–‡ä»¶åä¸€èµ·å‘é€ï¼Œä¾‹å¦‚ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript">res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'application/zip'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span>  <span class="token string">'content-disposition'</span><span class="token punctuation">,</span>  <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">attachment;filename=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span><span class="token string">'èµ„æºæ–‡ä»¶åˆ—è¡¨'</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">.zip</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>å½“æœåŠ¡ç«¯é…ç½®äº†ä»¥åï¼Œå‰ç«¯ä¸‹è½½æ–‡ä»¶å³å¯æ— éœ€é€šè¿‡ <code>new Blob([res], &#123; type: &#39;application/octet-stream&#39; &#125;)</code> è¿›è¡ŒæŒ‡å®šã€‚</p><h3 id="æ–‡ä»¶é¢„è§ˆ"><a href="#æ–‡ä»¶é¢„è§ˆ" class="headerlink" title="æ–‡ä»¶é¢„è§ˆ"></a>æ–‡ä»¶é¢„è§ˆ</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè®¿é—®æ–‡ä»¶èµ„æºï¼Œéƒ¨åˆ†ç±»å‹çš„æ–‡ä»¶ä»…æ”¯æŒé¢„è§ˆè€Œæ— æ³•ä¸‹è½½ï¼ŒåŒç†ï¼Œéƒ¨åˆ†èƒ½å¤Ÿä¸‹è½½çš„æ–‡ä»¶åˆä¸æ”¯æŒé¢„è§ˆï¼Œæ­¤æ—¶ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ç½‘ç»œè¯·æ±‚å»è·å–èµ„æºï¼Œé€šè¿‡è®¾ç½®è®¾ç½® <code>content-disposition</code> å‘Šè¯‰æµè§ˆå™¨æ˜¯éœ€è¦é¢„è§ˆè¿˜æ˜¯ä¸‹è½½ã€‚</p><p>ä¾‹å¦‚æ–‡ä»¶èµ„æºé“¾æ¥ <code>/s3/xxx/filename.pdf</code>ï¼Œé‚£ä¹ˆé¢„è§ˆï¼š<code>/s3/xxx/filename.pdf?preview=true</code>ï¼Œä¸‹è½½å³ä¸ºï¼š<code>/s3/xxx/filename.pdf?download=true</code></p><p><code>server</code> å®ç°ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>preview<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'content-disposition'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">inline;filename=filename.pdf</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>download<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'content-disposition'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">attachment;filename=filename.pdf</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p><code>client</code> å®ç°ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// preview</span><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">previewInNewTab</span><span class="token punctuation">(</span>imgUrl<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> img <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;iframe src="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>imgUrl<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&amp;preview=true" style="width: 100vw;height: 100vh;border: 0;margin: -8px;" /></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>  <span class="token keyword">const</span> popup <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  popup<span class="token operator">?.</span>document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// download</span><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">downloadFile</span><span class="token punctuation">(</span>fileUrl<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>fileUrl<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&amp;download=true</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> åŠŸèƒ½å®ç° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ–‡ä»¶ä¸‹è½½ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸ç”¨çš„åŠŸèƒ½è¾…åŠ©å‡½æ•°åˆ—ä¸¾</title>
      <link href="/share/util-function/"/>
      <url>/share/util-function/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><blockquote><p>åˆ—ä¸¾ä¸€äº›åœ¨æ—¥å¸¸å¼€å‘ä¸­å¸¸ç”¨çš„è¾…åŠ©å‡½æ•°ï¼Œä»¥ä¾¿äºå¿«é€Ÿå¼€å‘</p></blockquote><span id="more"></span><h2 id="èµ„æºåŠ è½½ç›¸å…³"><a href="#èµ„æºåŠ è½½ç›¸å…³" class="headerlink" title="èµ„æºåŠ è½½ç›¸å…³"></a>èµ„æºåŠ è½½ç›¸å…³</h2><h3 id="åŠ è½½ä¸€ä¸ªè¿œç¨‹è„šæœ¬"><a href="#åŠ è½½ä¸€ä¸ªè¿œç¨‹è„šæœ¬" class="headerlink" title="åŠ è½½ä¸€ä¸ªè¿œç¨‹è„šæœ¬"></a>åŠ è½½ä¸€ä¸ªè¿œç¨‹è„šæœ¬</h3><p>ä»ç»™å®šçš„åœ°å€é“¾æ¥åŠ è½½ <code>js</code> è„šæœ¬ï¼Œå¹¶åœ¨åŠ è½½å®Œæˆåæ‰§è¡Œåç»­çš„ä¸€äº›æ“ä½œ</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">const</span> needRunCallbacks<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">onScriptLoaded</span><span class="token punctuation">(</span>$script<span class="token operator">:</span> HTMLScriptElement<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> onEnd <span class="token operator">=</span> <span class="token string">'onload'</span> <span class="token keyword">in</span> $script <span class="token operator">?</span> <span class="token function">stdOnEnd</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>$script<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">ieOnEnd</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>$script<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">onEnd</span><span class="token punctuation">(</span>$script<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">function</span> <span class="token function">stdOnEnd</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> script<span class="token operator">:</span> HTMLScriptElement<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> _that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> <span class="token function-variable function">handler</span> <span class="token operator">=</span> <span class="token punctuation">(</span>isError<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token keyword">const</span> error <span class="token operator">=</span> isError <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Failed to load </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>src<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>      <span class="token comment">// ç§»é™¤äº‹ä»¶ç›‘å¬ï¼Œé¿å…é‡å¤æ‰§è¡Œ</span>      _that<span class="token punctuation">.</span>onerror <span class="token operator">=</span> _that<span class="token punctuation">.</span>onload <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>      needRunCallbacks<span class="token punctuation">[</span>script<span class="token punctuation">.</span>src<span class="token punctuation">]</span><span class="token operator">?.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">callback</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span> script<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">delete</span> needRunCallbacks<span class="token punctuation">[</span>script<span class="token punctuation">.</span>src<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    script<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">handler</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    script<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">handler</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">function</span> <span class="token function">ieOnEnd</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> script<span class="token operator">:</span> HTMLScriptElement<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> _that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>    script<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>_that<span class="token punctuation">.</span>readyState <span class="token operator">!==</span> <span class="token string">'complete'</span> <span class="token operator">&amp;&amp;</span> _that<span class="token punctuation">.</span>readyState <span class="token operator">!==</span> <span class="token string">'loaded'</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>      _that<span class="token punctuation">.</span>onreadystatechange <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>      needRunCallbacks<span class="token punctuation">[</span>script<span class="token punctuation">.</span>src<span class="token punctuation">]</span><span class="token operator">?.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> script<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">delete</span> needRunCallbacks<span class="token punctuation">[</span>script<span class="token punctuation">.</span>src<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">/** * åŠ è½½ä¸€ä¸ªè¿œç¨‹è„šæœ¬ * @param &#123;String&#125; src ä¸€ä¸ªè¿œç¨‹è„šæœ¬ * @param &#123;Function&#125; callback å›è°ƒ */</span><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">loadScript</span><span class="token punctuation">(</span>src<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> callback<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>err<span class="token operator">?</span><span class="token operator">:</span> Error<span class="token punctuation">,</span> script<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> existScript <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> cb <span class="token operator">=</span> callback <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>existScript<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// å¦‚æœå½“å‰è„šæœ¬èµ„æºè¿˜æœªç»“æŸåŠ è½½ï¼Œåˆ™åªéœ€è¦å¾€å›è°ƒæ•°ç»„é‡Œè¿½åŠ ï¼Œå¦åˆ™(è¡¨ç¤ºå·²åŠ è½½å®Œæˆ)ç›´æ¥æ‰§è¡Œå³å¯</span>    <span class="token keyword">return</span> needRunCallbacks<span class="token punctuation">[</span>src<span class="token punctuation">]</span> <span class="token operator">?</span> needRunCallbacks<span class="token punctuation">[</span>src<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> $script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    needRunCallbacks<span class="token punctuation">[</span>src<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>cb<span class="token punctuation">]</span><span class="token punctuation">;</span>    $script<span class="token punctuation">.</span>src <span class="token operator">=</span> src<span class="token punctuation">;</span>    $script<span class="token punctuation">.</span>id <span class="token operator">=</span> src<span class="token punctuation">;</span>    $script<span class="token punctuation">.</span>async <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>$script<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">onScriptLoaded</span><span class="token punctuation">(</span>$script<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>åŒä¸Šå®ç°ï¼Œå¦‚æœè¦å¸è½½è„šæœ¬èµ„æºï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">unloadScript</span><span class="token punctuation">(</span>src<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token operator">?.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="åŠ è½½ä¸€ç»„è¿œç¨‹è„šæœ¬"><a href="#åŠ è½½ä¸€ç»„è¿œç¨‹è„šæœ¬" class="headerlink" title="åŠ è½½ä¸€ç»„è¿œç¨‹è„šæœ¬"></a>åŠ è½½ä¸€ç»„è¿œç¨‹è„šæœ¬</h3><p>åœ¨ä¸Šé¢çš„åŸºç¡€ä¸Šï¼Œæ·»åŠ å®ç°ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> cloneDeep <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'lodash'</span><span class="token punctuation">;</span><span class="token comment">/** * é¡ºåºåŠ è½½ä¸€ç»„è¿œç¨‹è„šæœ¬ * @param &#123;Array&#125; list ä¸€ç»„è¿œç¨‹è„šæœ¬ * @param &#123;Function&#125; cb å›è°ƒ */</span><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">loadScripts</span><span class="token punctuation">(</span>srcs<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> callback<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> cloneSrcs <span class="token operator">=</span> <span class="token function">cloneDeep</span><span class="token punctuation">(</span>srcs<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> firstSrc <span class="token operator">=</span> cloneSrcs<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  firstSrc <span class="token operator">?</span> <span class="token function">loadScript</span><span class="token punctuation">(</span>firstSrc<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">loadScripts</span><span class="token punctuation">(</span>cloneSrcs<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> callback<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="moment-dayjsç›¸å…³"><a href="#moment-dayjsç›¸å…³" class="headerlink" title="moment/dayjsç›¸å…³"></a><code>moment/dayjs</code>ç›¸å…³</h2><h3 id="æ—¶é—´æ ¼å¼åŒ–"><a href="#æ—¶é—´æ ¼å¼åŒ–" class="headerlink" title="æ—¶é—´æ ¼å¼åŒ–"></a>æ—¶é—´æ ¼å¼åŒ–</h3><p>é€šå¸¸åœ¨å¼€å‘ä¸­ï¼Œå­˜åœ¨ç±»ä¼¼è¿™æ ·çš„éœ€æ±‚ï¼š<code>å°†æ—¶é—´å­—ç¬¦ä¸²è½¬ä¸º ä»Šå¤©..æ˜¨å¤©..å…·ä½“æ—¶é—´</code>ï¼Œä¸‹é¢é€šè¿‡ <code>moment/dayjs(åŒ…ä½“ç§¯æ›´å°ï¼Œä¸¤è€… api å¤§è‡´ç›¸åŒ)</code> è¿›è¡Œå®ç°ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">/** * å°†æ—¶é—´å­—ç¬¦ä¸²è½¬ä¸º ä»Šå¤©..æ˜¨å¤©..å…·ä½“æ—¶é—´ * @param &#123;String&#125; timeStr ç›®æ ‡æ—¶é—´ * @param &#123;String&#125; defaultFormat é»˜è®¤è¾“å‡ºæ ¼å¼ * @return &#123;String&#125; è½¬æ¢åçš„æ—¶é—´ */</span><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">timeFormat</span><span class="token punctuation">(</span>timeStr<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> defaultFormat <span class="token operator">=</span> <span class="token string">'YYYY-MM-DD HH:mm'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> dataTime <span class="token operator">=</span> <span class="token function">moment</span><span class="token punctuation">(</span>timeStr<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> timeSuffix <span class="token operator">=</span> dataTime<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'HH:mm'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> isToday <span class="token operator">=</span> dataTime<span class="token punctuation">.</span><span class="token function">isSame</span><span class="token punctuation">(</span><span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">startOf</span><span class="token punctuation">(</span><span class="token string">'day'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> yd <span class="token operator">=</span> <span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'days'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">startOf</span><span class="token punctuation">(</span><span class="token string">'day'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> isYesterday <span class="token operator">=</span> dataTime<span class="token punctuation">.</span><span class="token function">isSame</span><span class="token punctuation">(</span>yd<span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// æˆ–è€…ä½ å¯ä»¥å†åˆ†çš„ç»†ä¸€ç‚¹ï¼Œå½“å¹´çš„ä¸æ˜¾ç¤ºå¹´ä»½...</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>isToday<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">'ä»Šå¤© '</span> <span class="token operator">+</span> timeSuffix<span class="token punctuation">;</span>  <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>isYesterday<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">'æ˜¨å¤© '</span> <span class="token operator">+</span> timeSuffix<span class="token punctuation">;</span>  <span class="token keyword">return</span> dataTime<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>defaultFormat<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="å¤åˆ¶-x2F-ç²˜è´´ç›¸å…³"><a href="#å¤åˆ¶-x2F-ç²˜è´´ç›¸å…³" class="headerlink" title="å¤åˆ¶&#x2F;ç²˜è´´ç›¸å…³"></a>å¤åˆ¶&#x2F;ç²˜è´´ç›¸å…³</h2><h3 id="æ–‡æœ¬é€‰ä¸­"><a href="#æ–‡æœ¬é€‰ä¸­" class="headerlink" title="æ–‡æœ¬é€‰ä¸­"></a>æ–‡æœ¬é€‰ä¸­</h3><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">/** * é€‰ä¸­å…ƒç´ ä¸­çš„æ–‡æœ¬ * @param &#123;Element&#125; textEl ç›®æ ‡å…ƒç´  * @param &#123;Number&#125; startIndex èµ·å§‹ç´¢å¼• * @param &#123;Number&#125; stopIndex ç»“æŸç´¢å¼• */</span><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">selectText</span><span class="token punctuation">(</span>textEl<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> startIndex<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> stopIndex<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>textEl<span class="token punctuation">.</span>createTextRange<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// ie</span>    <span class="token keyword">const</span> range <span class="token operator">=</span> textEl<span class="token punctuation">.</span><span class="token function">createTextRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    range<span class="token punctuation">.</span><span class="token function">collapse</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    range<span class="token punctuation">.</span><span class="token function">moveStart</span><span class="token punctuation">(</span><span class="token string">'character'</span><span class="token punctuation">,</span> startIndex<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// èµ·å§‹å…‰æ ‡</span>    range<span class="token punctuation">.</span><span class="token function">moveEnd</span><span class="token punctuation">(</span><span class="token string">'character'</span><span class="token punctuation">,</span> stopIndex <span class="token operator">-</span> startIndex<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç»“æŸå…‰æ ‡</span>    range<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä¸å…¼å®¹è‹¹æœ</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// firefox/chrome</span>    textEl<span class="token punctuation">.</span><span class="token function">setSelectionRange</span><span class="token punctuation">(</span>startIndex<span class="token punctuation">,</span> stopIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>    textEl<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="æ–‡æœ¬å¤åˆ¶åˆ°å‰ªè´´æ¿"><a href="#æ–‡æœ¬å¤åˆ¶åˆ°å‰ªè´´æ¿" class="headerlink" title="æ–‡æœ¬å¤åˆ¶åˆ°å‰ªè´´æ¿"></a>æ–‡æœ¬å¤åˆ¶åˆ°å‰ªè´´æ¿</h3><p>è€ƒè™‘åˆ°å¤åˆ¶çš„æ–‡æœ¬ä¸­å­˜åœ¨æ¢è¡Œç¬¦ï¼Œæ‰€ä»¥ä½¿ç”¨çš„ <code>textarea</code>å…ƒç´ ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">/** * å°†ä¸€æ®µæ–‡æœ¬å¤åˆ¶åˆ°å‰ªè´´æ¿ * @param &#123;String&#125; value æ–‡æœ¬å†…å®¹ */</span><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">setClipboard</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> tempInput <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'textarea'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">(</span>tempInput <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style <span class="token operator">=</span> <span class="token string">'position: absolute; left: -1000px; top: -1000px'</span><span class="token punctuation">;</span>  tempInput<span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>tempInput<span class="token punctuation">)</span><span class="token punctuation">;</span>  tempInput<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  document<span class="token punctuation">.</span><span class="token function">execCommand</span><span class="token punctuation">(</span><span class="token string">'copy'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>tempInput<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="HTML-å¤åˆ¶åˆ°å‰ªè´´æ¿"><a href="#HTML-å¤åˆ¶åˆ°å‰ªè´´æ¿" class="headerlink" title="HTML å¤åˆ¶åˆ°å‰ªè´´æ¿"></a><code>HTML</code> å¤åˆ¶åˆ°å‰ªè´´æ¿</h3><p>åœ¨éœ€è¦å°†å…ƒç´ å¸¦æ ·å¼å¤åˆ¶åˆ° <code>word/excel</code> ä¸­çš„åœºæ™¯ä½¿ç”¨ï¼ˆä¾‹å¦‚è¡¨æ ¼å¤åˆ¶ï¼Ÿï¼‰ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">/** * å°† html å¸¦æ ¼å¼å¤åˆ¶åˆ°å‰ªè´´æ¿ * @param &#123;Element&#125; elToBeCopied éœ€è¦ç²˜è´´çš„å…ƒç´ èŠ‚ç‚¹ eg. document.querySelector('.table') */</span><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">copyEl</span><span class="token punctuation">(</span>elToBeCopied<span class="token operator">:</span> Element<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">let</span> sel<span class="token punctuation">;</span>  <span class="token comment">// Ensure that range and selection are supported by the browsers</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>createRange <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span>getSelection<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> range <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    sel <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// unselect any element in the page</span>    sel<span class="token operator">?.</span><span class="token function">removeAllRanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>      range<span class="token punctuation">.</span><span class="token function">selectNodeContents</span><span class="token punctuation">(</span>elToBeCopied<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      range<span class="token punctuation">.</span><span class="token function">selectNode</span><span class="token punctuation">(</span>elToBeCopied<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>      sel<span class="token operator">?.</span><span class="token function">addRange</span><span class="token punctuation">(</span>range<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    document<span class="token punctuation">.</span><span class="token function">execCommand</span><span class="token punctuation">(</span><span class="token string">'copy'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  sel<span class="token operator">?.</span><span class="token function">removeAllRanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="æ–‡å­—å¤´åƒç›¸å…³"><a href="#æ–‡å­—å¤´åƒç›¸å…³" class="headerlink" title="æ–‡å­—å¤´åƒç›¸å…³"></a>æ–‡å­—å¤´åƒç›¸å…³</h2><h3 id="æ ¹æ®åç§°éšæœºè®¾ç½®èƒŒæ™¯"><a href="#æ ¹æ®åç§°éšæœºè®¾ç½®èƒŒæ™¯" class="headerlink" title="æ ¹æ®åç§°éšæœºè®¾ç½®èƒŒæ™¯"></a>æ ¹æ®åç§°éšæœºè®¾ç½®èƒŒæ™¯</h3><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">/** * æ ¹æ®åç§°éšæœºè®¾ç½®èƒŒæ™¯ * * @param &#123;String&#125; name åç§° * @returns &#123;String&#125; èƒŒæ™¯è‰² */</span><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">randomColorByName</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>  <span class="token comment">// é¿å…åç§°è¿‡çŸ­å¯¼è‡´ä¸èƒ½ç”Ÿæˆæ­£å¸¸é•¿åº¦çš„åå…­è¿›åˆ¶æ•°</span>  <span class="token keyword">let</span> tempName <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">padEnd</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> tempName<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    str <span class="token operator">+=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>name<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">return</span> <span class="token string">'#'</span> <span class="token operator">+</span> str<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="é€šè¿‡-canvas-ç»˜åˆ¶æ–‡å­—å¤´åƒ"><a href="#é€šè¿‡-canvas-ç»˜åˆ¶æ–‡å­—å¤´åƒ" class="headerlink" title="é€šè¿‡ canvas ç»˜åˆ¶æ–‡å­—å¤´åƒ"></a>é€šè¿‡ <code>canvas</code> ç»˜åˆ¶æ–‡å­—å¤´åƒ</h3><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">/** * æ ¹æ®ä¼ å…¥çš„å°ºå¯¸å’Œåå­—ç”Ÿæˆæ–‡å­—å¤´åƒ * * @param &#123;[Number, Number]&#125; size å¤´åƒå°ºå¯¸ * @param &#123;String&#125; name åå­— * @param &#123;String&#125; bgc èƒŒæ™¯è‰² * @returns è¿”å›ç”Ÿæˆçš„å›¾ç‰‡ * @example * import &#123; genTextImg &#125; from '@/utils/genTextImg'; * genTextImg([100, 100], 'å¼ ä¸‰'); */</span><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">genTextImg</span><span class="token punctuation">(</span>size<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> bgc<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> showName <span class="token operator">=</span> name<span class="token operator">?.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> cvs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  cvs<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">,</span> size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  cvs<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">,</span> size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> ctx <span class="token operator">=</span> cvs<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token operator">!</span><span class="token punctuation">;</span>  ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> bgc <span class="token operator">??</span> <span class="token function">randomColorByName</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>  ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'#fff'</span><span class="token punctuation">;</span>  ctx<span class="token punctuation">.</span>font <span class="token operator">=</span> size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">0.6</span> <span class="token operator">+</span> <span class="token string">'px Arial'</span><span class="token punctuation">;</span>  ctx<span class="token punctuation">.</span>textBaseline <span class="token operator">=</span> <span class="token string">'middle'</span><span class="token punctuation">;</span>  ctx<span class="token punctuation">.</span>textAlign <span class="token operator">=</span> <span class="token string">'center'</span><span class="token punctuation">;</span>  ctx<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span>showName<span class="token punctuation">,</span> size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> cvs<span class="token punctuation">.</span><span class="token function">toDataURL</span><span class="token punctuation">(</span><span class="token string">'image/jpeg'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="window-location-ç›¸å…³"><a href="#window-location-ç›¸å…³" class="headerlink" title="window.location ç›¸å…³"></a><code>window.location</code> ç›¸å…³</h2><h3 id="é“¾æ¥è¿½åŠ -query-å‚æ•°"><a href="#é“¾æ¥è¿½åŠ -query-å‚æ•°" class="headerlink" title="é“¾æ¥è¿½åŠ  query å‚æ•°"></a>é“¾æ¥è¿½åŠ  <code>query</code> å‚æ•°</h3><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> querystring <span class="token keyword">from</span> <span class="token string">'querystring'</span><span class="token punctuation">;</span><span class="token comment">/** * åœ¨é“¾æ¥æœ«å°¾è¿½åŠ ä¸ŠæŒ‡å®šçš„queryå‚æ•° * * @param &#123;String&#125; link é“¾æ¥ * @param &#123;String&#125; queryId å‚æ•°å * @param &#123;String&#125; queryVal å‚æ•°å€¼ * * @returns è¿”å›æ–°çš„é“¾æ¥ */</span><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">appendLinkQuery</span> <span class="token operator">=</span> <span class="token punctuation">(</span>link<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> queryId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> queryVal<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> queryObj <span class="token operator">=</span> querystring<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>link<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'?'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> query <span class="token operator">=</span> querystring<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token operator">...</span>queryObj<span class="token punctuation">,</span> <span class="token punctuation">[</span>queryId<span class="token punctuation">]</span><span class="token operator">:</span> queryVal <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>link<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'?'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">?</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>query<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><h3 id="è·å–-hash-è·¯å¾„ä¸­éœ€è¦çš„-key-å€¼"><a href="#è·å–-hash-è·¯å¾„ä¸­éœ€è¦çš„-key-å€¼" class="headerlink" title="è·å– hash è·¯å¾„ä¸­éœ€è¦çš„ key å€¼"></a>è·å– <code>hash</code> è·¯å¾„ä¸­éœ€è¦çš„ <code>key</code> å€¼</h3><p><code>å½¢å¦‚ï¼šhttp://www.xxx.com/#/xxx?a=1&amp;b=true&amp;c=name</code></p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">/** * è·å– hash è·¯å¾„ä¸­éœ€è¦çš„ queryKey çš„å€¼ * @param &#123;String&#125; [key] å¯é€‰ï¼Œéœ€è¦çš„ queryKey * @returns &#123;String | Object&#125; è¿”å› queryKey çš„å€¼ï¼Œæœªä¼  queryKey æ—¶è¿”å›æ•´ä¸ª query å¯¹è±¡ */</span><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getHashParams</span><span class="token punctuation">(</span>queryKey<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> params<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> query <span class="token operator">=</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>hash<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'?'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>query<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> keyValuePairs <span class="token operator">=</span> queryString<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'&amp;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    keyValuePairs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>keyValue<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token keyword">const</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> <span class="token operator">=</span> keyValue<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'='</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">&amp;&amp;</span> value<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">const</span> decodedKey <span class="token operator">=</span> <span class="token function">decodeURIComponent</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">const</span> decodedValue <span class="token operator">=</span> <span class="token function">decodeURIComponent</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>        params<span class="token punctuation">[</span>decodedKey<span class="token punctuation">]</span> <span class="token operator">=</span> decodedValue<span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">return</span> queryKey <span class="token operator">?</span> params<span class="token punctuation">[</span>queryKey<span class="token punctuation">]</span> <span class="token operator">:</span> params<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="è·å–-hash-å†…éƒ¨çš„-query-å‚æ•°å€¼"><a href="#è·å–-hash-å†…éƒ¨çš„-query-å‚æ•°å€¼" class="headerlink" title="è·å– hash å†…éƒ¨çš„ query å‚æ•°å€¼"></a>è·å– <code>hash</code> å†…éƒ¨çš„ <code>query</code> å‚æ•°å€¼</h3><p><code>å½¢å¦‚ï¼šhttp://www.xxx.com/?d=1&amp;e=2#/xxx?a=1&amp;b=true&amp;c=name</code> ä»ä¸­è·å– <code>d</code> çš„å€¼</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> qs <span class="token keyword">from</span> <span class="token string">'querystring'</span><span class="token punctuation">;</span><span class="token comment">/** * è·å– hash å†…éƒ¨çš„ query å‚æ•°å€¼ * @param &#123;String&#125; [queryKey] å¯é€‰ï¼Œéœ€è¦çš„ queryKey * @returns &#123;String | Object&#125; è¿”å› queryKey çš„å€¼ï¼Œæœªä¼  queryKey æ—¶è¿”å›æ•´ä¸ª query å¯¹è±¡ */</span><span class="token keyword">function</span> <span class="token function">getHashInnerParams</span><span class="token punctuation">(</span>queryKey<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> search <span class="token operator">=</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>search<span class="token punctuation">;</span>  <span class="token keyword">const</span> filterSearch <span class="token operator">=</span> search<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span><span class="token string">'#/'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> hashQuery <span class="token operator">=</span> qs<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>filterSearch<span class="token operator">?.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> queryKey <span class="token operator">?</span> hashQuery<span class="token punctuation">[</span>queryKey<span class="token punctuation">]</span> <span class="token operator">:</span> hashQuery<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="æŒç»­æ›´æ–°ä¸­â€¦"><a href="#æŒç»­æ›´æ–°ä¸­â€¦" class="headerlink" title="æŒç»­æ›´æ–°ä¸­â€¦"></a>æŒç»­æ›´æ–°ä¸­â€¦</h2>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> è¾…åŠ©å‡½æ•° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¾…åŠ©å‡½æ•° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºæµè§ˆå™¨ä¹¦ç­¾æ å®ç°å¯æ‰§è¡Œè„šæœ¬</title>
      <link href="/share/browser-js/"/>
      <url>/share/browser-js/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><p>å¶ç„¶çš„ä¸€æ¬¡æœºä¼šï¼Œå‘ç°æµè§ˆå™¨åœ°å€æ é‡Œå¯ä»¥æ‰§è¡Œ <code>javascript</code> ä»£ç ï¼Œ<del>è¯¶â€¦ç›´æ¥å‘ç°æ–°å¤§é™†äº†è¿™æ˜¯ ğŸ¤©ğŸ¤©ğŸ¤©</del></p><p>åŸºäºè¿™ä¸ªç‰¹æ€§ï¼Œå¯ä»¥å®ç°ä¸€äº›æœ‰è¶£çš„åŠŸèƒ½è„šæœ¬ï¼Œæ¯”å¦‚ï¼šè¡¨å•è‡ªåŠ¨å¡«å†™ã€ç²˜è´´å¤åˆ¶ã€å¿«é€Ÿæµ‹è¯•â€¦</p><blockquote><p><strong>é™¤äº†é€šè¿‡ä¹¦ç­¾çš„æ–¹å¼æ‰§è¡Œè„šæœ¬å¤–ï¼Œä½ è¿˜å¯ä»¥å°†è„šæœ¬å†…å®¹å°è£…åˆ°<a href="extension://dhdgffkkebhmkfjojejmpbldmpobfkfo/options.html#url=&nav=dashboard">æ²¹çŒ´é‡Œ</a>ï¼Œä½œä¸ºæ’ä»¶åœ¨æŒ‡å®šåŸŸåä¸‹è‡ªåŠ¨å¯ç”¨</strong>ã€‚<del>å®ƒä¿©å„æœ‰å„çš„ä¼˜ç¼ºç‚¹å’Œä½¿ç”¨åœºæ™¯ï¼Œè¿™é‡Œä¸å¯¹æ²¹çŒ´åšè¯¦ç»†ä»‹ç»ã€‚</del></p></blockquote><span id="more"></span><h3 id="å®ç°æ–¹æ¡ˆ"><a href="#å®ç°æ–¹æ¡ˆ" class="headerlink" title="å®ç°æ–¹æ¡ˆ"></a>å®ç°æ–¹æ¡ˆ</h3><p>åœ¨æµè§ˆå™¨åœ°å€æ æ‰§è¡Œ <code>javascript</code> è„šæœ¬ï¼Œéœ€è¦éµå¾ªç‰¹å®šçš„ <code>URL Scheme</code> åè®®å¼€å¤´ï¼Œç”¨ä»¥æç¤ºæµè§ˆå™¨æ‰§è¡Œä»£ç ã€‚</p><p>å¸¸ç”¨çš„æ ¼å¼ï¼š<code>javascript:xxx</code></p><div class="info"><blockquote><p><code>javascript:</code> æ˜¯åè®®å‰ç¼€ï¼Œ<code>xxx</code> æ˜¯æœ‰æ•ˆçš„å¯æ‰§è¡Œ <code>js</code> ä»£ç ã€‚</p><p>ç”±äº <code>URL</code> é™åˆ¶ï¼Œè„šæœ¬æœ€å¥½æ˜¯ä¸è¦æœ‰ç©ºæ ¼ï¼Œæˆ–è€…ä½ å¯ä»¥ç”¨å°æ‹¬å·å°†ä»£ç æ‰©èµ·æ¥ï¼Œå°†å…¶çœ‹åšæ˜¯ä¸€ä¸ªæ•´ä½“</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œå¦‚æœä½ ä¸æƒ³åœ¨æ‰§è¡Œè„šæœ¬åé¡µé¢å‘ç”Ÿè·³è½¬ï¼Œåº”è¯¥é¿å…ä»£ç çš„æœ€åçš„è¿”å›å€¼æ˜¯å­—ç¬¦ä¸²â€¦å¦‚æœä½ ä¸æ¸…æ¥šä»£ç çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Œå¯ä»¥å°†è„šæœ¬ä»£ç æ”¾å…¥è°ƒè¯•æ§åˆ¶å°æ‰§è¡Œä¸€æ¬¡ã€‚</p></blockquote></div><h3 id="ç®€å•æµ‹è¯•"><a href="#ç®€å•æµ‹è¯•" class="headerlink" title="ç®€å•æµ‹è¯•"></a>ç®€å•æµ‹è¯•</h3><pre class="language-bash" data-language="bash"><code class="language-bash">javascript:alert<span class="token punctuation">(</span><span class="token string">'Hello World!'</span><span class="token punctuation">)</span></code></pre><p>å°†ä¸Šé¢ä»£ç ç²˜è´´åˆ°æµè§ˆå™¨åœ°å€æ ï¼Œå›è½¦ä¼šå¼¹å‡º <code>Hello World!</code> æç¤ºæ¡†ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># è„šæœ¬è¿”å›å€¼æ˜¯ stringï¼Œé¡µé¢ä¼šå‘ç”Ÿè·³è½¬</span>javascript:a<span class="token operator">=</span><span class="token string">'1'</span><span class="token comment"># ä¸ä¼šè·³è½¬ï¼Œå› ä¸ºè¿”å›å€¼æ˜¯æ•°å­—</span>javascript:a<span class="token operator">=</span><span class="token string">'1'</span><span class="token punctuation">;</span><span class="token assign-left variable">b</span><span class="token operator">=</span><span class="token number">2</span></code></pre><p>æ—¢ç„¶ <code>javascript:</code> åé¢è·Ÿçš„æ˜¯å¯æ‰§è¡Œä»£ç ï¼Œé‚£ä¹ˆä¹Ÿå°±æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å°†ä»£ç æ”¾å…¥ç«‹å³æ‰§è¡Œå‡½æ•°ä¸­ï¼Œé€šè¿‡å‡½æ•°è°ƒç”¨çš„æ–¹å¼æ¥æ‰§è¡Œã€‚å½“ç„¶è¿™ä¹Ÿæ˜¯æˆ‘æ¨èçš„ä¸€ç§æ–¹å¼ï¼š</p><blockquote><p>å½¢å¦‚ï¼š <code>javascript:(function(item) &#123;&#125;)(args)</code></p></blockquote><p><code>ok</code>ï¼ŒçŸ¥é“æ€ä¹ˆç”¨äº†ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™äº›è„šæœ¬è®¾ç½®ä¸ºä¹¦ç­¾ï¼Œä¹¦ç­¾åœ°å€å³ä¸ºæˆ‘ä»¬å†™çš„è„šæœ¬å†…å®¹ã€‚ä¸‹é¢æ˜¯ä¸€äº›ä¹‹å‰ç”¨åˆ°çš„è„šæœ¬è®°å½•ï¼š</p><h3 id="è„šæœ¬è®°å½•"><a href="#è„šæœ¬è®°å½•" class="headerlink" title="è„šæœ¬è®°å½•"></a>è„šæœ¬è®°å½•</h3><h4 id="CSDN-å…ç™»é™†å¤åˆ¶"><a href="#CSDN-å…ç™»é™†å¤åˆ¶" class="headerlink" title="CSDN å…ç™»é™†å¤åˆ¶"></a><code>CSDN</code> å…ç™»é™†å¤åˆ¶</h4><p>æ–¹æ¡ˆä¸€ï¼š</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token literal-property property">javascript</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  window<span class="token punctuation">.</span>oncontextmenu <span class="token operator">=</span> document<span class="token punctuation">.</span>oncontextmenu <span class="token operator">=</span> document<span class="token punctuation">.</span>oncopy <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>  <span class="token punctuation">[</span><span class="token operator">...</span>document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">dom</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>dom<span class="token punctuation">.</span>outerHTML <span class="token operator">=</span> dom<span class="token punctuation">.</span>outerHTML<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">[</span><span class="token operator">...</span>document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'body, body *'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">dom</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">[</span>      <span class="token string">'onselect'</span><span class="token punctuation">,</span>      <span class="token string">'onselectstart'</span><span class="token punctuation">,</span>      <span class="token string">'onselectend'</span><span class="token punctuation">,</span>      <span class="token string">'ondragstart'</span><span class="token punctuation">,</span>      <span class="token string">'ondragend'</span><span class="token punctuation">,</span>      <span class="token string">'oncontextmenu'</span><span class="token punctuation">,</span>      <span class="token string">'oncopy'</span><span class="token punctuation">,</span>    <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token operator">=></span> dom<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span>ev<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    dom<span class="token punctuation">.</span>style<span class="token punctuation">[</span><span class="token string">'user-select'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'auto'</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>æ–¹æ¡ˆäºŒï¼š</p><p>ä¿®æ”¹æ–‡æ¡£è®¾è®¡æ¨¡å¼</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">document<span class="token punctuation">.</span>designMode <span class="token operator">=</span> <span class="token string">'on'</span><span class="token punctuation">;</span></code></pre><h4 id="æŒç»­æ›´æ–°ä¸­â€¦"><a href="#æŒç»­æ›´æ–°ä¸­â€¦" class="headerlink" title="æŒç»­æ›´æ–°ä¸­â€¦"></a>æŒç»­æ›´æ–°ä¸­â€¦</h4>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> è„šæœ¬ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¹¦ç­¾æ  </tag>
            
            <tag> æµè§ˆå™¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨ Nginx æ­å»ºé™æ€èµ„æºæœåŠ¡å™¨</title>
      <link href="/tools/nginx-static-server/"/>
      <url>/tools/nginx-static-server/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><blockquote><p><code>Nginx</code> é€šå¸¸ç”¨äºæ‰˜ç®¡ Web åº”ç”¨ç¨‹åºã€é™æ€ç½‘ç«™ã€ä»£ç†è¯·æ±‚åˆ°åç«¯åº”ç”¨ç¨‹åºæœåŠ¡å™¨ï¼ˆå¦‚ <code>Node.js</code>ã€<code>Ruby</code>ã€<code>Python</code> ç­‰ï¼‰ï¼Œä»¥åŠä¸ºé«˜æµé‡å’Œé«˜å¯ç”¨æ€§åœºæ™¯æä¾›è§£å†³æ–¹æ¡ˆã€‚</p></blockquote><p>æœ‰äº›åœºæ™¯ä¸‹ï¼Œéœ€è¦æˆ‘ä»¬é€šè¿‡ <code>nginx</code> æ­å»ºä¸€ä¸ªå¯è®¿é—®çš„é™æ€èµ„æºæœåŠ¡å™¨ï¼Œè€Œæ— éœ€ç¹ççš„ç¯å¢ƒé…ç½®å’Œç¨‹åºè¿è¡Œã€‚ä¾‹å¦‚ï¼šæ‰˜ç®¡ä¸æ¶‰åŠå‰åç«¯äº¤äº’çš„é™æ€èµ„æºç½‘ç«™â€¦</p><span id="more"></span><h3 id="nginx-ä¸‹è½½å®‰è£…"><a href="#nginx-ä¸‹è½½å®‰è£…" class="headerlink" title="nginx ä¸‹è½½å®‰è£…"></a><code>nginx</code> ä¸‹è½½å®‰è£…</h3><p><a href="https://nginx.org/en/download.html">å‰å¾€å®˜ç½‘</a>ï¼Œé€‰æ‹© <code>windows</code> ç¨³å®šç‰ˆï¼ˆ<code>stable versionï¼šnginx/Windows-xxx </code>ï¼‰ä¸‹è½½å‹ç¼©åŒ…ï¼Œç„¶åè§£å‹ã€‚</p><div class="danger"><blockquote><p><code>Tips:</code></p><p>ç”±äºä¸åŒçš„ <code>terminal</code> é™åˆ¶ï¼Œæœ‰çš„æŒ‡ä»¤éœ€è¦å¯èƒ½ä¼šæŠ›å¼‚å¸¸ï¼Œæœ‰çš„éœ€è¦ç®¡ç†å‘˜æƒé™ï¼Œä¸ºäº†ä¸€æ­¥åˆ°ä½ï¼Œç›´æ¥åœ¨<code>nginx.exe</code> æ‰€åœ¨æ ¹ç›®å½•ç”¨ç®¡ç†å‘˜æ‰“å¼€ <code>powershell</code> æ“ä½œå³å¯</p><p>æ­¤å¤–ï¼Œä¸‹é¢çš„ä¸€äº›å¸¸ç”¨æŒ‡ä»¤å‡æ˜¯é’ˆå¯¹ <code>windows</code> ç¯å¢ƒæå‡ºçš„ï¼Œ<code>linux</code> ç¯å¢ƒä¸‹è¿˜å¯é€šè¿‡å…¶ä»–æŒ‡ä»¤å®Œæˆ</p></blockquote></div><h3 id="å¯åŠ¨-nginx"><a href="#å¯åŠ¨-nginx" class="headerlink" title="å¯åŠ¨ nginx"></a>å¯åŠ¨ <code>nginx</code></h3><ul><li><p>æ–¹å¼ä¸€ï¼š åŒå‡» <code>nginx.exe</code>ï¼Œå±å¹•ä¼šå¼¹ä¸€ä¸ªé»‘æ¡†é—ªä¸€ä¸‹ã€‚</p></li><li><p>æ–¹å¼äºŒï¼š æ‰“å¼€ <code>cmd</code> çª—å£ï¼Œåˆ‡æ¢åˆ° <code>nginx.exe</code> ç›®å½•ï¼Œè¾“å…¥æŒ‡ä»¤ï¼š</p></li></ul><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æ–¹å¼ä¸€</span>nginx.exe<span class="token comment"># æ–¹å¼äºŒ</span>start nginx</code></pre><h3 id="è®¿é—®-nginx"><a href="#è®¿é—®-nginx" class="headerlink" title="è®¿é—® nginx"></a>è®¿é—® <code>nginx</code></h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯åŠ¨æˆåŠŸåä¼šåœ¨æœ¬åœ°å¼€å¯ <code>80</code> ç«¯å£æœåŠ¡ã€‚åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ <code>http://localhost:80</code>ï¼Œå‡ºç°å¦‚ä¸‹ç•Œé¢è¡¨ç¤ºå¯åŠ¨æˆåŠŸï¼š</p><p><a href="/images/tools/nginx-static-server/p1.png"><img src="/images/tools/nginx-static-server/p1.png" alt="nginx-static-server-p1" loading="lazy"></a></p><p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥é€šè¿‡æŒ‡ä»¤è§‚å¯Ÿæ˜¯å¦å¯åŠ¨æˆåŠŸï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash">tasklist /fi <span class="token string">"imagename eq nginx.exe"</span></code></pre><p>ç»“æœå¦‚ä¸‹ï¼š</p><p><a href="/images/tools/nginx-static-server/p2.png"><img src="/images/tools/nginx-static-server/p2.png" alt="nginx-static-server-p2" loading="lazy"></a></p><h3 id="é…ç½®-nginx"><a href="#é…ç½®-nginx" class="headerlink" title="é…ç½® nginx"></a>é…ç½® <code>nginx</code></h3><p>æ¯”å¦‚æˆ‘ä»¬å¯ä»¥ä¿®æ”¹é»˜è®¤çš„ <code>80</code> ç«¯å£ã€æœåŠ¡åç§°ã€å…¥å£æ–‡ä»¶ç­‰ç­‰ã€‚</p><p>åœ¨åˆšåˆšè§£å‹çš„ç›®å½•æ–‡ä»¶é‡Œï¼Œæ‰¾åˆ° <code>conf</code> æ–‡ä»¶å¤¹ä¸‹çš„ <code>nginx.conf</code> æ–‡ä»¶ï¼Œç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ï¼Œä¿®æ”¹å¦‚ä¸‹é…ç½®ï¼š</p><p><a href="/images/tools/nginx-static-server/p3.png"><img src="/images/tools/nginx-static-server/p3.png" alt="nginx-static-server-p3" loading="lazy"></a></p><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä¿®æ”¹äº†ä¸€äº›æ¯”è¾ƒå¸¸è§çš„ï¼Œæ¯”å¦‚ç«¯å£ã€å…¥å£æ–‡ä»¶â€¦ä¸€ä¸ªç®€å•çš„æ–‡ä»¶æœåŠ¡å°±é…ç½®å¥½äº† ğŸ˜ğŸ˜ğŸ˜</p><div class="info"><blockquote><p><code>Tips</code>:</p><p>æ£€æµ‹ <code>80</code> ç«¯å£æ˜¯å¦è¢«å ç”¨ï¼š</p><p><code>netstat -ano | findstr 0.0.0.0:80</code></p><p>æˆ–è€…</p><p><code>netstat -ano | findstr &quot;80&quot;</code></p></blockquote></div><h3 id="é‡å¯-nginx"><a href="#é‡å¯-nginx" class="headerlink" title="é‡å¯ nginx"></a>é‡å¯ <code>nginx</code></h3><p>å½“ä¿®æ”¹å®Œé…ç½®æ–‡ä»¶åï¼Œéœ€è¦é‡å¯ <code>nginx</code> æœåŠ¡ï¼Œæ‰èƒ½ç”Ÿæ•ˆã€‚<del>ä¸éœ€è¦æ‰§è¡Œå…³é—­æ“ä½œ</del></p><pre class="language-bash" data-language="bash"><code class="language-bash">nginx -s reload<span class="token comment"># æˆ–è€…æ ¹æ®æç¤º</span>./nginx -s reload</code></pre><h3 id="å…³é—­-nginx"><a href="#å…³é—­-nginx" class="headerlink" title="å…³é—­ nginx"></a>å…³é—­ <code>nginx</code></h3><p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨å®Œä»¥åï¼Œè®°å¾—è¦å…³é—­ <code>nginx</code> æœåŠ¡ï¼Œä¸ç„¶ä¼šå ç”¨æˆ‘ä»¬çš„ç«¯å£ï¼Œå½±å“å…¶ä»–æœåŠ¡ã€‚</p><p>åˆç‰¹åˆ«æ˜¯æˆ‘ä»¬åœ¨æµ‹è¯•ä¸€äº›ä»£ç çš„æ—¶å€™ï¼Œç”±äºæ›´æ–°äº†é™æ€èµ„æºæ–‡ä»¶ï¼Œæ­¤æ—¶ä¸å…³é—­ä¸Šä¸€æ¬¡å¯åŠ¨çš„æœåŠ¡ï¼Œå†ä¸€æ¬¡å¯åŠ¨ <code>nginx</code>ï¼Œæ˜¯ä¸ä¼šæŠ›å¼‚å¸¸çš„ï¼Œè€Œä»£ä»·å°±æ˜¯ï¼Œæˆ‘ä»¬çœ‹åˆ°çš„é¡µé¢æ˜¯ä¸Šä¸€æ¬¡çš„ï¼Œè€Œä¸æ˜¯æœ€æ–°çš„ã€‚</p><p>å…³é—­çª—å£å¹¶ä¸èƒ½å…³æ‰æœåŠ¡ï¼Œéœ€è¦æ‰§è¡ŒæŒ‡ä»¤ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># nginx.exe æ‰€åœ¨æ ¹ç›®å½•</span>.<span class="token punctuation">\</span>nginx -s stop<span class="token comment"># æˆ–è€…</span>./nginx -s quit<span class="token comment"># æ¨è --- ä¸€èˆ¬åœ¨è„šæœ¬ä¸­ä½¿ç”¨è¯¥æŒ‡ä»¤ï¼Œé¿å…ç”±äºå¼‚å¸¸å¯¼è‡´æ— æ³•æ­£å¸¸å…³é—­</span>taskkill /f /t /im nginx.exe</code></pre><h3 id="å®æˆ˜"><a href="#å®æˆ˜" class="headerlink" title="å®æˆ˜"></a>å®æˆ˜</h3><p>åˆ›å»ºæœåŠ¡æ–‡ä»¶å¤¹ï¼Œå°† <code>nginx</code> ç›¸å…³èµ„æºæ”¾å…¥å­æ–‡ä»¶å¤¹ï¼Œç„¶åå°†é¡¹ç›®æ‰“åŒ…åçš„ä»£ç ç²˜è´´åˆ°æ–‡ä»¶å¤¹å†…ï¼Œæœ€åå¯åŠ¨æœåŠ¡å³å¯ã€‚</p><p>é¡¹ç›®ç›®å½•å½¢å¦‚ï¼š</p><pre class="language-none"><code class="language-none">- assets- images- nginx- index.html...</code></pre><p><code>nginx</code> ç›®å½•å³ä¸ºä¸‹è½½çš„ <code>nginx</code> è§£å‹ç›®å½•ï¼Œç›¸å…³é…ç½®å¦‚ä¸Šé¢æˆªå›¾æ‰€ç¤ºã€‚</p><p>ç„¶åæˆ‘ä»¬éœ€è¦ç»™è¿™ä¸ªé™æ€èµ„æºæœåŠ¡å™¨æ·»åŠ å¯åŠ¨å’Œå…³é—­çš„è„šæœ¬å‘½ä»¤<del>æ€»ä¸èƒ½æ¯æ¬¡éƒ½è‡ªå·±æ‰“å¼€ <code>cmd</code> å†™æŒ‡ä»¤å§â€¦å¤ªéº»çƒ¦äº†</del></p><h4 id="è„šæœ¬ç¼–å†™"><a href="#è„šæœ¬ç¼–å†™" class="headerlink" title="è„šæœ¬ç¼–å†™"></a>è„šæœ¬ç¼–å†™</h4><ul><li><code>start.bat</code></li></ul><pre class="language-bat" data-language="bat"><code class="language-bat">@ECHO OFFECHO Starting NGINXcd nginxstart nginx.exestart chrome http:&#x2F;&#x2F;localhost:5000popdEXIT &#x2F;b</code></pre><ul><li><code>stop.bat</code></li></ul><pre class="language-bat" data-language="bat"><code class="language-bat">@ECHO OFFtaskkill &#x2F;f &#x2F;IM nginx.exeEXIT</code></pre><div class="success"><blockquote><p>è¯´æ˜ï¼š</p><p><code>@ECHO OFF</code> è¡¨ç¤ºä¸åœ¨å‘½ä»¤æç¤ºç¬¦çª—å£æ˜¾ç¤ºè¿™å¥è¯ä»¥ä¸‹çš„æ‰€æœ‰å‘½ä»¤ï¼ˆå³åªæ˜¾ç¤ºè¾“å‡ºç»“æœï¼‰</p><p><code>start</code> ç”¨äºå¯åŠ¨ç¨‹åº <code>taskkill</code> æ€æ­»ç¨‹åº</p><p><code>popd</code> å°†å½“å‰å·¥ä½œç›®å½•è¿˜åŸä¸ºä¹‹å‰ä¿å­˜çš„ç›®å½•ï¼ˆå³è¿”å›åˆ°è„šæœ¬æ‰§è¡Œä¹‹å‰çš„ç›®å½•ï¼‰</p><p><code>EXIT</code> é€€å‡ºæ‰¹å¤„ç†æ–‡ä»¶ï¼ˆ&#x2F;b è¡¨ç¤ºè¿”å›é€€å‡ºä»£ç ï¼‰</p></blockquote></div><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><a href="/images/tools/nginx-static-server/p4.png"><img src="/images/tools/nginx-static-server/p4.png" alt="nginx-static-server-p4" loading="lazy"></a></p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…·å­¦ä¹  </category>
          
          <category> Nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é™æ€ç½‘ç«™ </tag>
            
            <tag> æœåŠ¡å™¨ </tag>
            
            <tag> nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€äº›å¸¸ç”¨çš„å‘½ä»¤è¡Œå·¥å…·æ¨è</title>
      <link href="/tools/cli-recommend/"/>
      <url>/tools/cli-recommend/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><p>ç½—åˆ—æ—¥å¸¸å¼€å‘ä¸­ç”¨åˆ°çš„å·¥å…·åŒ…ä»¥åŠè„šæ‰‹æ¶ã€‚æŒç»­æ›´æ–°ä¸­â€¦</p><span id="more"></span><h3 id="antfu-ni"><a href="#antfu-ni" class="headerlink" title="@antfu/ni"></a><a href="https://github.com/antfu/ni"><code>@antfu/ni</code></a></h3><p>è‡ªåŠ¨æ£€æµ‹é¡¹ç›®ä¸­ä½¿ç”¨çš„åŒ…ç®¡ç†å™¨ï¼Œæ˜¯ <code>npm or yarn or pnpm...</code> ç„¶åè‡ªåŠ¨é€‰æ‹©å¯¹åº”çš„ç®¡ç†å™¨è¿è¡Œã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> i -g @antfu/nini <span class="token comment"># npm install | yarn install ...</span>ni package <span class="token comment"># npm install package | yarn add package ...</span>ni package -Dni -g package <span class="token comment"># yarn global add package</span>nr <span class="token comment"># npm run</span>nr dev <span class="token comment"># npm run dev | yarn dev ...</span>nlx <span class="token comment"># npx</span>nlx package <span class="token comment"># npx package | yarn dlx ...</span>nu <span class="token comment"># npm upgrade | yarn upgrade | yarn up | pnpm update ...</span>nu -i <span class="token comment"># yarn upgrade-interactive (Yarn 1) | yarn up -i (Yarn Berry) | yarn up -i (Yarn Berry)</span>nun <span class="token comment"># npm uninstall | yarn remove ...</span>nci <span class="token comment"># npm ci | yarn install --frozen-lockfile ...</span>na <span class="token comment"># npm | yarn ...</span></code></pre><h3 id="depcheck"><a href="#depcheck" class="headerlink" title="depcheck "></a><a href="https://github.com/depcheck/depcheck"><code>depcheck </code></a></h3><p><code>Depcheck</code> æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œç”¨äºåˆ†æé¡¹ç›®ä¸­çš„ä¾èµ–é¡¹ï¼Œä»¥æŸ¥çœ‹ <code>package.json</code> å“ªäº›ä¾èµ–é¡¹æ— ç”¨ï¼Œä»¥åŠç¼ºå°‘å“ªäº›ä¾èµ–é¡¹ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> -g depcheckdepcheck <span class="token comment"># æ ¹ç›®å½•ä¸‹æ‰§è¡Œå³å¯ or</span>depcheck <span class="token operator">&lt;</span>é¡¹ç›®ç›®å½•<span class="token operator">></span></code></pre><div class='info'><p>å¸¸ç”¨å‚æ•°ï¼š</p><ul><li><p><code>--skip-missing=[true | false]</code>ï¼šé»˜è®¤ <code>false</code>ï¼Œè¡¨ç¤ºæ˜¯å¦æ£€æµ‹ <code>Missing</code> çš„ä¾èµ–åŒ…</p></li><li><p><code>--ignore-bin-package=[true | false]</code>ï¼šé»˜è®¤ <code>false</code>ï¼Œè¡¨ç¤ºæ˜¯å¦å¿½ç•¥åŒ…å« <code>bin</code> æ¡ç›®çš„åŒ…</p></li><li><p><code>--json</code>ï¼šè¡¨ç¤ºæ‰€æœ‰åŒ…çš„æ£€æµ‹ç»“æœä»¥ <code>json</code> æ ¼å¼è¾“å‡ºï¼Œå¤§æ¦‚å°±æ˜¯ <code>XX</code> åŒ…åœ¨å“ªäº›æ–‡ä»¶ä½¿ç”¨äº†ï¼Œ{â€œåŒ…åâ€:<code>[&quot;path1&quot;,&quot;path2&quot;]</code>}</p></li><li><p><code>--ignores=&quot;eslint,babel-*&quot;</code>ï¼šè¡¨ç¤ºè¦å¿½ç•¥çš„åŒ…åç§°ï¼ˆé€—å·åˆ†éš”ï¼‰ï¼Œæ¯”å¦‚ <code>depcheck --ignores=&quot;eslint,@babel/*,babel-*&quot;</code></p></li><li><p><code>--ignore-path</code>ï¼šè¡¨ç¤ºè¦å¿½ç•¥çš„æ–‡ä»¶çš„æ¨¡å¼çš„æ–‡ä»¶çš„è·¯å¾„ï¼Œæ¯”å¦‚ <code>depcheck --ignore-path=.eslintignore</code></p></li><li><p><code>--ignore-dirs</code>ï¼šå·²ç»å¼ƒç”¨ï¼Œä½¿ç”¨ <code>--ignore-patterns</code> æ›¿ä»£ï¼Œè¡¨ç¤ºè¦å¿½ç•¥çš„ç›®å½•åï¼Œé€—å·åˆ†éš” <code>--ignore-dirs=dist,coverage</code></p></li><li><p><code>--ignore-patterns</code>ï¼šè¡¨ç¤ºè¦å¿½ç•¥çš„ç”¨é€—å·åˆ†éš”çš„æ¨¡å¼æè¿°æ–‡ä»¶ï¼Œæ¯”å¦‚ <code>depcheck --ignore-patterns=build/Release,dist,coverage,*.log</code></p></li><li><p><code>--parsers, --detectors and --specials</code>ï¼šé«˜çº§çš„è¯­æ³•ä½¿ç”¨å‚è€ƒ<a href="https://github.com/depcheck/depcheck/blob/main/doc/pluggable-design.md">å®˜æ–¹æ–‡æ¡£</a></p></li><li><p><code>--config=[filename]</code>ï¼šå¤–éƒ¨é…ç½®æ–‡ä»¶</p></li></ul></div><p>å¤–éƒ¨é…ç½®æ–‡ä»¶ï¼š<code>.depcheckrc</code> æ–‡ä»¶ ï¼ˆ<code>yml/json</code> æ ¼å¼ï¼‰ï¼Œç„¶åç›´æ¥é…ç½®</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">ignores</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'eslint'</span><span class="token punctuation">,</span> <span class="token string">'babel-*'</span><span class="token punctuation">,</span> <span class="token string">'@babel/*'</span><span class="token punctuation">]</span><span class="token key atrule">skip-missing</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></code></pre><h3 id="consoleImporter-æ’ä»¶"><a href="#consoleImporter-æ’ä»¶" class="headerlink" title="consoleImporter æ’ä»¶"></a><a href="https://chrome.google.com/webstore/detail/console-importer/hgajpakhafplebkdljleajgbpdmplhie">consoleImporter æ’ä»¶</a></h3><p>å½“æˆ‘ä»¬éœ€è¦å¯¹æŸä¸€ä¸ªä¸‰æ–¹åº“è¿›è¡Œæµ‹è¯•çš„æ—¶å€™ï¼Œæ­£å¸¸æƒ…å†µéœ€è¦æˆ‘ä»¬å…ˆæ­å»ºé¡¹ç›®åŸºç¡€ç»“æ„ï¼Œç„¶åå®‰è£…æ¨¡å—åœ¨å†™æ¡ˆä¾‹å¹¶è¿è¡Œã€‚<del>ä½†åªæ˜¯ä¸ºäº†æµ‹ä¸€ä¸‹åŠŸèƒ½ç”¨æ³•ï¼Œè¿™æ ·åšä¼šæ˜¾å¾—æœ‰äº›ç¬¨é‡ ğŸ˜…ğŸ˜…ğŸ˜…</del></p><p>å®‰è£…æµè§ˆå™¨æ’ä»¶ï¼Œæ‰“å¼€æµè§ˆå™¨è°ƒè¯•é¢æ¿ <code>console</code>ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æµè§ˆå™¨è‡ªå¸¦æŒ‡ä»¤</span>$<span class="token comment"># å®‰è£… package</span><span class="token variable">$i</span><span class="token punctuation">(</span>package<span class="token punctuation">)</span><span class="token comment"># ç„¶åå°±å¯ä»¥æ­£å¸¸ä½¿ç”¨æ¨¡å—çš„åŠŸèƒ½äº†</span></code></pre><h3 id="æŒç»­æ›´æ–°ä¸­â€¦"><a href="#æŒç»­æ›´æ–°ä¸­â€¦" class="headerlink" title="æŒç»­æ›´æ–°ä¸­â€¦"></a>æŒç»­æ›´æ–°ä¸­â€¦</h3>]]></content>
      
      
      <categories>
          
          <category> å·¥å…·å­¦ä¹  </category>
          
          <category> è„šæ‰‹æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cli </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäº Vuepress çš„é™æ€ç½‘ç«™ç”Ÿæˆå™¨å®è·µ</title>
      <link href="/tools/vuepress/"/>
      <url>/tools/vuepress/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><blockquote><p><code>VuePress</code> ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šç¬¬ä¸€éƒ¨åˆ†æ˜¯ä¸€ä¸ªæç®€é™æ€ç½‘ç«™ç”Ÿæˆå™¨ (<code>opens new window</code>)ï¼Œå®ƒåŒ…å«ç”± <code>Vue</code> é©±åŠ¨çš„ä¸»é¢˜ç³»ç»Ÿå’Œæ’ä»¶ <code>API</code>ï¼Œå¦ä¸€ä¸ªéƒ¨åˆ†æ˜¯ä¸ºä¹¦å†™æŠ€æœ¯æ–‡æ¡£è€Œä¼˜åŒ–çš„é»˜è®¤ä¸»é¢˜ï¼Œå®ƒçš„è¯ç”Ÿåˆè¡·æ˜¯ä¸ºäº†æ”¯æŒ <code>Vue</code> åŠå…¶å­é¡¹ç›®çš„<strong>æ–‡æ¡£éœ€æ±‚</strong></p></blockquote><p>ä¹‹å‰è‡ªå·±å†™äº†ä¸€ä¸ªç®€ç‰ˆçš„ <code>Vue</code> ç»„ä»¶åº“ï¼Œä½†æ˜¯æ²¡æœ‰å†™æ–‡æ¡£ï¼Œæ‰€ä»¥å°±æƒ³ç€åŠ¨æ‰‹å®é™…æ“ä½œå¹¶è®°å½•ä¸‹æ¥ã€‚</p><span id="more"></span><h3 id="æ–‡æ¡£é¡¹ç›®æ­å»º"><a href="#æ–‡æ¡£é¡¹ç›®æ­å»º" class="headerlink" title="æ–‡æ¡£é¡¹ç›®æ­å»º"></a>æ–‡æ¡£é¡¹ç›®æ­å»º</h3><p>æ ¹ç›®å½•ä¸‹æ–°å¢ <code>docs</code> æ–‡ä»¶å¤¹ï¼Œä½œä¸ºæ–‡æ¡£é¡¹ç›®çš„æ ¹èŠ‚ç‚¹ï¼Œå†åˆå§‹åŒ–ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> docs <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> ./docs <span class="token operator">&amp;&amp;</span> <span class="token function">npm</span> init -y<span class="token function">yarn</span> <span class="token function">add</span> -D vuepress</code></pre><p>æ·»åŠ é¡¹ç›®è„šæœ¬æŒ‡ä»¤ï¼š</p><pre class="language-json" data-language="json"><code class="language-json"><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>  <span class="token property">"docs:dev"</span><span class="token operator">:</span> <span class="token string">"vuepress dev ."</span><span class="token punctuation">,</span>  <span class="token property">"docs:build"</span><span class="token operator">:</span> <span class="token string">"vuepress build ."</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></code></pre><p>å¯åŠ¨æŸ¥çœ‹æ•ˆæœï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> run docs:dev</code></pre><h3 id="æ–‡æ¡£é…ç½®è°ƒæ•´"><a href="#æ–‡æ¡£é…ç½®è°ƒæ•´" class="headerlink" title="æ–‡æ¡£é…ç½®è°ƒæ•´"></a>æ–‡æ¡£é…ç½®è°ƒæ•´</h3><p>é»˜è®¤çš„æ–‡æ¡£æ­å»ºå®Œæˆåï¼Œåªèƒ½é€šè¿‡åˆ‡æ¢ç½‘å€è·¯ç”±æ¥è·³è½¬å„ä¸ªæ–‡æ¡£ï¼Œå¾ˆä¸æ–¹ä¾¿â€¦ç„¶åçœ‹åˆ°å¯ä»¥è‡ªå®šä¹‰ä¸»é¢˜ï¼Œæ ¹æ®ä¸»é¢˜é…ç½®ä¾§è¾¹æ ã€å¯¼èˆªæ ã€ä¸»é¡µç­‰ç­‰â€¦è¯¦è§ï¼š<a href="https://vuepress.vuejs.org/zh/theme/default-theme-config.html">https://vuepress.vuejs.org/zh/theme/default-theme-config.html</a></p><p>ä¸‹é¢æ˜¯æˆ‘é…ç½®çš„æ¡ˆä¾‹ï¼š</p><h4 id="å¼€å¯ä¸»é¡µæ˜¾ç¤º"><a href="#å¼€å¯ä¸»é¡µæ˜¾ç¤º" class="headerlink" title="å¼€å¯ä¸»é¡µæ˜¾ç¤º"></a>å¼€å¯ä¸»é¡µæ˜¾ç¤º</h4><p>å³é¡¹ç›®æ ¹è·¯ç”±é¡µé¢æ˜¾ç¤ºé…ç½®ï¼Œä»…åšå‚è€ƒï¼š</p><pre class="language-markdown" data-language="markdown"><code class="language-markdown"><span class="token comment">&lt;!-- /docs/README.md --></span><span class="token hr punctuation">---</span>home: trueheroImage: /favicon.icoheroText: vui-projecttagline: è½»é‡ã€å¯å®šåˆ¶çš„ç§»åŠ¨ç«¯ Vue ç»„ä»¶åº“actionText: å¿«é€Ÿä¸Šæ‰‹ â†’actionLink: /config.htmlfeatures:<span class="token list punctuation">-</span> title: ç®€æ´è‡³ä¸Š  details: ä»¥ Markdown ä¸ºä¸­å¿ƒçš„é¡¹ç›®ç»“æ„ï¼Œä»¥æœ€å°‘çš„é…ç½®å¸®åŠ©ä½ ä¸“æ³¨äºå†™ä½œã€‚<span class="token list punctuation">-</span> title: Vue é©±åŠ¨  details: äº«å— Vue + webpack çš„å¼€å‘ä½“éªŒï¼Œåœ¨ Markdown ä¸­ä½¿ç”¨ Vue ç»„ä»¶ï¼ŒåŒæ—¶å¯ä»¥ä½¿ç”¨ Vue æ¥å¼€å‘è‡ªå®šä¹‰ä¸»é¢˜ã€‚<span class="token hr punctuation">---</span></code></pre><h4 id="æ·»åŠ ä¾§è¾¹æ ã€å¯¼èˆªæ é…ç½®"><a href="#æ·»åŠ ä¾§è¾¹æ ã€å¯¼èˆªæ é…ç½®" class="headerlink" title="æ·»åŠ ä¾§è¾¹æ ã€å¯¼èˆªæ é…ç½®"></a>æ·»åŠ ä¾§è¾¹æ ã€å¯¼èˆªæ é…ç½®</h4><p>æ–°å»º <code>.vuepress</code> æ–‡ä»¶å¤¹ï¼ˆè¯·å…ˆæŸ¥çœ‹<a href="https://vuepress.vuejs.org/zh/guide/directory-structure.html">ç›®å½•ç»“æ„è¯´æ˜</a>ï¼‰ï¼Œæ–°å»º <code>config.js</code>ï¼š</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// /docs/.vuepress/config.js</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token literal-property property">themeConfig</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">logo</span><span class="token operator">:</span> <span class="token string">'/favicon.ico'</span><span class="token punctuation">,</span>    <span class="token literal-property property">lastUpdated</span><span class="token operator">:</span> <span class="token string">'Last Updated'</span><span class="token punctuation">,</span>    <span class="token literal-property property">sidebar</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token string-property property">'/config/'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'/config.html'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token string-property property">'/componentsDoc/'</span><span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token string">'button'</span> <span class="token comment">/* /componentsDoc/button.html */</span><span class="token punctuation">,</span>        <span class="token string">'text'</span> <span class="token comment">/* /componentsDoc/text.html */</span><span class="token punctuation">,</span>      <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token literal-property property">nav</span><span class="token operator">:</span> <span class="token punctuation">[</span>      <span class="token punctuation">&#123;</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'Home'</span><span class="token punctuation">,</span> <span class="token literal-property property">link</span><span class="token operator">:</span> <span class="token string">'/'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      <span class="token punctuation">&#123;</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'Guide'</span><span class="token punctuation">,</span> <span class="token literal-property property">link</span><span class="token operator">:</span> <span class="token string">'/config.html'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      <span class="token punctuation">&#123;</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'docs'</span><span class="token punctuation">,</span> <span class="token literal-property property">link</span><span class="token operator">:</span> <span class="token string">'/componentsDoc/button'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      <span class="token punctuation">&#123;</span>        <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'Languages'</span><span class="token punctuation">,</span>        <span class="token literal-property property">items</span><span class="token operator">:</span> <span class="token punctuation">[</span>          <span class="token punctuation">&#123;</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'ç®€ä½“ä¸­æ–‡'</span><span class="token punctuation">,</span> <span class="token literal-property property">link</span><span class="token operator">:</span> <span class="token string">'/language/chinese'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>          <span class="token punctuation">&#123;</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'è‹±æ–‡'</span><span class="token punctuation">,</span> <span class="token literal-property property">items</span><span class="token operator">:</span> <span class="token string">'/language/english'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      <span class="token punctuation">&#123;</span>        <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'Github'</span><span class="token punctuation">,</span>        <span class="token literal-property property">link</span><span class="token operator">:</span> <span class="token string">'https://github.com/flynna/vui-project/tree/main/docs'</span><span class="token punctuation">,</span>        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'_blank'</span><span class="token punctuation">,</span>        <span class="token literal-property property">rel</span><span class="token operator">:</span> <span class="token string">'noopener noreferrer'</span><span class="token punctuation">,</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><p>å…¶ä¸­çš„ä»¥ <code>/</code> å¼€å¤´çš„éƒ½æ˜¯é¡µé¢å¯è®¿é—®è·¯ç”±ï¼Œéœ€è¦æ·»åŠ å¯¹åº”çš„ <code>.md</code> æ–‡ä»¶ã€‚<a href="https://github.com/flynna/vui-project/tree/main/docs">å»çœ‹æºç </a></p><h4 id="ä¸»é¡µæ•ˆæœ"><a href="#ä¸»é¡µæ•ˆæœ" class="headerlink" title="ä¸»é¡µæ•ˆæœ"></a>ä¸»é¡µæ•ˆæœ</h4><p><a href="/images/tools/vuepress/p1.png"><img src="/images/tools/vuepress/p1.png" alt="vuepress-p1" loading="lazy"></a></p><h3 id="æ–‡æ¡£å®ç°"><a href="#æ–‡æ¡£å®ç°" class="headerlink" title="æ–‡æ¡£å®ç°"></a>æ–‡æ¡£å®ç°</h3><p>æ–‡æ¡£å†…å®¹å‡æ˜¯ç”± <code>.md</code> æ–‡æ¡£ç¼–å†™ï¼Œéµå¾ª <code>markdown</code> è¯­æ³•ï¼š</p><p><a href="/images/tools/vuepress/p2.png"><img src="/images/tools/vuepress/p2.png" alt="vuepress-p2" loading="lazy"></a></p><p>å¥½åƒç¼ºäº†ç‚¹ä»€ä¹ˆï¼Ÿå“¦å¯¹ï¼Œå®æ—¶æ¸²æŸ“â€¦ä¸è¯´å®æ–½ç¼–è¯‘ï¼Œè‡³å°‘åº”è¯¥å°†ç»„ä»¶æ•ˆæœå‘ˆç°å‡ºæ¥æ‰å¯¹â€¦</p><h4 id="æ·»åŠ -vui-project-ç»„ä»¶åº“"><a href="#æ·»åŠ -vui-project-ç»„ä»¶åº“" class="headerlink" title="æ·»åŠ  vui-project ç»„ä»¶åº“"></a>æ·»åŠ  <code>vui-project</code> ç»„ä»¶åº“</h4><p>å°†ä¹‹å‰å†™çš„ <code>UI</code> åº“ç»„ä»¶å¼•è¿›æ¥ï¼Œå…¨å±€æ³¨å†Œâ€¦ï¼ˆå®˜æ–¹é»˜è®¤è¯´æ˜ï¼š<code>.vuepress/components/*.vue</code> çš„ç»„ä»¶ä¼šè‡ªåŠ¨å…¨å±€æ³¨å†Œï¼‰</p><p>è¯´å®è¯ï¼Œå°† <code>packages/</code> çš„ç»„ä»¶å®ç°å†åœ¨ <code>.vuepress/components/</code> å†™ä¸€æ¬¡æ˜¯å¾ˆå†—ä½™çš„äº‹æƒ…â€¦</p><p>ç¿»äº†æ–‡æ¡£ï¼Œæœ‰ä»¥ä¸‹<strong>è§£å†³åŠæ³•</strong>ï¼š</p><ul><li><p>æ·»åŠ æ’ä»¶ <a href="https://vuepress.vuejs.org/zh/plugin/official/plugin-register-components.html">@vuepress&#x2F;plugin-register-components</a> é…ç½®è‡ªå®šä¹‰ç»„ä»¶çš„è·¯å¾„å’Œç»„ä»¶åç§°ã€‚</p></li><li><p>é€šè¿‡æ·»åŠ  <code>enhanceApp.js</code> æ–‡ä»¶æ³¨å†Œç¬¬ä¸‰æ–¹åº“çš„æ–¹å¼ï¼Œå°† <code>vui-project</code> é›†æˆè¿›æ¥ã€‚</p></li></ul><p><code>but</code> ç”±äºæˆ‘çš„ç»„ä»¶åº“æ˜¯ç”± <code>vue3</code> å†™çš„ï¼Œå’Œ <code>vuepress</code> å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼Œå¯¹æˆ‘éƒ½ä¸å¤ªé€‚ç”¨â€¦æ‰€ä»¥å°è¯•ç€æŸ¥é˜…äº†ä¸€ä¸‹ï¼Œæœç„¶æœ‰ç›¸å…³çš„ <a href="https://github.com/vuejs/vuepress/issues/2550">issue</a>ï¼Œå¯ä»¥å‘ç°ï¼Œå®˜æ–¹å°è¯•ç€å‘è¡Œæ–°çš„åº“ <a href="https://github.com/vuepress/vuepress-next">vuepress-next</a> æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†ç›®å‰è¿˜æ²¡æœ‰æ­£å¼ç‰ˆâ€¦</p><p>æ‰€ä»¥ä¸ºäº†æµ‹è¯•ç»„ä»¶åœ¨ <code>vuepress</code> çš„å¯ç”¨æ€§ï¼Œæˆ‘å°±ç›´æ¥åœ¨ <code>/docs/.vuepress/components/</code> ä¸‹å†™äº†ä¸€ä»½ <code>vue2</code> çš„åŒåŠŸèƒ½ <code>VuiText</code> ç»„ä»¶ä»£ç ã€‚</p><h4 id="æ•ˆæœå‘ˆç°"><a href="#æ•ˆæœå‘ˆç°" class="headerlink" title="æ•ˆæœå‘ˆç°"></a>æ•ˆæœå‘ˆç°</h4><p><a href="/images/tools/vuepress/p3.png"><img src="/images/tools/vuepress/p3.png" alt="vuepress-p3" loading="lazy"></a></p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…·å­¦ä¹  </category>
          
          <category> Vuepress </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é™æ€ç½‘ç«™ </tag>
            
            <tag> vuepress </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•™ä½ å¦‚ä½•å†™ä¸€ä¸ª Vue çš„ UI ç»„ä»¶åº“</title>
      <link href="/share/vue-components-ui-install/"/>
      <url>/share/vue-components-ui-install/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><p>åœ¨æ­¤ä¹‹å‰ï¼Œä½ éœ€è¦å…ˆäº†è§£<a href="/tools/npm-publish">å¦‚ä½•å‘å¸ƒä¸€ä¸ª npm-package?</a>ï¼Œä»¥åŠ <a href="/share/vue-component-vs-use">Vue.use å’Œ Vue.component</a> å®ç°ã€‚</p><div class="danger"><blockquote><p>æ³¨æ„ï¼šä» <code>UI</code> ç»„ä»¶åŠŸèƒ½å®ç°åˆ°æ‰“åŒ…æ„å»ºï¼Œæœ¬æ–‡ä¸»è¦æ˜¯å‡æ˜¯é’ˆå¯¹ <code>Vue3</code> å†™çš„ï¼Œå¦‚æœä½ éœ€è¦åœ¨ <code>Vue2</code> ä¸­ä½¿ç”¨ï¼Œéœ€è¦å•ç‹¬æä¾›å¯ç”¨äº <code>Vue2</code> çš„ <code>UI</code> åº“â€¦</p></blockquote></div><span id="more"></span><h3 id="åˆå§‹åŒ–é¡¹ç›®"><a href="#åˆå§‹åŒ–é¡¹ç›®" class="headerlink" title="åˆå§‹åŒ–é¡¹ç›®"></a>åˆå§‹åŒ–é¡¹ç›®</h3><h4 id="è„šæ‰‹æ¶æ„å»º"><a href="#è„šæ‰‹æ¶æ„å»º" class="headerlink" title="è„šæ‰‹æ¶æ„å»º"></a>è„šæ‰‹æ¶æ„å»º</h4><p>å› ä¸ºæ˜¯ä» <code>0</code> åˆ° <code>1</code> æ„å»ºï¼Œæ‰€ä»¥å°±é€‰æ‹©äº† <code>vue3</code> äº†ï¼Œå‚è€ƒ <a href="https://vuejs.org/guide/quick-start.html">https://vuejs.org/guide/quick-start.html</a></p><div class="info"><blockquote><p>npm create vue@latest<br>âœ” Project name: â€¦ xxxxx<br>âœ” Add TypeScript? â€¦ No &#x2F; Yes<br>âœ” Add JSX Support? â€¦ No &#x2F; Yes<br>âœ” Add Vue Router for Single Page Application development? â€¦ No &#x2F; Yes<br>âœ” Add Pinia for state management? â€¦ No &#x2F; Yes<br>âœ” Add Vitest for Unit testing? â€¦ No &#x2F; Yes<br>âœ” Add an End-to-End Testing Solution? â€¦ No &#x2F; Cypress &#x2F; Playwright<br>âœ” Add ESLint for code quality? â€¦ No &#x2F; Yes<br>âœ” Add Prettier for code formatting? â€¦ No &#x2F; Yes<br>Scaffolding project in .xxxxxâ€¦<br>Done.</p></blockquote></div><h4 id="ç›®å½•ç»“æ„è°ƒæ•´"><a href="#ç›®å½•ç»“æ„è°ƒæ•´" class="headerlink" title="ç›®å½•ç»“æ„è°ƒæ•´"></a>ç›®å½•ç»“æ„è°ƒæ•´</h4><p>é»˜è®¤ç”Ÿæˆçš„é¡¹ç›®ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p><p><a href="/images/share/vue-components-ui-install/p1.png"><img src="/images/share/vue-components-ui-install/p1.png" alt="vue-components-ui-install-p1" loading="lazy"></a></p><p>ä½ å¾ˆå®¹æ˜“å‘ç°ï¼Œå¤§å¤šæ•°çš„ <code>UI</code> é¡¹ç›®ç»„ä»¶åº“ï¼Œéƒ½æ˜¯å°† <code>Demo</code> è°ƒè¯•èµ„æºæ”¾ç½®åœ¨äº† <code>example/</code> ç›®å½•ä¸‹ï¼Œè€Œç»„ä»¶èµ„æºåˆ™æ”¾ç½®åˆ°äº† <code>packages/</code>ã€‚</p><p>ä¸ºäº†ä¿è¯ç»“æ„åŒ–ç»Ÿä¸€ï¼Œæˆ‘ä»¬éœ€è¦é‡å‘½å <code>src</code> ä¸º <code>example</code>ï¼ˆ<code>demo</code> å±•ç¤ºï¼Œå¯ä»¥ç›´æ¥æ˜¯ä¸€ä¸ªå®Œæ•´çš„ <code>vue</code> é¡¹ç›® â˜ºâ˜ºâ˜ºï¼‰ï¼š</p><p>æ­¤å¤–ï¼Œæˆ‘ä»¬éœ€è¦å†æ–°å»ºä¸€ä¸ª <code>src å’Œ packages</code> æ–‡ä»¶å¤¹ï¼Œä½œä¸ºç»„ä»¶åŒ…çš„å®é™…å…¥å£æ–‡ä»¶ä»¥åŠåŒ…ç›¸å…³çš„èµ„æºã€‚ä¿®æ”¹åçš„æ ¸å¿ƒç›®å½•è¯´æ˜ï¼š</p><div class="warning"><blockquote><p><code>example</code>ï¼šç”¨äºæµ‹è¯•ç»„ä»¶çš„ç›¸å…³åŠŸèƒ½ï¼Œç”¨ä½œ <code>UI</code> ç»„ä»¶çš„ <code>Demo</code> å±•ç¤ºï¼ˆåŸè„šæ‰‹æ¶åˆ›å»ºçš„ <code>src</code> ç›®å½•ï¼‰ã€‚<br><code>packages</code>ï¼šç”¨äºå­˜æ”¾å°è£…çš„è‡ªå®šä¹‰ç»„ä»¶ï¼Œä»…å«æ–‡ä»¶å¤¹ï¼Œæ¯ä¸ªå­æ–‡ä»¶å¤¹ä»£è¡¨ä¸€ä¸ªç»„ä»¶èµ„æºã€‚<br><code>src</code>ï¼šç»„ä»¶åº“æ‰“åŒ…çš„å…¥å£æ–‡ä»¶å­˜æ”¾å¤„ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥å­˜æ”¾ <code>UI</code> åº“ç›¸å…³çš„å…¶ä»–èµ„æºï¼Œä¾‹å¦‚æŒ‡ä»¤ã€å·¥å…·å‡½æ•°ã€ç±»å‹å®šä¹‰ç­‰ã€‚</p></blockquote></div><p>æ–°ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p><p><a href="/images/share/vue-components-ui-install/p2.png"><img src="/images/share/vue-components-ui-install/p2.png" alt="vue-components-ui-install-p2" loading="lazy"></a></p><h4 id="é…ç½®è°ƒæ•´"><a href="#é…ç½®è°ƒæ•´" class="headerlink" title="é…ç½®è°ƒæ•´"></a>é…ç½®è°ƒæ•´</h4><p>ç”±äºä¿®æ”¹äº†åŸè„šæ‰‹æ¶çš„ <code>src</code> ç›®å½•åç§°ï¼Œåˆæ–°å»ºäº†èµ„æºç›®å½•ï¼Œæ‰€ä»¥éœ€è¦æˆ‘ä»¬å¯¹é¡¹ç›®é…ç½®åšç›¸åº”çš„è°ƒæ•´ï¼š</p><ul><li><strong>ä¿®æ”¹ <code>index.html</code> çš„ <code>script.src</code> å±æ€§ï¼Œç”± <code>/src/main.ts</code> ä¿®æ”¹ä¸º <code>/example/main.ts</code></strong></li></ul><pre class="language-diff" data-language="diff"><code class="language-diff"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> &lt;script type="module" src="/src/main.ts">&lt;/script></span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> &lt;script type="module" src="/example/main.ts">&lt;/script></span></span></code></pre><ul><li><strong>ä¿®æ”¹ <code>vite.config.ts</code> ä¸­çš„ <code>resolve.alias @</code> ç¬¦å·çš„åˆ«åé…ç½®</strong></li></ul><pre class="language-diff" data-language="diff"><code class="language-diff"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> '@': fileURLToPath(new URL('./src', import.meta.url))</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> '@': fileURLToPath(new URL('./example', import.meta.url))</span></span></code></pre><ul><li><strong>ä¿®æ”¹ <code>package.json</code> ä¸­çš„ <code>format</code> æŒ‡ä»¤ <code>prettier</code> çš„æ–‡ä»¶å¤¹è·¯å¾„</strong></li></ul><pre class="language-diff" data-language="diff"><code class="language-diff"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> "format": "prettier --write src/"</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> "format": "prettier --write src/ example/ packages/"</span></span></code></pre><ul><li><strong>ä¿®æ”¹ <code>tsconfig.app.json</code> ä¸‹ç›¸å…³è·¯å¾„ï¼Œå¹¶æ·»åŠ  <code>include</code> é…ç½®</strong></li></ul><pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>  <span class="token comment">// ...</span>  <span class="token property">"include"</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token string">"env.d.ts"</span><span class="token punctuation">,</span>    <span class="token string">"src/**/*"</span><span class="token punctuation">,</span>    <span class="token string">"packages/**/*"</span><span class="token punctuation">,</span>    <span class="token string">"packages/**/*.vue"</span><span class="token punctuation">,</span>    <span class="token string">"example/**/*"</span><span class="token punctuation">,</span>    <span class="token string">"example/**/*.vue"</span>  <span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token property">"exclude"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"example/**/__tests__/*"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"composite"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>    <span class="token property">"baseUrl"</span><span class="token operator">:</span> <span class="token string">"."</span><span class="token punctuation">,</span>    <span class="token property">"paths"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"@/*"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"./example/*"</span><span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><div class="danger"><blockquote><p>æ³¨æ„ï¼šç”±äºç¼“å­˜çš„é—®é¢˜ï¼Œä¿®æ”¹äº†é…ç½®åï¼Œå¯èƒ½ä»å­˜åœ¨å¼‚å¸¸æç¤ºï¼Œè¿™æ—¶éœ€è¦æ‰‹åŠ¨æ¸…é™¤æ‰ <code>node_modules/.vite</code> ç›®å½•ï¼Œå…³æ‰æœåŠ¡ï¼Œå¹¶é‡å¯ç¼–è¾‘å™¨ï¼Œå†é‡å¯é¡¹ç›®ã€‚</p></blockquote></div><h3 id="ç»„ä»¶åº“è®¾è®¡"><a href="#ç»„ä»¶åº“è®¾è®¡" class="headerlink" title="ç»„ä»¶åº“è®¾è®¡"></a>ç»„ä»¶åº“è®¾è®¡</h3><p>æœ¬æ–‡æ—¨åœ¨è®°å½•ç»„ä»¶åº“çš„å®ç°è¿‡ç¨‹å’Œæ€è·¯ï¼Œæ‰€ä»¥åªå†™äº†ä¸¤ä¸ª <code>demo</code> ç»„ä»¶ã€‚<del>åç»­å¦‚æœ‰éœ€è¦ï¼Œä¼šåœ¨æ­¤åŸºç¡€ä¸Šæ·»åŠ å®Œå–„å…¶ä»–çš„ç»„ä»¶å®ç° ğŸ˜¶ğŸ˜¶ğŸ˜¶</del></p><h4 id="Demo-æŒ‰é’®ç»„ä»¶å®ç°"><a href="#Demo-æŒ‰é’®ç»„ä»¶å®ç°" class="headerlink" title="Demo æŒ‰é’®ç»„ä»¶å®ç°"></a><code>Demo</code> æŒ‰é’®ç»„ä»¶å®ç°</h4><p>åœ¨ <code>packages/</code> æ–‡ä»¶å¤¹ä¸‹åˆ›å»º <code>button/</code> æ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜æ”¾æŒ‰é’®ç»„ä»¶ç›¸å…³èµ„æºã€‚</p><p><code>ç”±äº vue3 ç‰ˆæœ¬æ”¹åŠ¨åŸå› ï¼Œv-listeners è¢«åˆå¹¶åˆ° $attrs ç»Ÿä¸€å¤„ç†ï¼Œæ‰€ä»¥å°±æ²¡æœ‰ç»‘å®š v-on=&quot;$listeners&quot; äº†</code></p><pre class="language-markup" data-language="markup"><code class="language-markup">// packages/button/src/index.vue<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'VuiButton'</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- vue3 the $listeners is deprecated --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vui-button<span class="token punctuation">"</span></span> <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$attrs<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>less<span class="token punctuation">"</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">  <span class="token selector">.vui-button</span> <span class="token punctuation">&#123;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #317a2e<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre><p><code>style æ ·å¼ä¹Ÿå¯ä»¥æ˜¯å•ç‹¬çš„ less æ–‡ä»¶ï¼Œé€šè¿‡ src å¼•å…¥å³å¯.</code></p><h4 id="less-æ”¯æŒ"><a href="#less-æ”¯æŒ" class="headerlink" title="less æ”¯æŒ"></a><code>less</code> æ”¯æŒ</h4><p>ç”±äºè„šæ‰‹æ¶å¹¶æ²¡æœ‰å†…ç½® <code>less</code>ï¼Œæ‰€ä»¥éœ€è¦å•ç‹¬å®‰è£…ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">yarn</span> <span class="token function">add</span> <span class="token function">less</span> less-loader -D</code></pre><p>å¹¶åœ¨ <code>vite.config.ts</code> ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  <span class="token comment">// ...</span>  css<span class="token operator">:</span> <span class="token punctuation">&#123;</span>    preprocessorOptions<span class="token operator">:</span> <span class="token punctuation">&#123;</span>      less<span class="token operator">:</span> <span class="token punctuation">&#123;</span>        javascriptEnabled<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="å•ç»„ä»¶æ’ä»¶æ³¨å†Œæ”¯æŒ"><a href="#å•ç»„ä»¶æ’ä»¶æ³¨å†Œæ”¯æŒ" class="headerlink" title="å•ç»„ä»¶æ’ä»¶æ³¨å†Œæ”¯æŒ"></a>å•ç»„ä»¶æ’ä»¶æ³¨å†Œæ”¯æŒ</h4><p>åœ¨æ­¤ä¹‹å‰ï¼Œå›é¡¾ä¸€ä¸‹ <code>app.use(plugin)</code> æ³¨å†Œæ’ä»¶æ—¶ï¼Œ<code>plugin</code> éœ€è¦æ»¡è¶³çš„åŸºç¡€ç»“æ„ï¼š</p><blockquote><p><code>export default &#123; install &#125; æˆ–è€… export default function(app) &#123;&#125;...</code></p></blockquote><p><code>ok</code>ï¼Œç°åœ¨æˆ‘ä»¬éœ€è¦é’ˆå¯¹ <code>VuiButton</code> å®Œæˆæ’ä»¶è®¾è®¡ï¼Œå³<code>app.use(VuiButton)</code> æ”¯æŒï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// packages/button/index.ts</span><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">&#123;</span> App <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span><span class="token keyword">import</span> VuiButton <span class="token keyword">from</span> <span class="token string">'./src/index.vue'</span><span class="token punctuation">;</span>VuiButton<span class="token punctuation">.</span><span class="token function-variable function">install</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>app<span class="token operator">:</span> App<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token punctuation">(</span>VuiButton<span class="token punctuation">.</span>name <span class="token operator">||</span> VuiButton<span class="token punctuation">.</span>__name<span class="token punctuation">)</span><span class="token operator">!</span><span class="token punctuation">,</span> VuiButton<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">type</span> <span class="token class-name">WithInstall<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token punctuation">&#123;</span> <span class="token function">install</span><span class="token punctuation">(</span>app<span class="token operator">:</span> App<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> VuiButton <span class="token keyword">as</span> WithInstall<span class="token operator">&lt;</span><span class="token keyword">typeof</span> VuiButton<span class="token operator">></span><span class="token punctuation">;</span></code></pre><p><strong><code>å¦‚ä¸Šæ‰€ç¤ºï¼Œä¸€ä¸ªå•ä¸€çš„ç»„ä»¶åŠŸèƒ½å’Œç»“æ„å°±å®ç°å¥½äº†ï¼Œå®ƒå·²ç»å…·å¤‡äº†è¢«é›†æˆçš„åŸºç¡€æ¡ä»¶</code>ã€‚</strong></p><p>åç»­åªéœ€è¦åŒ <code>Button</code> ç»„ä»¶ä¸€æ ·ï¼Œåœ¨è¯¥ <code>packages/</code> æ–‡ä»¶å¤¹ä¸‹å¼€å‘å…¶ä»–ç»„ä»¶å°±è¡Œäº†ã€‚</p><p>é¢â€¦ä½ åº”è¯¥ä¹Ÿå‘ç°äº†ï¼Œå°è£…æˆæ¨¡å—ï¼Œè²Œä¼¼æˆ‘ä»¬è¿™ä¸ªç»„ä»¶åº“è¿˜å·®ä¸€ä¸ªç¨‹åºå…¥å£â€¦</p><hr><h4 id="ç»„ä»¶åº“å…¥å£æ–‡ä»¶è®¾è®¡"><a href="#ç»„ä»¶åº“å…¥å£æ–‡ä»¶è®¾è®¡" class="headerlink" title="ç»„ä»¶åº“å…¥å£æ–‡ä»¶è®¾è®¡"></a>ç»„ä»¶åº“å…¥å£æ–‡ä»¶è®¾è®¡</h4><p>åœ¨æ ¹ç›®å½•ä¸‹æ–°åˆ›å»ºçš„ <code>src</code> ä¸‹é¢æ–°å»ºå…¥å£æ–‡ä»¶ <code>index.ts</code>ï¼Œå®ç°å¹¶å¯¼å‡º <code>install</code> æ–¹æ³•ã€‚</p><p>å’Œå•ä¸€ç»„ä»¶åº“ä¸åŒçš„æ˜¯ï¼Œç»„ä»¶åº“éœ€è¦å¯¹æ‰€æœ‰ç»„ä»¶è¿›è¡Œå…¨å±€æ³¨å†Œï¼Œå¹¶æ·»åŠ é¢å¤–çš„é…ç½®å’Œæ‰©å±•ã€‚<del>è¯¦ç»†å¯æ–‡ç« å¼€å¤´æè¿°</del></p><p>å…·ä½“å®ç°ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// /src/index.ts</span><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">&#123;</span> App <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span><span class="token keyword">import</span> Button <span class="token keyword">from</span> <span class="token string">'../packages/button'</span><span class="token punctuation">;</span><span class="token keyword">import</span> Text <span class="token keyword">from</span> <span class="token string">'../packages/text'</span><span class="token punctuation">;</span><span class="token comment">// ...other component</span><span class="token keyword">type</span> <span class="token class-name">InstallFunction</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token punctuation">(</span>app<span class="token operator">:</span> App<span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> size<span class="token operator">?</span><span class="token operator">:</span> <span class="token string">'small'</span> <span class="token operator">|</span> <span class="token string">'middle'</span> <span class="token operator">|</span> <span class="token string">'large'</span><span class="token punctuation">;</span> theme<span class="token operator">?</span><span class="token operator">:</span> <span class="token string">'dark'</span> <span class="token operator">|</span> <span class="token string">'light'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>  installed<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">interface</span> <span class="token class-name">Window</span> <span class="token keyword">extends</span> <span class="token class-name">globalThis</span><span class="token punctuation">.</span>Window <span class="token punctuation">&#123;</span>  <span class="token punctuation">[</span>k<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// æ‰€æœ‰è‡ªå®šä¹‰çš„ç»„ä»¶</span><span class="token keyword">const</span> vuiComponents <span class="token operator">=</span> <span class="token punctuation">[</span>Button<span class="token punctuation">,</span> Text<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// æ”¯æŒ use.use å…¨å±€æ³¨å†Œæ‰€æœ‰ç»„ä»¶</span><span class="token keyword">const</span> install<span class="token operator">:</span> <span class="token function-variable function">InstallFunction</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>app<span class="token punctuation">,</span> options <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// å› ä¸ºç»„ä»¶å†…éƒ¨å®ç°äº† install æ–¹æ³•ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ Vue.use</span>  vuiComponents<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>component<span class="token punctuation">)</span> <span class="token operator">=></span> app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>component<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// å¦‚æœæ²¡æœ‰å®ç°ï¼Œåˆ™å¦‚ä¸‹ï¼š</span>  <span class="token comment">// vuiComponents.forEach(component => Vue.component(component.name || component.__name, component))</span>  <span class="token comment">// -------------------------------------------------------</span>  <span class="token comment">// vue3 ä½¿ç”¨ app.config.globalProperties æ›¿ä»£ prototype</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>app<span class="token punctuation">.</span>config<span class="token punctuation">.</span>globalProperties<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    app<span class="token punctuation">.</span>config<span class="token punctuation">.</span>globalProperties<span class="token punctuation">.</span>$vui <span class="token operator">=</span> <span class="token punctuation">&#123;</span>      <span class="token operator">...</span>options<span class="token punctuation">,</span>      size<span class="token operator">:</span> options<span class="token punctuation">.</span>size <span class="token operator">||</span> <span class="token string">'middle'</span><span class="token punctuation">,</span>      theme<span class="token operator">:</span> options<span class="token punctuation">.</span>theme <span class="token operator">||</span> <span class="token string">'light'</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token comment">// ç»„ä»¶å†…éƒ¨ ä½¿ç”¨ä»¥ä¸‹æ–¹å¼è¯»å–ï¼š</span>    <span class="token comment">// import &#123; getCurrentInstance &#125; from 'vue';</span>    <span class="token comment">// const app = getCurrentInstance();</span>    <span class="token comment">// const vuiConfig = app?.appContext.config.globalProperties.$vui</span>  <span class="token punctuation">&#125;</span>  <span class="token comment">// vue2 ç‰ˆæœ¬çš„å…¨å±€é…ç½®</span>  <span class="token comment">// Vue.prototype.$vui = &#123;</span>  <span class="token comment">//   ...options,</span>  <span class="token comment">//   size: options.size || 'middle',</span>  <span class="token comment">//   theme: options.theme || 'light',</span>  <span class="token comment">// &#125;;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">// tips: ä¸‹é¢é€»è¾‘ä¸»è¦æ˜¯ä¸º vue2 æä¾›ï¼Œç›´æ¥ç»™æµè§ˆå™¨æˆ– AMD loader ä½¿ç”¨ï¼Œå¼•å…¥ script å³å¯å®Œæˆæ³¨å†Œ</span><span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> contentWindow <span class="token operator">=</span> globalThis <span class="token keyword">as</span> <span class="token builtin">unknown</span> <span class="token keyword">as</span> Window<span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>contentWindow<span class="token operator">?.</span>Vue<span class="token operator">?.</span>use<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">install</span><span class="token punctuation">(</span>contentWindow<span class="token punctuation">.</span>Vue<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">//! å½“åœ¨ Vue3 é¡¹ç›®ä¸­ä½œä¸º script å¼•å…¥æ—¶ï¼š</span><span class="token punctuation">&#123;</span>  <span class="token comment">// æ–¹æ¡ˆä¸€: æ¨è --- å…ˆå¼•å…¥ vue3 å’Œ vui çš„ scriptï¼Œç„¶åé€šè¿‡ `app.use(window.Vui)` æ¥æ‰‹åŠ¨æ³¨å†Œ</span>  <span class="token comment">// æ–¹æ¡ˆäºŒï¼šå°†å®ä¾‹åŒ–åçš„ app ä½œä¸ºå±æ€§æŒ‚è½½åˆ° window ä¸Šï¼Œä¾‹å¦‚ window.__VUE__ï¼Œè¯¦è§ ../example/demo/vue3Demo.html</span>  <span class="token keyword">const</span> contentWindow <span class="token operator">=</span> globalThis <span class="token keyword">as</span> <span class="token builtin">unknown</span> <span class="token keyword">as</span> Window<span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>contentWindow <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>contentWindow<span class="token punctuation">.</span>Vue<span class="token operator">?.</span>use <span class="token operator">&amp;&amp;</span> contentWindow<span class="token punctuation">.</span>__VUE__<span class="token operator">?.</span>use<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">install</span><span class="token punctuation">(</span>contentWindow<span class="token punctuation">.</span>__VUE__<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// è§£æ„å¯¼å…¥ eg. import &#123; Button &#125; from 'vui-project'; app.use(Button);</span><span class="token keyword">export</span> <span class="token punctuation">&#123;</span> <span class="token keyword">default</span> <span class="token keyword">as</span> Button <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'../packages/button'</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token punctuation">&#123;</span> <span class="token keyword">default</span> <span class="token keyword">as</span> Text <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'../packages/text'</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>  install<span class="token punctuation">,</span> <span class="token comment">// ç”¨äºES modulesï¼Œimport Vue åç›´æ¥ä½¿ç”¨ Vue.use()</span>  Button<span class="token punctuation">,</span>  Text<span class="token punctuation">,</span> <span class="token comment">// eg. Vui.Text</span>  <span class="token comment">// ...other component</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><div class="success"><blockquote><p><code>Tipsï¼š</code></p><ol><li><p>ç”±äº <code>vue3 å’Œ vue2</code> çš„ç‰ˆæœ¬å·®å¼‚æ€§ï¼Œ<code>vue3</code> ä¸­æ’ä»¶ <code>install</code> æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•° <code>app</code>ï¼Œå¹¶ä¸èƒ½è®¿é—®åˆ° <code>prototype</code>ã€‚æ„å‘³ç€ä¹‹å‰ <code>vue2</code> é€šè¿‡ <code>prototype</code> ä¸ºå…¨å±€æ·»åŠ é…ç½®çš„æ–¹å¼ä¸é€‚ç”¨äº†ï¼Œå¯ä»¥é€šè¿‡ **<code>app.config.globalProperties æ›¿ä»£ prototype</code>**ï¼Œå‚è€ƒä¸Šé¢å®ç°ã€‚</p></li><li><p>å¯¼å‡º <code>export &#123; default as Button &#125; from &#39;../packages/button&#39;;</code> æ˜¯ä¸ºäº†æ”¯æŒè§£æ„å¯¼å…¥ã€‚æ–¹ä¾¿åç»­åœ¨ä½¿ç”¨è¯¥ <code>UI</code> åº“æ—¶ï¼Œä»…å¼•å…¥éƒ¨åˆ†ç»„ä»¶è¿›è¡Œæ³¨å†Œã€‚<code> eg. import &#123; Button &#125; from &#39;vui-project&#39;; app.use(Button);</code></p></li><li><p>æœ€å <code>export default &#123; install, Button&#125;</code> ä¸­ä¹Ÿå¯¼å‡ºäº†ç»„ä»¶ï¼Œæ–¹ä¾¿åœ¨ä½¿ç”¨è¯¥ <code>UI</code> åº“æ—¶ï¼Œå¯ä»¥é€šè¿‡ <code>import Vui from &#39;vui-project&#39;; const &#123; Button &#125; = Vui; æˆ–è€… Vui.Button</code> çš„æ–¹å¼ä½¿ç”¨å•ä¸ªç»„ä»¶ã€‚</p></li></ol></blockquote></div><h4 id="Typescript-æ”¯æŒ"><a href="#Typescript-æ”¯æŒ" class="headerlink" title="Typescript æ”¯æŒ"></a><code>Typescript</code> æ”¯æŒ</h4><h5 id="å®šä¹‰ç±»å‹"><a href="#å®šä¹‰ç±»å‹" class="headerlink" title="å®šä¹‰ç±»å‹"></a>å®šä¹‰ç±»å‹</h5><p>æ ¹ç›®å½•ä¸‹æ–°å¢ <code>types/</code> æ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜æ”¾ç»„ä»¶åº“ç›¸å…³çš„ç±»å‹å®šä¹‰ã€‚</p><p>ä¾‹å¦‚ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// types/index.d.ts</span><span class="token keyword">import</span> Vue<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> App<span class="token punctuation">,</span> DefineComponent <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">VuiComponentSize</span> <span class="token operator">=</span> <span class="token string">'small'</span> <span class="token operator">|</span> <span class="token string">'middle'</span> <span class="token operator">|</span> <span class="token string">'large'</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">VuiComponentTheme</span> <span class="token operator">=</span> <span class="token string">'dark'</span> <span class="token operator">|</span> <span class="token string">'light'</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">InstallFunctionOptions</span> <span class="token punctuation">&#123;</span>  size<span class="token operator">?</span><span class="token operator">:</span> VuiComponentSize<span class="token punctuation">;</span>  theme<span class="token operator">?</span><span class="token operator">:</span> VuiComponentTheme<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">install</span><span class="token punctuation">(</span>vue<span class="token operator">:</span> App<span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> InstallFunctionOptions<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span><span class="token comment">/* --------------------------------------- */</span><span class="token comment">// Vue2</span><span class="token comment">// export declare class VuiComponent extends Vue &#123;</span><span class="token comment">//   static install(app: App): void;</span><span class="token comment">// &#125;</span><span class="token comment">// Vue3</span><span class="token keyword">type</span> <span class="token class-name">WithInstall<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token punctuation">&#123;</span> <span class="token function">install</span><span class="token punctuation">(</span>app<span class="token operator">:</span> App<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">// T is propsType</span><span class="token keyword">export</span> <span class="token keyword">declare</span> <span class="token keyword">type</span> <span class="token class-name">VuiComponent<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span></span> <span class="token operator">=</span> WithInstall<span class="token operator">&lt;</span>DefineComponent<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">>></span><span class="token punctuation">;</span><span class="token comment">/* --------------------------------------- */</span><span class="token comment">// VuiButton  ---------- å¯ä»¥å•ç‹¬å°†ç»„ä»¶ç±»å‹å®šä¹‰æŠ½ç¦»è‡³ç‹¬ç«‹æ–‡ä»¶ eg. button.d.ts  ------------</span><span class="token keyword">interface</span> <span class="token class-name">VuiButtonProps</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// component props...</span>  type<span class="token operator">:</span> <span class="token string">'primary'</span> <span class="token operator">|</span> <span class="token string">'success'</span> <span class="token operator">|</span> <span class="token string">'warning'</span> <span class="token operator">|</span> <span class="token string">'danger'</span> <span class="token operator">|</span> <span class="token string">'info'</span> <span class="token operator">|</span> <span class="token string">'text'</span><span class="token punctuation">;</span>  <span class="token comment">// ...</span><span class="token punctuation">&#125;</span><span class="token keyword">export</span> <span class="token keyword">declare</span> <span class="token keyword">const</span> Button<span class="token operator">:</span> VuiComponent<span class="token operator">&lt;</span>VuiButtonProps<span class="token operator">></span><span class="token punctuation">;</span><span class="token comment">// ... other component</span></code></pre><h5 id="ä¿®æ”¹é…ç½®"><a href="#ä¿®æ”¹é…ç½®" class="headerlink" title="ä¿®æ”¹é…ç½®"></a>ä¿®æ”¹é…ç½®</h5><p>ä¿®æ”¹ <code>package.json</code> çš„ <code>typings å’Œ files</code> å­—æ®µï¼š</p><pre class="language-diff" data-language="diff"><code class="language-diff">&#123;<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> # æŒ‡æ˜æ¨¡å—çš„ç±»å‹å…¥å£</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> "typings": "types/index.d.ts",</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> "files": [</span><span class="token prefix unchanged"> </span><span class="token line">   "lib",</span><span class="token prefix unchanged"> </span><span class="token line">   # npm å‘å¸ƒæ—¶ï¼Œå°† types åŒ…å«åˆ°æ¨¡å—å†…</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   "types"</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> ]</span></span>&#125;</code></pre><h3 id="æ‰“åŒ…æ„å»º-umd"><a href="#æ‰“åŒ…æ„å»º-umd" class="headerlink" title="æ‰“åŒ…æ„å»º umd"></a>æ‰“åŒ…æ„å»º <code>umd</code></h3><p>è„šæ‰‹æ¶æä¾›çš„ <code>buildã€build-only</code> æŒ‡ä»¤é»˜è®¤æ˜¯æ‰“åŒ…çš„ <code>example</code> å†…çš„èµ„æºï¼ˆå› ä¸ºå‰é¢è°ƒæ•´è¿‡ <code>index.html</code> çš„å…¥å£è·¯å¾„ï¼‰ã€‚</p><p>æ‰€ä»¥ä¸ºäº†åŒºåˆ†ï¼Œå•ç‹¬æä¾›ä¸€ä¸ªæ–‡ä»¶ç”¨äºæ‰“åŒ…ç»„ä»¶åº“ç›¸å…³çš„èµ„æºï¼š</p><h4 id="æ·»åŠ ç»„ä»¶åº“æ‰“åŒ…é…ç½®æ–‡ä»¶-viteLib-config-ts"><a href="#æ·»åŠ ç»„ä»¶åº“æ‰“åŒ…é…ç½®æ–‡ä»¶-viteLib-config-ts" class="headerlink" title="æ·»åŠ ç»„ä»¶åº“æ‰“åŒ…é…ç½®æ–‡ä»¶ viteLib.config.ts"></a>æ·»åŠ ç»„ä»¶åº“æ‰“åŒ…é…ç½®æ–‡ä»¶ <code>viteLib.config.ts</code></h4><p><code>åˆ«å¿˜è®°æŠŠæ‰“åŒ…åçš„ lib æ–‡ä»¶å¤¹æ·»åŠ åˆ° .gitignore</code></p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">'@vitejs/plugin-vue'</span><span class="token punctuation">;</span><span class="token keyword">import</span> vueJsx <span class="token keyword">from</span> <span class="token string">'@vitejs/plugin-vue-jsx'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> resolve <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'path'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> defineConfig <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vite'</span><span class="token punctuation">;</span><span class="token comment">// https://vitejs.dev/config/</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">vueJsx</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  css<span class="token operator">:</span> <span class="token punctuation">&#123;</span>    preprocessorOptions<span class="token operator">:</span> <span class="token punctuation">&#123;</span>      less<span class="token operator">:</span> <span class="token punctuation">&#123;</span>        javascriptEnabled<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  build<span class="token operator">:</span> <span class="token punctuation">&#123;</span>    outDir<span class="token operator">:</span> <span class="token string">'lib'</span><span class="token punctuation">,</span>    lib<span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token comment">// Could also be a dictionary or array of multiple entry points</span>      entry<span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/index.ts'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>      name<span class="token operator">:</span> <span class="token string">'Vui'</span><span class="token punctuation">,</span>      <span class="token comment">// the proper extensions will be added</span>      fileName<span class="token operator">:</span> <span class="token string">'vui'</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    rollupOptions<span class="token operator">:</span> <span class="token punctuation">&#123;</span>      external<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'vue'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      output<span class="token operator">:</span> <span class="token punctuation">&#123;</span>        format<span class="token operator">:</span> <span class="token string">'umd'</span><span class="token punctuation">,</span> <span class="token comment">// è¾“å‡ºæ ¼å¼ä¸º UMD</span>        name<span class="token operator">:</span> <span class="token string">'Vui'</span><span class="token punctuation">,</span> <span class="token comment">// UMD å…¨å±€å˜é‡åç§° --- æœªæŒ‡å®šåˆ™ä½¿ç”¨ lib.name</span>        globals<span class="token operator">:</span> <span class="token punctuation">&#123;</span>          vue<span class="token operator">:</span> <span class="token string">'Vue'</span><span class="token punctuation">,</span> <span class="token comment">// key: åº“ä¸­çš„æ¨¡å—ä¾èµ–é¡¹çš„åç§°, value: åœ¨æµè§ˆå™¨ä¸­è®¿é—®è¿™ä¸ªæ¨¡å—ä¾èµ–é¡¹æ—¶åº”è¯¥ä½¿ç”¨çš„å…¨å±€å˜é‡çš„åç§°</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><blockquote><p>å› ä¸º <code>UI</code> åº“æ˜¯ç”± <code>Vue3</code> å†™çš„ï¼Œä½¿ç”¨ä¸€èˆ¬ä¹Ÿæ˜¯åœ¨è¯¥ç¯å¢ƒä¸‹ï¼Œä¸ºäº†é¿å…é€ æˆäº§ç‰©å†—ä½™ï¼Œéœ€è¦åœ¨ <code>external</code> ä¸­æ·»åŠ ä¸Šå¤–éƒ¨åŒ–çš„ä¾èµ–ï¼Œä»¥åœ¨æ‰“åŒ…çš„æ—¶å€™å‰”é™¤ã€‚</p><p>å½“ <code>output</code> äº§ç‰©æ˜¯ <code>umd</code> æ ¼å¼æ—¶ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ <code>script</code> å¼•å…¥ä½¿ç”¨ï¼Œæ‰€ä»¥éœ€è¦æä¾›ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œæ”¯æŒå¼€å‘è€…é€šè¿‡å…¨å±€å˜é‡æ¥è®¿é—®åº“çš„ä¸€äº›åŠŸèƒ½ã€‚é…ç½®ç”¨äºæŒ‡å®šæ¨¡å—ä¾èµ–é¡¹ä¸å…¨å±€å˜é‡ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œä¾‹å¦‚ä¸Šé¢é…ç½®çš„ <code>vue</code> æ¨¡å—å’Œ <code>Vue</code> å…¨å±€å˜é‡æ˜ å°„ï¼‰</p><p><code>Vite</code> é»˜è®¤çš„ <code>formats</code> æœ‰ <code>es</code> å’Œ <code>umd</code> ä¸¤ç§æ ¼å¼ï¼Œæ‰€ä»¥å³ä½¿æ²¡æœ‰é…ç½®æ‰“åŒ…åä¹Ÿä¼šç”Ÿæˆä¸¤ä»½æ–‡ä»¶ã€‚</p></blockquote><h4 id="æ·»åŠ ç»„ä»¶åº“æ‰“åŒ…è„šæœ¬æŒ‡ä»¤"><a href="#æ·»åŠ ç»„ä»¶åº“æ‰“åŒ…è„šæœ¬æŒ‡ä»¤" class="headerlink" title="æ·»åŠ ç»„ä»¶åº“æ‰“åŒ…è„šæœ¬æŒ‡ä»¤"></a>æ·»åŠ ç»„ä»¶åº“æ‰“åŒ…è„šæœ¬æŒ‡ä»¤</h4><pre class="language-json" data-language="json"><code class="language-json"><span class="token comment">// package.json</span><span class="token punctuation">&#123;</span>  <span class="token comment">// ...</span>  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// ...</span>    <span class="token property">"build:lib"</span><span class="token operator">:</span> <span class="token string">"vite build --config viteLib.config.ts"</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>æ‰§è¡Œç»„ä»¶åº“æ‰“åŒ…å‘½ä»¤ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">yarn</span> build:lib</code></pre><p>ç”Ÿæˆæ„å»ºåçš„èµ„æºæ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><a href="/images/share/vue-components-ui-install/p3.png"><img src="/images/share/vue-components-ui-install/p3.png" alt="vue-components-ui-install-p3" loading="lazy"></a></p><p>å¶ä¹°å™¶â€¦<code>css</code> èµ„æºè¢«å•ç‹¬æ‰“åŒ…å‡ºæ¥äº†â€¦.</p><h4 id="å°†-CSS-æ‰“åŒ…è¿›-JS"><a href="#å°†-CSS-æ‰“åŒ…è¿›-JS" class="headerlink" title="å°† CSS æ‰“åŒ…è¿› JS"></a>å°† <code>CSS</code> æ‰“åŒ…è¿› <code>JS</code></h4><p>ä½œä¸ºä¸€ä¸ªç‹¬ç«‹ç»„ä»¶åº“ï¼Œæˆ‘ä¸å¸Œæœ›æ¯æ¬¡ä½¿ç”¨çš„æ—¶å€™å†å•ç‹¬å¼•å…¥ <code>css</code> èµ„æºï¼Œæ‰€ä»¥ä¸‹é¢åšä¸€äº›ä¼˜åŒ–å¤„ç†ï¼š</p><p>å‘ƒâ€¦ç¿»äº†ä¸‹ <code>vite</code> æ–‡æ¡£ï¼ŒåŸºäºæŸäº›åŸå› ï¼Œå®˜æ–¹å¹¶æ²¡æœ‰æä¾›è¯¥ç±»éœ€æ±‚çš„é…ç½®ï¼Œåœ¨ <a href="https://github.com/vitejs/vite/issues/1579">issues</a> é‡Œæ‰¾åˆ°äº†å®ç°æ–¹æ¡ˆï¼š<strong>é€šè¿‡ <a href="https://www.npmjs.com/package/vite-plugin-css-injected-by-js">vite-plugin-css-injected-by-js</a> æ’ä»¶ï¼Œå°† <code>css</code> é€šè¿‡ <code>js</code> æ³¨å…¥åˆ°é¡µé¢ä¸­</strong>ï¼š</p><blockquote><p>yarn add vite-plugin-css-injected-by-js -D</p></blockquote><p>ä¿®æ”¹ <code>viteLib.config.ts</code> æ‰“åŒ…é…ç½®ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> defineConfig <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vite'</span><span class="token punctuation">;</span><span class="token keyword">import</span> cssInjectedByJsPlugin <span class="token keyword">from</span> <span class="token string">'vite-plugin-css-injected-by-js'</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token function">cssInjectedByJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token comment">// ... other plugins</span>  <span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment">// ... other config</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>é‡æ–°æ‰§è¡Œ <code>yarn build:lib</code>ï¼Œ<code>css</code> æ–‡ä»¶ç»ˆäºæ²¡äº†~~~ï¼Œç”Ÿæˆçš„ä¸¤ä¸ªæ–‡ä»¶ï¼š</p><blockquote><p><code>/lib/vui.mjs</code>ï¼šåŸºäº <code>es</code> æ ¼å¼çš„æ¨¡å—åŒ…ï¼ˆæ›´å¥½åœ°åˆ©ç”¨æ¨¡å—åŒ–çš„ä¼˜åŠ¿ï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯é‡ç”¨æ€§ï¼‰</p><p><code>/lib/vui.umd.js</code>ï¼šä¸€ä¸ªç›´æ¥ç»™æµè§ˆå™¨æˆ– <code>AMD loader</code> ä½¿ç”¨çš„ <code>umd</code> æ ¼å¼åŒ…</p></blockquote><h3 id="ç»„ä»¶åº“åŠŸèƒ½æµ‹è¯•"><a href="#ç»„ä»¶åº“åŠŸèƒ½æµ‹è¯•" class="headerlink" title="ç»„ä»¶åº“åŠŸèƒ½æµ‹è¯•"></a>ç»„ä»¶åº“åŠŸèƒ½æµ‹è¯•</h3><h4 id="UMD-é“¾æ¥æµ‹è¯•"><a href="#UMD-é“¾æ¥æµ‹è¯•" class="headerlink" title="UMD é“¾æ¥æµ‹è¯•"></a><code>UMD</code> é“¾æ¥æµ‹è¯•</h4><p>åœ¨ <code>example/</code> ä¸‹æ–°å»º <code>demo/vue3Demo.html</code>ï¼Œå°†ç”Ÿæˆçš„æ–‡ä»¶å¼•å…¥åˆ° <code>html</code> é¡µé¢ä¸­ï¼Œæµ‹è¯•ç»„ä»¶åº“æ˜¯å¦æ­£å¸¸å·¥ä½œï¼š</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/vue<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>vui-button</span><span class="token punctuation">></span></span>æµ‹è¯•ä¸€ä¸‹è‡ªå®šä¹‰çš„button<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>vui-button</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../lib/vui.umd.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">    <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> createApp <span class="token punctuation">&#125;</span> <span class="token operator">=</span> Vue<span class="token punctuation">;</span>    <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>Vui<span class="token punctuation">)</span><span class="token punctuation">;</span>    app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œæ•ˆæœä¸€åˆ‡æ­£å¸¸ï¼š</p><p><a href="/images/share/vue-components-ui-install/p4.png"><img src="/images/share/vue-components-ui-install/p4.png" alt="vue-components-ui-install-p4" loading="lazy"></a></p><h3 id="ç»„ä»¶åº“å‘å¸ƒ"><a href="#ç»„ä»¶åº“å‘å¸ƒ" class="headerlink" title="ç»„ä»¶åº“å‘å¸ƒ"></a>ç»„ä»¶åº“å‘å¸ƒ</h3><h4 id="ä¿®æ”¹-package-json-é…ç½®"><a href="#ä¿®æ”¹-package-json-é…ç½®" class="headerlink" title="ä¿®æ”¹ package.json é…ç½®"></a>ä¿®æ”¹ <code>package.json</code> é…ç½®</h4><p>åŒæ—¶ï¼Œç§»é™¤ <code>example</code> ç›¸å…³çš„è„šæœ¬æŒ‡ä»¤ï¼Œä¾‹å¦‚ï¼š<code>buildã€build-only</code>ï¼ŒåŒæ—¶å°† <code>dependencies</code> ä¸­çš„ <code>vue</code> ç›¸å…³ä¾èµ–ç§»åˆ° <code>devDependencies</code>ã€‚å¹¶æ·»åŠ ç»„ä»¶åŒ…çš„å‰ç½®ä¾èµ– <code>vue^3</code>ï¼ˆ<code>example</code> ç›¸å…³èµ„æºåªåœ¨å¼€å‘ç¯å¢ƒä¸‹è°ƒè¯•ä½¿ç”¨ï¼‰ã€‚</p><pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>  <span class="token comment">// ... ç§»é™¤ private: true é…ç½®</span>  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"0.0.1"</span><span class="token punctuation">,</span>  <span class="token comment">// npm åŒ…å…¥å£</span>  <span class="token property">"main"</span><span class="token operator">:</span> <span class="token string">"lib/vui.mjs"</span><span class="token punctuation">,</span>  <span class="token comment">// cdn ç›¸å…³</span>  <span class="token property">"unpkg"</span><span class="token operator">:</span> <span class="token string">"lib/vui.umd.js"</span><span class="token punctuation">,</span>  <span class="token comment">// package description keywords</span>  <span class="token property">"author"</span><span class="token operator">:</span> <span class="token string">"hrlin &lt;flynnzhl@qq.com>"</span><span class="token punctuation">,</span>  <span class="token property">"homepage"</span><span class="token operator">:</span> <span class="token string">"https://github.com/flynna/vui-project/blob/main/README.md"</span><span class="token punctuation">,</span>  <span class="token property">"license"</span><span class="token operator">:</span> <span class="token string">"ISC"</span><span class="token punctuation">,</span>  <span class="token comment">// æ·»åŠ å‘å¸ƒæŒ‡ä»¤é’©å­</span>  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// ...</span>    <span class="token property">"prepublishOnly"</span><span class="token operator">:</span> <span class="token string">"npm run build:lib"</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token comment">// æŒ‡å®šéœ€è¦å‘å¸ƒçš„æ–‡ä»¶ï¼Œæ•ˆæœåŒ .npmignore</span>  <span class="token property">"files"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"lib"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment">// å‘å¸ƒé…ç½®</span>  <span class="token property">"publishConfig"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"access"</span><span class="token operator">:</span> <span class="token string">"public"</span><span class="token punctuation">,</span>    <span class="token property">"registry"</span><span class="token operator">:</span> <span class="token string">"https://registry.npmjs.org"</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token comment">// ä»“åº“é…ç½®</span>  <span class="token property">"repository"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"git"</span><span class="token punctuation">,</span>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://github.com/flynna/vui-project.git"</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token comment">// bugs</span>  <span class="token property">"bugs"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://github.com/flynna/vui-project/issues"</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="ä¿®æ”¹-npm-registry-é…ç½®"><a href="#ä¿®æ”¹-npm-registry-é…ç½®" class="headerlink" title="ä¿®æ”¹ npm.registry é…ç½®"></a>ä¿®æ”¹ <code>npm.registry</code> é…ç½®</h4><p>å› ä¸ºå…¬å¸åœ¨å†…ç½‘æ­å»ºçš„ <code>npm</code> æœåŠ¡ï¼Œæ‰€ä»¥å¦‚æœæˆ‘éœ€è¦å°†åŒ…å‘åˆ° <code>npm</code> å®˜ç½‘ï¼Œéœ€è¦ä¿®æ”¹ <code>npm</code> æºï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> config <span class="token builtin class-name">set</span> registry https://registry.npmjs.org</code></pre><p><code>ok</code>ï¼Œä¿®æ”¹æˆåŠŸï¼Œæ‰§è¡Œå‘å¸ƒè„šæœ¬<del>ï¼ˆæ–‡ç« å¼€å¤´æœ‰æåˆ°å¦‚ä½•å‘å¸ƒä¸€ä¸ª <code>npm</code> åŒ…ï¼‰</del>ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> login<span class="token comment"># è¾“å…¥è´¦å·å¯†ç é‚®ç®±éªŒè¯ç ... æ²¡æœ‰è´¦å·å¯ä»¥å…ˆæ³¨å†Œä¸€ä¸ª</span><span class="token function">npm</span> publish</code></pre><h4 id="å‘å¸ƒæˆåŠŸ"><a href="#å‘å¸ƒæˆåŠŸ" class="headerlink" title="å‘å¸ƒæˆåŠŸ"></a>å‘å¸ƒæˆåŠŸ</h4><p>æµ‹è¯• <code>CDN</code> æœåŠ¡æ˜¯å¦æœ‰æ•ˆï¼ˆæœ¬åœ°æµ‹è¿‡äº†ï¼Œç›´æ¥å¼•ç”¨ <code>cdn</code> åŠŸèƒ½æ­£å¸¸çš„ï¼‰ï¼Œæ•ˆæœå›¾å¦‚ä¸‹ï¼š</p><p><a href="/images/share/vue-components-ui-install/p5.png"><img src="/images/share/vue-components-ui-install/p5.png" alt="vue-components-ui-install-p5" loading="lazy"></a></p><p><a href="/images/share/vue-components-ui-install/p6.png"><img src="/images/share/vue-components-ui-install/p6.png" alt="vue-components-ui-install-p6" loading="lazy"></a></p><h4 id="é¡¹ç›®é‡Œä½¿ç”¨"><a href="#é¡¹ç›®é‡Œä½¿ç”¨" class="headerlink" title="é¡¹ç›®é‡Œä½¿ç”¨"></a>é¡¹ç›®é‡Œä½¿ç”¨</h4><p><code>yarn add</code> å®‰è£…æ¨¡å— <code>vui-project</code>ï¼Œåœ¨ <code>example/main.ts</code> ä¸­å¼•å…¥ç»„ä»¶åº“ã€‚</p><div class="danger"><blockquote><p><code>Tips</code>ï¼š</p><ol><li><p>å› ä¸ºæµ‹è¯•é¡¹ç›® <code>example</code> å’Œæˆ‘ç»„ä»¶åº“è‡ªèº«å…±ç”¨ä¸€ä¸ªåŒ…(<code>package.json</code>)çš„ç¼˜æ•…ï¼Œè°ƒè¯•å®Œæˆæˆ‘å°±æŠŠå®‰è£…çš„ <code>vui-project</code> ç§»é™¤äº†ï¼Œé¿å…äº§ç”Ÿå¾ªç¯ä¾èµ–å¯¹åç»­ç‰ˆæœ¬å‘å¸ƒäº§ç”Ÿå½±å“ã€‚</p></li><li><p>å®‰è£…è‡ªèº«æ¨¡å—ä»…æ˜¯ä¸ºäº†æµ‹è¯•æ¨¡å—å‘å¸ƒåæ˜¯å¦å¯ç”¨ï¼Œä»…æµ‹è¯•åŠŸèƒ½çš„è¯å¯ä»¥ä¸å®‰è£…å¯ä»¥ç›´æ¥å¼•å…¥ <code>build</code> è¿‡åçš„äº§ç‰©å³å¯ã€‚</p></li></ol></blockquote></div><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createApp <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span><span class="token comment">// æµ‹è¯•è‡ªå®šä¹‰çš„ç»„ä»¶</span><span class="token keyword">import</span> Vui <span class="token keyword">from</span> <span class="token string">'vui-project'</span><span class="token punctuation">;</span><span class="token comment">// import &#123; Button, Text &#125; from 'vui-project'; ç»æµ‹è¯•ï¼Œç»„ä»¶å•ç‹¬æ³¨å†Œä¹Ÿæ˜¯å¯ä»¥çš„...</span><span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span><span class="token punctuation">;</span><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">;</span>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vui<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ...</span>app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><code>App.vue</code> ä¿®æ”¹ï¼Œæ·»åŠ è‡ªå®šä¹‰çš„ç»„ä»¶ï¼š</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>  <span class="token comment">&lt;!-- ... other template --></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>vui-button</span><span class="token punctuation">></span></span>æµ‹è¯•ä¸€ä¸‹è‡ªå®šä¹‰çš„button<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>vui-button</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></code></pre><p>æ•ˆæœï¼š</p><p><a href="/images/share/vue-components-ui-install/p7.png"><img src="/images/share/vue-components-ui-install/p7.png" alt="vue-components-ui-install-p7" loading="lazy"></a></p><h3 id="ç»„ä»¶åº“æ–‡æ¡£æ­å»º"><a href="#ç»„ä»¶åº“æ–‡æ¡£æ­å»º" class="headerlink" title="ç»„ä»¶åº“æ–‡æ¡£æ­å»º"></a>ç»„ä»¶åº“æ–‡æ¡£æ­å»º</h3><p>è¯¦ç»†å®ç°ï¼š<a href="/tools/vuepress">åŸºäº Vuepress çš„é™æ€ç½‘ç«™ç”Ÿæˆå™¨å®è·µ</a></p><div class="waring"><blockquote><p>Tips: ç”±äº <code>Vuepress</code> ä¾èµ–çš„ <code>vue-server-renderer</code> ç‰ˆæœ¬éœ€è¦å’Œ <code>vue</code> ä¿æŒä¸€è‡´ï¼Œè€Œæˆ‘è¿™ä¸ªæµ‹è¯•çš„ç»„ä»¶åº“æ˜¯åŸºäº <code>vue3</code> å®ç°çš„ï¼Œæ‰€ä»¥æ–‡æ¡£å’Œè°ƒè¯•é¡¹ç›® <code>example</code> å¹¶æ²¡æœ‰å…±ç”¨ä¸€ä¸ª <code>package.json</code></p></blockquote></div><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><div class="info"><blockquote><p>å®Œæ•´æºç ï¼š<a href="https://github.com/flynna/vui-project">https://github.com/flynna/vui-project</a></p><p><a href="/tools/npm-publish">å¦‚ä½•å‘å¸ƒä¸€ä¸ª npm-package?</a></p><p><a href="/share/vue-component-vs-use">Vue.component å’Œ Vue.use ä¸¤è€…ä¹‹é—´çš„åŒºåˆ«</a></p></blockquote></div>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> vue3 </tag>
            
            <tag> æ’ä»¶æ³¨å†Œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue.component å’Œ Vue.use ä¸¤è€…ä¹‹é—´çš„åŒºåˆ«</title>
      <link href="/share/vue-component-vs-use/"/>
      <url>/share/vue-component-vs-use/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><p>çªç„¶æƒ³èµ·ï¼Œé¡¹ç›®é‡Œå¤§å¤šæ—¶å€™ï¼Œ<code>UI</code> ç»„ä»¶åº“åœ¨è¿›è¡Œå…¨å±€æˆ–è€…å±€éƒ¨æ³¨å†Œçš„æ—¶å€™ï¼Œä¼šä½¿ç”¨åˆ° <code>Vue.use</code>ï¼Œæœ‰æ—¶å€™ä¹Ÿä¼šä½¿ç”¨åˆ° <code>Vue.component</code>ï¼Œé‚£ä¹ˆä¸¤è€…ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿæˆ‘ä»¬åˆåº”è¯¥å¦‚ä½•æ ¹æ®åœºæ™¯é€‰æ‹©æ³¨å†Œæ–¹å¼å‘¢ï¼Ÿ</p><span id="more"></span><h3 id="Vue-component"><a href="#Vue-component" class="headerlink" title="Vue.component"></a><code>Vue.component</code></h3><blockquote><p>ç”¨äºæ³¨å†Œå…¨å±€ç»„ä»¶ã€‚å…¨å±€ç»„ä»¶æ˜¯å¯ä»¥åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨çš„ç»„ä»¶ï¼Œä¸éœ€è¦åœ¨æ¯ä¸ªå•ç‹¬çš„ç»„ä»¶ä¸­å†æ¬¡æ³¨å†Œã€‚</p></blockquote><p>é€šå¸¸ï¼Œä½ ä¼šåœ¨æ ¹ <code>Vue</code> å®ä¾‹åˆ›å»ºä¹‹å‰ä½¿ç”¨ <code>Vue.component</code> æ¥æ³¨å†Œå…¨å±€ç»„ä»¶ã€‚<code>eg:</code></p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span><span class="token keyword">import</span> MyComponent <span class="token keyword">from</span> <span class="token string">'./MyComponent.vue'</span><span class="token punctuation">;</span>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'my-component'</span><span class="token punctuation">,</span> MyComponent<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>å®Œæˆæ³¨å†Œåï¼Œä½ å¯ä»¥åœ¨ä»»ä½• <code>Vue</code> ç»„ä»¶çš„æ¨¡æ¿ä¸­ä½¿ç”¨è¿™ä¸ªç»„ä»¶ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-component</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-component</span><span class="token punctuation">></span></span></code></pre><h3 id="Vue-use"><a href="#Vue-use" class="headerlink" title="Vue.use"></a><code>Vue.use</code></h3><blockquote><p>ç”¨äºæ³¨å†Œ <code>Vue.js</code> æ’ä»¶ã€‚æ’ä»¶é€šå¸¸æ˜¯ç¬¬ä¸‰æ–¹åº“æˆ–åŠŸèƒ½æ¨¡å—ï¼Œå®ƒä»¬å¯ä»¥åœ¨ <code>Vue</code> åº”ç”¨ä¸­å…¨å±€ä½¿ç”¨ã€‚</p></blockquote><p>å½“ä½ ä½¿ç”¨ <code>Vue.use</code> æ³¨å†Œä¸€ä¸ªæ’ä»¶æ—¶ï¼Œå®ƒä¼šè°ƒç”¨æ’ä»¶çš„ <code>install</code> æ–¹æ³•ï¼Œä¼ é€’ <code>Vue</code> æ„é€ å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œä»¥ä¾¿æ’ä»¶å¯ä»¥è¿›è¡Œå¿…è¦çš„åˆå§‹åŒ–å’Œæ‰©å±•ã€‚<code>eg:</code></p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span><span class="token keyword">import</span> MyPlugin <span class="token keyword">from</span> <span class="token string">'./my-plugin'</span><span class="token punctuation">;</span>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>MyPlugin<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> size<span class="token operator">:</span> <span class="token string">'middle'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><code>MyPlugin</code> å°±éœ€è¦æˆ‘ä»¬æä¾› <code>install</code> æ–¹æ³•ï¼Œæˆ–è€…å½“ <code>MyPlugin</code> æœ¬èº«å°±æ˜¯ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œåˆ™ç›´æ¥è¿è¡Œï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// ./my-plugin.js</span><span class="token keyword">import</span> MyComponent <span class="token keyword">from</span> <span class="token string">'./MyComponent.vue'</span><span class="token punctuation">;</span><span class="token comment">// å½“ä½¿ç”¨ Vue.use() æ³¨å†Œæ’ä»¶æ—¶ï¼Œinstall æ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼Œåœ¨è¯¥æ–¹æ³•å†…éƒ¨ï¼Œå³å¯å®ç°å…¨å±€æ³¨å†Œçš„ç›¸å…³é€»è¾‘</span><span class="token keyword">const</span> <span class="token function-variable function">install</span> <span class="token operator">=</span> <span class="token punctuation">(</span>Vue<span class="token punctuation">,</span> options<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Vue'</span><span class="token punctuation">,</span> Vue<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Vue æ„é€ å‡½æ•°</span>  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'MyPlugin installed!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// æœŸæœ›ç”¨æˆ·æ‰§è¡Œ Vue.use(MyPlugin) æ—¶ï¼Œ1.æ³¨å†Œç»„ä»¶ï¼š</span>  Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'my-component'</span><span class="token punctuation">,</span> MyComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 2.æœŸæœ›ç”¨æˆ·åœ¨æ³¨å†Œçš„æ—¶å€™ä¸ºç»„ä»¶æ·»åŠ ä¸€äº›å…¨å±€é…ç½®ï¼Œä¾‹å¦‚ä¸»é¢˜é¢œè‰²å°ºå¯¸ç­‰... ã€é€šè¿‡åœ¨ Vue çš„åŸå‹ä¸Šæ·»åŠ å…¨å±€æ–¹æ³•æˆ–å±æ€§å®ç°ã€‘</span>  Vue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$MyPlugin <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    <span class="token operator">...</span>options<span class="token punctuation">,</span>    size<span class="token operator">:</span> options<span class="token punctuation">.</span>size<span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token comment">// 3.æ·»åŠ å…¨å±€æ–¹æ³•æˆ–å±æ€§</span>  Vue<span class="token punctuation">.</span><span class="token function-variable function">globalFunction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token comment">// 4.æŒ‚è½½å…¨å±€æŒ‡ä»¤</span>  Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'my-directive'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>    <span class="token function">bind</span> <span class="token punctuation">(</span>el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> oldVnode<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token comment">// é€»è¾‘...</span>    <span class="token punctuation">&#125;</span>    <span class="token operator">...</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 5.æ³¨å…¥å…¨å±€èµ„æº --- è™½ç„¶ä¸æ¨èè¿™ä¹ˆåš</span>  Vue<span class="token punctuation">.</span><span class="token function">mixin</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>    <span class="token function-variable function">created</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token comment">// é€»è¾‘...</span>    <span class="token punctuation">&#125;</span>    <span class="token operator">...</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>  install<span class="token punctuation">,</span> <span class="token comment">// å¯¼å‡º install æ–¹æ³•ï¼Œæ”¯æŒæ’ä»¶å¼æ³¨å†Œ</span>  MyComponent<span class="token punctuation">,</span> <span class="token comment">// å¯¼å‡ºæ”¹ç»„ä»¶ï¼Œæ”¯æŒç»„ä»¶å•ä¸ªæ³¨å†Œ</span><span class="token punctuation">&#125;</span></code></pre><p>é€šè¿‡åœ¨ <code>Vue</code> çš„åŸå‹ä¸Šæ·»åŠ å…¨å±€æ–¹æ³•æˆ–å±æ€§å®ç°æ¥æ‰©å±•ç»„ä»¶åŠŸèƒ½ï¼Œå¦‚ä¸Šæ‰€ç¤ºï¼Œåœ¨åŠŸèƒ½ç»„ä»¶å†…éƒ¨å®ç°æ—¶å³å¯é€šè¿‡ <code>this.$MyPlugin</code> æ¥è¯»å–é…ç½®ä¿¡æ¯ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// ./my-component.vue</span>computed<span class="token operator">:</span> <span class="token punctuation">&#123;</span>  <span class="token function">size</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$MyPlugin<span class="token punctuation">.</span>size<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="ä¸ºä»€ä¹ˆè¦æä¾›-install"><a href="#ä¸ºä»€ä¹ˆè¦æä¾›-install" class="headerlink" title="ä¸ºä»€ä¹ˆè¦æä¾› install?"></a>ä¸ºä»€ä¹ˆè¦æä¾› <code>install</code>?</h4><p>ç»†çœ‹ <code>vue</code> æºç ï¼Œå¯ä»¥å‘ç°ï¼Œ<code>Vue.use</code> è°ƒç”¨åæ‰§è¡Œäº†æ’ä»¶æä¾›çš„ <code>install</code> æ–¹æ³•ï¼Œæˆ–è€…å½“æ’ä»¶æœ¬èº«æ˜¯å‡½æ•°çš„æ—¶å€™ï¼Œæ— éœ€æä¾› <code>install</code>ã€‚æ­¤å¤–åœ¨æ‰§è¡Œå‰ï¼Œå†…ç½®äº† <code>this</code> å‚æ•°ï¼Œä¹Ÿå°±æ˜¯ <code>Vue</code> æ„é€ å™¨ä½œä¸ºæ’ä»¶åˆå§‹åŒ–çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> toArray <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'../util/index'</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">initUse</span><span class="token punctuation">(</span>Vue<span class="token operator">:</span> GlobalAPI<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  Vue<span class="token punctuation">.</span><span class="token function-variable function">use</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>plugin<span class="token operator">:</span> <span class="token builtin">Function</span> <span class="token operator">|</span> Object<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> installedPlugins <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_installedPlugins <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_installedPlugins <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>installedPlugins<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>plugin<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// additional parameters</span>    <span class="token keyword">const</span> args <span class="token operator">=</span> <span class="token function">toArray</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    args<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> plugin<span class="token punctuation">.</span>install <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      plugin<span class="token punctuation">.</span><span class="token function">install</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>plugin<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> plugin <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token function">plugin</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    installedPlugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>plugin<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="å·®å¼‚æ€»ç»“"><a href="#å·®å¼‚æ€»ç»“" class="headerlink" title="å·®å¼‚æ€»ç»“"></a>å·®å¼‚æ€»ç»“</h3><ul><li><p><code>Vue.component</code> ç”¨äºæ³¨å†Œå…¨å±€ç»„ä»¶ï¼Œä»¥ä¾¿åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ã€‚</p></li><li><p><code>Vue.use</code> ç”¨äºæ³¨å†Œ <code>Vue.js</code> æ’ä»¶ï¼Œä»¥æ‰©å±• <code>Vue</code> çš„åŠŸèƒ½å’Œæ·»åŠ å…¨å±€æ–¹æ³•æˆ–å±æ€§ã€‚</p></li><li><p><strong>ä½¿ç”¨æ—¶æœºä¸åŒ</strong>ï¼š<code>Vue.component</code> é€šå¸¸åœ¨ç»„ä»¶å®šä¹‰ä¹‹å‰ä½¿ç”¨ï¼Œè€Œ <code>Vue.use</code> é€šå¸¸åœ¨æ ¹ <code>Vue</code> å®ä¾‹åˆ›å»ºä¹‹å‰ä½¿ç”¨ã€‚</p></li></ul><h3 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h3><p><code>Vue.component</code> ç”¨äºå…¨å±€ç»„ä»¶æ³¨å†Œã€‚è€Œ <code>Vue.use</code> ä¸ä»…å¯ä»¥åœ¨æ’ä»¶å†…éƒ¨é€šè¿‡æ‰§è¡Œ <code>Vue.component</code> å®ç°ç»„ä»¶çš„æ‰¹é‡æ³¨å†Œé€»è¾‘ï¼Œé¢å¤–æ·»åŠ ä¸€äº›è‡ªå®šä¹‰å¤„ç†ï¼Œæå‡å¼€å‘ä½“éªŒï¼Œè¿˜å¤šç”¨äºç¬¬ä¸‰æ–¹æ’ä»¶åº“é›†æˆï¼Œä¾‹å¦‚ <code>VueRouter...</code>ğŸ’€ğŸ’€ğŸ’€</p><blockquote><p>ä¹‹æ‰€ä»¥å‡ ä¹æ‰€æœ‰çš„ <code>UI</code> åº“éƒ½æ”¯æŒ <code>Vue.use</code> æ–¹å¼ï¼Œä¸€æ˜¯å› ä¸ºå¯ä»¥è¿›è¡Œæ‰¹é‡å…¨å±€æ³¨å†Œã€‚äºŒæ˜¯å¯ä»¥æ·»åŠ è‡ªå®šä¹‰çš„ç»„ä»¶é…ç½®ç­‰ç­‰â€¦è¿™äº›éƒ½æ˜¯ <code>Vue.component</code> ä¸å…·å¤‡çš„ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> vueComponent </tag>
            
            <tag> vueUse </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue Component åŠ¨æ€ç»„ä»¶å’Œ v-if æ§åˆ¶ç»„ä»¶ä¸¤è€…åŒºåˆ«ï¼Ÿ</title>
      <link href="/share/vue-component-vs-vif/"/>
      <url>/share/vue-component-vs-vif/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><p>å…¶å®ä¸¤è€…ä»å®šä¹‰ä¸Šè®²åŒºåˆ«è¿˜æ˜¯æŒºæ˜æ˜¾çš„ï¼š</p><blockquote><p><code>v-if</code>ï¼šç”¨äºæ¡ä»¶æ€§åœ°æ˜¾ç¤ºæˆ–éšè—ä¸€ä¸ªå…ƒç´ ï¼Œé€‚ç”¨äºç®€å•çš„æ¡ä»¶æ¸²æŸ“ã€‚</p></blockquote><blockquote><p><code>component</code>ï¼šé€šè¿‡ <code>:is</code> å±æ€§å®ç°ç»„ä»¶çš„åŠ¨æ€åˆ‡æ¢ï¼Œé€‚ç”¨äºæ›´å¤æ‚çš„æ¡ä»¶æ¸²æŸ“åœºæ™¯ï¼Œå¯ä»¥æ ¹æ®æ¡ä»¶åŠ è½½ä¸åŒçš„ç»„ä»¶</p></blockquote><p>é‚£ä¸ºä»€ä¹ˆè¦å•ç‹¬æ‹§å‡ºæ¥è¯´å‘¢ï¼Ÿæ˜¯å› ä¸º<strong>ä¸¤è€…åœ¨ç‰¹æ®Šæƒ…å†µä¸‹æ˜¯å…·æœ‰ä¸€è‡´æ€§</strong>çš„..ğŸ˜ŸğŸ˜ŸğŸ˜Ÿ</p><span id="more"></span><h3 id="ç›¸åŒç‚¹"><a href="#ç›¸åŒç‚¹" class="headerlink" title="ç›¸åŒç‚¹"></a>ç›¸åŒç‚¹</h3><p>ä»…ä»åˆ‡æ¢å•ä¸ªç»„ä»¶æ¸²æŸ“çš„è§’åº¦æ¥è®²ï¼š<code>component</code> <strong>åŠ¨æ€ç»„ä»¶å¯ä»¥ç†è§£ä¸ºå°±æ˜¯ <code>v-if</code> æ§åˆ¶æ˜¾ç¤ºçš„è¯­æ³•ç³–</strong>ã€‚</p><p><em>è¯•æƒ³ä¸€ä¸ªåœºæ™¯ï¼Œå½“æˆ‘ä»¬éœ€è¦ä»å¾ˆå¤šä¸ªç»„ä»¶ä¸­æŒ‘é€‰ä¸€ä¸ªè¿›è¡Œæ¸²æŸ“çš„æ—¶å€™ï¼Œä½¿ç”¨ <code>v-if</code> å°±ä¼šæ˜¾å¾—ç‰¹åˆ«çš„è‡ƒè‚¿ï¼Œè¿™ä¸ªæ—¶å€™åˆ‡æ¢åˆ° <code>component</code>æ¸²æŸ“ï¼Œå¯ä»¥å¢åŠ ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§</em></p><p>ä¾‹å¦‚ï¼š</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MyComponentA</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>showComponentName === <span class="token punctuation">'</span>MyComponentA<span class="token punctuation">'</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>A<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MyComponentA</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MyComponentB</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>showComponentName === <span class="token punctuation">'</span>MyComponentB<span class="token punctuation">'</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>B<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MyComponentB</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MyComponentC</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>showComponentName === <span class="token punctuation">'</span>MyComponentC<span class="token punctuation">'</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>C<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MyComponentC</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MyComponentD</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>showComponentName === <span class="token punctuation">'</span>MyComponentD<span class="token punctuation">'</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>D<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MyComponentD</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MyComponentE</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>showComponentName === <span class="token punctuation">'</span>MyComponentE<span class="token punctuation">'</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>E<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MyComponentE</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MyComponentF</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>showComponentName === <span class="token punctuation">'</span>MyComponentF<span class="token punctuation">'</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>F<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MyComponentF</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">  <span class="token keyword">import</span> MyComponentA <span class="token keyword">from</span> <span class="token string">'./MyComponentA.vue'</span><span class="token punctuation">;</span>  <span class="token keyword">import</span> MyComponentB <span class="token keyword">from</span> <span class="token string">'./MyComponentB.vue'</span><span class="token punctuation">;</span>  <span class="token keyword">import</span> MyComponentC <span class="token keyword">from</span> <span class="token string">'./MyComponentC.vue'</span><span class="token punctuation">;</span>  <span class="token keyword">import</span> MyComponentD <span class="token keyword">from</span> <span class="token string">'./MyComponentD.vue'</span><span class="token punctuation">;</span>  <span class="token keyword">import</span> MyComponentE <span class="token keyword">from</span> <span class="token string">'./MyComponentE.vue'</span><span class="token punctuation">;</span>  <span class="token keyword">import</span> MyComponentF <span class="token keyword">from</span> <span class="token string">'./MyComponentF.vue'</span><span class="token punctuation">;</span>  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>        <span class="token literal-property property">showComponentName</span><span class="token operator">:</span> <span class="token string">'MyComponentA'</span><span class="token punctuation">,</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      MyComponentA<span class="token punctuation">,</span>      MyComponentB<span class="token punctuation">,</span>      MyComponentC<span class="token punctuation">,</span>      MyComponentD<span class="token punctuation">,</span>      MyComponentE<span class="token punctuation">,</span>      MyComponentF<span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><p>æ˜¯ä¸æ˜¯çœ‹ç€éƒ½æŒºç´¯â€¦.</p><p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ <code>component</code> ç»„ä»¶æ¥æ¸²æŸ“ï¼Œè¿™æ ·ä»£ç çœ‹èµ·æ¥å°±ç®€æ´å¤šäº†ï¼š</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>showComponentName<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>        <span class="token literal-property property">showComponentName</span><span class="token operator">:</span> <span class="token string">'MyComponentA'</span><span class="token punctuation">,</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token function-variable function">MyComponentA</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./MyComponentA.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>      <span class="token function-variable function">MyComponentB</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./MyComponentB.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>      <span class="token function-variable function">MyComponentC</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./MyComponentC.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>      <span class="token function-variable function">MyComponentD</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./MyComponentD.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>      <span class="token function-variable function">MyComponentE</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./MyComponentE.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>      <span class="token function-variable function">MyComponentF</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./MyComponentF.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><p>ä¸ºä»€ä¹ˆè¯´è¿™ç§æ¨¡å¼ä¸‹ï¼Œ<code>component</code> å¯ä»¥ç†è§£ä¸º <code>v-if</code> çš„è¯­æ³•ç³–ï¼Ÿ</p><blockquote><p><strong>å½“é€šè¿‡ <code>is</code> åˆ‡æ¢ <code>component</code> ç»„ä»¶æ˜¾ç¤ºæ—¶ï¼Œå¯¹æ¯” <code>v-if</code> é¡µé¢æ¸²æŸ“å’Œé’©å­å‡½æ•°çš„æ‰§è¡Œæƒ…å†µï¼Œä¸¤è€…æ˜¯ä¸€è‡´çš„ã€‚</strong></p></blockquote><p>é™¤æ­¤ä¹‹å¤–ï¼š</p><h3 id="ä¸åŒç‚¹"><a href="#ä¸åŒç‚¹" class="headerlink" title="ä¸åŒç‚¹"></a>ä¸åŒç‚¹</h3><ul><li><p><code>v-if</code> æ—¨åœ¨æ§åˆ¶å•ä¸ªå…ƒç´ çš„æ¸²æŸ“ï¼Œ<strong>å¹¶æœªé™åˆ¶å…ƒç´ æ˜¯å¦ä¸ºç‹¬ç«‹ç»„ä»¶</strong></p></li><li><p><code>v-if</code> é€‚åˆç®€å•çš„æ¸²æŸ“åœºæ™¯ï¼Œä½¿ç”¨èµ·æ¥ä¹Ÿæ›´åŠ çš„çµæ´»ï¼Œè€Œ <strong><code>component</code> å±€é™äºå¤šé€‰ä¸€çš„æƒ…å†µ</strong></p></li><li><p>ä¸€ä¸ªæ˜¯æŒ‡ä»¤ï¼Œä¸€ä¸ªæ˜¯ç»„ä»¶ï¼Œä¸¤è€…å®ç°å’Œå®é™…ç”¨æ³•ä¸ä¸€æ ·ï¼Œåªæœ‰åœ¨ç‰¹å®šæƒ…å†µä¸‹ä¸¤è€…æ˜¯ä¸€è‡´çš„ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> component </tag>
            
            <tag> v-if </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç§»åŠ¨ç«¯è°ƒè¯•ç¥å™¨ä¹‹ vConsole</title>
      <link href="/tools/v-console/"/>
      <url>/tools/v-console/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><p>å‰é¢å¼€å‘ç§»åŠ¨ç«¯åŠŸèƒ½çš„æ—¶å€™ï¼Œå‘ç°è°ƒè¯•å¹¶ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œä¸»è¦ä½“ç°åœ¨éƒ¨åˆ†å…¼å®¹æ€§é—®é¢˜å’Œä½“éªŒä¸Šï¼Œæµè§ˆå™¨æ¨¡æ‹Ÿçš„æ‰‹æœºå¹¶ä¸èƒ½å®Œå…¨æ›¿ä»£ã€‚</p><p>éƒ¨åˆ†åŠŸèƒ½åªæœ‰ä¸Šçº¿åï¼Œæ‰èƒ½åœ¨æ‰‹æœºä¸Šå‘ç°é”™è¯¯ï¼Œç„¶åæœºç¼˜å·§åˆä¸‹å‘ç°äº†è…¾è®¯å¼€æºçš„ <code>vConsole</code> å·¥å…·ã€‚</p><blockquote><p><a href="https://github.com/Tencent/vConsole/blob/dev/README_CN.md"><code>vConsole</code></a> ä¸€ä¸ªè½»é‡ã€å¯æ‹“å±•ã€é’ˆå¯¹æ‰‹æœºç½‘é¡µçš„å‰ç«¯å¼€å‘è€…è°ƒè¯•é¢æ¿ã€‚å’Œæ¡†æ¶æ— å…³ï¼Œå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è¿›è¡Œä½¿ç”¨ã€‚ï¼ˆå¾®ä¿¡å°ç¨‹åºçš„å®˜æ–¹è°ƒè¯•å·¥å…·ï¼‰</p></blockquote><span id="more"></span><h3 id="ç‰¹æ€§ä»‹ç»"><a href="#ç‰¹æ€§ä»‹ç»" class="headerlink" title="ç‰¹æ€§ä»‹ç»"></a>ç‰¹æ€§ä»‹ç»</h3><ul><li><p>æŸ¥çœ‹ <code>console</code> æ—¥å¿—</p></li><li><p>æŸ¥çœ‹ç½‘ç»œè¯·æ±‚</p></li><li><p>æŸ¥çœ‹é¡µé¢ <code>element</code> ç»“æ„</p></li><li><p>æŸ¥çœ‹ <code>cookieã€localStorageã€sessionStorage</code></p></li><li><p>æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬ç›¸å…³ä¿¡æ¯</p></li><li><p>æ‰§è¡Œå‘½ä»¤è¡Œè„šæœ¬</p></li><li><p>è‡ªå®šä¹‰æ’ä»¶</p></li></ul><p>å¯ä»¥ç†è§£ä¸ºå°±æ˜¯æµè§ˆå™¨ <code>DevTools</code> çš„ä¸€ä¸ªç¼©ç•¥ç‰ˆã€‚</p><h3 id="å®‰è£…åŠåˆå§‹åŒ–"><a href="#å®‰è£…åŠåˆå§‹åŒ–" class="headerlink" title="å®‰è£…åŠåˆå§‹åŒ–"></a>å®‰è£…åŠåˆå§‹åŒ–</h3><h4 id="cdn-æ–¹å¼"><a href="#cdn-æ–¹å¼" class="headerlink" title="cdn æ–¹å¼"></a><code>cdn</code> æ–¹å¼</h4><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!-- å®‰è£… --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/vconsole@latest/dist/vconsole.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- ä½¿ç”¨ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">  <span class="token comment">// VConsole é»˜è®¤ä¼šæŒ‚è½½åˆ° `window.VConsole` ä¸Š</span>  <span class="token keyword">var</span> vConsole <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">window<span class="token punctuation">.</span>VConsole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><p>ç›¸å…³èµ„æºï¼š</p><blockquote><p><code>https://unpkg.com/vconsole@latest/dist/vconsole.min.js</code> &gt; <code>https://cdn.jsdelivr.net/npm/vconsole@latest/dist/vconsole.min.js</code></p></blockquote><h4 id="npm-æ–¹å¼"><a href="#npm-æ–¹å¼" class="headerlink" title="npm æ–¹å¼"></a><code>npm</code> æ–¹å¼</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> vconsole</code></pre><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> VConsole <span class="token keyword">from</span> <span class="token string">'vconsole'</span><span class="token punctuation">;</span><span class="token keyword">const</span> vConsole <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VConsole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// å®Œæˆè°ƒè¯•åï¼Œå¯é”€æ¯ vConsole</span>vConsole<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><blockquote><p><code>TIPS:</code> <strong>VConsole å®ä¾‹åŒ–åï¼Œé¡¹ç›®é‡Œæ‰€æœ‰çš„ <code>console.log</code> è¯­å¥ä»¥åŠé”™è¯¯ä¿¡æ¯ã€ç½‘ç»œè¯·æ±‚ç­‰ç­‰ï¼Œéƒ½é»˜è®¤ä¼šåœ¨ <code>vConsole</code> é¢æ¿è¿›è¡Œå±•ç¤ºï¼Œæ— éœ€æ‰‹åŠ¨é¢å¤–æ“ä½œ</strong> <del>æœ‰ä¸ªå‰æå°±æ˜¯ <code>vConsole</code> å®ŒæˆæŒ‚è½½ä¹‹åçš„æ—¥å¿—æ‰ä¼šåœ¨ <code>vConsole</code> é¢æ¿æ˜¾ç¤º ğŸ˜²ğŸ˜²ğŸ˜²</del></p></blockquote><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><p>åœ¨ <code>vConsole</code> æ¨¡å—æˆåŠŸå¼•å…¥åï¼Œä¼šåœ¨é¡µé¢çš„å³ä¸‹è§’å‡ºç° <code>vConsole</code> æŒ‰é’®ï¼Œå¯ä»¥å±•å¼€&#x2F;æ”¶èµ·è°ƒè¯•é¢æ¿ã€‚<strong>æ³¨æ„åœ¨ç”Ÿäº§ç¯å¢ƒå±è”½è¯¥åŠŸèƒ½</strong>ã€‚</p><p>æ”¯æŒåŸç”Ÿ <code>console</code> çš„å‡ ä¹å¤§éƒ¨åˆ†åŠŸèƒ½å’Œè¯­æ³•ã€‚<code>eg:</code></p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> VConsole <span class="token keyword">from</span> <span class="token string">'vconsole'</span><span class="token punctuation">;</span><span class="token keyword">const</span> vConsole <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VConsole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// æµ‹è¯•æ‰“å°ä¿¡æ¯å‡ä¼šå±•ç¤ºåœ¨ vConsole é¢æ¿ä¸­</span><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">18</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ”¯æŒ object å’Œ array ç­‰ç±»å‹å˜é‡æ‰“å°</span><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">18</span> <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">'hello world '</span><span class="token punctuation">,</span> <span class="token string">'hhh'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ”¯æŒå¤šå‚æ•°æ‰“å°</span><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">18</span> <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä¸æ”¯æŒ</span><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä¸æ”¯æŒ</span><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ...</span></code></pre><p>æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><a href="/images/tools/v-console/p1.png"><img src="/images/tools/v-console/p1.png" alt="v-console-p1" loading="lazy"></a></p><hr><h3 id="æ–‡æ¡£"><a href="#æ–‡æ¡£" class="headerlink" title="æ–‡æ¡£"></a>æ–‡æ¡£</h3><h4 id="vConsole-æœ¬ä½“"><a href="#vConsole-æœ¬ä½“" class="headerlink" title="vConsole æœ¬ä½“"></a><code>vConsole</code> æœ¬ä½“</h4><p>åˆå§‹åŒ– <code>option</code> é…ç½®è§å¦‚ä¸‹ï¼šå…¬å…±å±æ€§åŠæ–¹æ³•</p><ul><li><a href="./doc/tutorial_CN.md">ä½¿ç”¨æ•™ç¨‹</a></li><li><a href="./doc/public_properties_methods_CN.md">å…¬å…±å±æ€§åŠæ–¹æ³•</a></li><li><a href="./doc/plugin_properties_methods_CN.md">å†…ç½®æ’ä»¶ï¼šå±æ€§åŠæ–¹æ³•</a></li></ul><h4 id="è‡ªå®šä¹‰æ’ä»¶"><a href="#è‡ªå®šä¹‰æ’ä»¶" class="headerlink" title="è‡ªå®šä¹‰æ’ä»¶"></a>è‡ªå®šä¹‰æ’ä»¶</h4><ul><li><a href="./doc/plugin_getting_started_CN.md">æ’ä»¶ï¼šå…¥é—¨</a></li><li><a href="./doc/plugin_building_a_plugin_CN.md">æ’ä»¶ï¼šç¼–å†™æ’ä»¶</a></li><li><a href="./doc/plugin_event_list_CN.md">æ’ä»¶ï¼šEvent äº‹ä»¶åˆ—è¡¨</a></li></ul><h3 id="ç¬¬ä¸‰æ–¹æ’ä»¶åˆ—è¡¨"><a href="#ç¬¬ä¸‰æ–¹æ’ä»¶åˆ—è¡¨" class="headerlink" title="ç¬¬ä¸‰æ–¹æ’ä»¶åˆ—è¡¨"></a>ç¬¬ä¸‰æ–¹æ’ä»¶åˆ—è¡¨</h3><ul><li><a href="https://github.com/WechatFE/vConsole-sources">vConsole-sources</a></li><li><a href="https://github.com/diamont1001/vconsole-webpack-plugin">vconsole-webpack-plugin</a></li><li><a href="https://github.com/smackgg/vConsole-Stats">vconsole-stats-plugin</a></li><li><a href="https://github.com/Zippowxk/vue-vconsole-devtools">vconsole-vue-devtools-plugin</a></li><li><a href="https://github.com/sunlanda/vconsole-outputlog-plugin">vconsole-outputlog-plugin</a></li><li><a href="https://github.com/vadxq/vite-plugin-vconsole">vite-plugin-vconsole</a></li></ul><hr><h3 id="æºç å‰–æ"><a href="#æºç å‰–æ" class="headerlink" title="æºç å‰–æ"></a>æºç å‰–æ</h3><h4 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h4><ul><li><p>é€šè¿‡ <code>window</code> ç›‘å¬é¡µé¢åŠ è½½ï¼ŒåŠ è½½å®Œæˆåå‘é¡µé¢è¿½åŠ è°ƒè¯•ç›¸å…³çš„ <code>DOM</code>ã€‚</p></li><li><p>ç±»ä¼¼ <code>logã€network</code> é¢æ¿ç­‰ç›¸å…³çš„æ¸²æŸ“æ˜¾ç¤ºï¼Œåˆ™æ˜¯é€šè¿‡é‡å†™ <code>window</code> ä¸‹å¯¹åº”çš„ç³»ç»Ÿæ–¹æ³•ï¼Œè¿½åŠ ä¸€äº›è‡ªå®šä¹‰æ“ä½œå®Œæˆã€‚</p></li></ul><h4 id="åŸç†å®ç°"><a href="#åŸç†å®ç°" class="headerlink" title="åŸç†å®ç°"></a>åŸç†å®ç°</h4><h5 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h5><p>å…¥å£åœ¨ <code>src/core/core.js</code>ï¼Œé‡‡ç”¨å•ä¾‹æ¨¡å¼ï¼Œåªå…è®¸æœ‰ä¸€ä¸ª <code>vconsole</code> å®ä¾‹ï¼š</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// ...</span><span class="token keyword">class</span> <span class="token class-name">VConsole</span> <span class="token punctuation">&#123;</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">opt</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span>$<span class="token punctuation">.</span><span class="token function">one</span><span class="token punctuation">(</span><span class="token constant">VCONSOLE_ID</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      console<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">'vConsole is already exists.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token comment">// ...</span></code></pre><p><code>vConsole</code> é¢æ¿é‡Œçš„æ¨¡å—åˆ™æ˜¯é€šè¿‡æ’ä»¶çš„å½¢å¼é›†æˆè¿›å»çš„ç‹¬ç«‹æ¨¡å—ï¼š</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// built-in plugins</span><span class="token keyword">import</span> VConsolePlugin <span class="token keyword">from</span> <span class="token string">'../lib/plugin.js'</span><span class="token punctuation">;</span><span class="token keyword">import</span> VConsoleLogPlugin <span class="token keyword">from</span> <span class="token string">'../log/log.js'</span><span class="token punctuation">;</span><span class="token keyword">import</span> VConsoleDefaultPlugin <span class="token keyword">from</span> <span class="token string">'../log/default.js'</span><span class="token punctuation">;</span><span class="token keyword">import</span> VConsoleSystemPlugin <span class="token keyword">from</span> <span class="token string">'../log/system.js'</span><span class="token punctuation">;</span><span class="token keyword">import</span> VConsoleNetworkPlugin <span class="token keyword">from</span> <span class="token string">'../network/network.js'</span><span class="token punctuation">;</span><span class="token keyword">import</span> VConsoleElementPlugin <span class="token keyword">from</span> <span class="token string">'../element/element.js'</span><span class="token punctuation">;</span><span class="token keyword">import</span> VConsoleStoragePlugin <span class="token keyword">from</span> <span class="token string">'../storage/storage.js'</span><span class="token punctuation">;</span></code></pre><h5 id="åŠ è½½-DOM"><a href="#åŠ è½½-DOM" class="headerlink" title="åŠ è½½ DOM"></a>åŠ è½½ <code>DOM</code></h5><p>ç›‘å¬ <code>window</code> äº‹ä»¶ï¼Œç¡®å®šåŠ è½½ç»“æŸåæŒ‚è½½ <code>vconsole</code> ç›¸å…³ <code>dom</code>ï¼š</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// try to init</span><span class="token keyword">let</span> <span class="token function-variable function">_onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>that<span class="token punctuation">.</span>isInited<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  that<span class="token punctuation">.</span><span class="token function">_render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  that<span class="token punctuation">.</span><span class="token function">_mockTap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  that<span class="token punctuation">.</span><span class="token function">_bindEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  that<span class="token punctuation">.</span><span class="token function">_autoRun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>document <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token string">'loading'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">$</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> <span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span> _onload<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    <span class="token function">_onload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// if document does not exist, wait for it</span>  <span class="token keyword">let</span> _timer<span class="token punctuation">;</span>  <span class="token keyword">let</span> <span class="token function-variable function">_pollingDocument</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span>document <span class="token operator">&amp;&amp;</span> document<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token string">'complete'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      _timer <span class="token operator">&amp;&amp;</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>_timer<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">_onload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>      _timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>_pollingDocument<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  _timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>_pollingDocument<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h5 id="Log-æ¨¡å—å®ç°"><a href="#Log-æ¨¡å—å®ç°" class="headerlink" title="Log æ¨¡å—å®ç°"></a><code>Log</code> æ¨¡å—å®ç°</h5><p>é€šè¿‡é‡å†™ <code>window.console..</code> çš„ç›¸å…³æ–¹æ³•ï¼Œæ‰§è¡Œè‡ªå·±çš„ <code>printLog</code> å¹¶è®°å½•ï¼Œæœ€åæ¸²æŸ“åˆ° <code>vconsole</code> é¢æ¿ï¼š</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// src/log/log.js</span><span class="token comment">// ...</span><span class="token comment">/** * replace window.console with vConsole method * @private */</span><span class="token function">mockConsole</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> methodList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'log'</span><span class="token punctuation">,</span> <span class="token string">'info'</span><span class="token punctuation">,</span> <span class="token string">'warn'</span><span class="token punctuation">,</span> <span class="token string">'debug'</span><span class="token punctuation">,</span> <span class="token string">'error'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>window<span class="token punctuation">.</span>console<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    window<span class="token punctuation">.</span>console <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    methodList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">method</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      that<span class="token punctuation">.</span>console<span class="token punctuation">[</span>method<span class="token punctuation">]</span> <span class="token operator">=</span> window<span class="token punctuation">.</span>console<span class="token punctuation">[</span>method<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    that<span class="token punctuation">.</span>console<span class="token punctuation">.</span>time <span class="token operator">=</span> window<span class="token punctuation">.</span>console<span class="token punctuation">.</span>time<span class="token punctuation">;</span>    that<span class="token punctuation">.</span>console<span class="token punctuation">.</span>timeEnd <span class="token operator">=</span> window<span class="token punctuation">.</span>console<span class="token punctuation">.</span>timeEnd<span class="token punctuation">;</span>    that<span class="token punctuation">.</span>console<span class="token punctuation">.</span>clear <span class="token operator">=</span> window<span class="token punctuation">.</span>console<span class="token punctuation">.</span>clear<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  methodList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">method</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    window<span class="token punctuation">.</span>console<span class="token punctuation">[</span>method<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">printLog</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>        <span class="token literal-property property">logType</span><span class="token operator">:</span> method<span class="token punctuation">,</span>        <span class="token literal-property property">logs</span><span class="token operator">:</span> args<span class="token punctuation">,</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ...</span><span class="token punctuation">&#125;</span></code></pre><p>å½“ <code>vconsole destroy</code> åï¼Œæ¢å¤ <code>window.console</code> æ–¹æ³•ï¼š</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// src/log/log.js</span><span class="token function">onRemove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  window<span class="token punctuation">.</span>console<span class="token punctuation">.</span>log <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>console<span class="token punctuation">.</span>log<span class="token punctuation">;</span>  window<span class="token punctuation">.</span>console<span class="token punctuation">.</span>info <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>console<span class="token punctuation">.</span>info<span class="token punctuation">;</span>  window<span class="token punctuation">.</span>console<span class="token punctuation">.</span>warn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>console<span class="token punctuation">.</span>warn<span class="token punctuation">;</span>  window<span class="token punctuation">.</span>console<span class="token punctuation">.</span>debug <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>console<span class="token punctuation">.</span>debug<span class="token punctuation">;</span>  window<span class="token punctuation">.</span>console<span class="token punctuation">.</span>error <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>console<span class="token punctuation">.</span>error<span class="token punctuation">;</span>  window<span class="token punctuation">.</span>console<span class="token punctuation">.</span>time <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>console<span class="token punctuation">.</span>time<span class="token punctuation">;</span>  window<span class="token punctuation">.</span>console<span class="token punctuation">.</span>timeEnd <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>console<span class="token punctuation">.</span>timeEnd<span class="token punctuation">;</span>  window<span class="token punctuation">.</span>console<span class="token punctuation">.</span>clear <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>console<span class="token punctuation">.</span>clear<span class="token punctuation">;</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>console <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> idx <span class="token operator">=</span> <span class="token constant">ADDED_LOG_TAB_ID</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>idx <span class="token operator">></span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token constant">ADDED_LOG_TAB_ID</span><span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>idx<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h5 id="Network-æ¨¡å—å®ç°"><a href="#Network-æ¨¡å—å®ç°" class="headerlink" title="Network æ¨¡å—å®ç°"></a><code>Network</code> æ¨¡å—å®ç°</h5><p>ä¹Ÿæ˜¯é‡å†™äº†åŸç”Ÿçš„ <code>window.XMLHttpRequest.prototype.open/send</code> ç­‰æ–¹æ³•ï¼Œæ·»åŠ äº†æ‹¦æˆªå™¨ï¼š</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// src/network/network.js</span><span class="token comment">/** * mock ajax request * @private */</span><span class="token function">mockAjax</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">let</span> _XMLHttpRequest <span class="token operator">=</span> window<span class="token punctuation">.</span>XMLHttpRequest<span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>_XMLHttpRequest<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>  <span class="token keyword">let</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>  <span class="token keyword">let</span> _open <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token class-name">XMLHttpRequest</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>open<span class="token punctuation">,</span>      _send <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token class-name">XMLHttpRequest</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>send<span class="token punctuation">;</span>  that<span class="token punctuation">.</span>_open <span class="token operator">=</span> _open<span class="token punctuation">;</span>  that<span class="token punctuation">.</span>_send <span class="token operator">=</span> _send<span class="token punctuation">;</span>  <span class="token comment">// mock open()</span>  window<span class="token punctuation">.</span><span class="token class-name">XMLHttpRequest</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">open</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">let</span> XMLReq <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">// ...</span>  <span class="token comment">// mock send()</span>  window<span class="token punctuation">.</span><span class="token class-name">XMLHttpRequest</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">send</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">let</span> XMLReq <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">,</span>        data <span class="token operator">=</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment">// ...</span></code></pre><blockquote><p>ç¯‡å¹…åŸå› å°±ä¸å®Œæ•´å‘ˆç°æºç äº†ï¼Œå¦å¤–æ–‡æ¡£å’Œç¬¬ä¸‰æ–¹æ’ä»¶åˆ—è¡¨æ‘˜è‡ªï¼šå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://github.com/Tencent/vConsole/blob/dev/README_CN.md#L160-L186">https://github.com/Tencent/vConsole/blob/dev/README_CN.md#L160-L186</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å·¥å…·å­¦ä¹  </category>
          
          <category> ç¨‹åºè°ƒè¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> debug </tag>
            
            <tag> vConsole </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸º Hexo æ·»åŠ éŸ³ä¹æ’­æ”¾å™¨æ’ä»¶</title>
      <link href="/posts/hexo-music-install/"/>
      <url>/posts/hexo-music-install/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script>    <div id="aplayer-OJmNyYxn" class="aplayer aplayer-tag-marker meting-tag-marker"         data-id="754708245" data-server="netease" data-type="playlist" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#C20C0C"    ></div><p>ç›®å‰å·²ç»æœ‰å¾ˆå¤šæˆç†Ÿçš„æ–¹æ¡ˆï¼Œä¸º <code>hexo</code> æˆ–è€…è‡ªå»ºåšå®¢æä¾›éŸ³ä¹æ’­æ”¾å™¨æ’ä»¶ä½¿ç”¨ã€‚</p><p>æˆ‘å°†ä»ä¸åŒçš„è§’åº¦ä»‹ç»è¿™å‡ ç§æ–¹å¼ï¼š</p><span id="more"></span><h3 id="åŸºäºå¤–é“¾ç”Ÿæˆæ’­æ”¾å™¨æ’ä»¶"><a href="#åŸºäºå¤–é“¾ç”Ÿæˆæ’­æ”¾å™¨æ’ä»¶" class="headerlink" title="åŸºäºå¤–é“¾ç”Ÿæˆæ’­æ”¾å™¨æ’ä»¶"></a>åŸºäºå¤–é“¾ç”Ÿæˆæ’­æ”¾å™¨æ’ä»¶</h3><h4 id="ç½‘æ˜“äº‘éŸ³ä¹"><a href="#ç½‘æ˜“äº‘éŸ³ä¹" class="headerlink" title="ç½‘æ˜“äº‘éŸ³ä¹"></a>ç½‘æ˜“äº‘éŸ³ä¹</h4><p>å‰å¾€<a href="https://music.163.com/">ç½‘æ˜“äº‘éŸ³ä¹å®˜ç½‘</a>ï¼Œæœç´¢ä¸€ä¸ªä½œä¸ºèƒŒæ™¯éŸ³ä¹çš„æ­Œæ›²ï¼Œå¹¶è¿›å…¥æ’­æ”¾é¡µé¢ï¼Œç‚¹å‡» <strong>ç”Ÿæˆå¤–é“¾æ’­æ”¾å™¨</strong></p><p><a href="/images/posts/hexo-music-install/p1.png"><img src="/images/posts/hexo-music-install/p1.png" alt="hexo-music-install-p1" loading="lazy"></a></p><p>è®¾ç½®å¥½æƒ³è¦æ˜¾ç¤ºçš„æ ·å¼åï¼Œå¤åˆ¶ <code>html</code> ä»£ç </p><p><a href="/images/posts/hexo-music-install/p2.png"><img src="/images/posts/hexo-music-install/p2.png" alt="hexo-music-install-p2" loading="lazy"></a></p><p>æœ€å¥½å¤–å±‚åœ¨åŠ ä¸€ä¸ª <code>div</code>ï¼Œå¦‚ä¸‹ï¼Œå¯ç›´æ¥å°†ä¸Šä¸€æ­¥å¤åˆ¶çš„ <code>iframe</code> æ›¿æ¢ä¸‹æ–¹é‡Œé¢çš„ <code>iframe</code></p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>musicMouseDrag<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">position</span><span class="token punctuation">:</span>fixed<span class="token punctuation">;</span> <span class="token property">z-index</span><span class="token punctuation">:</span> 9999<span class="token punctuation">;</span> <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span> <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>musicDragArea<span class="token punctuation">"</span></span>    <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span> <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span> <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span> <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span><span class="token property">cursor</span><span class="token punctuation">:</span> move<span class="token punctuation">;</span> <span class="token property">z-index</span><span class="token punctuation">:</span> 10<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span>    <span class="token attr-name">frameborder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no<span class="token punctuation">"</span></span>    <span class="token attr-name">border</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span>    <span class="token attr-name">marginwidth</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span>    <span class="token attr-name">marginheight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span>    <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>330<span class="token punctuation">"</span></span>    <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>86<span class="token punctuation">"</span></span>    <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>//music.163.com/outchain/player?type=2&amp;id=38592976&amp;auto=1&amp;height=66<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><p>é»˜è®¤ç»™çš„æ ·å¼æ˜¯æ˜¾ç¤ºåœ¨å³ä¸‹è§’ï¼Œå¯ä»¥é€šè¿‡è°ƒæ•´ä¸Šä¸€æ­¥ç²˜è´´çš„ <code>div</code> çš„ <code>style</code> ä¸­ <code>bottom</code> å’Œ <code>right</code> æ¥è°ƒæ•´ä½ç½®ã€‚</p><h4 id="è‡ªç”±æ‹–åŠ¨"><a href="#è‡ªç”±æ‹–åŠ¨" class="headerlink" title="è‡ªç”±æ‹–åŠ¨"></a>è‡ªç”±æ‹–åŠ¨</h4><p>å¦‚æœéœ€è¦è‡ªç”±æ‹–åŠ¨ï¼Œåœ¨åˆšæ‰æ·»åŠ çš„ä»£ç åé¢ï¼Œå†æ·»åŠ ä¸‹é¢ä»£ç å³å¯ï¼Œé¼ æ ‡å°±å¯ä»¥åœ¨éŸ³ä¹æ§ä»¶çš„ <strong>ä¸Šè¾¹æ²¿</strong> ç‚¹å‡»æ‹–åŠ¨ã€‚</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> $<span class="token constant">DOC</span> <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> $musicMouseDrag <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#musicMouseDrag'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> $musicDragArea <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#musicDragArea'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> $moveTarget <span class="token operator">=</span> $musicMouseDrag<span class="token punctuation">;</span><span class="token keyword">var</span> borderWidth <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>$musicMouseDrag<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'mousedown'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// é˜»æ­¢é»˜è®¤äº‹ä»¶ï¼Œå¦‚æ–‡æœ¬é€‰ä¸­</span>  <span class="token keyword">var</span> div_x <span class="token operator">=</span> e<span class="token punctuation">.</span>pageX <span class="token operator">-</span> $moveTarget<span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>left<span class="token punctuation">;</span>  <span class="token keyword">var</span> div_y <span class="token operator">=</span> e<span class="token punctuation">.</span>pageY <span class="token operator">-</span> $moveTarget<span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>top<span class="token punctuation">;</span>  $<span class="token constant">DOC</span>    <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'mousemove.drag'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">var</span> targetX <span class="token operator">=</span> e<span class="token punctuation">.</span>pageX <span class="token operator">-</span> div_x<span class="token punctuation">;</span>      <span class="token keyword">var</span> targetY <span class="token operator">=</span> e<span class="token punctuation">.</span>pageY <span class="token operator">-</span> div_y<span class="token punctuation">;</span>      <span class="token comment">// é™åˆ¶æ‹–åŠ¨èŒƒå›´</span>      targetX <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>targetX<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">-</span> $moveTarget<span class="token punctuation">.</span><span class="token function">outerWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      targetY <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>targetY<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight <span class="token operator">-</span> $moveTarget<span class="token punctuation">.</span><span class="token function">outerHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      $moveTarget<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>        <span class="token literal-property property">left</span><span class="token operator">:</span> targetX <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">,</span>        <span class="token literal-property property">top</span><span class="token operator">:</span> targetY <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">,</span>        <span class="token literal-property property">bottom</span><span class="token operator">:</span> <span class="token string">'inherit'</span><span class="token punctuation">,</span>        <span class="token literal-property property">right</span><span class="token operator">:</span> <span class="token string">'inherit'</span><span class="token punctuation">,</span>        <span class="token literal-property property">border</span><span class="token operator">:</span> borderWidth <span class="token operator">+</span> <span class="token string">'px dashed grey'</span><span class="token punctuation">,</span> <span class="token comment">// æ˜¾ç¤ºè¾¹æ¡†</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token function">one</span><span class="token punctuation">(</span><span class="token string">'mouseup'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      $<span class="token constant">DOC</span><span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">'mousemove.drag'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      $moveTarget<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'border'</span><span class="token punctuation">,</span> <span class="token string">'none'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// éšè—è¾¹æ¡†</span>      $musicDragArea<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">,</span> <span class="token string">'10px'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><hr><p><code>ç½‘æ˜“äº‘å•æ›²å¤–é“¾æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†ä¸èƒ½æ»¡è¶³åˆ—è¡¨æ­Œå•çš„éœ€æ±‚...ğŸ˜—ğŸ˜—ğŸ˜—</code></p><h3 id="åŸºäº-hexo-tag-aplayer-æ’ä»¶"><a href="#åŸºäº-hexo-tag-aplayer-æ’ä»¶" class="headerlink" title="åŸºäº hexo-tag-aplayer  æ’ä»¶"></a>åŸºäº <code>hexo-tag-aplayer </code> æ’ä»¶</h3><p><a href="https://easyhexo.com/3-Plugins-use-and-config/3-1-hexo-tag-aplayer/#%E4%BB%8B%E7%BB%8D">hexo-tag-aplayer</a> æ˜¯ <code>APlayer (opens new window)</code> æ’­æ”¾å™¨çš„ <code>Hexo</code> æ ‡ç­¾æ’ä»¶ï¼Œå¯ä»¥ååˆ†æ–¹ä¾¿åœ°åœ¨æ–‡ç« å†…æ’å…¥éŸ³ä¹æ’­æ”¾å™¨ã€‚</p><h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><p>åœ¨æ ¹ç›®å½•æ‰§è¡Œï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-tag-aplayer -s</code></pre><h4 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><p>ä¿®æ”¹ <code>Hexo</code> çš„æ ¹ç›®å½•é…ç½®æ–‡ä»¶ <code>_config.yml</code>:</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">aplayer</span><span class="token punctuation">:</span>  <span class="token comment"># ç¤ºä¾‹é…ç½®</span>  <span class="token key atrule">cdn</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js  <span class="token key atrule">style_cdn</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css  <span class="token key atrule">meting</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">meting_cdn</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js  <span class="token comment"># å®Œæ•´é…ç½®å¦‚ä¸‹ï¼š --- ä¸€èˆ¬ä¸éœ€è¦é…ç½®è¿™ä¹ˆå¤š  ---</span>  <span class="token comment"># script_dir: some/place # Public ç›®å½•ä¸‹è„šæœ¬ç›®å½•è·¯å¾„ï¼Œé»˜è®¤: 'assets/js'</span>  <span class="token comment"># style_dir: some/place # Public ç›®å½•ä¸‹æ ·å¼ç›®å½•è·¯å¾„ï¼Œé»˜è®¤: 'assets/css'</span>  <span class="token comment"># cdn: http://xxx/aplayer.min.js # å¼•ç”¨ APlayer.js å¤–éƒ¨ CDN åœ°å€ (é»˜è®¤ä¸å¼€å¯)</span>  <span class="token comment"># style_cdn: http://xxx/aplayer.min.css # å¼•ç”¨ APlayer.css å¤–éƒ¨ CDN åœ°å€ (é»˜è®¤ä¸å¼€å¯)</span>  <span class="token comment"># meting: true # MetingJS æ”¯æŒ</span>  <span class="token comment"># meting_api: http://xxx/api.php # è‡ªå®šä¹‰ Meting API åœ°å€</span>  <span class="token comment"># meting_cdn: http://xxx/Meing.min.js # å¼•ç”¨ Meting.js å¤–éƒ¨ CDN åœ°å€ (é»˜è®¤ä¸å¼€å¯)</span>  <span class="token comment"># asset_inject: true # è‡ªåŠ¨æ’å…¥ APlayer.js ä¸ Meting.js èµ„æºè„šæœ¬, é»˜è®¤å¼€å¯</span>  <span class="token comment"># externalLink: http://xxx/aplayer.min.js # è€ç‰ˆæœ¬å‚æ•°ï¼ŒåŠŸèƒ½ä¸å‚æ•° cdn ç›¸åŒ</span></code></pre><h4 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h4><p>ä½¿ç”¨ <code>hexo-tag-aplayer</code> éå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨ <code>MarkDown </code>æ–‡ä»¶ä¸­æ’å…¥æ­£ç¡®çš„æ ‡è®°å°±å¯ä»¥äº†ã€‚</p><pre class="language-markdown" data-language="markdown"><code class="language-markdown">&#123;% aplayer title author url [picture_url, narrow, autoplay, width:xxx, lrc:xxx] %&#125;</code></pre><p>å¼€å¯äº†<a href="https://hexo.io/zh-cn/docs/asset-folders.html#%E6%96%87%E7%AB%A0%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6%E5%A4%B9">æ–‡ç« èµ„æºæ–‡ä»¶å¤¹ (opens new window)</a>åŠŸèƒ½, å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š</p><pre class="language-markdown" data-language="markdown"><code class="language-markdown">&#123;% aplayer "Caffeine" "Jeff Williams" "caffeine.mp3" "picture.jpg" "lrc:caffeine.txt" %&#125;</code></pre><p><del>é…ç½®ç¨æ˜¾å¤æ‚ä¸”éº»çƒ¦â€¦ğŸ˜‚ğŸ˜‚ğŸ˜‚â€¦</del></p><p><strong>æˆ–è€…â€¦å¦‚æœä½ å¼€å¯äº† meting é…ç½®ï¼šå³ä¸Šé¢ <code>yml</code> å†… <code>aplayer.meting</code> è®¾ç½®ä¸º <code>true</code>ï¼Œé…ç½®å°†å˜å¾—å¾ˆç®€å•äº†ï¼š</strong></p><pre class="language-markdown" data-language="markdown"><code class="language-markdown">&#123;% meting "002j785c33YQHT" "tencent" "song" %&#125;</code></pre><p>ä¾‹å¦‚ï¼š</p><pre class="language-markdown" data-language="markdown"><code class="language-markdown">&#123;% meting "754708245" "netease" "playlist" "theme:#C20C0C" %&#125;</code></pre><p>å…·ä½“çš„ <code>&#123;% meting %&#125;</code> å‚æ•°å¯ä»¥å‚è€ƒï¼š<a href="https://easyhexo.com/3-Plugins-use-and-config/3-1-hexo-tag-aplayer/#metingjs">https://easyhexo.com/3-Plugins-use-and-config/3-1-hexo-tag-aplayer/#metingjs</a></p><h4 id="åˆ‡æ¢é¡µé¢ä¸ä¸­æ–­æ’­æ”¾"><a href="#åˆ‡æ¢é¡µé¢ä¸ä¸­æ–­æ’­æ”¾" class="headerlink" title="åˆ‡æ¢é¡µé¢ä¸ä¸­æ–­æ’­æ”¾"></a>åˆ‡æ¢é¡µé¢ä¸ä¸­æ–­æ’­æ”¾</h4><p>å‡ ä¹æ‰€æœ‰çš„åšå®¢æ¡†æ¶éƒ½æ”¯æŒæ’­æ”¾å™¨åŠŸèƒ½ï¼Œæ¯ä¸ªæ¡†æ¶æä¾›çš„ä¸ä¸­æ–­æ–¹æ¡ˆä¹Ÿä¸ç›¸åŒï¼Œä»¥æˆ‘ç›®å‰ä½¿ç”¨çš„ä¸»é¢˜ä¸ºä¾‹ï¼Œæ‰¾åˆ°ä¸»é¢˜ä¸‹çš„<code>yml</code>ï¼Œå¼€å¯é…ç½®ä¸­çš„ <code>pjax</code>ï¼š</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">pjax</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></code></pre><p>æˆ–è€…æ‰‹åŠ¨å¼•å…¥ <code>pjax</code> ç›¸å…³çš„ <code>cdn</code> èµ„æºï¼š</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">CDN</span><span class="token punctuation">:</span>  <span class="token key atrule">jquery</span><span class="token punctuation">:</span> //cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js  <span class="token key atrule">pjax</span><span class="token punctuation">:</span> //cdn.jsdelivr.net/npm/jquery<span class="token punctuation">-</span>pjax@2.0.1/jquery.pjax.min.js</code></pre><p><strong>ä¸ºäº†æ­£ç¡®åŠ è½½éŸ³ä¹æ’­æ”¾å™¨ï¼Œå½“åˆ‡æ¢åˆ°çš„æ–‡ç« é¡µé¢ä¹Ÿå­˜åœ¨éŸ³ä¹æ’­æ”¾å™¨æ—¶ï¼Œæ’­æ”¾ä¼šä¸­æ–­é‡æ–°åŠ è½½</strong></p><p>è¿™ç§æ–¹å¼ï¼Œæ»¡è¶³äº† <code>md</code> æ–‡ç« å†…çš„æ’­æ”¾å™¨å®ç°ï¼Œä»¥åŠåˆ‡æ¢ä¸ä¸­æ–­çš„æ•ˆæœã€‚ä½†â€¦æˆ‘å…¶å®æ›´æƒ³è¦èƒ½å¤–æŒ‚åœ¨å…¨å±€çš„é‚£ç§ï¼Œæ–¹ä¾¿éšæ—¶åˆ‡æ¢æ­Œæ›²â€¦ğŸ˜£ğŸ˜£ğŸ˜£</p><hr><h3 id="å…¨å±€æ’­æ”¾å™¨"><a href="#å…¨å±€æ’­æ”¾å™¨" class="headerlink" title="å…¨å±€æ’­æ”¾å™¨"></a>å…¨å±€æ’­æ”¾å™¨</h3><p><strong>æˆ‘ä»¬åªéœ€è¦å…³å¿ƒå¦‚ä½•åœ¨é¡µé¢å…¬å…±åŒºåŸŸæŒ‚è½½ä¸€ä¸ª <code>dom</code> æ§åˆ¶æ­Œæ›²åˆ‡æ¢</strong>ã€‚è‡³äºæ’­æ”¾å™¨çš„å®ç°ï¼Œç”±äºä¸éœ€è¦è€ƒè™‘åœ¨ <code>md</code> æ–‡ä»¶ä¸­å¼•å…¥ï¼Œæ‰€ä»¥æ— éœ€å®‰è£… <code>hexo-tag-aplayer</code>ï¼Œåªéœ€è¦å¼•å…¥ <code>APlayer</code> å’Œ <code>MetingJs</code> å³å¯ã€‚</p><h4 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><blockquote><p><code>tip:</code> ç”±äºæœ€æ–°çš„ <code>MetingJs 2.x</code> ç‰ˆæœ¬ä¸ <code>APlayer</code> ç‰ˆæœ¬ä¸å…¼å®¹ï¼Œæ‰€ä»¥ä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨ <code>1.x çš„ MetingJs</code>ã€‚</p></blockquote><p>é€šè¿‡ <code>cdn</code> å¼•å…¥ <code>script</code>ï¼š</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><p>æˆ–è€…å¼€å¯æ ¹ç›®å½•ä¸‹çš„ <code>yml</code> é…ç½®è‡ªåŠ¨å¼•å…¥ï¼Œå¦‚ä¸‹ï¼š</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">aplayer</span><span class="token punctuation">:</span>  <span class="token comment"># ç¤ºä¾‹é…ç½®</span>  <span class="token key atrule">cdn</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js  <span class="token key atrule">style_cdn</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css  <span class="token key atrule">meting</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">meting_cdn</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js</code></pre><h4 id="é€šç”¨ä½¿ç”¨"><a href="#é€šç”¨ä½¿ç”¨" class="headerlink" title="é€šç”¨ä½¿ç”¨"></a>é€šç”¨ä½¿ç”¨</h4><p>å¦‚æœä½ çš„åšå®¢æ¡†æ¶ä½¿ç”¨çš„æ˜¯å•é¡µé¢åº”ç”¨æ¡†æ¶å®ç°çš„ï¼Œé‚£ä¹ˆä½ åªéœ€è¦åœ¨å…¬å…±ç»„ä»¶<code>wrapper</code> é‡Œæ·»åŠ ç›¸åº”æŒ‚è½½çš„ <code>dom</code> å³å¯ï¼Œå¦åˆ™ï¼Œä½ éœ€è¦åƒå‰é¢æåˆ°çš„ä¸€æ ·ï¼Œå¦å¤–æ‰‹åŠ¨å¼•å…¥ <code>pjax</code> ç›¸å…³èµ„æºæ–‡ä»¶ã€‚</p><p>å¤–æŒ‚ <code>dom</code> å®ç°ï¼š</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aplayer<span class="token punctuation">"</span></span>  <span class="token attr-name">data-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>754708245<span class="token punctuation">"</span></span>  <span class="token attr-name">data-server</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>netease<span class="token punctuation">"</span></span>  <span class="token attr-name">data-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>playlist<span class="token punctuation">"</span></span>  <span class="token attr-name">data-fixed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>  <span class="token attr-name">data-listfolded</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>  <span class="token attr-name">data-autoplay</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span>  <span class="token attr-name">data-order</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span>  <span class="token attr-name">data-volume</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.5<span class="token punctuation">"</span></span>  <span class="token attr-name">data-theme</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#1da496<span class="token punctuation">"</span></span>  <span class="token attr-name">data-preload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>auto<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- ä¼˜åŒ–æ ·å¼ --- è§‰å¾—é»˜è®¤çš„ä¸å¤ªå¥½çœ‹ --></span><span class="token comment">&lt;!-- å‘ç°æ­Œè¯å‡ºç°åœ¨äº†æ’­æ”¾å™¨å¤–ï¼Œå¯èƒ½è®¾è®¡æ˜¯è¿™æ ·çš„ï¼Œä½†æ˜¯æˆ‘æƒ³æŠŠå®ƒæ”¾åˆ°æ’­æ”¾å™¨å†…éƒ¨è¿›åº¦æ¡ä½ç½® --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">  <span class="token selector">.aplayer.aplayer-fixed .aplayer-lrc,  .aplayer.aplayer-fixed .aplayer-body</span> <span class="token punctuation">&#123;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute <span class="token important">!important</span><span class="token punctuation">;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> 999 <span class="token important">!important</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre><h4 id="ä¸»é¢˜åšå®¢ä¸­ä½¿ç”¨"><a href="#ä¸»é¢˜åšå®¢ä¸­ä½¿ç”¨" class="headerlink" title="ä¸»é¢˜åšå®¢ä¸­ä½¿ç”¨"></a>ä¸»é¢˜åšå®¢ä¸­ä½¿ç”¨</h4><p>å¦‚æœä½ ä½¿ç”¨äº†å’Œæˆ‘ç›¸åŒçš„åšå®¢ä¸»é¢˜ï¼Œå¼€å¯å…¨å±€æ’­æ”¾å™¨åªéœ€è¦ä¿®æ”¹ä¸»é¢˜ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶å³å¯ï¼Œå¦‚ä¸‹ï¼ˆå¦‚æœåˆ‡æ¢é¡µé¢ä¸­æ–­ï¼Œåªéœ€è¦å¦‚ä¸Šæ‰€è¯´å¼€å¯ <code>pjax</code> å³å¯ï¼‰ï¼š</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">aplayer</span><span class="token punctuation">:</span>  <span class="token comment"># https://yun.yunyoujun.cn/guide/additional-package-support.html#%E6%92%AD%E6%94%BE%E5%99%A8</span>  <span class="token key atrule">global</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">meting</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token comment"># https://github.com/metowolf/MetingJS/tree/v1.2#option</span>  <span class="token key atrule">widget</span><span class="token punctuation">:</span>    <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>    <span class="token key atrule">autoplay</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>    <span class="token key atrule">theme</span><span class="token punctuation">:</span> <span class="token string">"#1da496"</span>    <span class="token comment"># loop: all</span>    <span class="token key atrule">order</span><span class="token punctuation">:</span> list    <span class="token key atrule">preload</span><span class="token punctuation">:</span> auto    <span class="token key atrule">volume</span><span class="token punctuation">:</span> <span class="token number">0.5</span>    <span class="token key atrule">mutex</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>    <span class="token key atrule">lrcType</span><span class="token punctuation">:</span> <span class="token number">0</span>    <span class="token key atrule">listFolded</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>    <span class="token key atrule">listMaxHeight</span><span class="token punctuation">:</span> 340px    <span class="token comment"># audio:</span>    <span class="token comment">#   - name: æ˜Ÿå®¿è®¡æ—¶</span>    <span class="token comment">#     artist: æ‰ç”°æœ—/æ´›å¤©ä¾</span>    <span class="token comment">#     url: https://cdn.jsdelivr.net/gh/YunYouJun/cdn/audio/star-timer.mp3</span>    <span class="token comment">#     cover: https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/bg/stars-timing-0.jpg</span>    <span class="token key atrule">meting</span><span class="token punctuation">:</span>      <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>      <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token number">754708245</span>      <span class="token key atrule">server</span><span class="token punctuation">:</span> netease      <span class="token key atrule">type</span><span class="token punctuation">:</span> playlist</code></pre><h4 id="æœ€ç»ˆæ•ˆæœ"><a href="#æœ€ç»ˆæ•ˆæœ" class="headerlink" title="æœ€ç»ˆæ•ˆæœ"></a>æœ€ç»ˆæ•ˆæœ</h4><p><a href="/images/posts/hexo-music-install/p3.png"><img src="/images/posts/hexo-music-install/p3.png" alt="hexo-music-install-p3" loading="lazy"></a></p><h3 id="å‚è€ƒï¼š"><a href="#å‚è€ƒï¼š" class="headerlink" title="å‚è€ƒï¼š"></a>å‚è€ƒï¼š</h3><blockquote><p><a href="https://easyhexo.com/3-Plugins-use-and-config/3-1-hexo-tag-aplayer/#%E4%BB%8B%E7%BB%8D">hexo-tag-aplayer</a></p></blockquote><blockquote><p><a href="https://aplayer.js.org/#/zh-Hans/">APlayer</a></p></blockquote><blockquote><p><a href="https://github.com/metowolf/MetingJS">MetingJS</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ”¶è—å®‰åˆ© </category>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> APlayer </tag>
            
            <tag> MetingJS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çªå‘ Node ç¯å¢ƒä»¥åŠç›¸å…³æŒ‡ä»¤å¼‚å¸¸</title>
      <link href="/bugs/nvm-symlink-not-working/"/>
      <url>/bugs/nvm-symlink-not-working/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><p>å˜¿å˜¿~ï¼Œå°±æ˜¯è¿™ä¹ˆç¥å¥‡ï¼Œæ—©ä¸Šæ¥å…¬å¸å†™ä»£ç ï¼Œç”±äºå‘¨äº”èµ°çš„æ—¶å€™å¹¶æ²¡æœ‰å…³æ‰æœåŠ¡ï¼Œæ‰€ä»¥æ¥äº†æˆ‘å°±åƒå¾€å¸¸ä¸€æ ·å·¥ä½œã€‚æ–°çš„ä¸€å‘¨å¼€å§‹äº†â€¦ç¾æ»‹æ»‹ ğŸ˜šğŸ˜šğŸ˜š</p><p>ä¸€äº›ä¸å¯æè¿°çš„åŸå› ï¼Œç¼–è¾‘å™¨å¾ˆå¡ï¼Œ<del>å…¬å¸çœŸçš„è¯¥æ¢å¾—ç”µè„‘äº† ğŸ˜¶ğŸ˜¶ğŸ˜¶</del> æˆ‘é‡å¯äº† <code>vscode</code>ï¼Œæ‰§è¡Œ <code>nr start</code> æƒ³ç€å…ˆæŠŠç¨‹åºè·‘èµ·æ¥ã€‚</p><p><code>md</code>ï¼Œ<code>command not found? wtf?</code> æˆ‘ä¸å¯èƒ½æ²¡è£…è¿™ä¸ªå·¥å…·çš„å‘€ï¼Œéš¾é“æ˜¯æˆ‘åˆ‡äº†å…¶ä»–ç‰ˆæœ¬è‡ªå·±å¿˜è®°äº†ï¼Ÿï¼Œè¯•ç€è¿è¡Œäº†ä¸€ä¸‹ <code>node -v</code></p><p>ğŸ˜‹ğŸ˜‹ğŸ˜‹ ä»€ä¹ˆæ˜¯ <code>tm</code> çš„æƒŠå–œâ€¦<code>node command not found</code> <del>å¤§å“¥ ä¸è¦ææˆ‘å•Šâ€¦</del></p><span id="more"></span><h3 id="åˆ†æé—®é¢˜"><a href="#åˆ†æé—®é¢˜" class="headerlink" title="åˆ†æé—®é¢˜"></a>åˆ†æé—®é¢˜</h3><p>æ—¢ç„¶ç°åœ¨ä¸èƒ½ç”¨äº†ï¼Œä¹Ÿä¸èƒ½æ€¨å¤©å°¤äººäº†ï¼Œå…ˆçœ‹çœ‹æ˜¯ä¸æ˜¯ <code>nvm</code> çš„é—®é¢˜ï¼Œæ‰§è¡Œ <code>nvm ls</code> çœ‹çœ‹â€¦è¯•ç€åˆ‡æ¢ä¸€ä¸‹ç‰ˆæœ¬ï¼Œæˆ–è€…é‡è£…ä¸€ä¸‹<code>node</code>ï¼Œå¦‚å›¾ï¼š</p><p><a href="/images/bugs/nvm-symlink-not-working/p1.png"><img src="/images/bugs/nvm-symlink-not-working/p1.png" alt="nvm-symlink-not-working-p1" loading="lazy"></a></p><p>æœç„¶ä¸å‡ºæˆ‘æ‰€æ–™ ğŸ˜ğŸ˜ğŸ˜ï¼Œä¸è¡Œâ€¦ğŸ˜­ğŸ˜­ğŸ˜­</p><p>éš¾é“æ˜¯â€¦å…¨å±€ <code>nodejs</code> å¯æ‰§è¡Œæ–‡ä»¶å‡ºé—®é¢˜ä¸å¯ç”¨äº†ï¼Ÿå»ç…äº†ä¸€çœ¼ï¼ˆ<strong>nvm åˆ›å»ºçš„è½¯è¿æ¥ï¼Œå°†ç‰ˆæœ¬ä¸å…¨å±€å¯æ‰§è¡Œ node ç›¸å…³è”ï¼Œä¹Ÿæ˜¯ç¯å¢ƒå˜é‡é‡Œé…ç½®çš„ NVM_SYMLINK çš„åœ°å€</strong>ï¼‰â€¦å°±å‰©ä¸ªç©ºæ–‡ä»¶å¤¹äº† <del>è¿æœ€åŸºæœ¬çš„ node.exe éƒ½æ²¡æœ‰ï¼Œè¿™è¿˜å’‹è¿è¡Œï¼ŸåºŸäº†</del></p><p>æ¯•ç«Ÿæ˜¯é€šè¿‡ <code>nvm</code> å®‰è£…çš„ <code>node</code> ç¯å¢ƒï¼Œä¹Ÿå°±ä¸å­˜åœ¨å•ç‹¬çš„ <code>nodejs</code> ç¯å¢ƒå˜é‡é…ç½®äº†â€¦</p><p><strong><code>NVM_SYMLINK</code> åœ°å€å¾ˆé‡è¦ï¼Œå®ƒæŒ‡å®šäº†å½“å‰å…¨å±€çš„ <code>node</code> å¯æ‰§è¡Œç¯å¢ƒ</strong>ï¼Œè‡³äºä¸ºä»€ä¹ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šçªç„¶åæ‰ä¸å¯ç”¨äº†ï¼Œ<code>emm...</code> æˆ‘ä¹Ÿå¾ˆç–‘æƒ‘â€¦åªèƒ½å…ˆæŠŠè¿™ä¸ªé—®é¢˜è§£å†³äº†</p><h3 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h3><ul><li><p>åˆ æ‰ä¹‹å‰çš„ <code>symlink</code> çš„æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨ <code>nvm</code> ä¸‹æ–°å»ºä¸€ä¸ª <code>nodejs</code> ç©ºæ–‡ä»¶å¤¹</p></li><li><p>é‡æ–°å»ºç«‹è½¯è¿æ¥ï¼ˆé¢â€¦è¯´çš„ä¸å¤ªå‡†ç¡®ï¼Œåº”è¯¥æ˜¯ä¿®æ”¹ç¯å¢ƒå˜é‡ <code>NVM_SYMLINK</code>ï¼Œå€¼å°±æ˜¯ä¸Šä¸€æ­¥æ–°åˆ›å»ºçš„ <code>nodejs</code> æ–‡ä»¶å¤¹è·¯å¾„ï¼‰ï¼Œå¦‚ä¸‹å›¾ï¼š</p></li></ul><p><a href="/images/bugs/nvm-symlink-not-working/p2.png"><img src="/images/bugs/nvm-symlink-not-working/p2.png" alt="nvm-symlink-not-working-p2" loading="lazy"></a></p><ul><li><p>è®¾ç½®å®Œæˆåï¼Œå…³é—­æ‰€æœ‰ç»ˆç«¯ï¼Œé‡æ–°æ‰“å¼€<code>cmd or bash...</code></p></li><li><p><code>ok</code>ï¼Œé‡æ–°ç»‘å®šäº†ï¼Œä½†æ˜¯ <code>nodejs</code> æ–‡ä»¶å¤¹è¿˜æ˜¯ç©ºçš„å‘€ï¼Œæ­¤æ—¶æ‰§è¡Œ <code>node -v</code> è‚¯å®šè¿˜æ˜¯ <code>command not found</code></p></li><li><p>é‡æ–°åˆ‡å…¥ä½ ä½¿ç”¨çš„ <code>node</code> ç‰ˆæœ¬ï¼Œæ‰§è¡Œ <code>nvm use [version]</code>,ï¼ˆå¦‚æœæœ‰éœ€è¦å¯æ–°å®‰è£…æŒ‡å®šçš„ç‰ˆæœ¬ï¼‰ï¼Œå¦‚ä¸‹å›¾ï¼š</p></li></ul><p><a href="/images/bugs/nvm-symlink-not-working/p3.png"><img src="/images/bugs/nvm-symlink-not-working/p3.png" alt="nvm-symlink-not-working-p3" loading="lazy"></a></p><ul><li><p>å¯ä»¥çœ‹åˆ°ï¼Œæ­¤æ—¶ <code>node</code> å’Œ <code>npm</code> ç›¸å…³æŒ‡ä»¤éƒ½èƒ½é‡æ–°æ­£å¸¸ä½¿ç”¨äº† <del>æ¬£æ…°å•Š ğŸ˜¯ğŸ˜¯ğŸ˜¯</del> ï¼ˆ<strong>æœ‰å¯èƒ½ä¹‹å‰ <code>-g</code> è£…çš„ <code>global packages</code> ä¼šä¸¢å¤±ï¼Œè‡ªè¡Œåˆ¤æ–­æ˜¯å¦éœ€è¦å†æ¬¡å®‰è£…</strong>ï¼‰</p></li><li><p>æœ€åä¸€æ­¥ï¼ŒéªŒè¯ä¹‹å‰çš„çŒœæƒ³â€¦æ‰¾åˆ°ç¬¬ä¸€æ­¥åˆ›å»ºçš„ <code>nodejs</code> æ–‡ä»¶å¤¹å¹¶æ‰“å¼€ï¼Œå¯ä»¥å‘ç°é‡Œé¢å¤šäº†å¾ˆå¤šå†…å®¹ã€‚ï¼ˆå…¶å®ä¹Ÿå°±æ˜¯ä½  <code>nvm use [version]</code> å¯¹åº”çš„ <code>version</code> æ–‡ä»¶å¤¹é‡Œçš„å†…å®¹ï¼Œä¹Ÿä»ä¾§é¢è¯´æ˜äº† <code>symlink</code> èƒ½å¤Ÿæ­£å¸¸å·¥ä½œäº†ï¼‰</p></li></ul><p><a href="/images/bugs/nvm-symlink-not-working/p4.png"><img src="/images/bugs/nvm-symlink-not-working/p4.png" alt="nvm-symlink-not-working-p4" loading="lazy"></a></p><blockquote><p>æ€»ä¼šæœ‰ä¸€äº›å¥‡å¥‡æ€ªæ€ªçš„ <code>bug</code>ä¼´éšä½ æˆ‘ï¼Œæ—¥è®°ä¸€ç¬”ï¼Œä»¥å¤‡åç”¨.</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> è¸©å‘è®°å½• </category>
          
          <category> NVM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bug </tag>
            
            <tag> nvm </tag>
            
            <tag> nvm_symlink </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ElForm å¶ç°è¡¨å•å­—æ®µæ ¡éªŒå¼‚å¸¸</title>
      <link href="/bugs/el-form-validate-error/"/>
      <url>/bugs/el-form-validate-error/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="æµ…è°ˆä¸€ä¸‹"><a href="#æµ…è°ˆä¸€ä¸‹" class="headerlink" title="æµ…è°ˆä¸€ä¸‹"></a>æµ…è°ˆä¸€ä¸‹</h3><p><code>elementUI</code>å­˜åœ¨å¾ˆå¤šå·²çŸ¥æˆ–è€…æœªçŸ¥çš„é—®é¢˜éœ€è¦æˆ‘ä»¬å»å‘ç°å¹¶è§£å†³ï¼Œä½†ä¸å¯å¦è®¤å®ƒç¡®å®åœ¨æ›¾ç»å–å¾—è¿‡å¾ˆå¥½çš„è®¤å¯ã€‚</p><p>åœ¨ä½¿ç”¨ <code>el-form-item</code> ç»„ä»¶æ—¶ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦è‡ªå®šä¹‰æ ¡éªŒè§„åˆ™æ¥è§„èŒƒç”¨æˆ·è¾“å…¥ï¼Œæ¯”å¦‚è¿™æ ·ï¼š</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-form-item</span> <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>å§“å<span class="token punctuation">"</span></span> <span class="token attr-name">:rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>rules.name<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form.name<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-input</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-form-item</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-form-item</span> <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>age<span class="token punctuation">"</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>å¹´é¾„<span class="token punctuation">"</span></span> <span class="token attr-name">:rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>rules.age<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-input-number</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form.age<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-input-number</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-form-item</span><span class="token punctuation">></span></span>...</code></pre><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">public</span> rules <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  name<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span> required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'å§“åä¸èƒ½ä¸ºç©º'</span><span class="token punctuation">,</span> trigger<span class="token operator">:</span> <span class="token string">'blur'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  age<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span> required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'å¹´é¾„ä¸èƒ½ä¸ºç©º'</span><span class="token punctuation">,</span> trigger<span class="token operator">:</span> <span class="token string">'change'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span></code></pre><p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥æŠŠ <code>rules</code> ç»‘å®šåˆ° <code>el-form</code> ä¸Šï¼Œå› ä¸ºä¸¤è€…åœ¨æ ¡éªŒè¿‡ç¨‹ä¸­èµ·çš„ä½œç”¨å’Œæˆ‘æ‰€æè¿°çš„é—®é¢˜å¹¶ä¸å†²çªã€‚</p><p>ğŸ˜ğŸ˜ğŸ˜ é—®é¢˜çš„äº§ç”Ÿå¾€å¾€æ˜¯æ¥è‡ªäºéƒ¨åˆ†ç‰¹æ®Šéœ€æ±‚ï¼š</p><span id="more"></span><h3 id="åœºæ™¯å¤ç°"><a href="#åœºæ™¯å¤ç°" class="headerlink" title="åœºæ™¯å¤ç°"></a>åœºæ™¯å¤ç°</h3><h4 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h4><ul><li><p><code>el-form-item</code> åŒ…è£¹çš„å­ç»„ä»¶ <code>ï¼ˆè‡ªå®šä¹‰çš„ç‹¬ç«‹é¡µé¢ç»„ä»¶ï¼‰</code>èƒ½å¤Ÿç”±è‡ªèº«æä¾›æ ¡éªŒå‡½æ•°ï¼Œç„¶åç”± <code>el-form-item</code> è§¦å‘æ ¡éªŒ</p></li><li><p>èƒ½å¤Ÿæ ¹æ®è¡¨å•æƒé™ï¼ˆæ¯”å¦‚åªè¯»ã€å¯å†™ã€éšè—ï¼‰ç­‰åŠ¨æ€ç”Ÿæˆæ ¡éªŒè§„åˆ™ã€‚<code>ï¼ˆæƒé™å¯ä»¥æ¥è‡ªäºç»„ä»¶çš„ propï¼‰</code></p></li></ul><h4 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h4><p>åŸºäºæ€§èƒ½ä¼˜åŒ–æ–¹é¢è€ƒè™‘ï¼Œå°† <code>rules</code> ç»‘å®šåˆ°äº†æ¯ä¸ª <code>el-form-item</code> è€Œé <code>el-form</code>ã€‚</p><blockquote><p><em>å¦‚æœ <code>rules</code> ç»‘å®šåˆ°äº† <code>el-form</code>ï¼Œé‚£ä¹ˆå½“å…¶ä¸­æŸä¸ªç»„ä»¶çš„æƒé™å‘ç”Ÿå˜æ›´æ—¶ï¼Œéœ€è¦é‡æ–°å¯¹æ•´ä¸ª form çš„ rules è®¡ç®—å¹¶èµ‹å€¼ï¼Œä¼šå½±å“åˆ°æ•´ä¸ªçˆ¶çº§çš„ wrapper ç»„ä»¶ rerenderï¼Œå½“ç»„ä»¶æ•°é‡è¾¾åˆ°ä¸€å®šç¨‹åº¦æ—¶(åˆšå¥½æˆ‘æ‰€åœ¨åœºæ™¯ä¸‹å°±ä¼šæœ‰å¾ˆå¤šâ€¦æœ‰çš„å¤šè¾¾ä¸Šåƒ)ï¼Œä¼šæ˜æ˜¾æ„Ÿè§‰åˆ°æ€§èƒ½å·®å¼‚</em></p></blockquote><p>ä¸ºäº†æ»¡è¶³ä¸Šé¢çš„éœ€æ±‚ï¼Œ<code>rules</code> æ˜¯ç»‘å®šçš„è®¡ç®—å±æ€§ï¼Œé€šè¿‡è®¡ç®—å®æ—¶èµ‹äºˆ <code>el-form-item</code> ç»„ä»¶æ–°çš„ <code>rules</code>ï¼Œå®ç°å¦‚ä¸‹ï¼š</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-form-item</span> <span class="token attr-name">:prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>prop<span class="token punctuation">"</span></span> <span class="token attr-name">:rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>formItemRules<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CustomChildren</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>childrenRef<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>CustomChildren</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-form-item</span><span class="token punctuation">></span></span></code></pre><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// CustomChildren æ˜¯åŠ¨æ€ç»„ä»¶ï¼Œæ ¹æ®ç»„ä»¶ tag æ¸²æŸ“</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">Ref</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">readonly</span> childrenRef<span class="token operator">!</span><span class="token operator">:</span> CustomChildren<span class="token punctuation">;</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">Prop</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">readonly</span> prop<span class="token operator">!</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">Prop</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">readonly</span> privilege<span class="token operator">!</span><span class="token operator">:</span> <span class="token string">'VIEW'</span> <span class="token operator">|</span> <span class="token string">'HIDDEN'</span> <span class="token operator">|</span> <span class="token string">'EDIT'</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">get</span> <span class="token function">formItemRules</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// åªæœ‰å¯ç¼–è¾‘æ—¶éœ€è¦ rule</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>privilege <span class="token operator">===</span> <span class="token string">'EDIT'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// getFormItemRulesï¼š rules æ„å»ºå‡½æ•°ï¼Œå…·ä½“å®ç°ç”±éœ€æ±‚å†³å®š</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getFormItemRules</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token function">getFormItemRules</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// æ‰¾åˆ°å­ç»„ä»¶å®ä¾‹ --- å…·ä½“çš„ç»„ä»¶å±‚çº§ä¸åšæ·±ç©¶ï¼Œç”±ç»„ä»¶ç»“æ„å†³å®š</span>  <span class="token keyword">const</span> controlRef <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>childrenRef<span class="token operator">?.</span>$children<span class="token operator">?.</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> ruleList<span class="token operator">:</span> ValidationRule<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// eg. nameRulesï¼Œå®é™…å®ç°éœ€è¦è€ƒè™‘é€šç”¨æ€§</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>prop <span class="token operator">===</span> <span class="token string">'name'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    ruleList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'è¯·è¾“å…¥å§“å'</span><span class="token punctuation">,</span> trigger<span class="token operator">:</span> <span class="token string">'blur'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token comment">// ... other prop</span>  <span class="token comment">// add children customRules</span>  ruleList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">(</span>controlRef<span class="token operator">?.</span>customRules <span class="token operator">??</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// children customRulesï¼š</span><span class="token comment">// export default class Upload extends Vue &#123;</span><span class="token comment">//   protected customRules: ValidationRule[] = [</span><span class="token comment">//     &#123;</span><span class="token comment">//       trigger: 'submit',</span><span class="token comment">//       validator: (r, v, callback) => &#123;</span><span class="token comment">//         if (this.uploading) &#123;</span><span class="token comment">//           callback(new Error('æ–‡ä»¶æ­£åœ¨ä¸Šä¼ ä¸­...'));</span><span class="token comment">//         &#125;</span><span class="token comment">//         return callback();</span><span class="token comment">//       &#125;,</span><span class="token comment">//     &#125;,</span><span class="token comment">//   ];</span><span class="token comment">// &#125;</span></code></pre><p>æ˜¯ä¸æ˜¯çœ‹ä¸Šå»æ²¡æœ‰ä»»ä½•çš„é—®é¢˜ï¼Ÿå˜¿ï¼Œæˆ‘å¼€å§‹ä¹Ÿæ˜¯è¿™ä¹ˆæƒ³çš„â€¦</p><h3 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h3><h4 id="ä¸è§¦å‘æ ¡éªŒ"><a href="#ä¸è§¦å‘æ ¡éªŒ" class="headerlink" title="ä¸è§¦å‘æ ¡éªŒ"></a>ä¸è§¦å‘æ ¡éªŒ</h4><p>ç»™ <code>el-form-item</code> ç»‘å®šäº† <code>rules</code> åï¼Œå˜æ›´äº†å€¼ï¼Œä½†æ˜¯æ ¡éªŒå¹¶æ²¡æœ‰è§¦å‘ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><ul><li>é¦–å…ˆæˆ‘æ€€ç–‘æ˜¯ <code>rules</code> æ„å»ºè¿‡ç¨‹ä¸­å‡ºé”™äº†ï¼Œæ²¡æœ‰ä¼ å…¥æ­£ç¡®çš„ <code>rules</code>.</li></ul><p>é€šè¿‡ <code>console.debug</code> ä»¥åŠ<code>vue-devtools</code> è¿›è¡ŒæŸ¥çœ‹ï¼Œå‘ç° <code>rules</code> æ˜¯æ­£ç¡®çš„â€¦é‚£ä¹ˆä¼šä¸ä¼šæ˜¯å‡ºåœ¨ <code>el-form-item</code> è‡ªèº«å‘¢ï¼Ÿ</p><ul><li>ç¿»é˜… <code>el-form-item</code> æºç ï¼š<a href="https://github.com/ElemeFE/element/blob/dev/packages/form/src/form-item.vue">https://github.com/ElemeFE/element/blob/dev/packages/form/src/form-item.vue</a></li></ul><p>å‘ç°äº†è¿™ä¹ˆä¸€å¥ï¼š <del>ç§»é™¤äº†å…¶ä»–å¹²æ‰°ä»£ç  ğŸ˜ğŸ˜ğŸ˜</del></p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>  <span class="token function">getRules</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">let</span> formRules <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">.</span>rules<span class="token punctuation">;</span>    <span class="token keyword">const</span> selfRules <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>rules<span class="token punctuation">;</span>    <span class="token keyword">const</span> requiredRule <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>required <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>required <span class="token punctuation">&#125;</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> prop <span class="token operator">=</span> <span class="token function">getPropByPath</span><span class="token punctuation">(</span>formRules<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prop <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    formRules <span class="token operator">=</span> formRules <span class="token operator">?</span> <span class="token punctuation">(</span>prop<span class="token punctuation">.</span>o<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>prop <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">]</span> <span class="token operator">||</span> prop<span class="token punctuation">.</span>v<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>selfRules <span class="token operator">||</span> formRules <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>requiredRule<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token function">addValidateEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> rules <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getRules</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>rules<span class="token punctuation">.</span>length <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>required <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'el.form.blur'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onFieldBlur<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'el.form.change'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onFieldChange<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>prop<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// ...</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addValidateEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></code></pre><p>ä»ä¸Šé¢å¯ä»¥å¾ˆæ¸…æ™°çš„çœ‹åˆ°ï¼Œåœ¨ <code>el-form-item</code> ç»„ä»¶ <code>mounted</code> çš„æ—¶å€™ä¼šæ·»åŠ  <code>el.form.blur</code> å’Œ <code>el.form.change</code> äº‹ä»¶ç›‘å¬ï¼Œç”±è¡¨å•ç»„ä»¶å†…éƒ¨ <code>dispatch</code>ã€‚<code>ç„¶è€Œ...ğŸ¤”ğŸ¤”ğŸ¤”ï¼Œå®ƒæœ‰ä¸ªå¾ˆè‡´å‘½çš„å‰æï¼šrules.length</code></p><p>ç»§ç»­åˆ†æï¼š<code>getRules</code> ä¸­ï¼Œä¼šä¼˜å…ˆä» <code>formRules å’Œ selfRules</code> è¯»å– rules<code>ï¼Œç„¶åæ ¹æ® </code>required<code>å†³å®šæ˜¯å¦ç”Ÿæˆ</code>require rule<code>ï¼Œæœ€åè¿”å›æ–°çš„ </code>rules&#96;ã€‚</p><p><strong>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘è¯´ <code>rules</code> ç»‘å®šåˆ° <code>el-form</code> å’Œ <code>el-form-item</code> å’Œè¿™ä¸ª <code>bug</code> ä¸å†²çª</strong></p><p>ç»¼ä¸Šä¸éš¾å‘ç°ï¼Œç”±äºæˆ‘å‰é¢æ·»åŠ äº† <code>formItemRules</code> åœ¨é <code>EDIT</code> çš„æ—¶å€™ï¼Œ<strong>è¿”å›äº†ç©ºçš„ <code>rules</code>ï¼Œ<code>el-form-item</code> æœªç»‘å®š <code>change | blur</code> çš„å›è°ƒï¼Œå¯¼è‡´å°±ç®— <code>rules</code> æ–°å¢ <code>change</code> ç±»çš„ <code>trigger</code>ï¼Œä¹Ÿä¸ä¼šè§¦å‘å³æ—¶æ ¡éªŒ</strong>ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å°±æ·»åŠ äº†ä¸€ä¸ªç©ºå¯¹è±¡çš„ <code>rules</code>ï¼Œå³ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">public</span> <span class="token keyword">get</span> <span class="token function">formItemRules</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token operator">...</span>  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p><strong>ä½ ä»¥ä¸ºè¿™ä¸ªé—®é¢˜å°±ç®—è§£å†³äº†ï¼Ÿå…¶å®æ²¡æœ‰ï¼ ğŸ¤—ğŸ¤—ğŸ¤—</strong></p><h4 id="refs-childrenRef-no-reactive"><a href="#refs-childrenRef-no-reactive" class="headerlink" title="refs.childrenRef no-reactive"></a><code>refs.childrenRef no-reactive</code></h4><p>ç”±äºéœ€è¦ä»å­ç»„ä»¶æœ¬èº«è·å–è‡ªå®šä¹‰çš„ <code>customRules</code> å±æ€§ï¼Œæ‰€ä»¥è¿™é‡Œé‡‡ç”¨äº† <code>refs</code> å»æ‰¾ç»„ä»¶å®ä¾‹ï¼Œä»å®ä¾‹å±æ€§ä¸­è·å–ï¼Œç„¶è€Œâ€¦<code>refs</code> å¹¶éæ˜¯å“åº”å¼çš„â€¦.<del>ä¹Œé±¼å­å•Šå…„å¼Ÿä»¬ ğŸ˜—ğŸ˜—ğŸ˜—</del></p><p>æ€ä¹ˆè§£å†³ï¼ŸğŸ¤¨ å®ƒä¸æ˜¯å“åº”å¼çš„é‚£æˆ‘ä»¬å°±ç”¨å…¶ä»–çš„ä»£æ›¿å’¯â€¦æ¯”å¦‚æ ‡å¿—ä½ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">public</span> itemRulesReady <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">get</span> <span class="token function">formItemRules</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>itemRulesReady <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>privilege <span class="token operator">===</span> <span class="token string">'EDIT'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getFormItemRules</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>itemRulesReady <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>é€šè¿‡æ ‡å¿—ä½ <code>itemRulesReady</code> æ¥æ ‡è¯†ç»„ä»¶å®ä¾‹ <code>ref</code> å·²å®ŒæˆåŠ è½½ï¼Œåˆç”±äº <code>itemRulesReady</code> æ˜¯å“åº”å¼çš„ï¼Œå˜æ›´åè®¡ç®—å±æ€§å°±ä¼šé‡æ–°è®¡ç®—ï¼Œè¿™ä¸ªé—®é¢˜ä¹Ÿå°±è§£å†³äº†ã€‚</p><p>è¯åˆè¯´å›æ¥ï¼Œå‰é¢ä¸ºä»€ä¹ˆæˆ‘ä¼šè¯´â€œä¸è§¦å‘æ ¡éªŒâ€æ²¡æœ‰å½»åº•è§£å†³ï¼Œè¯·å¾€ä¸‹çœ‹â€¦</p><h4 id="is-not-a-string-number-array"><a href="#is-not-a-string-number-array" class="headerlink" title="is not a string/number/array"></a><code>is not a string/number/array</code></h4><p>è™½ç„¶â€¦æ·»åŠ äº† <code>[&#123;&#125;]</code> åï¼Œä¼šè§¦å‘å³æ—¶æ ¡éªŒäº†ï¼Œä½†æ˜¯å½“æˆ‘ <code>submit</code> è¡¨å•çš„æ—¶å€™ï¼Œå´å‡ºç°äº† <code>is not a string/number/array</code> çš„é”™è¯¯ã€‚<code>why???ğŸ˜«ğŸ˜«ğŸ˜«</code></p><p>åªæœ‰ç»§ç»­è°ƒè¯•äº†ï¼Œé€šè¿‡ <code>debug</code> æ‰¾åˆ°å‡ºç°è¯¥æ ¡éªŒæç¤ºçš„ç»„ä»¶ï¼Œå‘ç°å®ƒçš„ <code>rules</code> æ˜¯ä¹‹å‰æˆ‘è®¾ç½®çš„ <code>[&#123;&#125;]</code>ï¼Œå˜¿~éš¾ä¸æˆæ˜¯å› ä¸ºæˆ‘ä¼ äº†ç©ºå¯¹è±¡çš„åŸå› ï¼Ÿ</p><p>ç‚¹å‡»æäº¤ï¼Œä»£ç æ‰§è¡Œè°ƒç”¨äº† <code>validateForm</code>ï¼Œè€Œ <code>validateForm</code> çš„ä½œç”¨å°±æ˜¯è§¦å‘ <code>elForm.validate</code>ï¼Œæœ€åæŠ›å‡ºæ ¡éªŒç»“æœï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">private</span> <span class="token function">validateForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> form <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>formRef <span class="token keyword">as</span> ElForm<span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token builtin">boolean</span><span class="token punctuation">,</span> FieldErrorList<span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span> FieldErrorList<span class="token punctuation">]</span><span class="token operator">></span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    form<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">(</span>isValid<span class="token punctuation">,</span> errors<span class="token punctuation">,</span> isNoWarning<span class="token punctuation">,</span> warnings<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">[</span>isValid<span class="token punctuation">,</span> errors <span class="token keyword">as</span> FieldErrorList<span class="token punctuation">,</span> isNoWarning<span class="token punctuation">,</span> warnings <span class="token keyword">as</span> FieldErrorList<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>å»ç¿»æºç â€¦æ‰¾åˆ° <code>el-form</code> çš„ <code>validate</code> æ–¹æ³•ï¼Œ<strong>æˆ‘è¿™é‡Œç§»é™¤äº†ä¸€äº›å¹²æ‰°ä»£ç å¹¶å†™äº†æ³¨é‡Šï¼šæ¯”å¦‚ä¸ä¼šè¿›å…¥çš„ <code>if</code> è¯­å¥å’Œå…¶ä»–å˜é‡</strong></p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token function">validate</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>fields<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>field <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token comment">// è¿™é‡Œçš„ field ä¸º el-form-item çš„ ref ç»„ä»¶å®ä¾‹ï¼Œè°ƒç”¨ç»„ä»¶è‡ªèº«çš„ validate æ–¹æ³•</span>    field<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>message<span class="token punctuation">,</span> field<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token comment">// å½“æ‰€æœ‰ç»„ä»¶çš„ validate æ–¹æ³•æ‰§è¡Œå®Œæˆåè§¦å‘å¤–éƒ¨å›è°ƒ</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> callback <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">++</span>count <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fields<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// è¿›å…¥ el-form-item çš„ validate æ–¹æ³•ã€‚ ç›®å‰å°±æ˜¯ age æ‰€åœ¨ç»„ä»¶çš„æ ¡éªŒå¼‚å¸¸äº†...</span><span class="token function">validate</span><span class="token punctuation">(</span>trigger<span class="token punctuation">,</span> callback <span class="token operator">=</span> noop<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> rules <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getFilteredRule</span><span class="token punctuation">(</span>trigger<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿™ä¸ªæ–¹æ³•æ˜¯å¯¹ rules è¿›è¡Œè¿‡æ»¤ï¼Œè¿”å›çš„å…¶å®è¿˜æ˜¯ [&#123;&#125;]</span>  <span class="token keyword">const</span> descriptor <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  descriptor<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> rules<span class="token punctuation">;</span> <span class="token comment">// descriptor => &#123; age: [&#123;&#125;] &#125;</span>  <span class="token keyword">const</span> validator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AsyncValidator</span><span class="token punctuation">(</span>descriptor<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> model <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  model<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fieldValue<span class="token punctuation">;</span> <span class="token comment">// age å€¼æ˜¯æ•°å­—ç±»å‹ => model: &#123; age: 18 &#125;</span>  validator<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span>model<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> firstFields<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>errors<span class="token punctuation">,</span> invalidFields<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>validateMessage <span class="token operator">=</span> errors <span class="token operator">?</span> errors<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>message <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">;</span>    <span class="token comment">// è¿™é‡Œå°±æ˜¯è§¦å‘å¤–éƒ¨å›è°ƒï¼Œå¹¶æŠŠæ ¡éªŒå¤±è´¥çš„å­—æ®µä¼ é€’å‡ºå»</span>    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>validateMessage<span class="token punctuation">,</span> invalidFields<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>å¥½åƒè¶Šæ¥è¶Šæ¥è¿‘çœŸç›¸äº†ï¼Œæœ‰ç‚¹å…´å¥‹â€¦ğŸ˜¯ğŸ˜¯ğŸ˜¯ï¼Œæ—¢ç„¶ <code>message</code> æ˜¯ <code>asyncValidator</code> æŠ›å‡ºçš„ï¼Œé‚£å°±æ‰¾åˆ° <code>AsyncValidator</code> çš„ <code>validate</code> å®ç° <del>ç¯‡å¹…æœ‰ç‚¹é•¿</del>ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// new äº†ä¸€ä¸ª AsyncValidator å®ä¾‹</span><span class="token function">constructor</span><span class="token punctuation">(</span>descriptor<span class="token operator">:</span> Rules<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span>descriptor<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token function">define</span><span class="token punctuation">(</span>rules<span class="token operator">:</span> Rules<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>rules <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token comment">// è¿™ä¸€æ­¥åšå®Œï¼Œthis.rules = &#123; age: [&#123;&#125;] &#125;</span>  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>rules<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>name <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> item<span class="token operator">:</span> Rule <span class="token operator">=</span> rules<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>rules<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">Array</span><span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">?</span> item <span class="token operator">:</span> <span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// ä¸‹é¢çœ‹ validate å®ç°ï¼Œä¸ç”¨å¤ªå…³æ³¨å…¶ä»–é…ç½®ï¼Œæ‰€ä»¥æˆ‘åˆ äº†äº›è®¸ä»£ç </span><span class="token function">validate</span><span class="token punctuation">(</span>source_<span class="token operator">:</span> Values<span class="token punctuation">,</span> o<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> oc<span class="token operator">:</span> <span class="token function-variable function">any</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Values<span class="token operator">></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">let</span> source<span class="token operator">:</span> Values <span class="token operator">=</span> source_<span class="token punctuation">;</span> <span class="token comment">// &#123; age: 18 &#125;</span>  <span class="token keyword">let</span> options<span class="token operator">:</span> ValidateOption <span class="token operator">=</span> o<span class="token punctuation">;</span> <span class="token comment">// &#123; firstFields: true &#125;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>messages<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// ... è¿›å…¥ elseï¼Œè®¾ç½® options.messages</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    options<span class="token punctuation">.</span>messages <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">messages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// _messages === defaultMessages ===  å¦‚ä¸‹</span>    <span class="token comment">// &#123;</span>    <span class="token comment">//   types: &#123;</span>    <span class="token comment">//     string: '%s is not a %s',</span>    <span class="token comment">//     method: '%s is not a %s (function)',</span>    <span class="token comment">//     array: '%s is not an %s',</span>    <span class="token comment">//     object: '%s is not an %s',</span>    <span class="token comment">//     ...</span>    <span class="token comment">//   &#125;,</span>    <span class="token comment">//  ...</span>    <span class="token comment">// &#125;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">const</span> series<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> RuleValuePackage<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> keys <span class="token operator">=</span> options<span class="token punctuation">.</span>keys <span class="token operator">||</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>rules<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['age']</span>  keys<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>z <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>rules<span class="token punctuation">[</span>z<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// [&#123;&#125;]</span>    <span class="token keyword">let</span> value <span class="token operator">=</span> source<span class="token punctuation">[</span>z<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 18</span>    arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>r <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token keyword">let</span> rule<span class="token operator">:</span> InternalRuleItem <span class="token operator">=</span> r<span class="token punctuation">;</span> <span class="token comment">// &#123;&#125;</span>      <span class="token comment">// rule.validator: https://github.com/yiminghe/async-validator/blob/HEAD/src/validator/string.ts</span>      rule<span class="token punctuation">.</span>validator <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getValidationMethod</span><span class="token punctuation">(</span>rule<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// getValidationMethod(rule: InternalRuleItem) &#123;</span>      <span class="token comment">//   ...</span>      <span class="token comment">//   return validators[this.getType(rule)] || undefined; // asyncValidator æä¾›çš„ string é»˜è®¤æ ¡éªŒå‡½æ•°</span>      <span class="token comment">// &#125;</span>      <span class="token comment">// getType(rule: InternalRuleItem) &#123;</span>      <span class="token comment">//   ...</span>      <span class="token comment">//   ç”±äº rule æ˜¯ä¸ª &#123;&#125;ï¼Œä¸å­˜åœ¨ type, getType(rule) è¿”å›äº†é»˜è®¤å€¼ string</span>      <span class="token comment">//   return rule.type || 'string';</span>      <span class="token comment">// &#125;</span>      rule<span class="token punctuation">.</span>field <span class="token operator">=</span> z<span class="token punctuation">;</span> <span class="token comment">// age</span>      rule<span class="token punctuation">.</span>fullField <span class="token operator">=</span> rule<span class="token punctuation">.</span>fullField <span class="token operator">||</span> z<span class="token punctuation">;</span> <span class="token comment">// age</span>      rule<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span>rule<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// string</span>      series<span class="token punctuation">[</span>z<span class="token punctuation">]</span> <span class="token operator">=</span> series<span class="token punctuation">[</span>z<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// series: &#123; age: [] &#125;</span>      series<span class="token punctuation">[</span>z<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>        rule<span class="token punctuation">,</span>        value<span class="token punctuation">,</span>        source<span class="token punctuation">,</span>        field<span class="token operator">:</span> z<span class="token punctuation">,</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// series: &#123; age: [&#123; rule: &#123; field: 'age', type: 'string', fullField: 'age'ï¼Œ validator: ... &#125;, value: 18, source: &#123; age: 18 &#125;, field: 'age' &#125;] &#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token function">asyncMap</span><span class="token punctuation">(</span>    series<span class="token punctuation">,</span>    options<span class="token punctuation">,</span>    <span class="token punctuation">(</span>data<span class="token punctuation">,</span> doIt<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token keyword">const</span> rule <span class="token operator">=</span> data<span class="token punctuation">.</span>rule<span class="token punctuation">;</span> <span class="token comment">// æ‹¿åˆ°å¤„ç†åçš„ rule: &#123; field: 'age', type: 'string', fullField: 'age'ï¼Œ validator: ... &#125;</span>      <span class="token keyword">let</span> res<span class="token operator">:</span> ValidateResult<span class="token punctuation">;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>rule<span class="token punctuation">.</span>asyncValidator<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// ...</span>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>rule<span class="token punctuation">.</span>validator<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// æ‰§è¡Œ validate</span>        res <span class="token operator">=</span> rule<span class="token punctuation">.</span><span class="token function">validator</span><span class="token punctuation">(</span>rule<span class="token punctuation">,</span> data<span class="token punctuation">.</span>value<span class="token punctuation">,</span> cb<span class="token punctuation">,</span> data<span class="token punctuation">.</span>source<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    results <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    source<span class="token punctuation">,</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// è¿›å…¥é»˜è®¤ç”Ÿæˆçš„ rule.validator å³ https://github.com/yiminghe/async-validator/blob/HEAD/src/validator/string.ts</span><span class="token keyword">const</span> <span class="token builtin">string</span><span class="token operator">:</span> <span class="token function-variable function">ExecuteValidator</span> <span class="token operator">=</span> <span class="token punctuation">(</span>rule<span class="token punctuation">,</span> value<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> source<span class="token punctuation">,</span> options<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> errors<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> validate <span class="token operator">=</span>    rule<span class="token punctuation">.</span>required <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token operator">!</span>rule<span class="token punctuation">.</span>required <span class="token operator">&amp;&amp;</span> source<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>rule<span class="token punctuation">.</span>field<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// validateï¼štrue</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>validate<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// ...</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isEmptyValue</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token string">'string'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      rules<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span>rule<span class="token punctuation">,</span> value<span class="token punctuation">,</span> source<span class="token punctuation">,</span> errors<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// ...</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  <span class="token function">callback</span><span class="token punctuation">(</span>errors<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">// è¿›å…¥ rules.type</span><span class="token class-name"><span class="token keyword">const</span></span> type<span class="token operator">:</span> <span class="token function-variable function">ExecuteRule</span> <span class="token operator">=</span> <span class="token punctuation">(</span>rule<span class="token punctuation">,</span> value<span class="token punctuation">,</span> source<span class="token punctuation">,</span> errors<span class="token punctuation">,</span> options<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> custom <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'integer'</span><span class="token punctuation">,</span> <span class="token string">'float'</span><span class="token punctuation">,</span> <span class="token string">'array'</span><span class="token punctuation">,</span> <span class="token string">'regexp'</span><span class="token punctuation">,</span> <span class="token string">'object'</span><span class="token punctuation">,</span> <span class="token string">'method'</span><span class="token punctuation">,</span> <span class="token string">'email'</span><span class="token punctuation">,</span> <span class="token string">'number'</span><span class="token punctuation">,</span> <span class="token string">'date'</span><span class="token punctuation">,</span> <span class="token string">'url'</span><span class="token punctuation">,</span> <span class="token string">'hex'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> ruleType <span class="token operator">=</span> rule<span class="token punctuation">.</span>type<span class="token punctuation">;</span>  <span class="token comment">// ä¸‹é¢éƒ½æ˜¯åšå€¼å’Œ ruleType ç±»å‹æ¯”å¯¹ï¼Œåªä¸è¿‡å•ç‹¬æŠŠ string åŒºåˆ†å¼€äº†ï¼Œstring ç±»å‹ç›´æ¥é€šè¿‡ typeof è¿›è¡Œæ¯”å¯¹åˆ¤æ–­</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>custom<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>ruleType<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// ...</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>ruleType <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> value <span class="token operator">!==</span> rule<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    errors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>      <span class="token comment">// format æ˜¯å°† %s is not a %s ä¸­çš„ç‰¹æ®Šå­—ç¬¦è¿›è¡Œæ›¿æ¢ï¼Œè¿”å›ä¸€ä¸ªå®Œæ•´çš„ error message</span>      <span class="token function">format</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>messages<span class="token punctuation">.</span>types<span class="token punctuation">[</span>ruleType<span class="token punctuation">]</span><span class="token punctuation">,</span> rule<span class="token punctuation">.</span>fullField<span class="token punctuation">,</span> rule<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// age is not a string</span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><p><code>ok...æˆ‘æ»´å¦ˆ ç»ˆäºæ‰¾åˆ°æºå¤´äº†...</code></p><p>å› ä¸ºç©ºçš„ <code>rules: [&#123;&#125;]</code> ä¼šåœ¨ <code>asyncValidator</code> å†…ç”Ÿæˆ <code>[&#123; type: string, validator: ... &#125;]</code> çš„é»˜è®¤ <code>rule</code>ï¼Œé‚£ä¹ˆæ€ä¹ˆæ ·æ‰èƒ½è®© <code>rules</code> åŒ <code>[&#123;&#125;]</code> ä¸å‚ä¸æ ¡éªŒï¼ŒåŒæ—¶ä¹Ÿä¸ä¼šå¯¼è‡´å…¶ä»–å¼‚å¸¸å‡ºç°å‘¢ï¼Ÿ<strong>æ€»ä¸èƒ½æ ¹æ®ç»„ä»¶çš„ç±»å‹ï¼ŒåŠ¨æ€ç”Ÿæˆ type å†ä¼ è¿›å»å§ï¼Ÿ</strong></p><p>ç»†çœ‹ä¸Šè¿°æºç ï¼Œä¸å¯é¿å…çš„ä¼šç”Ÿæˆ <code>validator</code> æ ¡éªŒæ–¹æ³•ï¼Œç›®å‰èƒ½åšçš„è²Œä¼¼åªæœ‰è®©è¿™ä¸ª <code>[&#123;&#125;]</code> èƒ½å¤Ÿä¸å½±å“æ ¡éªŒç»“æœï¼Œèƒ½å¤Ÿæ­£å¸¸ä½¿ç”¨ï¼Œé‚£ä¹ˆå°±å¾—å…ˆåˆ†æ <code>getValidationMethod</code> æ–¹æ³•äº†ï¼Œæ¯•ç«Ÿæ‰€æœ‰çš„ <code>validator</code> éƒ½æ˜¯åŸºäºè¿™ä¸ªæ–¹æ³•è·å–çš„ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token function">getValidationMethod</span><span class="token punctuation">(</span>rule<span class="token operator">:</span> InternalRuleItem<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> rule<span class="token punctuation">.</span>validator <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> rule<span class="token punctuation">.</span>validator<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">const</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>rule<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> messageIndex <span class="token operator">=</span> keys<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>messageIndex <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    keys<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>messageIndex<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>keys<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> keys<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'required'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> validators<span class="token punctuation">.</span>required<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">return</span> validators<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span>rule<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span> <span class="token comment">// ä¹‹å‰ [&#123;&#125;] çš„æ­¥éª¤å°±èµ°åˆ°è¿™é‡Œï¼Œä¹Ÿå°±æ˜¯è¿”å›äº†åŸºäº string çš„é»˜è®¤ validator å‡½æ•°</span><span class="token punctuation">&#125;</span></code></pre><p>å¾ˆæ˜æœ—äº†ï¼Œåªè¦ä¸èµ°é»˜è®¤çš„ <code>return</code> è²Œä¼¼éƒ½èƒ½ç»•è¿‡å»â€¦</p><h3 id="è§£å†³åŠæ³•ï¼š"><a href="#è§£å†³åŠæ³•ï¼š" class="headerlink" title="è§£å†³åŠæ³•ï¼š"></a>è§£å†³åŠæ³•ï¼š</h3><p>é™„ä¸Šä¹‹å‰çš„ä¸´æ—¶è§£å†³åŠæ³•ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">public</span> <span class="token keyword">get</span> <span class="token function">formItemRules</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token operator">...</span>  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>ç»ˆææ–¹æ¡ˆï¼š</p><ul><li><strong>æ–¹æ¡ˆä¸€ï¼šå°† <code>[&#123;&#125;]</code> æ›¿æ¢ä¸º <code>[&#123; required: false &#125;]</code></strong>. ï¼ˆå½“åªæä¾› <code>required</code>ï¼Œçš„æ—¶å€™ï¼Œ<code>asyncValidator</code> ä¼šé‡‡ç”¨é»˜è®¤çš„ <code>required</code> çš„æ ¡éªŒæ–¹æ³•ï¼Œå³ï¼šï¼‰</li></ul><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">if</span> <span class="token punctuation">(</span>keys<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> keys<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'required'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> validators<span class="token punctuation">.</span>required<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// validators.required å¦‚ä¸‹ï¼š ä¼ å…¥ falseï¼Œæ°¸è¿œéƒ½ä¸ä¼šå½±å“æ ¡éªŒ</span><span class="token keyword">const</span> required<span class="token operator">:</span> <span class="token function-variable function">ExecuteRule</span> <span class="token operator">=</span> <span class="token punctuation">(</span>rule<span class="token punctuation">,</span> value<span class="token punctuation">,</span> source<span class="token punctuation">,</span> errors<span class="token punctuation">,</span> options<span class="token punctuation">,</span> type<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>    rule<span class="token punctuation">.</span>required <span class="token operator">&amp;&amp;</span>    <span class="token punctuation">(</span><span class="token operator">!</span>source<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>rule<span class="token punctuation">.</span>field<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">isEmptyValue</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> type <span class="token operator">||</span> rule<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    errors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">format</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>messages<span class="token punctuation">.</span>required<span class="token punctuation">,</span> rule<span class="token punctuation">.</span>fullField<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><ul><li><strong>æ–¹æ¡ˆäºŒï¼šä¼ å…¥è‡ªå®šä¹‰çš„ <code>validator</code>ï¼Œå°† [{}] æ›¿æ¢ä¸º [{ validator: () &#x3D;&gt; {} }]</strong></li></ul><h3 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h3><blockquote><p>å¦‚æœä½ çš„é¡¹ç›®åœ¨å¼€å‘è¿‡ç¨‹ä¸­æœ‰ä½¿ç”¨åˆ° <code>elForm</code>ï¼ŒåŒæ—¶åˆæœ‰åŠ¨æ€ç”Ÿæˆä¿®æ”¹ <code>rules</code> çš„éœ€æ±‚ï¼š<strong>é¦–å…ˆå¿…é¡»è¦ä¸ºç»‘å®šçš„ <code>rules</code> æä¾›é»˜è®¤å€¼ï¼Œä¸”é»˜è®¤å€¼ä¸èƒ½ä¸ºç©ºï¼Œå¦åˆ™ä¼šå¯¼è‡´æ ¡éªŒå¼‚å¸¸ï¼›å…¶æ¬¡ä¸ºæ»¡è¶³æä¾›çš„é»˜è®¤ <code>rules</code> ä¸å½±å“æ ¡éªŒç»“æœï¼Œä¸èƒ½ç›´æ¥ä¼ å…¥ <code>[&#123;&#125;]</code>ï¼Œè€Œæ˜¯é‡‡ç”¨ä¸Šé¢ä¸¤ç§è§£å†³æ–¹æ³•é¿å…å½±å“.</strong></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> è¸©å‘è®°å½• </category>
          
          <category> ElementUI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> elForm </tag>
            
            <tag> rule </tag>
            
            <tag> validate </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç”± Notification å¼•èµ·çš„å¥‡è‘©é—®é¢˜</title>
      <link href="/bugs/notification/"/>
      <url>/bugs/notification/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><p>ä¸€å¤§æ—©åˆ°å…¬å¸ä¸Šç­ï¼Œå°±è¢«å‘ŠçŸ¥æœ‰ä¸€ä¸ªçœ‹ä¼¼æ— å˜å¤´çš„ <code>bug</code> éœ€è¦è§£å†³ï¼Ÿ</p><blockquote><p>åŸè¯æ˜¯ï¼šåœ¨ç”µè„‘æµè§ˆå™¨ä¸Šèƒ½å¤Ÿæ­£å¸¸è®¿é—®ï¼Ÿç”šè‡³æ˜¯æ‰“å¼€è°ƒè¯•å·¥å…·ï¼Œæ¨¡æ‹Ÿæ‰‹æœºè¿›è¡Œè°ƒè¯•ä¹Ÿå¯ä»¥è®¿é—®ï¼Œæ— ä»»ä½•å¼‚å¸¸ä¿¡æ¯â€¦<code>but...</code>ï¼Œå½“åŒæ ·çš„é“¾æ¥æ”¾åˆ°æ‰‹æœºçœŸæœºä¸Šæ—¶ï¼Œä¸èƒ½æ­£å¸¸è®¿é—®æœåŠ¡ï¼Œé¡µé¢ä¸€ç‰‡ç©ºç™½ï¼Ÿ</p></blockquote><p>å…¶å®è¦è§£å†³ <code>bug</code>ï¼Œåªè¦èƒ½å‘ç°åŸå› æ‰€åœ¨ï¼Œå°±ç®—è§£å†³ä¸€åŠäº†ã€‚</p><p>ç„¶è€Œâ€¦<code>ç›®å‰åªæœ‰..çŒœæµ‹ï¼Ÿç¨‹åºå‘˜æ€ä¹ˆèƒ½é çŒœå‘¢ï¼Ÿ</code>ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿå¾—<code>æ–­ç‚¹è°ƒè¯•debugger</code>ä¸€å¥—æµç¨‹èµ°ä¸‹æ¥â€¦</p><p><code>okï¼Œå¦‚æœä½ çœŸçš„è¿™ä¹ˆåšäº†ï¼Œä½ ä¼šå‘ç°...å˜¿å˜¿ æ¯«æ— æ”¶è·...ğŸ˜‰ğŸ˜‰ğŸ˜‰</code> å› ä¸ºå®ƒä¸æŠ›å¼‚å¸¸ï¼Œä¹Ÿä¸æŠ¥é”™ï¼Œè¿ <code>vConsole</code> éƒ½æ²¡èƒ½è®©å®ƒåœ¨æ§åˆ¶å°ç•™ä¸‹ä»»ä½•å¼‚å¸¸è¾“å‡º.</p><blockquote><p><code>vConsole:</code> ä¸€ä¸ªè½»é‡ã€å¯æ‹“å±•ã€é’ˆå¯¹æ‰‹æœºç½‘é¡µçš„å‰ç«¯å¼€å‘è€…è°ƒè¯•é¢æ¿ã€‚åŒæ ·çš„ï¼Œç›®å‰ä¹Ÿæ˜¯å¾®ä¿¡å°ç¨‹åºçš„å®˜æ–¹è°ƒè¯•å·¥å…·</p></blockquote><span id="more"></span><h3 id="å®šä½é—®é¢˜"><a href="#å®šä½é—®é¢˜" class="headerlink" title="å®šä½é—®é¢˜"></a>å®šä½é—®é¢˜</h3><p>å¬ä¸Šå»æœ‰äº›æ— å˜å¤´ï¼Œç”šè‡³æˆ‘å’Œå¤§å®¶å¼€å§‹çš„æƒ³æ³•ä¸€æ ·ï¼Œæ— ä»ä¸‹æ‰‹è¿›è¡Œè°ƒè¯•ï¼Œæˆ‘å¯»æ€â€¦</p><blockquote><p>ç½‘é¡µç™½å±å¾ˆå¤§ç¨‹åº¦ä¸Šéƒ½æ˜¯ç”±äºç¨‹åºå‡ºé”™å¯¼è‡´çš„è¿è¡Œä¸­æ–­å¼•èµ·çš„ï¼Œéœ€è¦é‡ç‚¹æ’æŸ¥ã€‚</p><p>å†åŠ ä¹‹ <code>PC</code> ç”šè‡³æ¨¡æ‹Ÿæ‰‹æœºè°ƒè¯•éƒ½èƒ½å¤Ÿæ­£å¸¸è®¿é—®ï¼Œä¸”æ²¡æœ‰ä»»ä½•å¼‚å¸¸æç¤ºå’ŒæŠ¥é”™ï¼Œè€Œéƒ¨åˆ†æ‰‹æœºæµè§ˆå™¨åˆå¯ä»¥æ­£å¸¸è®¿é—®ï¼Œæ›´å¤§æ¦‚ç‡æ˜¯æµè§ˆå™¨å…¼å®¹æ€§å¼•èµ·çš„ã€‚</p></blockquote><p>å› ä¸ºæ‡’ï¼Œä¸æƒ³ä¸€ä¸ªä¸ªç‰ˆæœ¬åˆ‡æ¢å»æ‰¾å“ªæ¬¡æäº¤äº§ç”Ÿçš„é—®é¢˜ï¼Œä¹Ÿæ²¡æœ‰å¾ˆå¥½çš„æ€è·¯ï¼Œå°±åœ¨æ‰‹æœºæµè§ˆå™¨ä¸Šè®¿é—®æœ¬åœ°æœåŠ¡<del>å…ˆè¿ä¸Šå†…ç½‘ wifi</del>ï¼Œåˆ·æ–°äº†å‡ æ¬¡é“¾æ¥ï¼Œæ— æ„é—´å‘ç°æœ‰ä¸€ç¬é—´çš„é¡µé¢é”™è¯¯æ¶ˆæ¯æç¤º<del>å°±ä¸€ç¬é—´â€¦é›¶ç‚¹å‡ ç§’çš„å‡ºç°æ—¶é—´ï¼Œè¿˜æ˜¯åˆ·æ–°åå¶ç°çš„â€¦æ— è¯­ ğŸ˜…ğŸ˜…ğŸ˜…</del>ï¼Œç„¶åå°±ç™½å±äº†ï¼Œæ ¹æœ¬å°±çœ‹ä¸æ¸…é”™è¯¯æ¶ˆæ¯ã€‚</p><p>æ²¡åŠæ³•ï¼Œæˆ‘å°±æ‰“å¼€äº†æ‰‹æœºå½•å±ï¼Œå¤ç°äº†ï¼Œç„¶åå°±åœ¨å½•åˆ¶çš„è§†é¢‘é‡Œæ‰¾å…³é”®å¸§â€¦å‘ç°äº†è¿™æ ·çš„ä¸€å¥é”™è¯¯ä¿¡æ¯ï¼š</p><blockquote><p><code>can not find variable Notification eval code...</code></p></blockquote><p>æœ‰é”™è¯¯æ¶ˆæ¯ï¼Œæ¥ä¸‹æ¥å°±å¥½åŠå¤šäº†ï¼Œæ ¹æ®æç¤ºï¼Œå®šä½åˆ°æ–‡ä»¶ï¼ŒåŸæ–‡<del>åŸæ–‡ï¼Ÿ<code>bug</code>æ–‡æ‰å¯¹ ğŸ˜’ğŸ˜’ğŸ˜’</del>å¦‚ä¸‹ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> InfiniteScroll<span class="token punctuation">,</span> Loading<span class="token punctuation">,</span> Message<span class="token punctuation">,</span> MessageBox <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'element-ui'</span><span class="token punctuation">;</span>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Loading<span class="token punctuation">.</span>directive<span class="token punctuation">)</span><span class="token punctuation">;</span>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>InfiniteScroll<span class="token punctuation">)</span><span class="token punctuation">;</span>Vue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$loading <span class="token operator">=</span> Loading<span class="token punctuation">.</span>service<span class="token punctuation">;</span>Vue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$msgbox <span class="token operator">=</span> MessageBox<span class="token punctuation">;</span>Vue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$alert <span class="token operator">=</span> MessageBox<span class="token punctuation">.</span>alert<span class="token punctuation">;</span>Vue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$confirm <span class="token operator">=</span> MessageBox<span class="token punctuation">.</span>confirm<span class="token punctuation">;</span>Vue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$prompt <span class="token operator">=</span> MessageBox<span class="token punctuation">.</span>prompt<span class="token punctuation">;</span>Vue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$notify <span class="token operator">=</span> Notification<span class="token punctuation">;</span>Vue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$message <span class="token operator">=</span> Message<span class="token punctuation">;</span><span class="token operator">...</span></code></pre><p>æ‰¾åˆ°æ–‡ä»¶åï¼Œä¸€çœ¼å°±çœ‹åˆ°äº† <code>Notification</code>ï¼Œè¿™é‡Œå¹¶æ²¡æœ‰ä» <code>element-ui</code> å¯¼å…¥â€¦</p><h3 id="è§£å†³é—®é¢˜"><a href="#è§£å†³é—®é¢˜" class="headerlink" title="è§£å†³é—®é¢˜"></a>è§£å†³é—®é¢˜</h3><p>é—®é¢˜æœ¬èº«å¹¶ä¸éš¾è§£å†³å’Œå‘ç°ï¼Œä½†æ˜¯å½“ç¨‹åºä¸æŠ›å¼‚å¸¸ï¼Œåˆæˆ–è€…å“ªä¸ªç»“æ„æ¯”è¾ƒæ·±çš„æ–‡ä»¶ä¹Ÿå‡ºç°å¦‚ä¸Šçš„ç”¨æ³•ï¼ŒæŒ¨ä¸ªç‰ˆæœ¬æ”¹åŠ¨å¯¹æ¯”ï¼Œä¼šè®©ä½ æ‰¾åˆ°æ€€ç–‘äººç”Ÿâ€¦</p><p>ç”±äºæ²¡æœ‰å¯¼å…¥ï¼Œç¼–è¾‘å™¨æ­¤æ—¶æŠŠ <code>Notification</code> å½“åšæ˜¯ <code>web Notification</code> äº†ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆç¼–è¾‘å™¨æ²¡æœ‰æŠ¥é”™ï¼Œèƒ½æ­£å¸¸æ‰“åŒ…â€¦<del>å¿ƒä¸­é¡¿æ—¶ä¸€ä¸‡ä¸ªæ›¹å°¼ç›å¥”è…¾è€Œè¿‡ ğŸ™„ğŸ™„ğŸ™„</del></p><p>æŸ¥é˜…æ–‡æ¡£åï¼Œå‘ç°äº†è¯¥ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Notification">web Notification</a> åœ¨ <code>android webview</code> å’Œéƒ¨åˆ†æµè§ˆå™¨å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ã€‚</p><p>å¤§å¤šæ—¶å€™ï¼Œå…¶å®å…¼å®¹æ€§å¹¶ä¸ä¼šå½±å“ç¨‹åºè¿è¡Œã€‚æœ¬æ–‡åœºæ™¯æ˜¯åœ¨å…¥å£æ–‡ä»¶å…¨å±€æŒ‚è½½ <code>$notify</code>ï¼Œè€Œç”±äº <code>Notification</code> çš„å±€é™æ€§ï¼Œéƒ¨åˆ†æµè§ˆå™¨ç¯å¢ƒä¸‹æ²¡æœ‰è¯¥ <code>API</code> è¯†åˆ«ä¸äº†ï¼Œä¼šå½“åšæ˜¯æœªå£°æ˜çš„å˜é‡ï¼Œä»è€ŒæŠ›å‡ºå¼‚å¸¸ä¸­æ–­ç¨‹åºè¿è¡Œã€‚</p><p>è§£å†³çš„æ–¹æ³•å¾ˆç®€å•ï¼Œæ­£å¸¸å¯¼å…¥å°±å¯ä»¥äº†ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> Notification <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'element-ui'</span><span class="token punctuation">;</span>Vue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$notify <span class="token operator">=</span> Notification<span class="token punctuation">;</span></code></pre><blockquote><p><strong>æœ¬æ–‡æ—¨åœ¨æç¤º <code>element-ui Notification</code> å’Œ <code>web Notification</code> ä¸¤è€…å…±åŒå­˜åœ¨ï¼Œåœ¨ç¼–ç è¿‡ç¨‹ä¸­å®¹æ˜“å¿½è§†æ··æ·†ï¼Œè€Œç¼–è¾‘å™¨å¹¶ä¸ä¼šç»™å‡ºç›¸åº”æç¤ºï¼Œåç»­å‡ºç°é—®é¢˜ä¹Ÿä¼šå¾ˆéš¾æ’æŸ¥å®šä½</strong></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> è¸©å‘è®°å½• </category>
          
          <category> ElementUI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bug </tag>
            
            <tag> notification </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç»œè¯·æ±‚ä¹‹å“åº”å¼‚å¸¸å¤„ç†æ‹¦æˆªå™¨</title>
      <link href="/share/response-interceptors/"/>
      <url>/share/response-interceptors/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="èƒŒæ™¯å‰æ"><a href="#èƒŒæ™¯å‰æ" class="headerlink" title="èƒŒæ™¯å‰æ"></a>èƒŒæ™¯å‰æ</h3><p>ä¸ç®¡æ˜¯ä½¿ç”¨ <code>axios</code> è¿˜æ˜¯ç±»ä¼¼ <code>umi-request</code> è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬éƒ½éœ€è¦å¯¹è¯·æ±‚å¼‚å¸¸è¿›è¡Œå¤„ç†ï¼Œ<code>eg.</code> <strong>è¯·æ±‚è¶…æ—¶</strong>ã€<strong>ç½‘ç»œé”™è¯¯</strong>ç­‰ã€‚</p><p>é’ˆå¯¹ä¸åŒç±»å‹çš„å¼‚å¸¸ï¼Œå¯ä»¥é‡‡å–ä¸åŒçš„æªæ–½ï¼Œ<code>eg.</code> <strong>å¼¹å‡ºæ¶ˆæ¯æç¤º</strong>ã€<strong>è·³è½¬åˆ°é”™è¯¯é¡µé¢</strong>ã€<strong>é‡æ–°è¯·æ±‚</strong>ç­‰ã€‚</p><span id="more"></span><h3 id="å¤„ç†å¼‚å¸¸"><a href="#å¤„ç†å¼‚å¸¸" class="headerlink" title="å¤„ç†å¼‚å¸¸"></a>å¤„ç†å¼‚å¸¸</h3><p>é’ˆå¯¹ <code>axios</code> çš„ <code>Interceptors</code>ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®šä¹‰å¹¶å¯¼å‡ºè‡ªå®šä¹‰çš„ <code>axios</code> å®ä¾‹ï¼Œå¹¶åœ¨å®ä¾‹ä¸­é…ç½® <code>Interceptors.response</code> æ¥å®ç°ã€‚</p><p>ç„¶ååœ¨é¡¹ç›®ä¸­ï¼Œä½¿ç”¨å¯¼å‡ºçš„ <code>axios</code> è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼Œå³å¯å®ç°å…¨å±€å¯¹è¯·æ±‚å¼‚å¸¸çš„ç»Ÿä¸€å¤„ç†ã€‚</p><h4 id="axios-interceptors-response"><a href="#axios-interceptors-response" class="headerlink" title="axios.interceptors.response"></a><code>axios.interceptors.response</code></h4><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> Message <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'element-ui'</span><span class="token punctuation">;</span>axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> <span class="token string">'/'</span><span class="token punctuation">;</span><span class="token comment">// axios other configs...</span>axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>  <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=></span> res<span class="token punctuation">,</span>  <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token comment">// è¢«å–æ¶ˆçš„è¯·æ±‚ä¸å¼¹å‡ºmessage. ä¸€èˆ¬å‘ç”Ÿåœ¨é¡µé¢è·³è½¬æ—¶</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>axios<span class="token punctuation">.</span><span class="token function">isCancel</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// å¤„ç†æœªç™»å½• 401 é—®é¢˜ï¼Œè·³è½¬åˆ°ç™»å½•é¡µ</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>      <span class="token punctuation">(</span>error<span class="token operator">?.</span>response<span class="token operator">?.</span>status <span class="token operator">===</span> <span class="token number">400</span> <span class="token operator">&amp;&amp;</span>        error<span class="token operator">?.</span>response<span class="token operator">?.</span>data<span class="token operator">?.</span>error<span class="token operator">?.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'invalid_token'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span>      error<span class="token operator">?.</span>response<span class="token operator">?.</span>status <span class="token operator">===</span> <span class="token number">401</span>    <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">'/login'</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">const</span> message <span class="token operator">=</span> error<span class="token operator">?.</span>response<span class="token operator">?.</span>data<span class="token operator">?.</span>message <span class="token operator">||</span> <span class="token string">'ç½‘ç»œè¯·æ±‚å¼‚å¸¸'</span><span class="token punctuation">;</span>      Message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> message<span class="token punctuation">,</span> duration<span class="token operator">:</span> <span class="token number">2000</span><span class="token punctuation">,</span> offset<span class="token operator">:</span> <span class="token number">70</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> axios<span class="token punctuation">;</span></code></pre><p>ä»¥ä¸Šå°±æ˜¯æ¯”è¾ƒé€šç”¨ä¸€ç‚¹çš„æ‹¦æˆªå¤„ç†ã€‚</p><h3 id="æ‹¦æˆªå™¨ä¼˜åŒ–"><a href="#æ‹¦æˆªå™¨ä¼˜åŒ–" class="headerlink" title="æ‹¦æˆªå™¨ä¼˜åŒ–"></a>æ‹¦æˆªå™¨ä¼˜åŒ–</h3><p>åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å¯¹éƒ¨åˆ†å®šåˆ¶çš„è¯·æ±‚æœ‰å•ç‹¬çš„å¤„ç†ï¼Œä»¥ä¸‹æ˜¯åˆ—å‡ºçš„å¯èƒ½éœ€è¦ä¼˜åŒ–çš„ç‚¹ï¼š</p><ul><li><p>åŸºäº <code>blob</code> ç±»å‹è¯·æ±‚çš„é”™è¯¯å¤„ç†</p></li><li><p>æœ‰å¤šæ¡é”™è¯¯æ¶ˆæ¯æ—¶ï¼Œæç¤ºæœŸé—´åªæ˜¾ç¤ºä¸€æ¡</p></li><li><p>ä¸æ˜¾ç¤ºå¼‚å¸¸æ¶ˆæ¯ï¼Œæˆ–è€…ä¸åšä»»ä½•æ‹¦æˆªå¤„ç†</p></li><li><p>è¯·æ±‚è¶…æ—¶é‡è¯•</p></li><li><p>â€¦</p></li></ul><h4 id="æ‰©å±•è¯·æ±‚é…ç½®"><a href="#æ‰©å±•è¯·æ±‚é…ç½®" class="headerlink" title="æ‰©å±•è¯·æ±‚é…ç½®"></a>æ‰©å±•è¯·æ±‚é…ç½®</h4><p>å¯ä»¥åœ¨ <code>axios</code> è¯·æ±‚å‡½æ•°é‡Œæ·»åŠ å•ç‹¬çš„ <code>config</code> é…ç½®ï¼Œåœ¨ <code>error.config</code> ä¸­æ‹¿åˆ°è¯·æ±‚æ—¶ä¼ å…¥çš„å‚æ•°ï¼Œå®ç°ç‰¹æ®Šå¤„ç†ï¼š</p><p><code>axios-extend.d.ts</code>ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> AxiosRequestConfig <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'axios'</span><span class="token punctuation">;</span><span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'axios'</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">AxiosRequestConfig</span> <span class="token punctuation">&#123;</span>    metadata<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      start<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token comment">/**     *  ç”¨äºæ§åˆ¶è¯¥è¯·æ±‚å‡ºç°é”™è¯¯æ—¶ï¼Œ æ˜¯å¦ç”±é»˜è®¤messageæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯     *     * @type &#123;boolean&#125;     * @memberof AxiosRequestConfig     */</span>    suppressError<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>    <span class="token comment">/**     * ç”¨äºè¯·æ±‚åœ¨401çŠ¶æ€ç æ—¶ï¼Œ æ˜¯å¦è‡ªåŠ¨é‡å®šå‘åˆ°ç™»é™†é¡µã€‚     *     * @type &#123;boolean&#125;     * @memberof AxiosRequestConfig     */</span>    suppressUnauthRedirect<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p><code>request.ts</code>ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'@/plugin/axios'</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">checkAppTemplate</span><span class="token punctuation">(</span>code<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/xxx/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>code<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> suppressError<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>ä»ä¸Šé¢å¯ä»¥çœ‹åˆ°ï¼Œè¯·æ±‚çš„æ—¶å€™ <code>axios</code> çš„ <code>config</code> é…ç½®é‡Œï¼Œæ·»åŠ äº† <code>suppressError</code>å‚æ•°ï¼Œåœ¨ <code>Interceptors</code> ä¸­åªéœ€è¦åˆ¤æ–­æ˜¯å¦å«æœ‰è¯¥å‚æ•°, å¦‚æœä¸º <code>true</code>ï¼Œåˆ™ä¸æç¤º <code>message</code>ï¼Œå¦åˆ™æç¤ºï¼Œ<code>suppressUnauthRedirect</code> åŒç†ã€‚</p><p>ä¸Šé¢çš„ <code>axios.ts</code> åšä»¥ä¸‹è°ƒæ•´ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>error<span class="token operator">?.</span>config<span class="token punctuation">.</span>suppressError<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> message <span class="token operator">=</span> error<span class="token operator">?.</span>response<span class="token operator">?.</span>data<span class="token operator">?.</span>message <span class="token operator">||</span> <span class="token string">'ç½‘ç»œè¯·æ±‚å¼‚å¸¸'</span><span class="token punctuation">;</span>  Message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> message<span class="token punctuation">,</span> duration<span class="token operator">:</span> <span class="token number">2000</span><span class="token punctuation">,</span> offset<span class="token operator">:</span> <span class="token number">70</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="åŸºäº-blob-çš„è¯·æ±‚é”™è¯¯æ¶ˆæ¯å¤„ç†"><a href="#åŸºäº-blob-çš„è¯·æ±‚é”™è¯¯æ¶ˆæ¯å¤„ç†" class="headerlink" title="åŸºäº blob çš„è¯·æ±‚é”™è¯¯æ¶ˆæ¯å¤„ç†"></a>åŸºäº <code>blob</code> çš„è¯·æ±‚é”™è¯¯æ¶ˆæ¯å¤„ç†</h4><p>å‰ç«¯åœ¨ä¸‹è½½æ–‡ä»¶æ—¶ï¼Œé€šå¸¸ä¼šåŸºäº <code>blob</code> çš„æ–¹å¼ï¼Œå½“æˆ‘ä»¬è®¾ç½®äº† <code>responseType</code> ä¸º <code>blob</code>çš„æ—¶å€™ï¼Œå¦‚æœæ¥å£æŠ›å‡ºå¼‚å¸¸å¹¶è¿”å›äº†ä¾‹å¦‚ä¸‹é¢çš„é”™è¯¯æ¶ˆæ¯ï¼Œç”±äºè¿”å›çš„æ˜¯ <code>Blob</code> å¯¹è±¡ï¼Œæ‰€ä»¥æ— æ³•åŒå…¶ä»–è¯·æ±‚ä¸€æ ·å»è§£æ <code>message</code>ï¼š</p><pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>  <span class="token property">"code"</span><span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span>  <span class="token property">"message"</span><span class="token operator">:</span> <span class="token string">"ä¸‹è½½å¼‚å¸¸"</span><span class="token punctuation">,</span>  <span class="token property">"data"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">&#125;</span></code></pre><p>ä¸ºäº†èƒ½å¤Ÿè§£æè¿”å›çš„ <code>message</code>ï¼Œéœ€è¦æ‰©å±•ä¸Šé¢æåˆ°çš„é€šç”¨çš„ <code>interceptors</code>:</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">let</span> message <span class="token operator">=</span> error<span class="token operator">?.</span>response<span class="token operator">?.</span>data<span class="token operator">?.</span>message <span class="token operator">||</span> <span class="token string">'ç½‘ç»œè¯·æ±‚å¼‚å¸¸'</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">.</span>response<span class="token operator">?.</span>data <span class="token keyword">instanceof</span> <span class="token class-name">Blob</span> <span class="token operator">&amp;&amp;</span> error<span class="token punctuation">.</span>response<span class="token operator">?.</span>data<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'application/json'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> resText <span class="token operator">=</span> <span class="token keyword">await</span> error<span class="token punctuation">.</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  message <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>resText<span class="token punctuation">)</span><span class="token punctuation">.</span>message <span class="token operator">||</span> message<span class="token punctuation">;</span> <span class="token comment">// ä¸‹è½½å¼‚å¸¸</span><span class="token punctuation">&#125;</span>Message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> message<span class="token punctuation">,</span> duration<span class="token operator">:</span> <span class="token number">2000</span><span class="token punctuation">,</span> offset<span class="token operator">:</span> <span class="token number">70</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="message-é˜²æŠ–å¤„ç†"><a href="#message-é˜²æŠ–å¤„ç†" class="headerlink" title="message é˜²æŠ–å¤„ç†"></a><code>message</code> é˜²æŠ–å¤„ç†</h4><p>é€šè¿‡å¤–éƒ¨å˜é‡æ¥æ ‡è¯†æ˜¯å¦æ­£å¤„äº <code>message</code> æç¤ºä¸­ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">let</span> isErrorShowing <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token comment">// axios.interceptors.response.use(....</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isErrorShowing<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> message <span class="token operator">=</span> error<span class="token operator">?.</span>response<span class="token operator">?.</span>data<span class="token operator">?.</span>message <span class="token operator">||</span> <span class="token string">'ç½‘ç»œè¯·æ±‚å¼‚å¸¸'</span><span class="token punctuation">;</span>  Message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> message<span class="token punctuation">,</span> duration<span class="token operator">:</span> <span class="token number">2000</span><span class="token punctuation">,</span> offset<span class="token operator">:</span> <span class="token number">70</span><span class="token punctuation">,</span> <span class="token function-variable function">onClose</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>isErrorShowing <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="è¯·æ±‚è¶…æ—¶é‡è¯•"><a href="#è¯·æ±‚è¶…æ—¶é‡è¯•" class="headerlink" title="è¯·æ±‚è¶…æ—¶é‡è¯•"></a>è¯·æ±‚è¶…æ—¶é‡è¯•</h4><h5 id="åŸºäº-axios-è¯·æ±‚é‡è¯•"><a href="#åŸºäº-axios-è¯·æ±‚é‡è¯•" class="headerlink" title="åŸºäº axios è¯·æ±‚é‡è¯•"></a>åŸºäº <code>axios</code> è¯·æ±‚é‡è¯•</h5><p>å¯ä»¥å‚è€ƒ <a href="https://github.com/softonic/axios-retry">axios-retry</a> å®ç°ã€‚</p><h5 id="åŸºäº-umi-request-çš„è¯·æ±‚é‡è¯•"><a href="#åŸºäº-umi-request-çš„è¯·æ±‚é‡è¯•" class="headerlink" title="åŸºäº umi-request çš„è¯·æ±‚é‡è¯•"></a>åŸºäº <code>umi-request</code> çš„è¯·æ±‚é‡è¯•</h5><p>å€Ÿé‰´äº† <code>axios-retry</code>ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š</p><p><code>umiRequestConfig.ts</code>ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">&#123;</span> RequestConfig <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'umi'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">&#123;</span> RequestOptionsInit <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'umi-request'</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">RequestOptions</span> <span class="token keyword">extends</span> <span class="token class-name">RequestOptionsInit</span> <span class="token punctuation">&#123;</span>  retryConfig<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> retryCount<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> retryCondition<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>res<span class="token operator">:</span> Response<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">boolean</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">CRequestConfig</span> <span class="token keyword">extends</span> <span class="token class-name">RequestConfig</span> <span class="token punctuation">&#123;</span>  requestInterceptors<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>    url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>    options<span class="token operator">:</span> RequestOptions<span class="token punctuation">,</span>  <span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    url<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>    options<span class="token operator">?</span><span class="token operator">:</span> RequestOptions<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  responseInterceptors<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>    response<span class="token operator">:</span> Response<span class="token punctuation">,</span>    options<span class="token operator">:</span> RequestOptions<span class="token punctuation">,</span>  <span class="token punctuation">)</span> <span class="token operator">=></span> Response <span class="token operator">|</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Response<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p><code>app.tsx</code>:</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// è¶…æ—¶é‡è¯•çš„æœ€å¤§æ¬¡æ•°</span><span class="token keyword">const</span> <span class="token constant">TIMEOUT_MAX</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span><span class="token comment">// è¶…æ—¶é‡è¯•å»¶è¿Ÿ</span><span class="token keyword">const</span> <span class="token constant">TIMEOUT_RETRY_DELAY</span> <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">shouldRetry</span><span class="token punctuation">(</span>res<span class="token operator">:</span> Response<span class="token punctuation">,</span> retryCount<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> retryCondition<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>r<span class="token operator">:</span> Response<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">504</span> <span class="token operator">&amp;&amp;</span> retryCount <span class="token operator">&lt;</span> <span class="token constant">TIMEOUT_MAX</span><span class="token punctuation">)</span> <span class="token operator">||</span> retryCondition<span class="token operator">?.</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">requestRetry</span><span class="token punctuation">(</span>  res<span class="token operator">:</span> Response<span class="token punctuation">,</span>  <span class="token punctuation">&#123;</span> prefix<span class="token punctuation">,</span> retryConfig<span class="token punctuation">,</span> <span class="token operator">...</span>retryOption <span class="token punctuation">&#125;</span><span class="token operator">:</span> RequestOptions<span class="token punctuation">,</span> <span class="token comment">// ç§»é™¤ prefixï¼Œé¿å… retry çš„æ—¶å€™é‡å¤æ·»åŠ </span><span class="token punctuation">)</span><span class="token operator">:</span> Response <span class="token operator">|</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Response<span class="token operator">></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> retryCount <span class="token operator">=</span> retryConfig<span class="token operator">?.</span>retryCount <span class="token operator">??</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>requestHelper<span class="token punctuation">.</span><span class="token function">shouldRetry</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> retryCount<span class="token punctuation">,</span> retryConfig<span class="token operator">?.</span>retryCondition<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span> <span class="token operator">=></span>      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>        <span class="token function">resolve</span><span class="token punctuation">(</span>          <span class="token function">umiRequest</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name"><span class="token constant">URL</span></span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span>pathname<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>            <span class="token operator">...</span>retryOption<span class="token punctuation">,</span>            retryConfig<span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token operator">...</span><span class="token punctuation">(</span>retryConfig <span class="token operator">??</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> retryCount<span class="token operator">:</span> retryCount <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>          <span class="token punctuation">&#125;</span> <span class="token keyword">as</span> RequestOptions<span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token constant">TIMEOUT_RETRY_DELAY</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">return</span> res<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">export</span> <span class="token keyword">const</span> request<span class="token operator">:</span> CRequestConfig <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// errorHandler:</span>  <span class="token comment">// requestInterceptors: []</span>  responseInterceptors<span class="token operator">:</span> <span class="token punctuation">[</span>requestRetry<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> ç½‘ç»œè¯·æ±‚ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Axios </tag>
            
            <tag> UmiRequest </tag>
            
            <tag> BlobError </tag>
            
            <tag> RequestRetry </tag>
            
            <tag> Interceptors </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue-Ts-Decorator ç±»ç»„ä»¶è£…é¥°å™¨ä½¿ç”¨</title>
      <link href="/share/vue-ts-decorator/"/>
      <url>/share/vue-ts-decorator/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h3><p>ç›®å‰ <code>vue</code> ç»„ä»¶çš„ä¸»æµå¼€å‘é£æ ¼æ˜¯åŸºäº <code>ts setup</code> è¯­æ³•çš„ <code>composition api</code>ï¼Œ<code>composition api</code> ç›¸å¯¹äº <code>options api</code> æ¥è¯´ï¼Œæ›´åŠ çµæ´»ï¼Œä»£ç æ›´åŠ ç®€æ´ã€‚</p><p>ç”±äºå†å²åŸå› ï¼Œä»æœ‰å¾ˆå¤šé¡¹ç›®æŠ€æœ¯æ ˆä½¿ç”¨çš„æ˜¯ <code>vue2</code>ã€‚æœ¬ç¯‡æ–‡ç« ä¹Ÿæ—¨åœ¨ä»‹ç» <code>vue-ts-decorator</code> ç±»ç»„ä»¶è£…é¥°å™¨çš„ä½¿ç”¨å’Œä¼˜åŒ–ã€‚</p><span id="more"></span><h3 id="æ„å»º"><a href="#æ„å»º" class="headerlink" title="æ„å»º"></a>æ„å»º</h3><p><code>vue-ts</code> é¡¹ç›®æ„å»ºå°±ä¸åšç»†è®²äº†ï¼Œæ ¹æ® <code>vue-cli</code> æä¾›çš„é€‰é¡¹é€‰æ‹©å¹¶åˆ›å»ºé¡¹ç›®ï¼Œåªéœ€è¦æ³¨æ„åœ¨é€‰æ‹© <code>Use class-style component syntax? (Y/n)</code> é€‰æ‹© <code>Y</code> å³å¯ã€‚</p><p>åˆæˆ–è€…å¦‚æœé¡¹ç›®æ˜¯ä¹‹å‰å¹¶æ²¡æœ‰ä½¿ç”¨ <code>decorator</code> çš„è€é¡¹ç›®ï¼Œå¯ä»¥æ¯”å¯¹å’Œä¸Šé¢è„šæ‰‹æ¶åˆ›å»ºçš„é¡¹ç›®çš„ <code>package</code> ä¾èµ–ï¼Œæ‰‹åŠ¨å®‰è£…æ²¡æœ‰çš„åŒ…å³å¯ã€‚</p><p>å€¼å¾—æ³¨æ„çš„åº“ï¼š</p><blockquote><p><code>vue-class-component</code> (ç±»çš„è£…é¥°å™¨)ã€ <code>vue-property-decorator</code> (ç±»ä¼¼ <code>Component Prop Emit...</code> ç­‰è£…é¥°å™¨ä»è¿™é‡Œå¯¼å‡ºï¼Œæ˜¯åŸºäº <code>vue-class-component</code> æ‰©å±•çš„)ã€æ­¤å¤–è¿˜æœ‰ <code>vuex-module-decorators</code> (å¯é€‰æ‹©æ€§å®‰è£…ä½¿ç”¨çš„ <code>vuex</code> åº“)</p></blockquote><p>ç›®å‰ä»åœ¨ä½¿ç”¨<code>decorator</code> è¿›è¡Œå¼€å‘çš„å¤§å¤šæ˜¯è€é¡¹ç›®ï¼Œæ–°é¡¹ç›®å¯ä»¥å°è¯•ç›´æ¥æ‹¥æŠ± <code>vue3-ts</code> çš„ <code>setup</code>ã€‚</p><h3 id="ç±»ç»„ä»¶"><a href="#ç±»ç»„ä»¶" class="headerlink" title="ç±»ç»„ä»¶"></a>ç±»ç»„ä»¶</h3><p>åœ¨æ­¤ä¹‹å‰ï¼Œ<code>.vue</code> ç»„ä»¶çš„å¸¸è§å†™æ³•æ˜¯ï¼š</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clickHandle<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; msgSync &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'HelloWorld'</span><span class="token punctuation">,</span>    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>        <span class="token literal-property property">flag</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token function">msgSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>flag <span class="token operator">?</span> <span class="token string">'Hello Boy'</span> <span class="token operator">:</span> <span class="token string">'Hello World'</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token literal-property property">ss</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token function">clickHandle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>flag <span class="token operator">=</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>flag<span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">></span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre><p>ç°åœ¨æˆ‘ä»¬æŠŠå®ƒè½¬ä¸ºç±»ç»„ä»¶å®ç°ï¼š</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clickHandle<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; msgSync &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">  <span class="token keyword">import</span> <span class="token punctuation">&#123;</span> Component<span class="token punctuation">,</span> Vue <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue-property-decorator'</span><span class="token punctuation">;</span>  @<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'HelloWorld'</span><span class="token punctuation">,</span>    <span class="token comment">// å¯ä»¥ä¼ å…¥å…¶ä»–çš„ä¸€äº›é€‰é¡¹ ... ä¾‹å¦‚ computed/components...</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorld</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">get</span> <span class="token function">msgSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>flag <span class="token operator">?</span> <span class="token string">'Hello Boy'</span> <span class="token operator">:</span> <span class="token string">'Hello World'</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// å¦‚æœéœ€è¦è®¾ç½® set</span>    <span class="token comment">// public set msgSync(value: string) &#123;&#125;</span>    <span class="token keyword">public</span> <span class="token function">clickHandle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>flag <span class="token operator">=</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>flag<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">></span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre><p>ä¸éš¾å‘ç°ä¸¤è€…çš„åŒºåˆ«ï¼Œ<code>data</code> å¯¹è±¡çš„å±æ€§å˜æˆäº†ç±»çš„å±æ€§ï¼Œ<code>ss</code> å˜æˆäº†ç±»çš„æ–¹æ³•ï¼Œ<code>computed</code> å˜æˆäº† <code>get(set) function</code>ã€‚</p><p>å½“ç„¶é™¤äº† <code>class</code> å¯¼è‡´çš„ä¸€äº›å˜åŒ–å¤–ï¼Œåœ¨ <code>@Component</code> ä¸­ï¼Œå¯ä»¥ä¼ å…¥ä»¥å‰é€‰é¡¹å¼çš„å…¶ä»– <code>options</code> é…ç½®ï¼Œä¾‹å¦‚ç»„ä»¶åç§°ã€å­ç»„ä»¶æ³¨å†Œï¼Œåˆæˆ–è€…éœ€è¦ä½¿ç”¨ <code>vuex</code> æä¾›çš„ä¸€äº› <code>map</code>æ–¹æ³•æ—¶ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> mapState <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> Component<span class="token punctuation">,</span> Vue <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue-property-decorator'</span><span class="token punctuation">;</span><span class="token keyword">import</span> Children1 <span class="token keyword">from</span> <span class="token string">'@/components/Children1.vue'</span><span class="token punctuation">;</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  name<span class="token operator">:</span> <span class="token string">'HelloWorld'</span><span class="token punctuation">,</span>  components<span class="token operator">:</span> <span class="token punctuation">&#123;</span>    Children1<span class="token punctuation">,</span>    <span class="token function-variable function">Children2</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/components/Children2.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  computed<span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>      <span class="token function-variable function">msg</span><span class="token operator">:</span> <span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token operator">=></span> state<span class="token punctuation">.</span>msg<span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorld</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="è£…é¥°å™¨"><a href="#è£…é¥°å™¨" class="headerlink" title="è£…é¥°å™¨"></a>è£…é¥°å™¨</h3><p>å¸¸è§„ç”¨æ³•å’Œå…¨éƒ¨è£…é¥°å™¨è¯¦è§ <a href="https://github.com/kaorun343/vue-property-decorator">https://github.com/kaorun343/vue-property-decorator</a></p><p><del>å¾ˆæ— è¯­å­â€¦ä¹‹å‰æˆ‘åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œè²Œä¼¼å¹¶æ²¡æœ‰å‘ç° <code>Ref å’Œ VModel</code> çš„è£…é¥°å™¨ ğŸ¤ğŸ¤ğŸ¤</del></p><p>å®˜æ–¹æ–‡æ¡£å…¶å®å·²ç»æŠŠè£…é¥°å™¨ç”¨æ³•è¯´çš„å¾ˆè¯¦ç»†äº†ï¼Œæˆ‘è¡¥å……ä¸€äº›æ³¨æ„çš„ç‚¹ï¼š</p><h4 id="ç±»å‹ä¸º-Boolean-çš„-Prop"><a href="#ç±»å‹ä¸º-Boolean-çš„-Prop" class="headerlink" title="ç±»å‹ä¸º Boolean çš„ Prop"></a>ç±»å‹ä¸º <code>Boolean</code> çš„ <code>Prop</code></h4><p>å½¢å¦‚ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorld</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">&#123;</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Prop</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">readonly</span> checked<span class="token operator">!</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>åœ¨æˆ‘ä»¬åœ¨ä½¿ç”¨è£…é¥°å™¨çš„æ—¶å€™ï¼Œç”±äº <code>ts</code> çš„ç±»å‹çº¦æŸï¼Œå³å¦‚ä¸Šï¼š<code>checked!: boolean</code>ï¼Œå¾ˆå®¹æ˜“ä½¿æˆ‘ä»¬å¿½ç•¥æ‰ <code>@Prop()</code> è‡ªèº«éœ€è¦çš„ <code>Type</code>ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šç±»å‹ï¼Œé‚£ä¹ˆåœ¨å½¢å¦‚ä¸‹é¢çš„æ–¹å¼ä¼ å…¥æ—¶ä¼šå¯¼è‡´ä¸å¯é¢„çŸ¥çš„å¼‚å¸¸ï¼š</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CustomComponent</span> <span class="token attr-name">checked</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>CustomComponent</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- ç­‰ä»·äº --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CustomComponent</span> <span class="token attr-name">checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>CustomComponent</span><span class="token punctuation">></span></span></code></pre><p>åŸå› å°±æ˜¯æ²¡æœ‰æŒ‡å®š <code>Prop</code> çš„ç±»å‹ã€‚èƒ½ä¸èƒ½å°±åƒä¸Šé¢è¿™ç§æ–¹å¼ä¼ å…¥å€¼å‘¢ï¼Ÿå½“ç„¶å¯ä»¥ï¼Œä½†éœ€è¦æŒ‡å®š <code>Prop</code> ç±»å‹ï¼Œå³ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorld</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">&#123;</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Prop</span></span><span class="token punctuation">(</span>Boolean<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">readonly</span> checked<span class="token operator">!</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>  <span class="token comment">// æˆ–è€…</span>  <span class="token comment">// @Prop(&#123; type: Boolean &#125;) public readonly checked!: boolean;</span><span class="token punctuation">&#125;</span></code></pre><p>åªæœ‰è¿™æ ·ï¼Œæ‰èƒ½æ‹¿åˆ°æ­£ç¡®çš„ <code>Prop</code> å€¼ï¼Œå¦‚ä¸‹ï¼š</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CustomComponent</span> <span class="token attr-name">checked</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>CustomComponent</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- ç­‰ä»·äº --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CustomComponent</span> <span class="token attr-name">:checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>CustomComponent</span><span class="token punctuation">></span></span></code></pre><blockquote><p>å¦‚æœä½ åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œéƒ½æ˜¯ä¸¥æ ¼æŒ‰ç…§ <code>:checked=&quot;true&quot;</code> è¿™ç§æ–¹å¼ä¼ é€’ï¼Œé‚£ä¹ˆä¸å†™ Type ä¹Ÿä¸ä¼šå½±å“</p></blockquote><h4 id="PropSync-å’Œ-ModelSync-çš„ä¼˜åŠ¿"><a href="#PropSync-å’Œ-ModelSync-çš„ä¼˜åŠ¿" class="headerlink" title="PropSync å’Œ ModelSync çš„ä¼˜åŠ¿"></a><code>PropSync å’Œ ModelSync</code> çš„ä¼˜åŠ¿</h4><p>åœ¨æ¨å‡ºè£…é¥°å™¨ä¹‹å‰ï¼Œå¦‚æœéœ€è¦å¯¹ <code>Prop</code> çš„å€¼è¿›è¡Œä¿®æ”¹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ¯ä¸€æ¬¡å˜æ›´çš„æ—¶å€™ <code>emit</code> ä¸€ä¸ªäº‹ä»¶ï¼Œç„¶ååœ¨çˆ¶ç»„ä»¶ä¸­ä¿®æ”¹ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>  props<span class="token operator">:</span> <span class="token punctuation">&#123;</span>    checked<span class="token operator">:</span> <span class="token punctuation">&#123;</span>      type<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token function">changeChecked</span><span class="token punctuation">(</span>val<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'changeChecked'</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><p>é’ˆå¯¹è¿™ç§éœ€æ±‚ï¼Œå®˜æ–¹æä¾›äº† <code>.sync</code> ä¿®é¥°ç¬¦ï¼Œå³åœ¨ä¼ å…¥ <code>prop</code> çš„æ—¶å€™æ·»åŠ  <code>.sync</code> ä¿®é¥°ç¬¦ï¼Œå¦‚ä¸‹ï¼š</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CustomComponent</span> <span class="token attr-name">:checked.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checked<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>CustomComponent</span><span class="token punctuation">></span></span></code></pre><p>åœ¨ç»„ä»¶ä¸­å¦‚æœéœ€è¦ä¿®æ”¹ <code>checked</code> çš„å€¼ï¼Œåªéœ€è¦ <code>emit(&#39;update:&#39; + propName, value)</code> å³å¯ï¼Œå¦‚ä¸‹ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token punctuation">&#123;</span>  methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token function">changeChecked</span><span class="token punctuation">(</span>val<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'update:checked'</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span></code></pre><p>è¿™æ ·ç¡®å®å·²ç»è§£å†³äº†çˆ¶ç»„ä»¶åœ¨æ”¶åˆ°äº‹ä»¶è¿‡åä¸ç”¨å†èµ‹å€¼çš„é—®é¢˜ï¼Œä½†æ˜¯ <code>PropSync å’Œ ModelSync</code> çš„å‡ºç°ï¼Œè¿˜èƒ½ç»§ç»­çœç•¥ä¼˜åŒ–æˆ‘ä»¬çš„ä»£ç ï¼š</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myValue<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>input</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">  <span class="token keyword">import</span> <span class="token punctuation">&#123;</span> Vue<span class="token punctuation">,</span> Component<span class="token punctuation">,</span> ModelSync <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue-property-decorator'</span><span class="token punctuation">;</span>  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorld</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">&#123;</span>    @<span class="token function">ModelSync</span><span class="token punctuation">(</span><span class="token string">'value'</span><span class="token punctuation">,</span> <span class="token string">'input'</span><span class="token punctuation">)</span> <span class="token keyword">public</span> myValue<span class="token operator">!</span><span class="token operator">:</span> string<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><p>å…¶çˆ¶ç»„ä»¶ï¼š</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HelloWorld</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>value<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre><p>ä½ åº”è¯¥ä¹Ÿå‘ç°äº†ï¼Œ<code>ModelSync PropSync</code> çš„å‡ºç°ï¼Œè®©æˆ‘ä»¬åœ¨å­ç»„ä»¶ä¸­å¯ä»¥ç›´æ¥ä¿®æ”¹ <code>Model å’Œ Prop</code> è€Œä¸éœ€è¦å†æ‰‹åŠ¨æ‰§è¡Œ <code>emit</code>ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorld</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">&#123;</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">PropSync</span></span><span class="token punctuation">(</span><span class="token string">'checked'</span><span class="token punctuation">)</span> <span class="token keyword">public</span> myChecked<span class="token operator">!</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>  <span class="token keyword">public</span> <span class="token function">changeChecked</span><span class="token punctuation">(</span>val<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// ä¼šåŒæ­¥ä¿®æ”¹çˆ¶ç»„ä»¶ä¼ å…¥çš„ checked ç­‰ä»· $emit('update:checked', val);</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>myChecked <span class="token operator">=</span> val<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="VModel-è£…é¥°å™¨"><a href="#VModel-è£…é¥°å™¨" class="headerlink" title="VModel è£…é¥°å™¨"></a><code>VModel</code> è£…é¥°å™¨</h4><p>å’Œ <code>ModelSync</code> è£…é¥°å™¨ä½œç”¨å·®ä¸å¤§å¤šï¼Œæˆ‘ç†è§£ä¸‹æ¥å…¶å®å°±æ˜¯<strong>çœç•¥äº†å­ç»„ä»¶æ·»åŠ è®¡ç®—å±æ€§ä½œä¸º <code>VModel</code> çš„è¿‡ç¨‹</strong>ï¼Œè®©æˆ‘ä»¬å¾—ç›Šäºç›´æ¥æ“ä½œ <code>VModel</code> ä¼ å…¥çš„ <code>Prop</code>.</p><h4 id="Ref-è£…é¥°å™¨"><a href="#Ref-è£…é¥°å™¨" class="headerlink" title="Ref è£…é¥°å™¨"></a><code>Ref</code> è£…é¥°å™¨</h4><p>è¿™ä¸ªæˆ‘ä¹‹å‰ä½¿ç”¨çš„æ—¶å€™ç¡®å®æ²¡æœ‰çœ‹åˆ°ï¼Œåº”è¯¥æ˜¯å®˜æ–¹åé¢è¡¥å……çš„ï¼Œä½†è¿™å¹¶ä¸å½±å“å®ƒçš„å®ç”¨æ€§ã€‚ä¸‹é¢æˆ‘å°±æ²¿ç”¨ä¸Šé¢çš„ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜ï¼š</p><p><code>HelloWorld</code> ç»„ä»¶å®ç°ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorld</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">&#123;</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">PropSync</span></span><span class="token punctuation">(</span><span class="token string">'checked'</span><span class="token punctuation">)</span> <span class="token keyword">public</span> myChecked<span class="token operator">!</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>  <span class="token keyword">public</span> message <span class="token operator">=</span> <span class="token string">'hello world'</span><span class="token punctuation">;</span>  <span class="token keyword">public</span> <span class="token function">changeMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">'hello vue'</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token function">changeChecked</span><span class="token punctuation">(</span>val<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// ä¼šåŒæ­¥ä¿®æ”¹çˆ¶ç»„ä»¶ä¼ å…¥çš„ checked ç­‰ä»· $emit('update:checked', val);</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>myChecked <span class="token operator">=</span> val<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>åœ¨æˆ‘ä»¬éœ€è¦æ“ä½œå­ç»„ä»¶ï¼Œè°ƒç”¨å­ç»„ä»¶çš„ <code>API</code>ï¼Œ æˆ–è€…è·å–å­ç»„ä»¶çš„å±æ€§å’Œæ–¹æ³•çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºç»„ä»¶ç»‘å®š <code>ref</code> å±æ€§ï¼Œå¦‚ä¸‹ï¼š</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HelloWorld</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hello<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>HelloWorld</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">  <span class="token keyword">import</span> <span class="token punctuation">&#123;</span> Vue<span class="token punctuation">,</span> Component <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue-property-decorator'</span><span class="token punctuation">;</span>  <span class="token keyword">import</span> HelloWorld <span class="token keyword">from</span> <span class="token string">'HelloWorld.vue'</span><span class="token punctuation">;</span>  @<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Parent'</span><span class="token punctuation">,</span>    <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      HelloWorld<span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token function">setHelloWorldMessage</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">v</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>hello<span class="token punctuation">.</span><span class="token function">changeMessage</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre><p>ä½†é€šå¸¸ï¼Œæˆ‘ä»¬éœ€è¦ä¸º <code>hello</code> æŒ‡å®šç±»å‹ï¼Œå¦åˆ™åœ¨ <code>ts</code> ç¯å¢ƒä¸‹ä¼šæŠ¥é”™ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">public</span> <span class="token function">setHelloWorldMessage</span><span class="token punctuation">(</span>v<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>hello <span class="token keyword">as</span> HelloWorld<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">changeMessage</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>Ref</code> è£…é¥°å™¨æ¥æŒ‡å®šç±»å‹ï¼Œé¿å…è¿‡å¤šçš„ <code>as</code> è¯­å¥ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> Vue<span class="token punctuation">,</span> Component <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue-property-decorator'</span><span class="token punctuation">;</span><span class="token keyword">import</span> HelloWorld <span class="token keyword">from</span> <span class="token string">'HelloWorld.vue'</span><span class="token punctuation">;</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  name<span class="token operator">:</span> <span class="token string">'Parent'</span><span class="token punctuation">,</span>  components<span class="token operator">:</span> <span class="token punctuation">&#123;</span>    HelloWorld<span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// å½“ç„¶ä½ ä¹Ÿå¯ä»¥è®¾ç½® ref åˆ«å</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Ref</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">readonly</span> hello<span class="token operator">!</span><span class="token operator">:</span> HelloWorld<span class="token punctuation">;</span>  <span class="token keyword">public</span> <span class="token function">setHelloWorldMessage</span><span class="token punctuation">(</span>v<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>hello<span class="token punctuation">.</span><span class="token function">changeMessage</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="Mixins-ä¸æ¨è"><a href="#Mixins-ä¸æ¨è" class="headerlink" title="Mixins ä¸æ¨è"></a><code>Mixins</code> ä¸æ¨è</h4><p><code>Mixins</code> ç”±äºä½¿ç”¨è¾ƒå°‘å’Œå±€é™æ€§ï¼Œ<del>æ›´ä¸æ¨èä½¿ç”¨<code>mixins</code>çš„åŠŸèƒ½</del>ï¼š</p><p><code>å»ºè®®æ›´å¤šåœ°ä½¿ç”¨ç»„ä»¶ç»„åˆã€æ’æ§½å’ŒVuexç­‰æ›´å¯æ§çš„æ–¹å¼æ¥å¤„ç†ä»£ç å¤ç”¨å’Œå…±äº«çŠ¶æ€.</code></p><blockquote><p>ç¼ºé™·ï¼šå‘½åå†²çªã€éšå¼ä¾èµ–ã€ä»£ç å¤æ‚æ€§å¢åŠ ã€è€¦åˆåº¦å¢åŠ ã€ç»´æŠ¤å›°éš¾ã€ä¸åˆ©äºç»„ä»¶é‡ç”¨ã€æ··åˆçš„é¡ºåºé—®é¢˜â€¦.</p></blockquote><h4 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h4><p>è¿˜æœ‰<code>Prop/Watch/Emit</code>è£…é¥°å™¨éƒ½å¾ˆé€‚ç”¨ï¼Œ é™¤æ­¤ä¹‹å¤–å‰©ä¸‹çš„å‡ ä¸ªè£…é¥°å™¨ä¹Ÿéƒ½æœ‰å„è‡ªçš„ä½¿ç”¨åœºæ™¯ï¼Œç”±äºæ²¡æœ‰ä»€ä¹ˆæ¯”è¾ƒå‡¸å‡ºçš„ä¼˜åŒ–ç‚¹ï¼Œå°±ä¸ä¸€ä¸€é˜è¿°äº†ï¼Œè¯¦ç»†å¯çœ‹å®˜æ–¹æ–‡æ¡£.</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> decorator </tag>
            
            <tag> ç±»è£…é¥°å™¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue-Directive æŒ‡ä»¤çš„è‡ªå®šä¹‰å°è£…æ¡ˆä¾‹</title>
      <link href="/share/vue-directive/"/>
      <url>/share/vue-directive/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="äº†è§£æ›´å¤š"><a href="#äº†è§£æ›´å¤š" class="headerlink" title="äº†è§£æ›´å¤š"></a>äº†è§£æ›´å¤š</h3><p>ä¸€ä¸ªè‡ªå®šä¹‰æŒ‡ä»¤ç”±ä¸€ä¸ªåŒ…å«ç±»ä¼¼ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­çš„å¯¹è±¡æ¥å®šä¹‰.</p><blockquote><p><a href="https://vuejs.org/guide/reusability/custom-directives.html">è‡ªå®šä¹‰æŒ‡ä»¤ï¼š https://vuejs.org/guide/reusability/custom-directives.html</a></p></blockquote><p>ä¸‹é¢æ˜¯åœ¨ <code>vue</code> ä¸­å¯èƒ½ç”¨åˆ°çš„ä¸€äº›è‡ªå®šä¹‰æŒ‡ä»¤å®ç°ï¼š</p><span id="more"></span><h3 id="å®¹å™¨é®ç½©"><a href="#å®¹å™¨é®ç½©" class="headerlink" title="å®¹å™¨é®ç½©"></a>å®¹å™¨é®ç½©</h3><p>éƒ¨åˆ†ç»„ä»¶åœºæ™¯éœ€è¦ç»™å…ƒç´ æ·»åŠ é®ç½©å±‚ï¼Œç¦æ­¢ç”¨æˆ·ç‚¹å‡»ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'mask'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>  <span class="token function">bind</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> maskDiv <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> position <span class="token operator">=</span> <span class="token function">getComputedStyle</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">.</span>position<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token string">'relative, absolute'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">'relative'</span><span class="token punctuation">;</span> <span class="token comment">// ç»™çˆ¶å…ƒç´ è®¾ç½®å®šä½</span>    <span class="token punctuation">&#125;</span>    Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>maskDiv<span class="token punctuation">.</span>style<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>      height<span class="token operator">:</span> <span class="token string">'100%'</span><span class="token punctuation">,</span>      width<span class="token operator">:</span> <span class="token string">'100%'</span><span class="token punctuation">,</span>      position<span class="token operator">:</span> <span class="token string">'absolute'</span><span class="token punctuation">,</span>      top<span class="token operator">:</span> <span class="token string">'0'</span><span class="token punctuation">,</span>      left<span class="token operator">:</span> <span class="token string">'0'</span><span class="token punctuation">,</span>      background<span class="token operator">:</span> <span class="token string">'transparent'</span><span class="token punctuation">,</span>      zIndex<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    el<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>maskDiv<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="æŒ‰é’®æƒé™"><a href="#æŒ‰é’®æƒé™" class="headerlink" title="æŒ‰é’®æƒé™"></a>æŒ‰é’®æƒé™</h3><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæœ‰å¾ˆå¤šæ ¹æ®ç”¨æˆ·æƒé™è¿›è¡Œå±•ç¤ºçš„æ“ä½œæŒ‰é’®ï¼Œæ¯”å¦‚æŸäº›æŒ‰é’®åªæœ‰ç®¡ç†å‘˜æ‰èƒ½æ“ä½œï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡è‡ªå®šä¹‰æŒ‡ä»¤æ¥å®ç°ã€‚</p><p>åœ¨è¿™ä¸ªæŒ‡ä»¤ä¸­ï¼Œæ¥å—çš„å‚æ•°å°±æ˜¯å½“å‰æŒ‰é’®çš„æ‰€éœ€æƒé™å’Œç”¨æˆ·å·²æœ‰æƒé™(ä¹Ÿå¯ç›´æ¥ä» store ä¸­è·å–ç”¨æˆ·å·²æœ‰æƒé™)ï¼Œå¦‚æœç”¨æˆ·æƒé™ä¸­åŒ…å«æŒ‰é’®æ‰€éœ€æƒé™ï¼Œåˆ™æ˜¾ç¤ºæŒ‰é’®ï¼Œå¦åˆ™ä¸æ˜¾ç¤ºã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'permissions'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>  <span class="token function">bind</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> banding<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> permission<span class="token punctuation">,</span> userPermission <span class="token punctuation">&#125;</span> <span class="token operator">=</span> banding<span class="token punctuation">.</span>value <span class="token keyword">as</span> <span class="token punctuation">&#123;</span>      permission<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>      userPermission<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token comment">// å®é™…éœ€è¦æ ¹æ® permission çš„ç»“æ„å’Œç±»å‹è¿›è¡Œåˆ¤æ–­å¤„ç†ï¼Œæˆ‘è¿™é‡Œç¤ºä¾‹ç»™å‡ºçš„ string</span>    <span class="token keyword">const</span> isPermission <span class="token operator">=</span> userPermission<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>permission<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isPermission<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">await</span> Vue<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      el<span class="token punctuation">.</span>parentNode<span class="token operator">?.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="ç©ºçŠ¶æ€æ–‡å­—æ˜¾ç¤º"><a href="#ç©ºçŠ¶æ€æ–‡å­—æ˜¾ç¤º" class="headerlink" title="ç©ºçŠ¶æ€æ–‡å­—æ˜¾ç¤º"></a>ç©ºçŠ¶æ€æ–‡å­—æ˜¾ç¤º</h3><p>éƒ¨åˆ†ç»„ä»¶å®¹å™¨åœ¨æ²¡æœ‰è·å–åˆ°å€¼ï¼Œæˆ–è€…æ²¡æœ‰å­ç»„ä»¶çš„æ—¶å€™ï¼Œéœ€è¦å‘ç”¨æˆ·å±•ç¤ºä¸€ä¸ªç©ºçŠ¶æ€çš„æ–‡å­—ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡è‡ªå®šä¹‰æŒ‡ä»¤æ¥å®ç°ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">&#123;</span> CSSProperties <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue/types/jsx'</span><span class="token punctuation">;</span><span class="token keyword">interface</span> <span class="token class-name">Empty</span> <span class="token punctuation">&#123;</span>  content<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  visible<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">createEmptySpanCtx</span><span class="token punctuation">(</span>content<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> className<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> emptyEl <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  emptyEl<span class="token punctuation">.</span>innerText <span class="token operator">=</span> content<span class="token punctuation">;</span>  emptyEl<span class="token punctuation">.</span>className <span class="token operator">=</span> className<span class="token punctuation">;</span>  Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>emptyEl<span class="token punctuation">.</span>style<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>    position<span class="token operator">:</span> <span class="token string">'absolute'</span><span class="token punctuation">,</span>    top<span class="token operator">:</span> <span class="token string">'50%'</span><span class="token punctuation">,</span>    left<span class="token operator">:</span> <span class="token string">'50%'</span><span class="token punctuation">,</span>    transform<span class="token operator">:</span> <span class="token string">'translate(-50%, -50%)'</span><span class="token punctuation">,</span>    fontSize<span class="token operator">:</span> <span class="token string">'14px'</span><span class="token punctuation">,</span>    color<span class="token operator">:</span> <span class="token string">'#909399'</span><span class="token punctuation">,</span>    background<span class="token operator">:</span> <span class="token string">'transparent'</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">as</span> CSSProperties<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> emptyEl<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">triggerEmptyEl</span><span class="token punctuation">(</span>containerEl<span class="token operator">:</span> HTMLElement<span class="token punctuation">,</span> bindValue<span class="token operator">:</span> Empty<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> emptyClassName <span class="token operator">=</span> <span class="token string">'empty-span'</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> emptyEls <span class="token operator">=</span> containerEl<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>emptyClassName<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>bindValue<span class="token punctuation">.</span>visible <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>emptyEls<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> emptyEl <span class="token operator">=</span> <span class="token function">createEmptySpanCtx</span><span class="token punctuation">(</span>bindValue<span class="token punctuation">.</span>content<span class="token punctuation">,</span> emptyClassName<span class="token punctuation">)</span><span class="token punctuation">;</span>    containerEl<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>emptyEl<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>bindValue<span class="token punctuation">.</span>visible <span class="token operator">&amp;&amp;</span> emptyEls<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    emptyEls<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      containerEl<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'empty'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>  <span class="token function">bind</span><span class="token punctuation">(</span>el<span class="token operator">:</span> HTMLElement<span class="token punctuation">,</span> binding<span class="token operator">:</span> <span class="token punctuation">&#123;</span> value<span class="token operator">:</span> Empty <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> position <span class="token operator">=</span> <span class="token function">getComputedStyle</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">.</span>position<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token string">'relative, absolute'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">'relative'</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">triggerEmptyEl</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> binding<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token function">update</span><span class="token punctuation">(</span>el<span class="token operator">:</span> HTMLElement<span class="token punctuation">,</span> binding<span class="token operator">:</span> <span class="token punctuation">&#123;</span> value<span class="token operator">:</span> Empty <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">triggerEmptyEl</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> binding<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> æŒ‡ä»¤ </tag>
            
            <tag> directive </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SSE å’Œ WebSocket é€šä¿¡ä»¥åŠå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«</title>
      <link href="/share/sse-websocket/"/>
      <url>/share/sse-websocket/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="Whatï¼Ÿ"><a href="#Whatï¼Ÿ" class="headerlink" title="Whatï¼Ÿ"></a><code>What</code>ï¼Ÿ</h3><p><code>SSE</code>åˆç§°<code>Server-Sent-Events</code>ï¼Œæ˜¯ä¸€ç§åŸºäº <code>HTTP</code> çš„å•å‘é€šä¿¡åè®®ï¼Œå…è®¸æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€å¼‚æ­¥äº‹ä»¶æµã€‚å®ƒæ˜¯ <code>HTML5</code> è§„èŒƒçš„ä¸€éƒ¨åˆ†ï¼Œé€šè¿‡å¸¸è§„çš„ <code>HTTP</code> è¿æ¥ï¼ˆä½¿ç”¨â€é•¿è½®è¯¢â€æŠ€æœ¯ï¼‰ä»æœåŠ¡å™¨å‘å®¢æˆ·ç«¯æ¨é€æ•°æ®ã€‚<code>SSE</code> ä¸éœ€è¦é¢å¤–çš„åè®®åˆ‡æ¢ï¼Œå› ä¸ºå®ƒæ„å»ºåœ¨ç°æœ‰çš„ <code>HTTP</code> åè®®ä¹‹ä¸Šã€‚</p><p><code>WebSocket</code> æ˜¯ä¸€ç§å…¨åŒå·¥é€šä¿¡åè®®ï¼Œå…è®¸åœ¨å•ä¸ª <code>TCP</code> è¿æ¥ä¸Šè¿›è¡ŒåŒå‘é€šä¿¡ã€‚å®ƒæä¾›äº†ä¸€ä¸ªæŒä¹…åŒ–çš„è¿æ¥ï¼Œå¯ä»¥åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å®æ—¶åœ°åŒå‘ä¼ è¾“æ•°æ®ï¼Œè€Œä¸éœ€è¦åƒ <code>HTTP</code> è¯·æ±‚é‚£æ ·é¢‘ç¹åœ°åˆ›å»ºå’Œå…³é—­è¿æ¥ã€‚</p><span id="more"></span><h3 id="SSE"><a href="#SSE" class="headerlink" title="SSE"></a><code>SSE</code></h3><h4 id="å·¥ä½œåŸç†"><a href="#å·¥ä½œåŸç†" class="headerlink" title="å·¥ä½œåŸç†"></a>å·¥ä½œåŸç†</h4><ul><li><p>å®¢æˆ·ç«¯é€šè¿‡ç®€å•çš„ <code>EventSource API</code> è¿æ¥åˆ°æœåŠ¡å™¨ã€‚</p></li><li><p>ä¸€æ—¦è¿æ¥å»ºç«‹ï¼ŒæœåŠ¡å™¨å¯ä»¥åœ¨ä»»ä½•æ—¶å€™å¼‚æ­¥åœ°å‘å®¢æˆ·ç«¯å‘é€äº‹ä»¶æ•°æ®ã€‚</p></li><li><p>å®¢æˆ·ç«¯é€šè¿‡ç›‘å¬ <code>onmessage</code> äº‹ä»¶æ¥æ¥æ”¶æ¥è‡ªæœåŠ¡å™¨çš„æ¶ˆæ¯ã€‚</p></li></ul><h4 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h4><ul><li><p>ç®€å•æ˜“ç”¨ï¼Œä¸éœ€è¦ç‰¹æ®Šçš„åè®®æˆ–åº“ã€‚</p></li><li><p>æœåŠ¡å™¨å‘å®¢æˆ·ç«¯æ¨é€æ•°æ®æ—¶æ¯”ä¼ ç»Ÿè½®è¯¢ï¼ˆ<code>polling</code>ï¼‰æ›´é«˜æ•ˆã€‚</p></li></ul><h4 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h4><ul><li><p>åªèƒ½ç”±æœåŠ¡å™¨å•å‘å‘å®¢æˆ·ç«¯å‘é€æ•°æ®ï¼Œå®¢æˆ·ç«¯æ— æ³•ç›´æ¥å‘æœåŠ¡å™¨å‘é€æ¶ˆæ¯ã€‚</p></li><li><p>æ”¯æŒåº¦è¾ƒä½ï¼šè™½ç„¶ä¸»æµæµè§ˆå™¨éƒ½æ”¯æŒ <code>SSE</code>ï¼Œä½†åœ¨ä¸€äº›æ—§ç‰ˆæœ¬æˆ–ç‰¹å®šæƒ…å†µä¸‹å¯èƒ½ä¸å…¼å®¹ã€‚</p></li></ul><h4 id="API"><a href="#API" class="headerlink" title="API"></a><code>API</code></h4><h5 id="EventSource-å®ä¾‹å¯¹è±¡"><a href="#EventSource-å®ä¾‹å¯¹è±¡" class="headerlink" title="EventSource å®ä¾‹å¯¹è±¡"></a><code>EventSource</code> å®ä¾‹å¯¹è±¡</h5><p><code>client</code> ç”Ÿæˆå®ä¾‹å¯¹è±¡ï¼Œå»ºç«‹ <code>SSE</code> è¿æ¥</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">const</span> eventSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventSource</span><span class="token punctuation">(</span><span class="token string">'https://example.com/events'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è¡¨ç¤ºå½“å‰å®ä¾‹æ˜¯å¦å¼€å¯ CORS çš„ withCredentials</span><span class="token keyword">const</span> source <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventSource</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> withCredentials<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h5 id="EventSource-å®ä¾‹å¯¹è±¡å±æ€§"><a href="#EventSource-å®ä¾‹å¯¹è±¡å±æ€§" class="headerlink" title="EventSource å®ä¾‹å¯¹è±¡å±æ€§"></a><code>EventSource</code> å®ä¾‹å¯¹è±¡å±æ€§</h5><h6 id="readyState"><a href="#readyState" class="headerlink" title="readyState"></a><code>readyState</code></h6><p>è¡¨æ˜è¿æ¥çš„å½“å‰çŠ¶æ€ã€‚è¯¥å±æ€§åªè¯»ï¼Œå¯ä»¥å–ä»¥ä¸‹å€¼ï¼š</p><ul><li><p><code>0</code>ï¼šç›¸å½“äºå¸¸é‡ <code>EventSource.CONNECTING</code>ï¼Œè¡¨ç¤ºè¿æ¥è¿˜æœªå»ºç«‹ï¼Œæˆ–è€…æ–­çº¿æ­£åœ¨é‡è¿ã€‚</p></li><li><p><code>1</code>ï¼šç›¸å½“äºå¸¸é‡ <code>EventSource.OPEN</code>ï¼Œè¡¨ç¤ºè¿æ¥å·²ç»å»ºç«‹ï¼Œå¯ä»¥æ¥å—æ•°æ®ã€‚</p></li><li><p><code>2</code>ï¼šç›¸å½“äºå¸¸é‡ <code>EventSource.CLOSED</code>ï¼Œè¡¨ç¤ºè¿æ¥å·²æ–­ï¼Œä¸”ä¸ä¼šé‡è¿ã€‚</p></li></ul><h6 id="onopen"><a href="#onopen" class="headerlink" title="onopen"></a><code>onopen</code></h6><p>è¿æ¥ä¸€æ—¦å»ºç«‹ï¼Œå°±ä¼šè§¦å‘ <code>open</code> äº‹ä»¶ï¼Œå¯ä»¥åœ¨ <code>onopen</code> å±æ€§å®šä¹‰å›è°ƒå‡½æ•°ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript">source<span class="token punctuation">.</span><span class="token function-variable function">onopen</span> <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">// å¦ä¸€ç§å†™æ³•</span>source<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'open'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h6 id="onerror"><a href="#onerror" class="headerlink" title="onerror"></a><code>onerror</code></h6><p>å¦‚æœå‘ç”Ÿé€šä¿¡é”™è¯¯ï¼ˆæ¯”å¦‚è¿æ¥ä¸­æ–­ï¼‰ï¼Œå°±ä¼šè§¦å‘ <code>error</code> äº‹ä»¶ï¼Œå¯ä»¥åœ¨ <code>onerror</code> å±æ€§å®šä¹‰å›è°ƒå‡½æ•°ã€‚ç”¨æ³•åŒä¸Šã€‚</p><h6 id="onmessage"><a href="#onmessage" class="headerlink" title="onmessage"></a><code>onmessage</code></h6><p>å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨å‘æ¥çš„æ•°æ®ï¼Œå°±ä¼šè§¦å‘ <code>message</code> äº‹ä»¶ï¼Œå¯ä»¥åœ¨ <code>onmessage</code> å±æ€§å®šä¹‰å›è°ƒå‡½æ•°ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript">source<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> data <span class="token operator">=</span> event<span class="token punctuation">.</span>data<span class="token punctuation">;</span>  <span class="token keyword">const</span> origin <span class="token operator">=</span> event<span class="token punctuation">.</span>origin<span class="token punctuation">;</span>  <span class="token keyword">const</span> lastEventId <span class="token operator">=</span> event<span class="token punctuation">.</span>lastEventId<span class="token punctuation">;</span>  <span class="token comment">// handle message</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">// å¦ä¸€ç§å†™æ³•</span>source<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>  <span class="token string">'message'</span><span class="token punctuation">,</span>  <span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> data <span class="token operator">=</span> event<span class="token punctuation">.</span>data<span class="token punctuation">;</span>    <span class="token keyword">const</span> origin <span class="token operator">=</span> event<span class="token punctuation">.</span>origin<span class="token punctuation">;</span>    <span class="token keyword">const</span> lastEventId <span class="token operator">=</span> event<span class="token punctuation">.</span>lastEventId<span class="token punctuation">;</span>    <span class="token comment">// handle message</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token boolean">false</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h5 id="EventSource-å®ä¾‹å¯¹è±¡æ–¹æ³•-close"><a href="#EventSource-å®ä¾‹å¯¹è±¡æ–¹æ³•-close" class="headerlink" title="EventSource å®ä¾‹å¯¹è±¡æ–¹æ³• close"></a><code>EventSource</code> å®ä¾‹å¯¹è±¡æ–¹æ³• <code>close</code></h5><p><code>close</code> æ–¹æ³•ç”¨äºå…³é—­ <code>SSE</code> è¿æ¥ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript">source<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æ”¯æŒå‘é€è‡ªå®šä¹‰äº‹ä»¶â€¦</p><h3 id="WebSocket"><a href="#WebSocket" class="headerlink" title="WebSocket"></a><code>WebSocket</code></h3><h4 id="å·¥ä½œåŸç†-1"><a href="#å·¥ä½œåŸç†-1" class="headerlink" title="å·¥ä½œåŸç†"></a>å·¥ä½œåŸç†</h4><ul><li><p>å®¢æˆ·ç«¯é€šè¿‡ <code>WebSocket API</code> ä¸æœåŠ¡å™¨å»ºç«‹ <code>WebSocket</code> è¿æ¥ã€‚</p></li><li><p>ä¸€æ—¦è¿æ¥å»ºç«‹ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å¯ä»¥åœ¨ä»»ä½•æ—¶å€™é€šè¿‡å‘é€æ¶ˆæ¯è¿›è¡ŒåŒå‘é€šä¿¡ã€‚</p></li><li><p>è¿æ¥ä¿æŒæ‰“å¼€çŠ¶æ€ï¼Œç›´åˆ°å…¶ä¸­ä¸€æ–¹æ˜¾å¼å…³é—­è¿æ¥ã€‚</p></li></ul><h4 id="ä¼˜ç‚¹-1"><a href="#ä¼˜ç‚¹-1" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h4><ul><li><p>å®æ—¶æ€§å’Œæ•ˆç‡é«˜ï¼šç”±äº <code>WebSocket</code> å»ºç«‹ä¸€æ¬¡è¿æ¥åå°±ä¿æŒæ‰“å¼€çŠ¶æ€ï¼Œå¯ä»¥å®æ—¶åœ°åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ é€’æ•°æ®ï¼Œå‡å°‘äº†é¢å¤–çš„è¿æ¥å»ºç«‹å’Œ <code>HTTP</code> å¤´ä¿¡æ¯çš„å¼€é”€ã€‚</p></li><li><p>åŒå‘é€šä¿¡ï¼šæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´å¯ä»¥å®ç°åŒå‘å®æ—¶é€šä¿¡ã€‚</p></li></ul><h4 id="ç¼ºç‚¹-1"><a href="#ç¼ºç‚¹-1" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h4><ul><li><p>å®ç°å¤æ‚ä¸€äº›ï¼šç›¸å¯¹äº <code>SSEï¼ŒWebSocket</code> çš„å®ç°å¯èƒ½éœ€è¦ä¸€äº›é¢å¤–çš„ç¼–ç¨‹å·¥ä½œã€‚</p></li><li><p>å…¼å®¹æ€§é—®é¢˜ï¼šè™½ç„¶ç°ä»£æµè§ˆå™¨æ™®éæ”¯æŒ <code>WebSocket</code>ï¼Œä½†åœ¨ä¸€äº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œå¯èƒ½éœ€è¦å¤„ç†ä¸€äº›å…¼å®¹æ€§é—®é¢˜ã€‚</p></li></ul><h4 id="API-1"><a href="#API-1" class="headerlink" title="API"></a><code>API</code></h4><h5 id="WebSocket-å®ä¾‹å¯¹è±¡"><a href="#WebSocket-å®ä¾‹å¯¹è±¡" class="headerlink" title="WebSocket å®ä¾‹å¯¹è±¡"></a><code>WebSocket</code> å®ä¾‹å¯¹è±¡</h5><p><code>WebSocket</code> å¯¹è±¡ä½œä¸ºä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨äºæ–°å»º <code>WebSocket</code> å®ä¾‹ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// æ‰§è¡Œè¯­å¥ä¹‹åï¼Œå®¢æˆ·ç«¯å°±ä¼šä¸æœåŠ¡å™¨è¿›è¡Œè¿æ¥ã€‚</span><span class="token keyword">const</span> ws <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebSocket</span><span class="token punctuation">(</span><span class="token string">'ws://localhost:8080'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h5 id=""><a href="#" class="headerlink" title=""></a></h5><p>å±æ€§</p><h6 id="readyState-1"><a href="#readyState-1" class="headerlink" title="readyState"></a><code>readyState</code></h6><p>å±æ€§è¿”å›å®ä¾‹å¯¹è±¡çš„å½“å‰çŠ¶æ€ï¼Œå…±æœ‰å››ç§ã€‚</p><ul><li><p><code>0</code>ï¼š<code>CONNECTING</code>ï¼Œè¡¨ç¤ºæ­£åœ¨è¿æ¥ã€‚</p></li><li><p><code>1</code>ï¼š<code>OPEN</code>ï¼Œè¡¨ç¤ºè¿æ¥æˆåŠŸï¼Œå¯ä»¥é€šä¿¡äº†ã€‚</p></li><li><p><code>2</code>ï¼š<code>CLOSING</code>ï¼Œè¡¨ç¤ºè¿æ¥æ­£åœ¨å…³é—­ã€‚</p></li><li><p><code>3</code>ï¼š<code>CLOSED</code>ï¼Œè¡¨ç¤ºè¿æ¥å·²ç»å…³é—­ï¼Œæˆ–è€…æ‰“å¼€è¿æ¥å¤±è´¥ã€‚</p></li></ul><h6 id="onopen-å’Œ-oncloseã€-onerror"><a href="#onopen-å’Œ-oncloseã€-onerror" class="headerlink" title="onopen å’Œ oncloseã€ onerror"></a><code>onopen</code> å’Œ <code>onclose</code>ã€ <code>onerror</code></h6><p>æŒ‡å®šè¿æ¥æˆåŠŸåå’Œè¿æ¥å…³é—­åã€æŠ¥é”™æ—¶çš„å›è°ƒå‡½æ•°ã€‚ç”¨æ³•åŒä¸Š</p><h6 id="onmessage-1"><a href="#onmessage-1" class="headerlink" title="onmessage"></a><code>onmessage</code></h6><p>ç”¨äºæŒ‡å®šæ”¶åˆ°æœåŠ¡å™¨æ•°æ®åçš„å›è°ƒå‡½æ•°</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript">ws<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> data <span class="token operator">=</span> event<span class="token punctuation">.</span>data<span class="token punctuation">;</span>  <span class="token comment">// å¤„ç†æ•°æ®</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>ws<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> data <span class="token operator">=</span> event<span class="token punctuation">.</span>data<span class="token punctuation">;</span>  <span class="token comment">// å¤„ç†æ•°æ®</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>æœåŠ¡å™¨æ•°æ®å¯èƒ½æ˜¯æ–‡æœ¬ï¼Œä¹Ÿå¯èƒ½æ˜¯äºŒè¿›åˆ¶æ•°æ®ï¼ˆ<code>blob</code> å¯¹è±¡æˆ– <code>arraybuffer</code> å¯¹è±¡ï¼‰</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// æ”¶åˆ°çš„æ˜¯ blob æ•°æ®</span>ws<span class="token punctuation">.</span>binaryType <span class="token operator">=</span> <span class="token string">'blob'</span><span class="token punctuation">;</span>ws<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">// æ”¶åˆ°çš„æ˜¯ ArrayBuffer æ•°æ®</span>ws<span class="token punctuation">.</span>binaryType <span class="token operator">=</span> <span class="token string">'arraybuffer'</span><span class="token punctuation">;</span>ws<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">.</span>byteLength<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><h6 id="bufferedAmount"><a href="#bufferedAmount" class="headerlink" title="bufferedAmount"></a><code>bufferedAmount</code></h6><p>è¡¨ç¤ºè¿˜æœ‰å¤šå°‘å­—èŠ‚çš„äºŒè¿›åˆ¶æ•°æ®æ²¡æœ‰å‘é€å‡ºå»ã€‚å®ƒå¯ä»¥ç”¨æ¥åˆ¤æ–­å‘é€æ˜¯å¦ç»“æŸã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayBuffer</span><span class="token punctuation">(</span><span class="token number">10000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>socket<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>socket<span class="token punctuation">.</span>bufferedAmount <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// å‘é€å®Œæ¯•</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// å‘é€è¿˜æ²¡ç»“æŸ</span><span class="token punctuation">&#125;</span></code></pre><h6 id="WebSocket-å®ä¾‹å¯¹è±¡æ–¹æ³•-send"><a href="#WebSocket-å®ä¾‹å¯¹è±¡æ–¹æ³•-send" class="headerlink" title="WebSocket å®ä¾‹å¯¹è±¡æ–¹æ³• send"></a><code>WebSocket</code> å®ä¾‹å¯¹è±¡æ–¹æ³• <code>send</code></h6><p>ç”¨äºå‘æœåŠ¡å™¨å‘é€æ•°æ®ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// å‘é€æ–‡æœ¬</span>ws<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'your message'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// å‘é€ Blob</span><span class="token keyword">const</span> file <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'input[type="file"]'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>ws<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// å‘é€ ArrayBuffer</span><span class="token keyword">const</span> img <span class="token operator">=</span> canvas_context<span class="token punctuation">.</span><span class="token function">getImageData</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">320</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> binary <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>img<span class="token punctuation">.</span>data<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> img<span class="token punctuation">.</span>data<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  binary<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> img<span class="token punctuation">.</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>ws<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>binary<span class="token punctuation">.</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="SSE-å’Œ-WebSocket-çš„åŒºåˆ«"><a href="#SSE-å’Œ-WebSocket-çš„åŒºåˆ«" class="headerlink" title="SSE å’Œ WebSocket çš„åŒºåˆ«?"></a><code>SSE</code> å’Œ <code>WebSocket</code> çš„åŒºåˆ«?</h3><ul><li><p><code>SSE</code> ä½¿ç”¨ <code>HTTP</code> åè®®ï¼Œç°æœ‰çš„æœåŠ¡å™¨è½¯ä»¶éƒ½æ”¯æŒã€‚<code>WebSocket</code> æ˜¯ä¸€ä¸ªç‹¬ç«‹åè®®ã€‚</p></li><li><p><code>SSE</code> æ˜¯å•å·¥é€šä¿¡ï¼Œåªèƒ½æœåŠ¡å™¨å‘æµè§ˆå™¨æ¨é€ï¼Œ<code>WebSocket</code> æ˜¯åŒå‘é€šä¿¡ã€‚</p></li><li><p><code>SSE</code> å±äºè½»é‡çº§ï¼Œä½¿ç”¨ç®€å•ï¼›<code>WebSocket</code> åè®®ç›¸å¯¹å¤æ‚ã€‚</p></li><li><p><code>SSE</code> é»˜è®¤æ”¯æŒæ–­çº¿é‡è¿ï¼Œ<code>WebSocket</code> éœ€è¦è‡ªå·±å®ç°ã€‚</p></li><li><p><code>SSE</code> ä¸€èˆ¬åªç”¨æ¥ä¼ é€æ–‡æœ¬ï¼ŒäºŒè¿›åˆ¶æ•°æ®éœ€è¦ç¼–ç åä¼ é€ï¼Œ<code>WebSocket</code> é»˜è®¤æ”¯æŒä¼ é€äºŒè¿›åˆ¶æ•°æ®ã€‚</p></li><li><p><code>SSE</code> æ”¯æŒè‡ªå®šä¹‰å‘é€çš„æ¶ˆæ¯ç±»å‹ã€‚</p></li></ul><h3 id="ä½¿ç”¨ç¤ºä¾‹"><a href="#ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="ä½¿ç”¨ç¤ºä¾‹"></a>ä½¿ç”¨ç¤ºä¾‹</h3><h4 id="SSE-ä¼˜åŒ–ç™»å½•çŠ¶æ€å¿ƒè·³æ£€æµ‹"><a href="#SSE-ä¼˜åŒ–ç™»å½•çŠ¶æ€å¿ƒè·³æ£€æµ‹" class="headerlink" title="SSE ä¼˜åŒ–ç™»å½•çŠ¶æ€å¿ƒè·³æ£€æµ‹"></a><code>SSE</code> ä¼˜åŒ–ç™»å½•çŠ¶æ€å¿ƒè·³æ£€æµ‹</h4><p><code>client</code> å®ç°ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">checkingLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  sseChecker<span class="token punctuation">.</span>value<span class="token operator">?.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  sseChecker<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventSource</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/authorize/session-auth-status</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>  sseChecker<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">message</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ev<span class="token operator">:</span> MessageEvent<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>ev<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token keyword">as</span> SessionStatusResponse<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">401</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Detected session token expired'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      sseChecker<span class="token punctuation">.</span>value<span class="token operator">?.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      unauthorized<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>      <span class="token keyword">await</span> MessageBox<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">'å½“å‰è´¦å·å·²åœ¨åˆ«å¤„ç™»å½•ï¼Œæ˜¯å¦é‡æ–°ç™»å½•ï¼Ÿ'</span><span class="token punctuation">,</span> <span class="token string">'æç¤º'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>        showClose<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>        showCancelButton<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>        cancelButtonText<span class="token operator">:</span> <span class="token string">'é€€å‡º'</span><span class="token punctuation">,</span>        type<span class="token operator">:</span> <span class="token string">'warning'</span><span class="token punctuation">,</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">'/authorize/logout'</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>åŸºäº <code>nestJs</code> çš„ <code>server</code> å®ç°ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> Axios <span class="token keyword">from</span> <span class="token string">'axios'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> Observable <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'rxjs'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> Sse <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'@nestjs/common'</span><span class="token punctuation">;</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">Sse</span></span><span class="token punctuation">(</span><span class="token string">'session-auth-status'</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token function">checkSessionTokenStatus</span><span class="token punctuation">(</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Req</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> req<span class="token operator">:</span> Request<span class="token punctuation">,</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Res</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> res<span class="token operator">:</span> Response<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token operator">:</span> Observable<span class="token operator">&lt;</span>Partial<span class="token operator">&lt;</span>MessageEvent<span class="token operator">>></span> <span class="token punctuation">&#123;</span>  <span class="token comment">// å‡ºäºhttpè¿æ¥é—®é¢˜ï¼Œ sseè¿æ¥åœ¨5åˆ†é’Ÿåè‡ªåŠ¨æ–­å¼€</span>  <span class="token keyword">const</span> maxCheckDuration <span class="token operator">=</span> <span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">;</span>  <span class="token comment">// æ¯ä¸¤ç§’æ£€æŸ¥ä¸€æ¬¡</span>  <span class="token keyword">const</span> checkInterval <span class="token operator">=</span> <span class="token number">2000</span><span class="token punctuation">;</span>  <span class="token keyword">let</span> checkedCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token keyword">let</span> needDispose <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Observable<span class="token operator">&lt;</span>Partial<span class="token operator">&lt;</span>MessageEvent<span class="token operator">>></span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>sub<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> <span class="token function-variable function">doCheck</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>needDispose<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          checkedCount<span class="token operator">++</span><span class="token punctuation">;</span>          <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">></span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>            req<span class="token punctuation">.</span>session<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>              <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token keyword">const</span> token <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getAccessToken</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>session<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>token<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnauthorizedException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token punctuation">&#125;</span>          <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">AuthorizeService</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMeInfo</span><span class="token punctuation">(</span>token<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          sub<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>            data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>              message<span class="token operator">:</span> <span class="token string">'OK'</span><span class="token punctuation">,</span>              status<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>              payload<span class="token operator">:</span> res<span class="token punctuation">.</span>data<span class="token punctuation">,</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token comment">// æ§åˆ¶å‰ç«¯æ–­å¼€åé‡è¿é—´éš”æ—¶æœº</span>            retry<span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span>          <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token keyword">await</span> <span class="token function">delayMs</span><span class="token punctuation">(</span>checkInterval<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token string">'failed to do check'</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>Axios<span class="token punctuation">.</span><span class="token function">isAxiosError</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          message <span class="token operator">=</span> <span class="token string">'Token is expired'</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>err <span class="token keyword">instanceof</span> <span class="token class-name">UnauthorizedException</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          message <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Got empty token</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        sub<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>          data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>            message<span class="token punctuation">,</span>            status<span class="token operator">:</span> <span class="token number">401</span><span class="token punctuation">,</span>          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>          retry<span class="token operator">:</span> Number<span class="token punctuation">.</span><span class="token constant">MAX_SAFE_INTEGER</span><span class="token punctuation">,</span><span class="token operator">~</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'failed to do check %o'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>        needDispose <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>needDispose <span class="token operator">||</span> checkedCount <span class="token operator">*</span> checkInterval <span class="token operator">>=</span> maxCheckDuration<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          sub<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token function">doCheck</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      needDispose <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="é—®é¢˜è®°å½•"><a href="#é—®é¢˜è®°å½•" class="headerlink" title="é—®é¢˜è®°å½•"></a>é—®é¢˜è®°å½•</h3><h4 id="è¿æ¥æ•°é™åˆ¶"><a href="#è¿æ¥æ•°é™åˆ¶" class="headerlink" title="è¿æ¥æ•°é™åˆ¶"></a>è¿æ¥æ•°é™åˆ¶</h4><p><code>SSE</code> åŸºäºå¸¸è§„çš„ <code>HTTP</code> è¿æ¥ï¼Œå—åˆ¶äºæµè§ˆå™¨å¯¹åŒä¸€åŸŸåä¸‹çš„å¹¶å‘è¿æ¥æ•°é™åˆ¶ï¼Œé€šå¸¸ä¸º 6-8ã€‚<strong>é”™è¯¯çš„ä½¿ç”¨ sseï¼Œä¸åŠæ—¶å…³é—­é€ æˆè¿æ¥æ•°è¶…å‡ºé™åˆ¶æ—¶ï¼Œæµè§ˆå™¨é¡µé¢ä¼šå¡é¡¿å¼‚å¸¸</strong></p><p><code>WebSocket</code> å»ºç«‹æŒä¹…åŒ–çš„å…¨åŒå·¥è¿æ¥ï¼Œé€šå¸¸ä¸å— HTTP è¿æ¥æ•°é™åˆ¶ï¼Œä½†æœåŠ¡å™¨å’Œæ“ä½œç³»ç»Ÿå¯èƒ½æœ‰è‡ªå·±çš„å¹¶å‘è¿æ¥æ•°é™åˆ¶ã€‚</p><blockquote><p>æ›´è¯¦ç»†çš„ <code>API</code> ä½¿ç”¨æ•™ç¨‹å‚è€ƒï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/EventSource">EventSource</a> ã€ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/WebSocket">WebSocket</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> ç½‘ç»œè¯·æ±‚ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œé€šä¿¡ </tag>
            
            <tag> SSE </tag>
            
            <tag> WebSocket </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æˆé•¿ï¼šä¸€æ¬¡è‡ªæˆ‘æ•‘èµ</title>
      <link href="/diary/self-redemption/"/>
      <url>/diary/self-redemption/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><blockquote><p>æ„Ÿæ€§çš„äººï¼Œå¾€å¾€æ‰æ˜¯èµ°ä¸å‡ºæ¥çš„é‚£ä¸ªã€‚</p></blockquote><p><code>å¾ˆé—æ†¾ï¼Œä»è®¤è¯†åˆ°ç»“æŸï¼Œæˆ‘ä»¬åªç”¨äº†ä¸åˆ°åŠå¹´æ—¶é—´ã€‚ä¹Ÿå¾ˆæ„Ÿæ¿€ï¼Œä½ è®©æˆ‘çœŸæ­£çš„åæ€äº†å¦‚ä½•å»çˆ±ä¸€ä¸ªäººã€‚</code></p><span id="more"></span><h3 id="è¿‡å¾€æ€»ç»“"><a href="#è¿‡å¾€æ€»ç»“" class="headerlink" title="è¿‡å¾€æ€»ç»“"></a>è¿‡å¾€æ€»ç»“</h3><p>ä»æœ€åˆç›¸è¯†åˆ°çƒ­æ‹å†åˆ°åŒçƒ¦åˆ†æ‰‹ï¼Œæ¥å¾—å¿«å»çš„ä¹Ÿå¿«ã€‚</p><p>æ— æ•°ä¸ªå¤œæ™šï¼Œæˆ‘éƒ½åœ¨é—®è‡ªå·±ï¼Œæˆ‘åˆ°åº•æœ‰è¢«æ·±çˆ±è¿‡å—ï¼Ÿæˆ‘æœ‰æ·±çˆ±è¿‡å¥¹å—ï¼Ÿ</p><p>ä¸ºäº†è¿½å¯»è¿™ä¸ªç­”æ¡ˆï¼Œæˆ‘ä»ç¿»é˜…èŠå¤©è®°å½•ï¼Œåˆ°èµ°éå…±åŒç»å†çš„åœ°æ–¹åœºæ™¯ï¼Œå›å¿†ç€æˆ‘ä»¬çš„è¿‡å¾€ã€‚</p><p>ä»èŠå¤©æœ€å¼€å§‹çš„å°å¿ƒç¿¼ç¿¼ï¼Œå†åˆ°å½¼æ­¤æš§æ˜§å¿ƒåŠ¨ï¼Œå½¼æ­¤è®¸ä¸‹æ‰¿è¯ºã€‚</p><p>å†åˆ°ç‰µæ‰‹æˆåŠŸï¼Œå¯¹è§é¢çš„æœŸå¾…ï¼Œå¯¹äº¤å¾€è¿‡ç¨‹ä¸­çš„ä»ªå¼æ„Ÿé‡è§†ã€‚</p><p>æœ€åæ˜¯åˆ†åˆ«æ—¶çš„æ‹æ‹ä¸èˆï¼Œä»¿ä½›éƒ½å°è¯ç€å½¼æ­¤çš„çœŸå¿ƒï¼Œå½¼æ­¤å¯¹çˆ±çš„çœŸè¯šã€‚</p><p>éšç€æ—¶é—´æµé€ï¼Œæ˜¯æ–°é²œæ„Ÿæ·¡å»å—ï¼Ÿè¿˜æ˜¯ä¸¤ä¸ªäººç»ˆäºæœ‰äº†ç¬¬ä¸€æ¬¡çŸ›ç›¾äº†ï¼Ÿ</p><p>æ„Ÿè§‰ä»é‚£æ—¶å€™å¼€å§‹ï¼Œå°±åŸ‹ä¸‹äº†åˆ†ç¦»çš„ç§å­ï¼Œæˆ‘ä¹Ÿæ²¡æƒ³åˆ°æˆ‘ä»¬çš„å…³ç³»æ˜¯å¦‚æ­¤çš„ä¸å ªä¸€å‡»ã€‚</p><p>æˆ‘é«˜ä¼°äº†ä½ å’Œæˆ‘èµ°ä¸‹å»çš„å†³å¿ƒï¼Œä½ ä¹Ÿä½ä¼°äº†æˆ‘åœ¨è¿™æ®µæ„Ÿæƒ…ä¸­çš„æŠ•å…¥ã€‚</p><p>ä¹Ÿæ­£æ˜¯é—¹è¿‡çŸ›ç›¾é‚£æ®µæ—¶é—´ï¼Œæˆ‘è§è¿‡äº†å¥¹çš„äº²äººï¼Œæˆ‘å°å¿ƒç¿¼ç¿¼çš„é¢å¯¹ï¼Œåªæƒ³èƒ½ç•™ä¸‹å¥½çš„å°è±¡ï¼Œæƒ³è®©ä»¥åæ­£å¼è§å®¶é•¿èƒ½æ›´åŠ é¡ºåˆ©ã€‚</p><hr><p>è¿™é‡Œæˆ‘ä¸å¾—ä¸è¯´ä¸€å£°æˆ‘çš„æƒ…å•†ï¼Œå¿½ç„¶ä¸åœ¨çº¿äº†ï¼Œç¬¬äºŒæ¬¡è§é¢çš„æ—¶å€™æ²¡æœ‰å¤„ç†å¥½ã€‚</p><p>è¿™åº”è¯¥ä¹Ÿç®—æ˜¯è®©å¥¹äº§ç”Ÿå‹åŠ›çš„ä¸€ä¸ªåŸå› å§ã€‚</p><p>ä»åé¢ä¸€æ¬¡å¶ç„¶æœºä¼šï¼Œå¥¹å®¶é‡Œäººç»™å¥¹ä»‹ç»å¯¹è±¡å°±å¯ä»¥çœ‹å‡ºæ¥ï¼Œå…¶å®åº”è¯¥æ˜¯ä¸æ»¡æ„äº†ã€‚</p><p>æˆ‘ä¸çŸ¥é“è¯¥æ€ä¹ˆè¡¥æ•‘ï¼Œæˆ‘å’Œå¥¹ä»é‚£æ—¶å€™å¼€å§‹ï¼Œæ„Ÿè§‰åˆ°å¥¹å·²ç»ä¸æ€ä¹ˆåœ¨è¿™æ®µæ„Ÿæƒ…ä¸­æŠ•å…¥äº†ã€‚</p><p>ä¹Ÿæ˜¯ä»é‚£æ®µæ—¶é—´å¼€å§‹ï¼Œæˆ‘æ„Ÿå—åˆ°äº†å¥¹è‹¥æœ‰è‹¥æ— çš„å¯¹æˆ‘ä¸æ»¡äº†ï¼ŒåŒæ—¶ä¹Ÿä¸å†å°†å°±æˆ‘çš„ä¸€äº›æ¯›ç—…äº†ã€‚</p><p>åé¢åˆšå¥½ä¹Ÿæ˜¯é‚£æ®µæ—¶é—´å¼€å§‹ï¼Œæˆ‘ä¿©å¼€å§‹åŒå±…äº†ï¼Œæ¯å¤©æŸ´ç±³æ²¹ç›è¿‡ç€å¹³æ·¡çš„ç”Ÿæ´»ã€‚</p><p>ç°åœ¨å›æƒ³ï¼Œæˆ‘ä¹Ÿæ˜¯åœ¨é‚£æ®µæ—¶é—´å¼€å§‹å˜å¾—æœ‰æƒæ— æäº†ï¼Œæ²¡ç»™å¥¹è¯¥æœ‰çš„æƒŠå–œã€‚</p><p>èŠ‚æ—¥æ²¡æœ‰ç»™åˆ°å¥¹è¯¥æœ‰çš„ç¤¼ç‰©ï¼Œè™½ç„¶æå‰æœ‰é€ï¼Œä½†å¹¶æ²¡æœ‰è¯´æ˜æ˜¯èŠ‚æ—¥ç¤¼ç‰©ã€‚</p><p>ä»˜å‡ºæ˜¯åŒå‘çš„ï¼Œä»é‚£ä»¥åï¼Œå¥¹ä¹Ÿæ²¡æœ‰ç»™è¿‡æˆ‘ä»»ä½•ä¸œè¥¿ï¼Œåœ¨äº¤å¾€ä¸­å¥¹ä¹Ÿä¼šç»å¸¸è¡¨ç°å‡ºåŒçƒ¦çš„æƒ…ç»ªï¼Œç”šè‡³æˆ‘å¯¹å¥¹ä¹Ÿæ˜¯ã€‚</p><p>ä¹Ÿæ€ªæˆ‘ï¼Œæ²¡æœ‰å³æ—¶çš„æ•æ‰åˆ°è¿™ä»½æ„Ÿæƒ…å±æœºï¼Œæ²¡èƒ½å³æ—¶çš„è¡¥æ•‘ã€‚</p><p>æˆ‘å¤©çœŸçš„ä»¥ä¸ºï¼Œæˆ‘å’Œå¥¹çš„æ„Ÿæƒ…æ…¢æ…¢çš„å˜æ·¡æ˜¯è¿›å…¥å¹³æ·¡æœŸäº†ã€‚</p><hr><p>åé¢çš„ä¸€æ¬¡å¯¼ç«ç´¢ï¼Œæˆ‘ä»¬å½»åº•é—¹æ°äº†ã€‚</p><p>åœ¨é—¹çŸ›ç›¾ä¹‹åï¼Œæˆ‘ä¸€ç›´åœ¨å°è¯•ç€é“æ­‰æŒ½å›ï¼Œæ”¾ä¸‹è‡ªå°Šå»è®¨å¥½ï¼Œå¯æ˜¯åé¦ˆå¹¶ä¸æ˜¯å¾ˆå¥½ã€‚</p><p>å¥¹å’Œåˆ«äººæ‰“æ¸¸æˆåˆ°æ·±å¤œï¼Œæˆ‘ä¸åšè¿‡å¤šçš„è¯„ä»·ï¼Œæœ‰å¯èƒ½æ˜¯å¥¹æƒ³æ”¾ä¸‹ï¼Œç—›è‹¦å¤±çœ ï¼Œæ‰€ä»¥æ‰¾äººæ‰“æ¸¸æˆè½¬ç§»æ³¨æ„åŠ›ä¹Ÿè¯´ä¸å®šã€‚</p><p>ä»å¥¹ç¦»å¼€çš„å†³å¿ƒï¼Œå¯¹æˆ‘çš„åŒçƒ¦å†·æ¼ ï¼Œæˆ‘å…¶å®ä¹Ÿèƒ½æƒ³åˆ°ï¼Œå¥¹çœŸçš„æ˜¯è¢«æˆ‘ä¼¤é€å¿ƒäº†ã€‚</p><hr><p>å‘å¾®æŒ½å›é‚£æ®µæ—¶é—´ï¼Œæˆ‘ç”šè‡³å·®ç‚¹ä¹Ÿä»¥ä¸ºæˆ‘æ˜¯ä¸ç”˜å¿ƒåœ¨ä½œç¥Ÿï¼Œä¸ç”˜å¿ƒå¤±å»ï¼Ÿä¸ç”˜å¿ƒè‡ªå·±çš„æ„Ÿæƒ…æŠ•å…¥ï¼Ÿè¿˜æ˜¯å®³æ€•å•èº«å­¤ç‹¬ï¼Ÿ</p><p>ä¸æ­¢æˆ‘è‡ªå·±åœ¨è¿½å¯»è¿™ä¸ªç­”æ¡ˆï¼ŒåŒæ—¶è¿™ä¹Ÿæ˜¯è¿‡æ¥äººé—®æˆ‘çš„é—®é¢˜ã€‚</p><p>æ‰€ä»¥æˆ‘å¼€å§‹é—®è‡ªå·±ï¼Œæˆ‘çœŸçš„å–œæ¬¢å—ï¼Ÿè¿˜æ˜¯è¯´çœŸçš„æ˜¯çˆ±å¥¹å—ï¼Ÿ</p><p>ç›´åˆ°ä»å¥¹åŒæ„æˆ‘å’Œå¥½çš„é‚£å¤©å¼€å§‹ï¼Œæˆ‘å¥½åƒæ…¢æ…¢æ‰¾åˆ°äº†ç­”æ¡ˆã€‚</p><p>æˆ‘ä¼šå› ä¸ºå’Œå¥½äº†è€Œå¼€å¿ƒé«˜å…´å¾ˆä¹…ï¼Œå¹¶ä¸ä¼šå› ä¸ºå¥¹çš„åŒæ„å’Œå¥½è€Œçªç„¶çš„å°±ä¹å‘³ã€‚</p><p>æˆ‘ä¼šå› ä¸ºå¥¹éš¾å—è€Œéš¾è¿‡ï¼Œæˆ‘ä¼šå› ä¸ºå¥¹å¼€å¿ƒè€Œé«˜å…´ï¼Œå“ªæ€•æ˜¯ç›®å‰å·²ç»åˆ†å¼€äº†ã€‚</p><p>è¿˜æ˜¯ä¼šå¿ƒç”˜æƒ…æ„¿çš„ä»˜å‡ºï¼Œè¿™åº”è¯¥ç®—æ˜¯çˆ±å§ï¼Ÿ</p><hr><p>æˆ‘å¬è¿‡ä¸€ä¸ªæ•™æˆå…³äºå–œæ¬¢å’Œçˆ±çš„å®šä¹‰ï¼šçˆ±æ˜¯æ’å¥¹æ€§å’Œå…±äº«æ€§ã€‚</p><p>æ’å¥¹å°±æ˜¯å’Œå¥¹ç›¸å¤„çš„æ—¶å€™ä¸å–œæ¬¢æœ‰åˆ«çš„æœ‹å‹æºæ‚è¿›æ¥ï¼Œæ¯”å¦‚åƒé¥­ï¼Ÿç©è€ï¼Ÿ</p><p>å…±äº«å°±æ˜¯åœ¨æœ€é»‘æš—å’Œæœ€å­¤ç‹¬çš„æ—¶å€™ï¼Œæˆ‘ç¬¬ä¸€ä¸ªæƒ³åˆ°çš„äººï¼Œå°±æ˜¯å¥¹ã€‚æˆ‘çœ‹åˆ°ç¾æ™¯ç¬¬ä¸€æ—¶é—´æƒ³åˆ°çš„ä¹Ÿæ˜¯å’Œå¥¹åˆ†äº«ã€‚</p><p>å–œæ¬¢æ˜¯å æœ‰ï¼Œçˆ±æ˜¯æˆå°±ï¼Œæˆ‘æƒ³æœ€å¼€å§‹æˆ‘åº”è¯¥æ˜¯å–œæ¬¢å§ï¼Œå æœ‰æ¬²å¼ºï¼Œçˆ±åƒé†‹ï¼Œå–œæ¬¢åˆ°æè‡´äº†ã€‚</p><p>å¤±å»åæ‰æ‡‚å¾—çæƒœï¼Œæ‰æ‡‚å¾—å¥¹å¯¹æˆ‘çš„å¥½ï¼Œè™½ç„¶æˆ‘åŒæ ·çš„ä»˜å‡ºäº†çœŸå¿ƒï¼Œä½†æ˜¯æœ€åé‚£æ®µæ—¥å­ï¼Œæˆ‘ç¡®å®æ˜¯æ²¡ç…§é¡¾å¥½å¥¹ã€‚</p><p>ç°åœ¨æˆ‘å¯¹å¥¹çš„æ„Ÿè§‰æ›´å¤šçš„æ˜¯çˆ±å§ï¼Œæ—¢ç„¶ä¸èƒ½åœ¨ä¸€èµ·äº†ï¼Œæˆ‘æƒ³çš„æ˜¯å¸Œæœ›å¥¹ä»¥åå˜å¾—æ›´å¥½ï¼Œæ›´ä¼˜ç§€ï¼Œå¯ä»¥å¹¸ç¦ã€‚</p><p>æˆ‘ç”šè‡³é—®è¿‡è‡ªå·±ï¼šå‡å¦‚å“ªå¤©å¥¹ç”Ÿé‡ç—…äº†ï¼Œéœ€è¦æˆ‘èŠ±è´¹æ‰€æœ‰ç§¯è“„å»åŒ»æ²»ï¼Œæˆ‘åº”è¯¥ä¸ä¼šçŠ¹è±«å§ã€‚</p><p>æˆ‘ä¸åœ¨æ„å¥¹çš„å¤–è¡¨å˜æˆä»€ä¹ˆæ ·ï¼Œä¸åœ¨æ„å¥¹çš„æ€§æ ¼ï¼Œç”šè‡³ä¸åœ¨æ„å¥¹æ›¾ç»å¯¹æˆ‘çš„<code>pua</code>çš„è¡Œä¸ºã€‚</p><p>å°½ç®¡ä¸æ–­åœ°è­¦é†’è‡ªå·±ï¼Œé¿å…ä»¥åå†çŠ¯åŒæ ·çš„é”™ï¼Œç°åœ¨æƒ³èµ·æ¥ï¼Œå¿ƒè¿˜æ˜¯ä¼šæŠ½æŠ½çš„ç–¼â€¦</p><hr><p>æˆ‘ä¸çŸ¥é“æ€ä¹ˆå¤„ç†è¿™æ®µå…³ç³»äº†ï¼Œä¹Ÿæ­£å¦‚å¥¹ä¸çŸ¥é“æ€ä¹ˆå›åº”æˆ‘ä¸€æ ·ï¼Œå¥¹ä¹Ÿä¸çŸ¥é“æ€ä¹ˆé¢å¯¹æˆ‘äº†ã€‚</p><p>æˆ‘çš„è§†è§’ä¸‹ï¼Œå¥¹å¦‚æ­¤å†·æ¼ æ— æƒ…ï¼Œå¯¹æˆ‘ç”šè‡³æ˜¯åŒçƒ¦ï¼Œä½†æ˜¯å¥¹æ²¡æœ‰æ‹‰é»‘åˆ é™¤ï¼Œä¹Ÿæ²¡æœ‰ç›´æ¥å›ç»æˆ‘ã€‚</p><p>æˆ‘æƒ³å¥¹åº”è¯¥æ˜¯è¢«æˆ‘ä¼¤å¾—å¤ªæ·±ï¼Œçº ç¼ çš„å¤ªçƒ¦å¯¼è‡´çš„å§â€¦</p><p>ä¹Ÿå¦‚åŒåé¢è¿™æ®µæ—¶é—´å¥¹æ„Ÿå—ä¸åˆ°çˆ±äº†ä¸€æ ·ï¼Œå¯¹æˆ‘ç”šè‡³æ˜¯æ— æ„Ÿäº†ã€‚</p><p>æˆ‘å¥½åƒæœ‰äº›å¤±è´¥ï¼ŒçœŸå¿ƒå¯¹å¾…çš„ä¸€æ®µæ„Ÿæƒ…å°±è¿™æ ·æç ¸äº†ã€‚</p><p>æœ‰äº›ä»¥è‡ªæˆ‘ä¸ºä¸­å¿ƒï¼Œæ²¡æœ‰å¼„æ¸…æ¥šå¥¹æƒ³è¦çš„çˆ±æƒ…æ˜¯æ€æ ·çš„äº†ï¼Œä¸€ç›´éƒ½æ˜¯æŒ‰ç…§æˆ‘çš„æ¨¡å¼å»ç»è¥çš„è¿™æ®µæ„Ÿæƒ…ã€‚</p><hr><h3 id="æˆ‘çš„è§†è§’"><a href="#æˆ‘çš„è§†è§’" class="headerlink" title="æˆ‘çš„è§†è§’"></a>æˆ‘çš„è§†è§’</h3><p>æˆ‘èƒ½å¤Ÿæ„Ÿå—åˆ°å¥¹å¯¹æˆ‘çš„çœŸå¿ƒï¼Œå¥¹ä¸€å¼€å§‹çš„ä¸¤ä¸ªæœˆï¼Œå…¶å®éƒ½æ˜¯å…¨èº«å¿ƒçš„æŠ•å…¥åˆ°äº†è¿™æ®µæ„Ÿæƒ…é‡Œã€‚</p><p>å¥¹çˆ±æˆ‘çˆ±çš„çœŸåˆ‡ï¼Œæˆ‘å›åº”ä¹Ÿå¾ˆçƒ­çƒˆã€‚</p><p>åé¢ä¸¤ä¸ªäººå› ä¸ºçŸ›ç›¾å’Œçº çº·ï¼Œè®©æˆ‘ä»¬çš„çˆ±æ„è¢«æ¶ˆç£¨äº†ã€‚</p><p>ä¹Ÿæ­£æ˜¯é‚£æ®µæ—¶é—´çš„å¹³æ·¡ç›¸å¤„ï¼Œç”Ÿæ´»ç¼ºä¹æƒŠå–œï¼Œä¸€åº¦è®©å¥¹è®¤ä¸ºæˆ‘ä»¬æ˜¯åœ¨æ­ä¼™è¿‡æ—¥å­ã€‚</p><p>ç„¶åæˆ‘ä¸€ç³»åˆ—çš„æ²¡æœ‰è¾¾åˆ°ä»–çš„å¿ƒé‡Œé¢„æœŸï¼Œè®©å¥¹äº§ç”Ÿå¤±æœ›çš„æƒ…ç»ªã€‚</p><p>å„ç§å‹åŠ›ä¸‹ï¼Œè®©å¥¹æƒ³è¦æŠ½ç¦»è¿™æ®µæ„Ÿæƒ…äº†ã€‚</p><p>å¥¹ä¸»åŠ¨æŠ½ç¦»çš„æ—¶å€™ï¼Œåˆè¢«æˆ‘å„ç§æŒ½ç•™å„ç§å°ä½œæ–‡ï¼Œä¸Šé—¨æ‰¾å¥¹ï¼Œå¥¹å¿ƒé‡Œè™½ç„¶ä¼šçƒ¦ï¼Œä½†åº”è¯¥æ˜¯èƒ½å¤Ÿæ„Ÿå—å¾—åˆ°æˆ‘æ˜¯åœ¨æ„å¥¹çš„å§ã€‚</p><p>åé¢å°±æ˜¯å¥¹é™·å…¥çº ç»“çš„æƒ…ç»ªï¼Œæƒ³å’Œç»§ç»­æˆ‘åœ¨ä¸€èµ·ï¼Œåˆä¸æƒ³è½»æ˜“åŸè°…ï¼Œåˆå„ç§å‹åŠ›ä¸‹æƒ³ç¦»å¼€ï¼Ÿ</p><p>ä¹Ÿå°±æ˜¯å¥¹æƒ³é™é™çš„é‚£æ®µæ—¶é—´äº†ï¼Œé‚£æ®µæ—¶é—´æˆ‘ä¸€ç›´åœ¨æŒ½å›ï¼Œä¸€ç›´åœ¨è®¨å¥½ï¼Œé€ç¤¼ç‰©ï¼Ÿä¸Šé—¨æ‰¾å¥¹ï¼Ÿå¥½åƒæ•ˆæœéƒ½ä¸æ€ä¹ˆå¥½ï¼Ÿ</p><p>æ¢åšæ˜¯æˆ‘ï¼Œåº”è¯¥ä¹Ÿæ˜¯ä¸æƒ³è¢«æ‰“æ‰°ç„¶åå¾ˆçƒ¦å§ï¼Ÿ</p><hr><p>ç„¶åå°±æ˜¯çŸ­æš‚çš„å’Œå¥½äº†ï¼Œæ„Ÿè§‰å¥¹æ²¡æœ‰åšå¥½ç»§ç»­çš„å‡†å¤‡ï¼Ÿæ€»ä¹‹æ„Ÿè§‰ä¸¤ä¸ªäººå¿ƒé‡Œéƒ½å µç€ä¸€è‚¡æ°”æ²¡æ’å‡ºå»ã€‚</p><p>å†ä¹‹åä¸çŸ¥é“æ˜¯å¥¹çœŸçš„è§‰å¾—æ²¡ä»€ä¹ˆï¼Ÿè¿˜æ˜¯æœ‰æ„çš„é¢„è°‹ï¼Ÿè¿˜æ˜¯æˆ‘çœŸçš„è¯¯ä¼šå¥¹äº†ï¼Œé‚£å¤©å› ä¸ºæˆ‘è‡ªè®¤ä¸ºçš„ç¬¬ä¸‰è€…ï¼Œæˆ‘æ„Ÿè§‰è¢«æ— ç¼è¡”æ¥äº†ï¼Œä¸€æ°”ä¹‹ä¸‹æäº†åˆ†æ‰‹ã€‚</p><p>å†ç„¶åï¼Œæˆ‘è®¤çœŸçš„è€ƒè™‘äº†å¥¹çš„å“æ€§å’Œè¿‡å¾€ç›¸å¤„ç»™æˆ‘çš„æ„Ÿè§‰ï¼Œæˆ‘è§‰å¾—è¿˜æ˜¯æˆ‘è¯¯ä¼šå¥¹äº†ï¼Œæˆ‘å¾€å¥½çš„æ–¹å‘æƒ³ï¼Œæˆ‘ä¹Ÿè¿˜æ˜¯å¾ˆçˆ±å¥¹ï¼Œç„¶åæˆ‘å¼€å§‹äº†æˆ‘çš„çº ç¼ æŒ½å›ä¹‹è·¯ã€‚</p><p>ç»è¿‡äº†æ²¡é£Ÿæ¬²æ—¥å¤œéš¾å¯çš„æ—¶å…‰ï¼Œæˆ‘æ¥å—äº†åˆ†æ‰‹çš„äº‹å®ï¼Œå·®ç‚¹äººé€åŒ»é™¢å»äº†ï¼Œæˆ‘ä¹Ÿæ…¢æ…¢æƒ…ç»ªç¨³å®šäº†ï¼Œå¥¹ä¹Ÿä¼šæ…¢æ…¢çš„å’Œæˆ‘è¯´è¯äº†ï¼Œå°½ç®¡è¿˜æ˜¯å¿½å†·å¿½çƒ­çš„ã€‚</p><p>å†åé¢ä¸€æ¬¡å¶ç„¶çš„æœºä¼šä¸‹å¤åˆäº†ï¼Œæ˜¯æˆ‘ä¸»åŠ¨æçš„ï¼Œå¥¹çŠ¹çŠ¹è±«è±«çš„åŒæ„äº†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¥¹å…¶å®è¿˜æ²¡è€ƒè™‘å¥½ï¼Œåˆæˆ–è€…çªç„¶é—´è¢«æˆ‘æ„ŸåŠ¨åˆ°äº†ï¼Œå†æˆ–è€…åªæ˜¯ç»™æˆ‘ä¸€ä¸ªè¡¨ç°çš„æœºä¼šã€‚</p><p>åé¢å¥¹è¿ç€ä¸€å‘¨æ¢äº†ä¸¤æ¬¡æƒ…ä¾£å¤´åƒï¼Œæˆ‘ä¸æ¸…æ¥šå¥¹æ˜¯ä¸€ä¸ªäººç”¨è¿˜æ˜¯å’Œåˆ«äººç”¨ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰é—®ï¼Œæˆ‘æƒ³ä¸‡ä¸€æ˜¯å¥¹è€ƒå¯Ÿæˆ‘çš„æ€åº¦å‘¢ï¼Ÿ</p><p>ä¸€ç›´æŒç»­äº†åå¤šå¤©ï¼Œå› ä¸ºæ˜¯æˆ‘çš„ä¸»åŠ¨å‘å¾®æŒ½å›ï¼Œé€ å°±äº†æˆ‘çš„ä½ä½ï¼Œå¥¹å¼€å§‹å˜å¾—æ— æ‰€è°“äº†ã€‚è‡ªä»å’Œå¥½åæ™šä¸Šä¹Ÿä¸ä¼šå’Œæˆ‘è§†é¢‘å’Œè¯­éŸ³äº†ï¼Œä¹Ÿä¸ä¼šå’Œæˆ‘åˆ†äº«æ—¥å¸¸ï¼Œå›æ¶ˆæ¯ä¹Ÿå¾ˆæ•·è¡å†·æ·¡ã€‚</p><p>æˆ‘æ¥å—ä¸äº†è¿™ç§æ–¹å¼çš„å’Œå¥½ï¼Œæˆ‘å¾ˆéš¾å—ï¼Œä½†åˆä¸æ•¢å¤ªè¿‡åˆ†ä¸»åŠ¨ï¼Œæ¯æ¬¡è¡¨ç°çš„è¿‡äºä¸»åŠ¨å¥¹å°±çƒ¦ï¼Œæˆ‘å·²ç»æ¡ä»¶åå°„çš„ä¸æ•¢è¿èƒŒå¥¹çš„æ„æ„¿äº†ï¼Œæˆ‘å¾ˆå‹æŠ‘ï¼Œè¿™ç§å¯¹æˆ‘æ¥è¯´åƒæ˜¯æ–½èˆçš„çˆ±ã€‚</p><p>åˆšå¥½æœ‰å¤©æ™šä¸Šå¥¹è¯´é‹ç©¿ç€è„šç—›ï¼Œæˆ‘ç»™å¥¹é€å¥¹çš„è¿åŠ¨é‹ä¸Šé—¨æ‰¾å¥¹äº†ã€‚ä½†æ˜¯æ²¡æœ‰ç»™å¥¹å›å¾®ä¿¡æ¶ˆæ¯ï¼Œæˆ‘æƒ³ç»™å¥¹ä¸€ä¸ªæƒŠå–œã€‚</p><p>æˆ‘æ²¡æƒ³åˆ°ï¼Œæ²¡æœ‰æƒ³è±¡ä¸­çš„å¥¹è¢«æ„ŸåŠ¨çš„ç”»é¢ï¼Œæˆ‘æƒ³è¯•ç€å’Œå¥¹å†æ²Ÿé€šæ²Ÿé€šï¼Œå¥¹æ‹’ç»äº†ï¼Œæˆ‘åˆä¸ç”˜å¿ƒæˆ‘ä»¬å°±è¿™æ ·å½¼æ­¤æ¶ˆè€—æ„Ÿæƒ…ï¼Œå°±åˆç»™å¥¹æ‰“å¾®ä¿¡ç”µè¯äº†ï¼Œå¥¹æ›´åŠ çš„åŒçƒ¦äº†ï¼Œå¯¹æˆ‘è¯´äº†äº›éš¾å¬çš„è¯ã€‚</p><p>ç„¶åå°±æ˜¯æˆ‘å—ä¸äº†çš„æƒ…å†µä¸‹åˆè¯´å‡ºç¥å¥¹å¹¸ç¦çš„è¯ï¼Œè¯´ç»™å¥¹å¯„äº†åœ¨æˆ‘è¿™çš„æ‰€æœ‰ä¸œè¥¿ã€‚<del>æ—¢ç„¶èˆä¸å¾—ä¸ºä»€ä¹ˆåˆè¦è¯´è¿™äº›æ°”è¯å‘¢</del></p><p>å¥½æœ‹å‹å¤„äºå…³å¿ƒé—®æˆ‘ï¼Œå¾—çŸ¥æˆ‘åˆ†æ‰‹äº†è¿˜åœ¨çº ç¼ ï¼Œå«æˆ‘æ”¾å¼ƒï¼Œå¯åªæœ‰æˆ‘è‡ªå·±çŸ¥é“å¥¹åœ¨æˆ‘å¿ƒé‡Œçš„åˆ†é‡ï¼Œæ—©å°±å’Œå®¶äººæ²¡å•¥åŒºåˆ«äº†ã€‚</p><p>ä¸€åˆ‡çš„ä¸€åˆ‡å°±è¿™æ ·å‘ç”Ÿç€ï¼Œç°åœ¨ä¹Ÿå°±è”ç³»æ–¹å¼è¿˜ä¿å­˜ç€ï¼Œå¥¹ä¹Ÿä¸å†å›å¤æˆ‘çš„ä»»ä½•æ¶ˆæ¯äº†ï¼Œä¸¤ä¸ªäººå°±åƒæ˜¯æœ€ç†Ÿæ‚‰çš„é™Œç”Ÿäººã€‚</p><p>æˆ‘ç°åœ¨åœ¨å¥¹çœ¼é‡Œåº”è¯¥æ˜¯æ¯«æ— å¸å¼•åŠ›äº†å§ï¼Œæœ‰çš„è¯å¯èƒ½ä¹Ÿåªæ˜¯å‰©ä¸‹çš„ä¸€ç‚¹ç‚¹æ›¾ç»åœ¨ä¸€èµ·è¿‡çš„ç•™æ‹ã€‚</p><h3 id="å°†å¿ƒæ¯”å¿ƒ"><a href="#å°†å¿ƒæ¯”å¿ƒ" class="headerlink" title="å°†å¿ƒæ¯”å¿ƒ"></a>å°†å¿ƒæ¯”å¿ƒ</h3><p>åšä»»ä½•äº‹æƒ…ï¼Œéƒ½åº”è¯¥è°‹å®šè€ŒååŠ¨ï¼Œæ—¢ç„¶åˆ†æ‰‹æ˜¯å¥¹çš„é€‰æ‹©ï¼Œé‚£å°±ä¸€å®šæœ‰å¥¹çš„é“ç†ã€‚</p><p>å¯èƒ½æ˜¯æˆ‘æ— æ­¢å¢ƒçš„çº ç¼ ä¸€æ­¥æ­¥æ¨è¿œäº†å¥¹ï¼Œå¥¹ä¹Ÿè¿˜ä¿ç•™æœ‰çˆ±æ„ã€‚</p><p>åªä¸è¿‡å¥¹è§‰å¾—å’Œæˆ‘ç›¸å¤„å¤ªç´¯äº†ï¼Œå› ä¸ºæˆ‘çš„ä¸€äº›å°ä½œæ–‡ï¼Œä¸€äº›æœ‰çš„æ²¡çš„ï¼Œè®©å¥¹è§‰å¾—å¾ˆå¹¼ç¨šã€‚</p><p>å¤åˆæ²¡æœ‰è¿™ä¹ˆç®€å•ï¼Œæ—¢ç„¶æ˜¯æˆ‘æ±‚å›æ¥çš„ï¼Œé‚£å¥¹å°±è‡ªç„¶å¿ƒé‡Œè¿˜æ˜¯ä¼šæœ‰èŠ¥è’‚ã€‚</p><p>å¯èƒ½ä¹Ÿæ›¾åæ‚”ï¼Œä½†åŸºäºç­”åº”äº†æˆ‘å’Œå¥½ï¼Œæ‰€ä»¥é€‰æ‹©èµ°ä¸€æ­¥çœ‹ä¸€æ­¥ï¼Œçœ‹æˆ‘åç»­çš„è¡¨ç°å†å†³å®šç»§ä¸ç»§ç»­ã€‚</p><p>è¿™ä¸ªæœŸé—´å¥¹ä¹Ÿæ›¾ç»™æˆ‘è¿‡æœºä¼šï¼Œå› ä¸ºè¿˜æœ‰äº›èŠ¥è’‚ï¼Œæ‰€ä»¥å†·æ·¡ï¼Œä½†å› ä¸ºæˆ‘æ€¥åˆ‡çš„æƒ³è¦å…³ç³»å›åˆ°æœ€åˆï¼Œè¢«æˆ‘æç ¸äº†ã€‚</p><p>æ‰€ä»¥å¥¹é€‰æ‹©äº†é€ƒé¿ï¼Œé€‰æ‹©äº†é¿è€Œä¸è§ï¼Œé€‰æ‹©è®©æˆ‘è‡ªå·±å¾’åŠ³è€Œæ”¾å¼ƒï¼Œé€‰æ‹©æ¼ è§†ã€‚</p><p>å¥¹ç°åœ¨æ²¡æœ‰æ‹‰é»‘åˆ é™¤ï¼Œæ˜¯ç•™äº†ä¸€ä¸ªçª—å£ï¼Œç»™è‡ªå·±ï¼Œç»™å¯¹æ–¹ä¸€ä¸ªæœºä¼šï¼Œä¹Ÿç®—æ˜¯å†…å¿ƒæ·±å¤„ä¿ç•™çš„ä¸€ä¸æœŸå¾…ã€‚</p><p>å¥¹åªæ˜¯ç´¯äº†ï¼Œè´Ÿé¢æƒ…ç»ªå‹æŠ‘å¤ªä¹…äº†ï¼Œæˆ‘åº”è¯¥ç»™å¥¹æ—¶é—´å’Œç©ºé—´ï¼Œè®©å¥¹æ·¡åŒ–è¿™æ®µæ—¶é—´æˆ‘çº ç¼ çš„è´Ÿé¢å°è±¡ï¼Œè‡ªæˆ‘æ„ˆåˆã€‚</p><p>ä¹Ÿç®—æ˜¯å¤±æœ›äº†å§ï¼Œå¯¹æˆ‘çš„ä¸æˆç†Ÿï¼Œå¯¹æˆ‘çš„æ— å¥ˆï¼Œæ‰€ä»¥æ‰é€‰æ‹©ç°åœ¨è¿™æ ·ã€‚</p><h3 id="æˆ‘ç›®å‰åº”è¯¥æ€ä¹ˆåš"><a href="#æˆ‘ç›®å‰åº”è¯¥æ€ä¹ˆåš" class="headerlink" title="æˆ‘ç›®å‰åº”è¯¥æ€ä¹ˆåš"></a>æˆ‘ç›®å‰åº”è¯¥æ€ä¹ˆåš</h3><p>ä¸è¦å†å°ä½œæ–‡äº†ï¼ŒçœŸçš„åªä¼šå¢åŠ å¥¹çš„å‹åŠ›ã€‚<del>ä¸€æ¬¡ä¸¤æ¬¡è¿˜å¥½ï¼Œå¥¹å·²ç»æ˜ç™½äº†æˆ‘çš„å¿ƒæ„ï¼Œæ¬¡æ•°å¤šäº†åªä¼šè®©å¥¹è§‰å¾—æˆ‘åå¤æ— å¸¸ï¼Œæƒ…ç»ªä¸ç¨³å®šã€‚</del></p><p>æš‚æ—¶æ€§çš„é€€å»ï¼Œç»™å¥¹æ—¶é—´å’Œç©ºé—´æŠµæ¶ˆå¯¹æˆ‘çš„è´Ÿé¢æƒ…ç»ªï¼Œä¸å†å¢åŠ å‹åŠ›ã€‚</p><p>åšå›è‡ªå·±ï¼Œç§¯ææ­£èƒ½é‡ï¼Œé‡æ–°æ„å»ºå¸å¼•åŠ›ï¼Œè®©å¥¹çœ‹åˆ°æˆ‘çš„å˜åŒ–ã€‚<del>æ•´å¤©å›´ç€å¥¹è½¬ï¼ŒçœŸçš„ä¼šè®©å¯¹æ–¹çª’æ¯ï¼Œæ¶ˆæçš„æƒ…ç»ªçœŸçš„å¯ä»¥ä¼ æŸ“ç»™åˆ«äºº</del></p><p>ä¸è¦çº ç¼ ä¹Ÿä¸è¦åå¤æ€§çš„ææ„Ÿæƒ…è¯é¢˜å’Œä¿è¯æ‰¿è¯ºï¼Œçˆ±æ˜¯éœ€è¦ä½“ä¼šçš„ï¼Œè€Œä¸æ˜¯é å˜´ã€‚<del>åå¤çš„æçœŸçš„åªä¼šè®©äººè§‰å¾—ä½ åªä¼šç”»é¥¼ï¼Œä¹Ÿå°±å˜´ä¸Šè¯´è¯´</del></p><p>ä¸è¦æ€»æ´»åœ¨è¿‡å»ï¼Œä¸ç”¨çº ç»“æ›¾ç»çŠ¯å¾—é”™äº†ã€‚</p><p>å°‘è¯´å¤šåšï¼Œæ”¾ä½æœŸå¾…ï¼ŒæœŸå¾…è¶Šé«˜æ²¡æœ‰æ»¡è¶³è¶Šå®¹æ˜“å¤±æœ›ç„¶åå†²åŠ¨ã€‚<del>å’Œå¥¹æƒ…æ„ŸåŒé¢‘å§ï¼Œå¼ºæ‰­çš„ç“œä¹Ÿä¸ç”œ</del></p><p>ä¸ä¸»åŠ¨ææ„Ÿæƒ…çš„äº‹ï¼Œå¥¹æƒ³æ˜ç™½äº†è®°èµ·æˆ‘çš„å¥½äº†è‡ªç„¶ä¼šä¸»åŠ¨æ‰¾æˆ‘ã€‚<del>å¥¹æƒ³é€šäº†è‡ªç„¶ä¼šæ‰¾æˆ‘ï¼Œæˆ–æ˜¯åˆ é™¤æ‹‰é»‘å¥½å‹ï¼Œæˆ–æ˜¯åšæ™®é€šæœ‹å‹ï¼Œæˆ–æ˜¯å’Œå¥½å¦‚åˆ</del></p><p>çˆ±å¥¹å°±è¯¥ç›¸ä¿¡å¥¹ï¼Œå¥¹è¿˜çˆ±æˆ‘æˆ–è€…è‡ªçˆ±çŸ­æœŸå†…ä¹Ÿå°±ä¼šè‡ªåŠ¨ä¿æŒè·ç¦»ï¼Œä»ç°åœ¨åšèµ·ï¼Œè½¬ç§»æ³¨æ„åŠ›ï¼Œä¸è¦å»åˆ†æå¥¹çš„æœ‹å‹åœˆï¼Œä¸ç”¨å·çœ‹å¥¹çš„æ¸¸æˆæ—¥å¸¸ã€‚<del>è¿™äº›æ˜¯æ§åˆ¶å’Œå æœ‰æ¬²å¼ºçš„è¡¨ç°ï¼Œä¹Ÿæ˜¯æ‚£å¾—æ‚£å¤±ä¸ä¿¡ä»»çš„çŒœæµ‹çš„è¡¨ç°ï¼Œå¥¹æœ‰è‡ªå·±çš„ç§äººç©ºé—´ï¼Œè¿™ä¹Ÿæ˜¯å¥¹çš„è‡ªç”±</del></p><p>å¸æ”¶æ•™è®­ï¼Œæå‡è‡ªå·±çš„æ‹å•†ï¼Œæ˜ç™½è‡ªå·±è¿™æ®µæ„Ÿæƒ…çš„é—®é¢˜å’Œä¸è¶³ï¼Œæ½œç§»é»˜åŒ–çš„æ”¹æ­£ï¼Œå¹¶æœ‰è‡ªå·±çš„åŸåˆ™åº•çº¿ã€‚</p><p>è¦æœ‰å¥¹å¯èƒ½ä¼šèµ°ï¼Œæˆ‘ä¼šå¤±å»å¥¹çš„å¿ƒç†å‡†å¤‡ï¼Œä¸å¼ºäººæ‰€éš¾ï¼Œå°†å¿ƒæ¯”å¿ƒã€‚<del>å°½ç®¡æˆ‘å§‹è‡³ç»ˆæˆ‘éƒ½æ²¡æƒ³è¿‡æ”¾å¼ƒ</del></p><p>è¿™ä¸ªæœŸé—´ï¼Œå¥¹æœ‰é€‰æ‹©æ›´å¥½çš„äººçš„æƒåŠ›ï¼Œå¦‚æœæœ‰åˆ«çš„äººè¿½å¥¹å¥¹åŒæ„äº†è¿™æ˜¯å¥¹çš„è‡ªç”±ã€‚<del>ä½†ä¼šæŠŠçˆ±å½»åº•çš„ç•™åœ¨å¿ƒåº•ï¼Œä¸ä¼šå†è½»æ˜“å»çˆ±äº†</del></p><p><strong>å…ˆå­¦ä¼šçˆ±è‡ªå·±ï¼Œå†å»çˆ±åˆ«äººã€‚</strong></p><h3 id="æˆé•¿å’Œåçœ"><a href="#æˆé•¿å’Œåçœ" class="headerlink" title="æˆé•¿å’Œåçœ"></a>æˆé•¿å’Œåçœ</h3><blockquote><p><strong>ä¸€æ®µæ„Ÿæƒ…çš„å´©åç»éä¸€æœä¸€å¤•ï¼Œä¸€æ®µæ„Ÿæƒ…çš„ç»è¥æ›´éœ€è¦æ­£ç¡®çš„æ‹çˆ±è§‚ç»´æŒã€‚</strong></p></blockquote><p>åŠæ—¶å“åº”æƒ…æ„Ÿè¯‰æ±‚ï¼Œå¯¹æ–¹å¾ˆç´¯å¾ˆç–²æƒ«ï¼Œå­¦ä¼šå®‰æ…°å’Œæ¶ˆé™¤ç–²æƒ«ï¼šæ¯”å¦‚ç›¸æ‹¥ç›¸ä¾ï¼Œå‘Šè¯‰å¥¹æˆ‘æ˜¯å¥¹çš„ä¾é ï¼Œä¸€èµ·å»ç©æ•£æ•£å¿ƒï¼Ÿ</p><p>åœ¨ä¸€èµ·çš„æ—¥å­è¦åˆ¶é€ æƒŠå–œå’Œæƒ…ç»ªä»·å€¼ï¼Œè®©ç”Ÿæ´»è¿‡çš„æœ‰æœŸå¾…ã€‚<del>æƒŠå–œä¸ä¸€å®šæ˜¯ç¤¼ç‰©ï¼Œå¯ä»¥æ˜¯ä¸€èµ·åšæŸä»¶äº‹ï¼Ÿ</del></p><p>åˆ†å¼€çš„æ—¥å­è¦æœ‰è‡ªå·±ç‹¬å¤„çš„ç©ºé—´ï¼Œä¸è¿‡åˆ†å¹²æ¶‰ï¼Œä¸çŒœå¿Œã€‚<del>æ—¢ç„¶åœ¨ä¸€èµ·äº†çˆ±ç€å¯¹æ–¹ï¼Œå°±åº”è¯¥ç›¸ä¿¡å¯¹æ–¹çš„äººå“</del></p><p>æƒ³å¥¹å°±æ‰“è§†é¢‘æ‰“è¯­éŸ³ï¼ŒèŠå¤©æ³¨æ„è´¨é‡ï¼Œå¯ä»¥æ˜¯åˆ†äº«æ—¥å¸¸ã€‚<del>ä¸å…‹åˆ¶ä¸å‹æŠ‘</del></p><p>å­¦ä¼šå€¾å¬éœ€æ±‚ï¼Œå¯¹æ–¹æå‡ºçš„æƒ³æ³•ï¼Œä¸€å®šè¦è½å®ã€‚<del>æ¯”å¦‚ä¸€èµ·å‡ºé—¨çš„æ—¶å€™è¦æœ‰ä¸»è§ï¼Œè¦æœ‰è®¡åˆ’</del></p><p>å°Šé‡å¯¹æ–¹ï¼Œä¿¡ä»»å¯¹æ–¹ï¼Œç»™å¯¹æ–¹å®‰å…¨æ„Ÿã€‚<del>ä»»ä½•ä¸ä¿¡ä»»çš„è¡Œä¸ºéƒ½ä¼šæ— å½¢ä¸­ä¼¤å®³åˆ°çˆ±ä½ çš„äºº</del></p><p>ä»˜å‡ºæ˜¯åŒå‘çš„ï¼Œå¯ä»¥æ˜¯æ—¶é—´ä¹Ÿå¯ä»¥æ˜¯é‡‘é’±ä¹Ÿå¯ä»¥æ˜¯æƒ…ç»ªã€‚<del>ä¸€ä¸ªäººå¯ä»¥èµ°çš„å¾ˆå¿«ï¼Œä¸¤ä¸ªäººæ‰èƒ½èµ°çš„æ›´è¿œ</del></p><p>æ‹çˆ±æ˜¯åŒå‘è€ƒå¯Ÿçš„è¿‡ç¨‹ï¼Œçˆ±æ˜¯ä¸ªè¿‡ç¨‹ï¼Œè€Œä¸æ˜¯ç»“æœï¼Œè¦å­¦ä¼šäº«å—å’Œå‘µæŠ¤çˆ±ã€‚<del>æ²¡æœ‰äººä¼šåœ¨åŸåœ°ç­‰ä½ æ”¹å˜ï¼Œç›¸çˆ±å¯ä»¥åˆ†æ‰‹ï¼Œç»“å©šä¹Ÿèƒ½ç¦»å©šï¼Œæ²¡æœ‰äººæ˜¯éä½ ä¸å¯</del></p><p>è¯¥æœ‰çš„ä»ªå¼æ„Ÿä¸èƒ½å¿˜è®°ï¼Œè¯¥æœ‰çš„èŠ‚æ—¥æƒŠå–œè¦å‡†å¤‡å¥½ã€‚<del>ä»ªå¼æ„Ÿæ˜¯ç›¸äº’çš„ï¼Œä¹Ÿæ˜¯å¯¹å¯¹æ–¹çš„è‚¯å®š</del></p><p>æ‹çˆ±ä¸èƒ½ä¸¢å¤±è‡ªæˆ‘ï¼Œå°±åƒæ”¾é£ç­ï¼Œè¦å›ä¼šä¸€æ”¶ä¸€æ”¾ã€‚<del>æœ‰è‡ªå·±çš„åŸåˆ™ï¼Œä¸èƒ½ä¸€å‘³è¿åˆæ”¾çºµ</del></p><p><strong>åœ¨ä¸€èµ·ä¹‹åè¦ç»™åŒæ–¹ç«‹è§„çŸ©ï¼Œä»€ä¹ˆåº•çº¿ä¸èƒ½ç¢°ã€‚</strong></p><p>ä¸èƒ½å¤ªè¿‡æ²¹è…»ï¼Œä¸è¦å›´ç€å¯¹æ–¹è½¬ï¼Œè¦æœ‰è‡ªå·±çš„ç”Ÿæ´»ï¼Œä¸èƒ½æœ‰å¤ªå¼ºçš„æ§åˆ¶æ¬²ã€‚</p><p>æ›´æ–°ç›¸å¤„æ¨¡å¼ï¼Œè®©çˆ±ä¿æŒæ–°é²œæ„Ÿ</p><p><strong>åµæ¶æ˜¯å¾ˆä¼¤æ„Ÿæƒ…çš„äº‹</strong>ï¼Œå¦‚æœè§‰å¾—è¿èƒŒäº†åŸåˆ™ï¼Œå¯ä»¥å°è¯•åœ¨åŒæ–¹å¿ƒæƒ…ä¸é”™çš„æ—¶å€™å†æ²Ÿé€šã€‚</p><p>å­¦ä¼š<strong>é¿å…é—®é¢˜ã€è§£å†³é—®é¢˜ã€åæ€é—®é¢˜ï¼Œä¸è¦æœ‰éš”å¤œçš„æƒ…ç»ªï¼Œä¸è¦æ‹‰æ—§è´¦</strong></p><h3 id="è‡´è‡ªå·±"><a href="#è‡´è‡ªå·±" class="headerlink" title="è‡´è‡ªå·±"></a>è‡´è‡ªå·±</h3><blockquote><p><strong>çˆ±ä¹‹å‰å¾ˆç†æ™ºï¼Œçˆ±ä¹‹åæ›´å¤šçš„æ˜¯éœ€è¦è‡ªæˆ‘å…‹åˆ¶å’Œè‡ªæˆ‘è°ƒèŠ‚</strong>ã€‚<del>å¥½æ¯”åœ¨ç†æ™ºæƒ…å†µä¸‹ï¼Œé¢å¯¹æ„Ÿè§‰å¯¹æ–¹å¯èƒ½è¢«æ’¬å¢™è§’çš„è¡Œä¸ºï¼Œåº”è¯¥æŠ•å…¥æ›´å¤šçš„å…³å¿ƒå’Œçˆ±ï¼Œè®©å¯¹æ–¹æ— å¢™è„šå¯æŒ–ã€‚éç†æ™ºçš„æƒ…å†µä¸‹ï¼Œä¼šç”Ÿæ°”åƒé†‹è´£æ€ªï¼Œè¢«å¯¹æ–¹è®¤ä¸ºä¸æˆç†Ÿ</del></p></blockquote><p>çˆ±æ˜¯ä¼šä¸¢å¤±ç†æ™ºï¼Œä½†ä¸èƒ½ä¸¢çš„å¤ªå½»åº•ã€‚</p><p>è¿™æ®µæ—¶é—´æ‰¿å—çš„åˆ†æ‰‹ä¹‹è‹¦ï¼Œç›¸æ€ä¹‹ç—›ï¼Œå·²ç»è¶³å¤Ÿå¿è¿˜æ›¾ç»çŠ¯ä¸‹çš„é”™äº†ï¼Œæ”¾è¿‡è‡ªå·±ã€‚</p><p>æ”¹æ‰ä»˜å‡ºå¼çš„è¯´è¯æ–¹å¼ï¼Œä¸è¦æŠŠå…³ç³»ä»£å…¥åˆ°â€œä½ ç”¨ä»˜å‡ºâ€å»äº¤æ¢â€œå¥¹ä»€ä¹ˆä¹Ÿä¸ç”¨åšâ€ä¸­ï¼Œä¹Ÿä¸è¦ä»£å…¥åˆ°â€œä½ åšäº†ä»€ä¹ˆï¼Œå¥¹å°±ä¸€å®šéè¦æ»¡è¶³ä½ ä»€ä¹ˆçš„äº¤æ¢ä¸­â€ã€‚</p><p>åœ¨éœ€è¦çš„æ—¶å€™æä¾›é«˜ä»·å€¼çš„æƒ…ç»ªå…³æ€€ï¼Œéå¿…è¦çš„æ—¶å€™æœ‰å½¼æ­¤çš„ç©ºé—´ã€‚</p><p>æº¢å‡ºæ¥çš„çˆ±å¾ˆå»‰ä»·ï¼Œæ°åˆ°å¥½å¤„çš„å…³å¿ƒå’Œä½“è´´ï¼Œçˆ±æƒ…æ‰èƒ½æ›´é•¿ä¹…ã€‚</p><p>æœ‰äº›äººæ³¨å®šåªæ˜¯é™ªä½ èµ°ä¸Šä¸€ç¨‹ï¼Œæ•™ä¼šä½ æ€ä¹ˆè°ˆæ‹çˆ±ï¼Œç•™ä¸‹æ¥ç›¸å®ˆä¸€ç”Ÿçš„æ‰æ˜¯ä¼´ä¾£ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> éšç¬”æ—¥è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¸å¥¹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¿œç¨‹è°ƒè¯• NodeJS ç¨‹åºçš„å‡ ç§å§¿åŠ¿</title>
      <link href="/tools/node-remote-debug/"/>
      <url>/tools/node-remote-debug/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="Before"><a href="#Before" class="headerlink" title="Before?"></a><code>Before?</code></h3><p>åœ¨å­¦ä¹ è¿™ç¯‡æ–‡ç« ä¹‹å‰ï¼Œè¯·å…ˆäº†è§£å¦‚ä½•åœ¨ <code>vscode</code> ä¸­è°ƒè¯•ä¸€ä¸ª <code>Node</code> ç¨‹åºï¼Œå­¦ä¼šåŸºç¡€çš„è°ƒè¯•å‚æ•°é…ç½®å’Œè°ƒè¯•æŠ€èƒ½ã€‚è¯¦ç»†è¯·å‚è€ƒï¼š<a href="/share/vscode-debug">åœ¨ VScode ä¸­è°ƒè¯• NodeJS ç¨‹åº</a></p><p>åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå­¦ä¹ å¦‚ä½•åœ¨ <code>vscode</code> æœ¬åœ°è°ƒè¯•è¿œç¨‹è¿è¡Œä¸­çš„ <code>Node</code> ç¨‹åºã€‚</p><span id="more"></span><h3 id="åŸºäº-vscode-æœ¬åœ°è¿›è¡Œè¿œç¨‹è°ƒè¯•"><a href="#åŸºäº-vscode-æœ¬åœ°è¿›è¡Œè¿œç¨‹è°ƒè¯•" class="headerlink" title="åŸºäº vscode æœ¬åœ°è¿›è¡Œè¿œç¨‹è°ƒè¯•"></a>åŸºäº <code>vscode</code> æœ¬åœ°è¿›è¡Œè¿œç¨‹è°ƒè¯•</h3><h4 id="æ·»åŠ -debug-è„šæœ¬å‘½ä»¤"><a href="#æ·»åŠ -debug-è„šæœ¬å‘½ä»¤" class="headerlink" title="æ·»åŠ  debug è„šæœ¬å‘½ä»¤"></a>æ·»åŠ  <code>debug</code> è„šæœ¬å‘½ä»¤</h4><p>åœ¨ <code>package.json</code> æ·»åŠ è°ƒè¯•ç«¯å£å’Œè„šæœ¬å‘½ä»¤ï¼Œå¦‚ä¸‹ï¼Œæ·»åŠ  <code>9229 debug</code> ç›‘å¬ç«¯å£ï¼š</p><pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"start:debug"</span><span class="token operator">:</span> <span class="token string">"nest start --debug 0.0.0.0:9229 --watch"</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>å½“ç¨‹åºæ‰“åŒ…æˆé•œåƒåï¼Œé€šå¸¸ä¼šå†™å…¥å¯åŠ¨è„šæœ¬ï¼Œåœ¨å¯åŠ¨è„šæœ¬ä¸­æ‰§è¡Œ<code>npm run start:prod</code>ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬éœ€è¦åœ¨è¿™ä¸ªåŸºç¡€ä¸Šï¼Œé€šè¿‡æ ‡è¯†ç¯å¢ƒå˜é‡ï¼ŒåŒºåˆ†æ˜¯å¦æ‰§è¡Œ<code>npm run start:debug</code></p><p>ä¾‹å¦‚ï¼š<code>start.sh</code> ä¸­ï¼Œé€šè¿‡ <code>RUN_ENV = TEST</code> å¯åŠ¨ <code>debug å‘½ä»¤</code></p><pre class="language-sh" data-language="sh"><code class="language-sh">#!&#x2F;bin&#x2F;shif [ &quot;$RUN_ENV&quot; !&#x3D; &quot;&quot; ] &amp;&amp; [ $(echo $RUN_ENV | tr [a-z] [A-Z]) &#x3D;&#x3D; &quot;TEST&quot; ];then    yarn --production&#x3D;false    npm run start:debugelse    npm run start:prodfi</code></pre><p><code>ok</code>ï¼Œæœ¬åœ°é¡¹ç›®é…ç½®å®Œæˆâ€¦ä¸‹é¢çœ‹ <code>rancher</code> ä¸­åˆè¯¥å¦‚ä½•é…ç½®ï¼Ÿ</p><h4 id="Rancher-é…ç½®å˜æ›´"><a href="#Rancher-é…ç½®å˜æ›´" class="headerlink" title="Rancher é…ç½®å˜æ›´"></a><code>Rancher</code> é…ç½®å˜æ›´</h4><p>å¦‚å›¾ï¼šè¿›å…¥å·¥ä½œè´Ÿè½½ï¼Œå…ˆæ·»åŠ ç¯å¢ƒå˜é‡ <code>RUN_ENV</code>ï¼Œç„¶åå…³é—­å¥åº·æ£€æŸ¥ï¼Œæ–¹ä¾¿é‡æ–°éƒ¨ç½²æ—¶æ‰§è¡Œä¸Šé¢é…ç½®çš„ <code>npm run start:debug</code>.</p><blockquote><p>å…³é—­å¥åº·æ£€æŸ¥ï¼šåœ¨è°ƒè¯•æ¨¡å¼ä¸‹ï¼ŒæœåŠ¡å¯èƒ½ä¼šè¿›è¡Œä¸€äº›éæ ‡å‡†çš„æ“ä½œæˆ–å¤„äºä¸ç¨³å®šçŠ¶æ€ï¼Œè¿™å¯èƒ½å¯¼è‡´å¥åº·æ£€æŸ¥å¤±è´¥</p></blockquote><p><a href="/images/tools/node-remote-debug/p1.png"><img src="/images/tools/node-remote-debug/p1.png" alt="node-remote-debug-p1" loading="lazy"></a></p><p>ç„¶åæ‰“å¼€æœåŠ¡å‘ç°ï¼Œåœ¨é«˜çº§é€‰é¡¹ä¸­é…ç½®ç«¯å£æ˜ å°„è§„åˆ™ï¼šæ³¨æ„æœåŠ¡ç«¯å£å’Œä¸»æœºç«¯å£çš„åŒºåˆ«ï¼š</p><blockquote><p>æœåŠ¡ç«¯å£ï¼šæŒ‡åœ¨ <code>Rancher</code> ä¸­å®šä¹‰çš„æœåŠ¡å¯¹å¤–æš´éœ²çš„ç«¯å£ï¼Œä¸»æœºç«¯å£ï¼šæŒ‡åœ¨è¿è¡ŒæœåŠ¡çš„ä¸»æœºä¸Šå®é™…ä½¿ç”¨çš„ç«¯å£</p></blockquote><blockquote><p>å½“å®¹å™¨å†…çš„æœåŠ¡ç›‘å¬ç‰¹å®šçš„ç«¯å£æ—¶ï¼Œä¸»æœºç«¯å£å¯ä»¥å°†å¤–éƒ¨è¯·æ±‚æ˜ å°„åˆ°å®¹å™¨å†…çš„æœåŠ¡</p></blockquote><p><a href="/images/tools/node-remote-debug/p2.png"><img src="/images/tools/node-remote-debug/p2.png" alt="node-remote-debug-p2" loading="lazy"></a></p><p>ç„¶åé‡å¯å®¹å™¨æœåŠ¡ï¼Œæ¥ç€å¤„ç†æœ¬åœ° <code>vscode</code> é…ç½®ï¼š</p><h4 id="é…ç½®-launch-json"><a href="#é…ç½®-launch-json" class="headerlink" title="é…ç½® launch.json"></a>é…ç½® <code>launch.json</code></h4><p>åœ¨<code>.vscode/launch.json</code>ä¸­æ·»åŠ è°ƒè¯•é…ç½®é¡¹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"0.2.0"</span><span class="token punctuation">,</span>  <span class="token property">"configurations"</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>      <span class="token property">"address"</span><span class="token operator">:</span> <span class="token string">"172.16.148.25"</span><span class="token punctuation">,</span>      <span class="token property">"localRoot"</span><span class="token operator">:</span> <span class="token string">"$&#123;workspaceFolder&#125;"</span><span class="token punctuation">,</span>      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Attach to Remote - 172.16.148.25"</span><span class="token punctuation">,</span>      <span class="token property">"port"</span><span class="token operator">:</span> <span class="token number">32145</span><span class="token punctuation">,</span>      <span class="token property">"remoteRoot"</span><span class="token operator">:</span> <span class="token string">"/usr/src/app"</span><span class="token punctuation">,</span>      <span class="token property">"request"</span><span class="token operator">:</span> <span class="token string">"attach"</span><span class="token punctuation">,</span>      <span class="token property">"skipFiles"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"&lt;node_internals>/**"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"node"</span><span class="token punctuation">,</span>      <span class="token property">"restart"</span><span class="token operator">:</span> <span class="token boolean">true</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">]</span><span class="token punctuation">&#125;</span></code></pre><p>æ³¨æ„é…ç½®çš„<code>addressã€portã€request</code>å­—æ®µï¼Œå› ä¸ºæ˜¯å¯¹è¿œç¨‹å·²ç»è¿è¡Œä¸­çš„ç¨‹åºè¿½åŠ è°ƒè¯•ï¼Œæ‰€ä»¥ä½¿ç”¨<code>attach</code>ï¼Œ<code>port</code>å¯¹åº”ä¸Šé¢é…ç½®æœåŠ¡å‘ç°ä¸­çš„ä¸»æœº<code>port</code>.</p><p>é…ç½®å¥½åï¼Œè®°å¾—å…ˆæ‰§è¡Œ<code>npm run build</code>ï¼Œ<code>why?</code></p><blockquote><p>æ„å»ºç”Ÿæˆçš„ <code>map</code> æ–‡ä»¶åŒ…å«ä»£ç æ˜ å°„ä¿¡æ¯çš„æ–‡ä»¶ï¼Œç”¨äºå¸®åŠ©è°ƒè¯•å™¨åœ¨æ„å»ºåçš„ä»£ç å’Œæºä»£ç ä¹‹é—´å»ºç«‹æ˜ å°„å…³ç³»ã€‚</p></blockquote><p>æœ€ååœ¨æœ¬åœ°æºä»£ç æ·»åŠ æ–­ç‚¹(æ–­è¨€ã€è¡¨è¾¾å¼ã€æ—¥å¿—â€¦)ç­‰ç­‰ï¼Œå¯åŠ¨å’Œè¿è¡Œè°ƒè¯•.</p><h3 id="åŸºäºæµè§ˆå™¨è¿›è¡Œè¿œç¨‹è°ƒè¯•"><a href="#åŸºäºæµè§ˆå™¨è¿›è¡Œè¿œç¨‹è°ƒè¯•" class="headerlink" title="åŸºäºæµè§ˆå™¨è¿›è¡Œè¿œç¨‹è°ƒè¯•"></a>åŸºäºæµè§ˆå™¨è¿›è¡Œè¿œç¨‹è°ƒè¯•</h3><ul><li><p>ç‚¹å‡»<code>F12</code>æˆ–è€…é¼ æ ‡å³é”®æ‰“å¼€æ§åˆ¶å°ï¼Œæ§åˆ¶å°å³ä¾§æœ‰ä¸ªè®¾ç½®æŒ‰é’®ï¼Œç‚¹å‡»é€‰æ‹©æºä»£ç ï¼Œå¯ç”¨<code>javascript</code>æºæ˜ å°„</p></li><li><p>è®¿é—®ï¼š<code>edge://inspect</code>ï¼Œ<code>edge://</code>æ ¹æ®ä½ ä½¿ç”¨çš„æµè§ˆå™¨å†³å®š</p></li><li><p>ç‚¹å‡» <code>Open dedicated DevTools for Node</code></p></li></ul><p><a href="/images/tools/node-remote-debug/p3.png"><img src="/images/tools/node-remote-debug/p3.png" alt="node-remote-debug-p3" loading="lazy"></a></p><ul><li>æ·»åŠ è¿æ¥</li></ul><p><a href="/images/tools/node-remote-debug/p4.png"><img src="/images/tools/node-remote-debug/p4.png" alt="node-remote-debug-p4" loading="lazy"></a></p><ul><li>æ·»åŠ æ–­ç‚¹</li></ul><p><a href="/images/tools/node-remote-debug/p5.png"><img src="/images/tools/node-remote-debug/p5.png" alt="node-remote-debug-p5" loading="lazy"></a></p><p>å½“ç”¨æˆ·ä¸‹æ¬¡è®¿é—®è¯¥æœåŠ¡æ—¶ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p><p><a href="/images/tools/node-remote-debug/p6.png"><img src="/images/tools/node-remote-debug/p6.png" alt="node-remote-debug-p6" loading="lazy"></a></p><p>è¿™ç§æ–¹å¼è™½ç„¶ä¹Ÿèƒ½å®ç°è¿œç¨‹è°ƒè¯•çš„æ•ˆæœï¼Œä½†æ˜¯å®ƒæ˜¯åŸºäº<code>build</code>åçš„äº§ç‰©è°ƒè¯•çš„ï¼Œä¸æ–¹ä¾¿é˜…è¯»å’Œå®šä½.</p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…·å­¦ä¹  </category>
          
          <category> ç¨‹åºè°ƒè¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> debug </tag>
            
            <tag> è¿œç¨‹è°ƒè¯• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨ VScode ä¸­è°ƒè¯• NodeJS ç¨‹åº</title>
      <link href="/tools/vscode-debug/"/>
      <url>/tools/vscode-debug/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><p><code>ä»£ç è°ƒè¯•åœ¨å¼€å‘å·¥ç¨‹ä¸­å¿…ä¸å¯å°‘</code>.</p><p>é€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬ä¼šé€šè¿‡ <code>Chrome</code> å¼€å‘è€…å·¥å…·åœ¨æµè§ˆå™¨é‡Œè¿›è¡Œè°ƒè¯•ï¼Œæˆ–è€…åœ¨ä»£ç é‡Œå†™å…¥ <code>console</code> è¯­å¥æ‰“å°è¾“å‡ºè§‚å¯Ÿå˜æ›´ã€‚é™¤æ­¤ä¹‹å¤–å‘¢ï¼Œå°±æ˜¯åœ¨å¼€å‘å·¥å…·ä¸­å¯¹æºä»£ç æ–­ç‚¹è°ƒè¯•ã€‚</p><p>æœ¬ç¯‡æ–‡ç« å°±ä»¥ <code>nodejs</code> ä¸ºä¾‹ï¼Œä»‹ç»åœ¨ <code>vscode</code> ä¸­è°ƒè¯•ä»£ç çš„æ“ä½œæ–¹æ³•ï¼Œå…·ä½“å‚æ•°é…ç½®å¯å‚è€ƒ <a href="https://code.visualstudio.com/docs/editor/variables-reference">å®˜æ–¹æ–‡æ¡£</a></p><span id="more"></span><h3 id="è°ƒè¯•çš„ä½œç”¨"><a href="#è°ƒè¯•çš„ä½œç”¨" class="headerlink" title="è°ƒè¯•çš„ä½œç”¨"></a>è°ƒè¯•çš„ä½œç”¨</h3><ul><li><p>ç¨‹åºå‡ºç° <code>bug</code>ï¼Œæ‰¾å‡ºç° <code>bug</code> çš„åŸå› </p></li><li><p>å­¦ä¹ æºä»£ç ï¼Œç†æ¸…ä»£ç çš„é€»è¾‘</p></li></ul><h3 id="è°ƒè¯•éœ€è¦æ»¡è¶³çš„æ¡ä»¶ï¼Ÿ"><a href="#è°ƒè¯•éœ€è¦æ»¡è¶³çš„æ¡ä»¶ï¼Ÿ" class="headerlink" title="è°ƒè¯•éœ€è¦æ»¡è¶³çš„æ¡ä»¶ï¼Ÿ"></a>è°ƒè¯•éœ€è¦æ»¡è¶³çš„æ¡ä»¶ï¼Ÿ</h3><p>ä»»ä½•ç¨‹åºè¯­è¨€ï¼Œåœ¨ <code>vscode</code> ä¸­è°ƒè¯•ï¼Œå¤§å¤šéœ€è¦æ»¡è¶³ä¸‹é¢ä¸‰ä¸ªæ¡ä»¶ï¼š</p><ul><li><p>æ­å»ºç›¸åº”çš„ç¼–ç¨‹è¯­è¨€çš„å¼€å‘ç¯å¢ƒã€‚ä¾‹å¦‚ <code>node</code> ç¯å¢ƒæ­å»ºå¯å‚è€ƒï¼š<a href="/envConstruct/nvm-and-node-install">Nvm å®‰è£…åŠ Node ç¯å¢ƒæ­å»º</a></p></li><li><p>å®‰è£…ç›¸åº”ç¼–ç¨‹è¯­è¨€ç”¨äºè°ƒè¯•çš„æ‰©å±•ã€‚ï¼ˆ<code>vscode</code>å†…ç½®äº†å¾ˆå¤šç¨‹åºè¯­è¨€çš„ <code>debugger</code> æ’ä»¶ï¼Œä¾‹å¦‚ <code>JavaScript Debugger</code>ï¼‰</p></li><li><p>é…ç½® <code>launch.json</code> ç¨‹åº</p></li></ul><p>ç”±äº <code>vscode</code> å¯¹ <code>node</code> çš„æ”¯æŒç‰¹åˆ«å‹å¥½ï¼Œæ‰€ä»¥æ— éœ€æˆ‘ä»¬å•ç‹¬å»å®‰è£…æ‰©å±•å’Œé…ç½® <code>launch.json</code></p><h3 id="åˆ›å»ºç¨‹åºå¹¶å¼€å§‹è°ƒè¯•-Demo"><a href="#åˆ›å»ºç¨‹åºå¹¶å¼€å§‹è°ƒè¯•-Demo" class="headerlink" title="åˆ›å»ºç¨‹åºå¹¶å¼€å§‹è°ƒè¯•-Demo"></a>åˆ›å»ºç¨‹åºå¹¶å¼€å§‹è°ƒè¯•-<code>Demo</code></h3><p>åœ¨æ­¤ä¹‹å‰ï¼Œè¯·å…ˆç¡®ä¿ <code>node</code> ç¯å¢ƒæ­£å¸¸.</p><h4 id="åˆ›å»ºä¸€ä¸ªç¨‹åº"><a href="#åˆ›å»ºä¸€ä¸ªç¨‹åº" class="headerlink" title="åˆ›å»ºä¸€ä¸ªç¨‹åº"></a>åˆ›å»ºä¸€ä¸ªç¨‹åº</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åˆ›å»ºè°ƒè¯•ç¨‹åºé¡¹ç›®æ–‡ä»¶å¤¹</span><span class="token function">mkdir</span> debug-demo<span class="token builtin class-name">cd</span> debug-demo<span class="token comment"># åˆ›å»ºå¹¶å†™å…¥ç¨‹åºå…¥å£æ–‡ä»¶å’Œä»£ç </span><span class="token function">vi</span> test.js<span class="token comment"># å†™å…¥ç¨‹åºä»£ç ....è¿™é‡Œçœç•¥ä»£ç éƒ¨åˆ†</span><span class="token comment"># ç”¨ vscode æ‰“å¼€é¡¹ç›®ï¼Œå¹¶æµ‹è¯•æ˜¯å¦æ­£å¸¸è¿è¡Œ</span>code <span class="token builtin class-name">.</span><span class="token function">node</span> test.js</code></pre><h4 id="æ·»åŠ æ–­ç‚¹"><a href="#æ·»åŠ æ–­ç‚¹" class="headerlink" title="æ·»åŠ æ–­ç‚¹"></a>æ·»åŠ æ–­ç‚¹</h4><p>æ–­ç‚¹ä½ç½®åœ¨<strong>ä»£ç è¡Œå·çš„å·¦ä¾§ï¼Œé¼ æ ‡è¦†ç›–ä¸Šå»æœ‰ä¸ªçº¢è‰²çš„ç‚¹</strong>ï¼Œç‚¹å‡»ï¼Œçº¢è‰²ç‚¹å¸¸äº®è¡¨ç¤ºæ–­ç‚¹æ·»åŠ æˆåŠŸ</p><h4 id="è¿›å…¥Debug-å¹¶æ‰§è¡Œ-Run"><a href="#è¿›å…¥Debug-å¹¶æ‰§è¡Œ-Run" class="headerlink" title="è¿›å…¥Debug å¹¶æ‰§è¡Œ Run"></a>è¿›å…¥<code>Debug</code> å¹¶æ‰§è¡Œ <code>Run</code></h4><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œé€‰æ‹©è°ƒè¯•å™¨ <code>Nodejs</code> å¼€å§‹è°ƒè¯•ï¼Œæˆ–è€…é”®ç›˜é”®å…¥ <code>F5</code> å¯åŠ¨ã€‚è¿™ç§æ–¹å¼æ˜¯æœ€ç®€å•çš„ä¸€ç§ï¼Œä½¿ç”¨äº† <code>vscode</code> å†…ç½®çš„è°ƒè¯•é…ç½®ï¼Œä¸ä¼šç”Ÿæˆ <code>launch.json</code>.</p><p><a href="/images/tools/vscode-debug/p1.png"><img src="/images/tools/vscode-debug/p1.png" alt="vscode-debug-p1" loading="lazy"></a></p><h4 id="è°ƒè¯•é¢æ¿åŠŸèƒ½ä»‹ç»å’Œä½¿ç”¨"><a href="#è°ƒè¯•é¢æ¿åŠŸèƒ½ä»‹ç»å’Œä½¿ç”¨" class="headerlink" title="è°ƒè¯•é¢æ¿åŠŸèƒ½ä»‹ç»å’Œä½¿ç”¨"></a>è°ƒè¯•é¢æ¿åŠŸèƒ½ä»‹ç»å’Œä½¿ç”¨</h4><p>å¯åŠ¨è°ƒè¯•åï¼Œé¢æ¿ä¼šåŒ…å«ï¼šä»£ç åŒºã€è°ƒè¯•å·¥å…·æ ã€è°ƒè¯•è¾“å‡ºé¢æ¿ã€å·¦ä¾§çš„è°ƒè¯•å·¥å…·æ ç­‰ç­‰ï¼Œå…·ä½“åŠŸèƒ½ä»‹ç»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><a href="/images/tools/vscode-debug/p2.png"><img src="/images/tools/vscode-debug/p2.png" alt="vscode-debug-p2" loading="lazy"></a></p><h3 id="è‡ªå®šä¹‰è°ƒè¯•-launch-json-é…ç½®ä»‹ç»"><a href="#è‡ªå®šä¹‰è°ƒè¯•-launch-json-é…ç½®ä»‹ç»" class="headerlink" title="è‡ªå®šä¹‰è°ƒè¯• launch.json é…ç½®ä»‹ç»"></a>è‡ªå®šä¹‰è°ƒè¯• <code>launch.json</code> é…ç½®ä»‹ç»</h3><h4 id="ç»„æˆéƒ¨åˆ†"><a href="#ç»„æˆéƒ¨åˆ†" class="headerlink" title="ç»„æˆéƒ¨åˆ†"></a>ç»„æˆéƒ¨åˆ†</h4><ul><li><p>æŒ‡å®šè¯­è¨€ç±»å‹</p></li><li><p>æŒ‡å®šè°ƒè¯•ç±»å‹ <code>launch</code> or <code>attach</code></p></li><li><p>è¿œç¨‹è°ƒè¯•â€¦</p></li></ul><h4 id="åˆ›å»º-launch-json"><a href="#åˆ›å»º-launch-json" class="headerlink" title="åˆ›å»º launch.json"></a>åˆ›å»º <code>launch.json</code></h4><p>å¯ä»¥æ‰‹åŠ¨ç‚¹å‡» <code>vscode</code> å·¦ä¾§çš„è°ƒè¯•æŒ‰é’®åï¼Œå†ç‚¹å‡»å·¦ä¾§å·¥å…·æ å‡ºç°çš„ <code>åˆ›å»º launch.json æ–‡ä»¶</code>ï¼Œé€‰æ‹© <code>Nodejs</code> è°ƒè¯•å™¨åï¼Œä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ç”Ÿæˆ <code>.vscode/launch.json</code> æ–‡ä»¶ï¼Œå¦‚å›¾æ‰€ç¤º</p><blockquote><p><code>.vscode</code> æ˜¯ <code>vscode</code> çš„é…ç½®æ–‡ä»¶å¤¹</p></blockquote><p><a href="/images/tools/vscode-debug/p3.png"><img src="/images/tools/vscode-debug/p3.png" alt="vscode-debug-p3" loading="lazy"></a></p><p>å³ä¸‹è§’çš„ <code>æ·»åŠ é…ç½®</code> æŒ‰é’®ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„ä¸ºæˆ‘ä»¬è‡ªåŠ¨åŒ–æ·»åŠ å„ç§è°ƒè¯•é¢„é…ç½®ã€‚</p><h4 id="configurations-é…ç½®"><a href="#configurations-é…ç½®" class="headerlink" title="configurations é…ç½®"></a><code>configurations</code> é…ç½®</h4><p>æˆ‘ä»¬éœ€è¦é‡ç‚¹å…³æ³¨ <code>configurations</code> å­—æ®µï¼Œ<code>version</code> å¯ä»¥å¿½ç•¥.</p><p><code>configurations</code> æ˜¯ä¸€ä¸ªæ•°ç»„å¯¹è±¡ï¼Œå› ä¸ºä¸€ä¸ªé¡¹ç›®å¯èƒ½å­˜åœ¨å¤šç§è°ƒè¯•æ¨¡å¼ï¼Œæ¯”å¦‚è°ƒè¯•å¼€å‘æ—¶è°ƒè¯•ï¼Œä¹Ÿå¯ä»¥æ˜¯è¿œç¨‹è°ƒè¯•.åˆæˆ–è€… <code>launch å’Œ attach ä¸¤ç§æ¨¡å¼è°ƒè¯•</code></p><p>æ¯ä¸ªè°ƒè¯•é…ç½®é¡¹æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«äº†åŸºç¡€çš„ <code>type(æŒ‡å®šç¼–è¯‘ç¯å¢ƒ nodeã€goã€php...)ã€request(è°ƒè¯•æ¨¡å¼ï¼šlaunchã€attach)ã€name(è‡ªå®šä¹‰é…ç½®é¡¹åç§°)</code>.å’Œ <a href="https://code.visualstudio.com/docs/editor/variables-reference">å…¶ä»–é…ç½®é¡¹</a></p><h5 id="è°ƒè¯•æ¨¡å¼é€‰æ‹©"><a href="#è°ƒè¯•æ¨¡å¼é€‰æ‹©" class="headerlink" title="è°ƒè¯•æ¨¡å¼é€‰æ‹©"></a>è°ƒè¯•æ¨¡å¼é€‰æ‹©</h5><p><strong>æ ¹æ®ä¸åŒè°ƒè¯•æ¨¡å¼é€‰æ‹©å…¶ä»–çš„é…ç½®é¡¹</strong>å†…å®¹ï¼Œæ³¨æ„ä¸¤ç§è°ƒè¯•æ¨¡å¼çš„åŒºåˆ«ï¼š</p><blockquote><p><strong><code>launch</code> æ˜¯å¯åŠ¨ç¨‹åºå¹¶æ·»åŠ è°ƒè¯•å™¨ï¼Œ<code>attach</code> æ˜¯åœ¨å·²ç»è¿è¡Œä¸­çš„ç¨‹åºæ·»åŠ è°ƒè¯•å™¨</strong>ã€‚</p></blockquote><p>é€šä¿—çš„è®²ï¼Œ<code>launch</code> æ˜¯å…ˆå°†ç¨‹åºé‡æ–°å¯åŠ¨ï¼Œç„¶åç»™ç¨‹åºæ­é…è°ƒè¯•å™¨å¹¶å¼€å§‹è°ƒè¯•ï¼Œæ„å‘³ç€ä¸éœ€è¦å†æ‰‹åŠ¨æ‰§è¡Œ <code>npm run start</code> äº†ï¼Œå¦‚æœæ­¤å‰å·²ç»å¯åŠ¨äº†ï¼Œå¯èƒ½è¿˜ä¼šå­˜åœ¨ç«¯å£å†²çªâ€¦ å¦å¤–ï¼šåªæ‰§è¡Œ <code>npm run start</code> æ˜¯ä¸ä¼šåœåœ¨æ–­ç‚¹ä½ç½®çš„.</p><p><code>attach</code> æ˜¯åœ¨å·²ç»è¿è¡Œçš„ç¨‹åºåŸºç¡€ä¸Šè¿½åŠ è°ƒè¯•å™¨ï¼Œè¿™ç§æ¨¡å¼éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å…ˆ <code>npm run start</code> æŠŠç¨‹åºè·‘èµ·æ¥ï¼Œç„¶åå† <code>F5</code> å¯åŠ¨è°ƒè¯•ã€‚æ‰€ä»¥åè€…è¿™ç§æ¨¡å¼é€šå¸¸ä¹Ÿç”¨äºè¿›è¡Œè¿œç¨‹è°ƒè¯•</p><h5 id="é…ç½®é¡¹ç¤ºä¾‹"><a href="#é…ç½®é¡¹ç¤ºä¾‹" class="headerlink" title="é…ç½®é¡¹ç¤ºä¾‹"></a>é…ç½®é¡¹ç¤ºä¾‹</h5><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨ <code>attach</code> è°ƒè¯•æ¨¡å¼ï¼Œéœ€è¦ <code>Run</code> å¯åŠ¨ç¨‹åºæ—¶æ·»åŠ ä¸€ä¸ª <code>debug</code> çš„ç›‘å¬ç«¯å£(éœ€è¦å°† <code>9229</code> ç«¯å£å¯¹å¤–å¼€æ”¾)ï¼Œ<code>package.json</code> å¦‚ä¸‹ï¼š</p><pre class="language-json" data-language="json"><code class="language-json"><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>  <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"nest start"</span><span class="token punctuation">,</span>  <span class="token property">"start:dev"</span><span class="token operator">:</span> <span class="token string">"nest start --watch"</span><span class="token punctuation">,</span>  <span class="token comment">// é»˜è®¤çš„ debug ip åœ°å€ä¸º 127.0.0.1ï¼Œå³æœ¬æœºipã€‚ ä½†æ˜¯åœ¨ docker å®¹å™¨ä¸­ï¼Œæœ¬æœº ip åªå¯¹è‡ªå·±ç”Ÿæ•ˆã€‚æ‰€ä»¥åœ¨å¯åŠ¨ debug çš„æ—¶å€™ï¼Œéœ€è¦å°†åœ°å€æŒ‡å®šä¸ºï¼š0.0.0.0</span>  <span class="token property">"start:debug"</span><span class="token operator">:</span> <span class="token string">"nest start --debug 0.0.0.0:9229 --watch"</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span></code></pre><p>é¡¹ç›®ä¸­å…·ä½“é…ç½®è¦æ ¹æ®å®é™…éœ€æ±‚è¿›è¡Œè°ƒæ•´ï¼Œæˆ‘åªæ˜¯ç®€å•åˆ—ä¸¾ä¸€äº›å¸¸ç”¨é…ç½®ï¼šæ›´å¤šè¯·<a href="https://code.visualstudio.com/docs/editor/variables-reference">å‚è€ƒå®˜ç½‘</a></p><blockquote><p><code>start:debug</code> æŒ‡ä»¤æ·»åŠ  <code>9229</code> ç«¯å£ï¼Œæ˜ å°„åˆ°ä¸‹é¢ç¬¬ä¸€ä¸ªè°ƒè¯•é…ç½®ï¼š</p></blockquote><blockquote><p><code>0.0.0.0</code> æ˜¯è·¯ç”±è¡¨çš„é»˜è®¤è·¯ç”±ï¼Œè¡¨ç¤ºæ•´ä¸ªç½‘ç»œï¼Œå³ç½‘ç»œå†…çš„æ‰€æœ‰ä¸»æœº</p></blockquote><pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"0.2.0"</span><span class="token punctuation">,</span>  <span class="token property">"configurations"</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"node"</span><span class="token punctuation">,</span>      <span class="token property">"request"</span><span class="token operator">:</span> <span class="token string">"attach"</span><span class="token punctuation">,</span>      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Attach attach localhost"</span><span class="token punctuation">,</span>      <span class="token property">"port"</span><span class="token operator">:</span> <span class="token number">9229</span><span class="token punctuation">,</span>      <span class="token property">"skipFiles"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"&lt;node_internals>/**"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token property">"timeout"</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>      <span class="token property">"restart"</span><span class="token operator">:</span> <span class="token boolean">true</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#123;</span>      <span class="token property">"address"</span><span class="token operator">:</span> <span class="token string">"172.16.148.220"</span><span class="token punctuation">,</span>      <span class="token property">"localRoot"</span><span class="token operator">:</span> <span class="token string">"$&#123;workspaceFolder&#125;"</span><span class="token punctuation">,</span>      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Attach to Remote - 172.16.148.220"</span><span class="token punctuation">,</span>      <span class="token property">"port"</span><span class="token operator">:</span> <span class="token number">30229</span><span class="token punctuation">,</span> <span class="token comment">// 9229 æ˜ å°„åˆ°ä¸»æœºæœåŠ¡å¯¹å¤–å‘ç°çš„ç«¯å£</span>      <span class="token property">"remoteRoot"</span><span class="token operator">:</span> <span class="token string">"/usr/src/app"</span><span class="token punctuation">,</span> <span class="token comment">// æ˜¯ docker å®¹å™¨é‡Œé¢ä»£ç å­˜æ”¾çš„ä½ç½®</span>      <span class="token property">"request"</span><span class="token operator">:</span> <span class="token string">"attach"</span><span class="token punctuation">,</span>      <span class="token property">"skipFiles"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"&lt;node_internals>/**"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"node"</span><span class="token punctuation">,</span>      <span class="token property">"restart"</span><span class="token operator">:</span> <span class="token boolean">true</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#123;</span>      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"node"</span><span class="token punctuation">,</span>      <span class="token property">"request"</span><span class="token operator">:</span> <span class="token string">"launch"</span><span class="token punctuation">,</span>      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Debug Nest Framework"</span><span class="token punctuation">,</span>      <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"$&#123;workspaceFolder&#125;/src/main.ts"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token property">"runtimeArgs"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"--nolazy"</span><span class="token punctuation">,</span> <span class="token string">"-r"</span><span class="token punctuation">,</span> <span class="token string">"ts-node/register/transpile-only"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token property">"sourceMaps"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>      <span class="token property">"cwd"</span><span class="token operator">:</span> <span class="token string">"$&#123;workspaceRoot&#125;"</span><span class="token punctuation">,</span>      <span class="token property">"outputCapture"</span><span class="token operator">:</span> <span class="token string">"std"</span><span class="token punctuation">,</span>      <span class="token property">"stopOnEntry"</span><span class="token operator">:</span> <span class="token boolean">false</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">]</span><span class="token punctuation">&#125;</span></code></pre><p>å½“æˆ‘ä»¬é…ç½®äº†ç±»ä¼¼å¦‚ä¸Šå¤šä¸ªè°ƒè¯•é¡¹åï¼Œç‚¹å‡» <code>vscode</code> å·¦ä¾§è°ƒè¯•å›¾æ ‡ï¼Œå¯ä»¥å‘ç°å¯åŠ¨è¿è¡Œå’Œè°ƒè¯•çš„æŒ‰é’®æ—è¾¹å¤šäº†ä¸ªä¸‹æ‹‰é€‰é¡¹(å±•ç¤ºçš„è°ƒè¯•é…ç½®é¡¹åç§°)ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©å…¶ä¸­é…ç½®çš„æŸä¸€ä¸ªè°ƒè¯•é…ç½®å¹¶å¯åŠ¨è°ƒè¯•.</p><h3 id="è°ƒè¯•æŠ€å·§"><a href="#è°ƒè¯•æŠ€å·§" class="headerlink" title="è°ƒè¯•æŠ€å·§"></a>è°ƒè¯•æŠ€å·§</h3><p>æ‰¾åˆ°æ–­ç‚¹ä½ç½®ï¼Œé¼ æ ‡æŒ‡ä¸­çº¢è‰²æ–­ç‚¹å¹¶å³é”®ï¼Œä¼šå‡ºç°ï¼šâ€œç¼–è¾‘æ–­ç‚¹â€ã€â€œåˆ é™¤æ–­ç‚¹â€ã€â€œç¦ç”¨æ–­ç‚¹â€ä¸‰ç§æ“ä½œ</p><p>ç¼–è¾‘æ–­ç‚¹ï¼Œå¯ä»¥é€‰æ‹©â€œè¡¨è¾¾å¼â€ã€â€œå‘½ä¸­æ¬¡æ•°â€å’Œâ€œæ—¥å¿—ä¿¡æ¯â€ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><a href="/images/tools/vscode-debug/p4.png"><img src="/images/tools/vscode-debug/p4.png" alt="vscode-debug-p4" loading="lazy"></a></p><ul><li><p>è¡¨è¾¾å¼ï¼šå½“æ¡ä»¶è¡¨è¾¾å¼å€¼ä¸ºçœŸæ—¶ï¼Œæ–­ç‚¹æ‰ä¼šç”Ÿæ•ˆï¼Œå¦åˆ™æ–­ç‚¹ä¸ä¼šç”Ÿæ•ˆ. ä¾‹å¦‚ï¼š<code>req.headers[&#39;user-agent&#39;].includes(&#39;iPhone&#39;)</code>ï¼Œåˆæˆ–è€… <code>i === 50</code></p></li><li><p>å‘½ä¸­æ¬¡æ•°ï¼šå½“å‘½ä¸­æ¬¡æ•°æ»¡è¶³æ¡ä»¶æ‰ä¼šä¸­æ–­ï¼Œä¹Ÿå°±æ˜¯æ»¡è¶³æ¡ä»¶åï¼Œæ–­ç‚¹æ‰ä¼šç”Ÿæ•ˆï¼Œä¾‹å¦‚ï¼š<code>== 5</code> æˆ–è€… <code>&gt;= 7</code> è¿™ç§æ ¼å¼</p></li><li><p>æ—¥å¿—æ¶ˆæ¯ï¼šç±»ä¼¼æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œå˜é‡æ›¿æ¢ç¬¦ <code>&#123;&#125;</code>ï¼Œå°†ç»“æœæ‰“å°è¾“å‡ºåˆ°è°ƒè¯•æ§åˆ¶å°ï¼Œ<strong>å®ƒå¹¶ä¸ä¼šé˜»å¡ç¨‹åºè¿è¡Œ</strong></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> å·¥å…·å­¦ä¹  </category>
          
          <category> ç¨‹åºè°ƒè¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> debug </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mobile ç«¯çš„çº§è”é€‰æ‹©å•å¤šé€‰ç»„ä»¶å®ç°</title>
      <link href="/share/mobile-cascader-multiple/"/>
      <url>/share/mobile-cascader-multiple/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="Why"><a href="#Why" class="headerlink" title="Why?"></a><code>Why?</code></h3><p>çº§è”é€‰æ‹©ç»„ä»¶åœ¨<code>UI</code>åº“ä¸­å¾ˆå¸¸è§ï¼Œå‡ ä¹æ‰€æœ‰çš„<code>UI</code>åº“éƒ½æ”¯æŒã€‚ä½†æ˜¯ä½ ä¼šå‘ç°å‡ ä¹æ‰€æœ‰ç”¨äº <code>PC</code> ç«¯çš„ <code>Cascade</code> ç»„ä»¶éƒ½æ”¯æŒå¯¹é€‰é¡¹å¤šé€‰å’Œæœç´¢ï¼Œè€Œ <code>Mobile</code> ç«¯çš„ <code>Cascade</code> ç»„ä»¶ï¼Œæ›´å¤šçš„æ˜¯ä»¥ <code>picker</code> çš„å½¢å¼ä»…æ”¯æŒå•é€‰ã€‚</p><p>å±€é™æ€§å¤§ï¼ŒåŒæ—¶åœ¨éƒ¨åˆ†ä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œä¾‹å¦‚è¡¨å•ç»„ä»¶ï¼Œåœ¨ <code>PC</code> å’Œ <code>Mobile</code> ç«¯çš„ä¸åŒå‘ˆç°å…¼å®¹ï¼Œéœ€è¦æˆ‘ä»¬ä¸å¾—ä¸æ”¯æŒå¤šé€‰è¿™ä¸€è¦æ±‚â€¦</p><p>å¦‚æœä½¿ç”¨ä¼ ç»Ÿçš„ <code>picker</code> å½¢å¼ï¼Œé‚£ä¹ˆåœ¨äº¤äº’ä¸Šå®ƒä¸å¯èƒ½å®ç°å¤šé€‰æ“ä½œï¼Œæ­¤å¤–å¦‚æœçº§è”å±‚çº§è¿‡æ·±ç”šè‡³æ— æ³•åœ¨æ‰‹æœºç«¯å‹å¥½å±•ç¤ºï¼Œæ‰€ä»¥æˆ‘å¦è¾Ÿè¹Šå¾„ï¼Œå‚è€ƒäº†ç›®å‰éƒ¨åˆ†<code>Mobile-UI</code> åº“å¯¹â€œåœ°å€é€‰æ‹©å™¨â€çš„äº¤äº’æ•ˆæœï¼Œå³ï¼šé€šè¿‡ <code>tab</code> æ¸²æŸ“ä¸åŒå±‚çº§å®ç°é€‰é¡¹é€‰æ‹©ã€‚ğŸ¤¨ğŸ¤¨ğŸ¤¨</p><span id="more"></span><h3 id="éœ€è¦å‡†å¤‡ä»€ä¹ˆï¼Ÿ"><a href="#éœ€è¦å‡†å¤‡ä»€ä¹ˆï¼Ÿ" class="headerlink" title="éœ€è¦å‡†å¤‡ä»€ä¹ˆï¼Ÿ"></a>éœ€è¦å‡†å¤‡ä»€ä¹ˆï¼Ÿ</h3><p>ç”±äºæˆ‘çš„æ¡ˆä¾‹ä¸­ä½¿ç”¨äº†åŸºç¡€çš„<code>UI</code>åº“ç»„ä»¶ï¼Œæ‰€ä»¥éœ€è¦ä½ çš„é¡¹ç›®å¼•å…¥æ‰èƒ½ä½¿ç”¨ï¼Œä¾‹å¦‚ <code>tabsã€cellã€checkbox</code>â€¦</p><p>å½“ç„¶è¿™äº›åŸºç¡€ç»„ä»¶ä¹Ÿå¯ä»¥ç”±ä½ è‡ªå·±å»å°è£…ï¼Œä¸ºäº†èŠ‚çº¦æ¡ˆä¾‹åŠŸèƒ½çš„å®ç°æˆæœ¬ï¼Œæˆ‘è¿™ä½¿ç”¨çš„ <code>element å’Œ vant</code><del>ä½¿ç”¨ vant æ˜¯å› ä¸ºé¡¹ç›®é‡Œç§»åŠ¨ç«¯ç”¨çš„ vant åº“ï¼ŒåŒæ—¶ä½¿ç”¨ element æ˜¯å› ä¸º vant çš„ checkbox æ²¡æœ‰æä¾›åŠé€‰çŠ¶æ€ï¼Œè¿™ä¸ªä¹Ÿå¯ä»¥è‡ªå·±å®ç°</del>ğŸ˜…ğŸ˜…ğŸ˜…â€¦</p><h3 id="å®ç°æ€è·¯ï¼Ÿ"><a href="#å®ç°æ€è·¯ï¼Ÿ" class="headerlink" title="å®ç°æ€è·¯ï¼Ÿ"></a>å®ç°æ€è·¯ï¼Ÿ</h3><ul><li><p>æ˜ç¡®éœ€è¦æ¥å—çš„ <code>props</code> å’Œå‘å¤–ä¼ æ’­çš„ <code>event</code></p></li><li><p>æ˜ç¡® <code>v-model</code> å˜é‡ç±»å‹å’Œå˜æ›´æ¡ä»¶ï¼Œä¾‹å¦‚ç‚¹å‡» <code>cell</code> ? è¿˜æ˜¯ç‚¹å‡» <code>cell-right-slot</code>?</p></li><li><p>æ˜ç¡®å½“å‰äº¤äº’çŠ¶æ€ï¼Œå³ï¼šç”¨æˆ·çš„æ¯ä¸€æ¬¡ç‚¹å‡»æ“ä½œï¼Œæˆ‘ä»¬éƒ½åº”è¯¥è®°å½•ä¸‹å½“å‰æ“ä½œçš„é€‰é¡¹è·¯å¾„ <code>currentSelectPath</code></p></li><li><p>æ ¹æ®ä¸Šä¸€æ­¥çš„è·¯å¾„ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆè½»æ¾çš„æ‹¿åˆ°éœ€è¦æ¸²æŸ“çš„å¯é€‰å±‚çº§ <code>selectableOptions</code> å’Œæ¸²æŸ“çš„ <code>tabs</code> ï¼Œå¦‚æœ <code>currentSelectPath</code> ä¸ºç©ºï¼Œåˆ™å±•ç¤ºæ ¹å±‚çº§å³å¯ã€‚è‡³æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆè½»æ¾çš„å®ç°é€‰é¡¹åˆ‡æ¢è¿™ä¸€äº¤äº’æ•ˆæœå’Œå‘ˆç°</p></li><li><p>ä¸‹ä¸€æ­¥æ˜¯å€¼ç»‘å®šï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ® <code>currentSelectPath</code> å’Œå½“å‰ç‚¹å‡»çš„ <code>option</code> æ¨æ–­å®ƒçš„å®Œæ•´è·¯å¾„ï¼Œå¹¶ <code>emit:input</code> å®ç°æ•°æ®åŒå‘ç»‘å®š</p></li><li><p>ä¸Šé¢æ˜¯ä¼ ç»Ÿ <code>Mobile-Cascade</code> çš„äº¤äº’å®ç°ï¼Œä¸‹é¢å¼€å§‹ä¼˜åŒ–å‡çº§</p></li><li><p>æ·»åŠ è®¡ç®—å±æ€§ï¼Œè®¡ç®—æ¯ä¸ªé€‰é¡¹æ˜¯å¦è¢«å…¨é€‰ã€åŠé€‰ï¼Œå¹¶å±•ç¤ºå¯¹åº”çš„ <code>icon</code> å’Œè¢«é€‰ä¸­æ ·å¼</p></li><li><p>æ·»åŠ å•å¤šé€‰æ”¯æŒï¼Œå•é€‰æ—¶ç‚¹å‡»å¶å­èŠ‚ç‚¹é€‰ä¸­ï¼Œç‚¹å‡»çˆ¶èŠ‚ç‚¹åˆ™å±•å¼€å­èŠ‚ç‚¹ã€‚å¤šé€‰æ—¶ï¼Œä»…ç‚¹å‡» <code>icon</code> é€‰ä¸­æ‰€æœ‰å¶å­èŠ‚ç‚¹</p></li><li><p>é€’å½’è®¡ç®—å·²é€‰é¡¹çš„<code>label</code>ï¼Œå¹¶ç”¨äºç•Œé¢å‘ˆç°</p></li><li><p>æ”¯æŒ <code>filterable</code> å¯¹çº§è”é€‰é¡¹è¿›è¡Œæœç´¢é€‰ä¸­ï¼Œäº¤äº’å‚è€ƒè‡ª <code>element</code></p></li></ul><h3 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h3><p><code>ä»£ç åŸºäº Vue2 ts decorator è¯­æ³•å®ç°ï¼Œå¯æ ¹æ®è‡ªå·±éœ€è¦ï¼Œå¯¹åº”è°ƒæ•´æŠ€æœ¯æ ˆ.</code></p><h4 id="æ¨¡æ¿"><a href="#æ¨¡æ¿" class="headerlink" title="æ¨¡æ¿"></a>æ¨¡æ¿</h4><p><code>input ç»„ä»¶ç”¨äºå¯¹å·²é€‰é¡¹è¿›è¡Œå‘ˆç°ï¼Œä½ å¯ä»¥åˆ‡æ¢æˆ tagsã€‚</code></p><p><code>å¦å¤–è¯¥ä¾‹å­ä»…å¯¹æ ¸å¿ƒåŠŸèƒ½åšå®ç°ï¼Œå¦‚æœ‰éœ€è¦ä½ å¯ä»¥æ·»åŠ ä¸€äº›é¢å¤–çš„äº¤äº’å’Œ props</code></p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mobile-cascader<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>readonly<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>selectedLabel<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; selectedLabel &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>æš‚æ— å†…å®¹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-else</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-input</span>        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cascade-input<span class="token punctuation">"</span></span>        <span class="token attr-name">readonly</span>        <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>selectedLabel<span class="token punctuation">"</span></span>        <span class="token attr-name">:placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>placeholder<span class="token punctuation">"</span></span>        <span class="token attr-name">@focus</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>showPicker = true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>suffix</span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span>            <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>selectedLength<span class="token punctuation">"</span></span>            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>el-icon-circle-close<span class="token punctuation">"</span></span>            <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span> <span class="token property">top</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span> <span class="token property">right</span><span class="token punctuation">:</span> 4px</span><span class="token punctuation">"</span></span></span>            <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>innerValue = []<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-input</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-popup</span>        <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>showPicker<span class="token punctuation">"</span></span>        <span class="token attr-name">:lazy-render</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span>        <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bottom<span class="token punctuation">"</span></span>        <span class="token attr-name">get-container</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>body<span class="token punctuation">"</span></span>        <span class="token attr-name">round</span>        <span class="token attr-name">closeable</span>        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>popover<span class="token punctuation">"</span></span>        <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123; height: <span class="token punctuation">'</span>486px<span class="token punctuation">'</span> &#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>innerOptions.length<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title p-16<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            &#123;&#123; title &#125;&#125;            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>selected<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>(å·²é€‰æ‹© &#123;&#123; selectedLength &#125;&#125; é¡¹)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-input</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æœç´¢é€‰é¡¹<span class="token punctuation">"</span></span> <span class="token attr-name">prefix-icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>el-icon-search<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>optionFilterKey<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SelectorList</span>            <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>optionFilterKey<span class="token punctuation">"</span></span>            <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>filterValue<span class="token punctuation">"</span></span>            <span class="token attr-name">:options</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>filterOptions<span class="token punctuation">"</span></span>            <span class="token attr-name">:multiple</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>multiple<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabs</span>            <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!optionFilterKey<span class="token punctuation">"</span></span>            <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>activeTab<span class="token punctuation">"</span></span>            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>p-6<span class="token punctuation">"</span></span>            <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#02A7F0<span class="token punctuation">"</span></span>            <span class="token attr-name">title-active-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#02A7F0<span class="token punctuation">"</span></span>            <span class="token attr-name">title-inactive-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#000<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token comment">&lt;!-- FIX: value is not unique --></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tab</span>              <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(tab, tabIdx) in selectableOptions<span class="token punctuation">"</span></span>              <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getTabTitle(tab, tabIdx)<span class="token punctuation">"</span></span>              <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>`$&#123;getTabPrePath(tabIdx)&#125;_$&#123;tabIdx&#125;`<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell-group</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>option-wrapper<span class="token punctuation">"</span></span> <span class="token attr-name">:border</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell</span>                  <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(option, optionIdx) in tab<span class="token punctuation">"</span></span>                  <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>`$&#123;tabIdx&#125;-$&#123;optionIdx&#125;-$&#123;option.value&#125;`<span class="token punctuation">"</span></span>                  <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>option.label<span class="token punctuation">"</span></span>                  <span class="token attr-name">:title-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123; selectedCell: checkSelected(option, tabIdx) &#125;<span class="token punctuation">"</span></span>                  <span class="token attr-name">clickable</span>                  <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>optionClickHandle(option, tabIdx)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>right-icon</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-checkbox</span>                      <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>showableCheckbox(option, tabIdx)<span class="token punctuation">"</span></span>                      <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getOptionSelectedStatus(option, tabIdx).selectAll<span class="token punctuation">"</span></span>                      <span class="token attr-name">:indeterminate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getOptionSelectedStatus(option, tabIdx).indeterminate<span class="token punctuation">"</span></span>                      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>check-box<span class="token punctuation">"</span></span>                      <span class="token attr-name">@click.native.stop</span>                      <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>optionSelectChange(option, tabIdx)<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span>                      <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>arrow<span class="token punctuation">"</span></span>                      <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>option.children &amp;&amp; option.children.length<span class="token punctuation">"</span></span>                      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>arrow-icon<span class="token punctuation">"</span></span>                      <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>16<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-cell</span><span class="token punctuation">></span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-cell-group</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tab</span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabs</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-empty</span>          <span class="token attr-name">v-else</span>          <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æš‚æ— æ•°æ®<span class="token punctuation">"</span></span>          <span class="token attr-name">:image</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>require(<span class="token punctuation">'</span>@/assets/images/empty-image-default.png<span class="token punctuation">'</span>)<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-popup</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></code></pre><h4 id="æ ¸å¿ƒé€»è¾‘"><a href="#æ ¸å¿ƒé€»è¾‘" class="headerlink" title="æ ¸å¿ƒé€»è¾‘"></a>æ ¸å¿ƒé€»è¾‘</h4><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">&#123;</span> CascaderOption <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'element-ui/types/cascader'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> cloneDeep <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'lodash'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> Component<span class="token punctuation">,</span> ModelSync<span class="token punctuation">,</span> Prop<span class="token punctuation">,</span> Vue <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue-property-decorator'</span><span class="token punctuation">;</span><span class="token punctuation">]</span><span class="token comment">// è¿™ä¸ªæ˜¯å¯¹é€‰é¡¹æœç´¢åï¼Œå±•ç¤ºæ‹‰å¹³åçš„é€‰é¡¹åˆ—è¡¨</span><span class="token keyword">import</span> SelectorList <span class="token keyword">from</span> <span class="token string">'./selectorList.vue'</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token constant">ROOT</span> <span class="token operator">=</span> <span class="token string">'_ROOT_'</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token constant">SPLIT_CHAR</span> <span class="token operator">=</span> <span class="token string">'|'</span><span class="token punctuation">;</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  name<span class="token operator">:</span> <span class="token string">'MobileCascade'</span><span class="token punctuation">,</span>  components<span class="token operator">:</span> <span class="token punctuation">&#123;</span>    SelectorList<span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">MobileCascade</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">&#123;</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">ModelSync</span></span><span class="token punctuation">(</span><span class="token string">'value'</span><span class="token punctuation">,</span> <span class="token string">'input'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> type<span class="token operator">:</span> <span class="token builtin">Array</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token keyword">public</span> innerValue<span class="token operator">!</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Prop</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">readonly</span> innerOptions<span class="token operator">!</span><span class="token operator">:</span> CascaderOption<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Prop</span></span><span class="token punctuation">(</span>String<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">readonly</span> placeholder<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Prop</span></span><span class="token punctuation">(</span>String<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">readonly</span> title<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Prop</span></span><span class="token punctuation">(</span>String<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">readonly</span> <span class="token keyword">readonly</span><span class="token operator">!</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Prop</span></span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> type<span class="token operator">:</span> Boolean <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">readonly</span> multiple<span class="token operator">!</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>  <span class="token keyword">public</span> activeTab <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token keyword">public</span> showPicker <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token keyword">public</span> optionFilterKey <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>  <span class="token keyword">public</span> currentSelectPath<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">/* ---------- filter v-model start --------- */</span>  <span class="token keyword">public</span> <span class="token keyword">get</span> <span class="token function">filterValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">innerValue2Value</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>innerValue<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token keyword">set</span> <span class="token function">filterValue</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>innerValue <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">value2InnerValue</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token comment">/* ------ end ---------- */</span>  <span class="token keyword">public</span> <span class="token keyword">get</span> <span class="token function">selectedLabel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> innerVal <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>multiple <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>innerValue <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>innerValue<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> innerVal<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getOptionPathLabel</span><span class="token punctuation">(</span>v <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'ã€'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token keyword">get</span> <span class="token function">selectedLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>multiple <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>innerValue<span class="token punctuation">.</span>length <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>innerValue<span class="token operator">?.</span>length <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token keyword">get</span> <span class="token function">selectableOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token constant">ROOT</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentSelectPath<span class="token punctuation">]</span>      <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> idx<span class="token punctuation">,</span> arr<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getOptionChildrenByPath</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> idx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token operator">!</span><span class="token operator">!</span>o<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token keyword">get</span> <span class="token function">filterOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> flatterOption <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getFlatterOptions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>innerOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> flatterOption<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token operator">=></span> o<span class="token punctuation">.</span>label<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>optionFilterKey<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>currentSelectPath <span class="token operator">=</span> <span class="token punctuation">(</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>multiple <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>innerValue<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">??</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>innerValue    <span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token function">value2InnerValue</span><span class="token punctuation">(</span>val<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> tv <span class="token operator">=</span> val<span class="token operator">?.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token operator">=></span> v<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token constant">SPLIT_CHAR</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>multiple <span class="token operator">?</span> tv <span class="token operator">:</span> tv<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">??</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token function">innerValue2Value</span><span class="token punctuation">(</span>v<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> tv <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>multiple <span class="token operator">?</span> v <span class="token operator">:</span> v<span class="token punctuation">.</span>length <span class="token operator">?</span> <span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> tv<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>o <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token constant">SPLIT_CHAR</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token function">getOptionChildrenByPath</span><span class="token punctuation">(</span>path<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> path<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>      <span class="token punctuation">(</span>prev<span class="token punctuation">,</span> current<span class="token punctuation">)</span> <span class="token operator">=></span>        current <span class="token operator">===</span> <span class="token constant">ROOT</span> <span class="token operator">?</span> prev <span class="token operator">:</span> prev<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token operator">=></span> o<span class="token punctuation">.</span>value <span class="token operator">===</span> current<span class="token punctuation">)</span><span class="token operator">?.</span>children <span class="token operator">??</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>innerOptions<span class="token punctuation">,</span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token function">getOptionPathLabel</span><span class="token punctuation">(</span>path<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>innerOptions<span class="token punctuation">;</span>    <span class="token keyword">return</span> path<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>labels<span class="token punctuation">,</span> val<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token keyword">const</span> opt <span class="token operator">=</span> options<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token operator">=></span> o<span class="token punctuation">.</span>value <span class="token operator">===</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>      options <span class="token operator">=</span> opt<span class="token operator">?.</span>children <span class="token operator">??</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">...</span>labels<span class="token punctuation">,</span> opt<span class="token operator">?.</span>label <span class="token operator">??</span> <span class="token string">''</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token function">getTabPrePath</span><span class="token punctuation">(</span>tabIdx<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentSelectPath<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> tabIdx<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token constant">SPLIT_CHAR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token function">getOptionPath</span><span class="token punctuation">(</span>option<span class="token operator">:</span> CascaderOption<span class="token punctuation">,</span> tabIdx<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> prePath <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getTabPrePath</span><span class="token punctuation">(</span>tabIdx<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> prePath <span class="token operator">?</span> prePath <span class="token operator">+</span> <span class="token constant">SPLIT_CHAR</span> <span class="token operator">+</span> option<span class="token punctuation">.</span>value <span class="token operator">:</span> option<span class="token punctuation">.</span>value<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token function">getTabTitle</span><span class="token punctuation">(</span>tab<span class="token operator">:</span> CascaderOption<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> tabIdx<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> tab<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token operator">=></span> o<span class="token punctuation">.</span>value <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentSelectPath<span class="token punctuation">[</span>tabIdx<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">?.</span>label <span class="token operator">??</span> <span class="token string">'---'</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token function">showableCheckbox</span><span class="token punctuation">(</span>option<span class="token operator">:</span> CascaderOption<span class="token punctuation">,</span> tabIdx<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>multiple <span class="token operator">||</span>      <span class="token punctuation">(</span><span class="token operator">!</span>option<span class="token punctuation">.</span>children<span class="token operator">?.</span>length <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getOptionSelectedStatus</span><span class="token punctuation">(</span>option<span class="token punctuation">,</span> tabIdx<span class="token punctuation">)</span><span class="token punctuation">.</span>selectAll<span class="token punctuation">)</span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token function">checkSelected</span><span class="token punctuation">(</span>option<span class="token operator">:</span> CascaderOption<span class="token punctuation">,</span> tabIdx<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> optionPath <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getOptionPath</span><span class="token punctuation">(</span>option<span class="token punctuation">,</span> tabIdx<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">innerValue2Value</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>innerValue<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> value<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token operator">=></span> p<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span>optionPath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">setCurrentPath</span><span class="token punctuation">(</span>option<span class="token operator">:</span> CascaderOption<span class="token punctuation">,</span> tabIdx<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> skip <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>currentSelectPath <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentSelectPath<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> tabIdx<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span>option<span class="token punctuation">.</span>value<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// update tab after tabs(dependences currentSelectPath) rerender.</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>option<span class="token punctuation">.</span>children<span class="token operator">?.</span>length <span class="token operator">&amp;&amp;</span> skip<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>activeTab <span class="token operator">=</span> tabIdx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">optionClickHandle</span><span class="token punctuation">(</span>option<span class="token operator">:</span> CascaderOption<span class="token punctuation">,</span> tabIdx<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setCurrentPath</span><span class="token punctuation">(</span>option<span class="token punctuation">,</span> tabIdx<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// single selection and leaf node, click the cell to automatically select</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>multiple <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>option<span class="token punctuation">.</span>children<span class="token operator">?.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">optionSelectChange</span><span class="token punctuation">(</span>option<span class="token punctuation">,</span> tabIdx<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token function">getOptionSelectedStatus</span><span class="token punctuation">(</span>option<span class="token operator">:</span> CascaderOption<span class="token punctuation">,</span> tabIdx<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> prePath <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getTabPrePath</span><span class="token punctuation">(</span>tabIdx<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> leafValues <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">findAllLeafNodesPath</span><span class="token punctuation">(</span>option<span class="token punctuation">,</span> prePath<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">innerValue2Value</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>innerValue<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> selectAll <span class="token operator">=</span> leafValues<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token operator">=></span> value<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> indeterminate <span class="token operator">=</span> <span class="token operator">!</span>selectAll <span class="token operator">&amp;&amp;</span> leafValues<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token operator">=></span> value<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span> selectAll<span class="token punctuation">,</span> indeterminate <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token comment">// option is a leaf node, it's includes itself. and only one</span>  <span class="token keyword">public</span> <span class="token function">findAllLeafNodesPath</span><span class="token punctuation">(</span>root<span class="token operator">:</span> CascaderOption<span class="token punctuation">,</span> prePath <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> values<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> queue<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>CascaderOption <span class="token operator">&amp;</span> <span class="token punctuation">&#123;</span> prePath<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">&#125;</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token function">cloneDeep</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">&#123;</span> <span class="token operator">...</span>root<span class="token punctuation">,</span> prePath <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>queue<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">const</span> node <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">!</span><span class="token punctuation">;</span>      <span class="token keyword">const</span> path <span class="token operator">=</span> node<span class="token punctuation">.</span>prePath <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>node<span class="token punctuation">.</span>prePath<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token constant">SPLIT_CHAR</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>node<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> node<span class="token punctuation">.</span>value<span class="token punctuation">;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token operator">?.</span>children<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>node<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token operator">...</span>n<span class="token punctuation">,</span> prePath<span class="token operator">:</span> path <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>        values<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> values<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">optionSelectChange</span><span class="token punctuation">(</span>option<span class="token operator">:</span> CascaderOption<span class="token punctuation">,</span> tabIdx<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>multiple <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token operator">!</span>option<span class="token punctuation">.</span>children<span class="token operator">?.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setCurrentPath</span><span class="token punctuation">(</span>option<span class="token punctuation">,</span> tabIdx<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> prePath <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getTabPrePath</span><span class="token punctuation">(</span>tabIdx<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> leafValues <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">findAllLeafNodesPath</span><span class="token punctuation">(</span>option<span class="token punctuation">,</span> prePath<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">innerValue2Value</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>innerValue<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> isCheckedAll <span class="token operator">=</span> leafValues<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token operator">=></span> value<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> newChecked <span class="token operator">=</span> <span class="token operator">!</span>isCheckedAll<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>multiple<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token comment">// single-selectingï¼Œthe clicked option is always selected</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>innerValue <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">value2InnerValue</span><span class="token punctuation">(</span>leafValues<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>      leafValues<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>newChecked <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>value<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          value<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>newChecked <span class="token operator">&amp;&amp;</span> value<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          value <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token operator">=></span> o <span class="token operator">!==</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>innerValue <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">value2InnerValue</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token function">getFlatterOptions</span><span class="token punctuation">(</span>opts<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>CascaderOption <span class="token operator">&amp;</span> <span class="token punctuation">&#123;</span> preValue<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> preLabel<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> cloneOpt <span class="token operator">=</span> <span class="token function">cloneDeep</span><span class="token punctuation">(</span>opts<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> options<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token punctuation">&#123;</span> label<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> value<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">&#125;</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>cloneOpt<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">const</span> node <span class="token operator">=</span> cloneOpt<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">!</span><span class="token punctuation">;</span>      <span class="token keyword">const</span> optVal <span class="token operator">=</span> node<span class="token punctuation">.</span>preValue <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>node<span class="token punctuation">.</span>preValue<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token constant">SPLIT_CHAR</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>node<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> node<span class="token punctuation">.</span>value<span class="token punctuation">;</span>      <span class="token keyword">const</span> optLabel <span class="token operator">=</span> node<span class="token punctuation">.</span>preLabel <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>node<span class="token punctuation">.</span>preLabel<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>node<span class="token punctuation">.</span>label<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> node<span class="token punctuation">.</span>label<span class="token punctuation">;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        cloneOpt<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>          <span class="token operator">...</span>node<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token operator">...</span>n<span class="token punctuation">,</span> preValue<span class="token operator">:</span> optVal<span class="token punctuation">,</span> preLabel<span class="token operator">:</span> optLabel <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>        options<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> label<span class="token operator">:</span> optLabel<span class="token punctuation">,</span> value<span class="token operator">:</span> optVal <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> options<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="æ ·å¼æ–‡ä»¶"><a href="#æ ·å¼æ–‡ä»¶" class="headerlink" title="æ ·å¼æ–‡ä»¶"></a>æ ·å¼æ–‡ä»¶</h4><pre class="language-less" data-language="less"><code class="language-less"><span class="token selector">.popover</span> <span class="token punctuation">&#123;</span>  <span class="token selector">.title</span> <span class="token punctuation">&#123;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 48px<span class="token punctuation">;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 48px<span class="token punctuation">;</span>    <span class="token selector">.selected</span> <span class="token punctuation">&#123;</span>      <span class="token property">margin-left</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>      <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>      <span class="token property">color</span><span class="token punctuation">:</span> #427daf<span class="token punctuation">;</span>      <span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  <span class="token selector">.check-box</span> <span class="token punctuation">&#123;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 0 5px 0 10px<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token selector">.option-wrapper</span> <span class="token punctuation">&#123;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 350px<span class="token punctuation">;</span>    <span class="token property">overflow-y</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token selector">.selectedCell</span> <span class="token punctuation">&#123;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #409eef<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token selector">.arrow-icon</span> <span class="token punctuation">&#123;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">right</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token selector">.p-6</span> <span class="token punctuation">&#123;</span>  <span class="token property">padding</span><span class="token punctuation">:</span> 0 6px <span class="token important">!important</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.p-16</span> <span class="token punctuation">&#123;</span>  <span class="token property">padding</span><span class="token punctuation">:</span> 0 16px <span class="token important">!important</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">/deep/.cascade-input</span> <span class="token punctuation">&#123;</span>  <span class="token selector">input</span> <span class="token punctuation">&#123;</span>    <span class="token property">text-overflow</span><span class="token punctuation">:</span> ellipsis<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token selector">/deep/.van-cell:active</span> <span class="token punctuation">&#123;</span>  <span class="token property">background</span><span class="token punctuation">:</span> #f2f3f5<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">/deep/.van-tab</span> <span class="token punctuation">&#123;</span>  <span class="token property">padding</span><span class="token punctuation">:</span> 0 10px <span class="token important">!important</span><span class="token punctuation">;</span>  <span class="token property">margin</span><span class="token punctuation">:</span> 0 5px <span class="token important">!important</span><span class="token punctuation">;</span>  <span class="token property">flex</span><span class="token punctuation">:</span> 0 0 auto <span class="token important">!important</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="SelectorList-ç»„ä»¶æºç "><a href="#SelectorList-ç»„ä»¶æºç " class="headerlink" title="SelectorList ç»„ä»¶æºç "></a><code>SelectorList</code> ç»„ä»¶æºç </h4><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>select-group<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-checkbox-group</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell-group</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-cell</span>          <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item in options<span class="token punctuation">"</span></span>          <span class="token attr-name">clickable</span>          <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.value<span class="token punctuation">"</span></span>          <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.label<span class="token punctuation">"</span></span>          <span class="token attr-name">:title-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123; selectedCell: computeShow(item) &#125;<span class="token punctuation">"</span></span>          <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>handleClick(item)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#right-icon</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-checkbox</span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkboxes<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#icon</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span>                  <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>computeShow(item)<span class="token punctuation">"</span></span>                  <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>success<span class="token punctuation">"</span></span>                  <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#000<span class="token punctuation">"</span></span>                  <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span> <span class="token property">border</span><span class="token punctuation">:</span> none</span><span class="token punctuation">"</span></span></span> <span class="token punctuation">/></span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-checkbox</span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-cell</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-cell-group</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-checkbox-group</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">  <span class="token keyword">import</span> <span class="token punctuation">&#123;</span> Component<span class="token punctuation">,</span> ModelSync<span class="token punctuation">,</span> Prop<span class="token punctuation">,</span> Vue <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue-property-decorator'</span><span class="token punctuation">;</span>  @<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'selector-list'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">SelectorList</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">&#123;</span>    @<span class="token function">ModelSync</span><span class="token punctuation">(</span><span class="token string">'value'</span><span class="token punctuation">,</span> <span class="token string">'input'</span><span class="token punctuation">)</span> <span class="token keyword">public</span> innerValue<span class="token operator">!</span><span class="token operator">:</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    @<span class="token function">Prop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> readonly options<span class="token operator">?</span><span class="token operator">:</span> Array<span class="token operator">&lt;</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">label</span><span class="token operator">:</span> string<span class="token punctuation">;</span> value<span class="token operator">:</span> string <span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token punctuation">;</span>    @<span class="token function">Prop</span><span class="token punctuation">(</span>Boolean<span class="token punctuation">)</span> <span class="token keyword">public</span> readonly multiple<span class="token operator">!</span><span class="token operator">:</span> boolean<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">opt</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">label</span><span class="token operator">:</span> string<span class="token punctuation">;</span> value<span class="token operator">:</span> string <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">let</span> innerVal <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>innerValue <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>innerValue<span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>multiple<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        innerVal <span class="token operator">=</span> <span class="token punctuation">[</span>opt<span class="token punctuation">.</span>value<span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">const</span> idx <span class="token operator">=</span> innerVal<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span> <span class="token operator">=></span> o <span class="token operator">===</span> opt<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>idx <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          innerVal<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>idx<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>          innerVal<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>innerValue <span class="token operator">=</span> innerVal<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token function">computeShow</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">opt</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">label</span><span class="token operator">:</span> string<span class="token punctuation">;</span> value<span class="token operator">:</span> string <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>innerValue<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span> <span class="token operator">=></span> o <span class="token operator">===</span> opt<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>less<span class="token punctuation">"</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">  <span class="token selector">.select-group</span> <span class="token punctuation">&#123;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>    <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>    <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>    <span class="token property">-webkit-overflow-scrolling</span><span class="token punctuation">:</span> touch<span class="token punctuation">;</span>    <span class="token selector">.selectedCell</span> <span class="token punctuation">&#123;</span>      <span class="token property">color</span><span class="token punctuation">:</span> #409eef<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">.van-cell</span> <span class="token punctuation">&#123;</span>      <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>      <span class="token property">height</span><span class="token punctuation">:</span> 35px<span class="token punctuation">;</span>      <span class="token property">padding</span><span class="token punctuation">:</span> 5px 16px<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> ç»„ä»¶å°è£… </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cascade </tag>
            
            <tag> Mobile-UI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æƒŠå–œç›²ç›’ï¼šä¸€å¤©ä¸€ä¸ªå°æ•…äº‹</title>
      <link href="/diary/joke-story/"/>
      <url>/diary/joke-story/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><blockquote><p>æœ¬æ–‡æ•…äº‹å‡æŠ„å½•è‡ªäº’è”ç½‘ï¼Œä»…ä¸ªäººæ”¶è—æ”¶å½•ï¼Œæ–¹ä¾¿ç»™å¥¹è®²æ•…äº‹çš„æ—¶å€™ä¸ç”¨ä¸´æ—¶å»æ‰¾ï¼Œä¸åšä»»ä½•å•†ä¸šç”¨é€”ä½¿ç”¨ï¼Œéƒ¨åˆ†æ•…äº‹æ–‡æœ«æœ‰æ ‡æ³¨æ¥æº</p></blockquote><p><code>æ”¶å½•ä¸€äº›å¹½é»˜æç¬‘çš„ç¡å‰æ•…äº‹ï¼Œæˆ‘æƒ³åœ¨å¥¹æƒ³å¬çš„æ—¶å€™å¯ä»¥åŠæ—¶çš„è®²ç»™å¥¹...</code></p><span id="more"></span><h2 id="ç¬‘è¯"><a href="#ç¬‘è¯" class="headerlink" title="ç¬‘è¯"></a>ç¬‘è¯</h2><h3 id="æ„å¤–çš„éª¨æŠ˜"><a href="#æ„å¤–çš„éª¨æŠ˜" class="headerlink" title="æ„å¤–çš„éª¨æŠ˜"></a>æ„å¤–çš„éª¨æŠ˜</h3><p>åŒ»ç”Ÿé—®ç—…äººæ˜¯æ€ä¹ˆéª¨æŠ˜çš„ï¼Ÿ</p><p>ç—…äººè¯´ï¼šæˆ‘è§‰å¾—é‹é‡Œæœ‰æ²™å­ï¼Œå°±æ‰¶ç€ç”µçº¿æ†æŠ–é‹ã€‚</p><p>æœ‰ä¸ªäººç»è¿‡é‚£é‡Œï¼Œä»¥ä¸ºæˆ‘è§¦ç”µäº†ï¼Œä¾¿æŠ„èµ·æœ¨æ£ç»™äº†æˆ‘ä¸¤æ£å­</p><h3 id="å¤§è±¡ä¸èš‚èš"><a href="#å¤§è±¡ä¸èš‚èš" class="headerlink" title="å¤§è±¡ä¸èš‚èš"></a>å¤§è±¡ä¸èš‚èš</h3><p>æœ‰ä¸€å¤©ï¼Œå¤§è±¡ä¸å°å¿ƒè¸©åˆ°èš‚èšçªäº†</p><p>èš‚èšå€¾å·¢è€Œå‡ºï¼Œçº·çº·çˆ¬åˆ°å¤§è±¡èº«ä¸Š</p><p>å¤§è±¡æŠ–äº†æŠ–èº«å­ï¼Œå¾ˆå¤šèš‚èšéƒ½æ‰ä¸‹æ¥äº†ï¼Œæ­¤æ—¶è¿˜æœ‰ä¸€åªåœ¨å¤§è±¡è„–å­ä¸Š</p><p>æ‰ä¸‹æ¥çš„èš‚èšå°±å¤§å£°çš„è¯´é“ï¼šææ­»å®ƒï¼Œææ­»å®ƒâ€¦å˜»å˜»</p><h3 id="å°æ˜å’Œå¦ˆå¦ˆ"><a href="#å°æ˜å’Œå¦ˆå¦ˆ" class="headerlink" title="å°æ˜å’Œå¦ˆå¦ˆ"></a>å°æ˜å’Œå¦ˆå¦ˆ</h3><p>å°æ˜ï¼šå¦ˆå¦ˆï¼ŒåŒå­¦ä»¬éƒ½è¯´æˆ‘ä¸‘ï¼Œä»–ä»¬è¯´çš„æ˜¯çœŸçš„å—</p><p>å¦ˆå¦ˆï¼šå¥½å­©å­ï¼Œå¦ˆå¦ˆå’Œä½ è¯´äº†å¤šå°‘éäº†ï¼Œåœ¨äººå¤šçš„åœ°æ–¹ä¸ç”¨å«æˆ‘å¦ˆå¦ˆ</p><h3 id="å¥³å‹æ”¾å±"><a href="#å¥³å‹æ”¾å±" class="headerlink" title="å¥³å‹æ”¾å±"></a>å¥³å‹æ”¾å±</h3><p>ä¸€å¯¹æƒ…ä¾£åœ¨å…¬å›­çº¦ä¼šï¼Œçªç„¶å¥³ç”Ÿæƒ³è¦æ”¾å±</p><p>äºæ˜¯å°±å¯¹ç”·ç”Ÿè¯´ï¼šäº²çˆ±çš„ï¼Œæˆ‘å­¦å¸ƒè°·é¸Ÿç»™ä½ å¬å¥½å—ï¼Ÿ</p><p>ç”·ç”Ÿè¯´ï¼šå¥½å‘€å¥½å‘€ï¼Œäºæ˜¯å¥³ç”Ÿä¸€è¾¹å¸ƒè°·å¸ƒè°·ä¸€è¾¹æ”¾ç€å±</p><p>ç„¶åå®Œäº†é—®ç”·ç”Ÿï¼šäº²çˆ±çš„ï¼Œæˆ‘å­¦å¸ƒè°·é¸Ÿåƒå—ï¼Ÿ</p><p>ç”·ç”Ÿæ‘‡äº†æ‘‡å¤´è¯´ï¼šå±å£°å¤ªå¤§æˆ‘æ²¡å¬æ¸…â€¦</p><h3 id="èšŠå­å¹²é¥­"><a href="#èšŠå­å¹²é¥­" class="headerlink" title="èšŠå­å¹²é¥­"></a>èšŠå­å¹²é¥­</h3><p>æœ‰ä¸€å¤©è‹è‡å¦ˆå¦ˆå¸¦ç€å°è‹è‡å»åƒå±</p><p>å°è‹è‡é—®ï¼šå¦ˆå¦ˆå¦ˆå¦ˆï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦åƒå±ï¼Ÿ</p><p>å¦ˆå¦ˆè¯´ï¼šåƒé¥­çš„æ—¶å€™ä¸è¦è¯´è¿™ä¹ˆæ¶å¿ƒçš„è¯</p><h3 id="è®°è€…é‡‡è®¿æ²™å°˜æš´çš„å½±å“"><a href="#è®°è€…é‡‡è®¿æ²™å°˜æš´çš„å½±å“" class="headerlink" title="è®°è€…é‡‡è®¿æ²™å°˜æš´çš„å½±å“"></a>è®°è€…é‡‡è®¿æ²™å°˜æš´çš„å½±å“</h3><p>æœ‰ä¸ªè®°è€…å¯¹ç€è·¯äººé—®ï¼šå¤§å¦ˆï¼Œæ²™å°˜æš´å¤©æ°”å¯¹æ‚¨æœ‰ä»€ä¹ˆå½±å“</p><p>å¤§å¦ˆè¯´ï¼šé‚£å½±å“å¯å¤§äº†ï¼Œé¦–å…ˆå°±æ˜¯ä½ å¾—å…ˆæ¸…æ¥šï¼Œæˆ‘æ˜¯ä½ å¤§çˆ·</p><h3 id="ç”µåŠ¨è½¦"><a href="#ç”µåŠ¨è½¦" class="headerlink" title="ç”µåŠ¨è½¦"></a>ç”µåŠ¨è½¦</h3><p>åœ¨å…¬å›­çœ‹å¤§çˆ·ä»¬ä¸‹è±¡æ£‹</p><p>æˆ‘è¯´ï¼šå¤§çˆ·ï¼Œä½ è½¦<code>(che)</code>æ²¡äº†</p><p>å¤§çˆ·è¯´ï¼šä½ ä¸æ‡‚å§ï¼Œé‚£å«<code>(ju)</code></p><p>æˆ‘è¯´ï¼šå¥½çš„å¤§çˆ·ï¼Œæ‚¨æ—è¾¹çš„ç”µåŠ¨<code>(ju)</code>æ²¡äº†</p><h2 id="ä¸»é¢˜ç¡å‰æ•…äº‹"><a href="#ä¸»é¢˜ç¡å‰æ•…äº‹" class="headerlink" title="ä¸»é¢˜ç¡å‰æ•…äº‹"></a>ä¸»é¢˜ç¡å‰æ•…äº‹</h2><h3 id="å°ç™½å…”å’Œå°ç°å…”"><a href="#å°ç™½å…”å’Œå°ç°å…”" class="headerlink" title="å°ç™½å…”å’Œå°ç°å…”"></a>å°ç™½å…”å’Œå°ç°å…”</h3><p>ä»å‰ï¼Œåœ¨ä¸€ä¸ªç¾ä¸½çš„æ£®æ—é‡Œï¼Œæœ‰ä¸€åªå«å°ç™½çš„å°å…”å­å’Œä¸€åªå«å°ç°çš„å°å…”å­ï¼Œå®ƒä»¬æ˜¯æœ€å¥½çš„æœ‹å‹ã€‚æ¯å¤©ï¼Œå®ƒä»¬éƒ½ä¸€èµ·åœ¨æ£®æ—é‡Œç©è€ï¼Œæ¢ç´¢æ–°çš„å†’é™©ã€‚</p><p>ä¸€å¤©æ™šä¸Šï¼Œå°ç™½å’Œå°ç°å†³å®šè¿›è¡Œä¸€æ¬¡ç‰¹åˆ«çš„å†’é™©ã€‚ä»–ä»¬å¬è¯´åœ¨æ£®æ—æ·±å¤„æœ‰ä¸€ä¸ªç¥å¥‡çš„èŠ±å›­ï¼Œæ®è¯´é‚£é‡Œçš„èŠ±æœµæœ‰ç¥å¥‡çš„åŠ›é‡ï¼Œå¯ä»¥å¸®åŠ©äººä»¬å®ç°æ„¿æœ›ã€‚</p><p>å°ç™½å’Œå°ç°å…´å¥‹åœ°è·³ç€ï¼Œè¿ˆå¼€äº†è„šæ­¥ï¼Œè¸ä¸Šäº†å‰å¾€èŠ±å›­çš„æ—…ç¨‹ã€‚ä»–ä»¬ç©¿è¿‡èŒ‚å¯†çš„æ ‘æ—ï¼Œè·³è¿‡æ¸…æ¾ˆçš„å°æºªï¼Œç»ˆäºæ¥åˆ°äº†èŠ±å›­çš„å…¥å£ã€‚</p><p>èŠ±å›­é‡Œçš„èŠ±æœµçœŸæ˜¯ç¾ä¸èƒœæ”¶ï¼æœ‰çº¢è‰²çš„ç«ç‘°ã€è“è‰²çš„é£é“ƒè‰ã€ç²‰è‰²çš„åº·ä¹ƒé¦¨ï¼Œè¿˜æœ‰é‡‘é»„è‰²çš„å‘æ—¥è‘µã€‚å°å…”å­ä»¬è¢«è¿™äº›ç¾ä¸½çš„èŠ±æœµæ‰€å¸å¼•ï¼Œå®ƒä»¬çº·çº·æ•£å‘å‡ºè¿·äººçš„é¦™æ°”ã€‚</p><p>å°ç™½å’Œå°ç°ä»”ç»†è§‚å¯Ÿäº†æ¯ä¸€æœµèŠ±ï¼Œç„¶åå°ç™½çªç„¶æƒ³åˆ°äº†å¥¹çš„æ„¿æœ›ã€‚å¥¹æ¸´æœ›æ‹¥æœ‰ä¸€åŒå¯ä»¥é£ç¿”çš„ç¿…è†€ï¼Œè¿™æ ·å¥¹å°±å¯ä»¥åœ¨å¤©ç©ºä¸­è‡ªç”±è‡ªåœ¨åœ°é£ç¿”äº†ã€‚</p><p>å°ç™½å°å¿ƒç¿¼ç¿¼åœ°å¯¹æœ€äº®æœ€ç¾çš„è“è‰²é£é“ƒè‰è¯´å‡ºäº†å¥¹çš„æ„¿æœ›ã€‚å°±åœ¨å¥¹è¯´å®Œçš„ç¬é—´ï¼Œç¥å¥‡çš„äº‹æƒ…å‘ç”Ÿäº†ï¼é£é“ƒè‰çš„èŠ±ç“£å˜æˆäº†è“è‰²çš„ç¾½æ¯›ï¼Œå°ç™½çš„èƒŒä¸Šé•¿å‡ºäº†ä¸€å¯¹é›ªç™½çš„ç¿…è†€ã€‚</p><p>å°ç™½å…´å¥‹åœ°è·³èµ·æ¥ï¼Œå±•ç¿…é«˜é£ï¼Œå¥¹åœ¨å¤©ç©ºä¸­è‡ªç”±è‡ªåœ¨åœ°é£ç¿”ï¼Œæ„Ÿå—ç€é‚£ç¾ä¸½è€Œè‡ªç”±çš„æ„Ÿè§‰ã€‚</p><p>çœ‹åˆ°å°ç™½çš„æ„¿æœ›å®ç°ï¼Œå°ç°ä¹Ÿè¿«ä¸åŠå¾…åœ°å¯¹ä¸€æœµç²‰è‰²åº·ä¹ƒé¦¨è®¸ä¸‹äº†ä»–çš„æ„¿æœ›ã€‚åº·ä¹ƒé¦¨çš„èŠ±ç“£å˜æˆäº†ç°è‰²çš„æ¯›å‘ï¼Œå°ç°çš„èƒŒä¸Šä¹Ÿé•¿å‡ºäº†ä¸€å¯¹ç°è‰²çš„ç¿…è†€ã€‚</p><p>ç°åœ¨ï¼Œå°ç™½å’Œå°ç°éƒ½å˜æˆäº†ä¼šé£ç¿”çš„å°å…”å­ã€‚ä»–ä»¬åœ¨èŠ±å›­ä¸­ç¿±ç¿”ï¼Œä¸€èµ·æ¬¢ç¬‘ç€ï¼Œäº«å—è¿™ç¾å¥½è€Œå¥‡å¦™çš„æ—¶åˆ»ã€‚</p><p>ç»ˆäºï¼Œå¤©ç©ºæ¸æ¸äº®äº†èµ·æ¥ï¼Œå¤ªé˜³çš„ç¬¬ä¸€ç¼•é˜³å…‰æ´’åœ¨äº†å°ç™½å’Œå°ç°èº«ä¸Šã€‚ä»–ä»¬çš„ç¿…è†€æ…¢æ…¢åœ°æ¶ˆå¤±äº†ï¼Œå˜å›äº†åŸæ¥çš„æ ·å­ã€‚ä½†æ˜¯ï¼Œä»–ä»¬ä¸å†æ„Ÿåˆ°å¤±æœ›ï¼Œå› ä¸ºä»–ä»¬ä½“ä¼šåˆ°äº†é£ç¿”çš„å¿«ä¹ï¼Œå’Œå‹è°Šçš„åŠ›é‡ã€‚</p><p>å°ç™½å’Œå°ç°ç´§ç´§åœ°æ¡ç€å½¼æ­¤çš„çˆªå­ï¼Œä¸€èµ·å›åˆ°äº†å®¶ã€‚åœ¨ä»–ä»¬çš„æ¢¦ä¸­ï¼Œä»–ä»¬ä¼šä¸€ç›´è®°å¾—é‚£ä¸ªç¾ä¸½çš„èŠ±å›­å’Œä»–ä»¬çš„å†’é™©ç»å†ã€‚</p><p>æ•…äº‹è®²å®Œäº†ï¼Œäº²çˆ±çš„ï¼Œå¸Œæœ›è¿™ä¸ªæ•…äº‹å¸¦ç»™ä½ ç¾å¥½çš„æ¢¦å¢ƒå’Œæ¸©æš–çš„å¿ƒæƒ…ã€‚æ™šå®‰ï¼Œæˆ‘çˆ±ä½ ï¼</p><h3 id="å‹è°Šå’Œå‹‡æ°”"><a href="#å‹è°Šå’Œå‹‡æ°”" class="headerlink" title="å‹è°Šå’Œå‹‡æ°”"></a>å‹è°Šå’Œå‹‡æ°”</h3><p>åœ¨ä¸€ä¸ªå¤è€çš„ç‹å›½é‡Œï¼Œæœ‰ä¸¤åªå°åŠ¨ç‰©ï¼Œä¸€åªæ˜¯åå«å°ç†Šçš„å°ç†ŠçŒ«ï¼Œå¦ä¸€åªæ˜¯åå«å°è™çš„å°è€è™ã€‚ä»–ä»¬ä»å°ä¸€èµ·é•¿å¤§ï¼Œæˆä¸ºäº†æœ€å¥½çš„æœ‹å‹ã€‚</p><p>å°ç†Šå’Œå°è™ä½åœ¨ä¸€ä¸ªå®‰é™çš„å±±è°·é‡Œï¼Œä»–ä»¬æ¯å¤©éƒ½ä¸€èµ·ç©è€ï¼Œæ¢ç´¢å‘¨å›´çš„æ£®æ—å’Œæ²³æµã€‚ä»–ä»¬å…±äº«å¿«ä¹ï¼Œä¹Ÿä¸€èµ·é¢å¯¹æŒ‘æˆ˜ã€‚</p><p>æœ‰ä¸€å¤©ï¼Œå°ç†Šå’Œå°è™å¬è¯´ç‹å›½é‡Œæœ‰ä¸€åº§ç¥ç§˜çš„å±±å³°ï¼Œæ®è¯´å±±å³°ä¸Šæœ‰ä¸€é¢—èƒ½å®ç°æ„¿æœ›çš„ç¥å¥‡å®çŸ³ã€‚ä»–ä»¬å†³å®šä¸€èµ·å»å¯»æ‰¾è¿™é¢—å®çŸ³ï¼Œå¸Œæœ›èƒ½å¤Ÿå®ç°å„è‡ªçš„å¿ƒæ„¿ã€‚</p><p>å°ç†Šå¸Œæœ›èƒ½å¤Ÿå­¦ä¼šå¼¹å¥ç¾å¦™çš„éŸ³ä¹ï¼Œè€Œå°è™åˆ™æ¸´æœ›å˜å¾—æ›´åŠ å‹‡æ•¢å’Œå¼ºå£®ã€‚ä»–ä»¬å……æ»¡äº†å¸Œæœ›å’Œæ¿€åŠ¨åœ°è¸ä¸Šäº†å‰å¾€å±±å³°çš„æ—…ç¨‹ã€‚</p><p>æ—…é€”ä¸­ï¼Œä»–ä»¬é¢ä¸´äº†è®¸å¤šå›°éš¾å’Œéšœç¢ã€‚æœ‰é™¡å³­çš„å±±è·¯ã€æ±¹æ¶Œçš„æ²³æµå’ŒèŒ‚å¯†çš„ä¸›æ—ã€‚ä½†æ˜¯ï¼Œå°ç†Šå’Œå°è™éƒ½å±•ç°å‡ºäº†æ— ç•å’ŒåšéŸ§çš„å‹‡æ°”ã€‚ä»–ä»¬äº’ç›¸é¼“åŠ±ï¼Œå…±åŒå…‹æœäº†ä¸€ä¸ªä¸ªå›°éš¾ã€‚</p><p>æœ€ç»ˆï¼Œå°ç†Šå’Œå°è™ç»ˆäºæ¥åˆ°äº†å±±å³°çš„å·…å³°ã€‚ä»–ä»¬å‘ç°äº†é‚£é¢—é—ªè€€ç€å…‰èŠ’çš„å®çŸ³ã€‚å®çŸ³æ•£å‘å‡ºç¥å¥‡çš„åŠ›é‡ï¼Œå……æ»¡äº†å‹è°Šå’Œå‹‡æ°”çš„èƒ½é‡ã€‚</p><p>å°ç†ŠæŠ±ç€å®çŸ³ï¼Œå¿ƒæ»¡æ„è¶³åœ°å¼¹å¥èµ·ç¾å¦™çš„éŸ³ä¹ï¼Œæ¯ä¸€ä¸ªéŸ³ç¬¦éƒ½å……æ»¡äº†æ¸©æš–å’Œæ¬¢ä¹ã€‚å°è™æ„Ÿå—åˆ°äº†å°ç†ŠéŸ³ä¹ä¸­çš„åŠ›é‡ï¼Œä»–æ„Ÿåˆ°è‡ªå·±å˜å¾—æ›´åŠ å‹‡æ•¢å’Œå¼ºå£®äº†ã€‚</p><p>å°ç†Šå’Œå°è™é«˜å…´åœ°ç¬‘äº†ï¼Œä»–ä»¬çŸ¥é“è‡ªå·±çš„å¿ƒæ„¿å·²ç»å®ç°äº†ã€‚ä½†æ›´é‡è¦çš„æ˜¯ï¼Œä»–ä»¬å‘ç°äº†å‹è°Šå’Œå‹‡æ°”çš„çœŸæ­£æ„ä¹‰ã€‚</p><p>å°ç†Šå’Œå°è™æ‰‹ç‰µç€æ‰‹ï¼Œæ€€ç€æ»¡å¿ƒçš„æ„Ÿæ¿€å’Œå–œæ‚¦ï¼Œå›åˆ°äº†ä»–ä»¬çš„å®¶ã€‚ä»é‚£å¤©èµ·ï¼Œå°ç†Šå’Œå°è™ä¸€ç›´æ˜¯å½¼æ­¤æœ€å¥½çš„æœ‹å‹ï¼Œä»–ä»¬å…±åŒåˆ†äº«ç€éŸ³ä¹çš„ç¾å¦™å’Œå‹‡æ°”çš„åŠ›é‡ã€‚</p><p>æ•…äº‹è®²å®Œäº†ï¼Œäº²çˆ±çš„ï¼Œå¸Œæœ›è¿™ä¸ªæ•…äº‹èƒ½å¤Ÿç»™ä½ å¸¦æ¥å‹‡æ°”å’Œå‹è°Šçš„åŠ›é‡ã€‚æ™šå®‰ï¼Œæˆ‘æ°¸è¿œçˆ±ä½ ï¼</p><h3 id="äºšå†å…‹æ–¯å’Œçˆ±ä¸½ä¸"><a href="#äºšå†å…‹æ–¯å’Œçˆ±ä¸½ä¸" class="headerlink" title="äºšå†å…‹æ–¯å’Œçˆ±ä¸½ä¸"></a>äºšå†å…‹æ–¯å’Œçˆ±ä¸½ä¸</h3><p>ä»å‰ï¼Œåœ¨ä¸€ä¸ªè¿œç¦»å°˜åš£çš„å°æ‘åº„é‡Œï¼Œä½ç€ä¸€ä½å¹´è½»çš„ç”»å®¶ï¼Œåå«äºšå†å…‹æ–¯ã€‚äºšå†å…‹æ–¯æ˜¯ä¸€ä¸ªå¿ƒçµæ‰‹å·§çš„äººï¼Œä»–ç”¨ç”»ç¬”å’Œé¢œæ–™åˆ›é€ å‡ºç¾ä¸½çš„è‰ºæœ¯ä½œå“ã€‚</p><p>æœ‰ä¸€å¤©ï¼Œäºšå†å…‹æ–¯åœ¨æ£®æ—ä¸­çš„å°æºªè¾¹å‘ç°äº†ä¸€åªå—ä¼¤çš„å°é¸Ÿã€‚å®ƒçš„ç¾½æ¯›è¢«ç‹¡çŒ¾çš„çŒäººå°„ä¸­ï¼Œæ— åŠ©åœ°å€’åœ¨äº†åœ°ä¸Šã€‚</p><p>äºšå†å…‹æ–¯ç«‹åˆ»å†²è¿‡å»ï¼Œè½»è½»åœ°æŠ±èµ·äº†å°é¸Ÿã€‚ä»–å¿ƒç–¼åœ°çœ‹ç€å®ƒï¼Œå†³å®šå¸¦å®ƒå›å®¶å¹¶ç…§é¡¾å¥½å®ƒã€‚ä»–ç»™å®ƒèµ·äº†ä¸€ä¸ªåå­—ï¼Œå«åšçˆ±ä¸½ä¸ã€‚</p><p>äºšå†å…‹æ–¯å¯¹çˆ±ä¸½ä¸å……æ»¡äº†çˆ±å’Œå…³æ€€ã€‚ä»–æ¯å¤©ç»™å¥¹å–‚é£Ÿï¼Œä¸ºå¥¹æ²»ç–—ä¼¤å£ï¼Œå¹¶ç”¨ç”»ç¬”ä¸ºå¥¹ç”»äº†ä¸€å¼ ç¾ä¸½çš„ç”»åƒã€‚</p><p>éšç€æ—¶é—´çš„æ¨ç§»ï¼Œçˆ±ä¸½ä¸çš„ä¼¤å£æ¸æ¸æ„ˆåˆï¼Œå¥¹çš„ç¾½æ¯›é‡æ–°é•¿å‡ºï¼Œå˜å¾—ç¾ä¸½è€Œé—ªäº®ã€‚äºšå†å…‹æ–¯å’Œçˆ±ä¸½ä¸ä¹‹é—´å»ºç«‹èµ·äº†ä¸€ç§ç‰¹æ®Šçš„è”ç³»ï¼Œä»–ä»¬äº’ç›¸é™ªä¼´å’Œç…§é¡¾ã€‚</p><p>æœ‰ä¸€å¤©ï¼Œå½“äºšå†å…‹æ–¯æ­£åœ¨ç”»ç”»çš„æ—¶å€™ï¼Œä»–çªç„¶å‘ç°è‡ªå·±ç”»å‡ºäº†ä¸€åªç¥å¥‡çš„å°é¸Ÿã€‚å®ƒçš„ç¾½æ¯›ç»šä¸½å¤šå½©ï¼Œå……æ»¡äº†çˆ±å’Œæ¸©æš–çš„æ°”æ¯ã€‚äºšå†å…‹æ–¯æƒŠè®¶åœ°å‘ç°ï¼Œè¿™æ­£æ˜¯ä»–å’Œçˆ±ä¸½ä¸ä¹‹é—´çš„çº½å¸¦ã€‚</p><p>éšç€æ—¶é—´çš„æ¨ç§»ï¼Œäºšå†å…‹æ–¯çš„ç”»ä½œå˜å¾—è¶Šæ¥è¶Šæœ‰åã€‚äººä»¬çº·çº·å‰æ¥æ¬£èµä»–çš„ä½œå“ï¼Œå¹¶è¢«å…¶ä¸­æµæ·Œçš„çˆ±æ‰€æ„ŸåŠ¨ã€‚äºšå†å…‹æ–¯çš„è‰ºæœ¯æˆä¸ºäº†ä¸€ä¸ªæ¸©æš–å’Œé¼“èˆäººå¿ƒçš„åŠ›é‡ã€‚</p><p>è€Œåœ¨äºšå†å…‹æ–¯çš„ä½œå“ä¸­ï¼Œçˆ±ä¸½ä¸æˆä¸ºäº†ä»–æœ€çè´µçš„çµæ„Ÿä¹‹æºã€‚ä»–ç”¨ç”»ç¬”å°†çˆ±ä¸½ä¸çš„ç¾ä¸½å±•ç°åœ¨ä¸–äººé¢å‰ï¼Œä¼ é€’ç€çˆ±çš„åŠ›é‡å’Œå¥‡è¿¹çš„å­˜åœ¨ã€‚</p><p>äºšå†å…‹æ–¯çš„æˆåŠŸå¹¶æ²¡æœ‰è®©ä»–å¿˜è®°çˆ±ä¸½ä¸ã€‚æ¯å½“ä»–ç”»å®Œä¸€å¹…ä½œå“ï¼Œä»–éƒ½ä¼šå¯¹ç€ç”»ä¸­çš„çˆ±ä¸½ä¸å¾®ç¬‘ï¼Œæ„Ÿæ¿€åœ°è¯´ï¼šâ€œæ˜¯ä½ ç»™äº†æˆ‘å‹‡æ°”å’Œçµæ„Ÿï¼Œè®©æˆ‘çš„ä½œå“é—ªè€€å‡ºçˆ±çš„å…‰èŠ’ã€‚â€</p><h3 id="å¥‡è¿¹ä¹‹èŠ±"><a href="#å¥‡è¿¹ä¹‹èŠ±" class="headerlink" title="å¥‡è¿¹ä¹‹èŠ±"></a>å¥‡è¿¹ä¹‹èŠ±</h3><p>ä»å¾ˆä¹…å¾ˆä¹…ä»¥å‰å¼€å§‹ï¼Œæœ‰ä¸€ä¸ªç¥å¥‡çš„èŠ±å›­ï¼Œé‡Œé¢ç”Ÿé•¿ç€å„ç§å„æ ·ç¾ä¸½çš„èŠ±æœµã€‚åœ¨è¿™ä¸ªèŠ±å›­é‡Œï¼Œæœ‰ä¸€æœµéå¸¸ç‰¹åˆ«çš„èŠ±ï¼Œå®ƒçš„åå­—å«åšâ€çˆ±ä¹‹èŠ±â€ã€‚</p><p>â€œçˆ±ä¹‹èŠ±â€è¢«è®¤ä¸ºæ˜¯ä¸–ç•Œä¸Šæœ€çº¯æ´å’ŒçœŸæŒšçš„çˆ±çš„è±¡å¾ã€‚è¿™æœµèŠ±åªä¼šåœ¨çœŸæ­£çº¯ç²¹çš„çˆ±æƒ…å‡ºç°çš„æ—¶å€™ç»½æ”¾ã€‚</p><p>æœ‰ä¸€å¤©ï¼Œä¸€å¯¹å¹´è½»äººï¼Œä»–ä»¬åˆ†åˆ«æ˜¯çº¦ç¿°å’Œè‰¾ç±³ï¼Œèµ°è¿›äº†è¿™ä¸ªèŠ±å›­ã€‚ä»–ä»¬æ˜¯ä¸€å¯¹ç›¸çˆ±çš„æƒ…ä¾£ï¼Œå½¼æ­¤æ·±æ·±åœ°çˆ±ç€å¯¹æ–¹ã€‚</p><p>çº¦ç¿°å’Œè‰¾ç±³æ‰‹ç‰µç€æ‰‹ï¼Œæ¬£èµç€èŠ±å›­é‡Œçš„ç¾æ™¯ï¼Œç›´åˆ°ä»–ä»¬æ¥åˆ°äº†â€çˆ±ä¹‹èŠ±â€çš„é¢å‰ã€‚å½“ä»–ä»¬é è¿‘è¿™æœµèŠ±çš„æ—¶å€™ï¼Œâ€çˆ±ä¹‹èŠ±â€å¼€å§‹å‘å‡ºæ¸©æš–çš„å…‰èŠ’ï¼Œç»½æ”¾å‡ºç¾ä¸½çš„èŠ±æœµã€‚</p><p>çº¦ç¿°å’Œè‰¾ç±³è¢«è¿™ä¸ªå¥‡è¿¹æ‰€å¸å¼•ï¼Œä»–ä»¬æ„Ÿå—åˆ°äº†çˆ±çš„åŠ›é‡ã€‚ä»–ä»¬ç›¸ä¿¡è¿™æœµèŠ±æ˜¯å¯¹ä»–ä»¬çœŸçˆ±çš„ç¥ç¦ã€‚</p><p>äºæ˜¯ï¼Œçº¦ç¿°å’Œè‰¾ç±³å†³å®šå°†â€çˆ±ä¹‹èŠ±â€çš„èŠ±ç“£ä¿å­˜ä¸‹æ¥ï¼Œä½œä¸ºä»–ä»¬çˆ±æƒ…çš„è±¡å¾ã€‚æ¯å½“ä»–ä»¬é¢ä¸´å›°éš¾å’ŒæŒ‘æˆ˜æ—¶ï¼Œä»–ä»¬ä¼šå›æƒ³èµ·é‚£ä¸ªç‰¹æ®Šçš„æ—¶åˆ»ï¼Œé‚£æŸé—ªè€€çš„èŠ±ç“£ä¼šç»™äºˆä»–ä»¬åŠ›é‡å’Œå‹‡æ°”ã€‚</p><p>å¹´å¤ä¸€å¹´ï¼Œçº¦ç¿°å’Œè‰¾ç±³çš„çˆ±æƒ…åƒâ€çˆ±ä¹‹èŠ±â€ä¸€æ ·æŒä¹…è€Œç¾ä¸½ã€‚ä»–ä»¬ä¸€èµ·ç»å†äº†è®¸å¤šå†’é™©å’Œè€ƒéªŒï¼Œä½†ä»–ä»¬çš„çˆ±æƒ…å§‹ç»ˆåšä¸å¯æ‘§ã€‚</p><p>ä»–ä»¬çš„çˆ±æƒ…æ•…äº‹ä¼ éäº†æ•´ä¸ªå›½åº¦ï¼Œæˆä¸ºäº†ä¸€æ®µç»å…¸çš„çˆ±æƒ…ä¼ è¯´ã€‚äººä»¬å¯¹ä»–ä»¬çš„çˆ±æƒ…å……æ»¡æ•¬æ„å’Œç¾¡æ…•ã€‚</p><p>è€Œåœ¨ä»–ä»¬çš„æ•…äº‹ä¸­ï¼Œæ¯ä¸ªå¤œæ™šï¼Œçº¦ç¿°å’Œè‰¾ç±³ä¼šæ‹¥æŠ±ç€ï¼Œæ¸©æŸ”åœ°å›å¿†èµ·ä»–ä»¬ç¬¬ä¸€æ¬¡æ¥åˆ°â€çˆ±ä¹‹èŠ±â€çš„èŠ±å›­çš„æ—¶åˆ»ã€‚ä»–ä»¬ç›¸ä¿¡çœŸçˆ±æ˜¯ä¸€ç§å¥‡è¿¹ï¼Œå¯ä»¥è¶…è¶Šæ—¶é—´å’Œç©ºé—´ï¼Œæ°¸è¿œå­˜åœ¨ã€‚</p><h3 id="çº¢ç«ç‘°å’Œç™½ç«ç‘°"><a href="#çº¢ç«ç‘°å’Œç™½ç«ç‘°" class="headerlink" title="çº¢ç«ç‘°å’Œç™½ç«ç‘°"></a>çº¢ç«ç‘°å’Œç™½ç«ç‘°</h3><p>ä»å‰ï¼Œåœ¨ä¸€ä¸ªè¿œç¦»å°˜åš£çš„æ‘åº„é‡Œï¼Œæœ‰ä¸€ä½å¹´è½»è€Œç¾ä¸½çš„å§‘å¨˜ï¼Œåå«æ¢¦å„¿ã€‚æ¢¦å„¿æœ‰ä¸€é¢—å–„è‰¯è€Œçº¯æ´çš„å¿ƒï¼Œå¥¹ä¸€ç›´æ¢¦æƒ³ç€æ‰¾åˆ°çœŸçˆ±ã€‚</p><p>æœ‰ä¸€å¤©ï¼Œæ¢¦å„¿å¬è¯´åœ¨æ‘åº„çš„å°½å¤´æœ‰ä¸€ç‰‡ç¥å¥‡çš„èŠ±å›­ï¼Œæ®è¯´åªæœ‰é‚£äº›çº¯çœŸè€ŒçœŸè¯šçš„å¿ƒçµæ‰èƒ½æ‰¾åˆ°ã€‚æ¢¦å„¿ç«‹åˆ»å†³å®šå‰å¾€èŠ±å›­ï¼Œå¸Œæœ›èƒ½æ‰¾åˆ°å±äºå¥¹çš„çœŸçˆ±ã€‚</p><p>æ¢¦å„¿ç©¿è¿‡èŒ‚å¯†çš„æ ‘æ—ï¼Œè·¨è¿‡æ¸…æ¾ˆçš„å°æºªï¼Œæ¥åˆ°äº†èŠ±å›­çš„å…¥å£ã€‚å¥¹è¢«çœ¼å‰çš„æ™¯è±¡æƒŠè‰³åˆ°äº†ï¼ŒèŠ±å›­é‡Œå¼€æ»¡äº†å„ç§å„æ ·çš„é²œèŠ±ï¼Œæ¯ä¸€æœµéƒ½æ•£å‘ç€è¿·äººçš„é¦™æ°”ã€‚</p><p>åœ¨èŠ±å›­çš„ä¸­å¿ƒï¼Œæ¢¦å„¿çœ‹åˆ°äº†ä¸€æœµæœ€ç¾çš„çº¢ç«ç‘°ã€‚å¥¹èµ°è¿‡å»ï¼Œå°å¿ƒç¿¼ç¿¼åœ°æŠšæ‘¸ç€ç«ç‘°çš„èŠ±ç“£ï¼Œç„¶åå‘å®ƒå€¾è¯‰äº†å¥¹çš„å¿ƒæ„¿ï¼Œå¸Œæœ›èƒ½å¤Ÿæ‰¾åˆ°çœŸçˆ±ã€‚</p><p>å°±åœ¨é‚£ä¸€åˆ»ï¼Œå¥‡è¿¹å‘ç”Ÿäº†ã€‚çº¢ç«ç‘°çš„èŠ±ç“£å¼€å§‹å‘å…‰ï¼Œæ¢¦å„¿æ„Ÿåˆ°è‡ªå·±è¢«ä¸€è‚¡æ¸©æš–çš„åŠ›é‡ç¯ç»•ç€ã€‚çªç„¶ï¼ŒèŠ±å›­çš„å¦ä¸€è¾¹å‡ºç°äº†ä¸€æœµç™½ç«ç‘°ï¼Œå®ƒæ•£å‘ç€æŸ”å’Œçš„å…‰èŠ’ã€‚</p><p>æ¢¦å„¿èµ°è¿‡å»ï¼ŒæƒŠå–œåœ°å‘ç°é‚£æœµç™½ç«ç‘°ä¸­ï¼Œç«™ç€ä¸€ä½è‹±ä¿Šè€Œå–„è‰¯çš„å¹´è½»äººï¼Œåå«æ™¨é˜³ã€‚ä»–ä»¬çš„ç›®å…‰äº¤æ±‡ï¼Œä»¿ä½›ä¸¤é¢—å¿ƒçµåœ¨è¿™ä¸€åˆ»å½¼æ­¤ç›¸è¯†ã€‚</p><p>æ¢¦å„¿å’Œæ™¨é˜³è¿…é€Ÿå å…¥çˆ±æ²³ã€‚ä»–ä»¬ä¸€èµ·æ¢ç´¢èŠ±å›­ï¼Œåˆ†äº«å½¼æ­¤çš„æ¢¦æƒ³å’Œå¸Œæœ›ã€‚ä»–ä»¬çš„çˆ±æƒ…åƒèŠ±å›­é‡Œç››å¼€çš„é²œèŠ±ä¸€æ ·ç¾ä¸½ï¼Œå……æ»¡äº†æ¸©é¦¨å’Œå¹¸ç¦ã€‚</p><p>ç„¶è€Œï¼Œå‘½è¿å¹¶ä¸æ€»æ˜¯é¡ºåˆ©çš„ã€‚æ™¨é˜³è¢«è¿«ç¦»å¼€æ‘åº„ï¼Œå‰å¾€è¿œæ–¹å¯»æ‰¾è‡ªå·±çš„å‘½è¿ã€‚æ¢¦å„¿å¿ƒç—›ä¸å·²ï¼Œä½†å¥¹æ·±ä¿¡ä»–ä»¬çš„çˆ±æƒ…æ˜¯åšä¸å¯æ‘§çš„ã€‚</p><p>æ¢¦å„¿å†³å®šç­‰å¾…æ™¨é˜³çš„å½’æ¥ã€‚å¥¹æ¯å¤©éƒ½æ¥åˆ°èŠ±å›­ï¼Œé™é™åœ°æ³¨è§†ç€é‚£æœµç™½ç«ç‘°ï¼Œåšä¿¡æœ‰ä¸€å¤©ä»–ä»¬å°†å†æ¬¡ç›¸èšã€‚</p><p>å²æœˆåŒ†åŒ†æµè½¬ï¼ŒèŠ±å›­é‡Œçš„é²œèŠ±å¼€æ”¾è¿‡åˆè°¢è½ï¼Œä½†æ¢¦å„¿çš„å¿ƒå§‹ç»ˆå¦‚ä¸€ã€‚ç»ˆäºï¼Œä¸€å¤©æ¸…æ™¨ï¼Œæ™¨é˜³å›åˆ°äº†æ‘åº„ã€‚ä»–æ‰¾åˆ°äº†æ¢¦å„¿ï¼Œä¸¤äººç´§ç´§æ‹¥æŠ±ï¼Œæ³ªæ°´å’Œå–œæ‚¦äº¤ç»‡åœ¨ä¸€èµ·ã€‚</p><p>ä»é‚£ä¸€åˆ»èµ·ï¼Œæ¢¦å„¿å’Œæ™¨é˜³å†³å®šæ°¸è¿œåœ¨ä¸€èµ·ï¼Œä»–ä»¬çš„çˆ±æƒ…æ›´åŠ åšå®šè€Œçè´µã€‚ä»–ä»¬ä¸€èµ·å»ºç«‹äº†å¹¸ç¦çš„å®¶åº­ï¼Œå…±åŒåº¦è¿‡äº†ä¸€ç”Ÿçš„ç‚¹æ»´æ—¶å…‰ã€‚</p><h3 id="å°çŒ«å’ª"><a href="#å°çŒ«å’ª" class="headerlink" title="å°çŒ«å’ª"></a>å°çŒ«å’ª</h3><p>åœ¨ä¸€ä¸ªå°é•‡ä¸Šï¼Œæœ‰ä¸€åªå«å°å’ªçš„å°çŒ«ã€‚å°å’ªæ˜¯ä¸€åªéå¸¸å®³ç¾å’Œèƒ†æ€¯çš„çŒ«ï¼Œå¥¹æ€»æ˜¯èº²åœ¨è§’è½é‡Œï¼Œä¸æ•¢å’Œå…¶ä»–åŠ¨ç‰©äº¤æµã€‚</p><p>æœ‰ä¸€å¤©ï¼Œå°å’ªå¬è¯´å°é•‡ä¸Šå°†ä¸¾åŠä¸€åœºæ‰è‰ºè¡¨æ¼”ï¼Œæ¯ä¸ªåŠ¨ç‰©éƒ½å¯ä»¥å±•ç¤ºè‡ªå·±çš„ç‰¹é•¿ã€‚å°å’ªå¿ƒé‡Œå¾ˆæƒ³å‚åŠ ï¼Œä½†å¥¹ä¸€æƒ³åˆ°è¦ç«™åœ¨ä¼—äººé¢å‰è¡¨æ¼”ï¼Œå°±æ„Ÿåˆ°ååˆ†å®³æ€•ã€‚</p><p>å°å’ªå¾˜å¾Šäº†å¾ˆä¹…ï¼Œæœ€ç»ˆä¸‹å®šå†³å¿ƒå…‹æœè‡ªå·±çš„å®³ç¾ã€‚å¥¹å¼€å§‹æ¯å¤©ç»ƒä¹ æ­Œå”±ï¼Œå› ä¸ºå¥¹æ·±çŸ¥è‡ªå·±æœ‰ä¸€å‰¯ç¾å¦™çš„å—“éŸ³ã€‚è™½ç„¶åˆšå¼€å§‹çš„æ—¶å€™å£°éŸ³æœ‰äº›é¢¤æŠ–ï¼Œä½†å°å’ªä¸æ–­åŠªåŠ›ï¼ŒåšæŒç»ƒä¹ ã€‚</p><p>è¡¨æ¼”çš„æ—¥å­ç»ˆäºåˆ°æ¥äº†ï¼Œå°å’ªç«™åœ¨èˆå°ä¸Šï¼Œå¥¹çš„å¿ƒè·³å¾—å¾ˆå¿«ï¼Œä½†å¥¹é¼“èµ·å‹‡æ°”ï¼Œå¼€å§‹å”±æ­Œã€‚éšç€æ­Œå£°çš„ä¼ å‡ºï¼Œå°å’ªæ¸æ¸æ”¾å¼€äº†è‡ªå·±ï¼Œå¥¹å”±å¾—è¶Šæ¥è¶Šè‡ªä¿¡ï¼Œä¹Ÿè¶Šæ¥è¶ŠåŠ¨æƒ…ã€‚</p><p>è§‚ä¼—ä»¬è¢«å°å’ªç¾å¦™çš„æ­Œå£°æ‰€å¸å¼•ï¼Œä»–ä»¬ä¸ºå¥¹é¼“æŒæ¬¢å‘¼ã€‚</p><p>ä»é‚£ä»¥åï¼Œå°å’ªä¸å†å®³æ€•å’Œå…¶ä»–åŠ¨ç‰©äº¤æµï¼Œå¥¹å˜å¾—å¼€æœ—è€Œå‹å–„ã€‚å¥¹å¼€å§‹å‚åŠ æ›´å¤šçš„è¡¨æ¼”å’Œç¤¾äº¤æ´»åŠ¨ï¼Œä¸å¤§å®¶åˆ†äº«å¥¹çš„æ‰è‰ºå’Œå¿«ä¹ã€‚</p><h2 id="åŸåˆ›ç¡å‰å°æ•…äº‹"><a href="#åŸåˆ›ç¡å‰å°æ•…äº‹" class="headerlink" title="åŸåˆ›ç¡å‰å°æ•…äº‹"></a>åŸåˆ›ç¡å‰å°æ•…äº‹</h2><h3 id="å¤±è¸ªçš„èƒ¡èåœ"><a href="#å¤±è¸ªçš„èƒ¡èåœ" class="headerlink" title="å¤±è¸ªçš„èƒ¡èåœ"></a>å¤±è¸ªçš„èƒ¡èåœ</h3><p>å‰å‡ å¤©è¿˜çƒˆæ—¥å½“ç©ºï¼Œçƒ­å¾—è®©äººå¿ƒçƒ¦æ„ä¹±çš„å¤©æ°”çªç„¶é™äº†æ¸©ï¼Œåˆ®èµ·äº†å†·é£ï¼Œè¿™è®©åˆšç©¿ä¸Šå°è£™å­çš„å°å…”å­æ‰‹è¶³æ— æªï¼Œä¸å‡ºæ„å¤–çš„æ„Ÿå†’äº†ã€‚</p><p>æ‰“å¼€é—¨çš„é‚£ä¸€åˆ»ï¼Œå¯’é£è¿«ä¸åŠå¾…çš„ä»å¤–é¢é’»äº†è¿›æ¥ï¼Œå°å…”å­æ‰“äº†ä¸ªå¯’é¢¤ï¼Œç¼©äº†ç¼©å°è„‘è¢‹ç¡¬ç€å¤´çš®å‡ºé—¨äº†ã€‚å¥¹è¦å»èœåœ°é‡Œç»™è‡ªå·±çš„èƒ¡èåœæµ‡æ°´ï¼Œé¡ºä¾¿å»å±±ç¾Šä¼¯ä¼¯çš„è¶…å¸‚ç…ç…æœ‰æ²¡æœ‰èƒ¡èåœï¼Œå› ä¸ºæ©±æŸœé‡Œçš„èƒ¡èåœéƒ½åƒå®Œäº†ï¼Œå†ä¸å»æ‰¾èƒ¡èåœå°å…”å­å°±è¦é¥¿åäº†ã€‚</p><p>å°å…”å­é¡¶ç€å¯’é£ä¸€è·¯å°è·‘æ¥åˆ°èœåœ°é‡Œï¼Œçœ‹åˆ°èƒ¡èåœè‹—ä¸œå€’è¥¿æ­ªï¼Œä¸å°‘å¹¼è‹—ç”šè‡³è¢«é£æ‹¦è…°æ–©æ–­ï¼Œå¥¹éš¾è¿‡æäº†ã€‚</p><p>å¯æ˜¯æ›´è®©å°å…”å­ç»æœ›çš„è¿˜åœ¨åé¢ï¼Œè¶…å¸‚é‡Œçš„èƒ¡èåœéƒ½å–å…‰äº†ã€‚</p><p>å±±ç¾Šä¼¯ä¼¯å‘Šè¯‰å°å…”å­ä»æ˜¨å¤©èµ·å°±æœ‰å¥½å¤šå°åŠ¨ç‰©æ¥ä¹°èƒ¡èåœï¼Œå¤§æ¦‚æ˜¯å¤§å®¶çš„èœåœ°éƒ½æ”¶åˆ°å¯’é£çš„æ”»å‡»ï¼Œäºæ˜¯å¼€å§‹å‚¨å­˜ç²®é£Ÿäº†å§ã€‚å°å…”å­åªå¾—æç€æœ€åä¸€é¢—ç™½èœå‚å¤´ä¸§æ°”çš„å›äº†å®¶ã€‚</p><p>â€œå¤±è¸ªâ€çš„èƒ¡èåœéƒ½åˆ°å“ªé‡Œå»äº†ï¼Œå°å…”å­æƒ³ä¸æ˜ç™½ã€‚â€œå™”å™”å™”â€ï¼Œé—¨å¤–ä¼ æ¥ä¸€é˜µæ€¥ä¿ƒçš„æ•²é—¨å£°ï¼Œå°å…”å­æ€¥æ€¥å¿™å¿™ä»è¢«çªé‡Œå‡ºæ¥æ‰“å¼€äº†é—¨ã€‚</p><p>é—¨å¤–çš„å°ç†Šè¿«ä¸åŠå¾…åœ°æ¢å‡ºä¸ªè„‘è¢‹é—®é“ï¼šâ€œå°å…”å­ï¼Œå°å…”å­ï¼Œä½ è¿˜æœ‰èƒ¡èåœå—ï¼Ÿ</p><p>â€œå’¦ï¼Ÿæˆ‘è®°å¾—ä½ ä¸åƒèƒ¡èåœå‘€ï¼Ÿä½ è¦èƒ¡èåœå¹²ä»€ä¹ˆå‘¢ï¼Ÿâ€å°å…”å­æŒ äº†æŒ è‡ªå·±çš„å°è„‘è¢‹ã€‚</p><p>â€œæˆ‘è¦æ‹¿èƒ¡èåœå’Œå°ç‹ç‹¸äº¤æ¢ä»–æ”¶è—çš„æ‰‹åŠï¼â€</p><p>å°å…”å­ä¸å¥½æ„æ€åœ°å¦‚å®å›ç­”é“ï¼šâ€œæˆ‘çš„èƒ¡èåœä¹Ÿåƒå®Œå•¦ï¼Œç°åœ¨ä¹Ÿæ²¡æœ‰äº†å‘¢ã€‚â€</p><p>â€œå¯æ˜¯å°ç‹ç‹¸è¦èƒ¡èåœåšä»€ä¹ˆå‘¢ï¼Ÿâ€å°å…”å­æœ›ç€æ²¡æœ‰æ‹¿åˆ°èƒ¡èåœå¤±æœ›ç¦»å¼€çš„å°ç†Šï¼Œé™·å…¥æ·±æ€ã€‚</p><p>ä¸ºäº†ä¸€æ¢ç©¶ç«Ÿï¼Œå°å…”å­è¶ç¬¬äºŒå¤©é£å°ç‚¹çš„æ—¶å€™æ¥åˆ°å°ç‹ç‹¸å®¶ï¼Œè¿˜æ²¡è¿›é—¨å°å…”å­å°±æƒŠå‘†äº†ï¼Œå°ç‹ç‹¸é—¨å¤–æ‘†ç€å¥½å‡ ç­èƒ¡èåœã€‚</p><p>çœ‹åˆ°å°å…”å­çš„å°ç‹ç‹¸æ¿€åŠ¨çš„è·‘äº†è¿‡æ¥ï¼Œæ‰äº†æ‰å°å…”å­çš„å°è„‘è¢‹ï¼Œä¸€è„¸è‡ªè±ªï¼Œé‚€åŠŸé“ï¼šâ€œæˆ‘çœ‹åˆ°ä½ èœåœ°é‡Œçš„èƒ¡èåœè‹—éƒ½åäº†ï¼Œå®³æ€•ä½ æ²¡ç²®é£Ÿäº†ï¼Œå°±ä¸ºä½ æ”’äº†è¿™äº›èƒ¡èåœã€‚â€</p><p>å°å…”å­çœ‹ç€çœ¨å·´ç€çœ¼ç›çš„å°ç‹ç‹¸å“­ç¬‘ä¸å¾—ï¼Œä¸€æ—¶é—´ä¸çŸ¥é“è¯´ä»€ä¹ˆï¼Œæ‰‘è¿›äº†å°ç‹ç‹¸çš„æ€€é‡Œã€‚</p><p>å°ç‹ç‹¸æŠ±ä½å°å…”å­ï¼Œä¾æ—§å–‹å–‹ä¸ä¼‘é“ï¼šâ€œä»Šå¤©ä¸‹åˆæˆ‘å»é•‡ä¸Šç»™ä½ ä¹°äº†æ„Ÿå†’è¯ï¼Œä¸€ä¼šå„¿è®°å¾—å–å‘€ã€‚â€</p><p>å…¶å®çœŸæ­£è¢«çˆ±çš„æ—¶å€™çœŸçš„ä¸éœ€è¦æœ‰å¤ªå¤šé¡¾è™‘ï¼Œå› ä¸ºä½ åªè¦ç›¸ä¿¡ï¼Œåªè¦ä½ éœ€è¦ï¼Œä»–å°±ä¸€ç›´åœ¨ã€‚</p><h3 id="å› ä¸ºæ˜¯ä½ å‘€"><a href="#å› ä¸ºæ˜¯ä½ å‘€" class="headerlink" title="å› ä¸ºæ˜¯ä½ å‘€"></a>å› ä¸ºæ˜¯ä½ å‘€</h3><p>â€œä½ å¥½ï¼Œæˆ‘æƒ³é—®ä¸€ä¸‹è¿˜æœ‰ä»Šå¤©ä¸Šåˆçš„ç”µå½±ç¥¨å—ï¼Ÿâ€å°å…”å­çœ¨ç€é—ªé—ªå‘å…‰å¤§çœ¼ç›é—®é“ã€‚</p><p>å‰å°æœåŠ¡çš„å°æ¾é¼ å¾®ç¬‘é“ï¼šâ€œè¿˜æœ‰å‘¢ã€‚â€</p><p>ä½†æ˜¯å°å…”å­å¹¶æ²¡æœ‰ä¹°ä¸‹ç”µå½±ç¥¨ï¼Œè€Œæ˜¯è¹¦è¹¦è·³è·³æ¥åˆ°å¤–é¢çš„é•¿æ¤…æ—ï¼Œä¸€å±è‚¡åäº†ä¸‹å»ã€‚å¥¹æ— èŠçš„æ¥å›æ“ç€è‡ªå·±çš„å°æ‰‹ï¼Œçœ¼ç›è¿˜æ—¶ä¸æ—¶çš„æœ›å‘ç”µå½±é™¢é—¨å£ã€‚</p><p>å¤ªé˜³æ¸æ¸çˆ¬ä¸Šäº†å¤´é¡¶ï¼Œå°å…”å­ä¾æ—§ååœ¨é•¿æ¤…ä¸Šï¼Œå±è‚¡æ…¢æ…¢æŒªäº†æŒªï¼Œè®©è‡ªå·±å¤„åœ¨æ ‘è«ä¸‹ã€‚æ¥ç€ç»§ç»­å¯¹ç€ç”µå½±é™¢çš„å¤§é—¨å£å‘å‘†ã€‚å†åæ¥å‘¢ï¼Œå¤ªé˜³æš–æ´‹æ´‹çš„ï¼Œå°å…”å­é ç€æ¤…å­ï¼Œæ™’ç€å¤ªé˜³ï¼Œä¸Šä¸‹çœ¼çš®å¼€å§‹æ‰“æ¶â€¦â€¦</p><p>çªç„¶ä¸€ä¸ªæ¸©æŸ”çš„å£°éŸ³åœ¨å¥¹è€³è¾¹å“èµ·ï¼šâ€œå°å…”å­é†’é†’ï¼Œæˆ‘æ¥å•¦ï¼â€</p><p>å°å…”å­æ‰äº†æ‰è‡ªå·±çš„çœ¼ç›ï¼Œå®šç›ä¸€çœ‹ï¼ŒåŸæ¥æ˜¯å°ç‹ç‹¸æ¥äº†ï¼å¥¹æ¿€åŠ¨åœ°åèµ·èº«æ¥ï¼Œæ„å¤–å‘ç°ä»Šå¤©çš„å°ç‹ç‹¸ä¸å¹³æ—¶ä¸å¤ªä¸€æ ·ï¼Œä»Šå¤©çš„å°ç‹ç‹¸æ ¼å¤–å¸…æ°”ï¼Œä¸€èº«è¥¿è£…ï¼Œæ‰‹é‡Œæ§èŠ±æŸï¼ŒæŠŠè‡ªå·±æ”¶æ‹¾çš„å¹²å¹²å‡€å‡€ã€‚</p><p>è¦çŸ¥é“åœ¨å¹³æ—¶ï¼Œå°ç‹ç‹¸ä¸æ˜¯åœ¨ç”°é‡Œå¸®å±±ç¾Šä¼¯ä¼¯æ‹”è‰ï¼Œå°±æ˜¯çˆ¬ä¸Šæ ‘å¸®å°è¢‹é¼ æ¡é£ç­â€¦â€¦ç»å¸¸æŠŠè‡ªå·±å¼„å¾—è„å…®å…®çš„å›å®¶ï¼Œç„¶åéª„å‚²çš„å‘Šè¯‰å°å…”å­ï¼šâ€œä½œä¸ºä¸€ååˆæ ¼çš„æ£®æ—è­¦å¯Ÿï¼Œæˆ‘è¿™å¯æ˜¯ä¸ºäººæ°‘æœåŠ¡ã€‚â€</p><p>å°å…”å­ç¬¬ä¸€æ¬¡è§å°ç‹ç‹¸è¿™ä¹ˆæ­£å¼ï¼Œéƒ½æœ‰ç‚¹ä¸å¥½æ„æ€äº†ï¼Œè„¸è¶Šæ¥è¶Šçº¢ï¼Œçº¢çš„å‘çƒ«ï¼Œå¥½åƒæœ‰ä¸€å›¢ç«åœ¨è„¸ä¸Šç‡ƒçƒ§ã€‚</p><p>å†åæ¥å‘¢ï¼Œåªå¬è§â€œç °â€ä¸€å£°ï¼Œå°å…”å­çœ¼å‰ä¸€é»‘ï¼Œå†ä¸€ççœ¼æ‰å‘ç°åŸæ¥è‡ªå·±åœ¨é•¿æ¤…ä¸Šç¡ç€äº†ï¼Œå¤´æ’åœ¨ä¸€æ—çš„æ ‘æä¸Šæ‰é†’äº†è¿‡æ¥æœç©ºè¡è¡çš„å¤§é—¨çœ‹äº†ä¸€çœ¼ï¼Œä¸ç”±å¾—é•¿å¹ä¸€å£æ°”ã€‚</p><p>åˆè¿‡äº†å¥½é•¿å¥½é•¿æ—¶é—´ï¼ŒåŠå±±è…°åªç•™ä½å¤ªé˜³å…¬å…¬åŠä¸ªè„¸çš„æ—¶å€™ï¼Œä¸€ä¸ªé»‘è‰²çš„èº«å½±ä¼´ç€ä½™æ™–ä¸€è·¯å°è·‘æ¥åˆ°ç”µå½±é™¢ï¼Œä»–ä¸€å¦‚æ—¢å¾€çš„è„å…®å…®çš„ï¼Œåªæ˜¯åœ¨å°å…”å­çœ¼é‡Œï¼Œä»–èº«ä¸Šçš„æ³¥åœŸä¼´ç€å¤•é˜³ï¼Œå°±åƒæ˜¯ä¸€å‰¯é‡‘è‰²çš„é“ ç”²ã€‚</p><p>å°ç‹ç‹¸æ°”å–˜ååï¼Œä¸å¥½æ„æ€çš„æŒ äº†æŒ è„‘è¢‹ï¼šâ€œå®è´ï¼Œå¯¹ä¸èµ·ï¼Œæˆ‘çœŸçš„è¶…çº§åŠªåŠ›äº†ï¼Œè®©ä½ ä¹…ç­‰äº†ã€‚â€</p><p>è™½ç„¶å°å…”å­å¿ƒé‡Œæœ‰äº›ç”Ÿæ°”ï¼Œå¯æ˜¯ä¸€æƒ³åˆ°è‡ªå·±å–œæ¬¢å°ç‹ç‹¸ï¼Œæ­£æ˜¯å–œæ¬¢ä»–è®¤çœŸè´Ÿè´£ï¼Œä¹äºåŠ©äººçš„æ ·å­ï¼Œå°±æ²¡æœ‰é‚£ä¹ˆç”Ÿæ°”äº†ã€‚</p><p>æ’…ç€å˜´é“ï¼šâ€œé‚£å°±ç½šä½ é™ªæˆ‘çœ‹ä¸€æ™šä¸Šç”µå½±ã€‚â€å°ç‹ç‹¸è€³æœµç«‹é©¬ç«–èµ·æ¥ï¼Œå¼€å¿ƒé“ï¼šâ€œçœŸçš„å—ï¼Ÿå¯æ˜¯å®è´ä¸æ˜¯æœ€è®¨åŒè¿Ÿåˆ°çš„äººå—ï¼Ÿæˆ‘è¿˜è¿Ÿåˆ°è¿™ä¹ˆä¹…â€¦â€¦â€è¯´ç€è¯´ç€å°ç‹ç‹¸è¶Šæ¥è¶Šæ²¡æœ‰åº•æ°”ï¼Œè€³æœµåˆè€·æ‹‰ä¸‹æ¥äº†ã€‚</p><p>å°å…”å­ç¬‘ç€è¸®èµ·è„šæ‰äº†æ‰å°ç‹ç‹¸çš„è„‘è¢‹ï¼Œè½»å£°é“ï¼šâ€œå› ä¸ºæ˜¯ä½ å‘€ï¼Œæ˜¯æˆ‘æœ€å–œæ¬¢çš„å°ç‹ç‹¸å‘€ï¼â€</p><p>æˆ‘åŸæ¥è®¾æƒ³è¿‡å¾ˆå¤šå¦ä¸€åŠçš„çš„æ ·å­ï¼Œä¹Ÿæœ‰å¾ˆå¤šç†æƒ³å‹ï¼Œç›´åˆ°é‡åˆ°ä½ ï¼Œæˆ‘æ”¾ä¸‹äº†å¾ˆå¤šåŸåˆ™ï¼Œåªå› ä¸ºå¯¹æ¯”èµ·é‚£äº›åŸåˆ™ï¼Œæˆ‘å¥½åƒæœ€å–œæ¬¢çš„æ˜¯ä½ ã€‚</p><h3 id="è·¨å¹´å¤œ"><a href="#è·¨å¹´å¤œ" class="headerlink" title="è·¨å¹´å¤œ"></a>è·¨å¹´å¤œ</h3><p>å°ç‹ç‹¸å’Œå°å…”å­ååœ¨æ¡Œå­è¾¹ï¼Œå¬ç€é’Ÿæ‘†æ»´ç­”æ»´ç­”çš„å“ã€‚</p><p>å°å…”å­ç›¯ç€æ¡Œå­ä¸Šæ‘†çš„å·§å…‹åŠ›ç”œç”œåœˆå’½äº†å’½å£æ°´ï¼šâ€œè¦ä»€ä¹ˆæ—¶å€™æ‰èƒ½åƒå‘€ã€‚â€</p><p>å°ç‹ç‹¸çœ‹äº†çœ‹å¢™ä¸Šçš„æŒ‚é’Ÿè®¤çœŸçš„è¯´â€œè¿˜æœ‰ä¸€ä¸ªå°æ—¶äº†ï¼Œå¾ˆå¿«çš„ã€‚â€â²ï¸</p><p>â€œæˆ‘å…ˆåƒä¸€å£å˜›ï¼Œå°±åƒä¸€å°å—ã€‚â€å°å…”å­çªç€å¤§å¤§çš„çœ¼ç›å§”å±ˆå·´å·´çš„æœ›ç€å°ç‹ç‹¸ã€‚</p><p>å°ç‹ç‹¸æŠ¬æ‰‹æ‘¸äº†æ‘¸å°å…”å­çš„è„‘è¢‹ï¼šâ€œä¸å¯ä»¥ï¼Œæ–°å¹´çš„ç¬¬ä¸€åˆ†é’Ÿä¸€å®šè¦åƒç”œç”œçš„ä¸œè¥¿ï¼Œè¿™æ ·ä¸€æ•´å¹´éƒ½æ˜¯ç”œç”œçš„ï¼Œæå‰åƒäº†å°±ä¸ç®—æ•°äº†ã€‚â€</p><p>â€œå“ªé‡Œæ¥çš„é“ç†ã€‚â€å°å…”å­ç˜ªç€å˜´ä¸€è„¸ä¸å¼€å¿ƒçš„è¶´åœ¨æ¡Œå­ä¸Šã€‚</p><p>å°ç‹ç‹¸çœ‹ç€å°å…”å­çš„æ ·å­æ— å¥ˆçš„æ‘‡äº†æ‘‡å¤´ï¼Œä»–ä¼¸æ‰‹æŠŠå°å…”å­æ‹½è¿›æ€€é‡Œï¼Œè½»è½»çš„æ‘¸ç€ä»–èƒŒä¸Šçš„ç»’æ¯›ï¼šâ€œå¾ˆå¿«çš„ï¼Œç»™å°å…”å­è®²ä¸ªæ•…äº‹å¥½ä¸å¥½ï¼Œæ•…äº‹å¬å®Œäº†ï¼Œå°±å¯ä»¥åƒç”œç”œåœˆäº†ã€‚â€</p><p>â€œé‚£å¥½å•µã€‚â€å°å…”å­åœ¨å°ç‹ç‹¸æ€€é‡Œç¼©æˆä¸€åœˆï¼Œæ‰¾äº†ä¸ªæœ€èˆ’æœçš„å§¿åŠ¿ã€‚</p><p>å°ç‹ç‹¸æƒ³äº†æƒ³ï¼Œç»™å°å…”å­è®²äº†ä¸€ä¸ªè‡ªå·±å°çš„æ—¶å€™ï¼Œå¥¶å¥¶è®²ç»™ä»–çš„æ•…äº‹ã€‚</p><p>æ•…äº‹è®²å®Œäº†ï¼Œå°å…”å­çªåœ¨æ¸©æš–çš„æ€€æŠ±é‡Œæ˜æ˜æ¬²ç¡ï¼Œé›¶ç‚¹çš„é’Ÿå£°æ•²äº†èµ·æ¥ï¼Œæ˜¯æ–°çš„ä¸€å¹´äº†ã€‚</p><p>å°å…”å­é¡ºç€é’Ÿå£°æ¢å‡ºè„‘è¢‹ï¼Œä¼¸å‡ºå°çˆªå­å¦‚æ„¿ä»¥å¿çš„åƒåˆ°äº†ç”œç”œåœˆï¼Œä»–èˆ”äº†èˆ”å˜´è¾¹çš„å·§å…‹åŠ›é…±çªç„¶ç›´èµ·èº«å­äº²äº†äº²å°ç‹ç‹¸ã€‚</p><p>â€œè¿™æ ·æˆ‘ä»¬ä¸¤ä¸ªéƒ½æ˜¯ç”œç”œçš„äº†ã€‚â€å°å…”å­ä¸€æœ¬æ­£ç»çš„ç‚¹äº†ç‚¹å¤´ã€‚</p><p>æ™šå®‰</p><h3 id="ä¼´ä½ å…¥çœ "><a href="#ä¼´ä½ å…¥çœ " class="headerlink" title="ä¼´ä½ å…¥çœ "></a>ä¼´ä½ å…¥çœ </h3><p>åœ¨æ£®æ—é‡Œæœ‰ä¸€ä¸ªç¾ä¸½çš„æ‘å­ï¼Œæ‘å­é‡Œä½ç€ä¸€åªç‰¹åˆ«è´ªç©çš„å°å…”å­ã€‚</p><p>å°å…”å­æ¯å¤©éƒ½ä¼šåœ¨å¤–é¢ç©å¾ˆä¹…ï¼Œè‡³åˆ°æœˆäº®åœ¨å¤©ç©ºé«˜é«˜çš„æŒ‚èµ·æ‰ä¼šå›å®¶ã€‚</p><p>åæ¥æœ‰ä¸€å¤©å¥¹é‡åˆ°äº†å°ç‹ç‹¸ï¼Œå°ç™½å…”æ¸æ¸ä¸å†é‚£ä¹ˆè´ªç©ï¼Œæ¯å¤©æ—©æ—©çš„å°±ä¼šå›åˆ°å®¶é‡Œï¼Œåœ¨æ²™å‘ä¸Šèˆ’èˆ’æœæœå¾—çªç€ç­‰å°ç‹ç‹¸ç»™å¥¹åšå¥¹æœ€çˆ±å–çš„èƒ¡èåœæµ“æ±¤ã€‚</p><p>æ¯æ™šç¡å‰ï¼Œå°ç‹ç‹¸éƒ½ä¼šç»™å¥¹è®²ä¸€ä¸ªéå¸¸ç”œèœœç¾å¥½çš„ç¡å‰å°æ•…äº‹ã€‚</p><p>æ¯æ¬¡çœ‹è§å°ç™½å…”å¸¦ç€ç”œç”œçš„å¾®ç¬‘ç¡å»ï¼Œå°ç‹ç‹¸éƒ½ä¼šåœ¨å¥¹çš„è„¸é¢Šä¸Šè½»è½»çš„è½ä¸Šä¸€ä¸ªå»ï¼Œæ»¡è„¸éƒ½æ˜¯å¹¸ç¦ã€‚</p><p>çªç„¶æœ‰ä¸€å¤©ï¼Œå°ç‹ç‹¸è¦å»å¾ˆè¿œå¾ˆè¿œçš„åœ°æ–¹ï¼Œå®¶é‡Œåªå‰©ä¸‹å°ç™½å…”åœ¨å­¤é›¶é›¶å¾—ç­‰ç€å°ç‹ç‹¸å›æ¥ï¼Œæ²¡æœ‰äº†å¥½å–çš„èƒ¡èåœæµ“æ±¤ã€‚</p><p>ä¹Ÿæ²¡æœ‰äº†ç”œç”œçš„ç¡å‰å°æ•…äº‹ï¼Œå±‹é‡Œç©ºè¡è¡çš„æ²¡æœ‰å£°éŸ³ï¼Œå®‰é™çš„å¯æ€•ã€‚</p><p>â€œä¸æ˜¯è¯´å¥½åªå»ä¸‰å¤©çš„å—ï¼Œæ€ä¹ˆå»äº†äº”å¤©äº†è¿˜æ²¡æœ‰å›æ¥å‘¢?</p><p>å°ç™½å…”çˆ¬åœ¨çª—æˆ·è¾¹ä¸Šï¼Œæ‰‹é‡Œæ‹¿ç€å°ç‹ç‹¸çš„ç…§ç‰‡ï¼Œå‘†å‘†å¾—çœ‹ç€è¿œæ–¹ï¼Œå“­ç€ç¡ç€äº†ã€‚</p><p>å¤©è‰²æ¸æ¸æš—äº†ä¸‹æ¥ï¼Œæ£®æ—é‡Œé’è›™å’Œè›è›çš„å«å£°äº¤æ±‡åœ¨ä¸€èµ·ï¼ŒæŠŠå°ç™½å…”ä»ç¡æ¢¦ä¸­åµé†’ã€‚</p><p>ä»å¨æˆ¿ä¼ å‡ºäº†ä¸€è‚¡å¾ˆæµ“çƒˆçš„é¦™æ°”ï¼Œå°ç™½å…”æ‰æ‰çœ¼ç›ï¼Œèµ·æ¥ä¸€çœ‹ã€‚</p><p>åŸæ¥æ˜¯å°ç‹ç‹¸å›æ¥äº†ï¼Œæ­£æ‹´ç€å›´è£™è¹‘æ‰‹è¹‘è„šçš„ç…®ç€èƒ¡èåœæµ“æ±¤ã€‚</p><p>å°å…”å­çº¢ç€çœ¼çœ¶è·‘è¿‡å»ä»èƒŒåæŠ±ä½å°ç‹ç‹¸ï¼Œè¯´:ä»¥åä¸è¦å†æŠŠæˆ‘ä¸¢ä¸‹äº†å¥½å—?æˆ‘ä»¬è¦æ°¸è¿œåœ¨ä¸€èµ·ã€‚</p><p>å°ç‹ç‹¸æ²¡æœ‰è¯´è¯ï¼Œè½¬è¿‡èº«æ¥ç´§ç´§åœ°æŠ±ä½å¥¹ã€‚</p><p>å»äº†ä¸€ä¸‹å¥¹çš„é¢å¤´ï¼Œåœ¨å¿ƒé‡Œå¿µé“:ä¼šçš„ï¼Œå‚»ä¸«å¤´ã€‚</p><p>æ™šå®‰</p><h3 id="æˆ‘ä¸€ç›´é™ªç€ä½ "><a href="#æˆ‘ä¸€ç›´é™ªç€ä½ " class="headerlink" title="æˆ‘ä¸€ç›´é™ªç€ä½ "></a>æˆ‘ä¸€ç›´é™ªç€ä½ </h3><p>å°å…”å­æ„Ÿå†’äº†ï¼Œå·²ç»èµ–åœ¨åºŠä¸Šä¸€æ•´å¤©äº†ï¼Œå°ç‹ç‹¸ä¸€å¤§æ—©å°±æ‰“ç”µè¯è¯·äº†å‡ååœ¨åºŠè¾¹ç…§é¡¾ç€ä»–ã€‚</p><p>â€œæ„Ÿå†’äº†ä¹Ÿä¸å¯ä»¥ä¸åƒé¥­ï¼Œæ€»è¦åƒç‚¹ä¸œè¥¿æ‰èƒ½å¥½ã€‚â€å°ç‹ç‹¸ååœ¨åºŠè¾¹æ‘¸äº†æ‘¸å°å…”å­çš„é¢å¤´ã€‚</p><p>å°å…”å­æ‘‡æ‘‡å¤´æŠŠè¢«å­å¾€ä¸Šæ‹½äº†æ‹½ç›–ä½åŠå¼ è„¸:â€œä¸è¦åƒé¥­ï¼Œä¸è¦åƒè¯ï¼Œæˆ‘ç¡ä¸€ä¼šå„¿é†’æ¥å°±å¥½äº†ã€‚â€</p><p>å°ç‹ç‹¸å¹å£æ°”ä¼¸æ‰‹æ‹¿äº†åºŠå¤´æŸœä¸Šçš„æ¯å­å¹äº†å¹:â€œå·²ç»ä¸çƒ­äº†ï¼Œä¹–ä¹–èµ·æ¥æŠŠè¯å–äº†åœ¨ç¡ï¼Œè¿™ä¸ªä¸è‹¦çš„ã€‚â€</p><p>å°å…”å­åç€å¤´çœ‹äº†çœ‹å°ç‹ç‹¸ï¼Œä»–è§‰å¾—å°ç‹ç‹¸çœ‹èµ·æ¥æœ‰ç‚¹ä¸¥è‚ƒï¼Œåœ¨é—¹ä¸€ä¼šææ€•è¦ç”Ÿæ°”äº†ï¼Œä»–ä¹Ÿåªå¥½æ”¯ç€èº«å­åèµ·æ¥:â€œçœŸçš„ä¸è‹¦ä¹ˆ?è¯å“ªæœ‰ä¸è‹¦çš„ã€‚</p><p>å°ç‹ç‹¸å¼¯çœ¸æ‹äº†æ‹å°å…”å­çš„è„‘è¢‹ï¼Œä»–ç«¯ç€æ¯å­æŠ¿äº†ä¸€å£é‡Œé¢è¤è‰²çš„è¯æ±ï¼Œåˆå‡‘ä¸Šå»åœ¨å°å…”å­å˜´è§’äº²äº†äº²:â€œä½ çœ‹,æ˜¯ä¸æ˜¯ä¸è‹¦çš„ã€‚</p><p>å°å…”å­è¿å¿™æ‚ç€å˜´ä¸€è„¸æƒŠæçš„çœ‹ç€å°ç‹ç‹¸:â€œä¼šä¼ æŸ“çš„!</p><p>â€œé‚£è¿˜ä¸ä¹–ä¹–å–è¯ï¼Œæ˜¯ä¸æ˜¯æœ€è¿‘éƒ½ä¸æƒ³è®©æˆ‘äº²ä½ äº†ã€‚â€å°ç‹ç‹¸æˆ³äº†æˆ³å°å…”å­çš„è„‘é—¨æŠŠè¯é€’ç»™ä»–ã€‚</p><p>å””..å°å…”å­æŠ¬çœ¸çœ‹äº†çœ‹å°ç‹ç‹¸ä¹Ÿåªå¥½ä»°å¤´æŠŠè¯å–äº†ä¸‹å»ã€‚</p><p>å°ç‹ç‹¸ååœ¨ä¸€è¾¹ä¼¸æ‰‹å‰¥äº†é¢—ç³–ï¼Œçœ‹ç€å°å…”å­åƒå®Œè¯æŠŠç³–å–‚ä»–å˜´é‡Œã€‚</p><p>â€œåƒäº†ç³–å°±ä¸è‹¦äº†ï¼Œæ˜å¤©æ„Ÿå†’å¥½äº†å¸¦ä½ å»ä¹°å‡¤æ¢¨é…¥åƒã€‚â€å°ç‹ç‹¸è®©å°å…”å­èººå¥½ï¼Œä¼¸æ‰‹ç»™ä»–æ–å¥½è¢«è§’ä¿¯èº«äº²äº†äº²ä»–ã€‚</p><p>â€œä¸è¦äº²æˆ‘äº†ï¼Œä¼šä¼ æŸ“ç»™ä½ çš„ï¼Œç‹ç‹¸çœŸç¬¨è¿™éƒ½ä¸çŸ¥é“ã€‚â€å°å…”å­æ’…ç€å˜´ç›¯ç€å°ç‹ç‹¸çœ‹ã€‚</p><p>å°ç‹ç‹¸æŒ äº†æŒ å¤´å’§å¼€å˜´è§’å†²å°å…”å­ç¬‘:â€œ é‚£æˆ‘å°±è·Ÿä½ ä¸€èµ·åƒè¯å˜›ã€‚â€</p><p>æ™šå®‰</p><h3 id="ä¸ä¸€æ ·çš„å–œæ¬¢"><a href="#ä¸ä¸€æ ·çš„å–œæ¬¢" class="headerlink" title="ä¸ä¸€æ ·çš„å–œæ¬¢"></a>ä¸ä¸€æ ·çš„å–œæ¬¢</h3><p>çª—å¤–é»‘é»‘çš„ï¼Œå¤©è¿˜æ²¡äº®ï¼Œå°ç‹ç‹¸éƒ½è¿˜æ²¡é†’ï¼Œå°å…”å­å°±çå¼€äº†çœ¼ã€‚</p><p>â€œäº²çˆ±çš„ï¼Œäº²çˆ±çš„!èµ·åºŠå•¦ï¼â€å°å…”å­çˆ¬èµ·æ¥æ¨äº†æ¨å°ç‹ç‹¸ï¼Œâ€œé†’é†’å‘€ï¼èµ·åºŠæ”¶æ‹¾ä¸œè¥¿å•¦ï¼â€</p><p>å°ç‹ç‹¸æ‰äº†æ‰çœ¼ç›é“ï¼šâ€œå®è´ï¼Œå¤©è¿˜æ²¡äº®å‘¢ï¼Œå†ç¡ä¼šå‘€ã€‚â€</p><p>â€œå¯æ˜¯â€¦â€¦â€è¿˜æ²¡ç­‰å°å…”å­è¯´å®Œï¼Œå°ç‹ç‹¸ä¸€åªçˆªå­ä¸€æ‹½å°±æŠŠå°å…”å­å¼ºè¡Œæ‚åœ¨æ€€é‡Œã€‚</p><p>å°ç‹ç‹¸æ€€é‡Œå¥½æš–å’Œå‘€ï¼Œç¡æ„æ¥è¢­ï¼Œå°å…”å­çš„ä¸Šä¸‹çœ¼çš®å¼€å§‹æ‰“æ¶ï¼Œä¸ä¸€ä¼šå„¿å°±ç¡ç€äº†ã€‚</p><p>åŸæ¥å°å…”å­æ˜¨å¤©å’Œè‡ªå·±å¥½ä¹…æ²¡è§çš„å¥½æœ‹å‹å°çŒ«åœ¨ç”µè¯é‡Œçº¦å¥½äº†ï¼Œä»Šå¤©å°çŒ«æ¥å°å…”å­å®¶æ‹œè®¿ï¼Œå°å…”å­å¼€å¿ƒæäº†ï¼Œæ˜¨å¤©æ™šä¸Šæ¿€åŠ¨çš„ç¡ä¸ç€ï¼Œä»Šå¤©æ—©æ—©çš„å°±é†’äº†ã€‚</p><p>å¥¹çœŸçš„å¥½æƒ³å¿µå°çŒ«å‘€ï¼Œå°çŒ«æ˜¯å¥¹ä»å°åˆ°å¤§çš„å°ä¼™ä¼´ï¼Œä½†æ˜¯åæ¥å°çŒ«ä¸€å®¶è¦æ¬å»é•‡ä¸Šå°±ç¦»å¼€äº†æ£®æ—ï¼Œå°å…”å­å°±å†ä¹Ÿæ²¡æœ‰è§åˆ°å°çŒ«äº†ã€‚ç°åœ¨ç»ˆäºèƒ½è§åˆ°å°çŒ«äº†ï¼Œå°å…”å­åˆ«ææœ‰å¤šå¼€å¿ƒäº†ã€‚</p><p>ç­‰å°å…”å­å†é†’æ¥çš„æ—¶å€™ï¼Œå¨æˆ¿é‡Œæ—©å·²ç»æ»¡é¦™æ‰‘é¼»ã€‚ç¡é†’çš„å°å…”å­å‘ç°å°ç‹ç‹¸å·²ç»æŠŠå®¶é‡Œæ”¶æ‹¾çš„å¹²å¹²å‡€å‡€ï¼Œè¿˜å»èœå›­å­é‡Œæ‘˜äº†èœï¼Œä¹°äº†å‡ æ¡é±¼ï¼Œåˆé¤ä¹Ÿå‡†å¤‡å¥½äº†ã€‚</p><p>â€œå®è´ï¼Œé†’å•¦ã€‚â€çœ‹åˆ°å¨æˆ¿é—¨å£çš„å°å…”å­åï¼Œå°ç‹ç‹¸å® æººåœ°æ‰äº†æ‰å°å…”å­çš„è„‘è¢‹é“ï¼šâ€œæ”¶æ‹¾æ”¶æ‹¾æˆ‘ä»¬å»æ¥å°çŒ«å§ã€‚â€</p><p>å°å…”å­ç‚¹ç€å°è„‘è¢‹èµ¶ç´§è·‘å»æ¢å¥½è¡£æœå°±å’Œå°ç‹ç‹¸æ¥åˆ°è½¦ç«™ã€‚</p><p>ä¸ä¸€ä¼šå„¿ï¼Œä»å…¬äº¤ä¸Šä¸‹æ¥çš„å°çŒ«å’Œé»‘ç†Šæ‰“æ‰“é—¹é—¹ã€‚è¿™è®©å°å…”å­æ„Ÿåˆ°ç–‘æƒ‘ï¼Œå› ä¸ºå¥¹å’Œå°ç‹ç‹¸æ¯æ¬¡åå…¬äº¤ä¸‹è½¦çš„æ—¶å€™ï¼Œå°ç‹ç‹¸éƒ½ä¼šèµ°åœ¨ä»–å‰é¢å°å¿ƒåœ°æ‹‰ç€å¥¹çš„å°æ‰‹ï¼Œç”Ÿæ€•å¥¹æ‘”å€’ã€‚çœŸæ˜¯ä¸ªç²—å¿ƒçš„ç”·æœ‹å‹ï¼Œå°å…”å­å¯¹é»‘ç†Šå¿ƒç”Ÿä¸æ»¡ã€‚</p><p>æ²¡æœ‰åœ¨æ„é»‘ç†Šçš„è‡ªæˆ‘ä»‹ç»ï¼Œå°å…”å­ç›´æ¥å¿½ç•¥é»‘ç†Šå»æ‹‰å°çŒ«çš„æ‰‹ï¼Œä¸¤ä¸ªå¥½å§å¦¹ä¸€è·¯ä¸Šéƒ½å–‹å–‹ä¸ä¼‘ã€‚å°ç‹ç‹¸å’Œé»‘ç†Šå‘¢ï¼Œåœ¨åé¢æç€å¤§åŒ…å°åŒ…ï¼Œæ…¢æ…¢æ‚ æ‚ çš„æœ‰ä¸€æ­æ²¡ä¸€æ­çš„èŠç€å¤©ã€‚</p><p>å›åˆ°å®¶ï¼Œå°å…”å­è¿«ä¸åŠå¾…æ‹‰ç€å°çŒ«å°ä¸€å°å°ç‹ç‹¸çš„æ‰‹è‰ºã€‚</p><p>â€œè¿™æ˜¯å°ç‹ç‹¸åšçš„å—ï¼Ÿâ€å°çŒ«ä¸æ•¢ç›¸ä¿¡ï¼Œæ— å¥ˆæ‘‡æ‘‡å¤´é“ï¼šâ€œçœŸå¥½åƒï¼Œä¸åƒé»‘ç†Šï¼Œç„–ä¸ªé¥­éƒ½èƒ½ç³Šäº†ã€‚â€</p><p>â€œé‚£é‚£é‚£ï¼Œä½ ä»¬å®¶ä¸ä¼šæ˜¯ä½ åšé¥­å§ï¼â€å°å…”å­éå¸¸éœ‡æƒŠã€‚</p><p>åœ¨å¾—åˆ°å°çŒ«è‚¯å®šçš„å›ç­”åï¼Œå°å…”å­æ‡µäº†ï¼Œæœ‰ç‚¹å¿ƒç–¼å°çŒ«ï¼Œæ¯å¤©è¦æ—©èµ·åšé¥­ï¼Œä¸å¯ä»¥ç¡æ‡’è§‰ï¼Œæƒ³æƒ³éƒ½ç—›è‹¦ã€‚ä¹Ÿå·å·åœ¨å¿ƒé‡Œç»™å°ç‹ç‹¸åŠ åˆ†ã€‚</p><p>åƒé¥­çš„æ—¶å€™å‘¢ï¼Œé»‘ç†Šè€æ˜¯é¡½çš®çš„æŠ¢å°çŒ«è¦å¤¹çš„é±¼ï¼Œå°çŒ«ä¹Ÿä¸ç”˜ç¤ºå¼±æŠ¢é»‘ç†Šå–œæ¬¢åƒçš„ç«¹ç¬‹ï¼Œä¸¤äººæ‰“æ‰“é—¹é—¹ã€‚å†çœ‹å°ç‹ç‹¸ä¸€ç›´ä¸åœåœ°ç»™å°å…”å­å¤¹å¥¹å–œæ¬¢çš„èƒ¡èåœã€‚</p><p>å°å…”å­ä¸ç†è§£ï¼Œåœ¨æ€è€ƒäº†åŠå¤©åå¾—å‡ºä¸€ä¸ªç»“è®ºï¼šé»‘ç†Šæ ¹æœ¬ä¸å–œæ¬¢å°çŒ«ï¼Œä¸ç„¶æ€ä¹ˆå¯èƒ½æŠ¢å°çŒ«çš„é±¼å˜ã€‚æƒ³åˆ°è¿™é‡Œï¼Œå°å…”å­å¼€å§‹æ‹…å¿ƒå°çŒ«ï¼Œè€³æœµä¸€ç›´è€·æ‹‰ç€ï¼Œé¡¿æ—¶è§‰å¾—èƒ¡èåœä¹Ÿæ²¡é‚£ä¹ˆå¥½åƒäº†ã€‚</p><p>è™½ç„¶è§åˆ°äº†å°çŒ«ï¼Œå¯æ˜¯å°å…”å­å¿ƒé‡Œå´å¤šäº†å—å¤§çŸ³å¤´ï¼Œæ²‰ç”¸ç”¸çš„ã€‚</p><p>æ™šä¸Šé€åˆ«äº†å°çŒ«å’Œé»‘ç†Šï¼Œå°ç‹ç‹¸æ‹‰ç€å°å…”å­çš„å°æ‰‹é—®é“ï¼šâ€œå®è´æ˜¯ä¸æ˜¯æœ‰ä»€ä¹ˆå¿ƒäº‹å‘¢ï¼Ÿçœ‹ä½ ä»Šå¤©ä¸‹åˆä¸€ç›´é—·é—·ä¸ä¹å“ã€‚â€</p><p>å°å…”å­é•¿å¹ä¸€å£æ°”è¯´å‡ºäº†è‡ªå·±çš„å›°æƒ‘å’Œæ‹…å¿ƒã€‚</p><p>â€œå‚»ç“œï¼Œé»‘ç†Šè¶…çº§å–œæ¬¢å°çŒ«çš„å‘¢ï¼Œä½ æ˜¯æ²¡çœ‹åˆ°ä¸‹è½¦æ‰“é—¹å‰é»‘ç†Šç”¨èƒ³è†Šå›´ä½å°çŒ«ï¼Œå¦ä¸€åªçˆªå­æ‹‰ç´§æ‰¶æ‰‹ï¼Œç›´åˆ°è½¦åœäº†æ‰æ’’æ‰‹å’Œå°çŒ«ç©é—¹å‘¢ï¼Œè¿˜æœ‰ä½ åªçœ‹åˆ°ä»–æŠ¢å°çŒ«çš„é±¼è‚‰ï¼Œæ²¡çœ‹åˆ°ä»–å°å¿ƒç¿¼ç¿¼æŒ‘å‡ºé±¼è‚‰çš„å°åˆºå¤¹ç»™äº†å°çŒ«å‘€ã€‚â€</p><p>å°ç‹ç‹¸å® æººåœ°çœ‹ç€å°å…”å­è€å¿ƒè§£é‡Šé“ï¼šâ€œå…³äºåšé¥­è¿™ä»¶äº‹å‘¢æ®æˆ‘æ‰€çŸ¥ï¼Œé»‘ç†Šä¹Ÿåœ¨åŠªåŠ›å­¦ä¹ åšèœï¼Œè€Œä¸”æ¯æ¬¡åƒå®Œé¥­å°±åƒä½ ä¸€æ ·æŠ¢ç€æ´—ç¢—å‘¢ã€‚æ¯å¯¹æƒ…ä¾£çš„ç›¸å¤„æ–¹å¼éƒ½ä¸ä¸€æ ·ï¼Œä½†è¿™å¹¶ä¸å½±å“ä»–ä»¬å¯¹å½¼æ­¤çš„çˆ±å‘€ã€‚â€</p><p>ä¹Ÿè®¸è¿™ä¸–é—´çš„æƒ…çˆ±æœ‰æ‰€ä¸åŒï¼Œä½†çˆ±å¯¹æ–¹çš„å¿ƒéƒ½æ˜¯æ·±æ²‰è€Œçƒ­çƒˆçš„å§ã€‚</p><h3 id="æ˜¥é£åé‡Œä¸å¦‚ä½ "><a href="#æ˜¥é£åé‡Œä¸å¦‚ä½ " class="headerlink" title="æ˜¥é£åé‡Œä¸å¦‚ä½ "></a>æ˜¥é£åé‡Œä¸å¦‚ä½ </h3><p>æœ€è¿‘å°å…”å­ä¹Ÿä¸çŸ¥é“ä»å“ªé‡Œå¬æ¥çš„æ¶ˆæ¯ï¼Œè¯´å’Œå¿ƒçˆ±çš„äººä¸€èµ·çœ‹æ—¥å‡ºå°±ä¼šåœ¨ä¸€èµ·ä¸€è¾ˆå­ã€‚äºæ˜¯å¥¹æ’’ç€æ¬¢çš„è·‘åˆ°å°ç‹ç‹¸å®¶ï¼Œç–¯ç‹‚æ•²é—¨ã€‚</p><p>å°ç‹ç‹¸å°ç‹ç‹¸åœ¨å®¶å—</p><p>å°ç‹ç‹¸è¿·èŒ«çš„æ‰“å¼€é—¨ï¼Œä»–ä¸çŸ¥é“æœ‰ä»€ä¹ˆæ ·çš„äº‹æƒ…å€¼å¾—å°å…”å­è¿™ä¹ˆæ€¥ã€‚æ€ä¹ˆäº†å°å…”å­ï¼Œæ˜¯å‡ºä»€ä¹ˆäº‹äº†å—ã€‚</p><p>å“å‘€ä¸æ˜¯å•¦ç¬¨ç‹ç‹¸ï¼Œæ˜¯æˆ‘æƒ³å’Œä½ æ˜å¤©åœ¨æ£®æ—å°½å¤´çš„å±±ä¸Šçœ‹æ—¥å‡ºã€‚</p><p>æˆ‘å½“æ˜¯ä»€ä¹ˆäº‹å„¿å‘¢ï¼Œå½“ç„¶å¯ä»¥å•¦ï¼Œé‚£æˆ‘ä»¬æ˜å¤©æ—©ä¸Šè§ã€‚</p><p>ç¬¬äºŒå¤©ä¸€æ—©å°å…”å­ä¾¿å¸¦å¥½äº†å„ç§ä¸œè¥¿è·‘åˆ°äº†å°ç‹ç‹¸å®¶å’Œå°ç‹ç‹¸ä¸€èµ·å‡ºå‘äº†ã€‚å¯æ˜¯å¤©ä¸é‚äººæ„¿ï¼Œä»–ä»¬è¶Šå¾€å±±ä¸Šèµ°å‘ç°å¤©æ°”è¶Šé˜´æ²‰ï¼Œå¿«åˆ°å±±é¡¶çš„æ—¶å€™ç«Ÿç„¶ä¸‹èµ·äº†å°é›¨ï¼ŒæŠŠå°å…”å­å…´å¥‹çš„å¿ƒä¹Ÿæµ‡ç­äº†ã€‚å°å…”å­çš„çœ¼æ³ªä¹Ÿä¸è‡ªè§‰çš„ä»çœ¼è§’æ»‘è½äº†ä¸‹æ¥ã€‚</p><p>å°ç‹ç‹¸çœ‹åˆ°å°å…”å­å“­äº†ï¼Œæ€¥å¿™é—®ï¼Œå°å…”å­ä½ æ€ä¹ˆäº†å•Šï¼Œæ€ªæˆ‘æ²¡æœ‰çœ‹å¥½å¤©æ°”å°±æ¥ï¼Œä½ ä¸è¦å“­å¥½ä¸å¥½ã€‚</p><p>å¯æ˜¯å¯æ˜¯ï¼Œå°å…”å­å´å“­çš„æ›´å‰å®³äº†ã€‚è¿‡äº†å¥½ä¸€ä¼šå„¿ï¼Œå¥¹æ‰è¯´ã€‚å› ä¸ºå¤§å®¶éƒ½è¯´å’Œå¿ƒçˆ±çš„äººä¸€èµ·çœ‹æ—¥å‡ºå°±ä¼šåœ¨ä¸€èµ·ä¸€è¾ˆå­ï¼Œæˆ‘æ€•æˆ‘ä¸èƒ½å’Œä½ ä¸€ç›´ä¸€ç›´åœ¨ä¸€èµ·äº†ã€‚</p><p>å°ç‹ç‹¸å´çªç„¶ç¬‘äº†ï¼Œæ“¦äº†å°å…”å­çœ¼è§’è¾¹çš„çœ¼æ³ªï¼ŒæŠ±ç€å¥¹è¯´ï¼šâ€œå‚»å…”å­ï¼Œè™½ç„¶æ²¡æœ‰çœ‹åˆ°æ—¥å‡ºå¾ˆé—æ†¾ï¼Œå¯æ˜¯è¿™ä¸–ç•Œä¸Šæœ€é—æ†¾çš„äº‹æƒ…å´æ˜¯æ²¡æœ‰ä½ ï¼Œæˆ‘ä¼šä¸€ç›´ä¸€ç›´å’Œä½ åœ¨ä¸€èµ·ï¼Œçœ‹å¾ˆå¤šå¾ˆå¤šæ¬¡æ—¥å‡ºï¼ŒæŠŠè¿™ä¸–é—´çš„ç¾å¥½éƒ½å’Œä½ ä¸€èµ·èµ°å®Œï¼Œè¿™æ ·æ˜¯ä¸æ˜¯å°±æ²¡æœ‰é—æ†¾äº†ã€‚â€</p><p>å°å…”å­çœ‹ç€çœ¼å‰è®¤çœŸè€Œæ·±æƒ…çš„å°ç‹ç‹¸åœæ­¢äº†å“­æ³£ï¼Œæ¸©æŸ”çš„å¯¹ä»–è¯´ï¼šâ€œé‚£ä½ ï¼Œå¯ä¸è®¸åæ‚”å“¦â€</p><h3 id="ç”œç”œçš„æ¢¦åˆ†ä½ ä¸€åŠ"><a href="#ç”œç”œçš„æ¢¦åˆ†ä½ ä¸€åŠ" class="headerlink" title="ç”œç”œçš„æ¢¦åˆ†ä½ ä¸€åŠ"></a>ç”œç”œçš„æ¢¦åˆ†ä½ ä¸€åŠ</h3><p>è¿™ä¹ˆæ™šäº†è®©æˆ‘çœ‹çœ‹é‚£ä¸ªä¸ä¹–çš„å°å®è´è¿˜æ²¡æœ‰ç¡è§‰å‘€ã€‚</p><p>â€œå˜¿å˜¿å°ç‹ç‹¸ï¼Œä½ è¦é™ªæˆ‘ç†¬å¤œå˜›ï¼Œä»Šæ™šæˆ‘ç”œç”œçš„æ¢¦éƒ½è¢«é‚»å±…çš„å°åˆºçŒ¬æŠ¢èµ°äº†ï¼Œå®³å¾—æˆ‘å‘€ç¡ä¸ç€ã€‚ â€</p><p>â€œä½ ï¼Œä½ åˆåœ¨æ‰¾å€Ÿå£ï¼Œè®°å¾—ä¸Šæ¬¡æˆ‘é™ªä½ ç†¬äº†ä¸€æ¬¡å¤œï¼Œç¬¬äºŒå¤©å·®ç‚¹è¢«åˆ«äººå½“æˆå›½å®æŠ“èµ°äº†ï¼Œè¿™æ¬¡å†æ€ä¹ˆè¯´ä½ éƒ½å¾—ä¹–ä¹–ç¡è§‰ï¼Œè¿™æ”¯èƒ³è†Šä»Šæ™šæ˜¯ä½ çš„äº†ï¼Œæˆ‘ä¿è¯èƒ³è†Šéº»äº†æˆ‘éƒ½ä¸ä¼šæ‹¿èµ°ï¼Œå¿«ä¹–ä¹–èººä¸‹æ¥ã€‚â€</p><p>â€œå°ç‹ç‹¸ä½ çœŸå¥½ï¼Œæˆ‘ä»¬æ¥èŠèŠå¤©å§ï¼Œæˆ‘åˆæƒ³èµ·äº†ä¸Šæ¬¡ï¼Œæˆ‘ä»¬ä¸€èµ·å·èƒ¡èåœï¼Œä½ å½“æ—¶çœ‹æˆ‘æƒ³åƒèƒ¡èåœï¼Œåæ¥æˆ‘ä»¬è¢«æ³¥å¼„äº†ä¸€èº«â€¦â€¦..â€</p><p>â€œæˆ‘è¿˜æ˜¯ç¬¬ä¸€æ¬¡çœ‹åˆ°ä½ ç”Ÿæ°”å‘¢ï¼Œä»¥ä¸ºä½ ä¸ä¼šè¦æˆ‘äº†å‘¢ï¼Œè°æƒ³åˆ°ä½ ä¸ªå‘†å­ï¼Œè¯´ä¸ç®¡æˆ‘å˜æˆä»€ä¹ˆæ ·ï¼Œä½ éƒ½ä¼šå¨¶æˆ‘ï¼Œè¿˜è¯´ä½ æ°¸è¿œè®°å¾—æˆ‘ç¾ä¸½çš„æ ·å­ï¼Œä½ è¯´å®Œè¿™å¥è¯çš„æ—¶å€™ï¼Œæˆ‘å½“æ—¶å¿ƒé‡Œç‰¹æ„ŸåŠ¨ï¼Œæˆ‘è§‰å¾—æˆ‘è¿™è¾ˆå­å•Šå°±è®¤å®šäº†ä½ â€</p><p>â€œä½ è¿™ä¹ˆä¸€è¯´ï¼Œæˆ‘ä¹Ÿæƒ³èµ·æ¥äº†ï¼Œé‚£å¤©å°±æ˜¯ç”Ÿæ°”äº†ï¼Œæˆ‘è‡ªå·±ä¸çŸ¥é“ï¼Œç„¶åä½ ä¹Ÿè·Ÿæˆ‘ä¸€èµ·ç”Ÿæ°”ï¼Œå“ˆå“ˆå“ˆï¼Œé‚£æˆ‘ä¹Ÿä¸ä¼šä¸è¦ä½ ï¼Œæˆ‘è¦æ¯å¤©éƒ½é™ªç€ä½ â€</p><p>â€œå°ç‹ç‹¸æˆ‘ä»¬ç¡è§‰è§‰å§ï¼Œæˆ‘æ„Ÿè§‰ç”œç”œçš„æ¢¦åˆå›æ¥æ‰¾æˆ‘äº†å‘¢ï¼Œæ˜å¤©ä¸å‡†ç¡æ‡’è§‰å¬åˆ°æ²¡ï¼Œé™ªæˆ‘å‡ºå»ç©ï¼Œå‡ºå»åƒå¥½å¤šå¥½å¤šä¸œè¥¿ï¼Œæˆ‘è¦åƒç³–ï¼Œä¸ƒå½©çš„æ£‰èŠ±ç³–ï¼Œâ€</p><p>â€œå¥½ï¼Œæ˜å¤©æˆ‘ä¸€å®šä¸ç¡æ‡’è§‰ï¼Œ å¸¦ä½ å»åƒå¥½å¤šä½ æ²¡åƒè¿‡çš„ä¸œè¥¿ï¼Œå¥¥è¿˜æœ‰ä½ æƒ³åƒçš„ä¸ƒå½©æ£‰èŠ±ç³–â€</p><p>â€œçœ‹åœ¨ä½ è¿™ä¹ˆå¥½çš„ä»½ä¸Šï¼Œæˆ‘æŠŠç”œç”œæ¢¦åˆ†ä½ ä¸€åŠâ€</p><p>æ™šå®‰</p><h3 id="å±äºä½ çš„å°ç²¾çµ"><a href="#å±äºä½ çš„å°ç²¾çµ" class="headerlink" title="å±äºä½ çš„å°ç²¾çµ"></a>å±äºä½ çš„å°ç²¾çµ</h3><p>ä»å‰åœ¨åœ¨å¤§æ£®æ—é‡Œæœ‰ä¸€åªå°å…”å­å’Œå°ç‹ç‹¸ç”Ÿæ´»åœ¨ä¸€èµ·ã€‚ç§‹å¤©å¿«åˆ°äº†ï¼Œå°å…”æœ€è¿‘å¤–å‡ºæ€»æ˜¯æŒ–ä¸åˆ°å“ç›¸å§£å¥½çš„èƒ¡èåœï¼Œæ™šä¸Šå›åˆ°å®¶æœ‰äº›ä¸å¼€å¿ƒã€‚</p><p>å°ç‹ç‹¸çœ‹åˆ°å°å…”å­é—·é—·ä¸ä¹çš„ï¼Œå‚æ™šåƒå®Œæ™šé¥­å»æ£®æ—é‡Œé¢æ‰¾åˆ°ä¼šé­”æ³•çš„çŒ«å¤´é¹°å¤§å”ã€‚</p><p>çŒ«å¤´é¹°å¤§å”å¬äº†å°ç‹ç‹¸çš„è¯·æ±‚ï¼Œæƒ³äº†ä¸€ä¼šä»åº“æˆ¿ç¿»æ‰¾å‡ºä¸€å—ç™½è‰²çš„å¸ƒé€’ç»™å°ç‹ç‹¸ï¼Œå¹¶åœ¨ä»–çš„è€³æœµè¾¹è½»è½»å˜±å’ä¸€ç•ªï¼Œå°ç‹ç‹¸æŠ±ç€å¸ƒå…´é«˜é‡‡çƒˆåœ°å›å®¶äº†ã€‚</p><p>æ™šä¸Šï¼Œå°ç‹ç‹¸å¯¹å°å…”å­ç¥ç§˜çš„è¯´:â€œå¬çŒ«å¤´é¹°å¤§å”è¯´ä»Šæ™šä¼šæœ‰å¿«ä¹çš„å°ç²¾çµç»™æ£®æ—é‡Œé¢å¹¸è¿çš„å°åŠ¨ç‰©é€ä¸Šå°ç¤¼ç‰©ï¼Œä½ æ™šä¸Šç›¯ç€ç‚¹çª—æˆ·å¤–é¢ï¼Œè¯´ä¸å®šå¥½è¿å°±ä¼šé™ä¸´å‘¢ã€‚â€</p><p>â€œå—¯å—¯ã€‚â€å°å…”å­å°†ä¿¡å°†ç–‘åœ°ç‚¹ç‚¹å¤´ã€‚</p><p>å°ç‹ç‹¸é€€å‡ºå°å…”å­çš„å§å®¤ï¼Œçœ‹çœ‹å¢™ä¸Šé’Ÿè¡¨çš„æ—¶é—´ï¼ŒæŠŠç™½è‰²çš„åºŠå•æŠ«åœ¨èº«ä¸Šï¼Œç”¨å‰ªåˆ€å‰ªå‡ºé¼»å­çœ¼ç›å’Œè€³æœµçš„çªŸçª¿ï¼Œç…§ç€é•œå­çœ‹äº†çœ‹ï¼Œè§‰å¾—æŒºåƒä¸ªå°ç²¾çµã€‚</p><p>æ¥ç€è¹‘æ‰‹è¹‘è„šæ¨å¼€å°å±‹çš„é—¨ï¼Œèµ°åˆ°å°å…”å­å§å®¤çš„çª—å‰ã€‚</p><p>å±‹é‡Œçš„å°å…”å­æ­£ååœ¨ç¯ä¸‹çœ‹ä¹¦ï¼Œå¿½ç„¶çª—æˆ·å‰ä¸€é“å½±å­é—ªè¿‡ã€‚</p><p>å°å…”å­å“äº†ä¸€-è·³ï¼Œå¯æ˜¯åˆæƒ³åˆ°å°ç‹ç‹¸æ™šä¸Šè·Ÿå¥¹è¯´è¿‡çš„è¯ï¼Œå¥¹æ‰“å¼€å§å®¤é—¨å¤§å–Š:â€œå°ç‹ç‹¸ï¼Œå°ç²¾çµæ¥äº†ï¼Œä½ ä¹Ÿè¿‡æ¥çœ‹çœ‹å‘€ã€‚â€å¯æ˜¯å¹¶æ²¡æœ‰å°ç‹ç‹¸çš„å›åº”ã€‚</p><p>å°å…”å­å£®å£®èƒ†å­å¾€çª—æˆ·å‰å‡‘å‡‘ï¼Œâ€œå—–â€ä¸€ åªåˆçº¢åˆå¤§çš„èƒ¡èåœä»çª—æˆ·é£äº†è¿›æ¥ï¼Œè¿˜æ²¡ç­‰å°å…”å­ååº”è¿‡æ¥â€œå—–â€ï¼Œæœ‰ä¸€åªèƒ¡è åœé£äº†è¿›æ¥ã€‚</p><p>ä¸ä¸€ä¼šå„¿ï¼Œåå‡ åªèƒ¡èåœå·²ç»å †åœ¨å°å…”å­çš„é¢å‰ï¼Œâ€œè°¢è°¢ä½ ï¼Œå°ç²¾çµèƒ½è®©æˆ‘çœ‹çœ‹ä½ å˜›ï¼Œæˆ‘å®¶çš„å°ç‹ç‹¸ä¹Ÿæƒ³è§è§ä½ ï¼Œä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰å‡†å¤‡ä»–çš„ç¤¼ç‰©ã€‚â€</p><p>è¿™æ—¶æŠ«ç€ç™½åºŠå•çš„å°ç‹ç‹¸æ¨å¼€å§å®¤é—¨èµ°è¿›æ¥ï¼Œå°å…”å­ä¸€æ„£å°–å«é“:â€œé¬¼å‘€!â€</p><p>å°ç‹ç‹¸æ€å¼€åºŠå•æŠ±ä½äº†å°å…”å­:â€œå˜¿ï¼Œæˆ‘çš„å°å…”å­ï¼Œæˆ‘æ˜¯ä½ çš„å°ç²¾çµå‘€ã€‚â€</p><p>æ™šå®‰</p><h3 id="æƒ…ä¸çŸ¥æ‰€èµ·ï¼Œä¸€å¾€è€Œæ·±"><a href="#æƒ…ä¸çŸ¥æ‰€èµ·ï¼Œä¸€å¾€è€Œæ·±" class="headerlink" title="æƒ…ä¸çŸ¥æ‰€èµ·ï¼Œä¸€å¾€è€Œæ·±"></a>æƒ…ä¸çŸ¥æ‰€èµ·ï¼Œä¸€å¾€è€Œæ·±</h3><p>å¤©æ™´å¾—åƒä¸€å¼ è“çº¸ï¼Œå‡ ç‰‡è–„è–„çš„ç™½äº‘ï¼Œåƒè¢«é˜³å…‰æ™’åŒ–äº†ä¼¼çš„ï¼Œéšé£ç¼“ç¼“æµ®æ¸¸ç€ã€‚å°å…”å­æ­£çœ‹ç€çª—å¤–ç™¾æ— èŠèµ–çš„å‘ç€å‘†ï¼Œè¿™æ—¶ä¸€é˜µç”µè¯é“ƒå£°ç»“æŸäº†è¿™ç‰‡å¯‚é™ã€‚</p><p>â€œå°å…”å­ï¼Œæˆ‘ä»¬è¿™ä¸ªå‘¨æœ«å‡ºå»ç©å„¿å§ï¼â€å¥½æœ‹å‹å°æ¾é¼ å…´å¥‹çš„åœ¨ç”µè¯é‡Œè¯´åˆ°ã€‚â€œå»å“ªé‡Œï¼Œå’Œè°å•Šï¼Ÿâ€å°å…”å­é—®ã€‚â€œå°±å»å’±ä»¬é™„è¿‘å¾ˆçŸ¥åçš„é‚£åº§å±±ä¸Šé‡ç‚Šï¼Œå’Œâ€¦å’Œæˆ‘ä¸€ç›´å–œæ¬¢çš„é‚£ä¸ªç”·ç”Ÿå°çŒ´å­ã€‚â€</p><p>å°æ¾é¼ ä¸å¥½æ„æ€çš„è¯´åˆ°ã€‚â€œé‚£æˆ‘å»å¹²å˜›å•Šï¼Œä¼šå½“ç”µç¯æ³¡ã€‚â€å°å…”å­å˜Ÿå›”åˆ°ã€‚â€œä¸ä¼šå•¦ä¸ä¼šå•¦ï¼Œä»–ä¹Ÿå¸¦ç€ä¸€ä¸ªæœ‹å‹ï¼Œå’±ä»¬å››ä¸ªäººå‘¢ã€‚å»å§å»å§ï¼Œå¬è¯´ä»–é‚£ä¸ªæœ‹å‹å¾ˆå¸…å“¦ï¼Œä½ ä¹Ÿå•èº«è¿™ä¹ˆä¹…äº†ï¼Œæä¸å¥½æœ‰æˆå‘¢ï¼Ÿâ€å°æ¾é¼ ååçš„è¯´åˆ°ã€‚</p><p>å°å…”å­å¬åˆ°è¿™é‡Œè¿˜æ˜¯æœ‰æ‰€é¡¾å¿Œï¼Œä¸è¿‡å°æ¾é¼ è¯´çš„ä¹Ÿå¯¹ï¼Œè‡ªä»ä¸Šä¸€æ®µæ‹çˆ±ä¹‹åï¼Œå°å…”å­å°±å¾ˆå°‘å’Œç”·ç”Ÿæ¥è§¦äº†ï¼Œæ›´åˆ«ææ‹çˆ±ä¸€è¯´ã€‚å°å…”å­å¬åˆ°è¿™é‡Œå¹äº†å£æ°”è¯´ï¼šâ€œé‚£å¥½å§ï¼Œä½†æ˜¯è¯´å¥½äº†åªæ˜¯è§ä¸€è§å“¦ã€‚â€</p><p>å°±è¿™æ ·ï¼Œå‘¨æœ«å¾ˆå¿«åˆ°æ¥äº†ã€‚å¤©æ°”é¢„æŠ¥è¯´ä»Šå¤©ä¸€æ•´å¤©éƒ½ä¼šæ˜¯å¥½å¤©æ°”ï¼Œå°å…”å­å’Œå°æ¾é¼ ç¢°é¢ä»¥åå¾ˆå¿«å°±æ¥åˆ°äº†å››äººçº¦å®šçš„åœ°æ–¹ã€‚ä¸ä¸€ä¼šå„¿ä¸¤ä¸ªç”·ç”Ÿèµ°æ¥äº†ï¼Œå…¶ä¸­ä¸€ä¸ªç”·ç”Ÿå¾ˆå¤§æ–¹çš„ä»‹ç»åˆ°ï¼šâ€œä½ å¥½ï¼Œæˆ‘æ˜¯å°ç‹ç‹¸ï¼Œæ˜¯å°çŒ´å­çš„æœ‹å‹ã€‚â€</p><p>å°å…”å­çœ‹åˆ°ç”·ç”Ÿå¸…æ°”çš„è„¸åºï¼Œçªç„¶å®³ç¾äº†èµ·æ¥ï¼Œæ”¯æ”¯å¾å¾é“ï¼šâ€œä½ â€¦ä½ å¥½ï¼Œæˆ‘æ˜¯å°å…”å­ï¼Œå¾ˆé«˜å…´è®¤è¯†ä½ ã€‚â€</p><p>å°±è¿™æ ·å››äººä¸€èµ·å¼€å¼€å¿ƒå¿ƒçš„ä¸Šäº†å±±ï¼Œä¸¤ä¸¤æˆå¯¹æœ‰è¯´æœ‰ç¬‘ã€‚ä½†æ˜¯å¤©å…¬ä¸ä½œç¾ï¼Œä¸ä¸€ä¼šå„¿å¤©æ°”ä¾¿å˜å¾—é˜´äº‘å¯†å¸ƒäº†èµ·æ¥ï¼Œâ€œæœç„¶æ˜¯ä¸èƒ½ç›¸ä¿¡å¤©æ°”é¢„æŠ¥å‘¢ï¼Œå¥½åœ¨è¯¥çœ‹çš„æ™¯è‰²ä¹Ÿçœ‹çš„å·®ä¸å¤šäº†ã€‚â€å°æ¾é¼ å¹æ¯åˆ°ã€‚</p><p>è¯´ç€å››äººå°±å•†é‡é©¬ä¸Šä¸‹å±±ï¼Œåœ¨ä¸‹å±±çš„è¿‡ç¨‹ä¸­ï¼Œæ·…æ·…æ²¥æ²¥çš„å°é›¨ä¾¿ä¸‹äº†èµ·æ¥ï¼Œè·¯é¢å˜å¾—æ¹¿æ»‘äº†èµ·æ¥ï¼Œå°æ¾é¼ å’Œå°çŒ´å­ä¹Ÿä¸è§äº†èº«å½±ï¼Œå°å…”å­å’Œå°ç‹ç‹¸åªèƒ½æ…¢æ…¢çš„èµ°ç€ä¸‹å±±ã€‚</p><p>å› ä¸ºé“è·¯çš„éš¾èµ°ï¼Œä¸¤äººé çš„å¾ˆè¿‘å¾ˆè¿‘ï¼Œæœ‰çš„è·¯æ®µä¹Ÿäº’ç›¸æ€æ‰¶ã€‚é€šè¿‡ä¸€å¤©çš„ç›¸å¤„ä¸¤ä¸ªäººçš„å¿ƒé‡Œä¹Ÿéƒ½å¯¹å¯¹æ–¹æœ‰äº†ä¾èµ–å’Œå¥½æ„Ÿï¼Œä½†æ˜¯éƒ½ä¸çŸ¥é“è¯¥æ€ä¹ˆå¼€å£ã€‚</p><p>è¿™æ—¶å°å…”å­çªç„¶æ»‘äº†ä¸€ä¸‹ï¼Œå°ç‹ç‹¸èµ¶ç´§æŠ“ä½äº†å¥¹çš„æ‰‹ã€‚â€œä½ æ²¡äº‹å§ï¼â€å°ç‹ç‹¸ç´§å¼ çš„é—®åˆ°ã€‚å°å…”å­æ‘‡æ‘‡å¤´è¯´ï¼šâ€œæ²¡äº‹æ²¡äº‹ï¼Œç»§ç»­èµ°å§ã€‚â€</p><p>å¯æ˜¯å°ç‹ç‹¸æ‹‰ç´§çš„æ‰‹å´å†ä¹Ÿæ²¡æœ‰æ”¾å¼€ï¼Œåè€Œè¶Šæ¥è¶Šç´§ï¼Œå°±è¿æ‰‹å¿ƒå‡ºæ±—äº†ä¹Ÿèˆä¸å¾—æ¾å¼€ã€‚å®‰å…¨ä¸‹å±±åï¼Œä¸¤ä¸ªäººäº’ç›¸ç•™äº†è”ç³»æ–¹å¼åï¼Œä¾¿ç¦»å¼€äº†ã€‚</p><p>ä¹‹åå°å…”å­æ¯å‡ åˆ†é’Ÿå°±è¦çœ‹ä¸€çœ¼æ‰‹æœºï¼Œçœ‹çœ‹å°ç‹ç‹¸æœ‰æ²¡æœ‰ç»™è‡ªå·±å‘æ¶ˆæ¯ï¼Œå‡ ä¸ªå°æ—¶è¿‡å»äº†ï¼Œè¿˜æ˜¯æ²¡æœ‰åŠ¨é™ã€‚</p><p>å°å…”å­å¼€å§‹æƒ³æ˜¯ä¸æ˜¯å°ç‹ç‹¸åªæ˜¯æ‹…å¿ƒå¥¹çš„å®‰å±ï¼Œè€Œä¸æ˜¯å¥¹æƒ³çš„é‚£ä¸ªæ„æ€ã€‚æ­£èƒ¡æ€ä¹±æƒ³åˆ°è¿™é‡Œï¼Œå°ç‹ç‹¸çš„ç”µè¯ä¾¿æ¥äº†ï¼Œå°å…”å­åˆç´§å¼ åˆå…´å¥‹ï¼Œä½†è¿˜æ˜¯æ•…ä½œé•‡é™çš„æ¥èµ·æ¥é—®ï¼šâ€œè¿™ä¹ˆæ™šäº†æœ‰ä»€ä¹ˆäº‹å„¿å—ï¼Ÿâ€</p><p>å¯¹é¢çš„å°ç‹ç‹¸è¯´åˆ°ï¼šâ€œæˆ‘æƒ³äº†å¾ˆä¹…æ€ä¹ˆç»™ä½ ç¼–è¾‘ä¸€æ®µè¯ï¼Œå¯æ˜¯æ€æ¥æƒ³å»è¿™ç§äº‹åº”è¯¥å»æ­£å¼çš„è¯´ä¸€ä¸‹æ‰ç®—èƒ½è¡¨è¾¾æˆ‘çš„çœŸå¿ƒã€‚æ‰€ä»¥â€¦æˆ‘å–œæ¬¢ä½ ï¼Œä½ å¯ä»¥â€¦åšæˆ‘çš„å¥³æœ‹å‹å—ï¼Ÿâ€æ­¤æ—¶çš„å°å…”å­ç´§å¼ åˆ°éƒ½èƒ½å¬åˆ°è‡ªå·±çš„å¿ƒè·³å£°ï¼Œå¥¹å¹³å¤äº†ä¸€ä¸‹å¿ƒæƒ…æ‰è¯´åˆ°ï¼šâ€œå—¯ï¼Œæˆ‘æ„¿æ„ã€‚â€</p><p>åæ¥å°å…”å­é—®å°ç‹ç‹¸ï¼šâ€œä½ å½“æ—¶ä¸ºä»€ä¹ˆè¦æŠ“é‚£ä¹ˆç´§å•Šï¼Ÿâ€å°ç‹ç‹¸è®¤çœŸçš„æƒ³äº†æƒ³è¯´ï¼šâ€œå› ä¸ºæŠ“ä½äº†ï¼Œå°±å†ä¹Ÿä¸æƒ³æ”¾å¼€ã€‚â€</p><p>æ™šå®‰</p><h3 id="å¾ˆå¹¸è¿èƒ½æœ‰ä½ "><a href="#å¾ˆå¹¸è¿èƒ½æœ‰ä½ " class="headerlink" title="å¾ˆå¹¸è¿èƒ½æœ‰ä½ "></a>å¾ˆå¹¸è¿èƒ½æœ‰ä½ </h3><p>ç­‰äº†å¥½ä¹…å¥½ä¹…ï¼Œç»ˆäºåˆ°äº†å°å…”å­å’Œå°ç‹ç‹¸è§é¢çš„æ—¥å­ï¼Œè™½ç„¶è¿™ä¸€å¤©ç‰¹åˆ«çƒ­ï¼Œå°å…”å­ç«™åœ¨å¤–é¢æ±—ç›´æµï¼Œä½†ä¹ŸæŠµæŒ¡ä¸äº†å¥¹çš„å¼€å¿ƒã€‚</p><p>æŠ±ç€èŠ±ç­‰å¾…çš„å°å…”å­åœ¨çœ‹åˆ°å°ç‹ç‹¸çš„é‚£ä¸€åˆ»å°±æ‰‘è¿›äº†ä»–çš„æ€€é‡Œï¼ŒåŠªåŠ›è¹­äº†è¹­ï¼Œç„¶åæ‰‹ç‰µç€æ‰‹å›åˆ°äº†ä½çš„åœ°æ–¹ã€‚</p><p>ç¬¬äºŒå¤©å°å…”å­è·Ÿå°ç‹ç‹¸åœ¨å¤–é¢é€›äº†ä¸€å¤©ï¼Œå›åˆ°å®¶é‡Œæ´—æ´—å°±èººåœ¨åºŠä¸Šäº†ï¼Œè¿™ä¸€å¤©å¯å¤ªç´¯äº†ï¼Œæœˆäº®å·²ç»æŒ‚ä¸Šäº†å¤©ç©ºï¼Œå°ç‹ç‹¸çœ‹äº†çœ‹çª—å¤–æ»¡å¤©çš„æ˜Ÿæ˜Ÿ:â€œå¤–é¢çš„æœˆäº®éƒ½è¦ç¡è§‰äº†ï¼Œæˆ‘çš„å°å®è´ä»€ä¹ˆæ—¶å€™ç¡å‘€?â€</p><p>å°å…”å­åœ¨å°ç‹ç‹¸æ€€é‡Œæ‰äº†æ‰çœ¼ç›ï¼Œæ’’å¨‡é“:é‚£ä½ å“„æˆ‘ç¡è§‰å§ã€‚</p><p>â€œä»å‰æœ‰ä¸€åªå°ç‹ç‹¸ï¼Œä»–å¾ˆå–œæ¬¢å°å…”å­ï¼Œå–œæ¬¢åˆ°æ—¶æ—¶åˆ»åˆ»æƒ³å’Œå°å…”å­å¾…åœ¨â€“èµ·ï¼Œä»–ä¼šå› ä¸ºå°å…”å­ç¡ä¸å¥½è€Œç»™å¥¹æ¸©æŸ”è®²ç¡å‰æ•…äº‹ã€‚</p><p>å³ä½¿è‡ªå·±å¾ˆå¿™ï¼Œä»–ä¼šè®°ä½å°å…”å­çš„å£å‘³ï¼Œç»™å¥¹ä¹°å¥¹çˆ±åƒçš„ï¼Œä»–ä¼šæ¸©æŸ”è€å¿ƒåœ°ç»™å°å…”å­è®²é“ç†ï¼Œä¸ä¼šå‡¶å¥¹â€¦.</p><p>å°å…”å­å‘¢ï¼Œä¹Ÿå¾ˆå–œæ¬¢å°ç‹ç‹¸ï¼Œä½†æ˜¯å°å…”å­ä¸å–„äºè¡¨è¾¾è‡ªå·±çš„æƒ…æ„Ÿä»¥è‡³äºæœ‰æ—¶å€™å°ç‹ç‹¸è§‰å¾—å¥¹ä¸å–œæ¬¢è‡ªå·±ï¼Œå› ä¸ºå°å…”å­è§‰å¾—ï¼Œè‡ªå·±åªè¦åœ¨å¿ƒé‡Œè¶Šæ¥è¶Šå–œæ¬¢å°ç‹ç‹¸å°±è¡Œäº†ï¼Œä¸éœ€è¦è¯´å‡ºæ¥ã€‚</p><p>æ‰€ä»¥å°ç‹ç‹¸æ€»æ˜¯ä¼šæ€€ç–‘å°å…”å­åˆ°åº•å–œä¸å–œæ¬¢ä»–ï¼Œæ€»æ˜¯ä¼šæƒ³åŠæ³•å»å¾—åˆ°è‡ªå·±æƒ³è¦çš„ç­”æ¡ˆï¼Œå»ç¡®è®¤å°å…”å­æ˜¯ä¸æ˜¯çœŸçš„å–œæ¬¢è‡ªå·±ï¼Œå¤©å¤©ç¼ ç€å°å…”å­ï¼Œåæ¥â€¦..â€</p><p>æ•…äº‹åˆšè®²åˆ°ä¸€åŠï¼Œå°ç‹ç‹¸å‘ç°å°å…”å­å·²ç»åœ¨æ€€é‡Œç¡ç€äº†ã€‚</p><p>çœ‹ç€å¥¹å¾®å¾®å‘çº¢çš„è„¸é¢Šï¼Œå¬ç€å¥¹è½»å¾®çš„å‘¼å¸å£°ï¼Œå°ç‹ç‹¸è§‰å¾—å¥½å®‰å¿ƒã€‚</p><p>å°ç‹ç‹¸å‡‘ä¸Šå‰äº²äº†ä¸€ä¸ªï¼Œâ€œç¬¨è›‹ï¼Œ æ•…äº‹æˆ‘è¿˜æ²¡è®²å®Œå‘¢ï¼Œä½ å°±ç¡ç€å•¦ï¼Œå¥½åœ¨æˆ‘çˆ±ä½ ä½ éƒ½çŸ¥é“ä¸ç”¨æ€€ç–‘ï¼Œå¥½å¹¸è¿é‡è§äº†ä½ ã€‚</p><p>æ™šå®‰</p><h3 id="æˆ‘æƒ³èµ°è¿‘ä½ "><a href="#æˆ‘æƒ³èµ°è¿‘ä½ " class="headerlink" title="æˆ‘æƒ³èµ°è¿‘ä½ "></a>æˆ‘æƒ³èµ°è¿‘ä½ </h3><p>ä»Šå¤©â€¦å°ç‹ç‹¸å’Œå°å…”å­åµæ¶äº†ï¼Œä¸¤ä¸ªäººåµå¾—ä¸å¯å¼€äº¤ï¼Œè‡³äºæ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Œå°±æ˜¯å°ç‹ç‹¸æœ€è¿‘å¤ªå¿™äº†ï¼Œæ—¶å¸¸å¿™åˆ°æ·±å¤œï¼Œæ€»æ˜¯é¡¾ä¸ä¸Šå°å…”å­ï¼Œå°±è¿æœ€è¿‘ä¸€æ¬¡çš„èŠ‚æ—¥éƒ½æ²¡èƒ½é™ªå°å…”å­å¥½å¥½è¿‡ã€‚</p><p>ä¸€è¾¹å°ç‹ç‹¸è§‰å¾—è‡ªå·±ä¹Ÿå°½åŠ›åœ¨é™ªå°å…”å­äº†ï¼Œæƒ³æ—©ç‚¹åšå®Œå·¥ä½œé™ªç€å°å…”å­ï¼Œå¯æ˜¯å°å…”å­å´è§‰å¾—ä»–å·²ç»å¿™äº†å¤ªä¹…äº†ï¼Œè¿™æ¬¡è¿˜ä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™æ‰èƒ½ç»“æŸã€‚</p><p>æœ€åä¸¤ä¸ªäººéƒ½ä¸å’Œå¯¹æ–¹è¯´è¯äº†ï¼Œå°ç‹ç‹¸ç»§ç»­åœ¨å¿™ç€äº›ä»€ä¹ˆä¸è¯´è¯ï¼Œè€Œå°å…”å­æ›´æ˜¯æ”¶æ‹¾å¥½éšèº«ä¸œè¥¿ä»å®¶é‡Œç¦»å¼€äº†ã€‚ä¸¤ä¸ªäººçš„äº‰æ‰§ä»¥å…³é—¨å£°ä½œä¸ºç»“æŸã€‚</p><p>å¤–é¢çƒ­æµªæ¥è¢­ï¼Œè‰é¸£å£°è¿™æ—¶æ ¼å¤–åˆºè€³ï¼Œåœ¨å®¶çš„å°ç‹ç‹¸é€æ¸æŒ‰è€ä¸ä½ï¼Œå°ç‹ç‹¸å¼€å§‹ä¸åœçš„åœ¨å®¶é‡Œè¸±æ­¥ï¼Œä¸çŸ¥é“å°å…”å­åœ¨å¤–é¢æœ‰æ²¡æœ‰å±é™©ï¼Œæœ‰æ²¡æœ‰å“­ï¼Œè¿˜åœ¨ä¸åœ¨ç”Ÿæ°”ï¼Œæœ‰æ²¡æœ‰è¢«æ™’åˆ°ï¼Œä¼šä¸ä¼šä¸­æš‘ã€‚</p><p>æœ€é‡è¦çš„æ˜¯è‡ªå·±çœŸçš„å¥½æƒ³å¥½æƒ³å¥¹ï¼Œæœ€è¿‘ä¹Ÿçš„ç¡®å› ä¸ºè‡ªå·±çš„äº‹æƒ…æ€»å†·è½å°å…”å­ï¼Œå°å…”å­å—å§”å±ˆäº†è‡ªå·±ä¸åº”è¯¥æ€»æ˜¯åªé¡¾è‡ªå·±çš„æƒ³æ³•ã€‚</p><p>æƒ³åˆ°è¿™é‡Œå°ç‹ç‹¸æ‹¨é€šäº†å°å…”å­çš„ç”µè¯ï¼Œå¯æ˜¯ç”µè¯æ²¡å“ä¸¤å£°å°±è¢«æŒ‚äº†ã€‚ä»–åˆæ‰“äº†ä¸€ä¸ªå°å…”å­æ¥èµ·æ¥äº†ï¼Œâ€œå°å…”å­ä½ åœ¨å“ªé‡Œå•Šï¼Œæˆ‘å»æ¥ä½ ã€‚â€</p><p>å°å…”å­æ·¡æ·¡çš„è¯´ï¼šâ€œå¤–é¢ã€‚â€ç„¶åå°±åˆæŒ‚æ–­äº†ã€‚å°ç‹ç‹¸éš¾è¿‡çš„æƒ³ï¼Œå¥¹åº”è¯¥è¿˜åœ¨ç”Ÿæ°”å§ï¼Œä½†æ˜¯ä»–å¾ˆå¿«åˆæƒ³ï¼Œä¸ç®¡æ€ä¹ˆæ ·ï¼Œä»–åº”è¯¥å»æ‰¾æ‰¾å¥¹ã€‚</p><p>ä»–èµ¶ç´§ç©¿å¥½è¡£æœæ‰“ç®—å‡ºé—¨ï¼Œåˆšæ¨é—¨ä»–æƒŠå¥‡çš„çœ‹åˆ°å°å…”å­ç«Ÿç„¶å›æ¥äº†ã€‚â€œä½ â€¦æ€ä¹ˆå›æ¥äº†ã€‚â€</p><p>å°ç‹ç‹¸æƒŠè®¶çš„é—®ï¼Œå°å…”å­è¯´ï¼šâ€œæˆ‘å»ä¹°äº†ç‚¹åƒçš„ï¼Œä¸€ä¼šå„¿ç»™ä½ åšæ±¤å–ã€‚â€å°ç‹ç‹¸æŠ±ä½å°å…”å­è¯´ï¼šâ€œå¯¹ä¸èµ·ï¼Œè¿™äº‹å„¿çš„ç¡®æ˜¯æˆ‘é”™äº†ï¼Œæˆ‘å·²ç»éƒ½å¿™å®Œäº†ï¼Œä¸ä¼šå†è¿™æ ·äº†ä»¥åã€‚â€è¯´ç€è¯´ç€çœ¼çœ¶éƒ½æœ‰ç‚¹çº¢äº†ï¼Œå°å…”å­å‚²å¨‡çš„é—®ä»–ï¼Œâ€œé‚£ä½ çŸ¥é“é”™äº†å—ï¼Ÿâ€</p><p>å°ç‹ç‹¸è®¤çœŸçš„ç‚¹ç‚¹å¤´è¯´ï¼šâ€œæˆ‘çœŸçš„çŸ¥é“é”™äº†ï¼Œæˆ‘å·²ç»è®¢å¥½äº†è¿‡ä¸¤å¤©å¸¦ä½ å»ç©å„¿çš„ç¥¨ï¼Œè¿˜æœ‰è¿˜æœ‰æœ€é‡è¦çš„æ˜¯æˆ‘ä¸åº”è¯¥ç•™ä½ ä¸€ä¸ªäººé‚£ä¹ˆä¹…ã€‚â€</p><p>å°å…”å­æ‘¸æ‘¸ä»–å¤´è¯´ï¼šâ€œé‚£å°±çœ‹åœ¨ä½ è¿™ä¹ˆç”¨å¿ƒæ‰¿è®¤é”™è¯¯çš„ä»½ä¸ŠåŸè°…ä½ äº†ï¼Œä½ çœ‹æˆ‘ç»™ä½ ä¹°äº†æœ€å–œæ¬¢çš„åƒçš„ï¼Œæœ‰å¥½èº«ä½“æ‰èƒ½èµšé’±å•Šã€‚â€</p><p>å°ç‹ç‹¸çœ‹ç€çœ¼å‰é¼“åŠ±è‡ªå·±çš„å°å…”å­ï¼Œä»–çŸ¥é“è‡ªå·±é‡åˆ°äº†é‚£ä¸ªæ„¿æ„èµ°å‘è‡ªå·±çš„äººï¼Œå¾ˆå®‰å¿ƒï¼Œå¾ˆæ¸©æš–ã€‚</p><p>å¤å¤©æ ‘å½±å©†å¨‘ï¼Œé£æš–æš–çš„ï¼Œå¤å¤©â€¦ä¸ä»…æœ‰æ³¥åœŸçš„èŠ¬èŠ³ï¼Œç¹èŒ‚çš„æ ‘è«ï¼Œè¿˜æœ‰ä¸€ä»½ç‹¬ç‰¹çš„é’æ¶©å’Œä¸¤ä¸ªç›¸äº’å¥”èµ´çš„å¿ƒã€‚</p><p>æˆ‘çŸ¥é“äººå¿ƒå¾ˆéš¾æµ‹ï¼Œå¯æ˜¯æˆ‘çŸ¥é“ä½ ä¸€ç›´éƒ½åœ¨æ…¢æ…¢çš„èµ°å‘æˆ‘ï¼Œä»æœªè¿œç¦»ã€‚</p><p>æ™šå®‰</p><h3 id="ä½ æ˜¯æˆ‘æƒ³è§åˆ°çš„äºº"><a href="#ä½ æ˜¯æˆ‘æƒ³è§åˆ°çš„äºº" class="headerlink" title="ä½ æ˜¯æˆ‘æƒ³è§åˆ°çš„äºº"></a>ä½ æ˜¯æˆ‘æƒ³è§åˆ°çš„äºº</h3><p>å°ç‹ç‹¸å¾ˆæ€•å¤å¤©çš„é›¨å­£ï¼Œå› ä¸ºä¸€åˆ°è¿™ä¸ªæ—¶å€™å°±ä¼šæŠŠæ¼‚äº®çš„çº¢è‰²çš®æ¯›å¼„å¾—æ¹¿æ¹¿çš„ï¼Œæµ‘èº«å¾ˆä¸èˆ’æœã€‚</p><p>ä½†æ˜¯ä½åœ¨éš”å£çš„å°å…”å­å´ç›¸åï¼Œå¾ˆå–œæ¬¢åœ¨é›¨å¤©é‡Œç»•ç€æ£®æ—èµ°èµ°åœåœï¼Œå¥¹æ‰ä¸ä¼šæ˜ç™½éš”å£çš„å°ç‹ç‹¸ä¸ºä»€ä¹ˆä¸å–œæ¬¢è¿™æ ·çš„å¤©æ°”ï¼Œå¥¹åªçŸ¥é“æ¯æ¬¡ä¸€åˆ°è¿™ä¼šå„¿å°±çœ‹ä¸åˆ°å°ç‹ç‹¸çš„å½±å­ã€‚</p><p>ç»ˆäºåˆåœ¨ä¸€ä¸ªé›¨å¤©é‡Œï¼Œå°ç‹ç‹¸åˆçªåœ¨å®¶é‡Œï¼Œå¯æ˜¯è¿™ä¸€æ¬¡å°ç‹ç‹¸æ²¡æœ‰å‡†å¤‡è¶³å¤Ÿçš„åƒçš„ï¼Œè‚šå­é¥¿å¾—å’•å’•å«ã€‚</p><p>å¯æ˜¯ä»–çœŸçš„ä¸æƒ³å‡ºå»å•Šï¼Œæ²¡æœ‰åŠæ³•ä»–æ‰“å¼€å®¶é—¨å·å·çš„å¾€å¤–çœ‹äº†ä¸€çœ¼ï¼Œè¯•å›¾æœ‰åˆ«çš„è·¯è¿‡çš„å°åŠ¨ç‰©èƒ½ç»™ä»–ä¸€ç‚¹åƒçš„ï¼Œè¿™æ ·å°±å¯ä»¥ä¸ç”¨è¢«æ·‹æ¹¿äº†ã€‚</p><p>å½“ä»–æ‰“å¼€äº†é—¨çš„é‚£ä¸€åˆ»ï¼Œå°å…”å­çªç„¶ä»é—¨åè·³å‡ºæ¥å“äº†ä»–ä¸€è·³ï¼Œâ€œå°ç‹ç‹¸ï¼Œå¾ˆéš¾å¾—è¿™æ ·çš„å¤©æ°”ä½ è¿˜æ‰“å¼€é—¨ã€‚â€</p><p>å°ç‹ç‹¸æƒŠè®¶çš„çœ‹ç€ä»–è¯´ï¼šâ€œä½ æ€ä¹ˆåœ¨è¿™é‡Œï¼Œè¯è¯´ä½ æœ‰åƒçš„å—ï¼Œæˆ‘æ˜¯å› ä¸ºå¤ªé¥¿äº†ã€‚â€</p><p>å°å…”å­ç¬‘ç€è¯´ï¼šâ€œåŸæ¥æ˜¯å› ä¸ºè¿™ä¸ªå•Šï¼Œå¯æ˜¯æˆ‘åªæœ‰èƒ¡èåœï¼Œä½ åƒèƒ¡èåœå—â€å°ç‹ç‹¸å¼€å¿ƒçš„è¯´ï¼šâ€œèƒ¡èåœï¼æˆ‘æœ€å–œæ¬¢åƒèƒ¡èåœäº†ã€‚â€</p><p>å°å…”å­ä¾¿ç»™äº†ä»–ä¸€æ ¹ï¼Œæ­¤åçš„æ¯ä¸ªé›¨å¤©å°å…”å­éƒ½ä¼šæ•²å¼€å°ç‹ç‹¸çš„é—¨ç»™ä»–ä¸€æ ¹èƒ¡èåœï¼Œä¹Ÿä¼šåœ¨å°ç‹ç‹¸çš„å®¶é‡Œå’Œä»–ä¸€èµ·åœ¨ç«ç‚‰æ—èŠèŠå¤©ï¼Œå¹²ä¸€å¹²æ¯›å‘ã€‚</p><p>ä»æ­¤å°ç‹ç‹¸ä¹Ÿå–œæ¬¢ä¸Šäº†é›¨å¤©ï¼Œå¯æ˜¯ä»–å…¶å®çŸ¥é“ï¼Œä»–å–œæ¬¢çš„ä¸ä»…ä»…æ˜¯é›¨å¤©ï¼Œè€Œæ˜¯ä¸‹é›¨å¤©æŒ‰æ—¶æ•²å¼€ä»–é—¨çš„é‚£åªå°å…”å­ï¼Œè™½ç„¶æ¯æ¬¡åªèƒ½è¯´å‡ å¥è¯ï¼Œæ¸©æš–çš„å´æ˜¯ä¸€æ•´ä¸ªé›¨å¤©ã€‚</p><p>æ™šå®‰</p><h3 id="æˆ‘æƒ³æ¯å¤©è§åˆ°ä½ "><a href="#æˆ‘æƒ³æ¯å¤©è§åˆ°ä½ " class="headerlink" title="æˆ‘æƒ³æ¯å¤©è§åˆ°ä½ "></a>æˆ‘æƒ³æ¯å¤©è§åˆ°ä½ </h3><p>å¤å¤©åˆ°äº†ï¼Œå°å…”å­ä¸€åˆ°è¿™ä¼šå„¿ï¼Œæ•´åªå…”éƒ½æ²¡æœ‰ç²¾ç¥ï¼Œæˆå¤©è€¸æ‹‰ç€è€³æœµï¼Œæ‹–ç€æ²‰é‡çš„è„šæ­¥ã€‚å¯å°±åœ¨æœ€è¿‘ï¼Œå®ƒæ‰¾åˆ°äº†ä¸€ä¸ªå¥½åœ°æ–¹ï¼Œå°±åœ¨ç¦»å®¶ä¸è¿œçš„ä¸€ä¸ªå±±æ´é‡Œï¼Œé‡Œé¢å¾ˆå‡‰å¿«è¿˜èƒ½å¬åˆ°æ½ºæ½ºçš„æ°´å£°ã€‚</p><p>è¿™éƒ½ä¸æ˜¯æœ€é‡è¦çš„ï¼Œæœ€é‡è¦çš„æ˜¯å±±æ´å£æ€»ä¼šæœ‰æ–°é²œçš„æ°´æœæ”¾ç€ï¼Œä¸çŸ¥é“æ˜¯è°çš„ï¼Œå°å…”å­æ¯æ¬¡éƒ½åªæ•¢åƒå‡ ä¸ªï¼Œæ€•è¢«æ°´æœçš„ä¸»äººå‘ç°ã€‚å¯æ˜¯æ°´æœå¤ªæ–°é²œå¤ªå¥½åƒäº†ï¼Œå†°å†°å‡‰å‡‰çš„ï¼Œæœ‰çš„æ—¶å€™å°å…”å­å°±å¿ä¸ä½å¤šåƒå‡ ä¸ªã€‚</p><p>ç›´åˆ°ä¸Šå‘¨ï¼Œå°å…”å­è¿˜æ˜¯ç…§å¸¸åˆ°äº†å±±æ´å£ï¼Œå¥¹å‘ç°ä»Šå¤©çš„æ°´æœæ˜¯è¥¿ç“œï¼Œä½†æ˜¯åªæœ‰åŠä¸ªã€‚</p><p>å®ƒå¿ƒæƒ³ï¼Œâ€œè¿™å¯æ€ä¹ˆåŠå•Šï¼Œæˆ‘è¦æ˜¯åƒäº†è‚¯å®šä¼šè¢«å‘ç°çš„ã€‚è¦ä¸ä¸€ä¸åšäºŒä¸ä¼‘ï¼Œè¶è¿˜æ²¡æœ‰æ³¨æ„åƒæ‰å¥½äº†å…¨éƒ¨ã€‚â€æƒ³åˆ°è¿™é‡Œå®ƒé©¬ä¸Šå¿«é€Ÿçš„åƒäº†èµ·æ¥ï¼Œåƒçš„æ•´åªå…”éƒ½çº¢äº†ã€‚</p><p>â€œä½ å¹²å˜›å‘¢â€è¿™æ—¶å€™æœ‰ä¸ªå£°éŸ³ä»å°å…”å­çš„èƒŒåä¼ æ¥ã€‚å°å…”å­å¬åˆ°è¿™ä¸ªå£°éŸ³ï¼Œå¤´éƒ½æ²¡æ•¢æŠ¬çš„æ‹”èµ·è…¿å°±è¦è·‘ã€‚å¯æ˜¯å› ä¸ºåƒå¤ªå¤šäº†ï¼Œè·‘éƒ½æ²‰é‡äº†å¾ˆå¤šï¼Œå¾ˆå¿«å°±è¢«æŠ“åˆ°äº†ã€‚</p><p>å®ƒé—­ç€çœ¼ç›è€¸æ‹‰ç€è€³æœµç´§å¼ çš„è¯´ï¼šâ€œå¯¹ä¸èµ·å¯¹ä¸èµ·ï¼Œæˆ‘ä¸æ˜¯æ•…æ„çš„ï¼Œåªæ˜¯ä½ çš„æ°´æœéƒ½å¤ªé¦™ç”œäº†ï¼Œæˆ‘å®åœ¨æ²¡å¿ä½ã€‚â€â€œæˆ‘æ²¡æœ‰æ€ªä½ â€å°å…”å­å¬åˆ°è¿™é‡Œçå¼€äº†ä¸€åªçœ¼ç›çœ‹äº†ä¸€çœ¼ï¼ŒåŸæ¥æ˜¯ä¸€åªå°ç‹ç‹¸ã€‚</p><p>å®ƒç»§ç»­æŠ±æ­‰çš„è¯´â€œå¯¹ä¸èµ·ï¼Œæˆ‘ä»¥åä¸ä¼šå†è¿™æ ·äº†ï¼Œä½ å°±åŸè°…æˆ‘ä¸€æ¬¡å§ï¼Œä¸è¦åƒæˆ‘ã€‚â€å°ç‹ç‹¸æ…¢æ…¢çš„æŠŠå®ƒæ”¾åœ¨åœ°ä¸‹è¯´ï¼šâ€œæ²¡å…³ç³»ï¼Œè¥¿ç“œå°±æ˜¯ç»™ä½ å‡†å¤‡çš„å¦ä¸€åŠæˆ‘å·²ç»åƒæ‰äº†ã€‚â€</p><p>å°å…”å­æƒŠè®¶çš„çœ‹ç€ä»–è¯´ï¼šâ€œä½ â€¦ä¸ºä»€ä¹ˆè¦ç»™æˆ‘å‡†å¤‡å•Šï¼Ÿâ€</p><p>å°ç‹ç‹¸ç¬‘ç€å¯¹å®ƒè¯´ï¼šâ€œä¸€å¼€å§‹æˆ‘å‘ç°æ°´æœå°‘äº†ï¼Œå°±æƒ³çŸ¥é“æ˜¯è°åƒæ‰çš„ï¼Œæ¯æ¬¡éƒ½èº²åœ¨è§’è½é‡Œçœ‹ä½ æˆ˜æˆ˜å…¢å…¢çš„å·åƒï¼Œå¾ˆå¯çˆ±ã€‚ä»Šå¤©å°±æƒ³è¿‡å»å“å“ä½ ï¼Œæ²¡æƒ³åˆ°çœŸçš„æŠŠä½ å“åˆ°äº†ã€‚â€</p><p>å°å…”å­å¬åˆ°è¿™é‡Œä¸å¥½æ„æ€çš„è¯´ï¼šâ€œé‚£æˆ‘â€¦é‚£æˆ‘ä»¥åè¿˜èƒ½æ¥ä½ è¿™é‡Œå—ï¼Ÿâ€</p><p>å°ç‹ç‹¸æ‘¸æ‘¸å®ƒçš„å¤´è¯´ï¼šâ€œå¯ä»¥å•Šï¼Œæ¯•ç«Ÿæˆ‘è¿˜æƒ³å¤©å¤©è§åˆ°ä½ ã€‚â€</p><p>æ™šå®‰</p><h3 id="ç”Ÿæ´»å¾ˆè‹¦ï¼Œä½†ä½ å¾ˆç”œ"><a href="#ç”Ÿæ´»å¾ˆè‹¦ï¼Œä½†ä½ å¾ˆç”œ" class="headerlink" title="ç”Ÿæ´»å¾ˆè‹¦ï¼Œä½†ä½ å¾ˆç”œ"></a>ç”Ÿæ´»å¾ˆè‹¦ï¼Œä½†ä½ å¾ˆç”œ</h3><p>æ£®æ—é‡Œæœ‰ä¸ªä¸æˆæ–‡çš„è§„å®šï¼Œé‚£å°±æ˜¯æ¯å½“å…­ä¸ƒæœˆä»½ä¸‹é›¨çš„æ—¶å€™ï¼Œæ£®æ—é‡Œçš„å°åŠ¨ç‰©å°±åªèƒ½åœ¨å®¶ã€‚æ²¡æœ‰äººå»è§„å®šè¿‡ï¼Œå¯æ˜¯å¥½åƒå¤§å®¶éƒ½è¿™ä¹ˆåšçš„ã€‚è¿™å¯éš¾åäº†åˆšåœ¨ä¸€èµ·çš„å°å…”å­å’Œå°ç‹ç‹¸ã€‚</p><p>â€œå°ç‹ç‹¸æˆ‘å¥½æƒ³ä½ å•Šï¼Œå’±ä»¬è¿˜æœ‰æ•´æ•´ä¸¤ä¸ªæœˆæ‰èƒ½è§é¢ï¼Œè¿™æ ·çš„æ—¥å­ä»€ä¹ˆæ—¶å€™æ‰èƒ½ç»“æŸå•Šã€‚â€</p><p>å°ç‹ç‹¸å¿ƒé‡Œå¬äº†ä¹Ÿå¾ˆä¸æ˜¯æ»‹å‘³ï¼Œå¯æ˜¯ä»–çŸ¥é“è‡ªå·±è¿™æ—¶å€™è¦æ˜¯ä¹Ÿéå¸¸éš¾è¿‡çš„è¯ï¼Œé‚£å°å…”å­ä¸€å®šä¼šæ›´åŠ éš¾è¿‡çš„ã€‚ä»–é‡æ–°æŒ¯ä½œäº†ä¸€ä¸‹è¯´ï¼šâ€œæˆ‘å¯ä»¥å’Œä½ ä¸€ç›´æ‰“ç€ç”µè¯ï¼Œä½ æƒ³æˆ‘äº†å°±å¯ä»¥é©¬ä¸Šçœ‹åˆ°æˆ‘ã€‚â€</p><p>å¯æ˜¯æˆ‘ä»¬æ€»è¦ç¡è§‰çš„ï¼Œä½ ç¡ç€äº†æˆ‘æƒ³ä½ æ€ä¹ˆåŠâ€</p><p>â€œé‚£æˆ‘ä»¬å°±ç¡è§‰éƒ½æ‰“ç€ç”µè¯ä¸æŒ‚æ–­ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½æ—¶æ—¶åˆ»åˆ»åœ¨ä¸€èµ·äº†â€</p><p>å°å…”å­çœ¼é‡Œæœ‰ä¸€é˜µæ¬£å–œï¼Œå¯æ˜¯å¾ˆå¿«å¥¹çœ¼é‡Œåˆæœ‰ä¸€ä¸ä¼¤æ„Ÿï¼Œâ€œå¯æ˜¯æˆ‘è¿™ä¸¤å¤©éƒ½ç¡ä¸ç€è§‰ï¼Œå°±å¾ˆæƒ³ä½ ã€‚â€</p><p>â€œé‚£æˆ‘ç»™ä½ è®²ç¡å‰æ•…äº‹å§ï¼Œè®²åˆ°â€¦ç›´åˆ°ä½ ç¡ç€ä¸ºæ­¢ã€‚â€</p><p>â€œçœŸçš„å—ï¼Œå¯æ˜¯è®²é‚£ä¹ˆä¹…çš„æ•…äº‹ä½ ä¸€å®šä¼šçƒ¦çš„å§â€</p><p>å°ç‹ç‹¸è¿™æ—¶å€™çœ¼ç¥å˜å¾—æ¸©æŸ”è€Œä¸¥è‚ƒäº†èµ·æ¥ï¼Œâ€œæ€ä¹ˆä¼šçƒ¦å‘¢ï¼Œåªè¦ä½ èƒ½å¼€å¼€å¿ƒå¿ƒçš„ï¼Œæˆ‘è®²å¤šå°‘æ•…äº‹éƒ½æ„¿æ„â€</p><p>å°å…”å­å¬äº†ä»¥åéå¸¸æ„ŸåŠ¨ï¼Œä½†æ˜¯å¥¹è¿˜æ˜¯å¯æ€œå…®å…®çš„ç»§ç»­é—®ï¼Œâ€œä½ ä¸ºä»€ä¹ˆè¦å¯¹æˆ‘è¿™ä¹ˆå¥½å•Šâ€</p><p>å°ç‹ç‹¸æ¸©æŸ”çš„ç¬‘ç€è¯´ï¼Œâ€œå‚»å…”å­ï¼Œç¬¨å…”å­ã€‚å› ä¸ºä¸–ç•Œä¸Šæœ‰é‚£ä¹ˆå¤šé‚£ä¹ˆå¤šçš„å°å…”å­ï¼Œå´ååå¹¸è¿çš„é‡è§äº†ä½ ï¼Œæ‰€ä»¥æˆ‘åªèƒ½åŠ å€çš„å¯¹ä½ å¥½ã€‚</p><p>ç­‰åˆ°ä¹Œäº‘æ•£å»ï¼Œé˜³å…‰æ´’æ»¡å¤§åœ°ï¼Œæˆ‘å°±æŠŠæˆ‘ç§çš„å”¯ä¸€çš„èƒ¡èåœæ‹¿æ¥ç»™ä½ åƒï¼Œå› ä¸ºä½ æ˜¯æœ€ç‰¹åˆ«çš„ï¼Œå€¼å¾—æˆ‘ç”¨å¾ˆä¹…å¾ˆä¹…æ¥ç­‰å¾…ã€‚</p><p>æ™šå®‰</p><h3 id="åˆšå¥½å¬è§ä½ å–œæ¬¢æˆ‘"><a href="#åˆšå¥½å¬è§ä½ å–œæ¬¢æˆ‘" class="headerlink" title="åˆšå¥½å¬è§ä½ å–œæ¬¢æˆ‘"></a>åˆšå¥½å¬è§ä½ å–œæ¬¢æˆ‘</h3><p>å°å…”å­æœ€è¿‘æ€»æ˜¯çœ‹è§å°ç‹ç‹¸å¯¹ç€å¤§æ ‘åœ¨è‡ªè¨€è‡ªè¯­ï¼Œå¥¹è§‰å¾—å¾ˆå¥‡æ€ªï¼Œå¯æ˜¯æ¯å½“å¥¹èµ°ä¸Šå‰æƒ³é—®é—®å°ç‹ç‹¸æ—¶ï¼Œå°ç‹ç‹¸å°±ä¼šé£å¿«åœ°è·‘æ‰ã€‚</p><p>å°å…”å­è§‰å¾—å°ç‹ç‹¸å¯èƒ½æ˜¯ç”Ÿç—…äº†ï¼Œè¿™ä¹ˆä¸€æƒ³ï¼Œå¥¹é¡¿æ—¶è§‰å¾—å°ç‹ç‹¸å¯æ€œèµ·æ¥ï¼Œæƒ³ç€ç­‰è‡ªå·±çš„èƒ¡èåœæˆç†Ÿäº†å°±é€ç»™å°ç‹ç‹¸ä¸€ä»½ã€‚</p><p>å¯æ˜¯å¥¹ä¸çŸ¥é“çš„æ˜¯ï¼Œå°ç‹ç‹¸ä¹Ÿæ‚„æ‚„çš„åœ¨å±‹åç§äº†ä¸€å¤§ç‰‡èƒ¡èåœï¼Œå°ç‹ç‹¸æƒ³çš„æ˜¯ï¼Œç­‰èƒ¡èåœæˆç†Ÿå°±å‘å°å…”å­è¡¨ç™½ã€‚</p><p>ä¸ºäº†é¡ºåˆ©è¡¨ç™½ï¼Œå°ç‹ç‹¸æ¯å¤©æ—©æ™¨éƒ½å¯¹ç€å¤§æ ‘ï¼Œå°å£°çš„æ¼”ç»ƒã€‚</p><p>æ¯å½“çœ‹åˆ°å°å…”å­ä»æ—è¾¹èµ°è¿‡æ—¶ï¼Œä»–å®³æ€•è¢«å°å…”å­å¬åˆ°ï¼Œåªå¥½ç¬¨æ‹™åœ°è·‘å¼€ã€‚</p><p>æ²³è¾¹çš„å°èŠ±å¼€äº†æ»¡å²¸ï¼Œå°å…”å­çš„èƒ¡èåœä¹Ÿç†Ÿäº†ï¼Œè¿™å¤©æ—©ä¸Šï¼Œå°å…”å­å¸¦ä¸Šè‡ªå·±åˆšæ‹”çš„èƒ¡èåœï¼Œæ¥åˆ°äº†å°ç‹ç‹¸å®¶é—¨ã€‚</p><p>å°å…”å­çœ‹ç€æ‰‹é‡Œåˆå¤§åˆçº¢çš„èƒ¡èåœï¼Œåäº†åå£æ°´ï¼Œéšå³åˆæ‘‡äº†æ‘‡å¤´ï¼Œâ€œä¸è¡Œï¼Œè¿™æ˜¯ç»™å°ç‹ç‹¸çš„!â€</p><p>â€œå°ç‹ç‹¸ï¼Œä½ åœ¨å®¶å—?â€å°å…”å­æ•²äº†æ•²é—¨ã€‚</p><p>â€œâ€¦.å°å…”å­ï¼Œä½ æ‰¾æˆ‘å—?â€å°ç‹ç‹¸æŒ äº†æŒ å¤´ã€‚</p><p>â€œå–ï¼Œé€ç»™ä½ ã€‚â€å°å…”å­å¾ˆé«˜å…´çš„é€’å‡ºåŒæ‰‹ï¼Œå´çœ‹è§å°ç‹ç‹¸çœ¨å·´ç€çœ¼ç›ã€‚</p><p>â€œè¿™æ˜¯æˆ‘è‡ªå·±ç§çš„å“¦ï¼Œä½ ä¸å–œæ¬¢å—?â€å°å…”å­ä»¥ä¸ºå°ç‹ç‹¸ä¸å–œæ¬¢è‡ªå·±é€ç»™ä»–çš„èƒ¡èåœã€‚</p><p>å°ç‹ç‹¸æ€¥å¿™æ‘‡äº†æ‘‡å¤´ï¼Œâ€œä¸æ˜¯çš„ä¸æ˜¯çš„ï¼Œ..åªâ€¦.å“å‘€ï¼Œä½ è·Ÿæˆ‘æ¥ã€‚â€å°ç‹ç‹¸ç´§å¼ çš„æ‹‰ä½å°å…”å­çš„æ‰‹å°±å¾€å‰èµ°ã€‚</p><p>èµ°äº†å¥½ä¸€ä¼šå„¿ï¼Œæ‰åœä¸‹æ¥ï¼Œçœ¼å‰ç«Ÿæ˜¯ä¸€å¤§ç‰‡çº¢å½¤å½¤çš„èƒ¡èåœåœ°ï¼Œå°å…”å­åˆæƒŠè®¶åˆæ„Ÿåˆ°å¥‡æ€ªï¼Œå¥¹æƒ³é—®é—®å°ç‹ç‹¸ä¸ºä»€ä¹ˆç§äº†è¿™ä¹ˆå¤šçš„èƒ¡èåœã€‚</p><p>å¯æ˜¯å°ç‹ç‹¸å´å…ˆå¼€äº†å£ï¼Œè¯´é“ï¼Œâ€œæˆ‘å¾ˆå–œæ¬¢ä½ é€ç»™æˆ‘çš„èƒ¡èåœï¼Œå› ä¸ºå®ƒæ¯”æˆ‘çš„æ›´ç”œã€‚â€</p><p>â€œå—¯?ä¸ºä»€ä¹ˆå‘¢?â€å°å…”å­åˆå¥‡æ€ªäº†ã€‚</p><p>â€œå› ä¸ºæˆ‘çš„èƒ¡èåœç¼ºäº†ä¸€ä¸ªå¾ˆé‡è¦çš„ä¸œè¥¿ã€‚â€å°ç‹ç‹¸æ‚„æ‚„æ”¥ç´§äº†è‡ªå·±çš„å°æ‰‹ã€‚</p><p>â€œç¼ºäº†ä»€ä¹ˆå‘¢?â€å°å…”å­æƒ³ä¸åˆ°è¿™ä¹ˆè¯±äººçš„èƒ¡èåœè¿˜ä¼šç¼ºä¸œè¥¿ã€‚</p><p>å°ç‹ç‹¸ç›¯ç€å°å…”å­ï¼Œå°è„¸é€æ¸å‘çƒ«ã€‚â€œå®ƒç¼ºäº†ä¸€ä¸ªä¸»äººã€‚â€œæ¯å¤©æ™šä¸Šå®ƒéƒ½åœ¨æƒ³å¿µä¸€åªå°å…”å­ã€‚â€</p><p>â€œå®ƒå¸Œæœ›èƒ½é™ªç€å®ƒå–œæ¬¢çš„å°å…”å­ã€‚â€â€œæ‰€ä»¥ï¼Œä½ æ„¿æ„åšè¿™äº›èƒ¡èåœçš„ä¸»äººå—?</p><p>æ€‚ç‹ç‹¸ï¼Œæˆ‘ä»¥ä¸ºä½ åªä¼šå¯¹ç€å¤§æ ‘è¯´è¿™äº›å‘¢?æˆ‘æ„¿æ„!â€å°å…”å­å¾ˆå¤§å£°çš„å›ç­”ï¼Œè„¸ä¸Šæ˜¯è—ä¸ä½çš„ç¬‘æ„ã€‚</p><p>â€œä½ éƒ½å¬è§äº†!â€å°ç‹ç‹¸æ›´å®³ç¾äº†ã€‚</p><p>â€œä½ ä¸€è§æˆ‘å°±è·‘ï¼Œæˆ‘å°±æå‰èº²åœ¨å¤§æ ‘åé¢å•¦!â€</p><p>â€œåˆšå¥½å¬è§..ä½ è¯´..ä½ å–œæ¬¢..â€å°å…”å­æ•…æ„æ‹‰é•¿è¯­è°ƒã€‚</p><p>â€œæˆ‘å–œæ¬¢ä½ ï¼Œå°ç‹ç‹¸å–œæ¬¢å°å…”å­!â€å°ç‹ç‹¸ä¸€æŠŠæŠ±èµ·å°å…”å­ï¼Œè½¬äº†ä¸ªå¤§åœˆã€‚</p><p>æ™šå®‰</p><h3 id="åšæ¢¦éƒ½è¦å® ä½ "><a href="#åšæ¢¦éƒ½è¦å® ä½ " class="headerlink" title="åšæ¢¦éƒ½è¦å® ä½ "></a>åšæ¢¦éƒ½è¦å® ä½ </h3><p>è¿™æ™šï¼Œå°ç‹ç‹¸è¿˜æ˜¯ç…§å¸¸ç»™å°å…”å­è®²æ•…äº‹ï¼Œä¸¤äººäº’é“æ™šå®‰åï¼Œå°å…”å­å´å¤±çœ äº†ã€‚</p><p>è‡³äºä¸ºä»€ä¹ˆå¤±çœ å‘¢ï¼Œå°å…”å­æƒ³å¯èƒ½æ˜¯ç™½å¤©åƒäº†å¤ªå¤šèƒ¡èåœï¼Œä¹Ÿæœ‰å¯èƒ½å› ä¸ºæƒ³äº†å¤ªå¤šä¸å±äºå®ƒåº”è¯¥ï¼Œæƒ³çš„äº‹æƒ…ï¼Œåæ­£å°±æ˜¯è¶Šæ¥è¶Šç¡ä¸ç€äº†ï¼Œæœ€åå¥¹æ²®ä¸§çš„åèµ·æ¥ï¼Œæ‰“å¼€äº†æ‰‹æœºã€‚</p><p>è¦ä¸è¦è®©å°ç‹ç‹¸å†ç»™è®²ä¸€ä¸ªæ•…äº‹å‘¢ï¼Œ ä¸è¡Œä¸è¡Œï¼Œå°ç‹ç‹¸ä¹Ÿç´¯äº†éœ€è¦å¥½å¥½ä¼‘æ¯ã€‚å¯æ˜¯è‡ªå·±æ˜¯çœŸçš„ç¡ä¸ç€å‘€ï¼Œè¦æ˜¯èƒ½å¬ä¸€å¬å°ç‹ç‹¸çš„å£°éŸ³ä¹Ÿæ˜¯å¥½çš„å‘€ï¼Œå°±ç®—å¯èƒ½å¯¹é¢ä¼ æ¥çš„æ˜¯å°ç‹ç‹¸çš„æŠ±æ€¨ã€‚</p><p>æƒ³åˆ°è¿™é‡Œå°å…”å­è¿˜æ˜¯è¯•æ¢æ€§çš„æ‰“å¼€äº†éº¦å…‹é£ï¼Œå°ç‹ç‹¸?å°ç‹ç‹¸?ä½ è¿˜é†’ç€å—ï¼Œå°ç‹ç‹¸<del>åœ¨ä¸€åˆ†é’Ÿçš„ç­‰å¾…ä¹‹åï¼Œè¯ç­’ä¼ æ¥äº†å°ç‹ç‹¸çš„å£°éŸ³ï¼Œå°å…”å­ä½ æ€ä¹ˆäº†ã€‚æˆ‘</del>æˆ‘ç¡ä¸ç€ã€‚</p><p>å‡ºä¹æ„æ–™çš„æ˜¯å°ç‹ç‹¸å¹¶æ²¡æœ‰æŠ±æ€¨ï¼Œè€Œæ˜¯è¯´é‚£æˆ‘å†ç»™ä½ è®²ä¸ªæ•…äº‹å§ï¼Œä»å‰æœ‰åªå°ç‹ç‹¸~ ~å¬ç€å¬ç€å°å…”å­æœç„¶æœ‰äº†å›°æ„ï¼Œæ•…äº‹ä¹Ÿè®²å®Œäº†ã€‚å°ç‹ç‹¸æ™šå®‰ã€‚</p><p>é‚£è¾¹å´æ²¡æœ‰äº†å°ç‹ç‹¸çš„å£°éŸ³ï¼ŒåŸæ¥å°ç‹ç‹¸ä¸ºäº†ç»™è‡ªå·±è®²æ•…äº‹å›°çš„è¿éº¦å…‹é£éƒ½ä¸è®°å¾—å…³äº†ï¼Œå¬ç€å°ç‹ç‹¸çš„å‘¼å¸å£°ï¼Œå°å…”å­å¿ƒé‡Œå……æ»¡äº†å¹¸ç¦ã€‚</p><p>åŸæ¥ï¼Œçˆ±ä½ çš„äººå°±ç®—å†å›°ï¼Œä¹Ÿä¼šç»™ä½ è®²å®Œæœ€åä¸€ä¸ªæ•…äº‹å‘€ï¼ŒåŸæ¥çˆ±ä½ çš„äººå°±ç®—åšæ¢¦ï¼Œéƒ½æ˜¯åœ¨å® ä½ ã€‚</p><p>æ™šå®‰</p><h3 id="ç”œå—"><a href="#ç”œå—" class="headerlink" title="ç”œå—"></a>ç”œå—</h3><p>å…”å­å°å§ç”Ÿç—…äº†ï¼Œåœ¨å®¶èººäº†å‡ å¤©ä¸è§å¥½ï¼Œç»ˆäºè€·æ‹‰ç€è€³æœµæœ‰æ°”æ— åŠ›åœ°å»åŒ»é™¢çœ‹ç—…äº†ã€‚</p><p>â€œå‡ å¤©äº†?â€ç‹ç‹¸å…ˆç”Ÿç©¿ç€å¤§è¤‚æ•…æ„å†·ç€è„¸é—®å¥¹ã€‚â€œå””ï¼Œå¥½åƒå¿«ä¸€å‘¨äº†â€¦â€å…”å­å°å§ä½ç€å¤´ä¸æ•¢çœ‹ä»–ã€‚</p><p>â€œä¸Šæ¬¡å¼€çš„è¯ä½ æ²¡åƒå—?â€</p><p>å…”å­å°å§å°å£°å—«åš…äº†ä¸€å¥:â€œå¤ªè‹¦â€¦..â€</p><p>â€œæ‰€ä»¥ä½ å°±ä¸€ç‚¹æ²¡åƒå—?</p><p>ç‹ç‹¸å…ˆç”Ÿå¹äº†å£æ°”ï¼Œçœ‹ç€ç—…å¾—æ™•ä¹ä¹çš„å…”å­å°å§åˆä¸å¿å¿ƒèµ·æ¥ï¼Œä¸Š å‘¨åŒ»é™¢å¤ªå¿™ä»–ä¸€-ç›´èµ°ä¸å¼€ï¼Œè¿™æ‰è®©å…”å­å°å§é’»äº†ç©ºå­åœ¨å®¶é‡Œç¡¬æŒ¨äº†ä¸€å‘¨ã€‚</p><p>ç‹ç‹¸å…ˆç”Ÿä¼¸å‡ºæ‰‹è½»è½»é®ä½å¥¹çš„çœ¼ç›æŸ”å£°é“:â€œå…ˆé—­ä¸Šçœ¼ï¼ŒæŠ¤å£«æ¥ç»™ä½ æŠ½è¡€äº†ã€‚â€</p><p>æœ€åè¿˜æ˜¯é‡æ–°å¼€äº†ä¸€å †çš„è¯å›å®¶ã€‚</p><p>å…”å­å°å§èººåœ¨åºŠä¸Šè¢«å­æ‚ç€å¤´:â€œä½ æŠŠè¯æ”¾æ¡Œ.ä¸Šï¼Œç­‰æ°´å‡‰ä¸€äº›æˆ‘å°±è‡ªå·±åƒã€‚</p><p>â€œæˆ‘å·²ç»è¯•è¿‡äº†ï¼Œæ°´æ¸©åˆšå¥½ï¼ŒæŠŠè¯åƒäº†å†ç¡ã€‚â€</p><p>å…”å­å°å§åªéœ²å‡ºä¸€åŒçœ¼ç›ï¼Œæœ‰äº›å§”å±ˆåœ°çœ‹ç€ä»–:â€œå¤ªè‹¦äº†ï¼Œæˆ‘å¯ä»¥ä¸åƒå—?â€</p><p>â€˜ä¸å¯ä»¥å“¦ã€‚â€</p><p>ä»–ä»å…œé‡Œæå‡ºä¸€æŠŠçš„ç³–æœ:â€œç­‰ä½ å¥½äº†è¿™äº›éƒ½ç»™ä½ ï¼Œç°åœ¨ä½ åªèƒ½ç¨å¾®å°ä¸€å°å‘³é“ã€‚</p><p>æœ€åå…”å­å°å§è¿˜æ˜¯ä¹–ä¹–å¦¥åçš±ç€çœ‰å¤´æŠŠè¯åäº†ï¼Œå¥¹åˆšæ”¾ä¸‹æ°´æ¯ç‹ç‹¸å…ˆç”Ÿå°±å‡‘äº†è¿‡æ¥ï¼ŒçŒä¸åŠé˜²åœ°å»äº†å¥¹ï¼Œå¥¹çš„å˜´é‡Œå°åˆ°ä¸ä¸çš„ç”œå‘³å„¿ã€‚</p><p>å…”å­å°å§è„¸ä¸€çº¢æ‚ç€å˜´:â€œ ä½ å¹²å˜›å‘€?ä¼ æŸ“ç»™ä½ æ€ä¹ˆåŠ?ç‹ç‹¸å…ˆç”Ÿç¬‘ç€:â€œç”œå—?â€</p><p>æ™šå®‰</p><h3 id="æ„Ÿå†’ä¼šä¼ æŸ“"><a href="#æ„Ÿå†’ä¼šä¼ æŸ“" class="headerlink" title="æ„Ÿå†’ä¼šä¼ æŸ“"></a>æ„Ÿå†’ä¼šä¼ æŸ“</h3><p>å°å…”å­æœ€è¿‘é‡æ„Ÿå†’ï¼Œå¤´è„‘æ˜æ²‰æ²‰çš„ï¼Œè¿æœ€ç®€å•çš„ä¸€åŠ ä¸€çš„ç®—æ•°éƒ½è¯´ä¸å‡ºæ¥ï¼Œæ•´ä¸ªäººç¼©åœ¨è¢«çªé‡Œï¼Œä¸€æ¯ä¸€æ¯çš„çƒ­æ°´å¾€è‚šå­é‡ŒçŒã€‚</p><p>ä½éš”å£çš„å°ç‹ç‹¸ä¸ä¿¡é‚ªï¼Œæ€ä¹ˆå¨é£å‡›å‡›çš„å°å…”å­çªç„¶å¼€å§‹å˜å¾—è¿™ä¹ˆå¨‡å¼±ï¼Œäºæ˜¯æç€å°å…”å­æœ€çˆ±åƒçš„èƒ¡èåœå¹²ï¼Œæ•²å¼€äº†å…”å­å®¶çš„é—¨ã€‚</p><p>å°å…”å­å¸¦ç€æµ“åšçš„é¼»éŸ³éª‚éª‚å’§å’§çš„æ‰“å¼€é—¨ï¼Œçœ‹åˆ°å°ç‹ç‹¸çš„ä¸€ç¬é—´çœ¼ç›é‡Œéƒ½å†’å°ç«èŠ±ï¼Œâ€œæ— äº‹çŒ®æ®·å‹¤ï¼Œä½ æ¥å¹²å˜›?â€</p><p>å°ç‹ç‹¸å¾€å°å…”å­æ—è¾¹ä½¿åŠ²å‡‘ï¼Œâ€œè¿™ä¸ï¼Œçœ‹ä½ æ„Ÿå†’ä¸èˆ’æœï¼Œç»™ä½ å¸¦äº†åƒçš„å˜›ã€‚</p><p>å°å…”å­æŠŠå°ç‹ç‹¸å¾€å¤–æ¨ï¼Œâ€œæ²¡èƒƒå£ï¼Œ åˆ«ç¦»æˆ‘è¿™ä¹ˆè¿‘ã€‚â€</p><p>å°ç‹ç‹¸ä¸è¦è„¸çš„åˆå¾€å‰é¢å‡‘äº†å‡‘,â€œæ€ä¹ˆäº†å“‡ï¼Œå¹³æ—¶å¤©å¤©æ•²è¯ˆæˆ‘ç»™ä½ ä¹°è¿™äº›åƒçš„ï¼Œä»Šå¤©ä¹°äº†åè€Œä¸å¼€å¿ƒäº†?â€</p><p>å°å…”å­å¸æºœäº†ä¸‹é¼»æ¶•ï¼Œå’³å—½äº†ä¸¤å£°ï¼Œâ€œä½ æ˜¯çœŸä¸æ€•è¢«æˆ‘ä¼ æŸ“æ„Ÿå†’å•Šï¼Œéå¾—è·‘æ¥ä½œæ­»ã€‚â€</p><p>å°ç‹ç‹¸å¼¯äº†å¼¯èƒ³è†Šï¼Œâ€œçœ‹è§æ²¡ï¼Œæˆ‘è¿™å¥å£®çš„è‚Œè‚‰ï¼Œæ€ä¹ˆå¯èƒ½è¯´æ„Ÿå†’å°±æ„Ÿå†’ï¼Œæˆ‘åˆä¸åƒä½ ä¸€æ ·è™šå¼±ã€‚</p><p>å°å…”å­æ”¥ç´§äº†æ‹³å¤´ï¼Œè´¹äº†å…¨èº«åŠ›æ°”ï¼Œä¸€æ‹³æ‰“åœ¨å°ç‹ç‹¸èº«ä¸Šï¼Œå¯æƒœæ„Ÿå†’æ²¡æœ‰åŠ›æ°”ï¼Œæ‹³å¤´ä¹Ÿè½¯ç»µç»µçš„ã€‚</p><p>å°ç‹ç‹¸æŠŠå°å…”å­æ‰“è¿‡æ¥çš„æ‹³å¤´æ£åˆ°äº†æ€€é‡Œï¼Œé¡ºæ‰‹æ‘¸äº†æ‘¸å°å…”å­çš„å¤´ï¼Œâ€œå¥½å¥½ä¼‘æ¯å“ˆ~â€</p><p>å°å…”å­è£¹ç´§äº†å°æ¯›æ¯¯ï¼Œæ¨æ¡ç€æŠŠå°ç‹ç‹¸èµ¶äº†å‡ºå»ã€‚</p><p>åæ¥ä¸€è¿å¥½å¤šå¤©ï¼Œå°ç‹ç‹¸æ¯å¤©éƒ½å¸¦ç€å„ç§å¥½åƒçš„ä¸åŒå£å‘³çš„èƒ¡èåœå¹²æ¥æ‹œè®¿ï¼Œè™½ç„¶å°å…”å­å¤šæ¬¡æ‹’ç»ï¼Œå°ç‹ç‹¸è¿˜æ˜¯æ²¡æœ‰æ”¾å¼ƒï¼Œç»ˆäºï¼Œåœ¨å°ç‹ç‹¸çš„ä¸æ‡ˆåŠªåŠ›ä¹‹ä¸‹ï¼Œå°ç‹ç‹¸æ„Ÿå†’äº†ã€‚</p><p>è¯´æ¥ä¹Ÿå¥‡æ€ªï¼Œå°ç‹ç‹¸æ„Ÿå†’åï¼Œå°å…”å­çš„æ„Ÿå†’å°±å¥½äº†,å°å…”å­è¿˜æœ‰ç‚¹å¿ƒæ€€æ„§ç–šï¼Œæ‹ç€åƒçš„æ¥çœ‹å°ç‹ç‹¸ï¼Œç»è¿‡é—¨å£çš„æ—¶å€™ï¼Œå¬åˆ°å…¶ä»–å°åŠ¨ç‰©çªƒçªƒç§è¯­ï¼Œâ€œè¿™å°ç‹ç‹¸å•Šä¸çŸ¥é“ä»å“ªé‡Œå¬è¯´ï¼Œåªè¦æŠŠæ„Ÿå†’ä¼ æŸ“å‡ºå»å•Šï¼Œæ„Ÿå†’çš„äººå°±ä¼šå¥½äº†ã€‚â€</p><p>å¦ä¸€ä¸ªå°åŠ¨ç‰©æ¥è¯ï¼Œâ€œæ€ªä¸å¾—å¤©å¤©å¾€å°å…”å­é‚£é‡Œè·‘å‘¢ï¼Œå°å…”å­ä¹Ÿå¤ªå¹¸ç¦äº†å§~â€</p><p>å°å…”å­æ•²å¼€é—¨ï¼Œâ€œå°ç‹ç‹¸ï¼Œä½ çš„ä¸“å±å°å…”å­åˆ°äº†ã€‚â€</p><p>æ™šå®‰</p><h3 id="æœ€ç”œçš„ç³–æœ"><a href="#æœ€ç”œçš„ç³–æœ" class="headerlink" title="æœ€ç”œçš„ç³–æœ"></a>æœ€ç”œçš„ç³–æœ</h3><p>å°å…”å­åœ¨æ£®æ—é‡Œå¼€äº†ä¸€é—´æ¼‚äº®çš„ç³–æœåº—ã€‚</p><p>å¹³æ—¶æ²¡äººçš„æ—¶å€™ï¼Œå°å…”å­å–œæ¬¢ååœ¨æŸœå°ï¼Œæ‰˜ç€è…®å¸®å­é€è¿‡çª—æˆ·çœ‹ç€é“è·¯ä¸¤æ—çš„å¤§æ ‘ï¼Œæ¥æ¥å¾€å¾€çš„åŠ¨ç‰©ï¼Œè¿˜æœ‰æ¯å¤©éƒ½ä¼šä»é—¨å£è·¯è¿‡çš„å°ç‹ç‹¸ã€‚</p><p>å°ç‹ç‹¸æ¯æ¬¡è·¯è¿‡ç³–æœåº—æ—¶ç»å¸¸ä¼šå‘ç»ç’ƒé—¨é‡Œç¥ä¸Šä¸€çœ¼ï¼Œ</p><p>å³ä½¿åªæ˜¯ä¸€ä¸ªç¤¼è²Œçš„å¾®ç¬‘ï¼Œä¹Ÿèƒ½è®©å°å…”å­å¼€å¿ƒä¸€æ•´å¤©ã€‚</p><p>ä¸€å¤©ï¼Œ å°å…”å­æ­£åšç€ç³–æœï¼Œå¿½ç„¶å¤§é—¨è¢«æ‰“å¼€äº†ã€‚</p><p>å°å…”å­æ²¡æœ‰æŠ¬å¤´ï¼Œä¸€è¾¹ç»§ç»­åšç€ç³–æœä¸€è¾¹åƒå¾€å¸¸ä¸€æ ·ç»™å®¢äººæ‰“æ‹›å‘¼ã€‚</p><p>â€œæ¬¢è¿å…‰ä¸´å‘€!â€</p><p>â€œå¬è¯´ä½ è¿™çš„ç³–å¾ˆç”œ?â€</p><p>å°å…”å­æ„£ä½äº†ï¼Œå†ä¸‰ç¡®è®¤è‡ªå·±ä¸æ˜¯åœ¨åšæ¢¦æ‰ç¼“ç¼“æŠ¬èµ·å¤´ï¼Œç„¶åå¯¹ä¸Šäº†å°ç‹ç‹¸æ»¡è„¸çš„ç¬‘æ„ã€‚</p><p>â€œå•Šâ€¦â€¦.â€</p><p>å°å…”å­ä¸€æ—¶é—´æ‰‹è¶³æ— æªï¼Œä¸çŸ¥é“è¯¥è¯´ä»€ä¹ˆå¥½ã€‚</p><p>å°ç‹ç‹¸çœ‹å‡ºäº†å°å…”å­æ­¤æ—¶çš„çª˜è¿«ï¼Œæ‰“ç€å“ˆå“ˆè¯´ï¼Œâ€œå“ˆå“ˆï¼Œæ²¡äº‹ä½ ç»§ç»­åšç³–æœå§ï¼Œæˆ‘å°±åœ¨è¿™é‡Œçœ‹çœ‹ã€‚</p><p>å°å…”å­å¾®å¾®ä¸€ç¬‘ç„¶ååŸ‹ä¸‹å¤´ç»§ç»­åšç³–æœï¼Œä¸ä¸€ä¼šå°±åšå¥½äº†ä¸€å°ç›’ã€‚</p><p>ç„¶åé€’ç»™å°ç‹ç‹¸: â€œå—¯ï¼Œä½ å°å°å§ã€‚â€</p><p>å°ç‹ç‹¸æŠŠç³–å«åœ¨å˜´é‡Œï¼Œä¸€ç§ä»æ¥æ²¡æœ‰æ„Ÿå—è¿‡çš„ç”œèœœä»èˆŒå°–è”“å»¶ã€‚</p><p>â€œå¥½ç”œå‘€ï¼Œè¿™å¤§æ¦‚æ˜¯æˆ‘åƒåˆ°è¿‡çš„æœ€ç”œçš„ç³–æœäº†!â€</p><p>ä»è¿™ä»¥åï¼Œå°å…”å­åšå‡ºæ¥çš„ç³–éƒ½è¶…çº§ç”œã€‚</p><p>æ¯å¤©éƒ½æœ‰å¾ˆå¤šå°åŠ¨ç‰©æ¥ä¹°ç³–æœï¼Œå¤§å®¶éƒ½è¯´å°å…”å­çš„ç³–æœæœ€ç”œã€‚</p><p>åæ¥æœ‰ä¸€å¤©ï¼Œå°å…”å­åƒå¾€å¸¸æ ·ååœ¨æŸœ å°é‡Œçœ‹ç€çª—å¤–çš„ä¸€åˆ‡ã€‚</p><p>é“è·¯ä¸¤è¾¹è¿˜æ˜¯é‚£æ ·çƒ­é—¹ï¼Œå°å…”å­çš„å˜´è§’å¾®å¾®ä¸Šç¿˜ç€ï¼Œç›´åˆ°å¥¹çœ‹åˆ°ä¸€ä¸ªå¥³å­©å­æŒ½ç€å°ç‹ç‹¸çš„æ‰‹è‡‚ä»çª—å‰èµ°è¿‡ã€‚</p><p>å°å…”å­èµ¶å¿™åŸ‹ä¸‹å¤´ï¼Œä¸è®©å°ç‹ç‹¸çœ‹è§ã€‚</p><p>ä¸çŸ¥é“æ€ä¹ˆå›äº‹ï¼Œæ­¤åˆ»å¥¹çš„å¿ƒåƒæ˜¯è¢«é’ˆæ‰äº†ä¸€æ ·éš¾å—ã€‚</p><p>ä»é‚£å¤©èµ·ï¼Œå°å…”å­åšå‡ºæ¥çš„ç³–æœä¸å†é‚£ä¹ˆç”œäº†ï¼Œä¸ç®¡åŠ äº†å¤šå°‘çš„ç³–ï¼Œéƒ½åšä¸å‡ºåƒä»¥å‰é‚£ä¹ˆç”œçš„ç³–æœäº†ã€‚</p><p>åæ¥ä¹°ç³–æœçš„å°åŠ¨ç‰©ä¹Ÿè¶Šæ¥è¶Šå°‘ï¼Œå°å…”å­å¹²è„†ä¸æƒ³å†åšç³–æœäº†ã€‚</p><p>æ­£å‡†å¤‡é”ä¸Šå¤§é—¨ï¼Œå´è¢«è·¯è·‘æ¥çš„å°ç‹ç‹¸æ‹¦ä½äº†ã€‚</p><p>â€œæˆ‘å¬åˆ«äººè¯´ä½ ä¸æ‰“ç®—åšç³–æœå•¦?â€å°ç‹ç‹¸æ°”å–˜ååçš„é—®ã€‚</p><p>å°å…”å­æ‰­è¿‡è„¸ä¸æƒ³è®©å°ç‹ç‹¸çœ‹åˆ°è‡ªå·±çš„çœ¼æ³ªï¼Œâ€œå› ä¸ºæˆ‘åšçš„ç³–æœä¸ç”œäº†ã€‚â€</p><p>â€œèƒ¡è¯´ï¼Œæ˜æ˜æ˜¯æˆ‘åƒè¿‡æœ€ç”œçš„ç³–æœï¼Œ ä¸Šæ¬¡æˆ‘å¦¹å¦¹è¿˜å¤¸ä½ åšçš„ç³–ç”œå‘¢ã€‚</p><p>â€œä½ å¦¹å¦¹? â€œå°å…”å­çªç„¶æ˜ç™½äº†ä»€ä¹ˆã€‚</p><p>â€œå¯¹å‘€ï¼Œä¸Šæ¬¡æˆ‘å¦¹å¦¹æ¥çœ‹ æˆ‘ï¼Œè·¯è¿‡ä½ è¿™é‡Œçš„æ—¶å€™æˆ‘çœ‹åˆ°ä½ æ­£åŸ‹ç€å¤´åšç³–æœå‘¢ï¼Œæ‰€ä»¥å°±æ²¡å’Œä½ æ‰“æ‹›å‘¼ã€‚â€å°ç‹ç‹¸è§£é‡Šé“ã€‚</p><p>åŸæ¥æ˜¯è¿™æ ·ï¼Œå°å…”å­å¿ƒä¸­çš„ä¹Œäº‘ç»ˆäºæ•£å¼€äº†ï¼Œè„¸ä¸Šéœ²å‡ºäº†ä¹…è¿çš„ç¬‘è„¸ã€‚</p><p>å°ç‹ç‹¸æ‰äº†æ‰å°å…”å­çš„è€³æœµï¼Œ</p><p>â€œå¥½å•¦ï¼Œç°åœ¨å¯ä»¥è¯·æˆ‘åƒæœ€ç”œçš„ç³–æœäº†å—?â€</p><p>å°å…”å­ä½ä¸‹å¤´:â€œå¯æ˜¯å·²ç»æ²¡æœ‰äº†ï¼Œæœ€è¿‘æˆ‘åšçš„ç³–éƒ½ä¸ç”œã€‚â€</p><p>å°ç‹ç‹¸æ¢ç€å¤´å››å¤„å¼ æœ›ï¼Œè¶ç€å°å…”å­ä¸æ³¨æ„ï¼Œå¿½ç„¶åœ¨å°å…”å­è„¸ä¸Šå§å”§ä¸€å£ã€‚</p><p>â€œè°è¯´æ²¡æœ‰ï¼Œä½ æ‰æ˜¯æˆ‘åƒåˆ°è¿‡çš„æœ€ç”œçš„ç³–ã€‚â€</p><p>æ™šå®‰</p><h3 id="èƒ¡èåœä¹Ÿæ²¡ä½ å¡«"><a href="#èƒ¡èåœä¹Ÿæ²¡ä½ å¡«" class="headerlink" title="èƒ¡èåœä¹Ÿæ²¡ä½ å¡«"></a>èƒ¡èåœä¹Ÿæ²¡ä½ å¡«</h3><p>å°å…”å­æœ€å¤§çš„çˆ±å¥½å°±æ˜¯åƒï¼Œè€Œå¥¹æœ€å–œæ¬¢åƒçš„å‘¢å°±æ˜¯ç”œç”œçš„èƒ¡èåœã€‚</p><p>å¯æ˜¯æœ€è¿‘å•Šï¼Œå°å…”å­æœ‰ç‚¹ä¸å¼€å¿ƒï¼Œå› ä¸ºå¥¹å¾ˆä¹…æ²¡æœ‰åƒåˆ°çš„ç”œç”œçš„èƒ¡èåœäº†ã€‚</p><p>æ‰€ä»¥æœ€è¿‘å°å…”å­å°±ä¸€ç›´è€·æ‹‰ç€è„¸ï¼Œä¸€å‰¯è°çœ‹åˆ°äº†éƒ½çŸ¥é“å¥¹ä¸é«˜å…´çš„æ ·å­ã€‚</p><p>è¿™éƒ½è¦æ€ªå‰å‡ å¤©ä¸‹çš„é‚£åœºæš´é›¨ï¼ŒæŠŠå°å…”å­å †æ»¡é™¢å­çš„èƒ¡èåœå…¨éƒ½å†²èµ°äº†ï¼Œè€Œå¥¹é‡æ–°ç§çš„èƒ¡èåœåˆ°ç°åœ¨éƒ½è¿˜æ²¡å‘èŠ½å‘¢ã€‚</p><p>å°ç‹ç‹¸æ˜¯çœ‹åœ¨çœ¼é‡Œï¼Œç–¼åœ¨å¿ƒé‡Œï¼Œæ¯•ç«Ÿæ²¡æœ‰åƒåˆ°ç”œç”œçš„èƒ¡èåœï¼Œå°å…”å­éƒ½å·²ç»ç˜¦äº†ä¸€å¤§åœˆäº†ã€‚</p><p>è‡ªå·±å¥½ä¸å®¹æ˜“å–‚çš„åœ†ä¹ä¹çš„å°å…”å­ï¼Œç°åœ¨åˆç˜¦äº†ä¸‹æ¥ï¼Œå°ç‹ç‹¸æ€»å½’æ˜¯æœ‰ç‚¹ä¸å¼€å¿ƒçš„ï¼Œäºæ˜¯ä»–å†³å®šå¸¦ç€å°å…”å­åˆ°è¡—ä¸Šå»ä¹°èƒ¡èåœã€‚</p><p>åœ¨è¡—ä¸Šå–èƒ¡èåœçš„æ˜¯ä¸€åªè€å±±ç¾Šï¼Œå°å…”å­çœ‹ç€å±±ç¾Šé¢å‰å †çš„æ»¡æ»¡çš„èƒ¡èåœï¼Œçœ¼ç›å°±å˜å¾—æ¯”å¹³æ—¶æ›´çº¢äº†ã€‚</p><p>å±±ç¾Šä¸€çœ‹å°±çŸ¥é“å¤§ç”Ÿæ„æ¥äº†ï¼Œäºæ˜¯å¼€å§‹å†å–ï¼šâ€œèƒ¡èåœï¼Œèƒ¡èåœï¼Œæœ€å¥½åƒçš„èƒ¡èåœå•Šã€‚â€</p><p>â€œè¯¶å°å…”å­ï¼Œè¦ä¸è¦ä¹°ç‚¹èƒ¡èåœå•Šï¼Ÿâ€</p><p>å°å…”å­ç«‹é©¬ç‚¹ç‚¹å¤´ï¼Œå¯æ˜¯å´è¢«å°ç‹ç‹¸æ‹¦äº†ä¸‹æ¥ï¼Œå°ç‹ç‹¸é—®å±±ç¾Šï¼Œâ€œä½ è¿™èƒ¡èåœç”œä¸ç”œå‘€ã€‚â€</p><p>è€å±±ç¾Šè¯´ï¼šâ€œç”œï¼Œæˆ‘çš„èƒ¡èåœæ˜¯æ¯å¤©æ¸…æ™¨çš„ç¬¬ä¸€æ»´éœ²æ°´ï¼ŒåŠ ä¸Šè½å¹•å‰çš„æœ€åä¸€ä¸é˜³å…‰å­•è‚²è€Œæˆçš„ï¼Œç»å¯¹æ˜¯æœ€ç”œçš„ã€‚â€</p><p>å°ç‹ç‹¸å´å—¤ä¹‹ä»¥é¼»ï¼Œâ€œä½ çš„èƒ¡èåœè‚¯å®šä¸æ˜¯æœ€ç”œçš„ã€‚â€</p><p>è€å±±ç¾Šæ€¥äº†ï¼Œâ€œæˆ‘è·Ÿä½ è®²ï¼Œæˆ‘è¿™èƒ¡èåœç»å¯¹æ˜¯æœ€ç”œçš„ï¼Œä¸ç”œä¸æ”¶ä½ é’±å¥½å§ã€‚â€</p><p>å°ç‹ç‹¸å´æ‹‰ç€å°å…”å­çš„æ‰‹è½¬èº«èµ°äº†ï¼Œå°å…”å­ç–‘æƒ‘çš„é—®ä»–ï¼šâ€œä¸ºä»€ä¹ˆå°±è¿™æ ·èµ°äº†å‘€ï¼Ÿæˆ‘è§‰å¾—ä»–çš„èƒ¡èåœè¿˜å¯ä»¥å‘€ã€‚â€</p><p>â€œå¯æ˜¯ä»–éª—äººå‘€ã€‚â€å°ç‹ç‹¸åœä¸‹æ¥ï¼Œå›ç­”å°å…”å­ã€‚</p><p>â€œä½ æ˜¯è¯´ä»–ä¸ç”œä¹Ÿè¦æ”¶é’±å—ã€‚â€å°å…”å­æ›´åŠ ç–‘æƒ‘ã€‚</p><p>â€œæ‰ä¸æ˜¯å˜ï¼Œä»–éª—äººè¯´ä»–çš„èƒ¡èåœæœ€ç”œï¼Œå¯æ˜¯è°ä¸çŸ¥é“ï¼Œä½ æ‰æ˜¯æœ€ç”œçš„ï¼â€</p><p>æ™šå®‰</p><h3 id="ä¹°ä¸€èµ ä¸€"><a href="#ä¹°ä¸€èµ ä¸€" class="headerlink" title="ä¹°ä¸€èµ ä¸€"></a>ä¹°ä¸€èµ ä¸€</h3><p>ç‹ç‹¸å…ˆç”Ÿåœ¨è¡—è§’å¼€äº†å®¶æ¯›ç»’ç©å…·ï¼Œæ–°å¼€åº—çš„é‚£å¤©å°å…”å­åœ¨æ©±çª—å¤–çœ‹åˆ°äº†é‚£åªå·¨å¤§çš„æ¯›ç»’ç©å…·ï¼Œä½†ä¸€çœ‹æ ‡ä»·å¥¹å°±å€’å¸äº†å£æ°”ã€‚</p><p>å¯å¥¹å®åœ¨æ˜¯å¤ªå–œæ¬¢é‚£ä¸ªæ¯›ç»’ç©å…·äº†ï¼Œæ¯å¤©è·¯è¿‡éƒ½ä¼šç«™åœ¨é‚£å„¿çœ‹ä¸Šä¸€ä¼šå„¿ï¼Œæƒ³ç€è‡ªå·±è¦æ”’å¤šä¹…é’±æ‰èƒ½ä¹°åˆ°ã€‚</p><p>çœ‹ç€çœ‹ç€å¥¹å‘ç°ç»ç’ƒä¸Šæœ‰ä¸ªé»‘ç‚¹ï¼Œæ­£å¥½æŒ¡åœ¨ç©å…·çš„è„¸ä¸Šï¼Œæ²¡æœ‰å¤šæƒ³å¥¹å°±ä¼¸æ‰‹å»æ“¦ï¼Œæ“¦ç€æ“¦ç€é»‘ç‚¹ä¸è§ï¼Œå‡ºç°äº†ç‹ç‹¸å…ˆç”Ÿçš„è„¸ã€‚</p><p>ä»–æ­£æ‹¿ç€æŠ¹å¸ƒæ“¦ç»ç’ƒå‘¢ï¼Œä¸€æ‰­å¤´å°±ä»æ¯›ç»’ç©å…·æ—ç™½éœ²å‡ºäº†è„¸ï¼Œçœ‹åˆ°äº†æ‹¿ç€çº¸å·¾æ“¦ç»ç’ƒçš„å°å…”å­ã€‚</p><p>å¯å°å…”å­è¿™ä¹ˆå°çš„èƒ†å­å±…ç„¶æ²¡æœ‰è¢«å“åˆ°ï¼Œå¥¹éš”ç€ç»ç’ƒçœ‹ç€ç‹ç‹¸å…ˆç”Ÿï¼Œçœ‹å¾—æœ‰äº›å‡ºç¥ã€‚</p><p>å¥¹çœ‹åˆ°ç‹ç‹¸å…ˆç”Ÿè„¸ä¸ŠèŒ¸èŒ¸çš„æ¯›ï¼Œä¼¼ä¹æ¯”å¥¹å¿ƒå¿ƒå¿µå¿µçš„æ¯›ç»’ç©å…·è¿˜è¦æŸ”è½¯ï¼Œå¥¹è¿˜æ³¨æ„åˆ°äº†ä»–çš„çœ¼ç›ï¼Œåƒæ˜¯ä¼šå‘å…‰ä¸€æ ·ï¼Œå¯çœŸæ˜¯å¥½çœ‹ã€‚</p><p>ç‹ç‹¸å…ˆç”Ÿç¬‘äº†ï¼Œè½»è½»æœå¥¹æŒ¥äº†æŒ¥æ‰‹ï¼Œå°å…”å­è¿™æ‰å›è¿‡ç¥æ¥ï¼Œå®³ç¾å¾—æƒ³ç”¨é•¿é•¿çš„è€³æœµç›–ä½ç¾çº¢çš„è„¸ï¼Œç‹ç‹¸å…ˆç”Ÿé‚€è¯·å¥¹å»äº†åº—é‡Œï¼Œä»–ä»¬æˆäº†å¥½æœ‹å‹ã€‚</p><p>å°å…”å­æ¯å¤©éƒ½ä¼šæ¥åº—é‡Œçœ‹çœ‹ï¼Œå€Ÿå£è¯´æ¥çœ‹çœ‹é‚£åªæƒ³è¦çš„æ¯›ç»’ç©å…·ï¼Œè¿˜å«ç‹ç‹¸å…ˆç”Ÿå¸®å¥¹ç•™ç€ï¼Œå¯å¥¹å¿ƒæ€æ—©å°±ä¸åœ¨æ¯›ç»’ç©å…·ä¸Šäº†ã€‚</p><p>â€œä»Šæ—¥æ‰“æŠ˜ï¼Œé‚£åªä½ ä¸€ç›´æƒ³è¦çš„æ¯›ç»’ç©å…·å¯ä»¥åŠä»·ä¹°å“¦ã€‚â€å°å…”å­ä¸€æ¥ï¼Œå°±çœ‹åˆ°ç‹ç‹¸å…ˆç”ŸæŠ±ç€é‚£åªæ¯›ç»’ç©å…·ç­‰å¥¹ã€‚</p><p>å…¶å®å¥¹æ—©å°±æ”’å¤Ÿé’±äº†ï¼Œåªæ˜¯å¥¹ä¸æ‹…å¿ƒä¹°äº†ä¹‹åå°±ä¸èƒ½å¸¸æ¥åº—é‡Œäº†ã€‚ â€œå¥½å‘€â€å°å…”å­ä»˜äº†é’±æ¥è¿‡ç©å…·ï¼Œæ•…ä½œå¼€å¿ƒçš„è¯´ç€ã€‚å…¶å®ç‹ç‹¸å…ˆç”Ÿæ˜¯çƒ¦è‡ªå·±æ‰æ‰“æŠ˜å–ç»™å¥¹çš„å§ï¼Œå°å…”å­æœ‰äº›éš¾è¿‡ã€‚</p><p>â€œé‚£æˆ‘èµ°å•¦ï¼Œä¸‹æ¬¡è§å“¦â€å°å…”å­æŠ±ç€ç©å…·æ€¥å¿™è½¬èº«å°±èµ°äº†ï¼Œå¥¹ä¸æƒ³è®©ç‹ç‹¸å…ˆç”Ÿçœ‹åˆ°è‡ªå·±çš„éš¾è¿‡çš„æ ·å­ã€‚</p><p>â€œå°å…”å­ç­‰ä¸€ç­‰ï¼Œè¿˜æœ‰ä¸€ä¸ªèµ å“ä½ æ²¡æœ‰æ‹¿å‘¢â€ç‹ç‹¸å…ˆç”Ÿæ€¥å¿™å«ä½äº†å¥¹ã€‚</p><p>â€œèµ å“ï¼Ÿâ€</p><p>ç‹ç‹¸å…ˆç”ŸæŸ”æŸ”åœ°ç¬‘äº†ï¼ŒæŒ‡äº†æŒ‡è‡ªå·±â€œèµ å“å°±æ˜¯æˆ‘å“¦â€</p><p>æ™šå®‰</p><h3 id="æˆ‘çš„ä¸»è§’"><a href="#æˆ‘çš„ä¸»è§’" class="headerlink" title="æˆ‘çš„ä¸»è§’"></a>æˆ‘çš„ä¸»è§’</h3><p>å°å…”å­æ¯å¤©ç¡å‰éƒ½è¦å¬ç¡å‰æ•…äº‹ï¼Œè€Œä¸”ä¸èƒ½æ˜¯æ•…äº‹ä¹¦ä¸Šçš„ï¼Œè¦ç°ç¼–ã€‚</p><p>å°ç‹ç‹¸æ¯å¤©ä¸ºäº†ç¡å‰æ•…äº‹éƒ½ç»å°½è„‘æ±ï¼Œæ¯æ—¥çš„ç”Ÿæ´»é™¤äº†å‡ºå»æ‰¾èƒ¡èåœï¼Œå°±æ˜¯æƒ³ç¡å‰æ•…äº‹ã€‚</p><p>å°ç‹ç‹¸å‡ºé—¨ï¼Œçœ‹åˆ°ç»¿æ²¹æ²¹çš„å°è‰ï¼Œå°ç‹ç‹¸æƒ³ï¼Œç»¿æ²¹æ²¹çš„å°è‰ï¼Œä¼šæœ‰ä»€ä¹ˆç¡å‰æ•…äº‹å‘¢ã€‚</p><p>ç®—äº†ç®—äº†ï¼Œå…ˆè®°ä¸‹æ¥ã€‚</p><p>å°ç‹ç‹¸è½»è½»å‡‘è¿‘å°è‰ï¼Œå‘ç°ä¸€å †å°è‰ä¸­æœ‰ä¸€æœµå«©é»„çš„èŠ±ï¼Œä¸Šé¢åœäº†ä¸€åªè´è¶ã€‚</p><p>å°ç‹ç‹¸æƒ³ï¼ŒçœŸç¾å¥½å•Šï¼Œå¦‚æœå°å…”å­è¿™æ—¶å€™ä¹Ÿåœ¨å°±å¥½å•¦ï¼Œå°ç‹ç‹¸é¡ºç€é©¬è·¯ï¼Œé‡åˆ°äº†æ¬å®¶çš„å°èš‚èšï¼Œå°ç‹ç‹¸æŠ¬èµ·æ¥çˆªå­ï¼Œè½»æŸ”æŸ”çš„ç»•è¿‡èš‚èšçš„çªã€‚</p><p>ç„¶åæŠŠå¤´æ…¢æ…¢å‡‘è¿‡å»ï¼Œå·çª¥åˆ°äº†æ•´ä¸ªèš‚èšç‹å›½ã€‚å°ç‹ç‹¸å¿µå¨ç€ï¼Œå¿«è®°ä¸‹æ¥ï¼Œå›å»ç»™å°å…”å­è®²ï¼Œèš‚èšç‹å›½çš„æ•…äº‹ã€‚</p><p>å°ç‹ç‹¸æ…¢æ‚ æ‚ çš„å¾€å‰èµ°ï¼Œé‡åˆ°äº†å¾ˆå¤šäººï¼Œä»–ç©¿è¿‡äº†å˜ˆå˜ˆæ‚æ‚çš„èœå¸‚åœºï¼Œå·å·æºœè¿›äº†å–èƒ¡èåœæ±¤çš„åº—é‡Œï¼Œç»•è¿‡äº†å°æ¡¥ï¼Œå¸¦ç€ä¸€ä¸ªæœ¬å­çš„æ‰€è§æ‰€é—»åˆ°å®¶ã€‚</p><p>å½“ç„¶ï¼Œå˜´é‡Œè¿˜å¼ç€ä¸€å—èƒ¡èåœï¼Œé‚£æ˜¯ä»–ä¸“é—¨ä¸ºå°å…”å­ç•™çš„ã€‚å°ç‹ç‹¸æŠŠèƒ¡èåœæ”¾åœ¨å°å…”å­å˜´è¾¹ï¼ŒæŠŠç¯å…‰è°ƒæš—ï¼Œç„¶åç¿»å‡ºè‡ªå·±çš„æœ¬å­ã€‚</p><p>å°ç‹ç‹¸ç”¨èˆŒå¤´èˆ”äº†èˆ”çˆªå­ï¼Œæœ‰äº›æŠ±æ­‰çš„è¯´ï¼Œâ€œä»Šå¤©æ²¡æœ‰å¸¦å›æ¥å®Œæ•´çš„æ•…äº‹ã€‚â€</p><p>å°å…”å­å‡‘è¿‡å»çœ‹ç€è®°å½•çš„æ‚ä¹±æ— ç« çš„ç¬”è®°ï¼Œâ€œæ²¡äº‹å•Šï¼Œå‘Šè¯‰æˆ‘ä½ ä»Šå¤©çš„æ—¥å¸¸ï¼Œå°±æ˜¯æˆ‘æœ€å¥½çš„ç¡å‰æ•…äº‹ã€‚â€</p><p>å°ç‹ç‹¸è®²èµ·æ¥ä»Šå¤©ä¸€å¤©ï¼Œå°å…”å­æ…¢æ…¢ç¡ç€ï¼Œå¼€å§‹æ‰“èµ·æ¥å‘¼å™œã€‚</p><p>å°ç‹ç‹¸ä½å¤´äº²äº†å°å…”å­ä¸€å£ï¼Œç›–å¥½äº†å°è¢«å­ï¼Œâ€œæ™šå®‰æˆ‘çš„å°å…”å­ï¼Œæƒ³è®©ä½ å‚ä¸æˆ‘æ‰€æœ‰çš„ç”Ÿæ´»ï¼Œæˆä¸ºæˆ‘ç¡å‰æ•…äº‹çš„ä¸»è§’ã€‚â€</p><p>æ™šå®‰</p><h3 id="é›¨å­£çš„æ‹çˆ±"><a href="#é›¨å­£çš„æ‹çˆ±" class="headerlink" title="é›¨å­£çš„æ‹çˆ±"></a>é›¨å­£çš„æ‹çˆ±</h3><p>æ£®æ—çš„åŒ—æ–¹æœ‰ä¸ªé›¨ä¸–ç•Œï¼Œé‡Œé¢çš„äººéƒ½åªèƒ½åœ¨é›¨å¤©è°ˆæ‹çˆ±ï¼Œé™¤éå¤„åœ¨é›¨ä¸–ç•Œçš„ä¸€æ–¹å¯ä»¥å¼ºå¤§åˆ°ä¿æŠ¤å¯¹æ–¹ï¼Œå¦åˆ™ä¸¤ä¸ªäººåªå¯ä»¥åœ¨é›¨å¤©è§é¢ã€‚</p><p>è¿™ä¸ªè§„å®šå•Šå¯è‹¦äº†ä¸€ä¼—çƒ­æ‹ä¸­çš„å°æƒ…ä¾£ï¼Œå°ç‹ç‹¸èººåœ¨åœ°ä¸ŠæŠ±æ€¨åˆ°ï¼Œè‡ªå·±å·²ç»å¾ˆä¹…æ²¡æœ‰è§åˆ°ç»å¸¸æ¥è‡ªå·±ä¼ä¸‹èº²é›¨çš„å°å…”å­äº†ï¼Œå†ä¸ä¸‹é›¨ï¼Œä»–ä»¬ä¿©çš„çˆ±æƒ…æ•…äº‹å°±è¦ç»“æŸäº†ã€‚â˜”</p><p>å°ç‹ç‹¸æ—è¾¹å°é‡èŠ±ä¹ŸæŠ±æ€¨åˆ°ï¼Œè‡ªå·±å’ŒåˆºçŒ¬å…ˆç”Ÿä¹Ÿæ˜¯ï¼Œå·²ç»å¥½ä¹…æ²¡æœ‰è§é¢äº†ã€‚</p><p>å°ç‹ç‹¸å’Œå°é‡èŠ±ä¸€èµ·å¹äº†å£æ°”ï¼Œè§‰å¾—é›¨ä¸–ç•Œè¿™ä¸ªè§„å®šå®åœ¨å¤ªä»¤äººè®¨åŒäº†ï¼Œå¦‚æœä¸€ç›´ä¸ä¸‹é›¨ï¼Œä»–ä»¬å°±è¦è¢«è¿«åˆ†å¼€ï¼Œè¿™è®¨åŒçš„å¼‚åœ°æ‹å•Šã€‚</p><p>å°ç‹ç‹¸æ™ƒäº†æ™ƒå¤´ï¼Œçœ‹ç€åœåœ¨å°é‡èŠ±ä¸Šçš„èœœèœ‚å¤«å¦‡ï¼Œæœ‰ç‚¹ç¾¡æ…•ã€‚</p><p>å¦‚æœä¸æ˜¯å› ä¸ºæœ€è¿‘æ˜¯æ—±å­£ï¼Œä»–å’Œå°å…”å­ä¹Ÿåº”è¯¥åƒèœœèœ‚å¤«å¦‡ä¸€æ ·ç”œèœœã€‚</p><p>æœ€è¿‘å°å…”å­èº«è¾¹çš„å°ç°å…”ï¼Œå¯¹å°å…”å­å¯æ®·å‹¤äº†ï¼Œè¿™è®©å°ç‹ç‹¸æ°”çš„ç‰™ç—’ç—’ï¼Œæ¨ä¸å¾—ç«‹åˆ»è®©è‡ªå·±çš„é£è¿‡å»ï¼Œå†²åˆ°å°å…”å­èº«è¾¹ï¼Œå®£ç¤ºä¸»æƒã€‚</p><p>å¯æƒœå°ç‹ç‹¸è¿˜æ˜¯å°ç‹ç‹¸ï¼Œè¿˜æ²¡æœ‰ä¿æŠ¤å°å…”å­çš„èƒ½åŠ›ï¼Œæ¯•ç«Ÿæœ‰æ—¶å€™é›¨å­£æ¥çš„æ—¶å€™ï¼Œå°ç‹ç‹¸éƒ½æ²¡æ³•å½»åº•ä¿æŠ¤å¥½å°å…”å­ã€‚</p><p>ä¸è¿‡å°å…”å­å€’æ˜¯çœ‹çš„å¾ˆå¼€ï¼Œå¥¹è§‰å¾—å°ç‹ç‹¸å·²ç»å¾ˆå¥½äº†ï¼Œæ·‹çš„é›¨éƒ½å¯ä»¥ç®—ä½œä¸¤ä¸ªäººä¹‹é—´çš„å°æƒ…è¶£ï¼Œå¶å°”è¿˜æ˜¯å¾ˆæœ‰æ„æ€çš„ã€‚</p><p>ç»ˆäºå€™æ¥äº†é›¨å­£ï¼Œå°ç‹ç‹¸æ‘©æ‹³æ“¦æŒï¼Œç­‰ç€å°å…”å­æ¥ï¼Œå°é‡èŠ±ä¹Ÿæ˜¯ï¼ŒèŠ±ç“£éƒ½å¨‡è‰³æ¬²æ»´ï¼Œç­‰ç€å°åˆºçŒ¬çš„åˆ°æ¥ã€‚</p><p>å°å…”å­åœ¨é›¨å­£å¿«å¼€å§‹ä¹‹å‰ï¼Œè¹¦è¹¦è·³è·³çš„æ¥äº†ï¼Œå°ç‹ç‹¸æ¯”å»å¹´é›¨å­£åˆé•¿å¤§äº†ä¸€ç‚¹ï¼Œåˆšå¥½å¯ä»¥æŠ±ç€å°å…”å­äº†ã€‚</p><p>å°å…”å­å…´å¥‹çš„æ‘¸äº†æ‘¸å°ç‹ç‹¸çš„å¤´ï¼Œå›´ç€å°ç‹ç‹¸è½¬äº†ä¸¤åœˆï¼Œç„¶åèº²åœ¨äº†å°ç‹ç‹¸çš„ä¼ä¸‹ï¼Œæœ‰äº›èµèµæ€§çš„å¼€å£ï¼Œâ€œå“‡å“¦ï¼Œä½ ç°åœ¨å·²ç»å®Œå…¨å¯ä»¥æŠŠæˆ‘ä¿æŠ¤å¥½å•¦ã€‚â€</p><p>å°ç‹ç‹¸ç‚¹ç‚¹å¤´ï¼Œæ›´åŠªåŠ›çš„æŠ±ä½å°å…”å­ï¼Œå°å…”å­èººåœ¨å°ç‹ç‹¸çš„ä¼ä¸‹ï¼Œçµ®çµ®å¨å¨çš„è®²è‡ªå·±èº«è¾¹çš„æ•…äº‹ã€‚</p><p>å¥¹è¯´ï¼Œæœ€è¿‘å°ç°å…”å’Œå°é»‘å…”åˆ†æ‰‹å•¦ï¼Œå› ä¸ºä¸¤ä¸ªäººå¤©å¤©åœ¨ä¸€èµ·ï¼Œç„¶åä¼šåµæ¶ï¼Œè¿˜æ˜¯å’Œå°ç‹ç‹¸è¿™æ ·å¥½ã€‚</p><p>å¥¹è¯´ï¼Œæœ€è¿‘å®¶é‡Œçš„èƒ¡èåœéƒ½æˆç†Ÿå•¦ï¼Œæ”¶è·äº†å¥½å¤šï¼Œä½†æ˜¯å› ä¸ºå°ç‹ç‹¸ä¸çˆ±åƒèƒ¡èåœæ‰€ä»¥å¥¹å°±æ²¡æœ‰å¸¦æ¥ã€‚</p><p>å¥¹è¯´ï¼Œåˆæœ‰ä¸€æ‰¹å°å…”å­è¿›æ·±å±±é‡Œæ¢é™©ï¼Œè¿™æ¬¡é›¨ä¸‹è¿™ä¹ˆå¤§ï¼Œä¸çŸ¥é“ä»–ä»¬èƒ½ä¸èƒ½å®‰å…¨å›æ¥ã€‚â›°ï¸</p><p>å°ç‹ç‹¸å®‰é™çš„å¬ç€ï¼Œæ—¶ä¸æ—¶ç‚¹ç‚¹å¤´ï¼Œæ¯æ¬¡ç‚¹å¤´æ—¶éƒ½ä¼šæŠŠå‡ æ»´é›¨æ°´æ»´åˆ°å°å…”å­å¤´ä¸Šã€‚</p><p>å°å…”å­ç³Šäº†ç³Šé›¨æ°´ï¼Œæ¢³äº†æ¢³è‡ªå·±çš„æ¯›ï¼Œç¬‘å˜»å˜»çš„é—®å°ç‹ç‹¸è‡ªå·±åšçš„æ–°å‘å‹å¥½ä¸å¥½çœ‹ã€‚</p><p>é›¨å­£ç»“æŸäº†ï¼Œå°å…”å­ä¼¸å±•äº†ä¸‹å››è‚¢ï¼Œäº²äº†äº²å°ç‹ç‹¸çš„å¤´ï¼Œâ€œæ ¹æ®é›¨ä¸–ç•Œçš„è§„å®šï¼Œæˆ‘è¦èµ°äº†å“¦ã€‚â€</p><p>å°å…”å­æ‘†äº†æ‘†æ‰‹ã€‚</p><p>å°ç‹ç‹¸ç‚¹äº†ç‚¹å¤´ï¼Œè¹­äº†è¹­å°å…”å­çš„æ¯›ï¼Œâ€œå»å§ï¼Œ ç­‰ä¸‹æ¬¡ä½ å†æ¥çš„æ—¶å€™ï¼Œæˆ‘å°±æœ‰è¶³å¤Ÿèƒ½åŠ›ä¿æŠ¤ä½ å•¦ï¼Œä½ å°±ä¸ç”¨å†èµ°å•¦ã€‚ â€</p><p>æ™šå®‰</p><h3 id="æˆ‘ä¸æ€•ä½ æ˜¯å› ä¸ºæˆ‘å–œæ¬¢ä½ "><a href="#æˆ‘ä¸æ€•ä½ æ˜¯å› ä¸ºæˆ‘å–œæ¬¢ä½ " class="headerlink" title="æˆ‘ä¸æ€•ä½ æ˜¯å› ä¸ºæˆ‘å–œæ¬¢ä½ "></a>æˆ‘ä¸æ€•ä½ æ˜¯å› ä¸ºæˆ‘å–œæ¬¢ä½ </h3><p>å°å…”å­ç¬¬ä¸€æ¬¡é‡åˆ°å°ç‹ç‹¸çš„æ—¶å€™æ˜¯åœ¨å°æ²³è¾¹ã€‚é‚£ä¸ªæ—¶å€™ï¼Œå°å…”å­è·Ÿå¦ˆå¦ˆåµæ¶äº†ï¼ŒåŸå› æ˜¯ï¼Œå¥¹ä¸æƒ³åƒèƒ¡èåœï¼Œå¯å¦ˆå¦ˆéè¦å¥¹åƒï¼Œå¥¹ä¸€è·ºè„šï¼Œå°±ç¦»å®¶å‡ºèµ°äº†ã€‚</p><p>æ²¿ç€å°æ²³èµ°äº†åŠå¤©ï¼Œå°å…”å­åˆç´¯åˆé¥¿ï¼Œç„¶åå°±çœ‹è§äº†æ­£åœ¨ç¿»ç€è‚šçš®æ™’å¤ªé˜³çš„å°ç‹ç‹¸ã€‚â˜€ï¸</p><p>äºæ˜¯å°å…”å­ä¸€è¹¦ä¸€è·³çš„è¹¦åˆ°å°ç‹ç‹¸èº«è¾¹ï¼Œçœ¨å·´ç€çœ¼ç›çœ‹ç€ä»–ã€‚</p><p>å°ç‹ç‹¸æ„Ÿè§‰åˆ°æœ‰å•¥ä¸œè¥¿é è¿‘ï¼Œå°±æŠ¬äº†æŠ¬çœ¼çš®ï¼Œçœ‹åˆ°æ˜¯ä¸€åªå°å…”å­ç„¶ååˆé—­ä¸Šäº†ã€‚</p><p>å°å…”å­æ»¡æ„çš„ç‚¹å¤´ï¼ŒåŒæ‰‹æ‰’æ‹‰ç€å°ç‹ç‹¸è‚šå­ä¸Šçš„æ¯›ï¼Œæ‰¾äº†ä¸ªèˆ’æœçš„å§¿åŠ¿ï¼Œæ»¡æ„çš„èººä¸‹å»äº†ã€‚</p><p>å°ç‹ç‹¸å˜´è§’æŠ½äº†æŠ½ï¼Œä»–ä¼¸å‡ºæ‰‹æŒ‡æˆ³äº†æˆ³å°å…”å­çš„è„¸ã€‚</p><p>â€œå–‚ï¼Œï¼Œ ä½ ä¸æ€•æˆ‘?â€</p><p>å°å…”å­çå¼€çœ¼ç›ï¼Œæ¼‚äº®çš„çœ¼ç å­è½¬å•Šè½¬çš„ã€‚</p><p>â€œæ€•å‘€ï¼Œå› ä¸ºä»å°å¦ˆå¦ˆå°±å‘Šè¯‰æˆ‘ï¼Œçœ‹è§ç‹ç‹¸å°±è¦æ’’ä¸«å­è·‘ï¼Œè·‘çš„è¶Šå¿«è¶Šå¥½ï¼Œä»–ä»¬ä¸“é—¨é—¨åƒå…”å­ï¼Œå¯æ˜¯ä¸ºå•¥ä½ éƒ½ä¸ç†æˆ‘?â€</p><p>å°ç‹ç‹¸æ¶ç‹ ç‹ çš„è¯´ã€‚â€œé‚£æ˜¯å› ä¸ºæˆ‘ç°åœ¨è¿˜ä¸é¥¿â€å…¶å®å°ç‹ç‹¸æ²¡æœ‰æ‰“ç®—åƒå¥¹ï¼Œäº‹å®ä¸Šä»–ä¹Ÿä»æ¥ä¸åƒå…”å­ã€‚</p><p>å°å…”å­é‡æ–°é—­ä¸Šçœ¼ã€‚</p><p>â€˜å“¦ï¼Œé‚£ç­‰ä½ é¥¿äº†å°±è·Ÿæˆ‘è¯´ä¸€ å£°ï¼Œæˆ‘å°±å¼€å§‹è·‘ã€‚â€</p><p>å°ç‹ç‹¸ä»æ¥æ²¡æœ‰è§åˆ°è¿‡ä¸æŠŠä»–å½“å›äº‹çš„å…”å­ã€‚ä½†â€¦.ä¸ºä»€ä¹ˆä¼šè§‰å¾—è¿™åªå…”å­è¿™ä¹ˆå¯çˆ±å‘¢ã€‚</p><p>åˆ°äº†æ™šä¸Šï¼Œå°ç‹ç‹¸è¦å›å®¶äº†ï¼Œåªæ˜¯ä»–æ²¡æƒ³åˆ°å°å…”å­ä¹Ÿè·Ÿäº†ä¸Šæ¥ã€‚</p><p>â€œå–‚ï¼Œä½ çœŸçš„ä¸æ€•æˆ‘åƒäº†ä½ ?â€</p><p>å°å…”å­æ²¡æœ‰å›ç­”ä»–ï¼Œåè€Œé—®ä»–:â€œå°ç‹ç‹¸ï¼Œè¿™å°±æ˜¯ä½ çš„å®¶å—?å¥½é»‘å“¦ã€‚â€</p><p>â€œç™½ç—´ï¼Œä½ ä¸ä¼šç‚¹ç¯å—?â€å°ç‹ç‹¸æƒ³ç ´å£å¤§éª‚ã€‚å°å…”å­å§”å±ˆå·´å·´çš„ï¼Œâ€œ æˆ‘åˆçœ‹ä¸è§ï¼Œæ€ä¹ˆç‚¹å˜›ã€‚â€</p><p>æ— å¥ˆï¼Œå°ç‹ç‹¸åªå¥½è®¤å‘½çš„ç‚¹ä¸Šç¯ã€‚</p><p>å…¶å®å°ç‹ç‹¸çš„çœ¼ç›åœ¨é»‘æš—ä¸­çœ‹çš„æ›´æ¸…æ¥šï¼Œæ‰€ä»¥å¹³æ—¶ä»–ä¹Ÿæ²¡æœ‰ç‚¹ç¯ã€‚</p><p>ç‚¹ä¸Šç¯ï¼Œå®¶é‡Œäº®å¤šäº†ã€‚</p><p>å°å…”å­å°±å¼€å¿ƒçš„è¹¦å•Šè¹¦çš„ã€‚</p><p>å°ç‹ç‹¸çœ‹ç€è¿™åªå°å…”å­ï¼Œå˜´è§’æ³›èµ·äº†ä¸€ä¸ªæµ…æµ…çš„ç¬‘ã€‚å°ç‹ç‹¸ç»™å°å…”å­ç”¨æ ‘å¶åšäº†ä¸€ä¸ªçªã€‚ä»–æ‹æ‹çªï¼Œç”¨çœ¼ç¥ç¤ºæ„å°å…”å­è¿›å»ç¡è§‰ã€‚</p><p>å°å…”å­è¹¦è¿›å»ï¼Œè½¬å¤´é—®ä»–ï¼Œâ€œä½ ä¸ä¼šè¶æˆ‘ç¡ç€äº†çš„æ—¶å€™åƒæˆ‘å§?â€</p><p>å°ç‹ç‹¸ç¿»äº†ä¸ªç™½çœ¼æŒ‡äº†æŒ‡æ—è¾¹çš„ä¸€å †èƒ¡èåœï¼Œâ€œæˆ‘æ—©å°±æ”¹åƒç´ å•¦ã€‚â€</p><p>å°å…”å­æ‰æ”¾å¿ƒçš„å»ç¡äº†ã€‚</p><p>åŠå¤œï¼Œå°ç‹ç‹¸æ„Ÿè§‰æ€€é‡Œæš–æš–çš„ï¼Œè¿˜æœ‰ä¸ªä¸œè¥¿åœ¨åŠ¨ã€‚</p><p>ä»–ç«‹åˆ»è­¦è§‰èµ·æ¥ã€‚â€œè°?â€</p><p>â€œæ˜¯æˆ‘å•¦ã€‚â€å°å…”å­è¿·è¿·ç³Šç³Šçš„å£°éŸ³ä¼ æ¥ã€‚å°ç‹ç‹¸æ¾äº†ä¸€å£æ°”ï¼Œâ€œä½ å¤§åŠå¤œçš„ä¸ç¡è§‰å¾€æˆ‘æ€€é‡Œé’»ä»€ä¹ˆ?ä½ ä¸æ€•æˆ‘å¿ä¸ä½åƒäº†ä½ ?â€</p><p>å°å…”å­å£°éŸ³å°å°çš„ï¼Œè¿˜å¸¦èµ·äº†å“­è…”ã€‚</p><p>â€œå¯æ˜¯ä½ åšçš„çªå¤ªå†·äº†ï¼Œæ²¡æœ‰ä½ æ€€é‡Œæš–å’Œã€‚â€å°ç‹ç‹¸æ— å¥ˆï¼Œåªå¥½æŠŠå¥¹å¾€æ€€é‡ŒæŒ‰äº†æŒ‰ï¼Œç„¶åä¸€èµ·è¿›å…¥äº†æ¢¦ä¹¡ã€‚</p><p>å°±è¿™æ ·å°å…”å­åœ¨å°ç‹ç‹¸çš„å®¶é‡Œä½äº†åŠä¸ªæœˆã€‚</p><p>ç­‰åˆ°å…”å­å¦ˆå¦ˆæ‰¾åˆ°å°å…”å­çš„æ—¶å€™ï¼Œå°å…”å­æ­£æ»¡æ„çš„é åœ¨å°ç‹ç‹¸æ€€é‡Œï¼Œå°ç‹ç‹¸åœ¨å¸®å¥¹æ¢³ç†æ¯›å‘ã€‚</p><p>è¿™ä¸€å¹•å¯å“åäº†å…”å¦ˆå¦ˆï¼Œå¥¹å¤§å£°å«:â€œç•œç”Ÿï¼Œä½ æ”¾ä¸‹æˆ‘å¥³å„¿!â€</p><p>å°ç‹ç‹¸å‚»äº†ï¼Œè¿™æ€ä¹ˆåŠï¼Œè¿™ä¸¤è¾¹éƒ½ä¸èƒ½å¾—ç½ªå•Šï¼Œåªå¥½å‘†å‘†çš„ç«™åœ¨é‚£é‡Œã€‚</p><p>å°å…”å­å¼€å¿ƒæäº†ï¼Œè¹¦è¹¦è·³è·³å°±å»å¦ˆå¦ˆé‚£é‡Œäº†ã€‚å¦ˆå¦ˆèµ¶ç´§æŠ±ä½å¥¹ï¼Œä¸€ä¸ªåŠ²çš„é—®å¥¹æœ‰æ²¡æœ‰äº‹ã€‚</p><p>å°å…”å­å¼€å¿ƒçš„è·Ÿå¦ˆå¦ˆè¯´ï¼Œå¥¹äº¤äº†ä¸ªå¥½æœ‹å‹ï¼Œæ˜¯å°ç‹ç‹¸ã€‚</p><p>å…”å­å¦ˆå¦ˆçœ¼ä¸€çª:â€œå…”å­æ€ä¹ˆèƒ½è·Ÿç‹ç‹¸åšæœ‹å‹ï¼Œä½ è·Ÿæˆ‘å›å»!å›å»å†æ”¶æ‹¾ä½ ã€‚èƒ†å„¿è‚¥äº†ï¼Œæ•¢ç¦»å®¶å‡ºèµ°ã€‚ï¼Œ</p><p>å°å…”å­å°±è¿™æ ·è¢«å…”å¦ˆå¦ˆå¸¦èµ°äº†ã€‚</p><p>ä»¥åçš„æ—¥å­ï¼Œå°ç‹ç‹¸è¿˜æ˜¯åœ¨é‚£é‡Œæ™’å¤ªé˜³ï¼Œä»–åœ¨é‚£é‡Œç­‰ä»–é‚£åªå°å…”å­ã€‚</p><p>å¤§ç°ç‹¼è¯´:â€œ ç‹ç‹¸å…„ï¼Œä½ ç–¯äº†å§!å¥¹ä¸ä¼šå›æ¥å•¦ã€‚â€</p><p>å°ç‹ç‹¸æ·¡å®šçš„ç¬‘äº†ç¬‘ï¼Œ</p><p>â€œä¼šçš„ã€‚â€</p><p>è¿™å¤©ï¼Œå°ç‹ç‹¸ä¾ç„¶é—­ç€çœ¼ç›åœ¨é‚£å“‚å¤ªé˜³ï¼Œçªç„¶æ„Ÿè§‰æ€€é‡Œæš–æš–çš„ï¼Œè¿˜æœ‰ä¸ªä¸œè¥¿åœ¨åŠ¨ï¼Œå°ç‹ç‹¸å¾®å¾®ä¸€ç¬‘ï¼Œå¤´ä¹Ÿä¸æŠ¬çš„é—®:â€œå–‚ï¼Œä½ ä¸æ€•æˆ‘?â€</p><p>â€œä¸æ€•!æˆ‘å–œæ¬¢ä½ !â€</p><p>å—¯ï¼Œæ˜¯å°å…”å­çš„å£°éŸ³ã€‚</p><p>æ™šå®‰</p><h3 id="ç—…åä¸ºçˆ±ï¼Œå–œä½ ä¸ºç–¾ï¼Œè¯çŸ³æ— åŒ»"><a href="#ç—…åä¸ºçˆ±ï¼Œå–œä½ ä¸ºç–¾ï¼Œè¯çŸ³æ— åŒ»" class="headerlink" title="ç—…åä¸ºçˆ±ï¼Œå–œä½ ä¸ºç–¾ï¼Œè¯çŸ³æ— åŒ»"></a>ç—…åä¸ºçˆ±ï¼Œå–œä½ ä¸ºç–¾ï¼Œè¯çŸ³æ— åŒ»</h3><p>å°å…”å­ç¬¬ä¸€æ¬¡å‡ºæ¥æ‰¾åƒçš„å°±è¢«å°ç‹ç‹¸æŠ“åˆ°äº†ã€‚</p><p>å°ç‹ç‹¸ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡æŠ“åˆ°å…”å­ï¼Œä»–æŠŠå°å…”å­æ§åœ¨æ‰‹é‡Œï¼Œå¥½å¥‡åœ°æ‰“é‡ç€å¥¹ï¼Œå°å…”å­å®³æ€•æäº†ï¼Œå¥¹æƒ³èµ·å¦ˆå¦ˆå‘Šè¯‰è¿‡å¥¹ï¼Œå¦‚æœè¢«ç‹ç‹¸æŠ“ä½ä¼šè¢«åƒæ‰çš„ã€‚</p><p>æƒ³åˆ°è¿™ï¼Œå°å…”å­æ²¡å¿ä½ï¼Œå“‡çš„ä¸€å£°å“­äº†å‡ºæ¥ã€‚è¿™ä¸€å“­å¯æŠŠå°ç‹ç‹¸å“åäº†ï¼Œä»¥ä¸ºè‡ªå·±çš„çˆªå­åˆ®ç–¼äº†å°å…”å­ï¼Œèµ¶ç´§æŠŠçˆªå­æ”¶å›å»ã€‚</p><p>â€œå–‚å–‚å–‚ä½ åˆ«å“­å•Šï¼Œæˆ‘æŠŠçˆªå­æ”¶å›å»äº†ã€‚â€å°å…”å­çœ¼ç å’•å™œå™œè½¬äº†å‡ åœˆï¼Œç„¶åä¸€è„¸æƒŠæåœ°çœ‹ç€å°ç‹ç‹¸ï¼šâ€œç¦»æˆ‘è¿œä¸€ç‚¹!ä¸ç„¶ä½ ä¼šæ²¡å‘½çš„!â€</p><p>å°ç‹ç‹¸æ„£äº†ä¸€ä¸‹ï¼šâ€œä¸ºä»€ä¹ˆ?â€ ï¸</p><p>å°å…”å­æ“¦äº†æ“¦çœ¼æ³ªï¼šâ€œæˆ‘ç”Ÿç—…äº†ï¼Œæ˜¯é‚£ç§ä»€ä¹ˆè¯éƒ½æ²»ä¸å¥½çš„å¾ˆä¸¥é‡çš„ä¼ æŸ“ç—…!ä½ ç¦»æˆ‘å¤ªè¿‘å°±ä¼šè¢«ä¼ æŸ“çš„!â€</p><p>å°ç‹ç‹¸æœ‰äº›å«Œå¼ƒåœ°æŠŠå°å…”å­æ”¾åœ¨åœ°ä¸Šï¼šâ€œä¸€çœ‹ä½ å°±æ˜¯æ–°å† ï¼Œèµ¶ç´§èµ°ï¼Œä¸‹æ¬¡åˆ«è®©æˆ‘å†çœ‹è§ä½ ã€‚â€</p><p>å°å…”å­ç¤¼è²Œåœ°é äº†ä¸ªèº¬ï¼Œæ•…ä½œå†·é™åœ°ç¦»å¼€äº†ã€‚</p><p>ç¬¬äºŒå¤©ï¼Œå°å…”å­åˆå‡ºæ¥æ‰¾åƒçš„ã€‚è¿™æ¬¡å¥¹å¾ˆå¹¸è¿ï¼Œåœ¨ç¦»æ´å£æ²¡å¤šè¿œçš„åœ°æ–¹å‘ç°äº†ä¸€å—å·§å…‹åŠ›é¥¼å¹²ã€‚å°å…”å­ç´§å¼ åœ°å››å¤„å¼ æœ›ï¼Œå†ä¸‰ç¡®è®¤æ²¡æœ‰çœ‹åˆ°å°ç‹ç‹¸ï¼Œèµ¶ç´§æŠ±ç€é¥¼å¹²è·‘å›å®¶ã€‚</p><p>ç¬¬ä¸‰å¤©ï¼Œå°å…”å­åˆåœ¨ä¸Šæ¬¡çš„åœ°æ–¹å‘ç°äº†åŠå—å¥¶é…ªï¼Œåæ¥çš„å‡ å¤©ï¼Œå°å…”å­æ¯å¤©éƒ½èƒ½åœ¨é‚£ä¸ªåœ°æ–¹æ‰¾åˆ°å„ç§å¥½åƒçš„ä¸œè¥¿ã€‚</p><p>å°å…”å­è§‰å¾—å¾ˆå¥‡æ€ªï¼Œå¥¹å†³å®šåœ¨è¿™å®¶ä¸»äººåˆšç†„ç¯çš„æ—¶å€™æºœå‡ºå»çœ‹ä¸ªç©¶ç«Ÿã€‚ ï¸</p><p>è¿™å¤©ï¼Œå°å…”å­ä¸€ç›´è¹²åœ¨æ´å£ï¼Œå¥¹å¬è§å±‹å­çš„ä¸»äººè¯´ï¼šâ€œæˆ‘è¿™å‡ å¤©æ‘†åœ¨è¿™å„¿çš„ç”œç‚¹å…”å­å±…ç„¶ä¸€ç‚¹éƒ½æ²¡åƒï¼Œéš¾é“å®ƒä»¬çŸ¥é“è¿™é‡Œé¢æ”¾äº†å…”å­è¯?â€</p><p>å…”å­è¯!?å°å…”å­å“å¾—æ‘¸äº†æ‘¸è‡ªå·±çš„è‚šå­ï¼Œå¯è‡ªå·±è¦çœŸæ˜¯çœŸåƒäº†å…”å­è¯åº”è¯¥æ—©å°±æ­»äº†å‘€?åˆ°åº•æ˜¯æ€ä¹ˆå›äº‹å‘¢?</p><p>å°å…”å­æ‚„æ‚„æ¢å‡ºå¤´ï¼Œçœ‹è§ä¸»äººæŠŠä¸€å—è›‹ç³•æ°æˆä¸¤å—ï¼Œä¸€å—é‡Œé¢æºäº†å…”å­è¯ï¼Œå¦ä¸€å—ç»™äº†å°ç‹ç‹¸ã€‚</p><p>â€œè¿™å—ç»™ä½ ï¼Œä»Šå¤©æ™šä¸Šä¹Ÿè¦å¥½å¥½çœ‹ç€å…”å­!â€</p><p>å°å…”å­ç‚¹äº†ç‚¹å¤´ï¼Œéšç€å…³ç¯çš„å£°éŸ³ï¼Œæˆ¿é—´é‡Œé¡¿æ—¶é™·å…¥ä¸€ç‰‡é»‘æš—ï¼Œè¿™æ—¶ï¼Œå°å…”å­çœ‹åˆ°å°ç‹ç‹¸æŠŠåœ°ä¸Šçš„æ¯’è›‹ç³•æ‹¿å¼€ï¼Œç„¶åæŠŠè‡ªå·±çš„é‚£å—è›‹ç³•æ”¾åœ¨åœ°ä¸Šã€‚</p><p>â€œä½ â€¦ä½ åœ¨å¹²ä»€ä¹ˆã€‚â€</p><p>å°ç‹ç‹¸è½¬è¿‡å¤´ï¼Œèµ¶å¿™å¯¹å°å…”å­åšäº†ä¸ªå˜˜çš„æ‰‹åŠ¿ï¼šâ€œå°å£°ç‚¹ï¼Œè¢«ä¸»äººå‘ç°äº†ä½ å°±æ­»å®šäº†ã€‚â€&#x2F;:,@x</p><p>å°ç‹ç‹¸å››ä¸‹å¼ æœ›äº†ä¸€ä¼šï¼Œç¡®è®¤æ²¡æœ‰äººè¿‡æ¥æ‰æ¾äº†å£æ°”ã€‚ä»–èµ°è¿‘å°å…”å­ï¼Œå‡†å¤‡æŠŠè›‹ç³•é€’ç»™å¥¹ï¼Œå°å…”å­èµ¶ç´§åé€€äº†å‡ æ­¥ï¼šâ€œä½ å¿˜äº†å—ï¼Œæˆ‘æœ‰æ–°å† ä¼ æŸ“ç—…ï¼Œä½ ä¸æ€•å¾—ç—…å—?â€</p><p>å°ç‹ç‹¸ç¬‘ç€èµ°åˆ°å°å…”å­çš„èº«è¾¹ï¼ŒæŠŠå¥¹æŠ±åœ¨æ€€é‡Œè½»å£°åœ°è¯´ï¼šâ€œæˆ‘è§åˆ°ä½ çš„ç¬¬ä¸€çœ¼å°±å¾—äº†ç—…äº†ã€‚ç—…åä¸ºçˆ±ï¼Œå–œä½ ä¸ºç–¾ï¼Œè¯çŸ³æ— åŒ»ã€‚â€</p><p>æ™šå®‰</p><h3 id="æ‹¥æŠ±"><a href="#æ‹¥æŠ±" class="headerlink" title="æ‹¥æŠ±"></a>æ‹¥æŠ±</h3><p>æ£®æ—çš„å¤§æ¦•æ ‘æ´é‡Œä½ç€ä¸€ä¸ªå°å…”å­ï¼Œå¥¹å¾ˆå­¤ç‹¬ï¼Œä¹Ÿå¾ˆè‡ªå‘ã€‚</p><p>æ£®æ—é‡Œçš„äººéƒ½ä¼ è¨€ï¼Œå¥¹å…¶å®æ˜¯ä¸€ä¸ªå¦–æ€ªï¼Œæ²¡æœ‰äººæ„¿æ„é è¿‘å¥¹ã€‚</p><p>å¥¹æœ‰ä¸€ä¸ªå¸ƒè¢‹é‡Œé¢è£…æ»¡äº†ç§å­ï¼Œå…¶å®å°å…”å­åªæ˜¯ä¸€ä¸ªæ™®é€šçš„å°å…”å­ï¼ŒçœŸæ­£çš„å¦–æ€ªï¼Œè£…åœ¨å¥¹å¸ƒè¢‹çš„ç§å­é‡Œã€‚</p><p>å°å…”å­æ¡åˆ°è¿™ä¸ªè¢‹å­çš„æ—¶å€™å°±æœ‰äººå‘Šè¯‰ä»–ï¼Œå¸ƒè¢‹é‡Œæœ‰ä¸€é¢—å¦–æ€ªç§å­ï¼Œåªè¦æŠŠå®ƒç§ä¸‹å»å¾—åˆ°ä¸€ä¸ªå¦–æ€ªï¼Œä»–å°†æ»¡è¶³è®¸æ„¿è€…çš„ä¸€ä¸ªæ„¿æœ›ã€‚</p><p>è¿™ä¸ªæ„¿æœ›è¯¥è®¸ä»€ä¹ˆå‘¢?</p><p>æ˜¯è®©è¿™ä¸ªåŒæ¶è‡ªå·±çš„æ£®æ—è¦†ç­å—?è¿˜æ˜¯å¹²è„†æ¯æ‰è¿™ä¸ªæ²¡æœ‰ä¸€ä¸æ¸©åº¦çš„ä¸–ç•Œå‘¢?</p><p>å°å…”å­æƒ³äº†è®¸å¤šè®¸å¤šï¼Œç»ˆäºï¼Œå¥¹æƒ³åˆ°äº†ä¸€ä¸ªè‡ªå·±è§‰å¾—æœ€èƒ½å¤Ÿè®©å¥¹é«˜å…´çš„æ„¿æœ›ã€‚</p><p>äºæ˜¯å¥¹æ—¥å¤œä¸åœåœ°åœ¨ç§ç§å­ï¼Œç»ˆäºæœ‰ä¸€å¤©ï¼Œåœ¨ä¸€ä¸ªå¾ˆç¾ä¸½çš„å¤œæ™šï¼Œå°å…”å­çœ‹åˆ°äº†ä¸€ä¸ªé¢å®¹æ¸…ç§€å¸…æ°”çš„å°ç‹ç‹¸ã€‚</p><p>â€œå°å…”å­ï¼Œä½ æƒ³å¥½ä½ çš„æ„¿æœ›äº†å—?â€å°ç‹ç‹¸æ·±æ²‰çš„å£°éŸ³åœ¨å±±å³¦é—´å›è¡ã€‚</p><p>â€œæƒ³å¥½äº†ã€‚â€</p><p>â€œå‘Šè¯‰æˆ‘ï¼Œä½ æƒ³è¦ä»€ä¹ˆæ„¿æœ›?å“ªæ€•æ˜¯è¦ä¸–ç•Œæ¯ç­ï¼Œæˆ‘ä¹Ÿå¯ä»¥ç­”åº”ä½ ã€‚â€å°ç‹ç‹¸è¯´ã€‚</p><p>â€œè¯·ä½ ï¼Œè¯·ä½ ç»™æˆ‘ä¸€ä¸ªæ‹¥æŠ±å§ã€‚â€å°å…”å­æœ‰äº›å°å¿ƒç¿¼ç¿¼ï¼Œä½†å¾ˆå¿«ï¼Œä¾¿é›€è·ƒèµ·æ¥ã€‚â€œå°±æ˜¯é‚£ç§ï¼Œè½»è½»çš„ï¼Œè½¯è½¯çš„ï¼Œç”¨åŒæ‰‹ç¯åœ¨ä¸€ä¸ªäººçš„èº«ä¸Šï¼Œçœ‹èµ·æ¥å¾ˆèˆ’æœå¾ˆèˆ’æœçš„åŠ¨ä½œã€‚â€</p><p>â€œæˆ‘å¬è¯´é‚£å«æ‹¥æŠ±ï¼Œå¯¹ä¸å¯¹?â€</p><p>å°ç‹ç‹¸ç´§ç´§çš„æŠ±ç€å°å…”å­ï¼Œå°å…”å­çš„çœ¼ç›é‡Œäº®æ™¶æ™¶çš„ï¼Œå¿«ä¹åœ¨å¥¹çš„è„¸ä¸Šè¡å¼€</p><p>æ™šå®‰</p><h3 id="åªæŠŠç¬‘å®¹ç•™ç»™ä½ å‘€"><a href="#åªæŠŠç¬‘å®¹ç•™ç»™ä½ å‘€" class="headerlink" title="åªæŠŠç¬‘å®¹ç•™ç»™ä½ å‘€"></a>åªæŠŠç¬‘å®¹ç•™ç»™ä½ å‘€</h3><p>å°å…”å­æ˜¯æ£®æ—é‡Œæœ€å¯çˆ±çš„åŠ¨ç‰©äº†ï¼Œå¥¹æœ‰ç€æ¯›èŒ¸èŒ¸çš„å¤§è€³æœµï¼Œä¸€åŒå¤§å¤§çš„çœ¼ç›ã€‚</p><p>æ— è®ºèµ°åˆ°å“ªé‡Œï¼Œæ£®æ—é‡Œçš„åŠ¨ç‰©ä»¬éƒ½ä¼šè·Ÿå°ç™½å…”æ­è®ªï¼Œå¯æ˜¯ï¼Œè·Ÿå¥¹æ­è®ªçš„åŠ¨ç‰©ä»¬ä»æ¥æ²¡æœ‰è§å¥¹ç¬‘è¿‡ã€‚</p><p>æ€»æ˜¯ä¸€å‰¯é«˜å†·çš„æ ·å­ï¼Œè®©è¿™äº›åŠ¨ç‰©ä»¬å¾ˆæ˜¯è‹¦æ¼ï¼Œä¼ è¨€ï¼Œåªè¦è®©å°ç™½å…”ç¬‘äº†ï¼Œå°±å–å¾—å°ç™½å…”çš„èŠ³å¿ƒäº†ã€‚</p><p>å°ç†Šç†Šæ˜¯ä¸€ä½æœ‰åçš„ç”»å®¶ï¼Œä»–ç»™å°å…”å­ç”»äº†ä¸€å¹…ç”»ï¼Œç”»çš„éå¸¸æ¼‚äº®ã€‚</p><p>å°ç†Šç†Šè·ƒè·ƒæ¬²è¯•ï¼Œè§‰å¾—è‚¯å®šèƒ½è®©å°å…”å­ç¬‘èµ·æ¥ã€‚</p><p>å°ç†Šç†Šå…´å†²å†²æŠŠç”»é€ç»™å°ç™½å…”ã€‚âœ¨</p><p>å°ç™½å…”çœ‹åˆ°è‡ªå·±çš„è‚–åƒï¼Œæ·¡æ·¡åœ°è¯´äº†ä¸€å£°ã€‚â€œè°¢è°¢â€</p><p>å°ç†Šç†Šç°æºœæºœçš„ç¦»å¼€äº†ï¼Œå‘¨å›´çš„äººä¸€é˜µå“„ç¬‘ã€‚</p><p>æ¥ç€æ˜¯äºŒå“ˆå…ˆç”Ÿï¼Œä¸ºå°å…”å­å”±äº†ä¸€é¦–æ­Œï¼Œå›´è§‚çš„åŠ¨ç‰©ä»¬é™¶é†‰åœ¨ç¾å¦™çš„å—·å‘œæ­Œå£°ä¸­ï¼Œä»–ä»¬è§‰å¾—å°å…”å­è‚¯å®šä¼šåŠ¨å¿ƒã€‚</p><p>å¯æ˜¯ï¼Œå°å…”å­è¿˜æ˜¯è·Ÿå¾€å¸¸ä¸€æ ·ï¼Œè¡¨æƒ…ä¸æ¯«æ²¡æœ‰ä¸€ç‚¹å˜åŒ–ã€‚</p><p>æ—è¾¹çš„å°ç‹ç‹¸ç€æ€¥äº†ï¼Œå¿ƒæƒ³ï¼Œä¼šç”»ç”»çš„å°ç†Šç†Šï¼Œä¼šå”±æ­Œçš„äºŒå“ˆå…ˆç”Ÿï¼Œéƒ½æ²¡æœ‰è®©å°å…”å­é«˜å…´ã€‚</p><p>æˆ‘ä»€ä¹ˆæ‰è‰ºéƒ½æ²¡æœ‰ï¼Œèƒ½è®©å¥¹åŠ¨å¿ƒå—ï¼Ÿ</p><p>å°ç‹ç‹¸å–œæ¬¢å°å…”å­å·²ç»å¾ˆä¹…äº†ï¼Œåªæ˜¯ä¸€ç›´æ²¡æœ‰å‹‡æ°”å‘Šè¯‰å°å…”å­ã€‚</p><p>å°ç‹ç‹¸æƒ³æ¥æƒ³å»ï¼Œè‡ªå·±å¿…é¡»è¦å‘Šè¯‰å°å…”å­ï¼Œä»–ä¸æƒ³åæ‚”ï¼Œä¸æƒ³åˆ°äº†ä»¥åç—›æ¨è‡ªå·±æ²¡æœ‰å‹‡æ°”ã€‚</p><p>å°ç‹ç‹¸æ¥åˆ°å°å…”å­çš„æ—è¾¹ï¼Œç´§å¼ çš„ä¸å¾—äº†ã€‚</p><p>å°å…”å­æŠ¬å¤´çœ‹ç€å°ç‹ç‹¸ï¼Œå°ç‹ç‹¸è¿Ÿè¿Ÿæ²¡æœ‰è¯´è¯ï¼Œåè€Œå°ç‹ç‹¸çš„è„¸å·²ç»çº¢çš„ä¸è¡Œäº†ã€‚</p><p>å°å…”å­çœ‹åˆ°å°ç‹ç‹¸è¿™ä¹ˆç´§å¼ ï¼Œå¿½ç„¶ç¬‘äº†èµ·æ¥ï¼Œå°å…”å­ç¬‘èµ·æ¥æ˜¯é‚£ä¹ˆå¥½çœ‹ï¼Œå‘¨å›´çš„åŠ¨ç‰©ä»¬éƒ½çœ‹å‘†äº†ã€‚</p><p>â€œå‚»ç‹ç‹¸ï¼Œæˆ‘ä¸å¯¹ä»–ä»¬ç¬‘ï¼Œåªæ˜¯æƒ³æŠŠè‡ªå·±çš„ç¬‘å®¹ç•™ç»™ä½ å•Šã€‚â€</p><p>å°å…”å­æ‹‰ç€å°ç‹ç‹¸çš„æ‰‹ï¼Œæ…¢æ…¢çš„å‘è¿œæ–¹èµ°å»ã€‚</p><p>æ™šå®‰</p><h3 id="æˆ‘å–œæ¬¢ä½ å¾ˆä¹…äº†"><a href="#æˆ‘å–œæ¬¢ä½ å¾ˆä¹…äº†" class="headerlink" title="æˆ‘å–œæ¬¢ä½ å¾ˆä¹…äº†"></a>æˆ‘å–œæ¬¢ä½ å¾ˆä¹…äº†</h3><p>å°å…”å­çš„é‚»å±…æ˜¯ä¸€åªå°ç‹ç‹¸ï¼Œå¤§å®¶å¯¹å°ç‹ç‹¸çš„å°è±¡éƒ½æ˜¯è§‰å¾—ä»–å‡¶å·´å·´çš„ï¼Œä¸æ•¢è®©äººæ¥è¿‘ã€‚</p><p>è¿™ä¸€å¤©å°å…”å­å¼€å¿ƒçš„è¹¦ç€è·³ç€å‡ºå»é€›è¡—ï¼Œèµ°åœ¨æ£®æ—çš„å°è·¯ä¸Šï¼Œå¥¹çœ‹åˆ°è‡ªå·±é«˜å¤§é­æ¢§çš„é‚»å±…å°ç‹ç‹¸ã€‚</p><p>å°å…”å­å°å£°å˜Ÿå›”ç€è¯´ï¼šâ€œé«˜å¤§é­æ¢§çš„å¤–è¡¨ä¸‹ï¼Œå´æ˜¯å‡¶å·´å·´çš„æ ·å­å‘¢â€</p><p>æ²¡æƒ³åˆ°è¿™å¥è¯è¢«å°ç‹ç‹¸å¬åˆ°äº†ï¼Œå°ç‹ç‹¸èµ°åˆ°å°å…”å­èº«è¾¹æ‹¦ä½äº†å¥¹ï¼Œè¿™æ—¶å€™å°å…”å­å¿ƒé‡Œå®³æ€•æäº†ï¼Œèº«ä¸Šçš„æ¯›å‘å°±ç‚¸å¼€äº†ä¼¼çš„ç‘Ÿç‘Ÿå‘æŠ–ç€è¯´ï¼šâ€œå°ç‹ç‹¸ï¼Œè¯·é—®ä½ æœ‰ä»€ä¹ˆäº‹æƒ…å—ï¼Ÿâ€</p><p>å°ç‹ç‹¸è¯´ï¼šâ€œæˆ‘åˆšæ‰å¬åˆ°ä½ è¯´æˆ‘å¾ˆå‡¶æ˜¯å—ï¼Ÿâ€</p><p>å°å…”å­æœ‰äº›ç´§å¼ çš„è¯´ï¼šâ€œæˆ‘â€¦â€¦æˆ‘æ²¡æœ‰ï¼Œä½ å¬é”™äº†ã€‚â€</p><p>å°ç‹ç‹¸è¯´ï¼šâ€œé‚£æˆ‘å¬é”™äº†ï¼Ÿè¯·é—®å°å…”å­æ˜¯å‡†å¤‡å»å“ªé‡Œå‘¢ï¼Ÿâ€</p><p>å°å…”å­è¯´ï¼šâ€œæˆ‘â€¦â€¦æˆ‘å»é€›è¡—ï¼Œæ²¡ä»€ä¹ˆäº‹æƒ…é‚£æˆ‘å°±å…ˆèµ°äº†â€</p><p>å°ç‹ç‹¸çœ‹åˆ°å°å…”å­çš„è„¸é¢Šå¾®å¾®æœ‰ä¸€ç‚¹æ³›çº¢ï¼Œå°±æ²¡æœ‰è¯´è¯ï¼Œçœ‹ç€å°å…”å­ç¦»å¼€çš„èƒŒå½±ï¼Œå°ç‹ç‹¸å™—å—¤çš„ç¬‘å‡ºäº†å£°ï¼Œè§‰å¾—è¿™ä½å°å…”å­æœ‰äº›å¯çˆ±ï¼Œå°±æ‚„æ‚„çš„è·Ÿåœ¨å¥¹èº«åï¼Œå°å…”å­å®Œå…¨æ²¡æœ‰å¯Ÿè§‰èº«åè¿˜æœ‰äººã€‚</p><p>å¤©ç©ºçªç„¶å˜æš—ï¼Œæœ‰äº›ä½æ²‰ï¼Œä¸ä¸€ä¼šå“—å•¦å“—å•¦çš„ä¸‹é›¨äº†ï¼Œå°å…”å­å‘ç°è‡ªå·±æ²¡æœ‰å¸¦ä¼ï¼Œå‡†å¤‡è·‘å›å®¶çš„æ—¶å€™ï¼Œå¥½åƒæ’åˆ°äº†ä»€ä¹ˆä¸œè¥¿ï¼Œè½¯è½¯çš„æš–æš–çš„ï¼ŒæŠ¬å¤´ä¸€çœ‹æ˜¯å°ç‹ç‹¸æ‰“ç€ä¼ä¿æŠ¤ç€è‡ªå·±ï¼Œå°å…”å­å‚»å‚»çš„æ„£ä½äº†ã€‚â˜”</p><p>å°å…”å­ä¸å¥½æ„æ€çš„çœ‹ç€å°ç‹ç‹¸å¯¹ä»–è¯´ï¼šâ€œå°ç‹ç‹¸ï¼Œä½ æ€ä¹ˆåœ¨è¿™é‡Œï¼Ÿâ€</p><p>å°ç‹ç‹¸ç¬‘ç€å¯¹å°å…”å­è¯´ï¼šâ€œä¸æ”¾å¿ƒä½ ï¼Œå°±è·Ÿè¿‡æ¥äº†â€</p><p>å°å…”å­å¬åˆ°å°ç‹ç‹¸è¿™ä¹ˆä¸€è¯´ï¼Œè„¸è›‹ç¬é—´åˆçº¢å½¤å½¤çš„äº†ï¼Œå¿ƒé‡Œæƒ³ç€ï¼šæ²¡æƒ³åˆ°å¹³æ—¶çœ‹èµ·æ¥å‡¶å·´å·´çš„å°ç‹ç‹¸ä¹Ÿä¼šæœ‰è¿™ä¹ˆæ¸©æŸ”çš„ä¸€é¢ï¼Œç®€ç›´ä¸å¯æ€è®®ï¼</p><p>å°å…”å­ä½ç€å¤´å°å£°çš„è¯´ï¼šâ€œä½ è¯¥ä¸ä¼šæ˜¯å–œæ¬¢æˆ‘å§ï¼â€</p><p>å°ç‹ç‹¸æŠŠä»–å¤§å¤§çš„æ‰‹æŒæ”¾åœ¨å°å…”å­æ¯›ç»’ç»’çš„è„‘è¢‹ä¸Šï¼Œè½»è½»çš„æŠšæ‘¸ç€ï¼Œå°å…”å­æœ‰äº›è¯§å¼‚ï¼Œè¿™æ—¶å€™è§å°ç‹ç‹¸å¼¯ä¸‹è…°ä½ç€å¤´åœ¨å°å…”å­çš„å·¦è€³è¾¹è½»è½»çš„è¯´äº†ä¸€å¥ï¼šâ€œæ˜¯å‘€ï¼Œæˆ‘å–œæ¬¢ä½ å¾ˆä¹…äº†â€</p><p>æ™šå®‰</p><h3 id="è¿½å‰§çš„å°ç‹ç‹¸"><a href="#è¿½å‰§çš„å°ç‹ç‹¸" class="headerlink" title="è¿½å‰§çš„å°ç‹ç‹¸"></a>è¿½å‰§çš„å°ç‹ç‹¸</h3><p>å°ç‹ç‹¸æœ€è¿‘è¿·ä¸Šä¸€éƒ¨å‰§ï¼Œæ•´æ—¥æŠ±ç€æ‰‹æœºçœ‹ä¸ªä¸åœã€‚è¿å°å…”å­çš„æ¶ˆæ¯æœ‰æ—¶å€™éƒ½ä¸å›å¤äº†ã€‚</p><p>æœ‰æ—¶å€™ï¼Œå°å…”å­å‘ä¸€æ¡æ¶ˆæ¯ï¼Œè¦ç­‰å¥½ä¹…æ‰ä¼šèƒ½å›ï¼Œå› ä¸ºè¿™ä¸ªï¼Œè¿˜è€½è¯¯äº†ä¸€äº›äº‹æƒ…ã€‚</p><p>è¿™å¯æŠŠå°å…”å­å§”å±ˆåäº†ï¼Œå°æ³ªä¸è‡ªè§‰çš„å°±æ»´ä¸‹æ¥äº†ã€‚æœ‰æ—¶å€™ä¸ç¦ä¼šæƒ³ï¼Œä»–æ˜¯ä¸æ˜¯ä¸çˆ±æˆ‘äº†?</p><p>è¿™å¤©ï¼Œä¸¤äººåœ¨ç”µè¯é‡Œäº’é“æ™šå®‰åï¼Œå°å…”å­å´æ€ä¹ˆä¹Ÿç¡ä¸ç€ï¼Œç¿»æ¥è¦†å»ï¼Œéš¾å—åäº†ã€‚</p><p>å¥¹è´´è¿‘æ‰‹æœºï¼Œçœ‹ç€éš”ç»ç€ä¸¤ä¸ªäººçš„æ‰‹æœºå±å¹•ï¼Œå¥¹å¯¹å°ç‹ç‹¸çš„æ€å¿µå†ä¸€æ¬¡æ¶Œä¸Šå¿ƒå¤´ã€‚</p><p>â€œå°ç‹ç‹¸ï¼Œ æˆ‘ç¡ä¸ç€ï¼Œæˆ‘å¥½æƒ³ä½ å•Šï¼Œä½ è¿™ä¸¤å¤©å›å¤æ¶ˆæ¯å¯æ…¢äº†ï¼Œä¹Ÿæœ‰äº›æ•·è¡ï¼Œæ˜¯ä¸æ˜¯å¼‚åœ°äº†ï¼Œä½ å°±ä¸çˆ±æˆ‘äº†ï¼Œå«Œæˆ‘çƒ¦äº†ã€‚</p><p>â€œä¸ä¼šä¸ä¼šå•Šï¼Œæˆ‘æœ€çˆ±çš„å°±æ˜¯ä½ å•Šï¼Œå®è´æ€ä¹ˆäº†ï¼Œæ€ä¹ˆç¡ä¸ç€?â€</p><p>å°ç‹ç‹¸çš„å£°éŸ³é€è¿‡æ‰‹æœºå±å¹•ä¼ è¿‡æ¥ï¼Œå–ƒå–ƒè‡ªè¯­çš„å°å…”å­è¢«å“åˆ°äº†:â€œä½ æ²¡ç¡å•Š?â€</p><p>â€˜æ²¡ã€‚å˜»å˜»å˜»ï¼Œæˆ‘çœ‹å‰§å‘¢ã€‚â€å°ç‹ç‹¸ç¬‘å˜»å˜»çš„å›å¤ï¼Œâ€œä½ å’‹äº†å®è´ï¼Œä¸ºä»€ä¹ˆç¡ä¸ç€?â€</p><p>â€œå“å‘€ï¼Œä½ æ€ä¹ˆæ¯”æˆ‘è¿˜ä¼šæ²‰è¿·è¿½å‰§å•Š!å†æ²‰è¿·ä¹Ÿä¸èƒ½ç†¬å¤œï¼Œå¯¹çœ¼ç›ä¸å¥½çš„ï¼Œä¹–ï¼Œå¿«æ”¾ä¸‹ï¼Œæ˜å¤©çœ‹ã€‚â€</p><p>å°å…”å­ä¹Ÿé¡¾ä¸ä¸Šè‡ªå·±çš„å§”å±ˆï¼Œæœ‰äº›æ—¶å€™ï¼Œé…å¶çš„äº‹å¯ä»¥å‹å€’è‡ªå·±çš„ä¸€åˆ‡ä¸è‰¯æƒ…ç»ªï¼Œçˆ±åœ¨è¿™ä¸€åˆ»ä½“ç°çš„æ·‹æ¼“å°½è‡´ã€‚</p><p>â€œå“ˆå“ˆå“ˆå¥½ï¼Œæˆ‘ä¹Ÿå¥½å›°å¥½å›°ï¼Œä¸€èµ·ç¡å§ã€‚â€</p><p>å†æ¬¡äº’å‘æ™šå®‰åï¼Œå°å…”å­è¿˜æ˜¯ç¡ä¸ç€ï¼Œä½†æ˜¯å°ç‹ç‹¸çš„æ‰“å‘¼å£°å´å·²ç»å‡ºæ¥äº†ï¼Œä»–æ˜¯çœŸçš„å¾ˆå›°å§ï¼Œè¿½å‰§éƒ½è¿½åˆ°åŠå¤œäº†ã€‚</p><p>å°å…”å­å¹äº†å£æ°”ï¼Œåˆšæƒ³è½¬èº«æ¢ä¸ªå§¿åŠ¿ä¼‘æ¯çš„æ—¶å€™ï¼Œå°ç‹ç‹¸çš„å£°éŸ³ä¼ äº†å‡ºæ¥ã€‚</p><p>â€œå°å…”å­ï¼Œå¯¹ä¸èµ·å•Šã€‚â€</p><p>å°å…”å­åˆä¸€æ¬¡è½¬å›äº†èº«ï¼Œä¸è¿‡è¿™æ¬¡å°ç‹ç‹¸çš„å£°éŸ³å¹¶ä¸æ˜¯åŸå£°ï¼Œè€Œæ›´åƒæ˜¯åœ¨è¯´æ¢¦è¯ã€‚</p><p>â€œæˆ‘è¿™å‡ å¤©å¤ªå–œæ¬¢é‚£éƒ¨å‰§äº†ï¼Œè€æ˜¯å†·è½ä½ ï¼Œæˆ‘ä¸æ˜¯æ•…æ„çš„å®è´ã€‚â€</p><p>ä½ ç­‰æˆ‘ï¼Œè¿™å‡ å¤©æ™šä¸Šæˆ‘èµ¶ç´§çœ‹å®Œï¼Œç»å¯¹ä¸ä¼šå†åƒä¹‹å‰ä¸€æ ·è‡ªç§å•¦ã€‚</p><p>çœ‹å“¥å“¥æˆ‘ï¼Œå†³æˆ˜åˆ°å¤©äº®!å‘¼å™œå’•å™œå’•å™œ~â€</p><p>å°å…”å­å™—å—¤ä¸€å£°ç¬‘äº†ï¼Œ å¿ƒé‡Œçš„å¤±è½ä¸€æ‰«è€Œç©ºï¼Œå†æ¬¡èººåœ¨åºŠä¸Šï¼Œè¿å˜´è§’éƒ½å¸¦ç€ç¬‘ã€‚ ï¸</p><p>ä»–è¿˜æ˜¯é‚£ä¸ªä»–ï¼Œä¸€æ ·å‚»ï¼Œä¸€æ ·çˆ±ç€æˆ‘!</p><p>è¿˜æƒ³èƒŒç€æˆ‘æ™šä¸Šè¿½å‰§ï¼Œæƒ³å¾—ç¾ï¼Œæœ¬å§‘å¨˜è¿˜è¦ä¸ºä½ å¥åº·è´Ÿè´£å‘¢ã€‚</p><p>æƒ³ç€æƒ³ç€ï¼Œå¥¹è¿›å…¥äº†æ¢¦ä¹¡ï¼Œæ¢¦é‡Œï¼Œæœ‰å±±ï¼Œæœ‰æ°´ï¼Œæœ‰ç”µè§†ï¼Œä¹Ÿæœ‰å°ç‹ç‹¸ï¼Œä»–ä»¬åœ¨ä¸€èµ·çœ‹é‚£éƒ¨å‰§ï¼Œä¸¤ä¸ªäººä¸€è¾¹è®¨è®ºå‰§æƒ…ï¼Œä¸€è¾¹å¬‰æˆæ‰“é—¹ï¼Œå…¶ä¹èèï¼Œå¹¸ç¦å¿«ä¹</p><p>æ™šå®‰</p><h3 id="è›‹ç³•"><a href="#è›‹ç³•" class="headerlink" title="è›‹ç³•"></a>è›‹ç³•</h3><p>å°å…”å­æœ€å–œæ¬¢åƒçš„é‚£å®¶è›‹ç³•åº—å€’é—­äº†ã€‚</p><p>å°å…”å­æƒ³ï¼Œè¦æ˜¯æˆ‘èƒ½å’Œè›‹ç³•å¸ˆå°ç‹ç‹¸å­¦ä¼šåšè›‹ç³•å°±å¥½äº†ã€‚å°å…”å­æ‰¾äº†å¥½ä¹…ï¼Œç»ˆäºæ‰¾åˆ°äº†å°ç‹ç‹¸çš„å®¶ã€‚å› ä¸ºå°å…”å­æ€»æ˜¯å»ä¹°è›‹ç³•ï¼Œ</p><p>æ‰€ä»¥å°ç‹ç‹¸ä¸€çœ¼å°±è®¤å‡ºäº†å¥¹</p><p>â€œæƒ³åƒè›‹ç³•äº†å˜›?â€</p><p>å°å…”å­ç‚¹ç‚¹å¤´ï¼Œä¸€æƒ³åˆ°å¥½åƒçš„è›‹ç³•,å°å…”å­ä¸ç¦èˆ”äº†èˆ”å˜´å”‡ã€‚</p><p>å°ç‹ç‹¸ç¬‘ç€å¸¦å°å…”å­æ¥åˆ°é¤å…ï¼Œ</p><p>æ‹¿å‡ºåˆšåˆšåšå¥½çš„è‰è“è›‹ç³•ç»™å°å…”å­åƒã€‚å°å…”å­æ‰åƒäº†ä¸€å£ï¼Œå°±å¿ä¸ä½è¿è¿ç§°èµã€‚â€œçœŸæ˜¯å¤ªå¥½åƒäº†!</p><p>â€œå°ç‹ç‹¸ï¼Œä½ å¯ä¸å¯ä»¥æ•™æ•™æˆ‘â€</p><p>â€œå—¯.ä½ æƒ³å­¦ä»€ä¹ˆ?â€</p><p>â€œéƒ½å¯ä»¥å‘€ã€‚â€</p><p>å°å…”å­æ‹„ç€è…®å¸®å­æƒ³äº†æƒ³</p><p>â€œé‚£ä½ å°±æ•™æˆ‘ä½ æœ€æ“…é•¿çš„å­~â€</p><p>å°ç‹ç‹¸æ•…ä½œæ²‰æ€äº†ä¸€ä¼š:</p><p>â€œé‚£ä¸æˆï¼Œæˆ‘æ€ä¹ˆèƒ½ç™½æ•™ä½ å‘¢?</p><p>å°å…”å­ä¹–ä¹–åœ°ä»å£è¢‹é‡Œæå‡ºä¸€æ ¹èƒ¡èåœé€’ç»™ä»–:</p><p>â€œå‘ï¼Œè¿™ä¸ªç»™ä½ ï¼Œå°±å½“åšæ˜¯æˆ‘çš„å­¦è´¹å•¦~ã€‚â€</p><p>ç¬¬ä¸€å¤©ï¼Œå°ç‹ç‹¸ç«¯ç»™å°å…”å­ä¸€ç›˜è½¯ç³¯ç³¯çš„è‰è“å¤§ç¦ï¼Œå°å…”å­æ‹¿äº†ä¸€ä¸ªç»™å°ç‹ç‹¸ï¼Œ</p><p>å°ç‹ç‹¸æ‘‡æ‘‡å¤´è¯´:â€œæˆ‘çœ‹ç€ä½ å°±é¥±äº†ã€‚</p><p>â€œä¸ºä»€ä¹ˆå‘€â€å°å…”å­é—®ï¼Œâ€œå› ä¸ºä½ ç§€è‰²å¯é¤å‘€</p><p>â€œå’¦ï¼Œè‚‰éº»â€è¯´ç€ï¼Œå°å…”å­ä¼¸å‡ºå°æ‹³å¤´ï¼Œé”¤äº†ä¸€ä¸‹å°ç‹ç‹¸ï¼Œç¬¬äºŒå¤©ï¼Œå°ç‹ç‹¸ç«¯ç€å’–å•¡æ¯èµ°åˆ°å°å…”å­é¢å‰â€œä½ èƒ½ä¸èƒ½å¯¹æˆ‘ç¬‘ä¸€ä¸‹å‘€?&#x2F;:coffee</p><p>å°å…”å­åšå‡ºäº†ä¸€ä¸ªå¤§å¤§çš„ç¬‘è„¸:â€œæ€ä¹ˆå•¦?â€</p><p>å°ç‹ç‹¸æŠ¿äº†ä¸€å£å’–å•¡â€œè¿™ä¸‹å¥½å¤šå•¦ï¼Œåˆšåˆšæˆ‘çš„å’–å•¡å¿˜è®°åŠ ç³–äº†â€å°å…”å­å˜Ÿäº†å˜Ÿå˜´æŠ„èµ·æ‰‹è¾¹çš„æŠ±æ•å˜²å°ç‹ç‹¸ä¸¢å»è„¸ç¡®ä¸è‡ªè§‰çš„çº¢äº†èµ·æ¥ã€‚</p><p>å°±è¿™æ ·è¿‡äº†ä¸€ä¸ªæ˜ŸæœŸï¼Œ</p><p>å°å…”å­æ‰å‘ç°ï¼Œè¿™å‡ å¤©è‡ªå·±æ ¹æœ¬å°±æ²¡å­¦ä¼šåšè›‹ç³•ï¼Œåå€’æ˜¯å­¦äº†ä¸å°‘åœŸå‘³æƒ…è¯ã€‚</p><p>å°å…”å­æ„Ÿè§‰è‡ªå·±è¢«è€äº†ï¼Œè¶Šæƒ³è¶Šæ°”ï¼Œäºæ˜¯æ€’æ°”å†²å†²åœ°è·‘åˆ°å°ç‹ç‹¸çš„å®¶é‡Œã€‚</p><p>å°ç‹ç‹¸ï¼Œä½ çœ‹ä½ è¿™å‡ å¤©éƒ½æ•™æˆ‘ä»€ä¹ˆäº†!</p><p>æˆ‘ä¸ºä»€ä¹ˆè¿˜æ˜¯ä¸ä¼šåšè›‹ç³•! â€œ</p><p>å°ç‹ç‹¸çœ‹ç€å°å…”å­æ°”é¼“é¼“çš„æ ·å­ï¼Œè„¸ä¸Šå¿ä¸ä½éœ²å‡ºäº†ç¬‘å®¹ã€‚</p><p>ä½ å±…ç„¶è¿˜ç¬‘! â€œ</p><p>å°å…”å­æ’…èµ·å˜´å·´ï¼Œè½¬è¿‡èº«èƒŒå¯¹ç€å°ç‹ç‹¸ã€‚</p><p>â€œä½ ä¸æ˜¯è®©æˆ‘æ•™ä½ æˆ‘æœ€æ“…é•¿çš„å—?â€</p><p>è¯´ç€ï¼Œå°ç‹ç‹¸èµ°è¿‘å°å…”å­ï¼Œä¼åœ¨å¥¹è€³è¾¹å°å£°åœ°è¯´ï¼Œ</p><p>â€œæˆ‘æœ€æ“…é•¿çš„å°±æ˜¯è®©ä½ å–œæ¬¢æˆ‘å•Šã€‚â€</p><p>â€œä½ !â€</p><p>å°å…”å­è½¬è¿‡èº«ï¼Œæœ¬æ¥æƒ³å¯¹å°ç‹ç‹¸å‘è„¾æ°”ï¼Œ</p><p>å¯å½“å¥¹çœ‹åˆ°å°ç‹ç‹¸çš„ä¸€ç¬é—´ï¼Œ</p><p>çªç„¶æ„Ÿè§‰è„¸ä¸Šæ»šçƒ«æ»šçƒ«çš„ï¼Œå¿ƒè„ä¹Ÿä¸€ç›´å™—é€šå™—é€šä¹±è·³ä¸æ­¢ã€‚</p><p>â€œå¯æ˜¯æˆ‘éƒ½äº¤äº†å­¦è´¹å•¦!ä½ å¿«æŠŠæˆ‘çš„èƒ¡èåœé€€æˆ‘!â€œé‚£å¯ä¸è¡Œï¼Œè¿™å¯æ˜¯ä½ ç»™æˆ‘çš„å®šæƒ…ä¿¡ç‰©ï¼Œè‡³äºåšè›‹ç³•å˜›â€¦ â€</p><p>å°ç‹ç‹¸è½»è½»æ‰äº†æ‰å°å…”å­çš„å°è„‘ç“œï¼Œ</p><p>â€œæˆ‘å°±æ˜¯ä¸æƒ³è®©ä½ å­¦ä¼šï¼Œè¿™æ ·æˆ‘å°±å¯ä»¥ç»™ä½ åšä¸€è¾ˆå­çš„è›‹ç³•äº†ã€‚â€</p><p>æ™šå®‰</p><h3 id="ç”œç”œçš„ç³–æœ"><a href="#ç”œç”œçš„ç³–æœ" class="headerlink" title="ç”œç”œçš„ç³–æœ"></a>ç”œç”œçš„ç³–æœ</h3><p>å°ç‹ç‹¸ç–²æƒ«åœ°å›åˆ°å®¶ï¼Œå‘ç°æ¡Œå­ä¸Šå·²ç»æ‘†æ»¡äº†é¥­èœã€‚å°å…”å­æ¸©æŸ”åœ°å¸®ä»–æ‹¿ç€æ¢ä¸‹çš„å¤–å¥—ã€‚çœ‹åˆ°è¿™ä¸€å¹•ï¼Œå°ç‹ç‹¸çš„å¿ƒéƒ½åŒ–äº†ã€‚</p><p>â€œå“‡ï¼Œçœ‹èµ·æ¥å¥½å¥½åƒå•Šã€‚â€å°ç‹ç‹¸å¹¸ç¦åœ°æ“äº†æ“æ‰‹ï¼Œè¯´é“ï¼Œâ€œå…ˆå°å“ªä¸ªå¥½å‘¢?â€</p><p>â€œè¿™ä¸ªå§ã€‚â€å°å…”å­å¤¹äº†ä¸€å—å„¿è‚‰æˆ‘é€’ç»™äº†å°ç‹ç‹¸ï¼Œâ€œå•Šï¼Œå¼ å˜´ã€‚</p><p>å°ç‹ç‹¸å¬è¯åœ°å¼ å¼€å˜´ï¼Œä¸€è„¸é™¶é†‰ï¼Œå¯åˆšåˆšå¼€å§‹å’€åš¼ï¼Œå°±å˜äº†è„¸è‰²ï¼Œâ€œè¿™ä»€ä¹ˆå•Šï¼Œ æ€ä¹ˆè¿™ä¹ˆè‹¦!</p><p>â€œå“ˆå“ˆå“ˆå“ˆå“ˆã€‚â€ çœ‹ç€èº«è¾¹çš„å°å…”å­ç¬‘å¾—èŠ±ææ‹›å±•ï¼Œå°ç‹ç‹¸å¾—çŸ¥è‡ªå·±ä¸­è®¡äº†ï¼Œâ€œå¥½å•Šè‡­å¦®å­ï¼Œç«Ÿæ•¢è€è€å…¬ã€‚çœ‹æˆ‘æ€ä¹ˆæƒ©ç½šä½ ã€‚â€</p><p>â€ç•¥ç•¥ç•¥ã€‚â€œå°å…”å­åäº†åèˆŒå¤´ï¼Œâ€ä¸è®¸è¯´æˆ‘åè¯ï¼Œæˆ‘ç»™ä½ å‡†å¤‡äº†ç³–æœå‘¢ã€‚</p><p>æ¥è¿‡é€’æ¥çš„ç³–æœï¼Œå°ç‹ç‹¸æ„£äº†ä¸€ç§’ï¼Œç„¶åç¬é—´å°†å…¶å¡åˆ°äº†å°å…”å­çš„å˜´é‡Œã€‚</p><p>â€å‘œå‘œå‘œï¼Œä½ å¹²å˜›?</p><p>â€å°‘åºŸè¯ã€‚â€œå°ç‹ç‹¸çš„å˜´å·´é‡é‡åœ°å»äº†ä¸Šå»ï¼Œç³–æœåœ¨ä¸¤äººçš„èˆŒå°–äº’ç›¸äº¤é€’ï¼Œå¾ˆå¿«å°±åŒ–å®Œäº†ã€‚ â€â¤ï¸â€</p><p>â€åè›‹ã€‚â€œå°å…”å­æ‘¸äº†æ‘¸å˜´å·´ï¼Œä¸€è„¸æ…æ€ªé“ï¼Œâ€ ç”œä¸ç”œ?â€œ</p><p>â€ç”œå•Šï¼Œä¸è¿‡å‘¢~â€œå°ç‹ç‹¸ä¸€è„¸åç¬‘ï¼Œâ€ä¸æ˜¯å› ä¸ºç³–æœç”œï¼Œè€Œæ˜¯å› ä¸ºå¿ƒç”œï¼Œè€Œå¿ƒç”œæ˜¯å› ä¸ºæˆ‘æ„Ÿå—åˆ°ä½ åœ¨é‡Œé¢ã€‚â€œ</p><p>â€å“¼ï¼Œæ²¹å˜´æ»‘èˆŒï¼Œå·§è¨€ä»¤è‰²!â€œ</p><p>å°ç‹ç‹¸æŠ±ä½å°å…”å­ï¼ŒåŒæ‰‹æŠšåœ¨å¥¹çš„èƒŒä¸Šï¼Œæ¸©æŸ”åœ°è¯´:â€è°¢è°¢ä½ çš„é¥­ï¼Œè°¢è°¢ä½ çš„ç”œèœœç³–æœã€‚æˆ‘çˆ±ä½ ã€‚</p><p>â€ç…½æƒ…æ€ªã€‚â€œå°å…”å­ä¹ŸæŠ±ä½äº†å°ç‹ç‹¸ï¼Œâ€æˆ‘ä¹Ÿçˆ±ä½ ã€‚â€œâ€</p><p>æ™šå®‰</p><h3 id="ä¹åä¹ä¸ªæ„¿æœ›"><a href="#ä¹åä¹ä¸ªæ„¿æœ›" class="headerlink" title="ä¹åä¹ä¸ªæ„¿æœ›"></a>ä¹åä¹ä¸ªæ„¿æœ›</h3><p>å°å…”å­ä»Šå¤©å¾ˆç”Ÿæ°”ï¼Œå› ä¸ºæ˜¨æ™šçš„å¤©æ°”é¢„æŠ¥æ˜æ˜è¯´äº†ä»Šå¤©ä¸ä¼šä¸‹é›¨ï¼Œå¯æ˜¯ç°åœ¨çš„é›¨å´ä¸‹ä¸ªä¸åœã€‚</p><p>è€Œå°å…”å­ä¹Ÿæ²¡å¸¦ä¼ï¼Œåªèƒ½æ·‹ç€å¤§é›¨èµ°å›å®¶äº†ã€‚ ï¸</p><p>ä¸€å›åˆ°å®¶å°å…”å­å°±æ‹¿å‡ºçº¸å’Œç¬”ï¼Œåˆ—å‡ºäº†è‡ªå·±çš„ä¹åä¹ä¸ªæ„¿æœ›ï¼Œå¥¹è§‰å¾—è¿™ä¸ªä¸–ç•ŒçœŸæ˜¯ç³Ÿç³•é€äº†ï¼Œå¥¹æƒ³ï¼Œç­‰è‡ªå·±å®Œæˆäº†ä¹åä¹ä¸ªæ„¿æœ›ç„¶åå°±å»æ­»ã€‚âœ¨</p><p>ä¸çŸ¥ä¸è§‰çš„ï¼Œå°å…”å­å°±å·²ç»å®Œæˆäº†ä¹åå…«ä¸ªæ„¿æœ›ã€‚</p><p>è€Œå¥¹çš„æœ€åä¸€ä¸ªæ„¿æœ›å°±æ˜¯æ‰¾ä¸€åªå¸…æ°”çš„ç‹ç‹¸æŠŠè‡ªå·±åƒæ‰ã€‚</p><p>å°å…”å­å°±åœ¨æ£®æ—é‡Œæ‰¾å•Šæ‰¾ï¼Œç»ˆäºæ‰¾åˆ°äº†ä¸€åªç‹ç‹¸ï¼Œå¥¹å‘èª“ï¼Œè¿™æ˜¯å¥¹è§è¿‡çš„æœ€å¸…æ°”ï¼Œæœ€å¯çˆ±çš„ç‹ç‹¸ã€‚</p><p>â€œç‹ç‹¸å…ˆç”Ÿï¼Œä½ æ„¿æ„åƒæ‰æˆ‘å—?</p><p>â€œå¥½å•Š!ä½†æ˜¯ä½ è¦ç­”åº”æˆ‘ï¼Œå…ˆå¸®æˆ‘å®Œæˆæˆ‘çš„ä¹åä¹ä¸ªæ„¿æœ›ã€‚â€</p><p>å°å…”å­åŒæ„äº†ï¼Œå› ä¸ºå¥¹è§‰å¾—å†ä¹Ÿæ‰¾ä¸åˆ°æ¯”è¿™åªç‹ç‹¸æ›´å¸…æ°”çš„äº†ã€‚</p><p>å¯æ˜¯å°ç‹ç‹¸çš„æ„¿æœ›å®åœ¨æ˜¯å¤ªç®€å•äº†ï¼Œä¸æ˜¯è®©å°å…”å­é™ªç€ä»–çœ‹æ˜Ÿæ˜Ÿï¼Œå°±æ˜¯è®©å°å…”å­ç»™ä»–å”±é¦–æ­Œæˆ–è€…åšä¸€é¡¿é¥­ï¼Œæœ€éš¾çš„æ„¿æœ›ä¹Ÿå°±æ˜¯å½“ä»–ä¸€å¤©çš„å¥³æœ‹å‹ã€‚</p><p>äºæ˜¯å°å…”å­å°±è¿™æ ·å¸®åŠ©å°ç‹ç‹¸å®Œæˆäº†å¥½å¤šæ„¿æœ›ï¼Œå¤šåˆ°è‡ªå·±éƒ½å·²ç»è®°ä¸å¾—æ˜¯ç¬¬å¤šå°‘ä¸ªäº†ã€‚</p><p>ç»ˆäºæœ‰ä¸€å¤©ï¼Œå°ç‹ç‹¸å¯¹å°å…”å­</p><p>è¯´:â€œ ä»Šå¤©ä½ è¦å¸®æˆ‘å®ç°ç¬¬ä¹åå…«ä¸ªæ„¿æœ›å“¦ï¼Œâ€</p><p>å°å…”å­æœ‰ç‚¹ä¸é«˜å…´ï¼Œå¥¹æ²¡æƒ³åˆ°å°ç‹ç‹¸çš„æ„¿æœ›è¿™ä¹ˆå¿«å°±è¦å…¨éƒ¨éƒ½å®ç°äº†ã€‚</p><p>è€Œå¥¹ç°åœ¨å·²ç»ä¸æƒ³å»æ­»äº†ã€‚</p><p>æ¯å¤©å’Œå°ç‹ç‹¸åœ¨ä¸€èµ·ï¼Œå¥¹è§‰å¾—è¿™ä¸ªä¸–ç•Œå…¶å®ä¹Ÿæ²¡æœ‰é‚£ä¹ˆç³Ÿç³•ï¼Œ</p><p>å¥¹ç”šè‡³æœ‰ä¸€ç‚¹å–œæ¬¢å°ç‹ç‹¸äº†ã€‚</p><p>è™½ç„¶æœ‰ä¸€äº›ä¸èˆï¼Œé©¬ä¸Šå°±è¦è¢«å°ç‹ç‹¸åƒæ‰äº†ï¼Œä½†æ˜¯å°å…”å­è¿˜æ˜¯è¯´:â€œå¥½å‘€â€¦.</p><p>å°ç‹ç‹¸ç¬‘äº†ï¼Œä»–è¯´:â€œæˆ‘çš„ç¬¬ä¹åå…«ä¸ªæ„¿æœ›å°±æ˜¯è¦å‘Šè¯‰å‚»å…”å­ä¸€ä¸ªå°ç§˜å¯†ã€‚â€ãŠ™ï¸</p><p>å°å…”å­çŸ¥é“ä»–è¯´çš„å‚»å…”å­å°±æ˜¯è‡ªå·±ï¼Œäºæ˜¯å¥¹è¯´:â€œä½ è¯´å§ã€‚â€</p><p>å°ç‹ç‹¸å‡‘åˆ°å¥¹çš„è€³è¾¹ï¼Œæ…¢æ…¢çš„è¯´:â€œå…¶å®ï¼Œæˆ‘ä¸€ç›´éƒ½æ˜¯åƒç´ çš„ã€‚â€</p><p>å°ç‹ç‹¸åœé¡¿äº†ä¸€ä¸‹ï¼Œç„¶åæ¥ç€è¯´:â€œæˆ‘çš„ç¬¬ä¹åä¹ä¸ªæ„¿æœ›å°±æ˜¯å¸Œæœ›ä½ æ°¸è¿œåœ¨æˆ‘èº«è¾¹ã€‚</p><p>æ™šå®‰</p><h3 id="å¼‚åœ°å¾ˆéš¾ï¼Œä½†æ˜¯çˆ±æƒ…å¾ˆç”œ"><a href="#å¼‚åœ°å¾ˆéš¾ï¼Œä½†æ˜¯çˆ±æƒ…å¾ˆç”œ" class="headerlink" title="å¼‚åœ°å¾ˆéš¾ï¼Œä½†æ˜¯çˆ±æƒ…å¾ˆç”œ"></a>å¼‚åœ°å¾ˆéš¾ï¼Œä½†æ˜¯çˆ±æƒ…å¾ˆç”œ</h3><p>ä½åœ¨æ£®æ—æœ€å—è¾¹çš„å°ç‹ç‹¸å’Œä½åœ¨å°æ²³è¾¹çš„å°å…”å­åœ¨ä¸€èµ·äº†ã€‚</p><p>æœ€è¿‘æ£®æ—é‡Œåˆ°å¤„éƒ½åœ¨æµä¼ ç€è¿™ä¸ªé‡ç£…æ–°é—»ã€‚</p><p>ç„¶è€Œè¿™åœºè·¨è¶Šç§æ—çš„å¼‚åœ°æ‹ï¼Œåœ¨æ‰€æœ‰äººçœ‹æ¥éƒ½åªæ˜¯ä¸€ä¸ªå™±å¤´ç½¢äº†ã€‚</p><p>å°å…”å­æ˜¯æ£®æ—ç”µè§†å°çš„å¤§æ˜æ˜Ÿï¼Œå–œæ¬¢å¥¹çš„äººèƒ½ä»æ£®æ—çš„åŒ—è¾¹æ’åˆ°æœ€å—è¾¹ï¼Œç„¶åå†ç»•å›æ¥ã€‚</p><p>å°ç‹ç‹¸å‘¢æ˜¯æ£®æ—é‡Œæœ€å¤§çš„èƒ¡èåœç½å¤´åˆ¶é€ å•†ï¼Œå®¶é‡Œçš„è´¢äº§è¶³ä»¥æ’¼åŠ¨æ•´ä¸ªæ£®æ—ã€‚</p><p>æ‰€ä»¥å¤§å¤šæ•°çš„äººéƒ½è®¤ä¸ºè¿™åªæ˜¯ä¸€åœºåˆ©ç›Šçš„ç»“åˆã€‚</p><p>å…¶å®ï¼Œåªæœ‰å°ç‹ç‹¸å’Œå°å…”å­æ‰çŸ¥é“ï¼Œ</p><p>è¿™åœºä¸è¢«åˆ«äººçœ‹å¥½çš„å¼‚åœ°æ‹ï¼Œæœ‰å¤šéš¾ï¼Œåˆæœ‰å¤šç”œã€‚â£ï¸</p><p>å°ç‹ç‹¸æ€»æ˜¯å¾ˆå¿™ï¼Œå› ä¸ºå®¶é‡Œçš„å·¥å‚éƒ½éœ€è¦è‡ªå·±æ‰“ç†ã€‚</p><p>å°å…”å­è¿™è¾¹å‘¢ä¹Ÿä¸è½»æ¾ï¼Œæ¯å¤©éƒ½æœ‰æ‹ä¸å®Œçš„æˆã€‚</p><p>å¯æ˜¯è°èƒ½æƒ³åˆ°å¤–è¡¨é«˜å†·çš„å°ç‹ç‹¸ï¼Œåœ¨å’Œå°å…”å­çš„äº¤å¾€è¿‡ç¨‹ä¸­ï¼Œä¹Ÿä¼šæœ‰å‚»å‚»ç”œç”œçš„ä¸€é¢å‘¢ã€‚</p><p>â€œæ»¡è„‘å­éƒ½æ˜¯ä½ ã€‚â€</p><p>â€œå¯æ˜¯èƒ½æ€ä¹ˆåŠå‘¢ã€‚â€</p><p>â€œåˆä¸èƒ½æŠŠè„‘å­ä¸¢æ‰ã€‚â€</p><p>(æ¥è‡ªå°ç‹ç‹¸å‚»å‚»çš„èŠå¤©è®°å½•)</p><p>åªæœ‰å°å…”å­è§è¿‡å°ç‹ç‹¸å‚»ä¹ä¹çš„æ¨¡æ ·ï¼Œ</p><p>ä¹Ÿåªæœ‰å°å…”å­ï¼Œæ‰èƒ½è®©å°ç‹ç‹¸å˜å¾—è¿™æ ·å‚»ä¹ä¹çš„ã€‚</p><p>éš¾å¾—æœ‰æ—¶é—´ç›¸èšçš„æ—¶å€™ï¼Œå°å…”å­ä¼šæ‹‰ç€å°ç‹ç‹¸ä¸€èµ·èººåœ¨åºŠä¸Šçœ‹ç”µå½±ã€‚</p><p>ç»“æœå°å…”å­çœ‹ç€çœ‹ç€ç¡ç€äº†ï¼Œè¿·è¿·ç³Šç³Šçš„ç¿»äº†ä¸ªèº«ã€‚å°ç‹ç‹¸ç«‹åˆ»ç´§å¼ çš„å¸®å¥¹æŒ¡ä½å³è¾¹åºŠå¤´ç¯çš„å…‰ã€‚</p><p>é‚£ä¸€-åˆ»ï¼Œå°å…”å­é€‰æ‹©ç»§ç»­è£…ç¡ï¼Œç„¶ååœ¨å°ç‹ç‹¸è½¬èº«ç»§ç»­çœ‹ç”µå½±çš„æ—¶å€™ï¼Œèº²åœ¨è¢«å­é‡Œé¢å·ç¬‘ã€‚</p><p>æ»¡çœ¼éƒ½æ˜¯è‡ªå·±çš„å°ç‹ç‹¸ï¼Œæ€èƒ½ä¸è®©å°å…”å­å¿ƒåŠ¨å‘¢ã€‚</p><p>â€œæœ€è¿‘ç‰™ç—›ï¼Œå› ä¸ºå¸¸å¸¸æ™šä¸Šæƒ³ä½ ï¼Œæ„Ÿè§‰å¤ªç”œèœœï¼Œéƒ½é•¿è›€ç‰™äº†ã€‚â€</p><p>â€œä½ æ˜¯æˆ‘çš„å®è´ï¼Œæ˜¯æˆ‘çš„æœ€çˆ±ï¼Œä¹Ÿæ˜¯é™ªæˆ‘åˆ°è€çš„äººã€‚â€(æ¥è‡ªå°å…”å­ç”œåˆ°è…»çš„èŠå¤©è®°å½•)</p><p>è™½ç„¶å¼‚åœ°å¾ˆéš¾ï¼Œä½†æ˜¯çˆ±æƒ…å¾ˆç”œå‘€ï¼Œæ‰€æœ‰çš„æœŸå¾…éƒ½æ˜¯å€¼å¾—çš„ã€‚</p><p>æ™šå®‰</p><h3 id="çŒœå¯¹äº†æˆ‘å°±è®©ä½ äº²ä¸€å£"><a href="#çŒœå¯¹äº†æˆ‘å°±è®©ä½ äº²ä¸€å£" class="headerlink" title="çŒœå¯¹äº†æˆ‘å°±è®©ä½ äº²ä¸€å£"></a>çŒœå¯¹äº†æˆ‘å°±è®©ä½ äº²ä¸€å£</h3><p>â€œå¦‚æœä½ èƒ½çŒœåˆ°æˆ‘ç°åœ¨åœ¨æƒ³ä»€ä¹ˆï¼Œæˆ‘å°±è®©ä½ äº²ä¸€å£ã€‚â€</p><p>å°å…”å­ä¸€è„¸å‚²å¨‡çš„çœ‹ç€è‡ªå·±é¢å‰æ­£åœ¨æ‹–åœ°çš„å°ç‹ç‹¸ã€‚</p><p>å¾®å¾®çœ¯èµ·çš„çœ¼ç›é‡Œå…¨æ˜¯è—ä¸ä½çš„ç‹¡é» ,å¯çˆ±çš„ä¸‰ç“£å˜´æŠ¿å‡ºäº†ä¸¤é“å¾—æ„çš„å¼§çº¿ã€‚</p><p>è¿™æ ·å­ä¹Ÿå¤ªå¯çˆ±äº†å§!</p><p>å·ç¬‘æ—¶çš„è¡¨æƒ…å°±å’Œå¥¹åˆšå·åƒå®Œç³–å´çŸ¢å£å¦è®¤çš„æ—¶å€™ä¸€æ¨¡ä¸€æ ·ã€‚</p><p>å…¶å®å˜´è§’ä¸Šçš„ç³–æ¸éƒ½è¿˜æ²¡æ“¦æ‰å‘¢ã€‚</p><p>å¤©åº•ä¸‹æ€ä¹ˆä¼šæœ‰åƒæˆ‘å®¶å°å…”å­è¿™æ ·å¯çˆ±çš„ç”Ÿç‰©å‘¢ã€‚å°ç‹ç‹¸å¿ƒæƒ³ã€‚</p><p>â€œä½ è‚¯å®šæ˜¯åœ¨æƒ³æ˜¨å¤©æˆ‘ä»¬åœ¨å…¬å›­é‡Œä¹°åˆ°çš„æ£‰èŠ±ç³–ï¼Œè¿˜æ˜¯èƒ¡èåœå‘³çš„å‘¢ã€‚</p><p>å°ç‹ç‹¸è£…ä½œåœ¨è®¤çœŸæ€è€ƒçš„æ ·å­ï¼Œç„¶åå›ç­”é“ã€‚</p><p>â€œä¸å¯¹ä¸å¯¹ï¼Œä½ å†çŒœçŒœã€‚â€</p><p>â€œé‚£éš¾é“æ˜¯è‰è“å‘³çš„è›‹ç³•?â€</p><p>â€œä¸æ˜¯å•¦ï¼Œä½ å†çŒœçŒœçœ‹ã€‚â€</p><p>å°ç‹ç‹¸å¤´ä¸€æ­ªï¼Œä¼¸å‡ºçˆªå­æŒ äº†æŒ å¤´ï¼Œé‚£æ ·å­åƒæäº†çˆ±å› æ–¯å¦æ€è€ƒæ—¶å€™çš„æ ·å­ã€‚</p><p>â€œæˆ‘çŸ¥é“äº†!è‚¯å®šæ˜¯é‚£ä»¶é•¿äº†ä¸€ä¸ªç²‰è‰²è´è¶ç»“çš„å°è£™å­ï¼Œä½ æ˜¨å¤©æŠ±ç€å¥¹è·³äº†ä¸€å¤©å‘¢ã€‚â€</p><p>â€œè¿˜æ˜¯ä¸å¯¹!ä½ æ€ä¹ˆè¿™ä¹ˆç¬¨å‘¢ï¼Œå“å‘€ã€‚â€</p><p>å°å…”å­ä¸é«˜å…´çš„å˜Ÿèµ·äº†å˜´å·´ï¼Œæˆ‘å®¶å°ç‹ç‹¸æ€ä¹ˆå¥½åƒä¸å¤ªèªæ˜çš„æ ·å­ã€‚</p><p>â€œæœ€åä¸€æ¬¡æœºä¼šï¼Œè¦æ˜¯å†çŒœä¸å¯¹ä»Šæ™šå°±æ²¡æœ‰äº²äº²äº†ã€‚â€</p><p>â€œå•Šä¸è¡Œï¼Œ è¦ä¸ä½ ç»™ç‚¹æç¤º?â€</p><p>å°å…”å­çš„æ ·å­å®åœ¨æ˜¯å¤ªå¯çˆ±äº†ï¼Œå°ç‹ç‹¸è€æ˜¯å¿ä¸ä½æƒ³ç¬‘ã€‚ â˜ºï¸</p><p>åªå¥½æ‚„æ‚„åœ°æŠ¬èµ·å°çˆªå­ï¼ŒæŒ‰ä½è‡ªå·±å¾®å¾®ç¿˜èµ·çš„å˜´è§’ï¼Œç»§ç»­è£…ä½œç–‘æƒ‘æ²‰æ€çš„æ ·å­ã€‚</p><p>â€œç¬¨æ­»äº†ï¼Œå¥½å§å¥½å§ï¼Œé‚£å°±ç»™ä½ ç‚¹æç¤ºå¥½äº†ã€‚â€</p><p>å°å…”å­ä¸é«˜å…´çš„é¼“èµ·äº†è…®å¸®å­ï¼Œå˜Ÿç€å°å˜´å·´å˜Ÿå˜Ÿåš·åš·çš„è¯´é“:</p><p>â€œæç¤ºå°±æ˜¯ï¼Œæ™šå®‰â€¦.â€</p><p>è¿˜æ²¡ç­‰å°å…”å­è¯´å®Œå‘¢ï¼Œå°ç‹ç‹¸å°±çªç„¶æ¬ºèº«å‹äº†è¿‡æ¥ã€‚</p><p>æŠŠå°å…”å­å£å’šåœ¨äº†å¢™è§’ï¼Œç„¶åä½ä¸‹å¤´è½»è½»åœ°å»åœ¨äº†å°å…”å­çš„å°å˜´å”‡ä¸Šã€‚</p><p>â€œä½ æƒ³è¦æ™šå®‰å»å¯¹å§ï¼Œå°ç¬¨è›‹ã€‚â€</p><p>æ™šå®‰</p><h3 id="æˆ‘åœ¨ç­‰é£ï¼Œä¹Ÿåœ¨ç­‰ä½ "><a href="#æˆ‘åœ¨ç­‰é£ï¼Œä¹Ÿåœ¨ç­‰ä½ " class="headerlink" title="æˆ‘åœ¨ç­‰é£ï¼Œä¹Ÿåœ¨ç­‰ä½ "></a>æˆ‘åœ¨ç­‰é£ï¼Œä¹Ÿåœ¨ç­‰ä½ </h3><p>å°ç‹ç‹¸å¾—äº†ä¸€ç§å¾ˆå¥‡æ€ªçš„ç—…ï¼Œç¬¬ä¸€å¤©å‘ç”Ÿçš„ä»»ä½•äº‹æƒ…ï¼Œåˆ°äº†ç¬¬äºŒå¤©å°±ä¼šå…¨éƒ¨å¿˜è®°ã€‚</p><p>æ‰€ä»¥ä»–æ²¡æœ‰æœ‹å‹ï¼Œåªèƒ½ç‹¬è‡ªååœ¨å¤•é˜³ä¸‹ï¼Œé™é™çš„ç­‰å¾…ç€å±äºè¿™ä¸€-å¤©çš„è®°å¿†æ¸æ¸æ¶ˆå¤±ï¼Œç„¶åè¿æ¥ç¬¬äºŒå¤©çš„ç©ºç™½çš„è®°å¿†ã€‚</p><p>å°å…”å­è¿™å¤©è¹¦è¹¦è·³è·³çš„å»æ‹”èƒ¡èåœï¼Œç¢°å·§é‡åˆ°äº†åœ¨å¤•é˜³ä¸‹çš„å°ç‹ç‹¸ï¼Œå°ç‹ç‹¸çš„èº«å½±è¢«å¤•é˜³ç¬¼ç½©ï¼Œç«Ÿæ˜¾å¾—ååˆ†è½å¯ã€‚â˜€ï¸</p><p>â€œå°ç‹ç‹¸?ä½ åœ¨çœ‹ä»€ä¹ˆå‘€?â€å°å…”å­å¹¶ä¸çŸ¥é“å°ç‹ç‹¸çš„ç—…ç—‡ï¼Œå¥½å¥‡çš„çç€å¤§çœ¼ç›é—®åˆ°ã€‚</p><p>å°ç‹ç‹¸è½¬è¿‡å¤´ï¼Œçœ‹åˆ°èº«æ—çš„å°å…”å­ï¼Œçœ¼ç¥çªç„¶äº®äº†ä¸€ä¸‹ï¼Œå´åˆåœ¨-ç¬é—´ç°æš—ä¸‹æ¥ã€‚</p><p>ä»–æ‘‡äº†æ‘‡å¤´ï¼Œæ²‰é»˜äº†ä¸€ä¼šï¼Œåˆçªç„¶å¼€å£:â€œæˆ‘åœ¨ç­‰é£æ¥!â€</p><p>å°ç‹ç‹¸ä¼¼ä¹å¾ˆä¹…æ²¡æœ‰è¯´è¯äº†ï¼Œå£°éŸ³æœ‰ä¸€ä¸æ²™å“‘ã€‚</p><p>â€œå¥½æ–‡è‰ºï¼Œå¥½é«˜å†·ï¼Œå¥½å¸…æ°”çš„ç‹ç‹¸å‘€ï¼Œå°å…”å­å¿ƒé‡Œæƒ³ç€ï¼Œå¹¶ä»èº«åæ‹¿å‡ºäº†ä¸€æ ¹èƒ¡èåœï¼Œé€’ç»™å°ç‹ç‹¸ã€‚â€œä»ä»Šä»¥åæˆ‘ä»¬å°±æ˜¯æœ‹å‹å•¦ï¼Œè¿™æ ¹èƒ¡èåœå°±å½“åšè§é¢ç¤¼é€ç»™ä½ å§ã€‚â€</p><p>å°ç‹ç‹¸çœ‹ç€æ‰‹ä¸­çš„èƒ¡èåœï¼Œå¥½ç¬‘çš„åŒæ—¶å¿ƒä¸­ç«äº§ç”Ÿäº†ä¸€ä¸æ³¢åŠ¨ã€‚</p><p>ä½†ä»–çŸ¥é“ï¼Œç¬¬äºŒå¤©ï¼Œä»–å°†ä¸ä¼šè®°å¾—æœ‰è¿™æ ·ä¸€åªå°å…”å­æ›¾ç»æ¥è¿‡ã€‚</p><p>ç¬¬äºŒå¤©ï¼Œå°å…”å­ç‰¹æ„ç»•äº†ä¸ªè·¯ï¼Œè·‘åˆ°äº†ç‹ç‹¸é¢å‰ã€‚â€œå—¨ï¼Œå°ç‹ç‹¸ï¼Œæˆ‘åˆæ¥å•¦ï¼Œä½ è¿˜è®°å¾—æˆ‘å—?</p><p>â€œä½ æ˜¯è°?æˆ‘ä»¬è®¤è¯†å—?â€å°ç‹ç‹¸ä¸€è„¸å†·æ¼ çš„çœ‹ç€å°å…”å­ã€‚</p><p>å°å…”å­æ„Ÿåˆ°ååˆ†å—ä¼¤ï¼Œå“­ç€è·‘å›äº†å®¶ä¸­ã€‚</p><p>å¥¹è§‰å¾—å°ç‹ç‹¸ä¸€ç‚¹ä¹Ÿä¸å¸…æ°”ã€ä¸æ–‡è‰ºäº†ï¼Œç”šè‡³è¿˜å¾ˆæ— æƒ…ã€‚</p><p>ç„¶è€Œè¿™å¤©ï¼Œå°å…”å­è€·æ‹‰ç€è„‘è¢‹èµ°åœ¨æ£®æ—é‡Œï¼Œæ°å¥½å¬åˆ°äº†æ ‘ä¸Šçš„é¸Ÿå„¿è°ˆåˆ°äº†å…³äºå°ç‹ç‹¸çš„ç—…ï¼Œæ‰çŸ¥é“ï¼Œè‡ªå·±å†¤æ‰äº†ä»–ã€‚</p><p>äºæ˜¯ï¼Œå¥¹é£å¥”åˆ°å°ç‹ç‹¸é¢å‰ï¼Œæ°”å–˜ååçš„è¯´é“ã€‚â€œå°ç‹ç‹¸ï¼Œä½ åœ¨çœ‹ä»€ä¹ˆå‘€?â€</p><p>â€œæˆ‘åœ¨ç­‰é£æ¥ã€‚â€æ„æ–™ä¹‹ä¸­çš„å›ç­”è®©å°å…”å­æ›´åŠ ç¡®å®šå°ç‹ç‹¸çš„ç¡®æ˜¯å¤±å¿†äº†ã€‚</p><p>å°å…”å­åˆä»èƒŒåæ‹¿å‡ºä¸€æ ¹èƒ¡èåœé€’ç»™å°ç‹ç‹¸ã€‚</p><p>â€œé‚£ä»¥åæˆ‘ä»¬å°±æ˜¯æœ‹å‹å•¦ï¼Œè¿™æ ¹èƒ¡èåœå°±å½“åšè§é¢ç¤¼é€ç»™ä½ å§!â€</p><p>ç¬¬ä¸‰å¤©ï¼Œç¬¬å››å¤©ï¼Œå°ç™½å…”è¿˜æ˜¯åŒæ ·çš„é—®é¢˜ï¼Œè¿˜æ˜¯åŒæ ·é€’ç»™å°ç‹ç‹¸ä¸€æ ¹èƒ¡èåœï¼Œå¥¹ç›¸ä¿¡ï¼Œåªè¦æ—¥å¤ä¸€æ—¥ï¼Œå°ç‹ç‹¸-å®šä¼šæŠŠå¥¹è®°ä½çš„ã€‚</p><p>åˆ°é‚£ä¸ªæ—¶å€™ï¼Œå°±å»å‘ä»–è¡¨ç™½ã€‚å°å…”å­åœ¨å¿ƒé‡Œå·ç¬‘ã€‚</p><p>å¯æ˜¯äº‹æƒ…å¹¶æ²¡æœ‰å‘å°å…”å­æƒ³çš„æ–¹å‘å‘å±•ã€‚</p><p>åœ¨å°å…”å­æ— æ•°æ¬¡æœŸå¾…çš„çœ¼ç¥ä¸­ï¼Œå°ç‹ç‹¸è¿˜æ˜¯åŒæ ·å†·æ¼ çš„å›ç­”ï¼Œè¿˜æ˜¯æ²¡æœ‰è®°èµ·å¥¹æ¥ï¼Œåªæ˜¯ä¸€è„¸èŒ«ç„¶çš„çœ‹ç€èº«æ—ä¸€å †çš„èƒ¡èåœï¼Œä¸çŸ¥æ‰€æªã€‚</p><p>å°å…”å­æœ‰äº›ç»æœ›äº†ï¼Œå¥¹æ‹–ç€æ²‰é‡çš„æ­¥ä¼å»æ‰¾å°ç‹ç‹¸ã€‚</p><p>ä»Šå¤©æ˜¯æœ€åä¸€æ¬¡æ¥æ‰¾å°ç‹ç‹¸äº†ï¼Œå¦‚æœå°ç‹ç‹¸ä»Šå¤©è¿˜æ˜¯æ²¡æœ‰è®¤å‡ºå¥¹æ¥ï¼Œå¥¹å°±ä¸ä¼šå†æ¥äº†ã€‚</p><p>â€œç‹ç‹¸å…ˆç”Ÿ?ä½ åœ¨çœ‹ä»€ä¹ˆ?â€å°å…”å­å°å¿ƒç¿¼ç¿¼çš„é—®åˆ°ã€‚</p><p>â€œæˆ‘åœ¨ç­‰é£..â€</p><p>å°å…”å­ç´§å¼ çš„æ‚ä½äº†è€³æœµé—­ä¸ŠåŒçœ¼ï¼Œå¥¹ä¸æƒ³å†å¬åˆ°åŒæ ·çš„ç­”æ¡ˆäº†ã€‚</p><p>â€œæˆ‘åœ¨ç­‰é£ï¼Œä¹Ÿåœ¨ç­‰ä½ å•Šï¼Œç¬¨è›‹ã€‚</p><p>å°å…”å­çå¼€çœ¼ç›ï¼Œå°ç‹ç‹¸æ”¾å¤§çš„è„¸åºå°±åœ¨å¥¹çš„çœ¼å‰ã€‚</p><p>æ™šå®‰</p><h3 id="ä½ æ°¸è¿œéƒ½æ˜¯æˆ‘çš„å°æœ‹å‹"><a href="#ä½ æ°¸è¿œéƒ½æ˜¯æˆ‘çš„å°æœ‹å‹" class="headerlink" title="ä½ æ°¸è¿œéƒ½æ˜¯æˆ‘çš„å°æœ‹å‹"></a>ä½ æ°¸è¿œéƒ½æ˜¯æˆ‘çš„å°æœ‹å‹</h3><p>å°é•‡ä¸Šå·²ç»æœ‰å¾ˆå¤šåŠ¨ç‰©çš„å¦ˆå¦ˆå¯¹ç‹ç‹¸å…ˆç”Ÿéå¸¸æœ‰æ„è§ï¼Œæ’ç€é˜Ÿçš„å»æ‰¾ç‹ç‹¸å°å§å‘ŠçŠ¶ï¼Œè¯´å¥¹çš„ä¸ˆå¤«è€æ˜¯å’Œå°æœ‹å‹ä»¬æŠ¢ä¸œè¥¿ï¼Œä¸€ç‚¹å„¿ä¹Ÿä¸æ‡‚å¾—è¿è®©å°æœ‹å‹ä»¬ï¼Œç»å¸¸æ€§çš„æƒ¹å°æœ‹å‹åšå••å¤§å“­ã€‚</p><p>ç‹ç‹¸å°å§è‚¯å®šæ˜¯ä¸ç›¸ä¿¡çš„ï¼Œåœ¨å¥¹çš„çœ¼é‡Œç‹ç‹¸å…ˆç”Ÿæ˜æ˜å°±æ˜¯ä¸€ä¸ªå½¬å½¬æœ‰ç¤¼çš„å¥½ç‹ç‹¸ï¼Œä½†è¿˜æ˜¯è€ç€æ€§å­å¬å…¶ä»–åŠ¨ç‰©å¦ˆå¦ˆåæ§½è¯‰è‹¦ï¼Œæƒ³ç€ç­‰ä»–å›å®¶åå†é—®é—®æ˜¯æ€ä¹ˆå›äº‹ã€‚</p><p>å‚æ™šæ—¶åˆ†ï¼Œç‹ç‹¸å…ˆç”Ÿå›æ¥äº†ï¼Œè¿˜å¸¦ç€ç‹ç‹¸å°å§æœ€å–œæ¬¢åƒçš„è‰è“å¸ƒä¸å’Œè›‹ç³•ï¼Œâ€œè¿™æ˜¯ä»Šå¤©æœ€åä¸€ä»½å“¦ï¼Œæˆ‘çš„è¿æ°”çœŸçš„æ˜¯å¤ªå¥½äº†ã€‚â€</p><p>ç‹ç‹¸å°å§é«˜å…´çš„æ¥è¿‡ç”œå“ï¼ŒæŠŠä¹‹å‰åŠ¨ç‰©å¦ˆå¦ˆçš„åæ§½å’Œè¯‰è‹¦çš„äº‹æƒ…éƒ½å¿˜è®°çš„å¹²å¹²å‡€å‡€äº†ã€‚</p><p>æ™šé¥­åç‹ç‹¸å¤«å¦‡æ‰‹ç‰µç€æ‰‹å‡ºé—¨å»æ•£æ­¥ï¼Œå…¬å›­é‡Œå¹¿åœºä¸Šçš„ç§‹åƒåˆšå¥½ç©ºç€ï¼Œå¥¹ä»¬ååœ¨.ä¸Šé¢è¡ç§‹åƒï¼Œç‹ç‹¸å°å§çš„è£™æ‘†ä¹Ÿéšç€ç§‹åƒæ™ƒå‘€æ™ƒï¼Œè¿™ä¸€åˆ»å¥½æ¸©é¦¨å¥½å¹¸ç¦ã€‚â›²</p><p>â€œç‹ç‹¸é˜¿å§¨ï¼Œå¯ä»¥è®©ç»™æˆ‘ç©ä¸€ä¸‹ç§‹åƒå—?â€ç‹ç‹¸å…ˆç”Ÿçœ‹äº†-çœ¼é¢å‰çš„å°ç™½å…”:â€œå«å§å§ã€‚â€</p><p>â€œç‹ç‹¸å§å§ï¼Œå¯ä»¥è®©ç»™æˆ‘ç©ä¸€ä¼šå—ï¼Ÿâ€</p><p>ç‹ç‹¸å°å§åˆšæƒ³è¦èµ·èº«ç»™å°ç™½å…”ç©ï¼Œç‹ç‹¸å…ˆç”Ÿæå‰ä¸€æ­¥èµ·èº«è¯´:â€œä¸å¯ä»¥çš„å“¦ï¼Œå§å§ä¹Ÿè¦ç©çš„ï¼Œä½†æ˜¯å§å¤«çš„ç§‹åƒå¯ä»¥è®©ç»™ä½ ç©ã€‚â€</p><p>ç‹ç‹¸å°å§è¢«é€—å¾—å“ˆå“ˆå¤§ç¬‘ï¼Œè§‰å¾—ç‹ç‹¸å…ˆç”Ÿæ€ä¹ˆè¿™ä¹ˆå¯çˆ±ï¼Œè¿‡äº†ä¸€ä¼šå…¶ä»–å°åŠ¨ç‰©é™†ç»­è¿‡æ¥ï¼Œç‹ç‹¸å°å§è§‰å¾—ä¸å¥½æ„æ€äº†ï¼Œèµ·èº«å’Œç‹ç‹¸å…ˆç”Ÿæ‰‹ç‰µç€æ‰‹æ²æµ´ç€çšæ´çš„æœˆå…‰å›å®¶äº†ã€‚</p><p>ç¬¬äºŒå¤©å‚æ™šçš„æ—¶å€™ï¼Œç‹ç‹¸å°å§æ—©æ—©çš„åšå¥½äº†é¥­èœï¼Œé—²æ¥æ— äº‹å°±æ‰“ç®—å»æ¥ç‹ç‹¸å…ˆç”Ÿä¸€èµ·å›å®¶ã€‚</p><p>è·¯è¿‡é‚£å®¶ç»å¸¸å…³é¡¾çš„è›‹ç³•åº—çš„æ—¶å€™ï¼Œç¥çœ¼çœ‹è§ç‹ç‹¸å…ˆç”ŸæŠŠæ‰‹é‡Œçš„å¸ƒä¸ä¸¾å¾—é«˜é«˜çš„ï¼Œå¥½åƒæ­£åœ¨äº‰è®ºç€ä»€ä¹ˆã€‚</p><p>å¥¹èµ°è¿‘å‰çœ‹åˆ°å°ç†Šå¦ˆå¦ˆæŠŠå“­å¾—æ’•å¿ƒè£‚è‚ºçš„å°ç†Šæ‚åœ¨æ€€é‡Œæ²¡å¥½æ°”çš„è¯´é“:â€œå°æœ‹å‹å–œæ¬¢åƒï¼Œä½ å°±è®©ç»™ä»–æ€ä¹ˆäº†è¿™ä¹ˆå¤§äººäº†?â€ç‹ç‹¸å…ˆç”Ÿå˜Ÿå›”è¯´ï¼Œâ€œå¯æ˜¯ï¼Œæˆ‘å®¶å°æœ‹å‹ä¹Ÿå–œæ¬¢åƒå•Šã€‚â€</p><p>â€œä½ å®¶å“ªé‡Œæ¥çš„å°æœ‹å‹?â€</p><p>ç‹ç‹¸å°å§çªç„¶æƒ³èµ·ä¹‹å‰å¦ˆå¦ˆä»¬æ¥å‘ŠçŠ¶çš„äº‹ï¼Œè¿å¿™èµ°ä¸Šå‰æ‹‰ä½ç‹ç‹¸å…ˆç”Ÿï¼Œâ€œç»™ä»–ä»¬å§ã€‚â€è¯´ç€æŠŠæœ€åä¸€ä¸€ä¸ªå¸ƒ J å¡è¿›å°ç†Šçš„æ‰‹é‡Œï¼Œæ‹‰ç€ç‹ç‹¸å…ˆç”Ÿå°±å‡ºé—¨äº†ã€‚</p><p>â€œæˆ‘éƒ½è¿™ä¹ˆå¤§äº†ï¼Œè·Ÿå°æœ‹å‹æŠ¢æ€ªä¸å¥½æ„æ€çš„â€ã€‚ç‹ç‹¸å…ˆç”Ÿåœä½è„šæ­¥ï¼Œçœ‹ç€ç‹ç‹¸å°å§çš„çœ¼ç›é“:â€œä½ æ°¸è¿œéƒ½æ˜¯æˆ‘çš„å°æœ‹å‹ã€‚â€</p><p>æ™šå®‰</p><h3 id="æˆ‘æƒ³ç»™ä½ æœ€å¥½çš„"><a href="#æˆ‘æƒ³ç»™ä½ æœ€å¥½çš„" class="headerlink" title="æˆ‘æƒ³ç»™ä½ æœ€å¥½çš„"></a>æˆ‘æƒ³ç»™ä½ æœ€å¥½çš„</h3><p>è¿™ä¸€å¤©æ˜¯ä¸ªé˜³å…‰æ˜åªšçš„æ—©æ™¨ï¼Œå°ç™½å…”æ—©ä¸Šèµ·æ¥æ¨å¼€é—¨ï¼Œå‘ç€å¤ªé˜³ä¼¸äº†ä¸ªæ‡’è…°ã€‚</p><p>â€œå’¦?â€å°ç™½å…”å‘ç°äº†é—¨å£çš„æ¾æœã€‚â€œè¿™æ¬¡æ˜¯æ¾æœå‘¢ã€‚â€å°ç™½å…”å°å£°å˜€å’•ç€ï¼ŒæŠ¬å¤´å››å¤„å¯»æ‰¾ï¼Œç¯è§†å››å‘¨ä¹Ÿæ²¡æœ‰å‘ç°æ˜¯è°ã€‚</p><p>â€œå¥‡äº†æ€ªäº†ï¼Œåˆ°åº•æ˜¯è°å‘¢?â€å°ç™½å…æŠ±ç€æ¾æœè¿›å±‹ã€‚</p><p>ç›¯ç€é‚£ç¾¤æ¾æœè¯´:â€œè¿‡å»çš„åå‡ å¤©éƒ½æ˜¯è¿™æ ·ï¼Œé¦™è•‰ï¼Œç«¹å­ï¼Œèœ‚èœœâ€¦.ä»Šå¤©æ˜¯æ¾æœã€‚æ˜¯è°å‘¢ï¼Œä»–è¿™æ ·åšæ˜¯ä¸ºä»€ä¹ˆå‘¢?éš¾é“æ˜¯æ”¾é”™é—¨å£äº†å˜›?é‚£ä¹Ÿä¸å¯èƒ½è€æ˜¯æ”¾é”™å‘€?</p><p>â€œå—¯â€¦â€</p><p>â€œå“¦å¯¹äº†ã€‚â€å°ç™½å…”æƒ³åˆ°ä¸€ä¸ªä¸»æ„ã€‚</p><p>å¤œå¹•é™ä¸´ï¼Œå°ç™½å…”å‡è£…å…³ç¯ç¡è§‰äº†ã€‚</p><p>æœ‰ä¸ªé»‘å½±ï¼Œæ‚„å’ªå’ªçš„æ¥åˆ°å°ç™½å…”çš„é—¨å£ï¼Œæ”¾äº†ä¸€äº›è‹¹æœï¼Œè½¬èº«å°±è¦ç¦»å¼€ã€‚</p><p>è¿™æ—¶ï¼Œå°ç™½å…”ç‚¹èµ·èœ¡çƒ›ï¼Œâ€œå“¦~ åŸæ¥æ˜¯ä½ ï¼Œå°æ¾é¼ ã€‚â€ ï¸</p><p>å°æ¾é¼ ä¸€æ—¶ç€æ€¥ï¼Œæƒ³è¦è·‘ã€‚</p><p>â€œç­‰ç­‰ï¼Œå°æ¾é¼ ï¼Œä½ æ˜¯ä¸æ˜¯æ”¾é”™äº†ï¼Œè¿™ä¸ªæ˜¯æˆ‘å®¶é—¨å£ã€‚</p><p>å°æ¾é¼ æ”¯æ”¯å¾å¾çš„è¯´:â€œå‘ƒå‘ƒå‘ƒï¼Œæ²¡é”™ã€‚â€</p><p>â€œå—¯?é‚£ä½ è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢?â€</p><p>å°ç™½å…”ç›¯ç€å°æ¾é¼ é—®é“ã€‚å°æ¾é¼ çº¢é€šäº†è„¸ï¼Œç°åœ¨å°æ¾é¼ çš„è„¸åƒç†Ÿé€çš„çº¢è‹¹æœä¸€æ ·ã€‚</p><p>å°ç™½å…”çœ‹ç€å°æ¾é¼ ä¸è¯´è¯ï¼Œè¹¦è¹¦è·³è·³åˆ°å°æ¾é¼ è·Ÿå‰æ¥ã€‚</p><p>â€œå› ä¸ºï¼Œå› ä¸ºâ€¦.â€</p><p>â€œå› ä¸ºæˆ‘å–œæ¬¢ä½ ã€‚â€</p><p>â€œå•Š?â€</p><p>â€œå› ä¸ºæˆ‘å–œæ¬¢ä½ ã€‚â€å°æ¾é¼ åˆè¯´äº†ä¸€éã€‚</p><p>å°ç™½å…”å¬äº†ï¼Œæ„£äº†ä¸€ä¸‹ã€‚ä¸çŸ¥é“è¦è¯´äº›ä»€ä¹ˆï¼Œä½†æ˜¯åˆæƒ³è¦è¯´äº›ä»€ä¹ˆã€‚</p><p>â€œé‚£è¿™äº›ä¸œè¥¿æ˜¯?â€</p><p>â€œæˆ‘å¬çŒ´å­å“¥å“¥è¯´ï¼Œé¦™è•‰æ˜¯æœ€å¥½çš„ï¼Œæˆ‘å°±å»è·Ÿä»–ä»¬ä¸€èµ·å»æ‘˜é¦™è•‰;æˆ‘å¬ç†ŠçŒ«å¦ˆå¦ˆç»™ç†ŠçŒ«å®å®åƒç«¹å­ï¼Œç†ŠçŒ«å¦ˆå¦ˆè¯´ç«¹å­æ˜¯æœ€å¥½çš„ï¼Œæˆ‘ä¾¿æ‰¾äº†äº›ç«¹å­ç»™ä½ ;æˆ‘å¬â€¦â€</p><p>â€œç­‰ç­‰ã€‚â€å°å…”å­æ‰“æ–­ä»–ã€‚</p><p>â€œæˆ‘æ˜¯è¯´ä¸ºä»€ä¹ˆç»™æˆ‘è¿™äº›?â€</p><p>â€œå› ä¸ºæˆ‘å–œæ¬¢ä½ ï¼Œæˆ‘æƒ³è¦æŠŠæœ€å¥½çš„ç»™ä½ ã€‚</p><p>å°å…”å­è°ƒçš®çš„è¯´:â€˜â€˜æ²¡æœ‰äººå‘Šè¯‰ä½ ï¼Œ å…”å­å–œæ¬¢åƒçº¢èåœå˜›?å¯¹å…”å­æ¥è¯´çº¢èåœæ˜¯æœ€å¥½çš„ã€‚</p><p>â€œå“¦å“¦ï¼Œæˆ‘çŸ¥é“äº†ï¼Œæˆ‘æ˜ç™½äº†ã€‚æˆ‘ç°åœ¨å°±å»æ‰¾çº¢èåœç»™ä½ ã€‚â€å°æ¾é¼ è¯´é“ã€‚</p><p>â€œç­‰ç­‰ã€‚â€å°ç™½å…”å«ä½äº†å°æ¾é¼ ã€‚â€œæˆ‘ä»¬..èµ·å»å¯»æ‰¾å§ã€‚â€å°ç™½å…”è¯´ã€‚</p><p>å°æ¾é¼ çœ‹äº†çœ‹å°ç™½å…”ï¼Œæ»¡è„¸é€šçº¢çš„ç‚¹ç‚¹å¤´ã€‚</p><p>æ™šå®‰</p><h3 id="æˆ‘è®²ä¸ªæ•…äº‹ç»™ä½ å¬"><a href="#æˆ‘è®²ä¸ªæ•…äº‹ç»™ä½ å¬" class="headerlink" title="æˆ‘è®²ä¸ªæ•…äº‹ç»™ä½ å¬"></a>æˆ‘è®²ä¸ªæ•…äº‹ç»™ä½ å¬</h3><p>è¿™æ˜¯ä¸€ä¸ªå®é™çš„å¤œæ™šï¼Œå…”å­å…ˆç”Ÿå’Œå…”å­å°å§é åœ¨åºŠå¤´ä¸Šä¾ååœ¨ä¸€èµ·è¯´ç€æ‚„æ‚„è¯ï¼Œçªç„¶çª—å¤–é—ªäº†ä¸€ä¸‹ï¼Œæ¥ç€å°±å¬è§è½°éš†éš†çš„ä¸€é˜µå“å£°ï¼Œæ‰“é›·äº†</p><p>å…”å­å°å§å®³æ€•åœ°é’»åˆ°å…”å­å…ˆç”Ÿçš„æ€€é‡Œï¼Œç´§ç´§åœ°æŠ±ä½äº†ä»–ï¼Œå…”å­å…ˆç”Ÿæ‚ç€å…”å­å°å§ï¼Œå°å£°åœ°å®‰æ…°ç€å¥¹ï¼Œè¿™ä¸ªæ—¶å€™çª—å¤–æ¥é›¨æ»´æ»´è½åœ¨åœ°ä¸Šï¼Œæ ‘ä¸Šæˆ¿æªä¸Šçš„å£°éŸ³ï¼ŒåŠˆé‡Œå•ªå•¦çš„ï¼ŒçœŸæ˜¯å¥½å¤§ä¸€åœºé›¨ã€‚â˜ï¸</p><p>è¿™åœºçªå¦‚å…¶æ¥çš„é›¨ä¹Ÿæ‰“æ–­äº†ä»–ä»¬ç”œèœœèœœçš„ç¡å‰æ‚„æ‚„è¯ï¼Œä¸‹é›¨æ‰“é›·å…”å­å°å§ä¹Ÿç¡ä¸ç€ï¼Œå°±æ‹‰ç€å…”å­å…ˆç”Ÿç»™å¥¹è®²æ•…äº‹ã€‚</p><p>å…”å­å…ˆç”Ÿé—®ï¼Œé‚£è®²ä»€ä¹ˆæ•…äº‹å‘¢?â€œæˆ‘ä¸ç®¡ï¼Œæ€»ä¹‹è¦è®²åˆ°æˆ‘çŠ¯å›°ä¸ºæ­¢â€ï¼Œå¥½å¥½å¥½ï¼Œé‚£æˆ‘ç»™ä½ è®²ä¸ªä¼ è¯´ä¸­çš„æ•…äº‹å§ã€‚</p><p>ä»å‰æœ‰åº§å±±ï¼Œå±±é‡Œæœ‰åº§åº™ï¼Œåº™é‡Œæœ‰ä¸ªè€å’Œå°šå’Œå°å’Œå°šï¼Œæœ‰ä¸€å¤©ï¼Œè€å’Œå°šå¯¹å°å’Œå°šè¯´:ä»å‰æœ‰åº§å±±ï¼Œå±±é‡Œæœ‰åº§åº™ï¼Œåº™é‡Œæœ‰ä¸ªè€å’Œå°šå’Œå°å’Œå°šï¼Œæœ‰å¤©ï¼Œ è€å’Œå°šå¯¹å°å’Œå°šè¯´ â›°ï¸</p><p>è®²åˆ°ç¬¬ä¸‰éçš„æ—¶å€™ï¼Œå…”å­å°å§åæ˜ è¿‡æ¥äº†ï¼Œæ°”å‘¼å‘¼åœ°è¯´é“ï¼Œä½ è¿™æ˜¯åœ¨å¾ªç¯ç³Šå¼„æˆ‘!å…”å­å…ˆç”Ÿå¯¹å¥¹è¯´ï¼Œä½ å…ˆåˆ«ç€æ€¥ï¼Œå¬æˆ‘è¯´å®Œã€‚</p><p>ä»å‰æœ‰åº§å±±ï¼Œå±±é‡Œæœ‰ä¸ªå±‹ï¼Œå±‹é‡Œæœ‰ä¸€ä¸ªç”·å…”å­å’Œä¸€ä¸ªå¥³å…”å­ï¼Œæœ‰ä¸€å¤©ï¼Œç”·å…”å­å¯¹å¥³å…”å­è¯´:æˆ‘çˆ±ä½ ã€‚</p><p>å…”å­å°å§å¬åˆ°è¿™ç¾ç¾åœ°æ‚ä½äº†è„¸ï¼Œå°±ä½ èŠ±è¨€å·§è¯­ï¼Œè¿™ä¸ªä¸ç®—ï¼Œä½ é‡æ–°ç»™æˆ‘è®²ä¸€ä¸ªã€‚</p><p>é‚£å¥½ï¼Œæˆ‘é‡æ–°ç»™ä½ è®²ä¸€ä¸ªå“ˆï¼Œä»å‰æœ‰ä¸¤åªå°å…”å­ï¼Œè¿™ä¸ªç°å…”å­å‘¢ç‰¹åˆ«ç‰¹åˆ«åœ°çˆ±ç²‰å…”å­ï¼Œæœ‰å¤šçˆ±å‘¢ï¼Œç²‰å…”å­å–œæ¬¢åƒä»€ä¹ˆå°±ç»™å¥¹åšä»€ä¹ˆï¼Œåšä¸åˆ°å‘¢ï¼Œå°±èµ·ç»™å¥¹ä¹°ï¼Œç…§é¡¾å¥¹çš„è¡£é£Ÿèµ·å±…ï¼ŒæŠŠå¥¹ç…§é¡¾çš„å¯å¥½äº†ï¼Œå¥½å¤šåœ°äº‹æƒ…éƒ½ä¾ç€å¥¹ã€‚</p><p>ä½†æ˜¯å‘¢ï¼Œç²‰å…”å­æœ‰æ—¶å€™å°±æŒºæ°”äººå‘¢ï¼Œæœ‰å¤šæ°”äººå‘¢ï¼Œè¿˜ä¸ç­‰å…”å­å…ˆç”Ÿè¯´ä¸‹å»ï¼Œå…”å­å°å§å°±æ‰“æ–­äº†ä»–ï¼Œä½ è¯´æˆ‘ï¼Œæˆ‘å“ªé‡Œæ°”äººäº†ï¼Œå…”å­å…ˆç”Ÿæ•…ä½œæƒŠè®¶åœ°é—®é“ï¼Œæˆ‘å“ªæœ‰è¯´ä½ ï¼Œä½ å°±æ˜¯è¯´æˆ‘äº†ï¼Œå“¼ï¼Œå…”å­å°å§è½¬è¿‡èº«èƒŒå¯¹ç€å…”å­å…ˆç”Ÿå¹¶è¯´é“,æˆ‘è¦æƒ©ç½šä½ ï¼Œè®©ä½ è¯´æˆ‘ã€‚</p><p>å…”å­å…ˆç”Ÿè¿å¿™é—®ï¼Œæ€ä¹ˆæƒ©ç½šæˆ‘å‘€?å—¯~~å°±ç½šä½ æ‚ç€æˆ‘ç¡è§‰è§‰ã€‚</p><p>â€œå¾—å˜â€</p><p>å…”å­å…ˆç”Ÿéšæ‰‹å…³ä¸Šç¯ï¼Œç„¶åä»èƒŒåæ‚ç€å…”å­å°å§ï¼Œç”œèœœåœ°è¿›å…¥äº†æ¢¦ä¹¡ã€‚</p><p>æ™šå®‰</p><h3 id="æˆ‘å¸¦ä½ å»çœ‹å…¨ä¸–ç•Œ"><a href="#æˆ‘å¸¦ä½ å»çœ‹å…¨ä¸–ç•Œ" class="headerlink" title="æˆ‘å¸¦ä½ å»çœ‹å…¨ä¸–ç•Œ"></a>æˆ‘å¸¦ä½ å»çœ‹å…¨ä¸–ç•Œ</h3><p>ç†ŠçŒ«å…ˆç”Ÿå¾ˆçƒ¦æ¼ï¼Œä»–å¥½åƒå–œæ¬¢ä¸Šäº†é—¨å£é‚£æœµå°èŠ±ï¼Œå¯æ˜¯ï¼Œæˆ‘æ˜¯ç†ŠçŒ«å•Šï¼Œç†ŠçŒ«ä¸åº”è¯¥å–œæ¬¢æ¯ç†ŠçŒ«ä¹ˆï¼Œæ€ä¹ˆå¯èƒ½å–œæ¬¢ä¸Šä¸€æœµå°èŠ±å‘¢ï¼Œç†ŠçŒ«å…ˆç”Ÿç”©ç”©è„‘è¢‹ï¼Œå°†è¿™äº›äº‹æƒ…ç”©åˆ°è„‘å,æŠ«ä¸Šå¤–å¥—ï¼Œå‡ºé—¨å·¥ä½œäº†ã€‚</p><p>åœ¨æ‹è§’çš„ä¸€ç¬é—´ï¼Œç†ŠçŒ«å¾ˆåŠªåŠ›çš„æƒ³ä¿æŒç€è‡ªå·±çš„å¹³è§†ï¼Œçœ¼ç›å´ä¸è‡ªè§‰çš„çŸå‘å¢™è¾¹çš„é‚£æœµå°èŠ±ï¼Œçº¢éœæ…¢æ…¢çš„çˆ¬ä¸Šç†ŠçŒ«å…ˆç”Ÿçš„è„¸é¢Šï¼Œç†ŠçŒ«å…ˆç”Ÿæš—éª‚è‡ªå·±ä¸€å¥ï¼ŒåŠ å¿«è„šæ­¥ç¦»å¼€äº†è¿™ä¸ªåœ°æ–¹ã€‚&#x2F;:rose</p><p>å‚æ™šï¼Œä¸‹ç­çš„ç†ŠçŒ«å…ˆç”Ÿåœ¨æ‹è§’å¤„åœäº†ä¸‹æ¥ä»–æ•´ç†äº†ä¸€ä¸‹è‡ªå·±çš„è¡£æœï¼Œæ‹¿å‡ºåˆšåˆšåœ¨å•†åº—ä¹°çš„é•œå­æ¢³å­ï¼Œå°å¿ƒçš„æ•´ç†äº†ä¸€ä¸‹è‡ªå·±ï¼Œè¿ˆå¼€æ­¥å­å‘å®¶èµ°å»ã€‚</p><p>â€œé‚£ä¸ªï¼Œä½ çš„å¤–å¥—æ‰äº†ã€‚â€ æœ‰-ä¸ªå£°éŸ³å¼±å¼±è¯´åˆ°ã€‚</p><p>â€œå•Šï¼ŒçœŸçš„è€¶ï¼Œè°¢è°¢ä½ ã€‚â€ç†ŠçŒ«å…ˆç”Ÿæ¡èµ·è‡ªå·±çš„å¤–å¥—ï¼ŒæŠ¬å¤´æ­£æ‰“ç®—é“è°¢ï¼Œçœ‹åˆ°é¢å‰çš„å°èŠ±å´å±å””äº†èµ·æ¥ï¼ŒåŒæ‰‹ä¹Ÿä¸å®‰çš„åœ¨èº«æ—ä¹±æ‘†ç€ã€‚</p><p>â€œå“ˆï¼Œæ²¡äº‹å‘¢ï¼Œæˆ‘å¥½åƒç»å¸¸è§åˆ°ä½ å‘¢ï¼Œæˆ‘ä»¬æ˜¯é‚»å±…?</p><p>ç†ŠçŒ«å…ˆç”Ÿä½ä¸‹å¤´ï¼Œæš—è‡ªç»™è‡ªå·±é¼“äº†é¼“æ°”ï¼Œâ€œæ˜¯çš„ï¼Œæˆ‘å°±ä½ä½ æ—è¾¹å‘¢ï¼Œå¾ˆé«˜å…´è®¤è¯†ä½ ã€‚ â˜ºï¸</p><p>â€œæˆ‘ä¹Ÿæ˜¯å‘¢ï¼Œå¯æƒœæˆ‘ä¸èƒ½åŠ¨ï¼Œä¸ç„¶æˆ‘ä»¬è¯´ä¸å®šå¯ä»¥æ›´æ—©è®¤è¯†å‘¢ï¼Œå¤–é¢å¥½ç©ä¹ˆï¼Œæˆ‘å¥½æƒ³çŸ¥é“ã€‚â€å¤•é˜³ä¸‹ï¼Œå°èŠ±çš„çœ¸å­é‡Œå†™æ»¡å¸Œå†€ã€‚</p><p>â€œå¤–é¢çš„ä¸–ç•Œå‘¢ï¼Œå¯å¥½ç©äº†ï¼Œä½ å¯ä»¥ç¢°è§å„ç§å„æ ·çš„äººï¼Œæ¬£èµå„ç§å„æ ·çš„æ™¯è‰²ï¼Œè¿™ä¸ªä¸–ç•Œï¼Œå¤§åˆ°è®©ä½ æƒŠå¹å‘¢ã€‚</p><p>ç†ŠçŒ«å…ˆç”Ÿè¹²äº†ä¸‹æ¥ï¼Œç»™å°èŠ±è®²- -æ™šä¸Šçš„æ•…äº‹ï¼Œç­‰åˆ°å¤œæ·±äº†ï¼Œä¿©äººæ‰æ‹æ‹ä¸èˆçš„åˆ†å¼€ï¼Œå¹¶çº¦å®šç†ŠçŒ«å…ˆç”Ÿç¬¬äºŒå¤©ç»§ç»­ç»™å°èŠ±è®²æ•…äº‹ã€‚</p><p>ç¬¬äºŒå¤©ï¼Œæ¸©æš–çš„é˜³å…‰å°†å°èŠ±å”¤é†’ï¼Œå¥¹è½»è½»åœ°ä¼¸äº†ä¼¸è…°ï¼ŒæŒ£å¼€äº†çœ¼ï¼Œçœ¼å‰æ˜¯é¢å¸¦ç€å¾®ç¬‘ç†ŠçŒ«å…ˆç”Ÿï¼Œä»–å°å¿ƒçš„ä»èƒŒåæ‹¿å‡ºä¸€ä¸ªèŠ±ç›†ï¼Œæ¸©æŸ”çš„è¯´</p><p>â€œä»Šå¤©å¼€å§‹ï¼Œæˆ‘å¸¦ä½ å»çœ‹å…¨ä¸–ç•Œã€‚â€</p><p>æ™šå®‰</p><h3 id="æˆ‘ä¸€ç›´é™ªç€ä½ -1"><a href="#æˆ‘ä¸€ç›´é™ªç€ä½ -1" class="headerlink" title="æˆ‘ä¸€ç›´é™ªç€ä½ "></a>æˆ‘ä¸€ç›´é™ªç€ä½ </h3><p>å°å…”å­æ„Ÿå†’äº†ï¼Œå·²ç»èµ–åœ¨åºŠä¸Šä¸€æ•´å¤©äº†ï¼Œå°ç‹ç‹¸ä¸€å¤§æ—©å°±æ‰“ç”µè¯è¯·äº†å‡ååœ¨åºŠè¾¹ç…§é¡¾ç€å¥¹ã€‚</p><p>â€œæ„Ÿå†’äº†ä¹Ÿä¸å¯ä»¥ä¸åƒé¥­ï¼Œæ€»è¦åƒç‚¹ä¸œè¥¿æ‰èƒ½å¥½ã€‚â€å°ç‹ç‹¸ååœ¨åºŠè¾¹æ‘¸äº†æ‘¸å°å…”å­çš„é¢å¤´ã€‚</p><p>å°å…”å­æ‘‡æ‘‡å¤´æŠŠè¢«å­å¾€ä¸Šæ‹½äº†æ‹½ç›–ä½åŠå¼ è„¸:â€œä¸è¦åƒé¥­ï¼Œä¸è¦åƒè¯ï¼Œæˆ‘ç¡ä¸€ä¼šå„¿é†’æ¥å°±å¥½äº†ã€‚â€</p><p>å°ç‹ç‹¸å¹å£æ°”ä¼¸æ‰‹æ‹¿äº†åºŠå¤´æŸœä¸Šçš„æ¯å­å¹äº†å¹:â€œå·²ç»ä¸çƒ­äº†ï¼Œä¹–ä¹–èµ·æ¥æŠŠè¯å–äº†åœ¨ç¡ï¼Œè¿™ä¸ªä¸è‹¦çš„ã€‚â€</p><p>å°å…”å­åç€å¤´çœ‹äº†çœ‹å°ç‹ç‹¸ï¼Œä»–è§‰å¾—å°ç‹ç‹¸çœ‹èµ·æ¥æœ‰ç‚¹ä¸¥è‚ƒï¼Œåœ¨é—¹ä¸€ä¼šææ€•è¦ç”Ÿæ°”äº†ï¼Œä»–ä¹Ÿåªå¥½æ”¯ç€èº«å­åèµ·æ¥:â€œçœŸçš„ä¸è‹¦ä¹ˆ?è¯å“ªæœ‰ä¸è‹¦çš„ã€‚</p><p>å°ç‹ç‹¸å¼¯çœ¸æ‹äº†æ‹å°å…”å­çš„è„‘è¢‹ï¼Œä»–ç«¯ç€æ¯å­æŠ¿äº†ä¸€å£é‡Œé¢è¤è‰²çš„è¯æ±ï¼Œåˆå‡‘ä¸Šå»åœ¨å°å…”å­å˜´è§’äº²äº†äº²:â€œä½ çœ‹ï¼Œæ˜¯ä¸æ˜¯ä¸è‹¦çš„ã€‚</p><p>å°å…”å­è¿å¿™æ‚ç€å˜´ä¸€è„¸æƒŠæçš„çœ‹ç€å°ç‹ç‹¸:â€œä¼šä¼ æŸ“çš„!</p><p>â€œé‚£è¿˜ä¸ä¹–ä¹–å–è¯ï¼Œæ˜¯ä¸æ˜¯æœ€è¿‘éƒ½ä¸æƒ³è®©æˆ‘äº²ä½ äº†ã€‚â€å°ç‹ç‹¸æˆ³äº†æˆ³å°å…”å­çš„è„‘é—¨]æŠŠè¯é€’ç»™å¥¹ã€‚</p><p>å””..å°å…”å­æŠ¬çœ¸çœ‹äº†çœ‹å°ç‹ç‹¸ä¹Ÿåªå¥½ä»°å¤´æŠŠè¯å–äº†ä¸‹å»ã€‚</p><p>å°ç‹ç‹¸ååœ¨ä¸€è¾¹ä¼¸æ‰‹å‰¥äº†é¢—ç³–ï¼Œçœ‹ç€å°å…”å­åƒå®Œè¯æŠŠç³–å–‚å¥¹å˜´é‡Œã€‚</p><p>â€œåƒäº†ç³–å°±ä¸è‹¦äº†ï¼Œæ˜å¤©æ„Ÿå†’å¥½äº†å¸¦ä½ å»ä¹°å‡¤æ¢¨é…¥åƒã€‚â€å°ç‹ç‹¸è®©å°å…”å­èººå¥½ï¼Œä¼¸æ‰‹ç»™å¥¹æ–å¥½è¢«è§’ä¿¯èº«äº²äº†äº²å¥¹ã€‚</p><p>â€œä¸è¦äº²æˆ‘äº†ï¼Œä¼šä¼ æŸ“ç»™ä½ çš„ï¼Œç‹ç‹¸çœŸç¬¨è¿™éƒ½ä¸çŸ¥é“ã€‚â€å°å…”å­ç€å˜´ç›¯ç€å°ç‹ç‹¸çœ‹ã€‚</p><p>å°ç‹ç‹¸æŒ äº†æŒ å¤´å’§å¼€å˜´è§’å†²å°å…”å­ç¬‘:â€œé‚£æˆ‘å°±è·Ÿä½ ä¸€èµ·åƒè¯å˜›ã€‚â€</p><p>æ™šå®‰</p><h3 id="æˆ‘è¦æŠ±ç€ä½ ç¡è§‰"><a href="#æˆ‘è¦æŠ±ç€ä½ ç¡è§‰" class="headerlink" title="æˆ‘è¦æŠ±ç€ä½ ç¡è§‰"></a>æˆ‘è¦æŠ±ç€ä½ ç¡è§‰</h3><p>å¤œæ™šçš„æ£®æ—è®©äººæ„Ÿåˆ°æ ¼å¤–çš„æƒ¬æ„ï¼Œå¶å°”å¹æ¥ä¸€-é˜µå¾®é£ï¼Œæ²™æ²™ä½œå“å´ä¸å¸¦èµ°è¿™ç‰‡åœŸåœ°ä¸€ä¸ç¥ç§˜å’Œå®‰é™ã€‚å°ç‹ç‹¸å°†å°å…”å­ç´§ç´§æ‚å…¥æ€€ä¸­ï¼Œç”Ÿæ€•ç¨å¾®æ¾å¼€ä¸€ç‚¹ä¾¿å¤±å»äº†è¿™æ€€æŠ±ä¸­çš„æ¸©æš–ã€‚</p><p>â€œæ™šå®‰ï¼Œå°å…”å­ï¼Œè¯¥ç¡è§‰äº†å‘¢ã€‚â€å°ç‹ç‹¸æŠŠæ‰‹è‡‚ä¼¸å‡ºè¢«å­ï¼ŒæŠ±ç´§å°å…”å­ã€‚</p><p>å°å…”å­çƒ­ä¹ä¹çš„ä»è¢«å­é‡Œæ¢å‡ºå¤´æ¥ï¼Œè¯´:â€œå¥½çš„å‘¢ï¼Œç¬¨ç‹ç‹¸ï¼Œä¸ºä»€ä¹ˆä½ æ€»æ˜¯å–œæ¬¢æŠ±ç€æˆ‘ç¡è§‰å‘€ã€‚â€</p><p>â€œå› ä¸ºä½ æ˜¯æˆ‘çš„å°å¿ƒè‚å—·ï¼Œç¡è§‰çš„æ ·å­ä¹Ÿèƒ½è®©æˆ‘å¿ƒåŠ¨è®¸ä¹…ã€‚â€å°ç‹ç‹¸æ‘¸äº†æ‘¸å°å…”å­çš„å¤´æƒ³è®©å°å…”å­èººå¥½ç¡è§‰ã€‚</p><p>â€œå°±ä¼šè€å˜´çš®å­ï¼Œæˆ‘çƒ­ï¼Œç¬¨ç‹ç‹¸æ€»æ˜¯æŠŠæˆ‘å’Œè¢«å­ä¸€èµ·æŠ±ç€ã€‚â€å°å…”å­åˆæ¢å‡ºå¤´æ¥æ¶ç‹ ç‹ çš„çœ‹ç€å°ç‹ç‹¸ï¼Œå…”è€³æœµä¸åœæ‹æ‰“ç€å°ç‹ç‹¸çš„è„¸ã€‚</p><p>â€œè½¯ï¼Œå¯¹ä¸èµ·ï¼Œæ˜¯å› ä¸ºæˆ‘ç¡ç€åä¹ æƒ¯æ»šè¢«å­ï¼Œæ€•å°å…”å­è¢«å­è¢«æ‰¯èµ°åç€å‡‰äº†ï¼Œæ‰€ä»¥æ‰æŠŠè¢«å­æŠ±ä½çš„ã€‚â€å°ç‹ç‹¸æ¾å¼€æ‰‹è‡‚ï¼Œä¸€.è„¸æ„§ç–šçš„æŠ“ç€è‡ªå·±å°è„‘è¢‹ã€‚</p><p>â€œå™—ï¼Œç¬¨ç‹ç‹¸ï¼ŒåŸæ¥æ˜¯è¿™æ ·å‘€ï¼Œé‚£ä½ æŠŠæˆ‘ä¹Ÿå·èµ°å§ï¼Œæˆ‘èåŒ–åä¹Ÿè¦é»åœ¨ä½ èº«ä¸Šï¼Œå¤©å¤©é»ç€ä½ ï¼Œå˜»å˜»ã€‚â€å°å…”å­ä¸€è¾¹è°ƒç€è¢«å­ä¸€è¾¹åç¬‘ç€å†²å°ç‹ç‹¸åšäº†ä¸ªé¬¼è„¸ã€‚</p><p>ç­‰å°å…”å­è°ƒå¥½è¢«å­åï¼Œå°ç‹ç‹¸åˆæŠ±ç´§å°å…”å­ï¼Œè¯´:â€œå‚»å…”å­ï¼Œè¯¥ç¡è§‰äº†å‘¢ï¼Œçƒ­çš„è¯å’Œæˆ‘è¯´å“¦ï¼Œæˆ‘çš„å°å¿ƒè‚çš„å½“ç„¶è¦æŠ±ç´§çš„å‘€ã€‚â€</p><p>å¯æ˜¯ï¼Œæˆ‘æ€•åšå™©æ¢¦ï¼Œæœ€è¿‘æˆ‘ç»å¸¸ä¼šè¢«å™©æ¢¦å“é†’ï¼Œç„¶åç¡ä¸ç€ã€‚â€å°å…”å­å§”å±ˆçš„çœ‹ç€å°ç‹ç‹¸ï¼Œä¸çŸ¥æ€ä¹ˆåŠæ‰å¥½ã€‚</p><p>å°ç‹ç‹¸ç„¦æ€¥çš„è¯´é“:â€œå•Šï¼Œæ€ä¹ˆä¸å‘Šè¯‰æˆ‘å‘¢ï¼Œå‚»å…”å­ï¼Œç¡ä¸ç€ä¸€å®šè¦å‘Šè¯‰æˆ‘ï¼Œæˆ‘ä¼šéšæ—¶éšåœ°çš„åšå¥½é™ªä½ çš„å‡†å¤‡çš„å‘¢â€</p><p>â€œå¯â€¦æˆ‘æ€•æ‰“æ‰°åˆ°ä½ ç¡è§‰å‘¢ã€‚â€œå°å…”å­æŠŠå¤´ç¼©è¿›è¢«å­é‡Œï¼Œå·å·ç„ç€å°ç‹ç‹¸çš„è„¸ã€‚</p><p>â€œå‚»å…”å­ï¼Œæ€ä¹ˆä¼šå‘¢ï¼Œåœ¨ä½ å®³æ€•çš„æ—¶å€™èƒ½ç¬¬ä¸€æ—¶é—´è®©æˆ‘é™ªç€ä½ ï¼Œæˆ‘ä¼šå¾ˆå¼€å¿ƒçš„å‘¢ã€‚â€œå°ç‹ç‹¸å® æººçš„ç»™å°å…”å­é¡ºç€è€³æœµï¼Œçœ¼é‡Œæ˜ ç€å…”å®å®é‚£åŠéœ²çš„è„¸ã€‚</p><p>â€œçœŸçš„å—?å°ç‹ç‹¸?â€œå°å…”å­ç–‘æƒ‘çš„é—®ã€‚</p><p>å°ç‹ç‹¸åšå®šçš„çœ‹ç€å°å…”å­å›ç­”é“:â€œ çœŸçš„å‘¢ï¼Œå‚»å…”å­ï¼Œä»¥åç¡ä¸ç€-å®šè¦å‘Šè¯‰æˆ‘å“¦ï¼Œæˆ‘éšæ—¶å‡†å¤‡å¥½é™ªä½ ã€‚</p><p>é‚£å¦‚æœä½ ä¸åœ¨æˆ‘èº«è¾¹å‘¢ï¼Ÿ</p><p>æˆ‘å¬èº«è¾¹çš„æœ‹å‹è¯´ä»–ä»¬ä¸åœ¨ä¸€èµ·çš„æ—¶å€™éƒ½ç”¨è¿™æ¬¾å«â€œå¾®çˆ±â€çš„è½¯ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é‡Œé¢ä¸€èµ·ç§æ ‘ï¼Œè£…é¥°æˆ¿å­ï¼Œè¿˜æœ‰è‡ªå·±çš„å†œåœºï¼Œä¹Ÿå¯ä»¥å†™ä¸‹çºªå¿µæ—¥å’Œæˆ‘ä»¬çš„å¿ƒæ„¿ã€‚æœ€é‡è¦çš„æ˜¯æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¯¹æ–¹çš„åŠ¨æ€ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä¸€ç›´é»åœ¨ä¸€èµ·äº†ã€‚å°±ç®—ä¸åœ¨èº«è¾¹ä¹Ÿå¯ä»¥æ„Ÿè§‰åˆ°ä½ ä¸€ç›´åœ¨æˆ‘èº«è¾¹å‘€ã€‚</p><p>çœŸçš„å—ï¼Œé‚£çœŸæ˜¯å¤ªå¥½äº†ï¼Œè¿™æ ·å°±ä¸æ€•æ„Ÿè§‰åˆ°ç¦»ä½ å¾ˆè¿œäº†ã€‚</p><p>â€œæˆ‘çˆ±ä½ ï¼Œæˆ‘ä»¬ç¡è§‰å§â€œå°å…”å­æŠ±ä½å°ç‹ç‹¸ï¼Œå¹¸ç¦æ´‹æº¢åœ¨è„¸ä¸Šï¼Œç¬‘çœ¯çœ¯çš„é—­ä¸ŠåŒçœ¼ã€‚</p><p>â€œç›–å¥½è¢«å­å“¦ï¼Œä»Šæ™šæˆ‘ä¹Ÿä¼šåœ¨ä½ çš„æ¢¦é‡Œé™ªä½ çš„å‘¢ã€‚â€œå°ç‹ç‹¸è½»æŠšç€å°å…”å­ï¼Œè®©å¥¹æ¸æ¸çš„å…¥ç¡ï¼Œï¼Œè½»å£°è¯´é“: â€æ™šå®‰ï¼Œå¥½æ¢¦ï¼Œæˆ‘äº²çˆ±çš„å°å…¬ä¸»ï¼Œæˆ‘ä¹Ÿçˆ±ä½ ã€‚</p><p>æ™šå®‰</p><blockquote><p>åŸåˆ›æ•…äº‹æ¥è‡ªï¼š<a href="https://www.zhihu.com/people/3239708470">è¿™é‡Œæ˜¯å°é¾™</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> éšç¬”æ—¥è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¸å¥¹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¿ƒä¹‹è¯­</title>
      <link href="/diary/love-letter/"/>
      <url>/diary/love-letter/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><p>åœ¨äººæµ·èŒ«èŒ«ä¸­ï¼Œä½ æ˜¯æˆ‘å¿ƒä¸­æœ€æ¸©æš–çš„æ¸¯æ¹¾ã€‚</p><span id="more"></span><blockquote><p>è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡é€šè¿‡è¿™ç§æ–¹å¼æ¥å¯„æ‰˜å¯¹ä½ çš„æƒ…æ„Ÿï¼Œä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸ºæƒ…ä¹¦ï¼Œä¹Ÿå¯ä»¥æŠŠå®ƒç†è§£ä¸ºæˆ‘æƒ³å¯¹ä½ è¯´çš„å¿ƒé‡Œè¯</p></blockquote><p><code>Dear</code>ï¼š</p><p>å›æƒ³è¿™æ®µç»å†</p><p>æˆ‘ä»¬ä»é™Œç”Ÿäººåˆ°æ— è¯ä¸è¯´çš„æœ‹å‹ï¼Œå†åˆ°å½¼æ­¤å¿ƒåŠ¨ï¼Œå†åˆ°æœ€åçš„éš¾èˆéš¾åˆ†</p><hr><p>å½“åœ¨ä»æœ‹å‹é‚£å¾—çŸ¥ä½ çš„æ—¶å€™ï¼Œæˆ‘å†…å¿ƒæ˜¯å¹³é™çš„</p><p>æ²¡æœ‰å¤ªè¿‡è‹›æ±‚ï¼Œæ²¡æœ‰æœŸæœ›ï¼Œç”šè‡³æ²¡æœ‰å¿ƒåŠ¨</p><p>å¶ç„¶çš„ä¸€æ¬¡æ¸¸æˆå¯¹å±€ï¼Œæœ‹å‹æ‹‰ç€ä½ è¿›äº†æˆ¿é—´ï¼Œç„¶åä¸€èµ·æ‰“äº†å‡ æŠŠæ¸¸æˆ</p><p>ä½ å¾ˆå®‰é™ï¼Œä¹Ÿå¾ˆå‰å®³ï¼Œè‡³å°‘è¶…è¿‡äº†å¤§éƒ¨åˆ†çš„å¥³å­©å­æ¸¸æˆæ°´å¹³</p><p>ä¸€æ¥äºŒå»ï¼Œä»¿ä½›æœ‰ç§å¼•åŠ›åœ¨é©±ä½¿ç€æˆ‘ï¼Œè®©æˆ‘å»è¯•ç€äº†è§£ä½ </p><p>æ€€ç€å¿å¿‘çš„å¿ƒï¼ŒåŠ äº†ä½ çš„å¾®ä¿¡å¥½å‹ï¼Œå¼€å§‹äº†æˆ‘ä¿©çš„ç¬¬ä¸€æ¬¡èŠå¤©</p><p>æˆ‘ä»¬çš„èŠå¤©ä»äº†è§£å½¼æ­¤çš„åŸºæœ¬ä¿¡æ¯å†åˆ°çˆ±å¥½ï¼Œæˆ‘ä»¬çš„å…³ç³»ä»é™Œç”Ÿäººå˜æˆäº†æ™®é€šæœ‹å‹</p><p>å†åæ¥ï¼Œåˆ†äº«æ—¥å¸¸è¡Œç¨‹æŠ¥å¤‡ï¼Œä¸‹ç­åä¸€èµ·æ¸¸æˆï¼Œè®©æˆ‘ä»¬å…³ç³»è¶Šæ¥è¶Šå¥½äº†</p><p>æˆ‘æå‡ºäº†è§é¢çš„è¦æ±‚ï¼Œä¹Ÿæ˜¯é‚£æ¬¡ï¼Œæˆ‘ä¸¾ç€äººç”Ÿä¸­é€å‡ºçš„ç¬¬ä¸€æŸèŠ±æ¥åˆ°ä½ çš„å°åŒºé—¨å£</p><p>é‚£ä¸ªæ—¶å€™çš„æˆ‘ï¼Œä¸ä¼¼æ‰‹æœºå±å¹•é‡Œçš„æ·¡å®šå’Œè‡ªç„¶</p><p>æˆ‘ä¹Ÿæœ‰å®³æ€•ï¼Œå¿ƒä¹±ï¼Œå¿å¿‘ä¸å®‰ï¼Œä½†æ›´å¤šçš„è¿˜æ˜¯ç´§å¼ å’ŒæœŸå¾…</p><p>è§é¢äº†ï¼Œæˆ‘çœ‹åˆ°äº†å’Œæ‰‹æœºé‡Œä¸ä¸€æ ·æ€§æ ¼çš„ä½ </p><p>åˆæ¬¡è§é¢ï¼Œæˆ‘ä»¬éƒ½æœ‰äº›æ”¾ä¸å¼€ï¼Œæˆ‘ä¹Ÿä¸æ–­çš„åœ¨ç»™æˆ‘ä»¬å½¼æ­¤æ‰¾ä¸€äº›è¯é¢˜ï¼Œç¼“è§£ä¸¤ä¸ªäººç‹¬å¤„æ—¶çš„æ°”æ°›</p><p>ä¸€èµ·å¹¶è‚©èµ°åœ¨å°é“ä¸Šï¼ŒæŸä¸ªç¬é—´ï¼Œå°±å¾ˆè‡ªç„¶çš„ç‰µèµ·äº†ä½ çš„æ‰‹ï¼Œå¾ˆæ»‘å¾ˆç»†è…»</p><p>ç»ˆäºï¼Œæˆ‘é¼“èµ·å‹‡æ°”å¯¹ä½ è¡¨ç™½ï¼Œè¯´å‡ºäº†æˆ‘å–œæ¬¢ä½ â€œæˆ‘ä»¬åœ¨ä¸€èµ·å§â€</p><p>ä½ åŒæ„äº†ï¼Œæˆ‘å¾ˆå¼€å¿ƒï¼ŒåŒæ—¶ä¹Ÿå¯¹æˆ‘ä»¬çš„æœªæ¥å……æ»¡äº†æœŸå¾…</p><p>é‚£å¤©çš„å›å¿†å°±åœ¨æˆ‘çš„è„‘æµ·ï¼Œè®©æˆ‘è®°å¿†æ·±åˆ»ï¼Œä¹Ÿæ˜¯æˆ‘æœ€è¿‘ä¸¤å¹´è¿‡çš„æœ€å¼€å¿ƒçš„ä¸€ä¸ªå‘¨æœ«äº†</p><p>å°±è¿™æ ·æˆ‘ä»¬åœ¨ä¸€èµ·äº†ï¼Œæˆ‘ä»¬ä¹Ÿå¼€å§‹äº†ç”œèœœçš„ç›¸å¤„ï¼Œè‡ªç„¶è€Œèˆ’é€‚ï¼Œä¸€åº¦è®©æˆ‘è®¤ä¸ºæˆ‘ä»¬æ˜¯ä¸æ˜¯æ—©å°±åœ¨å¹³è¡Œæ—¶ç©ºè®¤è¯†äº†</p><hr><p>å°±åœ¨è¿™æ—¶ï¼Œæˆ‘å¾ˆè®¤çœŸçš„è€ƒè™‘äº†æˆ‘ä»¬ä¹‹é—´åº”è¯¥æ€ä¹ˆç›¸å¤„ï¼Œå› ä¸ºæˆ‘æƒ³è°ˆä¸€æ®µä¸åˆ†æ‰‹çš„æ‹çˆ±</p><p>æˆ‘è®¡åˆ’ç€æˆ‘ä»¬è¦è¿‡çš„å‘¨æœ«ï¼Œè¦å’Œä½ ä¸€èµ·åšçš„å¾ˆå¤šäº‹æƒ…ï¼Œå°å¿ƒç¿¼ç¿¼çš„åœ¨å¤‡å¿˜å½•å†™ç€ä½ çš„çˆ±å¥½å–œæ¬¢</p><p>å› ä¸ºè§è¯è¿‡å¤ªå¤šçš„è½°è½°çƒˆçƒˆç„¶åèµ°æ•£çš„äººï¼Œæ‰€ä»¥åœ¨æˆ‘çš„è®¡åˆ’ä¸­ï¼Œæˆ‘æƒ³ç€æ˜¯å¹³è¡¡æˆ‘ä¿©çš„ç›¸å¤„æ¨¡å¼ï¼Œç»†æ°´é•¿æµå¼çš„æ‹çˆ±</p><p>æœ‰å¯èƒ½æ˜¯æˆ‘ä»¬åœ¨ä¸€èµ·æ—¶é—´å¤ªçŸ­ï¼Œå½¼æ­¤éƒ½æ²¡æ€ä¹ˆæ”¾å¼€ï¼Œä¸¤ä¸ªäººä¹‹é—´æœ‰è…»æ­ªï¼Œä½†å¹¶æ²¡æœ‰å±•ç°è‡ªå·±çœŸå®çš„æ ·å­</p><p>å½“æˆ‘ä»¬æ·±æƒ…ç›¸æ‹¥è€Œå»çš„æ—¶å€™ï¼Œæˆ‘è¿·å¤±äº†ï¼Œä½ çš„å›åº”æ˜¯å¦‚æ­¤çš„çƒ­çƒˆ</p><p>å½“æˆ‘ä»¬åœ¨å°åŒºå¶é‡æµæµªçŒ«çš„æ—¶å€™ï¼Œä½ çš„çˆ±å¿ƒè®©æˆ‘è§¦åŠ¨</p><p>å½“æˆ‘ä»¬åˆšåœ¨ä¸€èµ·æ—¶ä½ å°å¿ƒç¿¼ç¿¼çš„é—®æˆ‘æ˜¯ä¸æ˜¯å¾ˆä¸‘çš„æ—¶å€™ï¼Œæˆ‘ç¬‘ç€å¯¹ä½ è¯´ï¼šâ€œå‚»ç“œï¼Œä½ ä¸€ç‚¹éƒ½ä¸ä¸‘ï¼Œè‡ªä¿¡ç‚¹â€ï¼Œåˆæ˜¯å¦‚æ­¤è®©äººæ­¢ä¸ä½çš„æƒ³å»å‘µæŠ¤</p><p>å½“æˆ‘ä»¬è®¡åˆ’ä¹°æ—¥ç”¨å“çš„æ—¶å€™ï¼Œä½ çš„è´­ç‰©ç»†èŠ‚è®©æˆ‘è§‰å¾—ä½ æ˜¯ä¸ªä¼šç”Ÿæ´»è¿‡æ—¥å­çš„äººï¼Œè®©æˆ‘å¾ˆå®‰å¿ƒ</p><p>å½“å› ä¸ºæˆ‘å†’ç—˜ç—˜ç„¶åç»™æˆ‘ä¿®å¤éœœçš„æ—¶å€™ï¼Œä½ è®©æˆ‘æ„Ÿå—åˆ°äº†ä½ çš„ä½“è´´</p><p>å½“ä½ å¸¦æˆ‘è§ä½ äº²äººçš„æ—¶å€™ï¼Œè®©æˆ‘æ„Ÿå—åˆ°äº†å¾ˆå¼ºçƒˆçš„å®‰å…¨æ„Ÿï¼Œè®©æˆ‘å¾ˆå®‰å¿ƒ</p><p>å½“å¾—çŸ¥ä½ å¾ˆå®…çš„æ—¶å€™ï¼Œæˆ‘è§‰å¾—æ˜¯é‡åˆ°äº†çµé­‚å¥‘åˆçš„ä¼´ä¾£</p><p>å½“ä½ åœ¨å‘¨æœ«è¿˜è®¤è®¤çœŸçœŸçš„å¯¹å¾…å·¥ä½œçš„æ—¶å€™ï¼Œè®©æˆ‘æ„è¯†åˆ°äº†ä½ çš„è´£ä»»å¿ƒå’Œäº‹ä¸šå¿ƒ</p><p>å½“æˆ‘ä»¬æ¸¸æˆè¿è·ªä½ å´å®‰æ…°æˆ‘çš„æ—¶å€™ï¼Œè®©æˆ‘æ˜ç™½æˆ‘åœ¨ä½ å¿ƒé‡Œæ¯”æ¸¸æˆé‡è¦</p><p>å½“æˆ‘åšçš„é¥­èœä¸å¥½åƒä½ å´è¿å¿ƒçš„è¯´å–œæ¬¢çš„æ—¶å€™ï¼Œä»¥åŠä½ åšäº†æ‹¿æ‰‹èœæœŸå¾…æˆ‘åƒçš„æ—¶å€™ï¼Œè®©æˆ‘æ„Ÿå—åˆ°äº†çˆ±çš„æµ“çƒˆ</p><p>â€¦</p><p>ä¸€å¼€å§‹çš„æˆ‘ä»¬ï¼Œåœ¨æ‹çˆ±ä¸­æ³¨é‡å„ç§ç»†èŠ‚ï¼Œç”šè‡³åˆ†å¼€éƒ½æ˜¯ä¸€æ­¥ä¸‰å›å¤´çš„çœ‹ç€å¯¹æ–¹</p><hr><p>è¯¸å¦‚æ­¤ç±»çš„ç”Ÿæ´»ç¢ç‰‡å¤ªå¤šäº†</p><p>æˆ‘ä¹Ÿå½»åº•çš„è¢«ä½ çš„è¿™äº›æ€§æ ¼ç»™æ·±æ·±å¸å¼•ä½äº†ï¼Œæˆ‘å‘ç°æˆ‘ç¦»ä¸å¼€ä½ äº†</p><p>è¿™ä¹Ÿå¯¼è‡´äº†æˆ‘è¶Šæ¥è¶Šçˆ±åƒé†‹äº†ï¼Œå› ä¸ºä½ åœ¨æˆ‘å¿ƒé‡Œçš„åœ°ä½è¶Šæ¥è¶Šé«˜äº†ï¼Œä¸å†æ˜¯æ™®é€šçš„æ‹äººï¼Œæ›´åƒæ˜¯æˆ‘çš„æ˜ç ï¼Œä¸å®¹ä»–äººè§Šè§</p><p>æˆ‘ä»¬ä¹Ÿå› æ­¤ç•™ä¸‹äº†çŸ›ç›¾ï¼Œç”±äºæˆ‘çš„ç–å¿½ï¼Œå¹¶æ²¡æœ‰å¥½å¥½å¤„ç†è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬å¥½åƒä¹Ÿå› ä¸ºè¿™ä¸ªæ…¢æ…¢å˜å¾—ä¸æƒ³å»æä¸æƒ³è¿‡é—®å¤„ç†è¿™äº›é—®é¢˜äº†</p><p>å°±è¿™æ ·æˆ‘ä»¬çš„æ„Ÿæƒ…æ¥åˆ°äº†å¹³æ·¡æœŸï¼Œä¹Ÿæ˜¯çŸ›ç›¾å¤šå‘æœŸï¼Œæ›´æ˜¯ä½ å£é‡Œè¯´çš„æˆ‘ä»¬åœ¨ä¸€èµ·åƒæ˜¯æ­ä¼™è¿‡æ—¥å­çš„æ—¶æœŸ</p><p>å°½ç®¡è¿™æ ·ï¼Œç°åœ¨å›å¿†èµ·ï¼Œæˆ‘ä»ç„¶è§‰å¾—æˆ‘å¯¹ä½ çš„çˆ±æ˜¯æ²¡æœ‰å˜è¿‡çš„ï¼Œæˆ‘è¿™ä¸ªäººå°±ä¸æ€ä¹ˆä¼šè¡¨è¾¾çˆ±æ„ï¼Œç®—æ˜¯ä¸€ç§ç¼ºé™·å§</p><p>å–œæ¬¢ä¸€ä¸ªäººæ˜æ˜éƒ½åˆ»éª¨å­é‡Œäº†ï¼Œè¿˜æ˜¯ä¼šä¸ç»æ€è€ƒè¯´ä¸€äº›ä¼¤äººçš„è¯ï¼Œæˆ‘å¾ˆè‡ªè´£æˆ‘ä¹Ÿå¾ˆéš¾å—ï¼Œæˆ‘å†™è¿™äº›ï¼Œå¸Œæœ›ä½ çœ‹åˆ°äº†èƒ½å¤Ÿæ˜ç™½æˆ‘æœ‰æ—¶å€™çš„å˜´ç¡¬å…¶å®åªæ˜¯æƒ³æ„Ÿå—åˆ°ä½ çš„åçˆ±</p><p>æ˜¯æˆ‘æœ‰äº›æƒå® è€Œéª„äº†ï¼Œå¿½ç•¥äº†ä¸¤ä¸ªäººåœ¨ä¸€èµ·çš„æ ¹æœ¬ï¼Œä¹Ÿå¿½ç•¥äº†æˆ‘ä»¬æ˜¯å› ä¸ºçˆ±æ‰åœ¨ä¸€èµ·çš„</p><p>çŸ›ç›¾é«˜å‘æœŸçš„è¿™æ®µæ—¶é—´ï¼Œæˆ‘å¿½ç•¥äº†åŠæ—¶æ²Ÿé€šé—®é¢˜ï¼Œå»è§£å†³é—®é¢˜</p><p>å…·ä½“é—®é¢˜å°±ä¸æäº†ï¼Œæˆ‘æƒ³è¿‡å»äº†çš„äº‹æƒ…å°±æ·¡åŒ–æ‰å§ï¼Œè¿‡å¥½ä»¥åçš„æ¯ä¸€å¤©ï¼Œèƒ½åšçš„æ˜¯æŠŠæ¡å½“ä¸‹ï¼Œä»¥åä¸è¦çŠ¯åŒæ ·çš„é”™è¯¯</p><p>æ˜¯å› ä¸ºä½ çš„çªç„¶ç¦»å¼€ï¼Œæ‰è®©æˆ‘æ„è¯†åˆ°æˆ‘çš„é—®é¢˜ï¼Œè¿™äº›ä»¥å‰ä»æ¥æ²¡æœ‰é‡è§†è¿‡çš„é—®é¢˜ï¼Œä¹Ÿæ˜¯å› ä¸ºä½ æˆ‘æ‰åæ€çš„é—®é¢˜</p><hr><p>è°ˆè°ˆæˆ‘è‡ªå·±å§ï¼Œä¹Ÿå¯ä»¥è®©ä½ æ›´åŠ äº†è§£æˆ‘</p><p>ä¸æ˜¯æˆ‘ç”©é”…ï¼Œè¯´èµ·æ¥å¯èƒ½å’ŒèŒä¸šç—…æœ‰å…³ç³»ï¼Œç¨‹åºå‘˜å›ºæœ‰æ€ç»´å°±æ˜¯è¿™æ ·</p><p>æ™®é€šçš„ä¸€ä¸ªéœ€æ±‚ï¼Œå¦‚æœå­˜åœ¨å¤šç§è¾“å‡ºå¯èƒ½ï¼Œéƒ½éœ€è¦å‘äº§å“é—®æ˜ç™½åæ‰èƒ½å†™ä»£ç </p><p>ä¸¾ä¸ªä¾‹å­ï¼šå®ç°ä¸€ä¸ªæŒ‰é’®ï¼Œå¯èƒ½å°±éœ€è¦é—®è¿™ä¸ªæŒ‰é’®çš„å°ºå¯¸å¤§å°é¢œè‰²ï¼ŒæŒ‰ä¸‹æ¾å¼€çš„äº¤äº’åŠ¨ç”»ï¼ŒæŒ‰é’®åœ¨ä¸åŒåœºæ™¯ä¸‹çš„å‘ˆç°ï¼Œç®¡ç†å‘˜å’Œæ™®é€šç”¨æˆ·çš„ä¸åŒå“åº”â€¦</p><p>å¯èƒ½æˆ‘è¿™ä¸ªä¾‹å­ä¸å¤ªå¦¥å½“ï¼Œå°±æ˜¯æƒ³è¡¨è¾¾å¾ˆå¤šæ—¶å€™å–œæ¬¢åˆ¨æ ¹é—®åº•çš„é—®ï¼Œé¿å…åé¢å‡ºç°é—®é¢˜ï¼Œè¿™ä¹Ÿæ˜¯ä½ é‚£æ®µæ—¶é—´åæ§½çš„æˆ‘å•¥äº‹æƒ…éƒ½è¦é—®ä½  à²¥_à²¥</p><p>é™¤æ­¤ä¹‹å¤–å‘¢ï¼Œæˆ‘è¿™ä¸ªäººæœ‰æ„Ÿæƒ…æ´ç™–ï¼Œå¹¶ä¸æ˜¯è¯´åƒé†‹å°±æ˜¯ä¸ä¿¡ä»»ä½ ï¼Œä½ çš„å¿ƒé‡Œåœ°ä½å¹¶ä¸ä¼šå› ä¸ºæˆ‘åƒé†‹è€Œé™ä½ä¸æ¯«ï¼ŒçŸ¥é“å—</p><p>åƒé†‹åªæ˜¯å› ä¸ºè§‰å¾—è‡ªå·±çš„å¿ƒå¿ƒå¿µå¿µçš„çå®ï¼Œåˆ«äººçŸ¥é“äº†ä¼šå¤©å¤©æƒ¦è®°ï¼Œæˆ‘åˆä¸èƒ½ç›´æ¥å»å½±å“åˆ«äººæ€ä¹ˆæ ·ï¼Œæ‰€ä»¥å°±è¡¨ç°å‡ºåƒé†‹è®©ä½ åœ¨æ„</p><p>ç„¶åå°±æ˜¯æˆ‘çš„é€‰æ‹©ææƒ§ç—‡äº†ï¼Œæˆ‘ä¼°è®¡ä½ ä¹Ÿæœ‰ï¼Œå°±æ¯”å¦‚æˆ‘æŒ‘ä»»ä½•ä¸œè¥¿å¯ä»¥å¾ˆä¹…å¾ˆä¹…</p><p>ä¹‹å‰ç»™ä½ é€‰ç¤¼ç‰©çš„æ—¶å€™å°±æ˜¯ï¼Œæˆ‘æƒ³ä½“ç°å‡ºæˆ‘çš„å¿ƒæ„ï¼Œä¸æƒ³éšä¾¿ä¹°ä¸ªä¸œè¥¿åº”ä»˜ï¼Œæƒ³è®©ä½ æ„Ÿå—åˆ°æˆ‘çš„è´´å¿ƒï¼Œå®³æ€•ä¹°é”™äº†ä½ ä¸å–œæ¬¢</p><p>å¯¹æˆ‘è€Œè¨€ï¼Œä¸¤ä¸ªäººåœ¨ä¸€èµ·äº†æˆ‘å°±ä¸ä¼šå»è®¡è¾ƒä»˜å‡ºï¼Œä¹Ÿä¸ä¼šåå•¬ä»˜å‡ºï¼Œä¸å­˜åœ¨ä¸æƒ³ä¸æ„¿å’Œä¸åœ¨æ„çš„æƒ…å†µï¼Œè¿™ä¸ªä½ ä¸€å®šè¦çŸ¥é“å™¢</p><p>æˆ‘å¸Œæœ›çš„æ˜¯ä¸¤ä¸ªäººä¸ç®¡æ˜¯è°å¿ƒæœ‰ä¸æ»¡æˆ–è€…æ˜¯æœ‰æƒ³æ³•éƒ½å¯ä»¥è¡¨è¾¾å‡ºæ¥ï¼Œæˆ‘æ„¿æ„å»å€¾å¬ï¼Œä¸ºæˆ‘ä»¬æ„Ÿæƒ…å»æ”¹æ­£</p><p>ç„¶åå¦‚æœå¯¹ç›¸å¤„æ¨¡å¼ä¸æ»¡æ„ï¼Œæ¯”å¦‚å’Œå†…å¿ƒæœŸæœ›æœ‰åå·®ï¼Œè¿™äº›éƒ½å¯ä»¥ç›´æ¥äº¤æµï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯ä¸åˆ†å½¼æ­¤çš„ï¼Œè¦ç›¸å¤„å¾ˆä¹…å¾ˆä¹…</p><p>è¿˜æœ‰å°±æ˜¯éœ€æ±‚å•¦ï¼Œæƒ³è¦ä»€ä¹ˆå¯ä»¥ç›´æ¥è¯´ï¼Œæˆ‘ä»¬æ˜¯æ‹äººå‘€ä¹–ä¹–ï¼Œä¸å¿…çŸœæŒï¼Œæ€»æ¯”æœ€åæˆ‘æŒ‘åŠå¤©é€‰äº†ä¸ªæ²¡å•¥ç”¨çš„ä¸œè¥¿å¥½ ğŸ’€ğŸ’€ğŸ’€</p><hr><p>åˆ†å¼€è¿™æ®µæ—¶é—´ï¼Œæˆ‘ä¸€ç›´åœ¨åæ€è‡ªå·±çš„é—®é¢˜ï¼Œå› ä¸ºæˆ‘ä¸æƒ³é‡è¹ˆè¦†è¾™ï¼Œæ›´ä¸æƒ³å¸¦ç»™åæ¥äººä¼¤å®³äº†</p><p>æˆ‘å¼€å§‹ç»ƒå­—ï¼Œå¹³æ—¶è½ä¸‹çš„è·‘æ­¥ä¹Ÿå¼€å§‹äº†ï¼Œå› ä¸ºè·‘æ­¥å¯ä»¥è®©æˆ‘çš„æƒ…ç»ªå‘æ³„ï¼Œå†™å­—å¯ä»¥è®©æˆ‘çš„å†…å¿ƒå¹³é™</p><p>åªæœ‰è¿™æ ·ï¼Œæˆ‘æ‰èƒ½åœ¨ç—›è‹¦ä¸­å»å›å¿†ï¼Œå»æ§åˆ¶è‡ªå·±çš„æƒ…ç»ªï¼Œè®©è‡ªå·±ä¸è¦å†²åŠ¨çš„çŠ¯ä¸‹æ›´ä¸¥é‡çš„é”™è¯¯</p><p><strong>æˆ‘æƒ³ä½ ä¹Ÿæœ‰è¿‡ç–‘é—®ï¼Œä¸ºä»€ä¹ˆæˆ‘éè¦æŠ“ç€ä½ ä¸æ”¾</strong>ï¼Ÿ</p><p>ä¸æ˜¯è¯´å½¼æ­¤ä»¥åæ‰¾ä¸åˆ°æ›´åˆé€‚çš„ï¼Œä¹Ÿä¸æ˜¯å› ä¸ºæƒ³è¦å¼¥è¡¥ï¼Œæ›´ä¸æ˜¯å¤±å»åçš„å¾æœæ¬²</p><p>æ˜¯æˆ‘å›å¿†è¿‡å¾€åå¾—å‡ºçš„ï¼Œæˆ‘åº”è¯¥æŒ½å›çš„ç»“è®ºï¼Œå› ä¸ºä½ æ˜¯çœŸå¿ƒçš„æƒ³è¦å’Œæˆ‘ç›¸å¤„å¾—ï¼Œå¹¶ä¸æ˜¯ç©ç©è€Œå·²ï¼Œæˆ‘èƒ½å¤Ÿæ„Ÿå—åˆ°</p><p>æ˜¯ä½ ç»™æˆ‘äº†è®¤å¯ï¼Œè®©æˆ‘çš„å¿ƒæœ‰äº†å½’å±ï¼Œè®©æˆ‘å½»åº•çš„çˆ±ä¸Šä½ äº†</p><p>æ˜¯ä½ æ›¾ç»å¸¦ç»™æˆ‘çš„ç¾å¥½å›å¿†ï¼Œæ˜¯ä½ çš„èµ¤è¯šçœŸå¿ƒï¼Œæˆ‘è§‰å¾—æˆ‘ä¸æŒ½å›æˆ‘ä¼šåæ‚”ä¸€è¾ˆå­</p><p><strong>è¿™å°±æ˜¯æˆ‘æƒ³å›ç­”ä½ çš„ç†ç”±</strong></p><p>ä½†æ˜¯æˆ‘ä¹ŸçŸ¥é“ï¼Œä½ çš„å¤±æœ›ä¸æ˜¯ä¸€å¤©é€ æˆçš„ï¼Œæˆ‘ä»¬ä¹‹é—´ç¼ºä¹æ²Ÿé€šï¼Œè®©å¾ˆå¤šé—®é¢˜é—ç•™ä¸‹æ¥æ²¡æœ‰å¤„ç†</p><p>æ‰€ä»¥è¿™æ®µæ—¶é—´ä½ çš„å†·æ·¡ï¼Œä¸å›æ¶ˆæ¯ï¼Œç”šè‡³åªæ˜¯é—®ç­”å¼çš„æ•·è¡ï¼Œéƒ½æ˜¯æˆ‘åº”å¾—çš„ï¼Œæ€ªä¸åˆ°ä½ </p><p>æˆ‘èƒ½å¤Ÿæ„Ÿå—åˆ°ä½ å†…å¿ƒçš„çº ç»“æ— å¥ˆï¼Œç”šè‡³å®³æ€•æˆ‘ä¼šä¸ä¼šè¿˜åƒä»¥å‰ä¸€æ ·å†²åŠ¨ï¼Œä¼šä¸ä¼šé‡è¹ˆè¦†è¾™</p><p>æ‰€ä»¥æˆ‘åœ¨æ”¹å˜è‡ªå·±ï¼Œå°±ç®—ä¸ä¸ºäº†å¤åˆåçš„ä½ ï¼Œä¹Ÿè¦ä¸ºäº†é‚£ä¸ªå’Œæˆ‘èµ°å®Œä¸€ç”Ÿçš„äºº</p><p>æˆ‘å­¦ä¼šäº†ä¸€ä¸ªæ–°çš„è¯<strong>é’æ„ŸåŠ›</strong>ï¼Œä»»ä½•äº‹æƒ…éƒ½åº”è¯¥è€ƒè™‘å¥½äº†æ‰åšå®šè®ºï¼Œä¸èƒ½å•çº¯é çŒœæµ‹å»åšä¸€äº›äº‹æƒ…ï¼Œå¦åˆ™å¯¹ä½ ä¹Ÿä¸å…¬å¹³</p><p>åœ¨æŒ½å›ä½ çš„è¿™æ®µæ—¶é—´ï¼Œæˆé•¿äº†å¾ˆå¤šï¼Œæ˜ç™½äº†å¾ˆå¤šä»¥å‰ä¸çŸ¥é“çš„ç›¸å¤„ç›¸æ‹çš„é“ç†</p><p>æ¯”å¦‚é™ªä¼´ä¸æ˜¯ç®€å•çš„åœ¨ä¸€èµ·è¿‡æ—¥å­ï¼Œè€Œæ˜¯æƒ…ç»ªä¸Šçš„å…±é¸£å’Œä½“è´´</p><p>æ¯”å¦‚è´£ä»»å¿ è¯šä¿¡ä»»éƒ½å¾ˆé‡è¦</p><p>æ¯”å¦‚é¿å…åµæ¶ï¼Œå°±ç®—åµæ¶ä¹Ÿä¸èƒ½æ— å˜å¤´ç”šè‡³æ˜¯åµæ¶åæ€ä¹ˆå»å¤„ç†é—®é¢˜å’Œå“„ä½ å¼€å¿ƒï¼Œä¸è®©æƒ…ç»ªè¿‡å¤œ</p><p>æ¯”å¦‚ä¸¤ä¸ªäººç›¸å¤„æœ€é‡è¦çš„æ˜¯å¼€å¿ƒï¼Œå’Œæ°”ç”Ÿè´¢ä¸æ˜¯æ²¡é“ç†çš„</p><p>æ¯”å¦‚æ‹çˆ±ä¸æ˜¯çŸ­æœŸçƒ­åº¦ï¼Œå¹³æ·¡çš„æ—¥å­æ²¡æœ‰æƒŠå–œä¹Ÿè¦åˆ›é€ æƒŠå–œï¼Œè¿™æ˜¯æˆ‘ä»¬ä¸¤ä¸ªäººçš„å›å¿†</p><p>æ¯”å¦‚æ²¡æœ‰äººä¼šå–œæ¬¢æ²¡ä¸»è§çš„äººï¼Œåšä»»ä½•äº‹æƒ…åº”è¯¥æœ‰è‡ªå·±ç®€å•çš„åˆ¤æ–­ï¼Œæœ‰è‡ªå·±çš„ç«‹åœºå’Œä¸»è§</p><p>ç­‰ç­‰ç­‰â€¦</p><hr><p>æˆ‘çˆ±ä½ ï¼Œæˆ‘æ„¿æ„ä¸ºä½ æ‰¿æ‹…è´£ä»»ï¼Œè¿™ä¸æ˜¯è¯´è¯´è€Œå·²</p><p>ä½†æˆ‘æ›´å¸Œæœ›ä½ çœŸæ­£çš„å¼€å¿ƒå¹¸ç¦ï¼Œæ‰€ä»¥å°±ç®—æœ€åä½ æ²¡æœ‰é€‰æ‹©æˆ‘ï¼Œè¿™ä¹Ÿæ˜¯ä½ çš„æƒåŠ›ï¼ŒåŒå‘å¥”èµ´æ›´æœ‰æ„ä¹‰</p><p>æˆ‘ç›¸ä¿¡æˆ‘ä»¬ä¹‹é—´èƒ½å¤Ÿå’Œå¥½å¦‚åˆï¼Œç”šè‡³è¶…è¿‡ä»å‰ï¼Œå› ä¸ºæˆ‘ä»¬æœ‰äº†è¿™æ®µç»å†ï¼Œæœ‰äº†é‡åˆ°é—®é¢˜å¦‚ä½•è§£å†³å¤„ç†çš„èƒ½åŠ›ï¼Œæ›´é‡è¦çš„æ˜¯å­¦ä¼šäº†æ²Ÿé€šï¼Œä¸æŠ›å¼ƒå½¼æ­¤</p><p>è¿™æ®µæ—¶é—´ï¼Œæˆ‘å¿å¿‘ä¸å®‰ï¼Œè¾—è½¬éš¾çœ ï¼Œä¸€é—²ä¸‹æ¥ï¼Œè„‘æµ·å…¨æ˜¯æˆ‘ä»¬çš„è¿‡å¾€</p><p>ä½†æ˜¯æˆ‘ä¸èƒ½è‡ªç§çš„æŠŠæƒ³æ³•å¼ºåŠ ç»™ä½ ï¼Œæ›´ä¸èƒ½åƒå€’è‹¦æ°´ä¸€æ ·çš„å’Œä½ è¯‰è¯´ï¼Œç»™ä½ å‹åŠ›</p><p>ä¸å®Œæ•´çš„æˆ‘æ˜¯ä¸å€¼å¾—ä½ çˆ±çš„ï¼Œè¿™æ®µæ—¶é—´çš„è°ƒæ•´ï¼Œæˆ‘å·²ç»åšå¥½äº†å‡†å¤‡</p><p>çˆ±æ„æµä¼ ï¼Œæˆ‘ç›¸ä¿¡æˆ‘ä»¬éƒ½æ˜¯åˆæ—¶æ¨¡æ ·</p><p>æˆ‘ä¸€ç›´åœ¨åŸåœ°ç­‰ä½ </p><hr><p>ç°åœ¨ä½ å›å¤´äº†ï¼Œç»™æˆ‘äº†å¸Œæœ›ï¼Œè™½ç„¶ä½ è¿˜æ˜¯ä¼šæ•…æ„ä¸å›æ¶ˆæ¯ï¼Œä½†æˆ‘èƒ½ç†è§£ï¼Œæˆ‘ä¹Ÿæ˜¯æŠŠå®ƒå½“åšæ˜¯å¯¹æˆ‘çš„æƒ©ç½šäº†</p><p>æˆ‘æœŸæœ›å’Œä½ çš„è§é¢ï¼Œè§£å¼€å½¼æ­¤å¿ƒç»“ï¼Œé‡æ–°åœ¨ä¸€èµ·</p><p>ç›¸äº’å¥”èµ´ï¼Œä¸ç¦»ä¸å¼ƒ</p><p>ç”¨æ–°çš„æ€åº¦è¿æ¥æ›´å¥½çš„æˆ‘ä»¬</p><p>â€”â€”â€”ä½ æ°¸è¿œçš„è‡­ç‹—å±</p>]]></content>
      
      
      <categories>
          
          <category> éšç¬”æ—¥è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¸å¥¹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¤§æ–‡ä»¶çš„åˆ†æ®µå¹¶å‘ä¸Šä¼ å®ç°</title>
      <link href="/share/file-part-upload/"/>
      <url>/share/file-part-upload/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><p><em>åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œéš¾å…ä¼šé‡åˆ°æ–‡ä»¶ä¸Šä¼ è¿™ä¸ªåŠŸèƒ½ã€‚æœ‰äº›æœåŠ¡å™¨ä¼šé™åˆ¶å•ä¸ªæ–‡ä»¶çš„å­˜å‚¨å¤§å°ï¼Œé‚£ä¹ˆç”¨æˆ·ä¸Šä¼ è¶…å¤§æ–‡ä»¶æ€ä¹ˆå¤„ç†ï¼Ÿ</em></p><span id="more"></span><h3 id="æ–‡ä»¶ä¸ºä»€ä¹ˆéœ€è¦åˆ†æ®µï¼Ÿ"><a href="#æ–‡ä»¶ä¸ºä»€ä¹ˆéœ€è¦åˆ†æ®µï¼Ÿ" class="headerlink" title="æ–‡ä»¶ä¸ºä»€ä¹ˆéœ€è¦åˆ†æ®µï¼Ÿ"></a>æ–‡ä»¶ä¸ºä»€ä¹ˆéœ€è¦åˆ†æ®µï¼Ÿ</h3><ul><li><p>ä¸Šä¼ é€Ÿåº¦ï¼šå°†ä¸€ä¸ªå¤§æ–‡ä»¶åˆ†å‰²æˆå¤šä¸ªå°æ–‡ä»¶å—åï¼Œæ¯ä¸ªæ–‡ä»¶å—çš„å¤§å°ç›¸å¯¹è¾ƒå°ï¼Œå¯ä»¥å¤§å¤§æé«˜æ–‡ä»¶çš„ä¸Šä¼ é€Ÿåº¦ã€‚</p></li><li><p>ä¸Šä¼ å¯é æ€§ï¼šå¤§å¤§é™ä½äº†ç”±äºç½‘ç»œä¸ç¨³å®šæˆ–è€…ä¸Šä¼ ä¸­æ–­æƒ…å†µå‡ºç°çš„æ¦‚ç‡ã€‚åˆ†æ®µåå³ä½¿ä¸Šä¼ å¤±è´¥äº†ï¼Œä¹Ÿåªéœ€è¦é‡æ–°ä¸Šä¼ å¤±è´¥çš„æ–‡ä»¶å—å³å¯ã€‚</p></li><li><p>æœåŠ¡å™¨é™åˆ¶ï¼šæœ‰äº›æœåŠ¡å™¨å¯èƒ½ä¼šé™åˆ¶å•ä¸ªæ–‡ä»¶çš„ä¸Šä¼ å¤§å°ï¼Œå¦‚æœä¸Šä¼ æ–‡ä»¶è¿‡å¤§ï¼Œå¯èƒ½ä¼šé€ æˆä¸Šä¼ å¼‚å¸¸ã€‚</p></li><li><p>ä¾¿äºç®¡ç†ï¼šå°†æ–‡ä»¶åˆ†å‰²æˆå¤šä¸ªå°æ–‡ä»¶å—ï¼Œå¯ä»¥æ›´æ–¹ä¾¿åœ°ç®¡ç†æ–‡ä»¶ï¼Œå¯¹æ–‡ä»¶å—å•ç‹¬æ“ä½œã€‚</p></li></ul><h3 id="æ–‡ä»¶åˆ†æ®µå¤„ç†"><a href="#æ–‡ä»¶åˆ†æ®µå¤„ç†" class="headerlink" title="æ–‡ä»¶åˆ†æ®µå¤„ç†"></a>æ–‡ä»¶åˆ†æ®µå¤„ç†</h3><ul><li><p>è·å–æ–‡ä»¶å¯¹è±¡ <code>File</code></p></li><li><p>åˆ©ç”¨ <code>Blob.slice</code> æ–¹æ³•åˆ†å‰²æ–‡ä»¶ï¼šä½¿ç”¨ <code>Blob</code> å¯¹è±¡çš„ <code>slice</code> æ–¹æ³•å°†æ–‡ä»¶åˆ†å‰²æˆå¤šä¸ªæ–‡ä»¶å—ã€‚</p><p>å®ç°å¦‚ä¸‹ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// è·å–æ–‡ä»¶å¯¹è±¡</span><span class="token keyword">function</span> <span class="token function">getFileById</span><span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token operator">?.</span>files<span class="token operator">?.</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/** * è·å–æ–‡ä»¶åˆ†ç‰‡ slice ä¿¡æ¯ * @param fileSize æ–‡ä»¶å¤§å° * @param chunkSize chunk å¤§å°ï¼Œé»˜è®¤æ¯ç‰‡ 5 MB */</span><span class="token keyword">function</span> <span class="token function">getFileSliceRange</span><span class="token punctuation">(</span>fileSize<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> chunkSize <span class="token operator">=</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> chunksRange<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token punctuation">&#123;</span> start<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> end<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">&#125;</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> chunksLen <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>fileSize <span class="token operator">/</span> chunkSize<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> chunksLen<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> start <span class="token operator">=</span> i <span class="token operator">*</span> chunkSize<span class="token punctuation">;</span>    <span class="token keyword">const</span> end <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>start <span class="token operator">+</span> chunkSize<span class="token punctuation">,</span> total<span class="token punctuation">)</span><span class="token punctuation">;</span>    chunksRange<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> start<span class="token punctuation">,</span> end <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">return</span> chunksRange<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// æ–‡ä»¶ç¢å—ï¼š file.slice(chunksRange[index].start, chunksRange[index].end);</span></code></pre></li></ul><p>æœ‰çš„åŒå­¦åº”è¯¥æ³¨æ„åˆ°äº†ï¼Œæˆ‘è¿™é‡Œå¹¶æ²¡æœ‰ç›´æ¥å¯¹æ–‡ä»¶è¿›è¡Œåˆ†å‰²ï¼Œç„¶åå°†æ–‡ä»¶ç¢å—ç”¨å˜é‡å­˜å…¥å†…å­˜å½“ä¸­ï¼Œè€Œä»…ä»…åªæ˜¯ä¿å­˜äº†æ¯ä¸ªæ–‡ä»¶ç¢å—å¯¹åº”çš„ä½ç½®ä¿¡æ¯ã€‚ï¼ˆ<strong>åœ¨å®é™…å–ç”¨çš„æ—¶å€™ï¼Œé€šè¿‡<code>file.slice(start, end)</code>å–ç”¨ã€‚é¿å…ç›´æ¥ä¸€æ¬¡æ€§å¯¹æ–‡ä»¶åˆ‡å‰²å†æ”¾å…¥å†…å­˜ï¼Œåè€…æ˜¯å¯¹æ•´ä¸ªæ–‡ä»¶çš„ä¸€ä»½æ‹·è´ï¼Œå¦‚æœæ–‡ä»¶è¿‡å¤§ï¼Œä¼šåŠ å¤§æµè§ˆå™¨å†…å­˜æŸè€—</strong>ï¼‰</p><p><em>okï¼Œç°åœ¨æ–‡ä»¶ç¡®å®æ˜¯å·²ç»åšåˆ°åˆ†ç‰‡äº†ï¼Œè§£å†³äº†å¤§æ–‡ä»¶æ²¡åŠæ³•ä¸Šä¼ çš„é—®é¢˜ï¼Œé‚£å¦‚æœæ–‡ä»¶ç¢ç‰‡å¾ˆå¤šï¼Œåˆè¯¥æ€ä¹ˆæå‡ä¸Šä¼ æ•ˆç‡ï¼Œå®ç°ä¼˜åŒ–å‘¢ï¼Ÿ</em></p><h3 id="åˆ†æ®µä¸Šä¼ å¹¶å‘æ§åˆ¶"><a href="#åˆ†æ®µä¸Šä¼ å¹¶å‘æ§åˆ¶" class="headerlink" title="åˆ†æ®µä¸Šä¼ å¹¶å‘æ§åˆ¶"></a>åˆ†æ®µä¸Šä¼ å¹¶å‘æ§åˆ¶</h3><p>ç›®å‰çš„ä¸€äº›ä¸»æµçš„æµè§ˆå™¨ï¼Œéƒ½æœ‰é»˜è®¤çš„å¹¶å‘è¯·æ±‚é™åˆ¶ï¼Œæ¢å¥è¯è¯´ï¼Œå³æ—¶æˆ‘ä»¬åœ¨ä»£ç ä¸­å¯¹è¯·æ±‚å¹¶å‘æ•°ä¸åšé™åˆ¶ï¼Œå®é™…ä¸Šä¼ æ—¶ï¼Œä»ç„¶ä¹Ÿä¸ä¼šåŒæ—¶å‘èµ·è¿‡å¤šçš„è¯·æ±‚ã€‚</p><blockquote><p><code>Chrome/Firefox/Safari</code> åŒåŸŸåä¸‹é»˜è®¤çš„å¹¶å‘æ•°ä¸º <code>6</code>ï¼Œ<code>IE</code> åŒåŸŸåä¸‹é»˜è®¤çš„å¹¶å‘æ•°ä¸º <code>2</code>ã€‚é‚£ä¹ˆå¦‚ä½•ä¿®æ”¹è¿™äº›é™åˆ¶å‘¢ï¼Ÿ</p></blockquote><blockquote><p><code>Chrome</code> å¯ä»¥é€šè¿‡ä¿®æ”¹ç½‘ç»œå‚æ•°å®ç°ä¿®æ”¹ï¼Œ<code>IE</code> éœ€è¦ä¿®æ”¹æ³¨å†Œè¡¨ã€‚<code>Safari</code> åˆ™æ˜¯åœ¨ <code>HTTP/2</code> ä¸åšé™åˆ¶ã€‚</p></blockquote><p>é‚£ä¹ˆï¼Œæµè§ˆå™¨é™åˆ¶äº†æˆ‘ä»¬çœŸçš„ä¸ç”¨åœ¨ä»£ç ä¸­é™åˆ¶å¹¶å‘æ•°äº†å—ï¼Ÿ<code>no...no...no</code>ï¼Œä¸ºä»€ä¹ˆä»ç„¶éœ€è¦é™åˆ¶å‘¢ï¼Ÿ</p><p><strong>é¿å…å°†ç½‘ç»œè¯·æ±‚çš„å¹¶å‘é™åˆ¶å…¨äº¤ç»™æµè§ˆå™¨ï¼Œé€ æˆåœ¨æ–‡ä»¶ä¸Šä¼ è¿‡ç¨‹ä¸­ï¼Œç•Œé¢çš„å…¶ä»–æ“ä½œè¯·æ±‚è¢«é˜»å¡ï¼Œç›´åˆ°æ–‡ä»¶ç¢å—ä¸Šä¼ ç»“æŸæ‰è¢«æ‰§è¡Œã€‚åŒæ—¶ï¼Œä»£ç ä¸­çš„é™åˆ¶æ•°ï¼Œä¹Ÿåº”è¯¥å°½é‡å°äºæµè§ˆå™¨çš„é»˜è®¤å¹¶å‘æ•°é‡ï¼Œä¸€èˆ¬å– <code>2</code> æˆ–è€… <code>3</code>ã€‚</strong></p><p>å¦‚ä½•ç®€æ´ä¼˜é›…çš„å®ç°æ–‡ä»¶åˆ†æ®µçš„å¹¶å‘æ§åˆ¶å‘¢ï¼Ÿ</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">/** * æ–‡ä»¶å—ä¸Šä¼  * @param file æ–‡ä»¶ * @param preSignQuery æ–‡ä»¶å—é¢„ç­¾åä¸Šä¼ çš„è¯·æ±‚ query * @param [onUploadProgress] è‡ªå®šä¹‰ä¸Šä¼ è¿›åº¦ */</span><span class="token keyword">function</span> <span class="token function">partUploadHandler</span><span class="token punctuation">(</span>  file<span class="token operator">:</span> File <span class="token operator">|</span> Blob<span class="token punctuation">,</span>  preSignQuery<span class="token operator">:</span> <span class="token punctuation">&#123;</span> uploadId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> objectName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> partNumber<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  onUploadProgress<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> ProgressEvent<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">,</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// è·å–æ–‡ä»¶ä¸Šä¼ çš„é¢„ç­¾ååœ°å€ preSignProvider --- æä¾›æ¥å£</span>  <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">preSignProvider</span><span class="token punctuation">(</span>preSignQuery<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> bucket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'bucket'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// æ–‡ä»¶ä¸Šä¼ åˆ°å¯¹è±¡å­˜å‚¨æœåŠ¡å™¨</span>  <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>origin<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/proxyServicePrefix/s3</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>url<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> file<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>    headers<span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token string-property property">'Content-Type'</span><span class="token operator">:</span> file<span class="token punctuation">.</span>type <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    onUploadProgress<span class="token operator">:</span> onUploadProgress<span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>url<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'?'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">?bucket=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>bucket<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/** * æ–‡ä»¶åˆ†ç‰‡å¹¶å‘ä¸Šä¼ å¤„ç† * @param file éœ€è¦åˆ†ç‰‡ä¸Šä¼ çš„æºæ–‡ä»¶ * @param preSignQuery æ–‡ä»¶å—é¢„ç­¾åä¸Šä¼ çš„è¯·æ±‚ query * @param [chunkSize] åˆ‡ç‰‡å¤§å°ï¼Œç”¨äºåˆ†ç‰‡ã€è®¡ç®—å·²ä¸Šä¼ è¿›åº¦ï¼ŒMinioæœ‰åˆ†é¡µæ—¶æ¯ä¸€ç‰‡å¤§å°è‡³å°‘ä¸º 5m çš„é™åˆ¶ * @param [limit] å¹¶å‘æ•°ï¼Œé»˜è®¤æ˜¯ 2 */</span><span class="token keyword">function</span> <span class="token function">uploadParallel</span><span class="token punctuation">(</span>  file<span class="token operator">:</span> File<span class="token punctuation">,</span>  preSignQuery<span class="token operator">:</span> <span class="token punctuation">&#123;</span> uploadId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> objectName<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  chunkSize <span class="token operator">=</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">,</span>  limit <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> uid<span class="token punctuation">,</span> type<span class="token punctuation">,</span> size <span class="token punctuation">&#125;</span> <span class="token operator">=</span> file<span class="token punctuation">;</span> <span class="token comment">// uid é File å¯¹è±¡æä¾›ï¼Œå¯ä»¥ç†è§£ä¸ºæ–‡ä»¶çš„ key</span>  <span class="token keyword">const</span> reqPromise<span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// è®°å½•åˆ†æ®µåçš„å…¨éƒ¨è¯·æ±‚ç»“æœ</span>  <span class="token keyword">const</span> pendingReq<span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// ç›®å‰çš„è¯·æ±‚é˜Ÿåˆ—ï¼Œç”¨äºå¹¶å‘é™åˆ¶</span>  <span class="token keyword">const</span> chunksLoaded<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// å·²ç»ä¸Šä¼ å®Œæˆçš„æ•°æ®æµï¼Œç”¨äºè®¡ç®—ä¸Šä¼ è¿›åº¦å¹¶å±•ç¤º</span>  <span class="token keyword">const</span> chunksRange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getFileSliceRange</span><span class="token punctuation">(</span>size<span class="token punctuation">,</span> chunkSize<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è·å–åˆ†æ®µä¿¡æ¯</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token punctuation">[</span>idx<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> start<span class="token punctuation">,</span> end <span class="token punctuation">&#125;</span><span class="token punctuation">]</span> <span class="token keyword">of</span> chunksRange<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// åˆ›å»ºæ–‡ä»¶å—çš„è¯·æ±‚ promise</span>    <span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token function">partUploadHandler</span><span class="token punctuation">(</span>      file<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">,</span>      <span class="token punctuation">&#123;</span>        <span class="token operator">...</span>preSignQuery<span class="token punctuation">,</span>        partNumber<span class="token operator">:</span> idx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// è®°å½•å½“å‰æ˜¯ä¸Šä¼ çš„ç¬¬å‡ ç‰‡</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>        chunksLoaded<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">.</span>loaded<span class="token punctuation">;</span>        <span class="token keyword">const</span> loaded <span class="token operator">=</span> chunksLoaded<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>sum<span class="token punctuation">,</span> c<span class="token punctuation">)</span> <span class="token operator">=></span> sum <span class="token operator">+</span> c<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">const</span> percentage <span class="token operator">=</span> <span class="token punctuation">(</span>loaded <span class="token operator">/</span> size<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">;</span>        <span class="token comment">// æ‰¾åˆ°å½“å‰æ­£åœ¨ä¸Šä¼ çš„æ–‡ä»¶ï¼Œç»™å®ƒç»‘å®šè‡ªå®šä¹‰çš„è¿›åº¦æ¡ä¿¡æ¯</span>        <span class="token keyword">const</span> currentFile <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>uploadingFiles<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span> <span class="token operator">=></span> f<span class="token punctuation">.</span>uid <span class="token operator">===</span> uid<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// percentage 100ï¼Œå¹¶éçœŸçš„å®Œæˆäº†æ•´ä¸ªä¸Šä¼ è¿‡ç¨‹äº†ï¼Œä»éœ€åç»­çš„å®Œæ•´æ€§æ ¡éªŒé€šè¿‡</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>currentFile <span class="token operator">&amp;&amp;</span> percentage <span class="token operator">!==</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          currentFile<span class="token punctuation">.</span>percentage <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>percentage<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>    reqPromise<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// å½“å‰ p ä¸Šä¼ ç»“æŸåï¼Œä» pendingReq é˜Ÿåˆ—ä¸­ç§»é™¤</span>    pendingReq<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> pendingReq<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>pendingReq<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>pendingReq<span class="token punctuation">.</span>length <span class="token operator">>=</span> limit<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token comment">// å½“è¾¾åˆ°å¹¶å‘æ•°é™åˆ¶æ—¶ï¼Œç­‰å¾…å‰é¢ä¸€ä¸ªæ–‡ä»¶ç¢å—ä¸Šä¼ å®Œæˆï¼Œæ‰ç»§ç»­åç»­çš„åˆ†æ®µ</span>      <span class="token keyword">await</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span>pendingReq<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  <span class="token comment">// è®°å½•ç¬¬ä¸€ä¸ªåœ°å€ï¼ˆéƒ½æ˜¯ä¸€æ ·çš„ï¼Œè¯¦è§ partUploadHandlerï¼‰</span>  <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>reqPromise<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// main å‡½æ•°. eg. element/antDesign æ‹¿åˆ°çš„è‡ªå®šä¹‰ä¸Šä¼ å¯¹è±¡</span><span class="token keyword">function</span> <span class="token function">httpRequestMethod</span><span class="token punctuation">(</span>request<span class="token operator">:</span> HttpRequestOptions<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> file <span class="token operator">=</span> res<span class="token punctuation">.</span>file<span class="token punctuation">;</span>  <span class="token comment">// è®°å½•å½“å‰æ­£åœ¨ä¸Šä¼ çš„æ–‡ä»¶ä¿¡æ¯</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>uploadingFiles<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> uid<span class="token operator">:</span> file<span class="token punctuation">.</span>uid<span class="token punctuation">,</span> status<span class="token operator">:</span> <span class="token string">'uploading'</span><span class="token punctuation">,</span> percentage<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// è·å–åˆ†æ®µä¸Šä¼  idã€å’Œ objectName (æä¾› multipartUploadId æ¥å£)</span>    <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> uploadId<span class="token punctuation">,</span> objectName <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">multipartUploadId</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// å¼€å§‹åˆ†ç‰‡ä¸Šä¼ æ–‡ä»¶</span>    <span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">uploadParallel</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> uploadId<span class="token punctuation">,</span> objectName <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// ä¸Šä¼ å®Œæˆ --- æä¾› finishMultipartUpload æ¥å£</span>    <span class="token keyword">await</span> <span class="token function">finishMultipartUpload</span><span class="token punctuation">(</span>uploadId<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> objectName <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// è¿™ä¸ªæ•°æ®æ˜¯å­˜å…¥åˆ° form è¡¨å•çš„</span>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> file<span class="token punctuation">.</span>name<span class="token punctuation">,</span> path <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">&#123;</span>    message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'æ–‡ä»¶ä¸Šä¼ å¤±è´¥ï¼'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// ä»è®°å½•çš„æ­£åœ¨ä¸Šä¼ çš„æ–‡ä»¶åˆ—è¡¨ä¸­ç§»é™¤</span>    <span class="token keyword">const</span> idx <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>uploadingFiles<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span> <span class="token operator">=></span> f<span class="token punctuation">.</span>uid <span class="token operator">===</span> file<span class="token punctuation">.</span>uid<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>uploadingFiles<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>idx<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ä»¥ä¸Šå°±æ˜¯æ–‡ä»¶åˆ†æ®µå¹¶å‘ä¸Šä¼ çš„å‰ç«¯æ ¸å¿ƒä»£ç ã€‚é‚£æœåŠ¡ç«¯åº”è¯¥æ€ä¹ˆå®ç°å‘¢ï¼Ÿ</p><h3 id="NodeJS-æ¥å£å®ç°"><a href="#NodeJS-æ¥å£å®ç°" class="headerlink" title="NodeJS æ¥å£å®ç°"></a><code>NodeJS</code> æ¥å£å®ç°</h3><p>ç”±ä¸Šé¢çš„æ ¸å¿ƒä»£ç å¯ä»¥çœ‹åˆ°ï¼Œéœ€è¦æä¾›ä¸‰ä¸ªæ¥å£:è·å–åˆ†æ®µä¸Šä¼ å‰ç½®ä¿¡æ¯(<code>uploadId, objectName</code>)ã€è·å–æ–‡ä»¶ç‰‡çš„é¢„ç­¾åä¸Šä¼ åœ°å€ã€å®Œæˆä¸Šä¼ (å®Œæ•´æ€§æ ¡éªŒ)ã€‚</p><p>å¦‚æœæ¥å£è¦è®¾é…ä¸åŒçš„æ–‡ä»¶æœåŠ¡å™¨ï¼Œæ¯”å¦‚<code>minioã€åä¸ºobsã€é˜¿é‡Œäº‘</code>ï¼Œéœ€è¦è‡ªå·±å°è£…ä¸€å¥—<code>OssClient</code>çš„æŠ½è±¡çˆ¶ç±»ï¼Œç”±å­ç±»é›†æˆå¹¶é‡å†™<code>client</code>æä¾›çš„<code>API</code>.</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">private</span> client<span class="token operator">:</span> MinioClient <span class="token operator">|</span> ObsClient <span class="token operator">|</span> AliOssClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Client</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>xxx<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token constant">DEFAULT_BUCKET</span> <span class="token operator">=</span> <span class="token string">'xxx'</span><span class="token punctuation">;</span><span class="token comment">// è·å–åˆ†æ®µä¸Šä¼ å‰ç½®ä¿¡æ¯</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">Post</span></span><span class="token punctuation">(</span><span class="token string">'/multipart-upload'</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">startMultipartUpload</span><span class="token punctuation">(</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">Query</span></span><span class="token punctuation">(</span><span class="token string">'fileName'</span><span class="token punctuation">)</span> fileName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> bucketName <span class="token operator">=</span> <span class="token constant">DEFAULT_BUCKET</span><span class="token punctuation">;</span> <span class="token comment">// bucket åç§°ï¼Œå¯ä»¥æ¥è‡ª yml é…ç½®</span>  <span class="token keyword">const</span> objectName <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getUploadObject</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è‡ªå·±ç”Ÿæˆå”¯ä¸€é”® objectName</span>  <span class="token comment">// åˆå§‹åŒ–åˆ†æ®µä¸Šä¼ ï¼Œè·å– uploadId</span>  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">initMultipartUpload</span><span class="token punctuation">(</span>bucketName<span class="token punctuation">,</span> objectName<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span> uploadId<span class="token operator">:</span> res<span class="token punctuation">.</span>uploadId<span class="token punctuation">,</span> objectName <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// è·å–æ–‡ä»¶ç‰‡çš„é¢„ç­¾åä¸Šä¼ åœ°å€</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">Get</span></span><span class="token punctuation">(</span><span class="token string">'/multipart-upload/part/presign'</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">getPartUploadUrl</span><span class="token punctuation">(</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Query</span></span><span class="token punctuation">(</span><span class="token string">'objectName'</span><span class="token punctuation">)</span> objectName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Query</span></span><span class="token punctuation">(</span><span class="token string">'partNumber'</span><span class="token punctuation">)</span> partNumber<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Query</span></span><span class="token punctuation">(</span><span class="token string">'uploadId'</span><span class="token punctuation">)</span> uploadId<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">isNil</span><span class="token punctuation">(</span>partNumber<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">isNil</span><span class="token punctuation">(</span>uploadId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isNil</span><span class="token punctuation">(</span>partNumber<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isNil</span><span class="token punctuation">(</span>uploadId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BadRequestException</span><span class="token punctuation">(</span><span class="token string">'åˆ†æ®µä¸Šä¼ éœ€è¦åŒæ—¶æä¾› partNumberä»¥åŠ uploadId å‚æ•°'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">const</span> bucketName <span class="token operator">=</span> <span class="token constant">DEFAULT_BUCKET</span><span class="token punctuation">;</span>  <span class="token comment">// é»˜è®¤24å°æ—¶è¿‡æœŸï¼Œç®—ä¸Šä¼ é¢„ç­¾ååœ°å€</span>  <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">presignedPutObject</span><span class="token punctuation">(</span>    bucketName<span class="token punctuation">,</span>    objectName<span class="token punctuation">,</span>    <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">,</span>    <span class="token punctuation">&#123;</span> partNumber<span class="token punctuation">,</span> uploadId <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> urlObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">URL</span></span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// query ä¸Šè®°å½• bucket å‚æ•°ï¼Œè¿”å›ç»™å‰ç«¯</span>  <span class="token keyword">return</span> <span class="token function">appendQueryParams</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>urlObj<span class="token punctuation">.</span>pathname<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>urlObj<span class="token punctuation">.</span>search<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> bucket<span class="token operator">:</span> bucketName <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// å®Œæˆä¸Šä¼ </span><span class="token decorator"><span class="token at operator">@</span><span class="token function">Post</span></span><span class="token punctuation">(</span><span class="token string">'/multipart-upload/:uploadId'</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">finishMultipartUpload</span><span class="token punctuation">(</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Param</span></span><span class="token punctuation">(</span><span class="token string">'uploadId'</span><span class="token punctuation">)</span> uploadId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Query</span></span><span class="token punctuation">(</span><span class="token string">'objectName'</span><span class="token punctuation">)</span> objectName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isNil</span><span class="token punctuation">(</span>objectName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BadRequestException</span><span class="token punctuation">(</span><span class="token string">'å¯¹è±¡åç§°ä¸èƒ½ä¸ºç©º'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">const</span> bucketName <span class="token operator">=</span> <span class="token constant">DEFAULT_BUCKET</span><span class="token punctuation">;</span>  <span class="token comment">// è¯»å–å½“å‰ uploadId çš„æ‰€æœ‰å·²ä¸Šä¼ çš„æ–‡ä»¶å—</span>  <span class="token keyword">const</span> parts <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">listParts</span><span class="token punctuation">(</span>bucketName<span class="token punctuation">,</span> objectName<span class="token punctuation">,</span> uploadId<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// æ–‡ä»¶åˆ†æ®µä¸Šä¼ å®Œæ•´æ€§æ ¡éªŒ</span>  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">completeMultipartUpload</span><span class="token punctuation">(</span>bucketName<span class="token punctuation">,</span> objectName<span class="token punctuation">,</span> uploadId<span class="token punctuation">,</span> parts<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span> etag<span class="token operator">:</span> res<span class="token punctuation">.</span>etag<span class="token punctuation">,</span> name<span class="token operator">:</span> res<span class="token punctuation">.</span>name <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> åŠŸèƒ½å®ç° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ–‡ä»¶ä¸Šä¼  </tag>
            
            <tag> å¹¶å‘è¯·æ±‚ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäº ElementUI å®ç°çš„ TreeSelect ç»„ä»¶</title>
      <link href="/share/element-tree-select/"/>
      <url>/share/element-tree-select/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><p>åŸºäº <code>element</code> çš„ <code>tree</code> å’Œ <code>select</code> ç»„ä»¶ï¼Œå®ç°çš„ä¸€ä¸ª <code>treeSelect</code> ç»„ä»¶ï¼Œå®Œæ•´ <code>props</code> å’Œç”¨æ³•å‚è€ƒ <code>element</code>.</p><span id="more"></span><h3 id="æ¨¡æ¿å’Œæ ·å¼æ–‡ä»¶"><a href="#æ¨¡æ¿å’Œæ ·å¼æ–‡ä»¶" class="headerlink" title="æ¨¡æ¿å’Œæ ·å¼æ–‡ä»¶"></a>æ¨¡æ¿å’Œæ ·å¼æ–‡ä»¶</h3><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tree-select-wrapper<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mask<span class="token punctuation">"</span></span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isShowSelect<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>selectClickHandle<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-popover</span>      <span class="token attr-name">placement</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bottom-start<span class="token punctuation">"</span></span>      <span class="token attr-name">:width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width<span class="token punctuation">"</span></span>      <span class="token attr-name">trigger</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>manual<span class="token punctuation">"</span></span>      <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isShowSelect<span class="token punctuation">"</span></span>      <span class="token attr-name">@hide</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>popoverHide<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-tree</span>        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>common-tree<span class="token punctuation">"</span></span>        <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>style<span class="token punctuation">"</span></span>        <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tree<span class="token punctuation">"</span></span>        <span class="token attr-name">:lazy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>lazy<span class="token punctuation">"</span></span>        <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>data<span class="token punctuation">"</span></span>        <span class="token attr-name">:props</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>defaultProps<span class="token punctuation">"</span></span>        <span class="token attr-name">:show-checkbox</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>multiple<span class="token punctuation">"</span></span>        <span class="token attr-name">:node-key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nodeKey<span class="token punctuation">"</span></span>        <span class="token attr-name">:check-strictly</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkStrictly<span class="token punctuation">"</span></span>        <span class="token attr-name">:expand-on-click-node</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span>        <span class="token attr-name">:check-on-click-node</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>multiple<span class="token punctuation">"</span></span>        <span class="token attr-name">:highlight-current</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>        <span class="token attr-name">:load</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>loadChildNodes<span class="token punctuation">"</span></span>        <span class="token attr-name">v-on</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$listeners<span class="token punctuation">"</span></span>        <span class="token attr-name">@node-click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>handleNodeClick<span class="token punctuation">"</span></span>        <span class="token attr-name">@check-change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>handleCheckChange<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-tree</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-select</span>        <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>selectStyle<span class="token punctuation">"</span></span>        <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>reference<span class="token punctuation">"</span></span>        <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>select<span class="token punctuation">"</span></span>        <span class="token attr-name">:size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>size<span class="token punctuation">"</span></span>        <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>selectedData<span class="token punctuation">"</span></span>        <span class="token attr-name">:multiple</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>multiple<span class="token punctuation">"</span></span>        <span class="token attr-name">:disabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>disabled<span class="token punctuation">"</span></span>        <span class="token attr-name">:clearable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clearable<span class="token punctuation">"</span></span>        <span class="token attr-name">:collapse-tags</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>collapseTags<span class="token punctuation">"</span></span>        <span class="token attr-name">@click.native</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>selectClickHandle<span class="token punctuation">"</span></span>        <span class="token attr-name">@remove-tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>removeSelectedNodes<span class="token punctuation">"</span></span>        <span class="token attr-name">@clear</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>removeSelectedNode<span class="token punctuation">"</span></span>        <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>changeSelectedNodes<span class="token punctuation">"</span></span>        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tree-select<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-option</span>          <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item in options<span class="token punctuation">"</span></span>          <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.value<span class="token punctuation">"</span></span>          <span class="token attr-name">:label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.label<span class="token punctuation">"</span></span>          <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.value<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-option</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-select</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-popover</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./index.ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>less<span class="token punctuation">"</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">  <span class="token selector">.mask</span> <span class="token punctuation">&#123;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token selector">.common-tree</span> <span class="token punctuation">&#123;</span>    <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token selector">.tree-select-wrapper</span> <span class="token punctuation">&#123;</span>    <span class="token selector">/deep/.tree-select .el-select__tags .el-tag .el-tag__close</span> <span class="token punctuation">&#123;</span>      <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token selector">/deep/.tree-select .el-select__tags .el-tag .el-icon-close</span> <span class="token punctuation">&#123;</span>      <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre><h3 id="æºç é€»è¾‘"><a href="#æºç é€»è¾‘" class="headerlink" title="æºç é€»è¾‘"></a>æºç é€»è¾‘</h3><p><code>ç”±äºæ—¶é—´åŸå› ï¼Œä»£ç ä¸­çš„ç±»å‹ä¸æ˜¯å¾ˆå‡†ç¡®å’Œå®Œå–„ï¼Œè‡ªè¡Œæ›´æ­£ï¼Œå‡†ç¡®ç±»å‹å‚è€ƒ elTree å’Œ elSelect.</code><del>å°±æ˜¯æ‡’</del>ğŸ˜¥ğŸ˜¥ğŸ˜¥</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> Component<span class="token punctuation">,</span> Prop<span class="token punctuation">,</span> Vue<span class="token punctuation">,</span> Watch <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue-property-decorator'</span><span class="token punctuation">;</span><span class="token keyword">type</span> <span class="token class-name">Option</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span> value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> label<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">type</span> <span class="token class-name">Node</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span> key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> label<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> childNodes<span class="token operator">?</span><span class="token operator">:</span> Node<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">TreeSelect</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">&#123;</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Prop</span></span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">readonly</span> data<span class="token operator">!</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Prop</span></span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">readonly</span> defaultProps<span class="token operator">!</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Prop</span></span><span class="token punctuation">(</span>Boolean<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">readonly</span> multiple<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Prop</span></span><span class="token punctuation">(</span>Boolean<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">readonly</span> clearable<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Prop</span></span><span class="token punctuation">(</span>Boolean<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">readonly</span> disabled<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Prop</span></span><span class="token punctuation">(</span>Boolean<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">readonly</span> lazy<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Prop</span></span><span class="token punctuation">(</span>Boolean<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">readonly</span> collapseTags<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span> <span class="token comment">// é…ç½®å¤šé€‰æ—¶æ˜¯å¦å°†é€‰ä¸­å€¼æŒ‰æ–‡å­—çš„å½¢å¼å±•ç¤º</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Prop</span></span><span class="token punctuation">(</span>Boolean<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">readonly</span> checkStrictly<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span> <span class="token comment">// æ˜¾ç¤ºå¤é€‰æ¡†æƒ…å†µä¸‹ï¼Œæ˜¯å¦ä¸¥æ ¼éµå¾ªçˆ¶å­ä¸äº’ç›¸å…³è”</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Prop</span></span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token keyword">default</span><span class="token operator">:</span> <span class="token number">250</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">readonly</span> width<span class="token operator">!</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Prop</span></span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token keyword">default</span><span class="token operator">:</span> <span class="token number">300</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">readonly</span> height<span class="token operator">!</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Prop</span></span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'small'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">readonly</span> size<span class="token operator">!</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Prop</span></span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'id'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">readonly</span> nodeKey<span class="token operator">!</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Prop</span></span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">readonly</span> checkedKeys<span class="token operator">!</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Prop</span></span><span class="token punctuation">(</span><span class="token builtin">Function</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">readonly</span> loadChildNodes<span class="token operator">!</span><span class="token operator">:</span> <span class="token punctuation">(</span>node<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token function-variable function">resolve</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">;</span>  <span class="token keyword">public</span> isShowSelect <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token keyword">public</span> options<span class="token operator">:</span> Option<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">public</span> selectedData<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">public</span> checkedIds <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">public</span> checkedData <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">public</span> <span class="token keyword">get</span> <span class="token function">style</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token string">'width:'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">+</span> <span class="token string">'px;'</span> <span class="token operator">+</span> <span class="token string">'height:'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">+</span> <span class="token string">'px;'</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token keyword">get</span> <span class="token function">selectStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token string">'width:'</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">+</span> <span class="token number">24</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'px;'</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Watch</span></span><span class="token punctuation">(</span><span class="token string">'isShowSelect'</span><span class="token punctuation">)</span>  <span class="token keyword">public</span> <span class="token function">onSelect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>select <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">blur</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Watch</span></span><span class="token punctuation">(</span><span class="token string">'checkedKeys'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> deep<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>  <span class="token keyword">public</span> <span class="token function">onCheckedKeysChange</span><span class="token punctuation">(</span>val<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>val<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initCheckedData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initCheckedData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token function">selectClickHandle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>disabled<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>isShowSelect <span class="token operator">=</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>isShowSelect<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token function">setSelectOption</span><span class="token punctuation">(</span>node<span class="token operator">:</span> Node<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> tmpMap<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    tmpMap<span class="token punctuation">.</span>value <span class="token operator">=</span> node<span class="token punctuation">.</span>key<span class="token punctuation">;</span>    tmpMap<span class="token punctuation">.</span>label <span class="token operator">=</span> node<span class="token punctuation">.</span>label<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>options <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>tmpMap<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>selectedData <span class="token operator">=</span> node<span class="token punctuation">.</span>key<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token function">checkSelectedNode</span><span class="token punctuation">(</span>checkedKeys<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> item <span class="token operator">=</span> checkedKeys<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>tree <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCurrentKey</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> node <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>tree <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getNode</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setSelectOption</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token function">checkSelectedNodes</span><span class="token punctuation">(</span>checkedKeys<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>tree <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCheckedKeys</span><span class="token punctuation">(</span>checkedKeys<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token function">clearSelectedNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>selectedData <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>    <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>tree <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCurrentKey</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token function">clearSelectedNodes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// æ‰€æœ‰è¢«é€‰ä¸­çš„èŠ‚ç‚¹çš„ key æ‰€ç»„æˆçš„æ•°ç»„æ•°æ®</span>    <span class="token keyword">const</span> checkedKeys <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>tree <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCheckedKeys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> checkedKeys<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>tree <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setChecked</span><span class="token punctuation">(</span>checkedKeys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token function">initCheckedData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>multiple<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>checkedKeys<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">checkSelectedNodes</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>checkedKeys<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">clearSelectedNodes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>checkedKeys<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">checkSelectedNode</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>checkedKeys<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">clearSelectedNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token function">popoverHide</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>multiple<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token comment">// æ‰€æœ‰è¢«é€‰ä¸­çš„èŠ‚ç‚¹çš„ key æ‰€ç»„æˆçš„æ•°ç»„æ•°æ®</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>checkedIds <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>tree <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCheckedKeys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// æ‰€æœ‰è¢«é€‰ä¸­çš„èŠ‚ç‚¹æ‰€ç»„æˆçš„æ•°ç»„æ•°æ®</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>checkedData <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>tree <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCheckedNodes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>checkedIds <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>tree <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCurrentKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>checkedData <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>tree <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCurrentNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'popoverHide'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>checkedIds<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>checkedData<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token function">handleNodeClick</span><span class="token punctuation">(</span>d<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> node<span class="token operator">:</span> Node<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>multiple<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setSelectOption</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>isShowSelect <span class="token operator">=</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>isShowSelect<span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectedData<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token function">handleCheckChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// æ‰€æœ‰è¢«é€‰ä¸­çš„èŠ‚ç‚¹çš„ key æ‰€ç»„æˆçš„æ•°ç»„æ•°æ®</span>    <span class="token keyword">const</span> checkedKeys <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>tree <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCheckedKeys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>options <span class="token operator">=</span> checkedKeys<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token comment">// æ‰€æœ‰è¢«é€‰ä¸­çš„èŠ‚ç‚¹å¯¹åº”çš„node</span>      <span class="token keyword">const</span> node <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>tree <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getNode</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">const</span> tmpMap<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>      tmpMap<span class="token punctuation">.</span>value <span class="token operator">=</span> node<span class="token punctuation">.</span>key<span class="token punctuation">;</span>      tmpMap<span class="token punctuation">.</span>label <span class="token operator">=</span> node<span class="token punctuation">.</span>label<span class="token punctuation">;</span>      <span class="token keyword">return</span> tmpMap<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>selectedData <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> item<span class="token punctuation">.</span>value<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectedData<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token function">removeSelectedNodes</span><span class="token punctuation">(</span>val<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>tree <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setChecked</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> node <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>tree <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getNode</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>checkStrictly <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">treeToList</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>item<span class="token operator">?.</span>childNodes<span class="token operator">?.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>tree <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setChecked</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleCheckChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectedData<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token function">treeToList</span><span class="token punctuation">(</span>tree<span class="token operator">:</span> Node<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">let</span> queen<span class="token operator">:</span> Node<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> out <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    queen <span class="token operator">=</span> queen<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>tree<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>queen<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">const</span> first <span class="token operator">=</span> queen<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>first<span class="token operator">?.</span>childNodes<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        queen <span class="token operator">=</span> queen<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>first<span class="token punctuation">.</span>childNodes<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>      out<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> out<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token function">removeSelectedNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">clearSelectedNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectedData<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token function">changeSelectedNodes</span><span class="token punctuation">(</span>selectedData<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>multiple <span class="token operator">&amp;&amp;</span> selectedData<span class="token punctuation">.</span>length <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">clearSelectedNodes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectedData<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> ç»„ä»¶å°è£… </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TreeSelect </tag>
            
            <tag> UI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäº Antd-Table äºŒæ¬¡å°è£…çš„ ResizeTable ç»„ä»¶</title>
      <link href="/share/antd-resize-table/"/>
      <url>/share/antd-resize-table/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><p><code>antd</code> æä¾›çš„ <code>table</code> ç»„ä»¶æœ¬èº«æ˜¯ä¸æ”¯æŒæ”¹å˜åˆ—å®½çš„ï¼Œåœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œç”¨æˆ·å¸Œæœ›é€šè¿‡è‡ªå·±è°ƒèŠ‚æŸ¥çœ‹åˆ—è¯¦æƒ…ã€‚</p><p>ç±»ä¼¼<code>vue-element</code>åˆæ”¯æŒäº†è¿™ä¸ªåŠŸèƒ½ï¼Œæ‰€ä»¥æƒ³ç€å°è£…ä¸€ç‰ˆ<code>react</code>å¯æ‹–æ‹½åˆ—å®½çš„è¡¨æ ¼ç»„ä»¶ã€‚</p><span id="more"></span><h3 id="ResizeTable-ç»„ä»¶å®ç°"><a href="#ResizeTable-ç»„ä»¶å®ç°" class="headerlink" title="ResizeTable ç»„ä»¶å®ç°"></a>ResizeTable ç»„ä»¶å®ç°</h3><p><code>ç»„ä»¶æ¥æ”¶çš„ Props åŒ Table ä¸€è‡´</code>.</p><pre class="language-tsx" data-language="tsx"><code class="language-tsx"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> delayMS <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'@/utils/utils'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> Table <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">&#123;</span> ColumnType<span class="token punctuation">,</span> TableProps <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'antd/lib/table'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">&#123;</span> TableRowSelection <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'antd/lib/table/interface'</span><span class="token punctuation">;</span><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> useEffect<span class="token punctuation">,</span> useMemo<span class="token punctuation">,</span> useState <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> Resizable <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react-resizable'</span><span class="token punctuation">;</span><span class="token keyword">interface</span> <span class="token class-name">ResizeTableProps</span> <span class="token keyword">extends</span> <span class="token class-name">TableProps<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">></span></span> <span class="token punctuation">&#123;</span>  columns<span class="token operator">:</span> ColumnType<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">></span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// any å–å†³äº row æ•°æ®ç±»å‹</span><span class="token punctuation">&#125;</span><span class="token keyword">const</span> <span class="token function-variable function">ResizableTitle</span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">[</span>x<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span> onResize<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span> width<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> onResize<span class="token punctuation">,</span> width<span class="token punctuation">,</span> onClick<span class="token punctuation">,</span> <span class="token operator">...</span>restProps <span class="token punctuation">&#125;</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>  <span class="token comment">// fix: ä¿®å¤æ‹–æ‹½æ”¹å˜åˆ—å®½æ“ä½œä¸æ’åºå™¨å†²çª</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>resizing<span class="token punctuation">,</span> setResizing<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>width<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token spread"><span class="token punctuation">&#123;</span><span class="token operator">...</span>restProps<span class="token punctuation">&#125;</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Resizable</span></span>      <span class="token attr-name">width</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span>width<span class="token punctuation">&#125;</span></span>      <span class="token attr-name">height</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">&#125;</span></span>      <span class="token attr-name">onResizeStart</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setResizing</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></span>      <span class="token attr-name">onResizeStop</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>        <span class="token keyword">await</span> <span class="token function">delayMS</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// setTimeout 0</span>        <span class="token function">setResizing</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></span>      <span class="token attr-name">onResize</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span>onResize<span class="token punctuation">&#125;</span></span>      <span class="token comment">// draggableOpts=&#123;&#123; enableUserSelectHack: false &#125;&#125;</span>    <span class="token punctuation">></span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span>        <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>resizing <span class="token operator">&amp;&amp;</span> onClick<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></span>        <span class="token spread"><span class="token punctuation">&#123;</span><span class="token operator">...</span>restProps<span class="token punctuation">&#125;</span></span>      <span class="token punctuation">/></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Resizable</span></span><span class="token punctuation">></span></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">const</span> ResizeTable<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token constant">FC</span><span class="token operator">&lt;</span>ResizeTableProps<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>columns<span class="token punctuation">,</span> setColumns<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span>ColumnType<span class="token operator">&lt;</span><span class="token constant">API</span><span class="token punctuation">.</span>RowDataInfo<span class="token operator">></span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token function">setColumns</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>columns <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>props<span class="token punctuation">.</span>columns<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> <span class="token function-variable function">handleResize</span> <span class="token operator">=</span>    <span class="token punctuation">(</span>index<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=></span>    <span class="token punctuation">(</span>e<span class="token operator">:</span> Event<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> size <span class="token punctuation">&#125;</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      e<span class="token punctuation">.</span><span class="token function">stopImmediatePropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// e.preventDefault();</span>      <span class="token function">setColumns</span><span class="token punctuation">(</span><span class="token punctuation">(</span>cols<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>        <span class="token keyword">const</span> nextColumns <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>cols<span class="token punctuation">]</span><span class="token punctuation">;</span>        nextColumns<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span>          <span class="token operator">...</span>nextColumns<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">,</span>          width<span class="token operator">:</span> size<span class="token punctuation">.</span>width<span class="token punctuation">,</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> nextColumns<span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> customColumns <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span>    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span>      columns<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>col<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">&#123;</span>        <span class="token operator">...</span>col<span class="token punctuation">,</span>        <span class="token function-variable function">onHeaderCell</span><span class="token operator">:</span> <span class="token punctuation">(</span>column<span class="token operator">:</span> <span class="token punctuation">&#123;</span> width<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">&#123;</span>          width<span class="token operator">:</span> column<span class="token punctuation">.</span>width<span class="token punctuation">,</span>          onResize<span class="token operator">:</span> <span class="token function">handleResize</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span>columns<span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Table</span></span>      <span class="token spread"><span class="token punctuation">&#123;</span><span class="token operator">...</span>props<span class="token punctuation">&#125;</span></span>      <span class="token attr-name">columns</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span>customColumns <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">&#125;</span></span>      <span class="token attr-name">components</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> header<span class="token operator">:</span> <span class="token punctuation">&#123;</span> cell<span class="token operator">:</span> ResizableTitle <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></span>    <span class="token punctuation">/></span></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> React<span class="token punctuation">.</span><span class="token function">memo</span><span class="token punctuation">(</span>ResizeTable<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> ç»„ä»¶å°è£… </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ResizeTable </tag>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¯å¯¹å·²é€‰é¡¹æ‹–æ‹½æ’åºçš„ React ä¸‹æ‹‰é€‰æ‹©ç»„ä»¶</title>
      <link href="/share/react-draggable-select/"/>
      <url>/share/react-draggable-select/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><p>åŸºäºæœ€è¿‘é¡¹ç›®ä¸Šçš„ä¸€ä¸ªéœ€æ±‚ï¼šå¯¹å·²ç»é€‰æ‹©çš„å¤šä¸ªé€‰é¡¹è¿›è¡Œæ’åºã€‚ç”±äº<code>select</code>ç»„ä»¶æœ¬èº«æ²¡æœ‰æ”¯æŒï¼Œæ‰€ä»¥å•ç‹¬å°è£…å®ç°ã€‚</p><blockquote><p>åŸºäº <code>react-beautiful-dnd</code> æ¨¡å—å®ç°çš„ä¸€ä¸ªæ‹–æ‹½å®ä¾‹</p></blockquote><span id="more"></span><h3 id="æºç å®ç°"><a href="#æºç å®ç°" class="headerlink" title="æºç å®ç°"></a>æºç å®ç°</h3><h4 id="DraggableSelect-ç»„ä»¶"><a href="#DraggableSelect-ç»„ä»¶" class="headerlink" title="DraggableSelect ç»„ä»¶"></a><code>DraggableSelect</code> ç»„ä»¶</h4><p><code>æ¥å—çš„ Props åŒ Select ç»„ä»¶.</code></p><pre class="language-tsx" data-language="tsx"><code class="language-tsx"><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">&#123;</span> SelectProps <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> Select <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">&#123;</span> LabeledValue<span class="token punctuation">,</span> SelectValue <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'antd/es/select'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">&#123;</span> CSSProperties <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">&#123;</span> DraggableProvidedDraggableProps<span class="token punctuation">,</span> DropResult <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react-beautiful-dnd'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> DragDropContext<span class="token punctuation">,</span> Draggable<span class="token punctuation">,</span> Droppable <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react-beautiful-dnd'</span><span class="token punctuation">;</span><span class="token keyword">import</span> TagItem <span class="token keyword">from</span> <span class="token string">'./components/TagItem'</span><span class="token punctuation">;</span><span class="token keyword">const</span> getItemStyle <span class="token operator">=</span> <span class="token punctuation">(</span>  isDragging<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>  draggableStyle<span class="token operator">:</span> DraggableProvidedDraggableProps<span class="token punctuation">[</span><span class="token string">'style'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token operator">:</span> CSSProperties <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  userSelect<span class="token operator">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span>  opacity<span class="token operator">:</span> isDragging <span class="token operator">?</span> <span class="token number">0.5</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>  <span class="token operator">...</span>draggableStyle<span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token function-variable function">reorder</span> <span class="token operator">=</span> <span class="token punctuation">(</span>list<span class="token operator">:</span> SelectValue<span class="token punctuation">,</span> startIndex<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> endIndex<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token builtin">Array</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>list <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>removed<span class="token punctuation">]</span> <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>startIndex<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  result<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>endIndex<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> removed<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> result<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token function-variable function">DraggableSelect</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  onChange<span class="token punctuation">,</span>  value<span class="token punctuation">,</span>  tagRender<span class="token punctuation">,</span>  <span class="token operator">...</span>props<span class="token punctuation">&#125;</span><span class="token operator">:</span> SelectProps<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">></span> <span class="token operator">&amp;</span> <span class="token punctuation">&#123;</span> onChange<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> SelectValue<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> <span class="token function-variable function">onDragEnd</span> <span class="token operator">=</span> <span class="token punctuation">(</span>result<span class="token operator">:</span> DropResult<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> <span class="token punctuation">&#123;</span>      destination<span class="token punctuation">,</span>      source<span class="token operator">:</span> <span class="token punctuation">&#123;</span> index<span class="token operator">:</span> dragIndex <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span> <span class="token operator">=</span> result<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>destination<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">const</span> items <span class="token operator">=</span> <span class="token function">reorder</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> dragIndex<span class="token punctuation">,</span> destination<span class="token punctuation">.</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>      onChange<span class="token operator">?.</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">DragDropContext</span></span> <span class="token attr-name">onDragEnd</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span>onDragEnd<span class="token punctuation">&#125;</span></span><span class="token punctuation">></span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Droppable</span></span> <span class="token attr-name">droppableId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>list<span class="token punctuation">'</span></span> <span class="token attr-name">direction</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>horizontal<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token plain-text">        </span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span>provided<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token spread"><span class="token punctuation">&#123;</span><span class="token operator">...</span>provided<span class="token punctuation">.</span>droppableProps<span class="token punctuation">&#125;</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span>provided<span class="token punctuation">.</span>innerRef<span class="token punctuation">&#125;</span></span><span class="token punctuation">></span></span><span class="token plain-text">            &lt;Select              style=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> width<span class="token operator">:</span> <span class="token string">'100%'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token plain-text">              tagRender=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span>tagProps<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Draggable</span></span>                  <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span>tagProps<span class="token punctuation">.</span>value <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">&#125;</span></span>                  <span class="token attr-name">draggableId</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span>tagProps<span class="token punctuation">.</span>value <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">&#125;</span></span>                  <span class="token attr-name">index</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span>value<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token operator">:</span> SelectValue<span class="token punctuation">)</span> <span class="token operator">=></span>                    <span class="token keyword">typeof</span> item <span class="token operator">===</span> <span class="token string">'string'</span>                      <span class="token operator">?</span> item <span class="token operator">===</span> tagProps<span class="token punctuation">.</span>value                      <span class="token operator">:</span> <span class="token punctuation">(</span>item <span class="token keyword">as</span> LabeledValue<span class="token punctuation">)</span><span class="token punctuation">.</span>value <span class="token operator">===</span> tagProps<span class="token punctuation">.</span>value<span class="token punctuation">,</span>                  <span class="token punctuation">)</span><span class="token punctuation">&#125;</span></span><span class="token punctuation">></span></span><span class="token plain-text">                  </span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span>pd<span class="token punctuation">,</span> snapshot<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>                      <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span>pd<span class="token punctuation">.</span>innerRef<span class="token punctuation">&#125;</span></span>                      <span class="token spread"><span class="token punctuation">&#123;</span><span class="token operator">...</span>pd<span class="token punctuation">.</span>draggableProps<span class="token punctuation">&#125;</span></span>                      <span class="token spread"><span class="token punctuation">&#123;</span><span class="token operator">...</span>pd<span class="token punctuation">.</span>dragHandleProps<span class="token punctuation">&#125;</span></span>                      <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span><span class="token function">getItemStyle</span><span class="token punctuation">(</span>snapshot<span class="token punctuation">.</span>isDragging<span class="token punctuation">,</span> pd<span class="token punctuation">.</span>draggableProps<span class="token punctuation">.</span>style<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></span>                      <span class="token attr-name">onMouseDown</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>                        e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                      <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></span><span class="token punctuation">></span></span><span class="token plain-text">                      </span><span class="token punctuation">&#123;</span>tagRender <span class="token operator">?</span> <span class="token function">tagRender</span><span class="token punctuation">(</span>tagProps<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TagItem</span></span> <span class="token spread"><span class="token punctuation">&#123;</span><span class="token operator">...</span>tagProps<span class="token punctuation">&#125;</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">&#125;</span><span class="token plain-text">                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                  <span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token plain-text">                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Draggable</span></span><span class="token punctuation">></span></span>              <span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token plain-text">              onChange=</span><span class="token punctuation">&#123;</span>onChange<span class="token punctuation">&#125;</span><span class="token plain-text">              value=</span><span class="token punctuation">&#123;</span>value<span class="token punctuation">&#125;</span><span class="token plain-text">              </span><span class="token punctuation">&#123;</span><span class="token operator">...</span>props<span class="token punctuation">&#125;</span><span class="token plain-text">            />            </span><span class="token punctuation">&#123;</span><span class="token comment">/* FIX: æ·»åŠ  provided.placeholder è§£å†³ warning è­¦å‘Šï¼Œdisplayï¼šnone ä¸ä½¿ç”¨å ä½ç¬¦ */</span><span class="token punctuation">&#125;</span><span class="token plain-text">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> display<span class="token operator">:</span> <span class="token string">'none'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></span><span class="token punctuation">></span></span><span class="token punctuation">&#123;</span>provided<span class="token punctuation">.</span>placeholder<span class="token punctuation">&#125;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Droppable</span></span><span class="token punctuation">></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">DragDropContext</span></span><span class="token punctuation">></span></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> DraggableSelect<span class="token punctuation">;</span></code></pre><h4 id="TagItem-ç»„ä»¶"><a href="#TagItem-ç»„ä»¶" class="headerlink" title="TagItem ç»„ä»¶"></a><code>TagItem</code> ç»„ä»¶</h4><pre class="language-tsx" data-language="tsx"><code class="language-tsx"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> CloseOutlined <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">&#123;</span> CustomTagProps <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'rc-select/lib/interface/generator'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">&#123;</span> CSSProperties <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">TagItemProps</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  label<span class="token operator">?</span><span class="token operator">:</span> React<span class="token punctuation">.</span>ReactNode<span class="token punctuation">;</span>  originLabel<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  style<span class="token operator">?</span><span class="token operator">:</span> CSSProperties<span class="token punctuation">;</span>  dataHandlerId<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  onMouseDown<span class="token operator">?</span><span class="token operator">:</span> React<span class="token punctuation">.</span>MouseEventHandler<span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token operator">&amp;</span> CustomTagProps<span class="token punctuation">;</span><span class="token keyword">const</span> TagItem<span class="token operator">:</span> React<span class="token punctuation">.</span>ForwardRefRenderFunction<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token punctuation">,</span> TagItemProps<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span>  <span class="token punctuation">&#123;</span> label<span class="token punctuation">,</span> originLabel<span class="token punctuation">,</span> dataHandlerId<span class="token punctuation">,</span> onMouseDown<span class="token punctuation">,</span> onClose<span class="token punctuation">,</span> style <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  ref<span class="token punctuation">,</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span>    <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>ant-select-selection-item<span class="token punctuation">'</span></span>    <span class="token attr-name">title</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span>originLabel <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">&#125;</span></span>    <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span>style<span class="token punctuation">&#125;</span></span>    <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span>ref<span class="token punctuation">&#125;</span></span>    <span class="token attr-name">onMouseDown</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span>onMouseDown<span class="token punctuation">&#125;</span></span>    <span class="token attr-name">data-handler-id</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span>dataHandlerId<span class="token punctuation">&#125;</span></span><span class="token punctuation">></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>ant-select-selection-item-content<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token punctuation">&#123;</span>label<span class="token punctuation">&#125;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>ant-select-selection-item-remove<span class="token punctuation">'</span></span> <span class="token attr-name">unselectable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>on<span class="token punctuation">'</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>true<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CloseOutlined</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span>onClose<span class="token punctuation">&#125;</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token plain-text">  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> React<span class="token punctuation">.</span><span class="token function">forwardRef</span><span class="token punctuation">(</span>TagItem<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> ç»„ä»¶å°è£… </category>
          
      </categories>
      
      
        <tags>
            
            <tag> react </tag>
            
            <tag> Select </tag>
            
            <tag> draggable </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•å®æˆ˜ç³»åˆ—ï¼šæ ‘å½¢ç»“æ„éå†</title>
      <link href="/share/tree-traversal/"/>
      <url>/share/tree-traversal/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="Beforeâ€¦"><a href="#Beforeâ€¦" class="headerlink" title="Beforeâ€¦"></a>Beforeâ€¦</h3><ul><li><p>å‰å‡ å¤©åœ¨ä¸€å®¶ç‹¬è§’å…½å…¬å¸å¤è¯•ï¼Œæœ¬ä»¥ä¸ºä¼šå¾ˆé¡ºåˆ©ï¼Œä½†éšç€æœ€åæŠ€æœ¯é¢çš„ä¸€é“ç®—æ³•é¢˜å¤±åˆ©è€Œå‘Šç»ˆã€‚ï¼ˆé¢è¯•å®˜ï¼šæœ€åå†è€ƒä½ ä¸€é“é¢˜å§ï¼Œä¸ä¼šå¾ˆéš¾çš„â€¦ éå†ä¸€é¢—æ ‘ï¼Œæ‰¾åˆ°ç¬¦åˆæŸä¸ªè¦æ±‚çš„èŠ‚ç‚¹ã€‚æˆ‘ï¼š emmm ç¡®å®æ„Ÿè§‰æŒºç®€å•çš„ï¼Œå¹³æ—¶ä¹Ÿä¼šé‡åˆ°è¿™ç±»å‹çš„éœ€æ±‚ï¼Œä½†ä¸çŸ¥é“æ˜¯è„‘å­ç“¦ç‰¹äº†è¿˜æ˜¯çœŸçš„å› ä¸ºç´§å¼ ï¼Œä¸€æ—¶é—´æ²¡æœ‰æƒ³åˆ°æœ€ä¼˜å®ç°ï¼Œæœ€åé€šè¿‡æ·±åº¦éå†å®Œæˆï¼Œä½†å¹¶ä¸ç¬¦åˆé¢è¯•å®˜é¢„æœŸâ€¦ä»–æƒ³è¦çš„æ˜¯å¹¿åº¦ä¼˜å…ˆéå†å®ç°ï¼‰</p></li><li><p>åªèƒ½è¯´æ˜¯å‡†å¤‡ä¸å……åˆ†ï¼Œç¨³ç¨³æ‹¿ä¸‹çš„é¢è¯•å› ä¸ºè¿™ä¸¤å¹´å·¥ä½œè€Œé—å¿˜çš„ä¸œè¥¿è€Œå¤±è´¥ã€‚ä»Šå¤©å…¨å½“æ˜¯å¤ä¹ äº†â€¦ã€</p></li><li><p><strong>æŒç»­æ›´æ–°ä¸­</strong>..</p></li></ul><span id="more"></span><h3 id="å¹¿åº¦ä¼˜å…ˆéå†"><a href="#å¹¿åº¦ä¼˜å…ˆéå†" class="headerlink" title="å¹¿åº¦ä¼˜å…ˆéå†"></a>å¹¿åº¦ä¼˜å…ˆéå†</h3><blockquote><p><code>ä½¿ç”¨å¹¿åº¦ä¼˜å…ˆéå†æŸ¥æ‰¾æŸä¸€ä¸ªèŠ‚ç‚¹ï¼Œéœ€è¦ä½¿ç”¨é˜Ÿåˆ—æ¥è¾…åŠ©å®ç°ã€‚</code></p></blockquote><p>å…·ä½“å®ç°ï¼š</p><ul><li>åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—ï¼Œå°†æ ¹èŠ‚ç‚¹å…¥é˜Ÿã€‚</li><li>å½“é˜Ÿåˆ—ä¸ä¸ºç©ºæ—¶ï¼Œå–å‡ºé˜Ÿåˆ—ä¸­çš„é˜Ÿé¦–å…ƒç´ ã€‚</li><li>å¦‚æœå½“å‰èŠ‚ç‚¹çš„å€¼ç­‰äºç›®æ ‡å€¼ï¼Œè¿”å›å½“å‰èŠ‚ç‚¹ã€‚</li><li>å¦åˆ™å°†å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—ã€‚</li><li>é‡å¤æ­¥éª¤ 2-4ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©ºã€‚</li></ul><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">interface</span> <span class="token class-name">TreeNode</span> <span class="token punctuation">&#123;</span>  value<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>  children<span class="token operator">:</span> TreeNode<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">bfsFindNode</span><span class="token punctuation">(</span>root<span class="token operator">:</span> TreeNode<span class="token punctuation">,</span> targetValue<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> TreeNode <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> queue<span class="token operator">:</span> TreeNode<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>root<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—ï¼Œå°†æ ¹èŠ‚ç‚¹å…¥é˜Ÿ</span>  <span class="token keyword">while</span> <span class="token punctuation">(</span>queue<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> currentNode <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">!</span><span class="token punctuation">;</span> <span class="token comment">// å–å‡ºé˜Ÿåˆ—ä¸­çš„é˜Ÿé¦–å…ƒç´ </span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>currentNode<span class="token punctuation">.</span>value <span class="token operator">===</span> targetValue<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> currentNode<span class="token punctuation">;</span> <span class="token comment">// å¦‚æœå½“å‰èŠ‚ç‚¹çš„å€¼ç­‰äºç›®æ ‡å€¼ï¼Œè¿”å›å½“å‰èŠ‚ç‚¹</span>    <span class="token punctuation">&#125;</span>    queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>currentNode<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å°†å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// é˜Ÿåˆ—ä¸ºç©ºï¼Œæœªæ‰¾åˆ°ç›®æ ‡èŠ‚ç‚¹ï¼Œè¿”å›null</span><span class="token punctuation">&#125;</span></code></pre><p>åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—ï¼Œå°†æ ¹èŠ‚ç‚¹å…¥é˜Ÿï¼Œç„¶åä½¿ç”¨ä¸€ä¸ª<code>while</code>å¾ªç¯æ¥éå†é˜Ÿåˆ—ä¸­çš„å…ƒç´ ã€‚æ¯æ¬¡å–å‡ºé˜Ÿé¦–å…ƒç´ ï¼Œå¹¶åˆ¤æ–­å…¶å€¼æ˜¯å¦ç­‰äºç›®æ ‡å€¼ï¼Œå¦‚æœç›¸ç­‰ï¼Œåˆ™è¿”å›è¯¥èŠ‚ç‚¹ï¼›å¦åˆ™å°†è¯¥èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—ã€‚å½“é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼Œè¡¨ç¤ºæœªæ‰¾åˆ°ç›®æ ‡èŠ‚ç‚¹ï¼Œè¿”å›<code>null</code>ã€‚</p><h3 id="æ·±åº¦ä¼˜å…ˆéå†"><a href="#æ·±åº¦ä¼˜å…ˆéå†" class="headerlink" title="æ·±åº¦ä¼˜å…ˆéå†"></a>æ·±åº¦ä¼˜å…ˆéå†</h3><blockquote><p><code>ä½¿ç”¨é€’å½’å®ç°æ·±åº¦ä¼˜å…ˆéå†ã€‚</code></p></blockquote><ul><li>è®¿é—®å½“å‰èŠ‚ç‚¹ï¼Œå¹¶åˆ¤æ–­å½“å‰èŠ‚ç‚¹çš„å€¼æ˜¯å¦ç­‰äºç›®æ ‡å€¼ã€‚</li><li>å¦‚æœå½“å‰èŠ‚ç‚¹çš„å€¼ç­‰äºç›®æ ‡å€¼ï¼Œè¿”å›å½“å‰èŠ‚ç‚¹ã€‚</li><li>å¦åˆ™å¯¹å½“å‰èŠ‚ç‚¹çš„æ¯ä¸ªå­èŠ‚ç‚¹ï¼Œé€’å½’è°ƒç”¨æ·±åº¦ä¼˜å…ˆéå†å‡½æ•°ã€‚</li><li>é‡å¤æ­¥éª¤ 1-3ï¼Œç›´åˆ°éå†å®Œæ•´æ£µæ ‘ã€‚</li></ul><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">interface</span> <span class="token class-name">TreeNode</span> <span class="token punctuation">&#123;</span>  value<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>  children<span class="token operator">:</span> TreeNode<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">dfsFindNode</span><span class="token punctuation">(</span>root<span class="token operator">:</span> TreeNode<span class="token punctuation">,</span> targetValue<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> TreeNode <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>root<span class="token punctuation">.</span>value <span class="token operator">===</span> targetValue<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> root<span class="token punctuation">;</span> <span class="token comment">// å½“å‰èŠ‚ç‚¹çš„å€¼ç­‰äºç›®æ ‡å€¼ï¼Œè¿”å›å½“å‰èŠ‚ç‚¹</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> node <span class="token keyword">of</span> root<span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">dfsFindNode</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> targetValue<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// é€’å½’æŸ¥æ‰¾å­èŠ‚ç‚¹</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> result<span class="token punctuation">;</span> <span class="token comment">// æ‰¾åˆ°ç›®æ ‡èŠ‚ç‚¹ï¼Œç›´æ¥è¿”å›</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// æœªæ‰¾åˆ°ç›®æ ‡èŠ‚ç‚¹ï¼Œè¿”å› null</span><span class="token punctuation">&#125;</span></code></pre><p>é¦–å…ˆè®¿é—®å½“å‰èŠ‚ç‚¹ï¼Œå¹¶åˆ¤æ–­å…¶å€¼æ˜¯å¦ç­‰äºç›®æ ‡å€¼ã€‚å¦‚æœç­‰äºç›®æ ‡å€¼ï¼Œç›´æ¥è¿”å›å½“å‰èŠ‚ç‚¹ï¼›å¦åˆ™å¯¹å½“å‰èŠ‚ç‚¹çš„æ¯ä¸ªå­èŠ‚ç‚¹ï¼Œé€’å½’è°ƒç”¨æ·±åº¦ä¼˜å…ˆéå†å‡½æ•°ï¼Œå¹¶è¿”å›æ‰¾åˆ°çš„ç›®æ ‡èŠ‚ç‚¹ã€‚å½“éå†å®Œæ•´æ£µæ ‘åï¼Œä»æœªæ‰¾åˆ°ç›®æ ‡èŠ‚ç‚¹ï¼Œåˆ™è¿”å›<code>null</code>ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">const</span> root<span class="token operator">:</span> TreeNode <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  value<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>  children<span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>      value<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>      children<span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token punctuation">&#123;</span> value<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> children<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token punctuation">&#123;</span> value<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> children<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#123;</span>      value<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>      children<span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token punctuation">&#123;</span> value<span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span> children<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token punctuation">&#123;</span> value<span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span> children<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">const</span> targetNode <span class="token operator">=</span> <span class="token function">dfsFindNode</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>targetNode<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#123; value: 6, children: [] &#125;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦ä¼˜å…ˆéå† </tag>
            
            <tag> å¹¿åº¦ä¼˜å…ˆéå† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Decorator è£…é¥°å™¨çš„å®ç°åŸç†åŠå®è·µ</title>
      <link href="/share/decorator/"/>
      <url>/share/decorator/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="Decorator-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Decorator-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Decorator æ˜¯ä»€ä¹ˆï¼Ÿ"></a><code>Decorator</code> æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>å› ä¸ºä¹‹å‰ä¸€ä¸ª <code>Vue</code> é¡¹ç›®ä¸­éœ€è¦å¯¹ä¸€ä¸ª <code>Watch</code> ç›‘å¬æ·»åŠ å»æŠ–åŠ¨åŠŸèƒ½ï¼Œæœ€åç»è¿‡æ·±æ€ç†Ÿè™‘ï¼Œå†³å®šä½¿ç”¨ <code>decorator</code> è¿›è¡Œå®ç°ã€‚</p><p>ç®€å•æ¥è®²ï¼Œ<code>decorator</code>å°±æ˜¯<code>ES7</code>çš„ä¸€ä¸ªè¯­æ³•ç³–ï¼Œç±»ä¼¼<code>wrapper</code>ï¼Œå®ƒä½œç”¨äºä¸€ä¸ªç›®æ ‡å‡½æ•°ï¼Œå¯¹è¿™ä¸ªç›®æ ‡å‡½æ•°æ·»åŠ ä¸€äº›é¢å¤–çš„æ“ä½œï¼Œç„¶åè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚å½¢å¦‚ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">myDecorator</span></span><span class="token keyword">function</span> <span class="token function">newFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'è¿™æ˜¯è¢«è£…é¥°å™¨åŒ…è£¹çš„å†…éƒ¨å‡½æ•°'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p><code>decorator</code> çš„å®ç°ä¾èµ–äº <code>ES5</code> çš„ <code>Object.defineProperty</code> æ–¹æ³•ã€‚</p><span id="more"></span><h3 id="äº†è§£-Object-defineProperty"><a href="#äº†è§£-Object-defineProperty" class="headerlink" title="äº†è§£ Object.defineProperty"></a>äº†è§£ <code>Object.defineProperty</code></h3><p><code>defineProperty</code> ç®€å•æ¥è¯´å°±æ˜¯ä¸ºè°ƒç”¨ä»–çš„å¯¹è±¡æ·»åŠ æ–°çš„å±æ€§ï¼Œæˆ–è€…å¯¹å·²çŸ¥æŸä¸ªå·²å­˜åœ¨çš„å±æ€§è¿›è¡Œä¿®æ”¹ã€‚</p><h4 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h4><pre class="language-typescript" data-language="typescript"><code class="language-typescript">Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> descriptor<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>å®ƒæœ‰ä¸‰ä¸ªå‚æ•°ï¼š</p><ul><li><code>obj</code>: ç›®æ ‡å¯¹è±¡</li><li><code>prop</code>: å±æ€§åï¼Œé”®</li><li><code>descriptor</code>: å±æ€§æè¿°ç¬¦ï¼Œé’ˆå¯¹è¯¥å±æ€§çš„æè¿°</li></ul><h4 id="descriptor-å±æ€§æè¿°ç¬¦"><a href="#descriptor-å±æ€§æè¿°ç¬¦" class="headerlink" title="descriptor å±æ€§æè¿°ç¬¦"></a><code>descriptor</code> å±æ€§æè¿°ç¬¦</h4><p>å¯¹è±¡é‡Œç›®å‰å­˜åœ¨çš„å±æ€§æè¿°ç¬¦æœ‰ä¸¤ç§ä¸»è¦å½¢å¼ï¼š<strong>æ•°æ®æè¿°ç¬¦</strong>å’Œ<strong>å­˜å–æè¿°ç¬¦</strong>ã€‚</p><p><strong>ä¸¤ç§æè¿°ç¬¦åªèƒ½æ˜¯å…¶ä¸­ä¹‹ä¸€ï¼Œä¸èƒ½åŒæ—¶ä½¿ç”¨ã€‚ä¸”éƒ½æ˜¯å¯¹è±¡</strong></p><ul><li><p>æ•°æ®æè¿°ç¬¦ï¼šæè¿°å±æ€§å€¼æ˜¯å¯å†™è¿˜æ˜¯ä¸å¯å†™ã€‚å¯¹åº”ç‹¬æœ‰çš„å¯é€‰é”®ï¼š<code>value(å±æ€§å€¼)/writable(å¯å†™)</code></p></li><li><p>å­˜å–æè¿°ç¬¦ï¼šç”± <code>getter</code> å’Œ <code>setter</code> å‡½æ•°æ‰€æè¿°çš„å±æ€§ã€‚å¯¹åº”ç‹¬æœ‰çš„å¯é€‰é”®ï¼š<code>get(å±æ€§è®¿é—®æ–¹æ³•)/set(å±æ€§è®¾ç½®æ–¹æ³•)</code></p></li><li><p>ä¸¤è€…å…±æœ‰çš„å¯é€‰é”®ï¼š<code>configurable(å¯å˜æ›´[åˆ é™¤])/enumerable(å¯æšä¸¾)</code></p></li></ul><blockquote><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty">äº†è§£æ›´å¤š Object.defineProperty ç›¸å…³</a></p></blockquote><h3 id="è£…é¥°è€…æ¨¡å¼"><a href="#è£…é¥°è€…æ¨¡å¼" class="headerlink" title="è£…é¥°è€…æ¨¡å¼"></a>è£…é¥°è€…æ¨¡å¼</h3><p><code>æ¦‚å¿µï¼šå…è®¸å‘ä¸€ä¸ªç°æœ‰çš„å¯¹è±¡æ·»åŠ æ–°çš„åŠŸèƒ½ï¼ŒåŒæ—¶åˆä¸æ”¹å˜å…¶ç»“æ„ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºç»“æ„å‹æ¨¡å¼ï¼Œå®ƒæ˜¯ä½œä¸ºç°æœ‰çš„ç±»çš„ä¸€ä¸ªåŒ…è£…ã€‚</code></p><p>ä½ å¯ä»¥ç†è§£ä¸ºå°±æ˜¯ä¸€å±‚<code>wrapper</code>ï¼Œ<code>React</code>çš„é«˜é˜¶å‡½æ•°ç»„ä»¶å°±æ˜¯è£…é¥°è€…æ¨¡å¼çš„ä¸€ä¸ªå®è·µã€‚æ¯”å¦‚ä¸‹é¢è¿™æ®µä»£ç ï¼š</p><pre class="language-tsx" data-language="tsx"><code class="language-tsx"><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">&#123;</span> IRouteComponentProps <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'umi'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> PageContainer <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/pro-layout'</span><span class="token punctuation">;</span><span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">'./index.less'</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token function-variable function">withLayout</span> <span class="token operator">=</span> <span class="token punctuation">(</span>Page<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token constant">FC</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'è¿™é‡Œå¯ä»¥æ·»åŠ ä¸€äº›å…¬ç”¨é€»è¾‘...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// è¿”å›ä¸€ä¸ªæ–°çš„ wrapper ç»„ä»¶</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>props<span class="token operator">:</span> IRouteComponentProps<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'è¿™é‡Œå¯ä»¥é€šè¿‡ propsï¼Œå¤„ç†ä¸€äº›ç‰¹æ®Šé€»è¾‘...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PageContainer</span></span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span>styles<span class="token punctuation">.</span>pageContainer<span class="token punctuation">&#125;</span></span><span class="token punctuation">></span></span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Page</span></span> <span class="token spread"><span class="token punctuation">&#123;</span><span class="token operator">...</span>props<span class="token punctuation">&#125;</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">PageContainer</span></span><span class="token punctuation">></span></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><h3 id="å†™ä¸€ä¸ª-decorator"><a href="#å†™ä¸€ä¸ª-decorator" class="headerlink" title="å†™ä¸€ä¸ª decorator"></a>å†™ä¸€ä¸ª <code>decorator</code></h3><blockquote><p><code>@</code>è£…é¥°å™¨ï¼Œåé¢ç´§è·Ÿä¸€ä¸ªè£…é¥°å™¨å‡½æ•°ï¼Œè¯¥å‡½æ•°æœ‰ä¸‰ä¸ªå½¢å‚ï¼š<code>target, propertyKey, descriptor</code>ï¼Œæœ€åè¿”å›ä¸€ä¸ªæ–°çš„<code>descriptor</code>ã€‚è¯¥å‡½æ•°å³æ˜¯ç›®æ ‡å‡½æ•°çš„<code>wrapper</code>å®ç°ï¼Œå½“ç„¶è¯¥è£…é¥°å™¨å‡½æ•°ä¹Ÿå¯ä»¥æ˜¯å·¥å‚å‡½æ•°ï¼Œé€šè¿‡<code>fn(...args)</code>è¿”å›ã€‚</p></blockquote><p><strong>è£…é¥°å™¨<code>decorator</code>åªèƒ½åœ¨ç±»ä¸­ä½¿ç”¨</strong></p><p><strong>åœ¨ç±»æ–¹æ³•ä¸Šä½¿ç”¨æ—¶ï¼Œtarget å°±æ˜¯ç±»çš„ prototypeï¼ŒpropertyKey å°±æ˜¯æ–¹æ³•å</strong></p><p><strong>åœ¨ç±»ä¸Šä½¿ç”¨æ—¶ï¼Œ<code>descriptor</code> æ¥å—çš„ç¬¬ä¸€ä¸ªå‚æ•° <code>target</code> å°±æ˜¯ç±»çš„ <code>prototype</code></strong></p><h4 id="åœ¨ç±»çš„ä¸€ä¸ªæ–¹æ³•ä¸Šä½¿ç”¨"><a href="#åœ¨ç±»çš„ä¸€ä¸ªæ–¹æ³•ä¸Šä½¿ç”¨" class="headerlink" title="åœ¨ç±»çš„ä¸€ä¸ªæ–¹æ³•ä¸Šä½¿ç”¨"></a>åœ¨ç±»çš„ä¸€ä¸ªæ–¹æ³•ä¸Šä½¿ç”¨</h4><p><code>è¯¥ä¾‹ä½¿ç”¨çš„æ˜¯</code> <strong>æ•°æ®æè¿°ç¬¦</strong> <code>çš„æ–¹å¼å¯¹ descriptor è¿›è¡Œä¿®æ”¹ã€‚æœ€åé¢è¿˜æœ‰ä¸€ä¸ª debounce çš„ä¾‹å­ï¼Œå‡†å¤‡ä½¿ç”¨</code> <strong>å­˜å–æè¿°ç¬¦</strong> <code>å®ç°</code></p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// log è£…é¥°å™¨ --- å¯æ¥å—å‚æ•°</span><span class="token keyword">function</span> <span class="token function">log</span><span class="token punctuation">(</span>fnName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> propertyKey<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> descriptor<span class="token operator">:</span> PropertyDescriptor<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> original <span class="token operator">=</span> descriptor<span class="token punctuation">.</span>value<span class="token punctuation">;</span> <span class="token comment">// æ‹¿åˆ°ç›®æ ‡å‡½æ•°</span>    descriptor<span class="token punctuation">.</span><span class="token function-variable function">value</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">è¿™å°±æ˜¯è£…é¥°å™¨ä¸º</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>fnName<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">å‡½æ•°æ·»åŠ çš„æ—¥å¿—åŠŸèƒ½</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">original</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> descriptor<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">&#123;</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>  <span class="token decorator"><span class="token at operator">@</span><span class="token function">log</span></span><span class="token punctuation">(</span><span class="token string">'myFn'</span><span class="token punctuation">)</span>  <span class="token function">myFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// console.log('è¿™æ˜¯ä¸€ä¸ªå‡½æ•°');</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>åœ¨è¯¥ä¾‹å­ä¸­ï¼Œæˆ‘åœ¨<code>Test</code>ä¸­å®šä¹‰äº†ä¸€ä¸ª<code>myFn</code>çš„æ–¹æ³•ï¼ŒåŒæ—¶ä¸ºå…¶æ·»åŠ äº†<code>log</code>çš„è£…é¥°å™¨ä¿®é¥°ã€‚<code>log</code>çš„ä½œç”¨å°±æ˜¯åœ¨<code>myFn</code>æ‰§è¡Œçš„æ—¶å€™ï¼Œæ·»åŠ  <code>console.log</code> çš„æ—¥å¿—æ‰“å°è®°å½•ã€‚è£…é¥°å™¨å‡½æ•°æœ€åè¿”å›ä¸€ä¸ªåŒ…å«æ–°çš„<code>value(ä¹Ÿå°±æ˜¯è¿™ä¸ªå‡½æ•°ä½“)</code>çš„<code>descriptor</code>ã€‚å®ƒçš„åŸç†ç­‰ä»·ä¸‹é¢å®ç°ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">const</span> defaultDescriptor <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// console.log('è¿™æ˜¯ä¸€ä¸ªå‡½æ•°');</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  enumerable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  configurable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  writable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">// è£…é¥°å™¨çš„ä½œç”¨ï¼šé€šè¿‡ @functionï¼šfunction è¿”å›æ–°çš„ descriptor</span><span class="token keyword">const</span> descriptor <span class="token operator">=</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'myFn'</span><span class="token punctuation">)</span><span class="token punctuation">(</span>Test<span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token string">'myFn'</span><span class="token punctuation">,</span> defaultDescriptor<span class="token punctuation">)</span> <span class="token operator">||</span> defaultDescriptor<span class="token punctuation">;</span><span class="token comment">// å°†æ–°çš„ descriptor ä½œç”¨åˆ°ç›®æ ‡æ–¹æ³•</span>Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>Test<span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token string">'myFn'</span><span class="token punctuation">,</span> descriptor<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¿™æ ·æ˜¯ä¸æ˜¯æ›´å®¹æ˜“ç†è§£<code>@</code>ç©¶ç«Ÿéƒ½å¹²äº†äº›ä»€ä¹ˆï¼Œæ€»ç»“ä¸‹æ¥ï¼Œå…¶å®è‡ªå·±å®ç°ä¸€ä¸ªè£…é¥°å™¨ä¹Ÿå°±ä¸é‚£ä¹ˆéš¾äº†ã€‚</p><h4 id="åœ¨ç±»ä¸Šä½¿ç”¨"><a href="#åœ¨ç±»ä¸Šä½¿ç”¨" class="headerlink" title="åœ¨ç±»ä¸Šä½¿ç”¨"></a>åœ¨ç±»ä¸Šä½¿ç”¨</h4><p>åœ¨ç±»ä¸Šä½¿ç”¨ï¼Œå¯ä»¥å®ç°å¾ˆå¤šæœ‰æ„æ€çš„åŠŸèƒ½ï¼š<strong>æ·»åŠ é™æ€æˆå‘˜ã€ç»§æ‰¿ã€MixInâ€¦</strong></p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">addType</span><span class="token punctuation">(</span>target<span class="token operator">:</span> Cat<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  target<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'Animal'</span><span class="token punctuation">;</span> <span class="token comment">// æ·»åŠ ç±»çš„é™æ€æˆå‘˜ static</span>  <span class="token keyword">return</span> target<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">addType</span></span><span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">public</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> name <span class="token punctuation">&#125;</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">æˆ‘æ˜¯ä¸€åª</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>Cat<span class="token punctuation">.</span><span class="token keyword">type</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">ï¼Œ æˆ‘çš„åå­—å«</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>é€šè¿‡åœ¨<code>Cat</code>ä¸Šæ·»åŠ <code>@addType</code>ï¼Œæ‰€æœ‰ç”¨åˆ°è¯¥è£…é¥°å™¨çš„ç±»ï¼Œéƒ½ä¼šå¤šä¸€ä¸ªé™æ€æˆå‘˜<code>type</code>ã€‚é‚£ä¹ˆç»§æ‰¿åˆè¯¥æ€ä¹ˆå®ç°å‘¢ï¼Ÿ</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Student</span></span><span class="token keyword">class</span> <span class="token class-name">Man</span> <span class="token punctuation">&#123;</span>  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'my name is '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span>target<span class="token operator">:</span> Student<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token keyword">extends</span></span> target <span class="token punctuation">&#123;</span>    <span class="token function">constructor</span><span class="token punctuation">(</span>opt<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">super</span><span class="token punctuation">(</span>opt<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// æ–¹æ³•é‡å†™</span>    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æˆ‘ä¸è¦ä½ è§‰å¾—ï¼Œæˆ‘è¦æˆ‘è§‰å¾—'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>é€šè¿‡<code>@Student</code>å¯ä»¥ç”Ÿæˆ<code>Man</code>çš„å­ç±»<code>Student</code>ï¼Œå½“ç„¶ä¾‹å­ä»…è¡¨ç¤ºèƒ½è¿™ä¹ˆå®ç°ï¼Œå®é™…ä¸šåŠ¡ä¸­<strong>ä¸æ¨èä½¿ç”¨è¿™ç§æ–¹å¼è¿›è¡Œç»§æ‰¿</strong>ï¼Œ<del><code>new Man()</code>ç”Ÿæˆçš„å®ä¾‹å±…ç„¶æ˜¯<code>Student</code>çš„å®ä¾‹ï¼Œä»€ä¹ˆï¼Ÿçˆ¶ç±»çš„å®ä¾‹å±…ç„¶æ˜¯å­ç±»çš„å®ä¾‹ï¼Ÿæƒ³æƒ³å°±æœ‰äº›å—ä¸äº†</del>ã€‚</p><p>é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰èƒ½æ¥å—çš„æ–¹å¼ï¼Ÿä¸‹é¢å®šä¹‰çš„<code>Mixin</code>ï¼Œç”¨åˆ°è¯¥è£…é¥°å™¨çš„ç±»ï¼Œå‡å¯æŒ‚è½½è¯¥è£…é¥°å™¨ç±»çš„æ‰€æœ‰æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">&#123;</span>  <span class="token function">runA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æˆ‘æ˜¯runA!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token punctuation">&#123;</span>  <span class="token function">runB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æˆ‘æ˜¯runB!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">mixin</span></span><span class="token punctuation">(</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">mixin</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// éå†åŸå‹ä¸Šçš„æ–¹æ³•ï¼Œå¹¶æŒ‚è½½åˆ°ç›®æ ‡ç±»</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> cls <span class="token keyword">of</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token comment">//! æ³¨æ„: é€šè¿‡è¿™ç§æ–¹å¼æ··å…¥åˆ°ç›®æ ‡ç±»ï¼Œä»…ä»…æ˜¯å®Œæˆäº†å°†æ–¹æ³•å‡½æ•°æ‹·è´åˆ°ç›®æ ‡ç±»çš„æ•ˆæœï¼Œå¹¶æœªæŒ‚è½½å®ä¾‹å¯¹è±¡çš„åŸºæœ¬å±æ€§ï¼Œå¹¶æœªå®ç°çœŸæ­£çš„å¤šç»§æ‰¿</span>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">of</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyNames</span><span class="token punctuation">(</span>cls<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">!==</span> <span class="token string">'constructor'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>            target<span class="token punctuation">.</span>prototype<span class="token punctuation">,</span>            key<span class="token punctuation">,</span>            Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>cls<span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">,</span>          <span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">C</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>c<span class="token punctuation">.</span><span class="token function">runA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æˆ‘æ˜¯runA!</span>c<span class="token punctuation">.</span><span class="token function">runB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æˆ‘æ˜¯runB!</span></code></pre><p>å®é™…é¡¹ç›®ä¸­åˆæ€ä¹ˆç”¨å‘¢ï¼Ÿ</p><h3 id="Vue2è£…é¥°å™¨è¯­æ³•ä¸­çš„è¿ç”¨"><a href="#Vue2è£…é¥°å™¨è¯­æ³•ä¸­çš„è¿ç”¨" class="headerlink" title="Vue2è£…é¥°å™¨è¯­æ³•ä¸­çš„è¿ç”¨"></a><code>Vue2</code>è£…é¥°å™¨è¯­æ³•ä¸­çš„è¿ç”¨</h3><p>è¿™ä¸ªæ˜¯ä¹‹å‰ç»™<code>watcher</code>æ·»åŠ <code>debounce</code>çš„æ—¶å€™åŠ çš„è£…é¥°å™¨ï¼Œå®ç°å¦‚ä¸‹ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> time<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// store timeout value for cancel the timeout</span>  <span class="token keyword">let</span> timeoutRef <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timeoutRef<span class="token punctuation">)</span><span class="token punctuation">;</span>    timeoutRef <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">Debounce</span><span class="token punctuation">(</span>limit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">debounceDesc</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> descriptor<span class="token operator">:</span> PropertyDescriptor<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>      configurable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>      enumerable<span class="token operator">:</span> descriptor<span class="token punctuation">.</span>enumerable<span class="token punctuation">,</span>      <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// Attach this function to the instance (not the class)</span>        Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>          configurable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          enumerable<span class="token operator">:</span> descriptor<span class="token punctuation">.</span>enumerable<span class="token punctuation">,</span>          value<span class="token operator">:</span> <span class="token function">debounce</span><span class="token punctuation">(</span>descriptor<span class="token punctuation">.</span>value<span class="token punctuation">,</span> limit<span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> ECMAScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> decorator </tag>
            
            <tag> è£…é¥°å™¨ </tag>
            
            <tag> javascript </tag>
            
            <tag> es7 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OAuth2.0 çš„å››ç§æˆæƒæ–¹å¼</title>
      <link href="/share/oauth/"/>
      <url>/share/oauth/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="Beforeâ€¦"><a href="#Beforeâ€¦" class="headerlink" title="Beforeâ€¦"></a>Beforeâ€¦</h3><blockquote><p><code>OAuth 2.0</code> é€šè¿‡æˆæƒæœºåˆ¶ï¼Œè®©ç¬¬ä¸‰æ–¹åº”ç”¨å¯ä»¥è·å–ç”¨æˆ·æˆ–è€…ç³»ç»Ÿæ•°æ®ã€‚</p></blockquote><p>å‰åç«¯åœ¨è¿›è¡Œé€šä¿¡(æˆ–è€…ç§°ä¹‹ä¸ºæ•°æ®è¯·æ±‚)æ—¶ï¼Œéœ€è¦åœ¨è¯·æ±‚æ—¶æºå¸¦ç”¨æˆ· <code>token</code>ï¼Œç”¨æ¥éªŒè¯ç”¨æˆ·çš„ç™»å½•æƒ…å†µå‡è½»æœåŠ¡å™¨å‹åŠ›ã€‚</p><p><code>OAuth</code> çš„æ ¸å¿ƒä½œç”¨å°±æ˜¯å‘å®¢æˆ·ç«¯é¢å‘ä»¤ç‰Œ(<code>token</code>)ã€‚</p><p>é€šå¸¸æ‰€è¯´çš„ä»¤ç‰Œ<code>token</code>ï¼Œåˆ†ä¸ºä¸¤ç§ï¼šå®¢æˆ·ç«¯ä»¤ç‰Œ(ä»»ä½•æ—¶å€™éƒ½èƒ½è®¿é—®èµ„æºçš„å‡­è¯ï¼Œé€šå¸¸ç”± <code>client_id(èº«ä»½id)/client_secret(å¯†é’¥ï¼šåªèƒ½ä¿å­˜åˆ°åç«¯)</code> ç”Ÿæˆ)ã€ç”¨æˆ·ä»¤ç‰Œ(å®Œæˆç™»å½•åç”Ÿæˆ)ã€‚</p><span id="more"></span><h3 id="æˆæƒæ–¹å¼"><a href="#æˆæƒæ–¹å¼" class="headerlink" title="æˆæƒæ–¹å¼"></a>æˆæƒæ–¹å¼</h3><h4 id="æˆæƒç "><a href="#æˆæƒç " class="headerlink" title="æˆæƒç "></a>æˆæƒç </h4><blockquote><p>é€‚ç”¨äºæœ‰ä¸­é—´å±‚çš„ <code>web</code> é¡¹ç›®,å¹¶å°†ç”Ÿæˆçš„ <code>token</code> å­˜åˆ° <code>node</code> åç«¯ï¼Œé¿å…ä»¤ç‰Œæ³„éœ²ã€‚è¿™ç§æ–¹å¼å®‰å…¨æ€§æœ€é«˜ï¼Œä¹Ÿæ˜¯æˆ‘æœ€è¿‘é¡¹ç›®ç”¨åˆ°çš„é‰´æƒæ–¹å¼ã€‚</p></blockquote><ul><li><p>æ­¥éª¤ä¸€ï¼šç½‘ç«™<code>A(client)</code>ç‚¹å‡»ç™»å½•(æˆ–è€…å…¶ä»–é“¾æ¥)ï¼Œè·³è½¬è‡³ç½‘ç«™<code>B(JAVAæˆ–è€…å…¶ä»–åç«¯)ï¼šhttps://b.com/oauth/authorize?query</code>,<code>query</code>å‚æ•°å¦‚ä¸‹ï¼š</p><pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>  <span class="token property">"response_type"</span><span class="token operator">:</span> <span class="token string">"code"</span><span class="token punctuation">,</span> <span class="token comment">// è¡¨ç¤ºè¦æ±‚è¿”å›æˆæƒç </span>  <span class="token property">"client_id"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token comment">// åº”ç”¨æ ‡è¯† å‘Šè¯‰ B æ˜¯å“ªä¸ªç«™ç‚¹åº”ç”¨åœ¨è¯·æ±‚</span>  <span class="token property">"redirect_uri"</span><span class="token operator">:</span> <span class="token string">""</span> <span class="token comment">// å‚æ•°è¡¨ç¤º B å®Œæˆå®Œæˆæˆæƒè¿‡ç¨‹åé‡å®šå‘çš„é“¾æ¥åœ°å€</span>  <span class="token comment">// "scope": ""  // å‚æ•°è¡¨ç¤ºè¦æ±‚çš„æˆæƒèŒƒå›´ï¼Œå¯ä¸è®¾</span><span class="token punctuation">&#125;</span></code></pre><ul><li><p>ç™»å½•é€»è¾‘æ”¾åˆ°äº†å‰ç«¯<code>A</code>ï¼Œé‚£ä¹ˆç”±å‰ç«¯<code>A</code>å®Œæˆè´¦å·å¯†ç å½•å…¥ï¼Œå‘èµ·ç™»å½•è¯·æ±‚<code>https://b.com/oauth/login(æä¾›ç™»å½•æˆåŠŸåçš„é‡å®šå‘åœ°å€ successRedirect... æ³¨æ„åŒºåˆ† redirect_uri)</code>ï¼Œç”±ç½‘ç«™<code>B</code>é‡å®šå‘åˆ°<code>A(node)ï¼š/a.com/oauth/successRedirect(ä¸­é—´å±‚è·å–æˆæƒç )</code>ï¼Œç”±<code>A(node: /successRedirect)</code>æ‹¿åˆ°æˆæƒç è¿›è¡Œé‡å®šå‘<code>(redirect_uri)</code>â€¦</p></li><li><p>ç™»å½•é€»è¾‘æ”¾åˆ°äº†åç«¯<code>B</code>ï¼Œé‚£ä¹ˆåœ¨ç‚¹å‡»äº†<code>A</code>æä¾›çš„é“¾æ¥åï¼Œä¼šåœ¨<code>B</code>ç½‘ç«™ç™»å½•é¡µå®Œæˆç™»å½•å¹¶æç¤ºæ¥å—<code>A</code>æˆæƒï¼Œå®Œæˆç™»å½•è¿‡ç¨‹,å¹¶ç”Ÿæˆæˆæƒç ï¼Œç„¶åé‡å®šå‘â€¦</p></li></ul><p>åŸºäºä¸¤ç§ä¸åŒåœºæ™¯ä¸‹çš„ç™»å½•ï¼Œæœ€ç»ˆéƒ½å°†ç”Ÿæˆæˆæƒç ï¼Œå¹¶ä½œä¸º<code>query</code>æºå¸¦ï¼Œé‡å®šå‘å›<code>A(nodeçš„ä¸€ä¸ªæ¥å£ï¼Œeg. https://a.com/SSOCheckUser?code=xxx)</code></p></li><li><p>æ­¥éª¤äºŒï¼šç½‘ç«™<code>A(node)</code>æ‹¿åˆ°æˆæƒç (<code>code</code>)åï¼Œå°±å¯ä»¥å‘<code>B</code>è¯·æ±‚ä»¤ç‰Œ <code>https://b.com/oauth/token?query</code>ï¼Œ<code>query</code>å‚æ•°å¦‚ä¸‹ï¼š</p><pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>  <span class="token property">"client_id"</span><span class="token operator">:</span> <span class="token string">"CLIENT_ID"</span><span class="token punctuation">,</span> <span class="token comment">// åº”ç”¨æ ‡è¯†</span>  <span class="token property">"client_secret"</span><span class="token operator">:</span> <span class="token string">"CLIENT_SECRET"</span><span class="token punctuation">,</span> <span class="token comment">// å¯†é’¥ï¼Œåªèƒ½å­˜å‚¨åœ¨ A(node) å±‚</span>  <span class="token comment">// B é€šè¿‡ A æä¾› client_id client_secret æ¥åˆ¤å®š A çš„èº«ä»½ (èº«ä»½è¯†åˆ«ç ï¼Œè¿™ä¸ªé€šå¸¸æ˜¯ä¼šå¤‡æ¡ˆåˆ°ç½‘ç«™ B)</span>  <span class="token property">"grant_type"</span><span class="token operator">:</span> <span class="token string">"authorization_code"</span><span class="token punctuation">,</span> <span class="token comment">// æ ‡è¯†æˆæƒæ–¹å¼æ˜¯æˆæƒç </span>  <span class="token property">"code"</span><span class="token operator">:</span> <span class="token string">"xxx"</span> <span class="token comment">// ç¬¬ä¸€æ­¥æ‹¿åˆ°çš„æˆæƒç </span>  <span class="token comment">// "redirect_uri": "WEB_REDIRECT_URL" // å¯ä»¥æ˜¯ A(node) çš„ä¸€ä¸ªé…ç½®ï¼Œæ¯”å¦‚è·³è½¬åˆ° A(client) çš„é¦–é¡µ</span><span class="token punctuation">&#125;</span></code></pre><p>è¯¥è¯·æ±‚ä¼šè¿”å›ä»¤ç‰Œä¿¡æ¯ï¼šåŒ…å«<code>access_token(ä»¤ç‰Œ)/refresh_token(ç”¨äºæ›´æ–°ä»¤ç‰Œ)/expires_in(è¿‡æœŸæ—¶é—´)...</code></p><p>åŒæ—¶ï¼Œä½ å¯ä»¥é€šè¿‡æ‹¿åˆ°çš„ä»¤ç‰Œä¿¡æ¯è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„è¯¦ç»†ä¸ªäººä¿¡æ¯ï¼Œå¹¶å°†ç”¨æˆ·ä¿¡æ¯åŠ<code>refresh_token</code>å­˜å‚¨åˆ°<code>node:session</code>ã€‚<del>è¿˜å¯ä»¥æŠŠç”¨æˆ· access_token å­˜åˆ° redisï¼Œkey å³ä¸º sessionId</del></p><p>æœ€ç»ˆé‡å®šå‘å›<code>A(client)</code>é…ç½®çš„ä¸€ä¸ªåœ°å€ã€‚</p><p>å‰ç«¯è®¿é—®åç«¯æœåŠ¡æ—¶ï¼Œé€šè¿‡ä¸­é—´å±‚ä»£ç†ï¼Œè¿½åŠ <code>token</code>ä¿¡æ¯åˆ°<code>header</code>ä¸­ï¼Œå¦‚æœ<code>token</code>è¿‡æœŸï¼Œåˆ™é€šè¿‡<code>refresh_token</code>æ›´æ–°ä»¤ç‰Œï¼Œå¦‚æœç™»å½•è¿‡æœŸï¼Œåˆ™é‡å®šå‘åˆ°ç™»å½•åœ°å€ã€‚</p></li></ul><p><code>åŸºäºè¿™ç§æ–¹å¼è®¤è¯ï¼ŒA(client)è¯·æ±‚ä»»ä½•æ¥å£éƒ½å°†é€šè¿‡ A(node) è¿›è¡Œè½¬å‘ï¼Œåœ¨ A(client) ä»…ä¿å­˜å›è¯id(sessionId)ï¼Œè¯¥ sessionId ç”± A(node) ä¿å­˜è®¾ç½®è‡³ cookie ä¸­(ä¼šè¯æœŸé—´æœ‰æ•ˆ)ï¼Œå‰ç«¯ A(client) åœ¨å‘èµ· http è¯·æ±‚æ—¶ä¼šè‡ªåŠ¨æºå¸¦ï¼ŒA(node) ä» req.session ä¸­è§£æå‰é¢æ­¥éª¤å­˜å…¥çš„ refresh_token è·å–å½“å‰çš„ access_token(å‡ºäºæ€§èƒ½è€ƒè™‘ï¼Œå¯ä»¥å°† ak å­˜å…¥ redis) ä¿å­˜åˆ° res.localsï¼Œè®¾ç½® proxyMiddleWare æ·»åŠ ä»£ç†è¯·æ±‚çš„ headers: proxyReq.setHeader(&#39;Authorization&#39;, token)</code></p><blockquote><p><code>res.locals</code> æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ç”¨äºæ¸²æŸ“è§†å›¾çš„ä¸Šä¸‹æ–‡ã€‚ä½œç”¨ï¼šåœ¨æ¨¡æ¿ä¸­ç›´æ¥ä½¿ç”¨ã€ç”¨æ¥å­˜å‚¨ä¸€äº›å…¨å±€å˜é‡</p></blockquote><h4 id="å‡­è¯å¼"><a href="#å‡­è¯å¼" class="headerlink" title="å‡­è¯å¼"></a>å‡­è¯å¼</h4><blockquote><p>é€‚ç”¨äºæœ‰åç«¯(<code>node</code>)çš„<code>web</code>åº”ç”¨ï¼Œåœ¨ä¸­é—´å±‚é€šè¿‡å®¢æˆ·ç«¯ä»¤ç‰Œå®Œæˆä¸€äº›éœ€è¦ç™»å½•ï¼ˆä½†å¹¶æ²¡æœ‰ç™»å½•ï¼‰æ‰èƒ½è·å–èµ„æºçš„è¯·æ±‚ã€‚</p></blockquote><blockquote><p>åŒæ—¶é€‚ç”¨äºå‘½ä»¤è¡Œ&#x2F;<code>postman</code>æ¥å£æµ‹è¯•ä½¿ç”¨ã€‚</p></blockquote><p>è¿™ç§æ–¹å¼è·å–çš„ä»¤ç‰Œå¹¶ä¸æ˜¯é’ˆå¯¹ç”¨æˆ·ä½¿ç”¨çš„ï¼Œå› ä¸ºç”Ÿæˆçš„ä»¤ç‰Œå¯ä»¥å¤šä¸ªç”¨æˆ·å…±äº«ã€‚<del>å½“ç„¶åç«¯å¯ä»¥é€šè¿‡åˆ¤æ–­ session çš„ç”¨æˆ·ä¿¡æ¯ï¼Œæ ‡è®°å½“å‰ä½¿ç”¨å®¢æˆ·ç«¯ä»¤ç‰Œçš„èµ„æºè¯·æ±‚èŒƒå›´</del></p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> info <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://b.com/oauth/token</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>  <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">grant_type</span><span class="token operator">:</span> <span class="token string">'client_credentials'</span><span class="token punctuation">,</span> <span class="token comment">// é‡‡ç”¨å‡­è¯å¼</span>    <span class="token literal-property property">client_id</span><span class="token operator">:</span> <span class="token constant">CLIENT_ID</span><span class="token punctuation">,</span> <span class="token comment">// åº”ç”¨æ ‡è¯†</span>    <span class="token literal-property property">client_secret</span><span class="token operator">:</span> <span class="token constant">CLIENT_SECRET</span><span class="token punctuation">,</span> <span class="token comment">// å¯†é’¥</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="å¯†ç å¼"><a href="#å¯†ç å¼" class="headerlink" title="å¯†ç å¼"></a>å¯†ç å¼</h4><blockquote><p>é€‚ç”¨èŒƒå›´å°ã€‚ä¸ºäº†ç¡®ä¿å®‰å…¨æ€§ï¼Œä¸€èˆ¬æ˜¯åœ¨ä¸­é—´å±‚ä½¿ç”¨ï¼Œæˆ–è€…åœ¨æ¥å£è°ƒè¯•çš„æ—¶å€™ä½¿ç”¨</p></blockquote><p>è¿™ç§æ–¹å¼éœ€è¦ç”¨æˆ·ç»™å‡ºè‡ªå·±çš„è´¦å·å¯†ç ï¼Œé£é™©å¤§ï¼Œéœ€è¦é«˜åº¦ä¿¡ä»»ç½‘ç«™<code>B</code>ï¼Œä¸å»ºè®®ä½¿ç”¨ã€‚è·å–æ–¹å¼ï¼š</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> info <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://b.com/oauth/token</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>  <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">grant_type</span><span class="token operator">:</span> <span class="token string">'password'</span><span class="token punctuation">,</span> <span class="token comment">// è¡¨ç¤ºå¯†ç å¼</span>    <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token constant">USERNAME</span><span class="token punctuation">,</span> <span class="token comment">// è´¦å·</span>    <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token constant">PASSWORD</span><span class="token punctuation">,</span> <span class="token comment">// å¯†ç </span>    <span class="token literal-property property">client_id</span><span class="token operator">:</span> <span class="token constant">CLIENT_ID</span><span class="token punctuation">,</span> <span class="token comment">// åº”ç”¨æ ‡è¯†</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¯¥æ–¹å¼æ˜¯å°†ä»¤ç‰Œæ”¾åˆ° <code>response</code> ä¸­ä½œä¸º <code>json</code> æ•°æ®è¿›è¡Œè¿”å›çš„ï¼Œä¸è¿›è¡Œé‡å®šå‘ã€‚</p><h4 id="éšè—å¼"><a href="#éšè—å¼" class="headerlink" title="éšè—å¼"></a>éšè—å¼</h4><blockquote><p>é€‚ç”¨äºå‰åç«¯åˆ†ç¦»ï¼Œä¸”æ²¡æœ‰<code>node</code>ä¸­é—´å±‚æœåŠ¡çš„<code>web</code>åº”ç”¨ã€‚</p></blockquote><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> info <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://b.com/oauth/authorize</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>  <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">response_type</span><span class="token operator">:</span> <span class="token string">'token'</span><span class="token punctuation">,</span> <span class="token comment">// è¡¨ç¤ºè¦æ±‚ç›´æ¥è¿”å›ä»¤ç‰Œ</span>    <span class="token literal-property property">client_id</span><span class="token operator">:</span> <span class="token constant">CLIENT_ID</span><span class="token punctuation">,</span> <span class="token comment">// åº”ç”¨æ ‡è¯†</span>    <span class="token literal-property property">redirect_uri</span><span class="token operator">:</span> <span class="token constant">REDIRECT_URL</span><span class="token punctuation">,</span> <span class="token comment">// å®Œæˆè®¤è¯åçš„é‡å®šå‘åœ°å€</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¿™ç§æ–¹å¼è™½ç„¶ä½¿ç”¨é¢æœ€å¹¿ï¼Œä½†æ˜¯ä¹Ÿå¾ˆä¸å®‰å…¨ï¼Œå› ä¸º<code>token</code>æ˜¯ç›´æ¥ä¼ é€’ç»™å‰ç«¯çš„ï¼Œåªé€‚åˆå®‰å…¨è¦æ±‚ä¸é«˜çš„åœºæ™¯ï¼ŒåŒæ—¶æœ‰æ•ˆæœŸé€šå¸¸ä¸ºä¼šè¯æœŸé—´(<code>session</code>).</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> ç™»å½•è®¤è¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> oauth </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>v-foråœ¨ç‰¹å®šåœºæ™¯ä¸‹ä¼šå¤±å»å“åº”å¼</title>
      <link href="/bugs/v-for-unresponsive/"/>
      <url>/bugs/v-for-unresponsive/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h3><p>å‰æ®µæ—¶é—´ï¼Œå®ç°ä¸€ä¸ªè¡¨å•å­—æ®µæäº¤æ ¡éªŒåŠŸèƒ½æ—¶ç¢°åˆ°çš„ä¸€ä¸ªæœ‰è¶£çš„é—®é¢˜â€¦<code>v-for</code>çš„å…ƒç´ å±…ç„¶å¤±å»å“åº”å¼äº†ï¼Ÿ<code>what...</code><del>å¼€å§‹æ€€ç–‘äººç”Ÿ ğŸ™„ğŸ™„ğŸ™„</del></p><p>ä»£ç å¤§è‡´å¦‚ä¸‹ï¼š</p><span id="more"></span><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>actionNodeValidate<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>el-icon-edit<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>addFieldCheckCondition<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ·»åŠ å­—æ®µæ ¡éªŒ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(item, idx) in checkConditions<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-row</span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>idx<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>flex<span class="token punctuation">"</span></span> <span class="token attr-name">justify</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>space-between<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mt-5<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-col</span> <span class="token attr-name">:span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>21<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-input</span> <span class="token attr-name">readonly</span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.conditions<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-col</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-col</span> <span class="token attr-name">:span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>el-icon-edit<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>editFieldConditions(idx)<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-col</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-col</span> <span class="token attr-name">:span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>danger<span class="token punctuation">"</span></span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>el-icon-delete<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>delFieldConditions(idx)<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-col</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-row</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-dialog</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æ ¡éªŒé€šè¿‡æ¡ä»¶é…ç½®<span class="token punctuation">"</span></span> <span class="token attr-name">append-to-body</span> <span class="token attr-name">:visible.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>visible<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FormularPattern</span>        <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>currentConf.conditions<span class="token punctuation">"</span></span>        <span class="token attr-name">@close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>visible = false<span class="token punctuation">"</span></span>        <span class="token attr-name">@confirm</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>setFieldCondition<span class="token punctuation">"</span></span>      <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-dialog</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">  <span class="token keyword">import</span> <span class="token punctuation">&#123;</span> Component<span class="token punctuation">,</span> PropSync<span class="token punctuation">,</span> Vue <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue-property-decorator'</span><span class="token punctuation">;</span>  <span class="token keyword">import</span> FieldCheckConditions <span class="token keyword">from</span> <span class="token string">'./FieldCheckConditions'</span><span class="token punctuation">;</span>  <span class="token keyword">import</span> FormularPattern <span class="token keyword">from</span> <span class="token string">'./FormularPattern/index.vue'</span><span class="token punctuation">;</span>  @<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'ActionNodeValidate'</span><span class="token punctuation">,</span> <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> FormularPattern <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">ActionNodeValidate</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">&#123;</span>    @<span class="token function">PropSync</span><span class="token punctuation">(</span><span class="token string">'conditions'</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> checkConditions<span class="token operator">!</span><span class="token operator">:</span> FieldCheckConditions<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> visible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> conditionIdx <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// æ ‡è®°å½“å‰çš„é…ç½®é¡¹ç´¢å¼•</span>    <span class="token keyword">public</span> <span class="token literal-property property">currentConf</span><span class="token operator">:</span> FieldCheckConditions <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FieldCheckConditions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">addFieldCheckCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>currentConf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FieldCheckConditions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>conditionIdx <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token function">delFieldConditions</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">idx</span><span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>checkConditions<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>idx<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token function">editFieldConditions</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">idx</span><span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>conditionIdx <span class="token operator">=</span> idx<span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>currentConf <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>checkConditions<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token function">setFieldCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>conditionIdx <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>checkConditions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentConf <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>checkConditions<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>conditionIdx<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentConf <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><blockquote><p>å¯¹äºæ•°ç»„ç±»å‹å€¼çš„ä¿®æ”¹ä½¿ç”¨çš„<code>pushã€splice</code>ï¼Œ<del>å½“ç„¶ä¹Ÿå¯ä»¥æ˜¯<code>$set</code></del>ã€‚çœ‹èµ·æ¥ä¼¼ä¹å¹¶æ²¡æœ‰ä»€ä¹ˆæ¯›ç—…â€¦</p></blockquote><h3 id="é—®é¢˜åˆ†æ"><a href="#é—®é¢˜åˆ†æ" class="headerlink" title="é—®é¢˜åˆ†æ"></a>é—®é¢˜åˆ†æ</h3><p>é€šè¿‡<code>dev-tools</code>åˆ†æï¼Œå‘ç°<code>v-for</code>ç»‘å®šçš„å€¼æ˜¯å®æ—¶å˜æ›´äº†ï¼Œä¸”ç»„ä»¶ä¹Ÿç›‘å¬åˆ°å˜åŒ–äº†ï¼Œä½†ç•Œé¢å°±æ˜¯æ²¡æ¸²æŸ“â€¦</p><p><a href="/images/bugs/v-for-unresponsive/p1.png"><img src="/images/bugs/v-for-unresponsive/p1.png" alt="v-for-unresponsive-p1" loading="lazy"></a><br><a href="/images/bugs/v-for-unresponsive/p2.png"><img src="/images/bugs/v-for-unresponsive/p2.png" alt="v-for-unresponsive-p2" loading="lazy"></a></p><p>é‚£å°±ä»æºç åˆ†æâ€¦<code>vue</code>åœ¨æ›´æ–°<code>dom</code>å…ƒç´ æ—¶,ä¼šè°ƒç”¨<code>updateChildren</code>æ–¹æ³•ï¼š</p><p><a href="/images/bugs/v-for-unresponsive/p3.png"><img src="/images/bugs/v-for-unresponsive/p3.png" alt="v-for-unresponsive-p3" loading="lazy"></a><br><a href="/images/bugs/v-for-unresponsive/p4.png"><img src="/images/bugs/v-for-unresponsive/p4.png" alt="v-for-unresponsive-p4" loading="lazy"></a></p><blockquote><p>è¿›è¡Œ <code>diff</code> æ¯”å¯¹ï¼Œé‡‡ç”¨â€™å°±åœ°å¤ç”¨â€™åŸåˆ™ï¼Œå‡å°å¼€é”€ï¼Œ<code>eg. dataæ•°æ® ä» [1] -&gt; [0,2,3,1,4,5] è¿‡ç¨‹ä¸­ï¼Œè¿›è¿‡æ¯”å¯¹ï¼Œéœ€è¦åœ¨1è¿™ä¸ªdomä¹‹å‰æ’å…¥ 0,2,3</code>ï¼Œæ¯”å¯¹å®Œæˆæ‰§è¡Œ<code>addVnodes</code>å‡½æ•°ã€‚</p></blockquote><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">addVnodes</span><span class="token punctuation">(</span><span class="token parameter">parentElm<span class="token punctuation">,</span> refElm<span class="token punctuation">,</span> vnodes<span class="token punctuation">,</span> startIdx<span class="token punctuation">,</span> endIdx<span class="token punctuation">,</span> insertedVnodeQueue</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> startIdx <span class="token operator">&lt;=</span> endIdx<span class="token punctuation">;</span> <span class="token operator">++</span>startIdx<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">createElm</span><span class="token punctuation">(</span>vnodes<span class="token punctuation">[</span>startIdx<span class="token punctuation">]</span><span class="token punctuation">,</span> insertedVnodeQueue<span class="token punctuation">,</span> parentElm<span class="token punctuation">,</span> refElm<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> vnodes<span class="token punctuation">,</span> startIdx<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>æˆ‘è¿™è°ƒè¯•çš„æ˜¯<code>push</code>è¿½åŠ <code>currentConf</code>åŠŸèƒ½ï¼Œ<code>debug startIdx/endIdxï¼ˆparentEleçš„childrenIndexï¼‰</code>å‡ä¸º 1.(ä¸éš¾å‘ç°ï¼Œåœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œ<code>v-for çš„çˆ¶å…ƒç´ åŒ el-button&lt;æ·»åŠ å­—æ®µæ ¡éªŒ&gt;ï¼ˆindex = 0ï¼‰ï¼Œå‡ä¸º div.actionNodeValidate</code>ï¼Œæ•…<code>startIdx</code>ä¸º 1).</p><p>ç»§ç»­çœ‹<code>createElm</code>å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿäº†ä»€ä¹ˆâ€¦</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">createElm</span><span class="token punctuation">(</span><span class="token parameter">vnode<span class="token punctuation">,</span> insertedVnodeQueue<span class="token punctuation">,</span> parentElm<span class="token punctuation">,</span> refElm<span class="token punctuation">,</span> nested<span class="token punctuation">,</span> ownerArray<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>elm<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isDef</span><span class="token punctuation">(</span>ownerArray<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// This vnode was used in a previous render!</span>    <span class="token comment">// now it's used as a new node, overwriting its elm would cause</span>    <span class="token comment">// potential patch errors down the road when it's used as an insertion</span>    <span class="token comment">// reference node. Instead, we clone the node on-demand before creating</span>    <span class="token comment">// associated DOM element for it.</span>    vnode <span class="token operator">=</span> ownerArray<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">cloneVNode</span><span class="token punctuation">(</span>vnode<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‹·è´å½“å‰éœ€è¦æ·»åŠ çš„ vNode</span>  <span class="token punctuation">&#125;</span>  vnode<span class="token punctuation">.</span>isRootInsert <span class="token operator">=</span> <span class="token operator">!</span>nested<span class="token punctuation">;</span> <span class="token comment">// for transition enter check</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">createComponent</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> insertedVnodeQueue<span class="token punctuation">,</span> parentElm<span class="token punctuation">,</span> refElm<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// æ·»åŠ çš„vnodeå­ç»„ä»¶åˆ›å»ºï¼Œè¿™é‡Œæ˜¯ nullï¼Œè¿”å›undefined</span>    <span class="token keyword">return</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">var</span> data <span class="token operator">=</span> vnode<span class="token punctuation">.</span>data<span class="token punctuation">;</span>  <span class="token keyword">var</span> children <span class="token operator">=</span> vnode<span class="token punctuation">.</span>children<span class="token punctuation">;</span> <span class="token comment">// []</span>  <span class="token keyword">var</span> tag <span class="token operator">=</span> vnode<span class="token punctuation">.</span>tag<span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// vue-component-48-ElRow</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">.</span>pre<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        creatingElmInVPre<span class="token operator">++</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isUnknownElement$$1</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> creatingElmInVPre<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">warn</span><span class="token punctuation">(</span>          <span class="token string">'Unknown custom element: &lt;'</span> <span class="token operator">+</span>            tag <span class="token operator">+</span>            <span class="token string">'> - did you '</span> <span class="token operator">+</span>            <span class="token string">'register the component correctly? For recursive components, '</span> <span class="token operator">+</span>            <span class="token string">'make sure to provide the "name" option.'</span><span class="token punctuation">,</span>          vnode<span class="token punctuation">.</span>context<span class="token punctuation">,</span>        <span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    vnode<span class="token punctuation">.</span>elm <span class="token operator">=</span> vnode<span class="token punctuation">.</span>ns      <span class="token operator">?</span> nodeOps<span class="token punctuation">.</span><span class="token function">createElementNS</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>ns<span class="token punctuation">,</span> tag<span class="token punctuation">)</span>      <span class="token operator">:</span> nodeOps<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>tag<span class="token punctuation">,</span> vnode<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// document.createElement</span>    <span class="token function">setScope</span><span class="token punctuation">(</span>vnode<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/* istanbul ignore if */</span>    <span class="token punctuation">&#123;</span>      <span class="token function">createChildren</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> children<span class="token punctuation">,</span> insertedVnodeQueue<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// children is [].</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">invokeCreateHooks</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> insertedVnodeQueue<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åˆ›å»ºç›¸å…³ hooks</span>      <span class="token punctuation">&#125;</span>      <span class="token function">insert</span><span class="token punctuation">(</span>parentElm<span class="token punctuation">,</span> vnode<span class="token punctuation">.</span>elm<span class="token punctuation">,</span> refElm<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰§è¡Œ insert</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span> <span class="token operator">&amp;&amp;</span> data <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">.</span>pre<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      creatingElmInVPre<span class="token operator">--</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isTrue</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>isComment<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    vnode<span class="token punctuation">.</span>elm <span class="token operator">=</span> nodeOps<span class="token punctuation">.</span><span class="token function">createComment</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">insert</span><span class="token punctuation">(</span>parentElm<span class="token punctuation">,</span> vnode<span class="token punctuation">.</span>elm<span class="token punctuation">,</span> refElm<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    vnode<span class="token punctuation">.</span>elm <span class="token operator">=</span> nodeOps<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">insert</span><span class="token punctuation">(</span>parentElm<span class="token punctuation">,</span> vnode<span class="token punctuation">.</span>elm<span class="token punctuation">,</span> refElm<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨<code>createElm</code>å‡½æ•°ä¸­ï¼Œæ‰§è¡Œäº†<code>æ‹·è´vNode -&gt; createComponent -&gt; document.createElement -&gt; createChildren -&gt; hooksæŒ‚è½½ -&gt; æœ€ç»ˆæ‰§è¡Œinsertå‡½æ•°</code>â€¦</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token parameter">parent<span class="token punctuation">,</span> elm<span class="token punctuation">,</span> ref$$1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// div.actionNodeValidate</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>ref$$1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token comment">// el-dialog__wrapper.node-validate-dialog ---> v-for çš„ç›¸é‚»å…ƒç´ (æ’å…¥ä½ç½®index+1) ---> (å› ä¸ºv-foræ²¡æœ‰wrapperï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯ .node-validate-dialog)</span>      <span class="token comment">// parent(div.actionNodeValidate) !== body</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>nodeOps<span class="token punctuation">.</span><span class="token function">parentNode</span><span class="token punctuation">(</span>ref$$1<span class="token punctuation">)</span> <span class="token operator">===</span> parent<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// æ¯”å¯¹æ’å…¥ä½ç½®èŠ‚ç‚¹ä¸å…¶ç›¸é‚»å…ƒç´ çš„çˆ¶èŠ‚ç‚¹æ˜¯å¦ä¸€è‡´ï¼Œä¸€è‡´åˆ™ç›´æ¥åœ¨ç›¸é‚»å…ƒç´ å‰æ’å…¥æ–°èŠ‚ç‚¹ï¼Œä¸ä¸€è‡´æ—¶æ²¡æœ‰åšä»»ä½•å¤„ç†</span>        nodeOps<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>parent<span class="token punctuation">,</span> elm<span class="token punctuation">,</span> ref$$1<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>      <span class="token comment">// ä¸ä¸€è‡´... æˆ‘ä»¬çš„ä»£ç æ‰§è¡Œåˆ°è¿™  Gäº†...</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>      <span class="token comment">// æ²¡æœ‰ç›¸é‚»vNodeï¼Œç›´æ¥åœ¨ parentEle è¿½åŠ  children</span>      nodeOps<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>parent<span class="token punctuation">,</span> elm<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><blockquote><p><code>insert</code>å‡½æ•°æ¯”å¯¹äº†â€™æ’å…¥ä½ç½®â€™ä¸å…¶â€™ç›¸é‚»<code>vNode</code>â€˜(<strong>æ’å…¥ä½ç½®<code>index+1</code>çš„<code>vNode</code>èŠ‚ç‚¹</strong>)çš„çˆ¶èŠ‚ç‚¹æ˜¯å¦ä¸€è‡´ï¼Œä¸€è‡´åˆ™åœ¨å…¶â€™ç›¸é‚»èŠ‚ç‚¹â€™å‰æ’å…¥æ–°çš„èŠ‚ç‚¹(<code>insertBefore</code>)ã€‚<del>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœç›¸é‚»<code>vNode</code>çš„çˆ¶èŠ‚ç‚¹ä¸å½“å‰<code>parentEle</code>ä¸ç›¸åŒæ—¶ï¼Œæ²¡æœ‰åšä»»ä½•å¤„ç†â€¦ğŸ˜®ğŸ˜®ğŸ˜®</del><br>å¦‚æœç›¸é‚»å…ƒç´ ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå°±ç›´æ¥è¿½åŠ (<code>appendChild</code>).</p></blockquote><p>æœ€ç»ˆå‘ç°<code>nodeOps.parentNode(ref$$1) === parent</code>æ¡ä»¶ä¸º<code>false</code>ï¼Œæ‰€ä»¥é¡µé¢å¹¶æ²¡æœ‰æ¸²æŸ“.<code>whyï¼Ÿ</code>ä¸ºä»€ä¹ˆçˆ¶èŠ‚ç‚¹ä¼šä¸ä¸€è‡´å‘¢ï¼Ÿ</p><p><code>el-dialog</code>æ·»åŠ äº†<code>append-to-body</code>å±æ€§åï¼Œå…¶çˆ¶èŠ‚ç‚¹å˜æˆäº†<code>body</code>ï¼Œæ‰€ä»¥ä»£ç æ‰§è¡Œåˆ°<code>insertï¼ŒparentNode(div.actionNodeValidate) !== body</code>ï¼Œæ¯”å¯¹åå‘ç°<code>parent</code>å‘ç”Ÿå˜æ›´ï¼Œä¸æ‰§è¡Œæ›´æ–°ã€‚å¯¼è‡´é¡µé¢ä¸Šå‘ˆç°çš„æ•ˆæœæ˜¯<code>dom</code>æ²¡æ¸²æŸ“ï¼Œè€Œå“åº”å¼æ•°æ®å·²ç»æ›´æ–°ã€‚<del>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆè°ƒè¯•æ—¶<code>nextTick</code>å†…æ‰§è¡Œ<code>forceUpdate</code>ä¹Ÿæ— æ³•é‡æ–°æ¸²æŸ“çš„æ ¹æœ¬åŸå› </del></p><p>æ‰¾åˆ°äº†åŸå› ï¼Œé‚£ä¹ˆè§£å†³æ–¹æ¡ˆè‡ªç„¶ä¹Ÿå°±æœ‰äº†ï¼ˆ<strong>é¿å…æ’å…¥çš„ä½ç½®ç›¸é‚»<code>vNode</code>çš„<code>parent</code>ä¸ä¼šå˜æ›´</strong>å°±<code>ok</code>å•¦ ğŸ˜ğŸ˜ğŸ˜ï¼‰</p><h3 id="hackè§£å†³æ–¹æ¡ˆ"><a href="#hackè§£å†³æ–¹æ¡ˆ" class="headerlink" title="hackè§£å†³æ–¹æ¡ˆ"></a><code>hack</code>è§£å†³æ–¹æ¡ˆ</h3><h4 id="ç»™ç»‘å®šäº†v-forçš„å…ƒç´ æ·»åŠ ä¸€å±‚çˆ¶çº§çš„wrapperèŠ‚ç‚¹"><a href="#ç»™ç»‘å®šäº†v-forçš„å…ƒç´ æ·»åŠ ä¸€å±‚çˆ¶çº§çš„wrapperèŠ‚ç‚¹" class="headerlink" title="ç»™ç»‘å®šäº†v-forçš„å…ƒç´ æ·»åŠ ä¸€å±‚çˆ¶çº§çš„wrapperèŠ‚ç‚¹"></a>ç»™ç»‘å®šäº†<code>v-for</code>çš„å…ƒç´ æ·»åŠ ä¸€å±‚çˆ¶çº§çš„<code>wrapper</code>èŠ‚ç‚¹</h4><p><code>eg.</code></p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>actionNodeValidate<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(item, idx) in checkConditions<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> ... <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-dialog</span> <span class="token attr-name">append-to-body</span> <span class="token attr-name">:visible.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>visible<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> ... <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-dialog</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></code></pre><h4 id="è°ƒæ•´ç»‘å®šäº†append-to-bodyå±æ€§çš„domä½ç½®ï¼Œé¿å…ä¸v-forå…ƒç´ ç›´æ¥ç›¸é‚»"><a href="#è°ƒæ•´ç»‘å®šäº†append-to-bodyå±æ€§çš„domä½ç½®ï¼Œé¿å…ä¸v-forå…ƒç´ ç›´æ¥ç›¸é‚»" class="headerlink" title="è°ƒæ•´ç»‘å®šäº†append-to-bodyå±æ€§çš„domä½ç½®ï¼Œé¿å…ä¸v-forå…ƒç´ ç›´æ¥ç›¸é‚»"></a>è°ƒæ•´ç»‘å®šäº†<code>append-to-body</code>å±æ€§çš„<code>dom</code>ä½ç½®ï¼Œé¿å…ä¸<code>v-for</code>å…ƒç´ ç›´æ¥ç›¸é‚»</h4><p><code>eg.</code></p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>actionNodeValidate<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(item, idx) in checkConditions<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> ... <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-dialog</span> <span class="token attr-name">append-to-body</span> <span class="token attr-name">:visible.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>visible<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> ... <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-dialog</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></code></pre><h4 id="ç§»é™¤append-to-bodyå±æ€§"><a href="#ç§»é™¤append-to-bodyå±æ€§" class="headerlink" title="ç§»é™¤append-to-bodyå±æ€§"></a>ç§»é™¤<code>append-to-body</code>å±æ€§</h4><p><code>eg.</code></p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>actionNodeValidate<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(item, idx) in checkConditions<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> ... <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-dialog</span> <span class="token attr-name">:visible.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>visible<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> ... <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-dialog</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> è¸©å‘è®°å½• </category>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bug </tag>
            
            <tag> vue </tag>
            
            <tag> unresponsive </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç•Œé¢åŒ–é…ç½®è‡ªå®šä¹‰çš„ç»„ä»¶ Css æ ·å¼</title>
      <link href="/share/css-tree/"/>
      <url>/share/css-tree/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="äº†è§£css-tree"><a href="#äº†è§£css-tree" class="headerlink" title="äº†è§£css-tree"></a>äº†è§£<a href="https://github.com/csstree/csstree">css-tree</a></h3><p><code>CSSTree is a tool set for CSS: fast detailed parser (CSS â†’ AST), walker (AST traversal), generator (AST â†’ CSS) and lexer (validation and matching) based on specs and browser implementations. The main goal is to be efficient and W3C spec compliant, with focus on CSS analyzing and source-to-source transforming tasks.</code></p><h3 id="ä¸ºä»€ä¹ˆä½¿ç”¨å®ƒï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨å®ƒï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨å®ƒï¼Ÿ"></a>ä¸ºä»€ä¹ˆä½¿ç”¨å®ƒï¼Ÿ</h3><p>æœ€è¿‘é¡¹ç›®ä¸Šæœ‰ä¸ªéœ€æ±‚ï¼šæä¾›ä¸€ä¸ªç•Œé¢åŒ–çš„<code>css</code>ä»£ç ç¼–è¾‘å™¨ï¼Œç®¡ç†å‘˜å¯ä»¥è¾“å…¥<code>css</code>ä»£ç é…ç½®ä¿®æ”¹è¡¨å•&#x2F;ç»„ä»¶çš„ä¸€äº›é»˜è®¤æ ·å¼ï¼Œä»è€Œé’ˆå¯¹ä¸åŒä¸šåŠ¡éœ€æ±‚å®ç°ä¸åŒçš„ç•Œé¢å‘ˆç°æ•ˆæœã€‚</p><p>ä¸ºäº†é¿å…æ ·å¼çš„å…¨å±€æ±¡æŸ“ï¼Œéœ€è¦å¯¹é…ç½®çš„æ ·å¼æ·»åŠ é»˜è®¤å‰ç½®å¯¼èˆªï¼Œé€šè¿‡å±æ€§é€‰æ‹©å™¨çº¦æŸæ ·å¼çš„ç”Ÿæ•ˆèŒƒå›´ã€‚å¦‚æœé€šè¿‡<code>string</code>çš„ä¸€äº›æ–¹æ³•ç²—æš´çš„å¯¹æ ·å¼è¿›è¡Œæ›¿æ¢<code>or</code>æ­£åˆ™åŒ¹é…ï¼Œæœ‰å¾ˆå¤§çš„å±€é™æ€§ï¼ŒåŒæ—¶ä¹Ÿä¸ç¬¦åˆè§„èŒƒã€‚</p><p>æ€è€ƒå†ä¸‰ï¼Œæ‰¾åˆ°äº†<code>css -&gt; ast -&gt; css.</code>æ–¹æ¡ˆï¼Œå¹¶é€šè¿‡<code>css-tree</code>çš„<code>API</code>å®ç°ã€‚</p><p><del>æ ¹æ®äº§å“ä¸šåŠ¡çš„åŒºåˆ«ï¼Œå¦‚æœåªæ˜¯æƒ³å®ç°æ ·å¼è‡ªå®šä¹‰ï¼Œä¸éœ€è¦é€šè¿‡ä»£ç é…ç½®è¾¾åˆ°æ›´å¼ºçš„äº¤äº’ï¼Œé‚£ä¹ˆå¯ä»¥å†…ç½®<code>class</code>ï¼Œç¼–å†™é»˜è®¤çš„ä¸€äº›<code>style</code>ï¼Œç”¨æˆ·é€šè¿‡åœ¨ç•Œé¢é€‰æ‹©ä¸»é¢˜æ¥å®ç°è¯¥æ•ˆæœã€‚å‚è€ƒç™¾åº¦<a href="https://github.com/baidu/amis">amis</a></del></p><span id="more"></span><h3 id="æºç å®ç°"><a href="#æºç å®ç°" class="headerlink" title="æºç å®ç°"></a>æºç å®ç°</h3><h4 id="ç»™ç»„ä»¶å”¯ä¸€æ ‡è¯†"><a href="#ç»™ç»„ä»¶å”¯ä¸€æ ‡è¯†" class="headerlink" title="ç»™ç»„ä»¶å”¯ä¸€æ ‡è¯†"></a>ç»™ç»„ä»¶å”¯ä¸€æ ‡è¯†</h4><blockquote><p>å¯ä»¥ç»™ç»„ä»¶çš„<code>wrapper-dom</code>æ·»åŠ å…·æœ‰å”¯ä¸€æ ‡å¿—æ€§çš„å±æ€§ï¼Œç”¨äºçº¦æŸè‡ªå®šä¹‰æ ·å¼ç”Ÿæ•ˆçš„åŒºé—´èŒƒå›´.</p></blockquote><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!-- ç»™ç»„ä»¶ wrapper ç»‘å®šå…·æœ‰å”¯ä¸€æ ‡è¯†çš„ id --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-item_container<span class="token punctuation">"</span></span> <span class="token attr-name">:id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>field.__vModel__<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RenderWrapper</span> <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$attrs<span class="token punctuation">"</span></span> <span class="token attr-name">v-on</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$listeners<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></code></pre><h4 id="helperå®ç°"><a href="#helperå®ç°" class="headerlink" title="helperå®ç°"></a><code>helper</code>å®ç°</h4><blockquote><p>ç¼–å†™ç”¨äºæ“ä½œ<code>css-code</code>çš„å·¥å…·å‡½æ•°ï¼Œç»™è‡ªå®šä¹‰çš„<code>css-code</code>æ·»åŠ å†…ç½®çš„å±æ€§é€‰æ‹©å™¨å‰ç¼€ã€‚</p></blockquote><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> clone<span class="token punctuation">,</span> generate<span class="token punctuation">,</span> parse<span class="token punctuation">,</span> walk <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'css-tree'</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">const</span> styleHelper <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token function">addClassPrefix</span><span class="token punctuation">(</span>prefix<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> context<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> orig <span class="token operator">=</span> <span class="token function">parse</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// css -> ast</span>    <span class="token keyword">const</span> ast <span class="token operator">=</span> <span class="token function">clone</span><span class="token punctuation">(</span>orig<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// clone ast node.</span>    <span class="token function">walk</span><span class="token punctuation">(</span>ast<span class="token punctuation">,</span> <span class="token punctuation">(</span>node<span class="token punctuation">,</span> item<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token comment">// ä»…å¯¹é€‰æ‹©å™¨çš„é¦–ä¸ª selector èŠ‚ç‚¹æ·»åŠ å‰ç¼€  eg.  .form .item &#123;&#125; -> .prefix .form .item &#123;&#125;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>item<span class="token operator">?.</span>prev<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'TypeSelector'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          <span class="token comment">// eg. input div li...</span>          node<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>prefix<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>node<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'ClassSelector'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          <span class="token comment">// eg. .el-input .customCls...</span>          node<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>prefix<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> .</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>node<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// other process...</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">generate</span><span class="token punctuation">(</span>ast<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ast -> css</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token function">loadCss</span><span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> cssContent<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> styleEle <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">style_</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>id<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>    styleEle<span class="token operator">?.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// çƒ­æ›´æ–°ï¼Œé¿å…é‡å¤æ€§è¿½åŠ  style èŠ‚ç‚¹.</span>    <span class="token comment">// or if (styleEle) return;</span>    <span class="token keyword">const</span> style <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> head <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'head'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    style<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">style_</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>id<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>    <span class="token keyword">const</span> styleCode <span class="token operator">=</span> styleHelper<span class="token punctuation">.</span><span class="token function">addClassPrefix</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">form-item_container[id=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>id<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">]</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> cssContent<span class="token punctuation">)</span><span class="token punctuation">;</span>    style<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>styleCode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>style<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><h4 id="config-editorå®ç°"><a href="#config-editorå®ç°" class="headerlink" title="config-editorå®ç°"></a><code>config-editor</code>å®ç°</h4><blockquote><p>ç”¨äºé…ç½®<code>css</code>çš„ç¼–è¾‘å™¨ç»„ä»¶.<del>å·äº†ä¸ªæ‡’ï¼Œå¦‚æœä½ éœ€è¦æ›´å‹å¥½çš„å®ç°ï¼Œå¯ä»¥æ·»åŠ <code>css</code>è¯­æ³•æç¤º</del></p></blockquote><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-dialog</span>    <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>è‡ªå®šä¹‰æ ·å¼<span class="token punctuation">"</span></span>    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>codemirror_dialog<span class="token punctuation">"</span></span>    <span class="token attr-name">:destroy-on-close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>    <span class="token attr-name">:close-on-click-modal</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span>    <span class="token attr-name">:visible.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>customStyleVisible<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>VueCodemirror</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>innerValue<span class="token punctuation">"</span></span> <span class="token attr-name">:options</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>options<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>footer</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>customStyleVisible = false<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å– æ¶ˆ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onConfirmHandle<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç¡® å®š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-dialog</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">  <span class="token keyword">import</span> <span class="token punctuation">&#123;</span> Component<span class="token punctuation">,</span> ModelSync<span class="token punctuation">,</span> PropSync<span class="token punctuation">,</span> Vue<span class="token punctuation">,</span> Watch <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue-property-decorator'</span><span class="token punctuation">;</span>  @<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'StyleConfig'</span><span class="token punctuation">,</span>    <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token function-variable function">VueCodemirror</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>        <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> codemirror <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: "codeMirror" */</span> <span class="token string">'vue-codemirror'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> codemirror<span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">StyleConfig</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">&#123;</span>    @<span class="token function">PropSync</span><span class="token punctuation">(</span><span class="token string">'visible'</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> customStyleVisible<span class="token operator">!</span><span class="token operator">:</span> boolean<span class="token punctuation">;</span>    @<span class="token function">ModelSync</span><span class="token punctuation">(</span><span class="token string">'value'</span><span class="token punctuation">,</span> <span class="token string">'input'</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> customStyle<span class="token operator">!</span><span class="token operator">:</span> string<span class="token punctuation">;</span>    <span class="token keyword">public</span> innerValue <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> options <span class="token operator">=</span> <span class="token punctuation">&#123;</span>      <span class="token literal-property property">tabSize</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>      <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'text/css'</span><span class="token punctuation">,</span>      <span class="token literal-property property">theme</span><span class="token operator">:</span> <span class="token string">'default'</span><span class="token punctuation">,</span>      <span class="token literal-property property">styleActiveLine</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>      <span class="token literal-property property">matchBrackets</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>      <span class="token literal-property property">placeholder</span><span class="token operator">:</span>        <span class="token string">'è¯·è¾“å…¥ç»„ä»¶è‡ªå®šä¹‰cssæ ·å¼... eg.\n\n.el-input &#123; color: #f00; &#125; \n\n input &#123; border: none; &#125;'</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    @<span class="token function">Watch</span><span class="token punctuation">(</span><span class="token string">'value'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">immediate</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token function">setContentValue</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">v</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>innerValue <span class="token operator">=</span> v<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initCodemirror</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">initCodemirror</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: "codeMirror" */</span> <span class="token string">'codemirror/mode/css/css.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: "codeMirror" */</span> <span class="token string">'codemirror/addon/display/placeholder.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span>        <span class="token comment">/* webpackChunkName: "codeMirror" */</span> <span class="token string">'codemirror/addon/selection/active-line.js'</span>      <span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: "codeMirror" */</span> <span class="token string">'codemirror/addon/edit/matchbrackets.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: "codeMirror" */</span> <span class="token string">'codemirror/lib/codemirror.css'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token function">onConfirmHandle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>customStyleVisible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>customStyle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>innerValue<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><h4 id="parserå®ç°"><a href="#parserå®ç°" class="headerlink" title="parserå®ç°"></a><code>parser</code>å®ç°</h4><blockquote><p>åœ¨è¡¨å•<code>parser</code>ç»„ä»¶<code>created</code>é’©å­<code>loadCss</code>ï¼Œå°†è‡ªå®šä¹‰çš„æ ·å¼ä»£ç åŠ è½½åˆ°<code>html</code>.</p></blockquote><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> styleHelper <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'./util/index'</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> code<span class="token punctuation">,</span> css <span class="token punctuation">&#125;</span> <span class="token operator">=</span> field<span class="token punctuation">.</span>__config__<span class="token punctuation">;</span>  styleHelper<span class="token punctuation">.</span><span class="token function">loadCss</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> css<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> åŠŸèƒ½å®ç° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cssTree </tag>
            
            <tag> è‡ªå®šä¹‰æ ·å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäº Lerna ç®¡ç† Monorepo çš„ä¸€æ¬¡å®è·µè®°å½•</title>
      <link href="/engineering/lerna/"/>
      <url>/engineering/lerna/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="lernaæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#lernaæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="lernaæ˜¯ä»€ä¹ˆï¼Ÿ"></a><code>lerna</code>æ˜¯ä»€ä¹ˆï¼Ÿ</h3><blockquote><p>Lerna is a fast modern build system for managing and publishing multiple JavaScript&#x2F;TypeScript packages from the same repository.</p></blockquote><p><a href="https://blog.nrwl.io/nx/home"><code>lerna and nx</code>çš„å…¶ä»–åšå®¢æ–‡ç« </a></p><h3 id="ä¸ºä»€ä¹ˆè¦ç”¨lerna"><a href="#ä¸ºä»€ä¹ˆè¦ç”¨lerna" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ç”¨lerna?"></a>ä¸ºä»€ä¹ˆè¦ç”¨<code>lerna</code>?</h3><p><code>å®˜æ–¹è§£é‡Šï¼š</code></p><blockquote><p>Lerna åœ¨ repo ä¸­é“¾æ¥ä¸åŒçš„é¡¹ç›®ï¼Œå› æ­¤å®ƒä»¬å¯ä»¥ç›¸äº’å¯¼å…¥ï¼Œè€Œæ— éœ€å‘ NPM å‘å¸ƒä»»ä½•å†…å®¹</p></blockquote><blockquote><p>Lerna å¯¹ä»»æ„æ•°é‡çš„é¡¹ç›®è¿è¡Œå‘½ä»¤ï¼Œå®ƒä»¥æœ€æœ‰æ•ˆçš„æ–¹å¼ã€ä»¥æ­£ç¡®çš„é¡ºåºæ‰§è¡Œå®ƒï¼Œå¹¶ä¸”å¯ä»¥å°†å…¶åˆ†å¸ƒåœ¨å¤šå°æœºå™¨ä¸Š</p></blockquote><blockquote><p>Lerna ç®¡ç†æ‚¨çš„å‘å¸ƒæµç¨‹ï¼Œä»ç‰ˆæœ¬ç®¡ç†åˆ°å‘å¸ƒå†åˆ° NPMï¼Œå®ƒæä¾›äº†å¤šç§é€‰é¡¹æ¥ç¡®ä¿å¯ä»¥é€‚åº”ä»»ä½•å·¥ä½œæµç¨‹</p></blockquote><p>ç»“åˆå·¥ä½œä¸­çš„å®é™…ä½“éªŒï¼Œè°ˆè°ˆæˆ‘çš„çœ‹æ³•ï¼š</p><blockquote><p>å…¬å¸ä¸€èˆ¬éƒ½æœ‰è‡ªå·±çš„ npm ç§åº“ï¼Œæœ‰å¾ˆå¤šçš„ package ç›¸äº’ä¹‹é—´å­˜åœ¨æˆ–å¤šæˆ–å°‘çš„å…³è”ã€‚éšç€ä¸šåŠ¡éœ€æ±‚çš„ä¸æ–­å‡çº§ï¼Œæˆ‘åœ¨ç»´æŠ¤è¿™äº› package çš„æ—¶å€™å°±ç¢°åˆ°äº†ä¸€ä¸ªå¾ˆæ“è›‹çš„é—®é¢˜ï¼šæ¯”å¦‚æˆ‘æ”¹äº† packageA ç„¶åå‘å¸ƒï¼Œé‚£ä¹ˆæ‰€æœ‰ç”¨åˆ°äº† packageA çš„å…¶ä»– packageï¼Œä¹Ÿè¦è·Ÿç€å‡çº§ packageA çš„ä¾èµ–ï¼Œç„¶åå†å‘å¸ƒï¼Œè¿‡ç¨‹æ˜¾å¾—å¾ˆæ˜¯ç¹çï¼Œæ­¤æ—¶å¦‚æœä½ çš„ package æ˜¯é€šè¿‡ lerna ç®¡ç†ï¼Œå°±å¯ä»¥å¾ˆå¥½çš„é¿å…è¿™ä¸ªé—®é¢˜ã€‚</p></blockquote><span id="more"></span><hr><h3 id="å…¨å±€å®‰è£…lerna"><a href="#å…¨å±€å®‰è£…lerna" class="headerlink" title="å…¨å±€å®‰è£…lerna"></a>å…¨å±€å®‰è£…<code>lerna</code></h3><p><code>tips: æ³¨æ„ lerna@5.1.0 å‰ååŒºåˆ«.</code></p><blockquote><p>npm i -g <a href="mailto:&#108;&#x65;&#114;&#110;&#x61;&#64;&#x34;&#x2e;&#x30;&#x2e;&#x30;">&#108;&#x65;&#114;&#110;&#x61;&#64;&#x34;&#x2e;&#x30;&#x2e;&#x30;</a></p></blockquote><h3 id="lernaä½¿ç”¨å®è·µ"><a href="#lernaä½¿ç”¨å®è·µ" class="headerlink" title="lernaä½¿ç”¨å®è·µ"></a><code>lerna</code>ä½¿ç”¨å®è·µ</h3><h4 id="åˆå§‹åŒ–gitä»“åº“"><a href="#åˆå§‹åŒ–gitä»“åº“" class="headerlink" title="åˆå§‹åŒ–gitä»“åº“"></a>åˆå§‹åŒ–<code>git</code>ä»“åº“</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åˆå§‹åŒ–ä¸€ä¸ª utils çš„ lerna é¡¹ç›®</span><span class="token function">mkdir</span> utils <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> utils<span class="token function">git</span> init<span class="token function">git</span> remote <span class="token function">add</span> origin <span class="token punctuation">[</span>xxx<span class="token punctuation">]</span></code></pre><p>é…ç½®<code>.gitignore</code></p><pre class="language-none"><code class="language-none">node_moduleslibdistlogscoverage*&#x2F;.config&#x2F;*</code></pre><h4 id="lernaåˆå§‹åŒ–"><a href="#lernaåˆå§‹åŒ–" class="headerlink" title="lernaåˆå§‹åŒ–"></a><code>lerna</code>åˆå§‹åŒ–</h4><p><code>lerna</code>æœ‰ä¸¤ç§å‘å¸ƒæ¨¡å¼ï¼Œå›ºå®šæ¨¡å¼<code>fixed</code>ï¼ˆé»˜è®¤ï¼‰ã€ç‹¬ç«‹æ¨¡å¼<code>independent</code>ã€‚ä¸¤è€…çš„åŒºåˆ«ï¼š</p><blockquote><p>å›ºå®šæ¨¡å¼ï¼šlerna init é€šè¿‡ lerna.json é‡Œçš„ç‰ˆæœ¬è¿›è¡Œç»Ÿä¸€çš„ç‰ˆæœ¬ç®¡ç†ã€‚å…¶ä¸­çš„ä»»ä½•ä¸€ä¸ªåŒ…çš„æ”¹åŠ¨éƒ½ä¼šå¯¼è‡´æ‰€æœ‰çš„ packages çš„ç‰ˆæœ¬å·è¿›è¡Œå‡çº§ã€‚</p></blockquote><blockquote><p>ç‹¬ç«‹æ¨¡å¼ï¼šlerna init --independent å…è®¸ä½¿ç”¨è€…å¯¹æ¯ä¸ªåŒ…å•ç‹¬æ”¹å˜ç‰ˆæœ¬å·ã€‚æ¯æ¬¡å‘å¸ƒçš„æ—¶å€™ï¼Œé’ˆå¯¹æ‰€æœ‰æœ‰æ›´æ–°çš„ package è¯¢é—®éœ€è¦å‡çº§çš„ç‰ˆæœ¬å·ã€‚ï¼ˆåŸºäºè‡ªèº«çš„ package.json ç‰ˆæœ¬å·ï¼‰è¿™ç§æƒ…å†µä¸‹ï¼Œlerna.json çš„ç‰ˆæœ¬å·ä¸ä¼šå˜åŒ–ï¼Œ é»˜è®¤ä¸º independent</p></blockquote><p><del>å»ºè®®ä½¿ç”¨ç‹¬ç«‹æ¨¡å¼â€¦</del> ä¸‹é¢å¼€å§‹åˆå§‹åŒ–è¿‡ç¨‹ï¼ˆé™„æ•ˆæœå›¾ï¼‰ï¼š</p><blockquote><p>lerna init --independent</p></blockquote><p><a href="/images/engineering/lerna/p1.png"><img src="/images/engineering/lerna/p1.png" alt="lerna-p1" loading="lazy"></a></p><h4 id="å®Œå–„lerna-jsoné…ç½®"><a href="#å®Œå–„lerna-jsoné…ç½®" class="headerlink" title="å®Œå–„lerna.jsoné…ç½®"></a>å®Œå–„<code>lerna.json</code>é…ç½®</h4><p>æŒ‡å®šå‘½ä»¤ä½¿ç”¨çš„<code>client</code>ï¼Œé»˜è®¤æ˜¯<code>npm</code>ï¼Œå¯ä»¥æ˜¯<code>yarn</code>.ä¿®æ”¹<code>lerna.json</code>ï¼Œæ·»åŠ ï¼š</p><blockquote><p>â€œnpmClientâ€: â€œyarnâ€</p></blockquote><p>æŒ‡å®šä½¿ç”¨<code>yarn workspaces</code>æ¨¡å¼ï¼Œå¹¶åœ¨<code>lerna</code>ä¸­å¼€å¯ï¼ŒåŒæ—¶åœ¨æ ¹ç›®å½•ä¸‹çš„<code>package.json</code>ä¸­æ·»åŠ <code>workspaces</code>ï¼šï¼ˆå¼€å¯å<code>lerna bootstrap</code>å‘½ä»¤ç”±<code>yarn install</code>ä»£ç†ï¼Œç­‰ä»·äºåœ¨<code>workspace</code>çš„æ ¹ç›®å½•ä¸‹æ‰§è¡Œ<code>yarn install</code>ï¼Œåªæœ‰é¡¶å±‚æœ‰ä¸€ä¸ª<code>node_modules</code>ï¼‰ï¼Œ<strong>è¿™ä¹ˆåšæ˜¯å› ä¸º yarn æœ¬èº«æä¾›äº†è¾ƒ lerna æ›´å¥½çš„ä¾èµ–åˆ†æä¸ hoisting çš„åŠŸèƒ½</strong>ï¼š</p><blockquote><p>â€œuseWorkspacesâ€: true</p></blockquote><blockquote><p>â€œworkspacesâ€: [â€œpackages&#x2F;*â€œ]</p></blockquote><p>æŒ‡å®šå¿½ç•¥å‘å¸ƒçš„ä¸å¿…è¦çš„æ›´æ–°ï¼ˆæ¯”å¦‚<code>readme.md</code>ï¼‰ï¼š</p><pre class="language-json" data-language="json"><code class="language-json"><span class="token comment">// æ–¹å¼ä¸€ï¼šåœ¨`lerna.json`ä¸­æ·»åŠ ï¼š</span><span class="token property">"ignoreChanges"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"**/*.md"</span><span class="token punctuation">,</span> <span class="token string">"**/*.test.ts"</span><span class="token punctuation">,</span> <span class="token string">"**/*.e2e.ts"</span><span class="token punctuation">,</span> <span class="token string">"**/fixtures/**"</span><span class="token punctuation">,</span> <span class="token string">"**/test/**"</span><span class="token punctuation">,</span> <span class="token string">"**/__test__/**"</span><span class="token punctuation">]</span><span class="token comment">// æ–¹å¼äºŒï¼šåœ¨æŒ‡å®šçš„å‘½ä»¤ä¸‹æ·»åŠ ï¼š</span><span class="token property">"command"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>  <span class="token property">"publish"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"ignoreChanges"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"ignored-file"</span><span class="token punctuation">,</span> <span class="token string">"*.md"</span><span class="token punctuation">]</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token property">"bootstrap"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"ignore"</span><span class="token operator">:</span> <span class="token string">"component-*"</span><span class="token punctuation">,</span>    <span class="token property">"npmClientArgs"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"--no-package-lock"</span><span class="token punctuation">]</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h5 id="lerna-jsonçš„é…ç½®å‚æ•°è¯´æ˜"><a href="#lerna-jsonçš„é…ç½®å‚æ•°è¯´æ˜" class="headerlink" title="lerna.jsonçš„é…ç½®å‚æ•°è¯´æ˜"></a><code>lerna.json</code>çš„é…ç½®å‚æ•°è¯´æ˜</h5><pre class="language-json" data-language="json"><code class="language-json"><span class="token comment">// versionï¼šå½“å‰åº“çš„ç‰ˆæœ¬</span><span class="token comment">// npmClientï¼šå…è®¸æŒ‡å®šå‘½ä»¤ä½¿ç”¨çš„clientï¼Œ é»˜è®¤æ˜¯ npmï¼Œ å¯ä»¥è®¾ç½®æˆ yarn</span><span class="token comment">// useWorkspacesï¼šä½¿ç”¨ yarn workspaces æ¨¡å¼</span><span class="token comment">// ignoreChangesï¼šä¸€ä¸ªä¸åŒ…å«åœ¨ lerna changed/publish çš„ glob æ•°ç»„ã€‚ä½¿ç”¨è¿™ä¸ªå»é˜»æ­¢å‘å¸ƒä¸å¿…è¦çš„æ›´æ–°ï¼Œæ¯”å¦‚ä¿®å¤ README.md</span><span class="token comment">// command.publish.ignoreChangesï¼šå¯ä»¥æŒ‡å®šé‚£äº›ç›®å½•æˆ–è€…æ–‡ä»¶çš„å˜æ›´ä¸ä¼šè¢« publish</span><span class="token comment">// command.publish.registryï¼šè®¾ç½®è‡ªå®šä¹‰çš„ npm ä»£ç†ï¼ˆæ¯”å¦‚ä½¿ç”¨å…¬å¸è‡ªå·±æ­å»ºçš„ç§æœï¼‰</span><span class="token comment">// command.publish.conventionalCommitsï¼šlerna version ä¼šè‡ªåŠ¨å†³å®š version bump å’Œç”Ÿæˆ CHANGELOG æ–‡ä»¶</span><span class="token comment">// command.publish.messageï¼šä¸€ä¸ª publish æ—¶çš„è‡ªå®šä¹‰ commit ä¿¡æ¯</span><span class="token comment">// command.bootstrap.ignoreï¼šæŒ‡å®šä¸å— bootstrap å‘½ä»¤å½±å“çš„åŒ…</span><span class="token comment">// command.bootstrap.npmClientArgsï¼šæŒ‡å®šé»˜è®¤ä¼ ç»™ lerna bootstrap å‘½ä»¤çš„å‚æ•°</span><span class="token comment">// command.bootstrap.scopeï¼šæŒ‡å®šé‚£äº›åŒ…ä¼šå— lerna bootstrap å‘½ä»¤å½±å“</span><span class="token comment">// packagesï¼šæŒ‡å®šåŒ…æ‰€åœ¨çš„ç›®å½•</span></code></pre><p><del><code>ok</code>ï¼Œå‡†å¤‡å·¥ä½œåšå®Œäº† ğŸ˜ƒğŸ˜ƒğŸ˜ƒ</del></p><hr><h4 id="åˆ›å»ºpackage"><a href="#åˆ›å»ºpackage" class="headerlink" title="åˆ›å»ºpackage"></a>åˆ›å»º<code>package</code></h4><p>è¿™ä¸ªè¿‡ç¨‹å¯ä»¥é€šè¿‡æ‰‹åŠ¨åˆ›å»ºï¼Œä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤ç”Ÿæˆï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> ./packages<span class="token function">mkdir</span> package-a package-b package-c<span class="token comment"># åˆ†åˆ«è¿›å…¥è¿™ä¸‰ä¸ªç›®å½•åˆå§‹åŒ–æˆåŒ… ...</span><span class="token builtin class-name">cd</span> package-a <span class="token operator">&amp;&amp;</span> <span class="token function">npm</span> init -y</code></pre><p><code>or</code>ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># nameï¼šåŒ…åï¼Œloc ä½ç½® [å¯é€‰ï¼Œä¸æŒ‡å®šæ—¶é»˜è®¤å°±æ˜¯ workspaces[0] æ‰€æŒ‡ä½ç½®]</span>lerna create <span class="token operator">&lt;</span> name <span class="token operator">></span> <span class="token punctuation">[</span>loc<span class="token punctuation">]</span><span class="token comment"># ä¾‹å¦‚ï¼š</span>lerna create package-a</code></pre><p>ç›®å½•ç»“æ„ï¼š</p><pre class="language-none"><code class="language-none">â”œâ”€â”€ lerna.jsonâ”œâ”€â”€ package.jsonâ””â”€â”€ packages    â”œâ”€â”€ packageA    â”‚Â Â  â”œâ”€â”€ index.js    â”‚Â Â  â””â”€â”€ package.json</code></pre><h4 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h4><h5 id="å®‰è£…å…±ç”¨çš„dependencicesordevDependencices"><a href="#å®‰è£…å…±ç”¨çš„dependencicesordevDependencices" class="headerlink" title="å®‰è£…å…±ç”¨çš„dependencicesordevDependencices"></a>å®‰è£…å…±ç”¨çš„<code>dependencices</code>or<code>devDependencices</code></h5><p>è®¾ç½®<code>root</code>çš„ä¾èµ–ï¼Œé€šå¸¸ä¸ºä¸€äº›å¼€å‘å·¥å…·. <code>eg: typescriptã€eslintã€babel...</code></p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">yarn</span> <span class="token function">add</span> -W -D typescript <span class="token punctuation">[</span>-W -D <span class="token operator">==</span> --ignore-workspace-root-check --dev<span class="token punctuation">]</span><span class="token comment"># å¸è½½</span><span class="token function">yarn</span> remove -W typescript</code></pre><p>æ·»åŠ æ‰€æœ‰çš„<code>package</code>ä¾èµ–ï¼ˆä¸åŒ…å«<code>root</code>ï¼Œè€Œæ˜¯åœ¨å„è‡ªçš„<code>package.json</code>ï¼‰ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash">lerna <span class="token function">add</span> lodash -D</code></pre><h5 id="ç»™æŒ‡å®šçš„-packageA-å®‰è£…ä¾èµ–Aæ¨¡å—"><a href="#ç»™æŒ‡å®šçš„-packageA-å®‰è£…ä¾èµ–Aæ¨¡å—" class="headerlink" title="ç»™æŒ‡å®šçš„ packageA å®‰è£…ä¾èµ–Aæ¨¡å—"></a>ç»™æŒ‡å®šçš„ packageA å®‰è£…ä¾èµ–<code>A</code>æ¨¡å—</h5><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æ¨è</span>lerna <span class="token function">add</span> A packages/packageA<span class="token comment"># æˆ–è€…æŒ‡å®š --scope</span>lerna <span class="token function">add</span> A --scope<span class="token operator">=</span>packageAlerna <span class="token function">add</span> A --scope<span class="token operator">=</span>packageA --dev<span class="token comment"># æˆ–ï¼ˆè¿™ç§æ–¹å¼å®‰è£…çš„ A å¦‚æœæ˜¯å½“å‰å·¥ä½œåŒºçš„å¼€å‘æ¨¡å—ï¼Œéœ€è¦å¸¦ä¸Šç‰ˆæœ¬å·ï¼‰</span><span class="token function">yarn</span> workspace packageA <span class="token function">add</span> A<span class="token comment"># å®‰è£… A åˆ°æŒ‡å®šå‰ç¼€ä¸º prefix- çš„åŒ…</span>lerna <span class="token function">add</span> A packages/prefix-*<span class="token comment"># å®‰è£… A åˆ°æ‰€æœ‰åä¸º packageA åŒ…ä¸­</span>lerna <span class="token function">add</span> A **/packageA</code></pre><h5 id="workspaceå„packageä¹‹é—´çš„ä¾èµ–"><a href="#workspaceå„packageä¹‹é—´çš„ä¾èµ–" class="headerlink" title="workspaceå„packageä¹‹é—´çš„ä¾èµ–"></a><code>workspace</code>å„<code>package</code>ä¹‹é—´çš„ä¾èµ–</h5><p><code>packages</code>ä¸‹çš„å„ä¸ªåŒ…ä¹‹é—´ï¼Œä¹Ÿå¯ä»¥ç›¸äº’ä¾èµ–ï¼Œä¾‹å¦‚<code>moduleA</code>ä¾èµ–äº†<code>moduleB</code>ï¼Œè€Œ<code>moduleB</code>åˆä¾èµ–äº†<code>moduleC</code>ã€‚ä½¿ç”¨çš„æ–¹å¼åŒä¸Šï¼Œç›¸å·®ä¸å¤§ï¼ˆåŸºäºè½¯é“¾æ¥<code>symlink</code>å®ç°ï¼‰ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash">lerna <span class="token function">add</span> moduleB packages/moduleAlerna <span class="token function">add</span> moduleC --scope moduleB</code></pre><h4 id="lerna-bootstrapå®‰è£…æ‰€æœ‰åŒ…çš„ä¾èµ–"><a href="#lerna-bootstrapå®‰è£…æ‰€æœ‰åŒ…çš„ä¾èµ–" class="headerlink" title="lerna bootstrapå®‰è£…æ‰€æœ‰åŒ…çš„ä¾èµ–"></a><code>lerna bootstrap</code>å®‰è£…æ‰€æœ‰åŒ…çš„ä¾èµ–</h4><p>åœ¨<code>lerna</code>ä¸­ï¼Œæ‰§è¡Œ<strong>é»˜è®¤çš„<code>bootstrap</code>å‘½ä»¤</strong>ä¼šåœ¨æ¯ä¸ª<code>package</code>ä¸‹å®‰è£…å„è‡ª<code>package.json</code>ä¸­çš„ä¾èµ–ã€‚</p><p>å½“ä½ ä½¿ç”¨<code>yarn workspaceï¼Œå¹¶åœ¨lernaä¸­å¼€å¯è¯¥åŠŸèƒ½æ—¶</code>ï¼Œ<code>lerna bootstrap</code>å°†ç”±<code>yarn install</code>ä»£ç†ï¼Œç­‰ä»·ä½“ç°ä¸ºåœ¨<code>workspace</code>çš„æ ¹ç›®å½•ä¸‹æ‰§è¡Œ<code>yarn install</code>.</p><pre class="language-bash" data-language="bash"><code class="language-bash">lerna bootstrap<span class="token comment"># æ•ˆæœç­‰ä»·äº</span>lerna <span class="token function">link</span> + <span class="token function">yarn</span> <span class="token function">install</span></code></pre><h5 id="ä¼˜åŠ¿"><a href="#ä¼˜åŠ¿" class="headerlink" title="ä¼˜åŠ¿"></a>ä¼˜åŠ¿</h5><blockquote><p>å·¥ä½œåŒºçš„æ¨¡å—åŒ…ä¹‹é—´å¯ä»¥ç›¸äº’ä¾èµ–ï¼Œå¹¶åœ¨ä½ å‘å¸ƒå‡çº§å¯¹åº”åŒ…çš„æ—¶å€™ï¼Œè‡ªåŠ¨æ£€æµ‹å…¶ä»–ä¾èµ–è¯¥æ¨¡å—çš„åŒ…ã€‚</p></blockquote><blockquote><p>ç›¸æ¯” yarn linkï¼Œè¿™ç§æ–¹å¼åªå½±å“ä½ å·¥ä½œåŒºçš„ä¾èµ–æ ‘ï¼Œè€Œä¸ä¼šæ±¡æŸ“å…¨å±€ã€‚</p></blockquote><blockquote><p>node_modules ç»Ÿä¸€å®‰è£…ï¼Œç”Ÿæˆå•ä¸€ lock æ–‡ä»¶ï¼Œæ–¹ä¾¿ yarn æ›´å¥½çš„ç®¡ç†å¹¶æ„å»ºä¾èµ–ã€‚</p></blockquote><h4 id="å¸è½½ä¾èµ–"><a href="#å¸è½½ä¾èµ–" class="headerlink" title="å¸è½½ä¾èµ–"></a>å¸è½½ä¾èµ–</h4><blockquote><p>lerna exec â€“ <command> [..args] # åœ¨æ‰€æœ‰åŒ…ä¸­è¿è¡Œè¯¥å‘½ä»¤</p></blockquote><p>å¯ä»¥ä¾æ®è¿™ä¸ªå‘½ä»¤æ¥å®ç°æŒ‡å®šæ¨¡å—çš„åŒ…å¸è½½ï¼Œ<code>eg</code>ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash">lerna <span class="token builtin class-name">exec</span> --scope<span class="token operator">=</span>packageA  <span class="token function">yarn</span> remove A <span class="token comment"># å°† packageA åŒ…ä¸‹çš„ A å¸è½½</span>lerna <span class="token builtin class-name">exec</span> -- <span class="token function">yarn</span> remove A <span class="token comment"># å°†æ‰€æœ‰åŒ…ä¸‹çš„ A å¸è½½</span></code></pre><h4 id="æ¸…ç†ä¾èµ–åŒ…"><a href="#æ¸…ç†ä¾èµ–åŒ…" class="headerlink" title="æ¸…ç†ä¾èµ–åŒ…"></a>æ¸…ç†ä¾èµ–åŒ…</h4><p>å¿«é€Ÿåˆ é™¤æ‰€æœ‰æ¨¡å—ä¸­çš„<code>node_modules</code>æ–‡ä»¶å¤¹ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash">lerna clean</code></pre><p><a href="https://lerna.js.org/docs/features/bootstrap">æ›´å¤šçš„ <code>bootstrap</code>ç»†èŠ‚</a></p><h4 id="åˆ—å‡ºå·¥ä½œåŒºæ‰€æœ‰çš„package"><a href="#åˆ—å‡ºå·¥ä½œåŒºæ‰€æœ‰çš„package" class="headerlink" title="åˆ—å‡ºå·¥ä½œåŒºæ‰€æœ‰çš„package"></a>åˆ—å‡ºå·¥ä½œåŒºæ‰€æœ‰çš„<code>package</code></h4><p>å¦‚æœä¸ä½ æ–‡å¤¹é‡Œé¢çš„ä¸ç¬¦ï¼Œè¿›å…¥é‚£ä¸ªåŒ…è¿è¡Œ<code>yarn init -y</code>è§£å†³.</p><pre class="language-bash" data-language="bash"><code class="language-bash">lerna list<span class="token comment"># or</span>lerna <span class="token function">ls</span></code></pre><h4 id="åˆ—å‡ºéœ€è¦publishæ›´æ–°çš„åŒ…"><a href="#åˆ—å‡ºéœ€è¦publishæ›´æ–°çš„åŒ…" class="headerlink" title="åˆ—å‡ºéœ€è¦publishæ›´æ–°çš„åŒ…"></a>åˆ—å‡ºéœ€è¦<code>publish</code>æ›´æ–°çš„åŒ…</h4><pre class="language-bash" data-language="bash"><code class="language-bash">lerna changed</code></pre><blockquote><p>lerna æ¯æ¬¡å‘å¸ƒéƒ½ä¼šä¸ºå¯¹åº”çš„ç‰ˆæœ¬æ‰“ TAGï¼Œå˜åŠ¨æ£€æµ‹å…¶å®æ˜¯ä¾æ® <code>git diff --name-only vç‰ˆæœ¬</code>æ”¶é›†å˜åŠ¨ä¿¡æ¯.</p></blockquote><blockquote><p><code>lerna diff</code>æŸ¥çœ‹è‡ªä¸Šæ¬¡å‘å¸ƒä»¥æ¥çš„æ‰€æœ‰åŒ…æˆ–è€…æŒ‡å®šåŒ…çš„ git diff å˜åŒ–ã€‚</p></blockquote><h4 id="lerna-runæ‰§è¡Œè„šæœ¬"><a href="#lerna-runæ‰§è¡Œè„šæœ¬" class="headerlink" title="lerna runæ‰§è¡Œè„šæœ¬"></a><code>lerna run</code>æ‰§è¡Œè„šæœ¬</h4><p>é€šè¿‡<code>lerna run xx</code>æ‰§è¡Œè„šæœ¬æ—¶ï¼Œ<code>lerna</code>ä¼šå…ˆæ£€æµ‹ç¬¦åˆæ¡ä»¶ï¼ˆå«æœ‰<code>xx</code>å‘½ä»¤ï¼‰çš„<code>package</code>ï¼Œç„¶åå†å„è‡ªå†…éƒ¨æ‰§è¡Œ<code>npm run xx</code>.</p><pre class="language-bash" data-language="bash"><code class="language-bash">lerna run <span class="token builtin class-name">test</span><span class="token comment"># åŒºåˆ«äºæ™®é€šé¡¹ç›®ä¹‹å¤„åœ¨äºå„ä¸ªpackageä¹‹é—´å­˜åœ¨ç›¸äº’ä¾èµ–ï¼Œå¦‚packageBåªæœ‰åœ¨packageAæ„å»ºå®Œä¹‹åæ‰èƒ½è¿›è¡Œæ„å»ºï¼Œå¦åˆ™å°±ä¼šå‡ºé”™ï¼Œè¿™å®é™…ä¸Šè¦æ±‚æˆ‘ä»¬ä»¥ä¸€ç§æ‹“æ‰‘æ’åºçš„è§„åˆ™è¿›è¡Œæ„å»ºã€‚</span>lerna run --stream --sort build</code></pre><p>åŒºåˆ«äº<code>yarn workspaces run</code>ï¼š</p><blockquote><p>yarn workspaces run æ‰§è¡Œ xx æŒ‡ä»¤æ—¶ï¼Œå¿…é¡»æ‰€æœ‰çš„åŒ…éƒ½å«æœ‰è¯¥ xx å‘½ä»¤ï¼Œå¦åˆ™åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¼šæŠ›å‡ºå¼‚å¸¸.</p></blockquote><h4 id="å‘å¸ƒ"><a href="#å‘å¸ƒ" class="headerlink" title="å‘å¸ƒ"></a>å‘å¸ƒ</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æ‰§è¡Œè¯¥å‘½ä»¤åï¼Œä¼šæ ¹æ®æ£€æµ‹å‡ºçš„æœ‰å˜åŠ¨çš„ package æç¤ºä½ é€‰æ‹©å¯¹åº”è¦å‡çº§åˆ°çš„æ–°ç‰ˆæœ¬å·</span>lerna publish<span class="token comment"># æˆ–è€…é»˜è®¤é€‰é¡¹å…¨éƒ¨é€‰æ‹© Yesï¼Œå¹¶æ ¹æ® commit ä¿¡æ¯è‡ªåŠ¨å‡çº§ç‰ˆæœ¬å·</span>lerna publish -y</code></pre><h5 id="å»ºè®®"><a href="#å»ºè®®" class="headerlink" title="å»ºè®®"></a>å»ºè®®</h5><blockquote><p>ä¸è¦è‡ªå·±æ‰‹åŠ¨ä¸º<code>lerna</code>ç®¡ç†çš„ä»“åº“æ·»åŠ <code>tag</code>ï¼Œé˜²æ­¢ <code>package</code>å˜æ›´æ£€æµ‹å¼‚å¸¸ï¼Œå¯¼è‡´æ— æ³•æ­£å¸¸å‡çº§å‘å¸ƒ</p></blockquote><blockquote><p>å°½é‡åªåœ¨ä¸€ä¸ªåˆ†æ”¯ä¸Šå‘å¸ƒï¼Œé¿å…å¤šä¸ªåˆ†æ”¯åŒæ—¶è¿›è¡Œä¸”ç”Ÿæˆç›¸åŒç‰ˆæœ¬</p></blockquote><blockquote><p>æ¯æ¬¡<code>publish</code>ä¹‹å‰ï¼Œå…ˆ<code>commit</code>ä»£ç ï¼Œä¿è¯å·¥ä½œåŒºæ˜¯å¹²å‡€çš„</p></blockquote><blockquote><p>ç¡®ä¿ä½ çš„<code>npm</code>è´¦å·æ˜¯ç™»å½•çŠ¶æ€ï¼Œå¦åˆ™ä¼šå‘å¸ƒå¤±è´¥ã€‚<code>npm whoami</code>æŸ¥çœ‹çŠ¶æ€ï¼Œå¯ä»¥æŒ‡å®š<code>registry</code></p></blockquote><blockquote><p>ç¡®ä¿ä½ çš„<code>package</code>è®¾ç½®äº†æ­£ç¡®çš„<code>npm registry</code>åœ°å€ï¼Œä¸”å‘å¸ƒçš„åŒ…ä¸å·²å­˜åœ¨çš„åŒ…ä¹‹é—´ä¸ä¼šå­˜åœ¨å†²çª</p></blockquote><blockquote><p>æŒ‰é¡ºåºæ‰§è¡Œ<code>lerna bootstrap -&gt; lerna run --stream --sort buildï¼ˆæˆ‘åœ¨å•ä¸ª package ä¸­å®šä¹‰äº†ä¸€äº› npm scriptsï¼Œä¾‹å¦‚ prepublishOnly é’©å­æ¥æ‰§è¡Œ buildï¼Œç„¶è€Œ npm-client ä½¿ç”¨ yarn åï¼Œè¿™äº›é’©å­ä¼¼ä¹å¹¶æ²¡æœ‰æŒ‰é¢„æœŸè¿›è¡Œå·¥ä½œï¼Œå¯¼è‡´æœ€ç»ˆ publish å¤±è´¥ã€‚é€šè¿‡ lerna run build å¯ä»¥è§¦å‘æ‰€æœ‰ package æ‰§è¡Œ buildï¼Œå¦‚æœæ— æ­¤éœ€æ±‚å¯ä»¥è·³è¿‡è¯¥æ­¥éª¤ï¼‰-&gt; lerna publish.</code></p></blockquote><h3 id="é—®é¢˜è®°å½•"><a href="#é—®é¢˜è®°å½•" class="headerlink" title="é—®é¢˜è®°å½•"></a>é—®é¢˜è®°å½•</h3><h4 id="å…³äº-scopeçš„è¯´æ˜"><a href="#å…³äº-scopeçš„è¯´æ˜" class="headerlink" title="å…³äº--scopeçš„è¯´æ˜"></a>å…³äº<code>--scope</code>çš„è¯´æ˜</h4><blockquote><p>ä¸ç®¡æ˜¯å®‰è£…è¿˜æ˜¯å¸è½½ï¼Œ<code>--scope=packageA</code>ä¸­çš„<code>packageA</code>å‡æ˜¯æŒ‡çš„å…·ä½“åŒ…åï¼Œè€Œé<code>path</code>ï¼Œè€Œå¦å¤–ä¸€ç§æ–¹å¼<code>packages/packageA</code>åˆ™æ˜¯æŒ‡å…·ä½“è·¯å¾„.</p></blockquote><h4 id="åŒ…åå¸¦æœ‰scopeçš„å‘å¸ƒ"><a href="#åŒ…åå¸¦æœ‰scopeçš„å‘å¸ƒ" class="headerlink" title="åŒ…åå¸¦æœ‰scopeçš„å‘å¸ƒ?"></a>åŒ…åå¸¦æœ‰<code>scope</code>çš„å‘å¸ƒ?</h4><p>å½¢å¦‚<code>@xxx/xx</code>ï¼Œåœ¨ä½ çš„å­åŒ…ï¼ˆå…·ä½“è¦å‘å¸ƒçš„é‚£ä¸ªåŒ…ï¼‰çš„<code>package.json</code>ä¸­æ·»åŠ <code>publishConfig.access</code>å­—æ®µï¼š</p><pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>  <span class="token comment">// ...</span>  <span class="token property">"publishConfig"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// ...</span>    <span class="token property">"access"</span><span class="token operator">:</span> <span class="token string">"public"</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h5 id="ä¸ºä»€ä¹ˆ-å‰ç¼€åŒ…æ·»åŠ äº†accessä»ç„¶æŠ›å‡ºäº†403å¼‚å¸¸"><a href="#ä¸ºä»€ä¹ˆ-å‰ç¼€åŒ…æ·»åŠ äº†accessä»ç„¶æŠ›å‡ºäº†403å¼‚å¸¸" class="headerlink" title="ä¸ºä»€ä¹ˆ@å‰ç¼€åŒ…æ·»åŠ äº†accessä»ç„¶æŠ›å‡ºäº†403å¼‚å¸¸?"></a>ä¸ºä»€ä¹ˆ<code>@</code>å‰ç¼€åŒ…æ·»åŠ äº†<code>access</code>ä»ç„¶æŠ›å‡ºäº†<code>403</code>å¼‚å¸¸?</h5><p><code>@</code>ç¬¦å·åé¢çš„æ˜¯ä½ æ³¨å†Œ<code>npm</code>è´¦æˆ·æ—¶çš„<code>username</code>ï¼Œè¯·ç¡®ä¿è¯¥<code>scope</code>ä¸ä½ è´¦æˆ·ä¸€è‡´. <del>ï¼ˆå‰å¾€å®˜ç½‘æ³¨å†Œä½ çš„è´¦æˆ·ï¼Œå¯ä»¥çœ‹åˆ°æ›´åŠ æ˜ç¡®çš„é”™è¯¯æç¤ºï¼‰ğŸ˜‚ğŸ˜‚ğŸ˜‚</del></p><h4 id="å¦‚ä½•ç”ŸæˆchangeLog-mdæ–‡ä»¶"><a href="#å¦‚ä½•ç”ŸæˆchangeLog-mdæ–‡ä»¶" class="headerlink" title="å¦‚ä½•ç”ŸæˆchangeLog.mdæ–‡ä»¶?"></a>å¦‚ä½•ç”Ÿæˆ<code>changeLog.md</code>æ–‡ä»¶?</h4><p><code>lerna.json</code>ä¸­æ·»åŠ ï¼š</p><pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>  <span class="token comment">// ...</span>  <span class="token property">"command"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// ...</span>    <span class="token property">"publish"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token comment">// ...</span>      <span class="token property">"allowBranch"</span><span class="token operator">:</span> <span class="token string">"master"</span><span class="token punctuation">,</span> <span class="token comment">// åªåœ¨ master åˆ†æ”¯æ‰§è¡Œ publish</span>      <span class="token property">"conventionalCommits"</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// ç”Ÿæˆ changelog æ–‡ä»¶</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="å¦‚ä½•å°†é¢„å…ˆå­˜åœ¨çš„ç‹¬ç«‹åŒ…æ”¶é›†åˆ°lernaç®¡ç†çš„ä»“åº“ä¸­"><a href="#å¦‚ä½•å°†é¢„å…ˆå­˜åœ¨çš„ç‹¬ç«‹åŒ…æ”¶é›†åˆ°lernaç®¡ç†çš„ä»“åº“ä¸­" class="headerlink" title="å¦‚ä½•å°†é¢„å…ˆå­˜åœ¨çš„ç‹¬ç«‹åŒ…æ”¶é›†åˆ°lernaç®¡ç†çš„ä»“åº“ä¸­?"></a>å¦‚ä½•å°†é¢„å…ˆå­˜åœ¨çš„ç‹¬ç«‹åŒ…æ”¶é›†åˆ°<code>lerna</code>ç®¡ç†çš„ä»“åº“ä¸­?</h4><p>å°†å¸¦æœ‰æäº¤å†å²è®°å½•çš„åŒ…å¯¼å…¥ <code>packages/&lt;directory-name&gt;</code>. ä¿ç•™åŸå§‹æäº¤ä½œè€…ã€æ—¥æœŸå’Œæ¶ˆæ¯ã€‚å¦å¤–ï¼šå¦‚æœæ‚¨è¦åœ¨æ–°çš„ lerna å­˜å‚¨åº“ä¸Šå¯¼å…¥å¤–éƒ¨å­˜å‚¨åº“ï¼Œè¯·è®°ä½è‡³å°‘æœ‰ä¸€æ¬¡æäº¤ã€‚<a href="https://github.com/lerna/lerna/tree/main/commands/import#readme">-&gt; æˆ³è¿™é‡Œ</a></p><pre class="language-bash" data-language="bash"><code class="language-bash">lerna <span class="token function">import</span> <span class="token operator">&lt;</span>path-to-external-repository<span class="token operator">></span></code></pre><h4 id="å‘å¸ƒå¤±è´¥åæ€ä¹ˆé‡æ–°å‘å¸ƒ"><a href="#å‘å¸ƒå¤±è´¥åæ€ä¹ˆé‡æ–°å‘å¸ƒ" class="headerlink" title="å‘å¸ƒå¤±è´¥åæ€ä¹ˆé‡æ–°å‘å¸ƒ?"></a>å‘å¸ƒå¤±è´¥åæ€ä¹ˆé‡æ–°å‘å¸ƒ?</h4><p>è¿è¡Œ<code>lerna publish</code>å¦‚æœä¸­é€”æœ‰åŒ…å‘å¸ƒå¤±è´¥ï¼Œå†è¿è¡Œ<code>lerna publish</code>çš„æ—¶å€™ï¼Œå› ä¸º<code>Tag</code>å·²ç»æ‰“ä¸Šå»äº†ï¼Œæ‰€ä»¥ä¸ä¼šå†é‡æ–°å‘å¸ƒåŒ…åˆ°<code>NPM</code>.</p><p>å…ˆæ¸…ç©ºå½“å‰å·¥ä½œåŒºçš„æ–‡ä»¶ä¿®æ”¹ï¼ˆä¸»è¦æ˜¯ä¸Šä¸€æ¬¡å‘å¸ƒæ—¶ï¼Œæ¯ä¸ª<code>package</code>è‡ªèº«çš„<code>package.json</code>ä¼šä¿®æ”¹<code>gitHead</code>ï¼Œå‘å¸ƒæˆåŠŸä¼šè¢«é‡ç½®ï¼Œå¤±è´¥åæ— æ³•æ­£å¸¸é‡ç½®ï¼Œéœ€è¦æ‰‹åŠ¨æ”¾å¼ƒä¿®æ”¹ï¼‰ï¼Œç„¶åï¼š</p><blockquote><p>è¿è¡Œ <code>lerna publish from-git</code>ï¼Œä¼šæŠŠå½“å‰æ ‡ç­¾ä¸­æ¶‰åŠçš„<code>NPM</code>åŒ…å†å‘å¸ƒä¸€æ¬¡ï¼ŒPSï¼šä¸ä¼šå†æ›´æ–°<code>package.json</code>ï¼Œåªæ˜¯æ‰§è¡Œ<code>npm publish</code></p></blockquote><p><code>or</code>ï¼š</p><blockquote><p>è¿è¡Œ <code>lerna publish from-package</code>ï¼Œä¼šæŠŠå½“å‰æ‰€æœ‰æœ¬åœ°åŒ…ä¸­çš„<code>package.json</code>å’Œè¿œç«¯<code>NPM</code>æ¯”å¯¹ï¼Œå¦‚æœæ˜¯ NPM ä¸Šä¸å­˜åœ¨çš„åŒ…ç‰ˆæœ¬ï¼Œéƒ½æ‰§è¡Œä¸€æ¬¡<code>npm publish</code></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å·¥ç¨‹åŒ– </category>
          
          <category> æ¨¡å—åŒ–ç®¡ç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lerna </tag>
            
            <tag> monorepo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jest æµ‹è¯•æ¡†æ¶æ­å»ºå’Œç®€å•ä½¿ç”¨</title>
      <link href="/engineering/jest/"/>
      <url>/engineering/jest/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="äº†è§£æµ‹è¯•ç”¨ä¾‹å’Œå•å…ƒæµ‹è¯•"><a href="#äº†è§£æµ‹è¯•ç”¨ä¾‹å’Œå•å…ƒæµ‹è¯•" class="headerlink" title="äº†è§£æµ‹è¯•ç”¨ä¾‹å’Œå•å…ƒæµ‹è¯•"></a>äº†è§£æµ‹è¯•ç”¨ä¾‹å’Œå•å…ƒæµ‹è¯•</h3><ul><li><p>æµ‹è¯•ç”¨ä¾‹ï¼šæ˜¯ä¸ºæŸä¸ªç‰¹æ®Šç›®æ ‡è€Œç¼–åˆ¶çš„ä¸€ç»„æµ‹è¯•è¾“å…¥ã€æ‰§è¡Œæ¡ä»¶ä»¥åŠé¢„æœŸç»“æœï¼Œæµ‹è¯•æ˜¯å¦æ»¡è¶³ç‰¹å®šéœ€æ±‚ï¼›</p></li><li><p>å•å…ƒæµ‹è¯•ï¼š(æ˜¯æµ‹è¯•çš„çº§åˆ«)ã€‚unit testing é’ˆå¯¹æŸä¸€ä¸ªåŠŸèƒ½çš„[æœ€å°éƒ¨åˆ†(å•å…ƒ)]æµ‹è¯•ï¼Œæ¯”å¦‚(å‡½æ•°ï¼Ÿç±»ï¼Ÿ)çš„æ‰§è¡Œç»“æœæ˜¯å¦ç¬¦åˆé¢„æœŸã€‚</p><blockquote><p>ä¸åŒçš„ä¼ä¸šå¯èƒ½å¯¹ä¸åŒæµ‹è¯•çº§åˆ«æœ‰ä¸åŒçš„ç§°è°“ï¼Œæ¯”å¦‚å•å…ƒæµ‹è¯•ã€å¢é‡æµ‹è¯•ã€é›†æˆæµ‹è¯•ã€å›å½’æµ‹è¯•ã€å†’çƒŸæµ‹è¯•â€¦.. è°·æ­Œå¯¹æ­¤åˆ›ç«‹äº†è‡ªå·±çš„å‘½åæ–¹å¼ï¼šå°å‹æµ‹è¯•(å…·ä½“åˆ°æŸä¸ªå‡½æ•°ï¼Ÿ)ã€ä¸­å‹æµ‹è¯•(å¤šä¸ªæ¨¡å—ä¹‹é—´äº¤äº’)ã€å¤§å‹æµ‹è¯•(ç«¯å¯¹ç«¯ï¼Ÿç³»ç»Ÿæ•´ä½“éªŒè¯)ã€‚</p></blockquote></li></ul><span id="more"></span><h3 id="äº†è§£å¿«ç…§æµ‹è¯•"><a href="#äº†è§£å¿«ç…§æµ‹è¯•" class="headerlink" title="äº†è§£å¿«ç…§æµ‹è¯•"></a>äº†è§£å¿«ç…§æµ‹è¯•</h3><blockquote><p>å¿«ç…§æµ‹è¯•ï¼šä¾‹å¦‚å¯¹ vue çš„æµ‹è¯•ï¼Œå°±æ˜¯å°† vue æ¸²æŸ“çš„ dom ç»“æœåºåˆ—åŒ–æˆ stringï¼Œç„¶åå­˜å…¥åˆ° snapshot æ–‡ä»¶å¤¹ä¸‹ï¼Œåç¼€ä¸º.snap, å¦‚æœæ˜¯é¦–æ¬¡åˆ™ä¼šæ–°å»ºï¼Œä¸æ˜¯é¦–æ¬¡ï¼Œé‚£ä¹ˆä»¥åçš„æ¯æ¬¡æµ‹è¯•ï¼Œå¦‚æœæ˜¯åŸºäºå¿«ç…§çš„ï¼Œå°±ä¼šé‚£å¿«ç…§çš„å†…å®¹ä¸å½“å‰æ‰§è¡Œçš„å†…å®¹åšæ¯”è¾ƒï¼Œå¦‚æœä¸åŒï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸å‘ŠçŸ¥å˜æ›´é¡¹ï¼›<br>å¿«ç…§æµ‹è¯•ä¸€èˆ¬ç”¨äºä»£ç è¶‹äºç¨³å®šçš„ç‰ˆæœ¬ï¼Œæå‡æµ‹è¯•çš„ç¨³å®šæ€§å’Œé€Ÿåº¦ï¼›</p></blockquote><h3 id="jest-ç¯å¢ƒæ­å»º"><a href="#jest-ç¯å¢ƒæ­å»º" class="headerlink" title="jest ç¯å¢ƒæ­å»º"></a>jest ç¯å¢ƒæ­å»º</h3><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> jest-project<span class="token builtin class-name">cd</span> jest-project/<span class="token comment"># é¡¹ç›®åˆå§‹åŒ–åŠä¾èµ–å®‰è£…</span><span class="token function">npm</span> init -y<span class="token comment"># jest å®‰è£….. æ³¨æ„ç‰ˆæœ¬å· 28ç‰ˆæœ¬ä»¥å éœ€è¦å¦å¤–å†å®‰è£… jest-environment-jsdom</span><span class="token function">yarn</span> <span class="token function">add</span> jest@24.8.0 --dev<span class="token comment"># scripts æ·»åŠ æŒ‡ä»¤</span>test: <span class="token string">"jest"</span><span class="token comment"># test æ–‡ä»¶æ”¹åŠ¨ è‡ªåŠ¨æ‰§è¡Œ jest</span><span class="token string">"test:debug"</span><span class="token builtin class-name">:</span> <span class="token string">"jest --watchAll"</span><span class="token comment"># åˆå§‹åŒ– jest é…ç½®æ–‡ä»¶ (npx xx å¯ä»¥ç†è§£ä¸ºå¯»å€æ‰§è¡Œ(ä¼˜å…ˆæ‰¾$path,å†ä»node_modulesæŸ¥æ‰¾)ï¼Œå¦‚æœxxå­˜åœ¨ï¼Œé‚£ä¹ˆå°±æ‰§è¡Œè¿™ä¸ªexeï¼Œ ä¸å­˜åœ¨åˆ™å®‰è£…å†æ‰§è¡Œ)</span><span class="token comment"># æ‰§è¡Œç»“æŸä¼šæ ¹æ®é€‰é¡¹,ç”Ÿæˆå¯¹åº”é…ç½®æ–‡ä»¶ jest.config.js|ts</span>npx jest --initâˆš Would you like to use Typescript <span class="token keyword">for</span> the configuration file? <span class="token punctuation">..</span>. noâˆš Choose the <span class="token builtin class-name">test</span> environment that will be used <span class="token keyword">for</span> testing Â» jsdom <span class="token punctuation">(</span>browser-like<span class="token punctuation">)</span>âˆš Do you want Jest to <span class="token function">add</span> coverage reports? <span class="token punctuation">..</span>. <span class="token function">yes</span>âˆš Which provider should be used to instrument code <span class="token keyword">for</span> coverage? Â» babelâˆš Automatically <span class="token function">clear</span> mock calls and instances between every test? <span class="token punctuation">..</span>. <span class="token function">yes</span><span class="token comment"># ç”Ÿæˆè¦†ç›–ç‡æ£€æµ‹æ–‡ä»¶</span>npx jest --coverage or æ·»åŠ æ‰§è¡Œå‘½ä»¤ <span class="token function">yarn</span> coverage: <span class="token string">"jest --coverage"</span></code></pre><h4 id="é»˜è®¤é…ç½®é¡¹"><a href="#é»˜è®¤é…ç½®é¡¹" class="headerlink" title="é»˜è®¤é…ç½®é¡¹"></a>é»˜è®¤é…ç½®é¡¹</h4><p><a href="https://github.com/vuejs/vue-cli/blob/dev/packages/%40vue/cli-plugin-unit-jest/presets/default/jest-preset.js"><code>default-jest-config</code></a></p><h3 id="æµ‹è¯•ç”¨ä¾‹ç®€å•ç¤ºä¾‹"><a href="#æµ‹è¯•ç”¨ä¾‹ç®€å•ç¤ºä¾‹" class="headerlink" title="æµ‹è¯•ç”¨ä¾‹ç®€å•ç¤ºä¾‹"></a>æµ‹è¯•ç”¨ä¾‹ç®€å•ç¤ºä¾‹</h3><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// æ·»åŠ æµ‹è¯•çš„ä¸»æ–‡ä»¶ ä¾‹å¦‚ï¼šfeature1.js</span><span class="token comment">// æµ‹è¯•å¯¹åº”æµ‹è¯•æ–‡ä»¶ feature1.test.js</span><span class="token comment">// æ³¨æ„ï¼šjest æµ‹è¯•æ–‡ä»¶ä¸éœ€è¦å…·ä½“æŒ‡æ˜æ–‡ä»¶åç§° è€Œæ˜¯é€šè¿‡ test.js æ ‡è¯†</span><span class="token comment">// feature1.js</span><span class="token keyword">function</span> <span class="token function">myFn1TestAdd</span><span class="token punctuation">(</span><span class="token parameter">arg0<span class="token punctuation">,</span> arg1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> arg0 <span class="token operator">+</span> arg1<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">myFn2TestLogic</span><span class="token punctuation">(</span><span class="token parameter">arg0<span class="token punctuation">,</span> arg1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> arg0 <span class="token operator">&lt;</span> arg1<span class="token punctuation">;</span><span class="token punctuation">&#125;</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span> myFn1TestAdd<span class="token punctuation">,</span> myFn2TestLogic <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">// feature1.test.js</span><span class="token keyword">const</span> <span class="token punctuation">&#123;</span> myFn1TestAdd<span class="token punctuation">,</span> myFn2TestLogic <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./feature1.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'test number summation'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">myFn1TestAdd</span><span class="token punctuation">(</span><span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'compare number'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">myFn2TestLogic</span><span class="token punctuation">(</span><span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">myFn2TestLogic</span><span class="token punctuation">(</span><span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><code>ç†è§£ï¼štest(ç”¨ä¾‹æè¿°ï¼Œæ‰§è¡Œå›è°ƒ) åˆ›å»ºä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œ expect é¢„æœŸ(å®é™…å€¼ï¼šè¿™é‡Œæ˜¯æµ‹è¯•çš„å‡½æ•°ï¼Œé‚£ä¹ˆå³ä¸ºå‡½æ•°çš„è¿”å›å€¼) toBe[åŒ¹é…å™¨ é€šè¿‡ object.js(ç»å¯¹æ¯”è¾ƒï¼Œç±»ä¼¼ === æ•ˆæœ) æ¯”è¾ƒ](æœŸæœ›å€¼)ï¼Œnot å¯ä»¥ç†è§£ä¸ºå–å</code></p><h3 id="éƒ¨åˆ†Apiå­¦ä¹ "><a href="#éƒ¨åˆ†Apiå­¦ä¹ " class="headerlink" title="éƒ¨åˆ†Apiå­¦ä¹ "></a>éƒ¨åˆ†<code>Api</code>å­¦ä¹ </h3><ul><li>è‡ªå®šä¹‰ matchers</li></ul><p>â€‹ <code>ç­‰å€¼åˆ¤æ–­</code></p><ul><li><p><code>toEqual</code> åŒ¹é…å™¨: é€’å½’æ¯”è¾ƒå¯¹è±¡å±æ€§å®ä¾‹ï¼Œå’Œ <code>toBe</code>åŒ¹é…å™¨çš„åŒºåˆ«åœ¨äº <code>toBe</code> ç±»ä¼¼ <code>===</code> çš„æ–¹å¼è¿›è¡Œç»å¯¹åŒ¹é…ï¼Œå®é™…è¿ç”¨ä¸­ <code>toEqual</code>æ›´é€‚åˆå¯¹æ¯”å¼•ç”¨ç±»å‹æ•°æ®çš„é¢„æœŸè¾“å‡ºï¼›</p></li><li><p><code>toStrictEqual</code>åŒ¹é…å™¨ï¼šä¸¥æ ¼æ¯”è¾ƒï¼Œä¾‹å¦‚ï¼š<code>[, , 1] å’Œ [undefined, undefined, 1]</code></p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// expect(&#123; a: 1, b: 'aa', c: false &#125;).toEqual(&#123; a: 1, b: 'aa' &#125;); // false</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token string">'aa'</span><span class="token punctuation">,</span> <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token string">'aa'</span><span class="token punctuation">,</span> <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token string">'aa'</span><span class="token punctuation">,</span> <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toStrictEqual</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token string">'aa'</span><span class="token punctuation">,</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token string">'aa'</span><span class="token punctuation">,</span> <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token literal-property property">__proto__</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">q</span><span class="token operator">:</span> <span class="token string">'eq'</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token string">'aa'</span><span class="token punctuation">,</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token string">'aa'</span><span class="token punctuation">,</span> <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token literal-property property">__proto__</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">q</span><span class="token operator">:</span> <span class="token string">'eq'</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toStrictEqual</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token string">'aa'</span><span class="token punctuation">,</span>  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>  <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span><span class="token comment">// expect([, , 1]).toStrictEqual([undefined, undefined, 1]); // false</span></code></pre></li><li><p><code>toBeCloseTo(number, numDigits?)</code> åŒ¹é…å™¨ï¼š è§£å†³<code>JavaScript</code> æµ®ç‚¹æ•°ç›¸ç­‰æ¯”è¾ƒé—®é¢˜</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'test toBeCloseTo'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">0.1</span> <span class="token operator">+</span> <span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">0.1</span> <span class="token operator">+</span> <span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCloseTo</span><span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li></ul><p>â€‹ <code>æ•°å­—å¤§å°æ¯”è¾ƒ</code></p><ul><li><p><code>toBeGreaterThan</code> <code>toBeGreaterThanOrEqual</code> <code>toBeLessThan</code> <code>toBeLessThanOrEqual</code> (å‚æ•°å‡ä¸º<code>number | bigint</code>)åŒ¹é…å™¨: æ˜¯å¦å¤§äºã€å¤§äºç­‰äºã€å°äºã€å°äºç­‰äºå€¼ï¼›</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'test toBeLessThan toBeGreaterThan'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>  <span class="token function">expect</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeLessThan</span><span class="token punctuation">(</span><span class="token number">101</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>  <span class="token function">expect</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeGreaterThan</span><span class="token punctuation">(</span><span class="token number">99</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li></ul><p>â€‹ <code>ç±»å‹åˆ¤æ–­</code></p><ul><li><p><code>toBeNull</code> <code>toBeUndefined</code> <code>toBeDefined </code> åŒ¹é…å™¨(æ— å‚æ•°)ï¼šåˆ¤æ–­è¿™ä¸ªå€¼æ˜¯å¦ä¸º <code>nullã€undefinedã€ä¸ä¸ºundefined</code>ï¼›</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'test undefined'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">let</span> a<span class="token punctuation">;</span>  <span class="token function">expect</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeUndefined</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>  a <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>  <span class="token function">expect</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeUndefined</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>  a <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token function">expect</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeUndefined</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p><code>toBeTruthy</code> <code>toBeFalsy</code> <code>toBeNaN</code> åŒ¹é…å™¨(æ— å‚æ•°)ï¼šåˆ¤æ–­ä¸€ä¸ªå€¼ç»è¿‡éšå¼è½¬æ¢åä¸º <code>trueã€false</code>(ç±»ä¼¼ 1ï¼Œâ€™testâ€™ ç­‰ç­‰ <code>toBeTruthy()</code> åˆ™è¾¾åˆ°é¢„æœŸ)ã€åˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦ä¸º <code>NaN</code>(å’Œ<code>toBeTruthy/toBeFalsy</code> ä¸åŒçš„æ˜¯ï¼Œè¿™é‡Œä¸ºæ˜¾ç¤ºæ¯”è¾ƒ);</p></li></ul><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'test NaN'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">let</span> n <span class="token operator">=</span> <span class="token string">'11'</span><span class="token punctuation">;</span>  <span class="token function">expect</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeNaN</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>  n <span class="token operator">=</span> <span class="token string">'11ds'</span><span class="token punctuation">;</span>  <span class="token function">expect</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeNaN</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>  n <span class="token operator">=</span> <span class="token number">NaN</span><span class="token punctuation">;</span>  <span class="token function">expect</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeNaN</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><ul><li><code>toBeInstanceOf(class)</code>åŒ¹é…å™¨ï¼šåˆ¤æ–­æ˜¯å¦ä¸ºæŸä¸ªç±»çš„å®ä¾‹å¯¹è±¡ï¼›</li></ul><p>â€‹ <code>åˆ¤æ–­æ˜¯å¦åŒ…å«æŸä¸ªå€¼</code></p><ul><li><p><code>toMatch(regexp | string) </code>åŒ¹é…å™¨ï¼šåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦èƒ½å¤Ÿæ ¹æ®<code>match</code>å‚æ•°æå–ç‰‡æ®µ(ç®€è¨€ä¹‹ï¼Œ<code>match</code> ä¸º <code>regexp</code> æ—¶ï¼Œç±»ä¼¼<code>reg.test(str)</code>, ç±»å‹ä¸º <code>string</code> æ—¶ç±»ä¼¼ <code>str.includes(match) or str.indexOf(match) &gt; -1</code>);</p></li><li><p><code>toMatchObject(obj)</code> åŒ¹é…å™¨ï¼šåˆ¤æ–­ obj æ˜¯å¦ä¸ºæŸä¸ªå¯¹è±¡çš„å­é›†</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span> be<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> kit<span class="token operator">:</span> <span class="token punctuation">&#123;</span> am<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'oven'</span><span class="token punctuation">,</span> <span class="token string">'stove'</span><span class="token punctuation">,</span> <span class="token string">'washer'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> area<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">const</span> ob <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  kit<span class="token operator">:</span> <span class="token punctuation">&#123;</span>    am<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'oven'</span><span class="token punctuation">,</span> <span class="token string">'stove'</span><span class="token punctuation">,</span> <span class="token string">'washer'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'the  has my desired features'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token function">expect</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatchObject</span><span class="token punctuation">(</span>ob<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// pase</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p><code>toContain(item)</code> åŒ¹é…å™¨ï¼šåˆ¤æ–­æ•°ç»„æ˜¯å¦åŒ…å«äº†æŸä¸ª <code>item</code>,ç±»ä¼¼ <code>arr.includes(&#39;xx&#39;)</code>;</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'test toContain'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'aa'</span><span class="token punctuation">,</span> <span class="token string">'bb'</span><span class="token punctuation">,</span> <span class="token string">'cc'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toContain</span><span class="token punctuation">(</span><span class="token string">'aa'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li></ul><p>â€‹ <code>åˆ¤æ–­æ˜¯å¦æŠ›å‡ºå¼‚å¸¸</code></p><ul><li><p><code>toThrow()</code> åŒ¹é…å™¨ï¼šåˆ¤æ–­<code>expect</code>ä¼ å…¥å€¼æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸; æ³¨æ„ <code>throw æŠ›å‡ºçš„å¼‚å¸¸å€¼ è¦åŒ toThrow å‚æ•°ä¸€è‡´</code>ã€‚æ­¤æ—¶ <code>expect ä¼ å…¥çš„ä¸å†æ˜¯å…·ä½“çš„å€¼ï¼Œè€Œæ˜¯å¯æ‰§è¡Œå›è°ƒ</code></p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'test toThrow'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> <span class="token function-variable function">fn1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'aa'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> <span class="token function-variable function">fn2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'aa'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> <span class="token function-variable function">fn3</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token function">expect</span><span class="token punctuation">(</span>fn1<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toThrow</span><span class="token punctuation">(</span><span class="token string">'aa'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>  <span class="token comment">// expect(fn2).toThrow('aa'); // false</span>  <span class="token function">expect</span><span class="token punctuation">(</span>fn3<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toThrow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>  <span class="token comment">// expect(fn3).toThrow('aa'); // false</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li></ul><h3 id="è®©jest-æ”¯æŒ-esModule"><a href="#è®©jest-æ”¯æŒ-esModule" class="headerlink" title="è®©jest æ”¯æŒ esModule"></a>è®©<code>jest</code> æ”¯æŒ <code>esModule</code></h3><h4 id="æ–¹æ¡ˆä¸€ï¼šæ·»åŠ -babel-è½¬è¯‘"><a href="#æ–¹æ¡ˆä¸€ï¼šæ·»åŠ -babel-è½¬è¯‘" class="headerlink" title="æ–¹æ¡ˆä¸€ï¼šæ·»åŠ  babel è½¬è¯‘"></a>æ–¹æ¡ˆä¸€ï¼šæ·»åŠ  <code>babel</code> è½¬è¯‘</h4><p>â€‹ <code>jest è¿è¡Œåœ¨ node ç¯å¢ƒä¸­ï¼Œéµå¾ª commonJs è§„èŒƒï¼Œæ— æ³•è¯†åˆ« EsModule ç±»ä¼¼ export/import ... form ...æ¨¡å—å¯¼å…¥å¯¼å‡ºï¼Œå› æ­¤æ·»åŠ  babel å®ç°è½¬è¯‘ï¼Œå°† EsModule è½¬æ¢ä¸º commonJs çš„å¯¼å…¥å¯¼å‡ºè§„èŒƒï¼›</code></p><ul><li><p><code>@babel/core@7.4.5</code> æŒ‡å®šæ‰€æœ‰çš„è½¬è¯‘éƒ½æ˜¯ç”¨æœ¬åœ°é…ç½®æ–‡ä»¶ <code>.babelrc or package.json</code>ï¼›</p></li><li><p><code>@babel/preset-env@7.4.5</code> è½¬æ¢å™¨æ ¸å¿ƒï¼Œç”¨ä½œè¯­æ³•è½¬æ¢ç¼–è¯‘ï¼›</p><blockquote><p>yarn add @babel&#x2F;<a href="mailto:&#x63;&#x6f;&#114;&#x65;&#64;&#55;&#x2e;&#x34;&#46;&#53;">&#x63;&#x6f;&#114;&#x65;&#64;&#55;&#x2e;&#x34;&#46;&#53;</a> @babel&#x2F;<a href="mailto:&#x70;&#114;&#x65;&#115;&#x65;&#116;&#x2d;&#101;&#110;&#118;&#x40;&#x37;&#46;&#52;&#46;&#53;">&#x70;&#114;&#x65;&#115;&#x65;&#116;&#x2d;&#101;&#110;&#118;&#x40;&#x37;&#46;&#52;&#46;&#53;</a> â€“dev</p></blockquote></li><li><p><code>yarn test</code> æ‰§è¡Œ <code>jest</code> å‰ï¼Œ<code>jest çš„ babel-jest</code> ç»„ä»¶ä¼šä¼˜å…ˆæ£€æµ‹æ˜¯å¦å®‰è£…äº† <code>babel</code>ï¼Œæ£€æµ‹ <code>.babelrc</code> é…ç½®æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œç„¶åå†æ ¹æ® <code>babel</code>è½¬è¯‘åçš„ç»“æœæ‰§è¡Œ<code>test</code></p></li><li><p>æ·»åŠ  <code>.babelrc</code> é…ç½®æ–‡ä»¶ï¼ŒæŒ‡å®šé¢„è®¾è§„åˆ™ï¼›<code>å¯¹è±¡ï¼špresets ä¸º[&#39;presetName&#39;, options: any][]ç±»å‹ï¼Œæ¯ä¸ª item ä¸ºä¸€ä¸ªé¢„è®¾</code>ï¼Œé¢„è®¾ï¼šå°±æ˜¯æä¾›ä¸€ä¸ªé¢„å®šçš„é…ç½®é¡¹ï¼Œç„¶åä¸å½“å‰é…ç½®åšåˆå¹¶ï¼›</p><pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>  <span class="token property">"presets"</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">[</span>      <span class="token string">"@babel/preset-env"</span><span class="token punctuation">,</span>      <span class="token punctuation">&#123;</span>        <span class="token property">"targets"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>          <span class="token property">"node"</span><span class="token operator">:</span> <span class="token string">"current"</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">]</span>  <span class="token punctuation">]</span><span class="token punctuation">&#125;</span></code></pre></li></ul><h4 id="æ–¹æ¡ˆäºŒï¼šé…ç½®-package-json"><a href="#æ–¹æ¡ˆäºŒï¼šé…ç½®-package-json" class="headerlink" title="æ–¹æ¡ˆäºŒï¼šé…ç½® package.json"></a>æ–¹æ¡ˆäºŒï¼šé…ç½® <code>package.json</code></h4><ul><li><p>å°† <code>package.json</code> çš„ <code>type</code> å­—æ®µè®¾ç½®ä¸º <code>module</code></p></li><li><p>æ¯æ¬¡æ‰§è¡Œ <code>jest</code> æŒ‡å®šç¯å¢ƒå˜é‡</p><blockquote><p>&#x2F;&#x2F; package.json</p><p>{</p><p>&#x2F;&#x2F; â€¦,</p><p>â€œtypeâ€: â€œmoduleâ€,</p><p>â€œscriptsâ€: {</p><p>â€‹ <code>&quot;test&quot;: &quot;NODE_OPTIONS=--experimental-vm-modules jest&quot;</code></p><p>}</p><p>}</p></blockquote></li></ul><h3 id="æµ‹è¯•-typescript"><a href="#æµ‹è¯•-typescript" class="headerlink" title="æµ‹è¯• typescript"></a>æµ‹è¯• <code>typescript</code></h3><h4 id="æ–¹æ¡ˆä¸€ï¼šä»…ç¼–è¯‘ï¼Œä¸åšç±»å‹æ£€æµ‹"><a href="#æ–¹æ¡ˆä¸€ï¼šä»…ç¼–è¯‘ï¼Œä¸åšç±»å‹æ£€æµ‹" class="headerlink" title="æ–¹æ¡ˆä¸€ï¼šä»…ç¼–è¯‘ï¼Œä¸åšç±»å‹æ£€æµ‹"></a>æ–¹æ¡ˆä¸€ï¼šä»…ç¼–è¯‘ï¼Œä¸åšç±»å‹æ£€æµ‹</h4><p><code>é€šè¿‡ @babel/preset-typescript é¢„è®¾ï¼Œå®Œæˆ typescript çš„è½¬è¯‘</code></p><blockquote><p>yarn add @babel&#x2F;preset-typescript â€“dev</p><p>&#x2F;&#x2F; é…ç½® .babelrc è½¬æ¢å™¨è§„åˆ™</p><p>{ presets: [ [â€˜@babel&#x2F;preset-typescriptâ€™] ] }</p></blockquote><h4 id="æ–¹æ¡ˆäºŒï¼šç¼–è¯‘å¹¶å¯¹ç±»å‹æ£€æµ‹"><a href="#æ–¹æ¡ˆäºŒï¼šç¼–è¯‘å¹¶å¯¹ç±»å‹æ£€æµ‹" class="headerlink" title="æ–¹æ¡ˆäºŒï¼šç¼–è¯‘å¹¶å¯¹ç±»å‹æ£€æµ‹"></a>æ–¹æ¡ˆäºŒï¼šç¼–è¯‘å¹¶å¯¹ç±»å‹æ£€æµ‹</h4><p><code>æ™®é€šçš„ javascript æµ‹è¯•ï¼Œä½¿ç”¨å†…ç½®çš„ babel-jest ç»„ä»¶ã€‚é‚£ä¹ˆä¸º typescript ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼Œåˆ™éœ€è¦å®‰è£… ts-jest ç»„ä»¶ï¼›ä¸æ­¤åŒæ—¶ï¼Œå®‰è£… jest çš„ç±»å‹ä¾èµ–ï¼Œç”¨äº .test.ts ä¸­ç±»å‹çš„æ³¨å…¥ã€‚</code></p><blockquote><p>&#x2F;&#x2F; å»ºè®® @types&#x2F;jest ç‰ˆæœ¬åŒ jest ä¸»æ¬¡ç‰ˆæœ¬ä¸€è‡´</p><p>yarn add ts-jest @types&#x2F;jest â€“dev</p><p>&#x2F;&#x2F; é…ç½® <code>jest.config.js</code> , æ·»åŠ  preset: <code>&#39;ts-jest&#39;</code> é¢„è®¾é…ç½®ï¼šå³ä¸ºé¢„é…ç½®é¡¹ã€‚ç”± <code>ts-jest</code> æä¾›é…ç½®é¡¹ï¼Œç„¶åä¸å½“å‰é…ç½®åšåˆå¹¶ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåŠ äº†é¢„è®¾è¿‡åï¼Œå½“å‰é…ç½®æ–‡ä»¶å°±ä¸éœ€è¦å†å‘ <code>moduleFileExtensions</code> å†…æ·»åŠ  ts åç¼€è¯†åˆ«ï¼Œä¹Ÿä¸éœ€è¦æ·»åŠ <code> transform &#123;&#39;^.+\\.tsx?$&#39;: tsJest&#125;</code>ï¼›å‘Šè¯‰ <code>jest, .tsx æ–‡ä»¶é€šè¿‡ require.resolve(&#39;ts-jest&#39;) ç¼–è¯‘å¤„ç†</code></p><p><code>&#123; ...otherOptions, preset: &#39;ts-jest&#39; &#125;</code></p></blockquote><h3 id="æµ‹è¯•å¼‚æ­¥ç»“æœ"><a href="#æµ‹è¯•å¼‚æ­¥ç»“æœ" class="headerlink" title="æµ‹è¯•å¼‚æ­¥ç»“æœ"></a>æµ‹è¯•å¼‚æ­¥ç»“æœ</h3><p><code>asyncFuntion.ts</code></p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">myRequestFn1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> rej<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token function">res</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> success<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><h4 id="æ–¹æ¡ˆä¸€ï¼šæ¥å—ä¸€ä¸ªå‚æ•°-done"><a href="#æ–¹æ¡ˆä¸€ï¼šæ¥å—ä¸€ä¸ªå‚æ•°-done" class="headerlink" title="æ–¹æ¡ˆä¸€ï¼šæ¥å—ä¸€ä¸ªå‚æ•° done"></a>æ–¹æ¡ˆä¸€ï¼šæ¥å—ä¸€ä¸ªå‚æ•° <code>done</code></h4><p><code>ä¸ç®¡ done åœ¨ test å›è°ƒå‡½æ•°å†…æ˜¯å¦æœ‰è¢«ä½¿ç”¨ï¼Œæ•´ä¸ªå›è°ƒéƒ½ä¼šè¢«åˆ¤å®šä¸ºå¼‚æ­¥å‡½æ•°ï¼Œéœ€è¦ç­‰å¾… done() ç»“æŸæ‰§è¡Œã€‚æœ‰ç‚¹ç±»ä¼¼ promise.resolve ç»“æŸ promiseã€‚ç­‰å¾…è¶…æ—¶åç»“æœä¸º false</code></p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// ç›´æ¥åœ¨å›è°ƒå†…çš„ promise.then å†…å†™çš„è¯­å¥ä¸ä¼šè¢« test æ£€æµ‹ï¼Œæ— å…³ equal çš„å€¼ï¼Œç»“æœéƒ½æ˜¯ pass</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'test Done'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token function">myRequestFn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token function">expect</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> success<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ç­‰å¾…è¶…æ—¶ï¼Œç»“æœå¼‚å¸¸</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'test Done'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>done<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token function">myRequestFn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token function">expect</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> success<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// æ­£å¸¸æ‰§è¡Œ</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'test Done'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>done<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token function">myRequestFn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token function">expect</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> success<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>    <span class="token comment">// expect(data).toEqual(&#123; success: false &#125;); // false</span>    <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="æ–¹æ¡ˆäºŒï¼šreturn-è¿”å›ä¸€ä¸ª-promise-ç»“æœ"><a href="#æ–¹æ¡ˆäºŒï¼šreturn-è¿”å›ä¸€ä¸ª-promise-ç»“æœ" class="headerlink" title="æ–¹æ¡ˆäºŒï¼šreturn è¿”å›ä¸€ä¸ª promise ç»“æœ"></a>æ–¹æ¡ˆäºŒï¼š<code>return</code> è¿”å›ä¸€ä¸ª <code>promise</code> ç»“æœ</h4><p><code>è¿”å›ä¸€ä¸ª promise ç»“æœï¼Œtest ä»£ç ä¹Ÿå¯ä»¥è¢«æ­£å¸¸æ‰§è¡Œ</code></p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'test async return'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token function">myRequestFn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token function">expect</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> success<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><code>é›·ï¼šå½“ return è¿”å›çš„ promise ä¸åŒ…å«é”™è¯¯æ—¶ï¼Œcatch ä¸ä¼šè¢«æ‰§è¡Œï¼Œé‚£ä¹ˆ .catch å†…çš„ expec å§‹ç»ˆéƒ½ä¼šè¢« passï¼›æ­¤æ—¶ï¼Œé€šè¿‡æ·»åŠ  expect æ–­è¨€æ¥åˆ¤æ–­æ˜¯å¦è¦†ç›–äº† catch æµ‹è¯•è¯­å¥</code></p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'test promise.catch return'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  expect<span class="token punctuation">.</span><span class="token function">assertions</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å‚æ•°ä¸º expect çš„æ‰§è¡Œæ­¤æ—¶</span>  <span class="token keyword">return</span> <span class="token function">myRequestFn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token function">expect</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeUndefined</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="æ–¹æ¡ˆä¸‰ï¼šasync-await-æ¨è"><a href="#æ–¹æ¡ˆä¸‰ï¼šasync-await-æ¨è" class="headerlink" title="æ–¹æ¡ˆä¸‰ï¼šasync await (æ¨è)"></a>æ–¹æ¡ˆä¸‰ï¼š<code>async await</code> (æ¨è)</h4><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'test async await'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">myRequestFn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// expect(res).toBeUndefined(); // failed</span>  <span class="token function">expect</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> success<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// pass</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°"><a href="#ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°"></a>ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°</h3><ul><li><p><code>beforeAll</code> <code>beforeEach</code> <code>afterEach</code> <code>afterAll</code> ï¼šæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹å¼€å§‹ä¹‹å‰æ‰§è¡Œã€æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹å¼€å§‹ä¹‹å‰æ‰§è¡Œã€æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ç»“æŸä¹‹åæ‰§è¡Œã€æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ç»“æŸä¹‹åæ‰§è¡Œã€‚</p></li><li><p>ä½œç”¨åŸŸ:</p><blockquote><p>é’©å­å‡½æ•°åœ¨çˆ¶çº§åˆ†ç»„å¯ä½œç”¨äºå­çº§ï¼Œç±»ä¼¼ç»§æ‰¿</p><p>é’©å­å‡½æ•°åŒçº§åˆ†ç»„ä½œç”¨åŸŸäº’ä¸å¹²æ‰°ï¼Œå„èµ·ä½œç”¨</p><p>å…ˆæ‰§è¡Œå¤–éƒ¨çš„é’©å­å‡½æ•°ï¼Œå†æ‰§è¡Œå†…éƒ¨çš„é’©å­å‡½æ•°</p></blockquote><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// åˆ†ç»„å’Œé’©å­å‡½æ•°ç†è§£</span><span class="token comment">// çˆ¶çº§åˆ†ç»„</span><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token function">beforeAll</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// a</span>  <span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// b è¿™é‡Œçˆ¶çº§çš„é’©å­å‡½æ•°ä¼šä½œç”¨äºå­åˆ†ç»„, æ¯”å¦‚ beforeEach åœ¨å­åˆ†ç»„çš„æ¯ä¸ª test æ‰§è¡Œä¹‹å‰ä¼šè¢«è§¦å‘</span>  <span class="token comment">// å­åˆ†ç»„</span>  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'test a'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token function">beforeAll</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// c</span>    <span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// d</span>    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'test a.a'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// e</span>    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'test a.b'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// f</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'test b'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token function">beforeAll</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// g</span>    <span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// h</span>    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'test b.a'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// i</span>    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'test b.b'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// j</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// a -> c -> b -> d -> e -> b -> d -> f -> g -> b -> h -> i -> b -> h -> j</span></code></pre><p><code>ç®€è¨€ä¹‹ï¼ŒåŒçº§ä»ä¸Šåˆ°ä¸‹æ‰§è¡Œï¼Œåªæœ‰æ‰§è¡Œåˆ°è¯¥å­çº§åï¼Œè¯¥å­çº§çš„å‘¨æœŸé’©å­å‡½æ•°æ‰ä¼šè¢«è§¦å‘ï¼Œä¾‹å¦‚ beforeALLï¼›ç„¶åå½“è¯¥åŠçš„ beforeALL é’©å­æ‰§è¡Œåï¼Œå¼€å§‹ä»æœ€å¤–å‘å†…çº§ä¾æ¬¡æ‰§è¡Œ beforeEach ,å†ä»ä¸Šåˆ°ä¸‹æ‰§è¡Œè¯¥çº§çš„ test ç”¨ä¾‹ã€‚æ³¨æ„ï¼šafter é’©å­ä¸ before ç›¸åï¼Œafter é’©å­æ˜¯ç”±å†…å‘å¤–çº§ä¾æ¬¡æ‰§è¡Œã€‚ ç±»ä¼¼ vue çš„çˆ¶å­ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº</code>ï¼›</p></li></ul><h3 id="æµ‹è¯•ç”¨ä¾‹çš„åˆ†ç»„"><a href="#æµ‹è¯•ç”¨ä¾‹çš„åˆ†ç»„" class="headerlink" title="æµ‹è¯•ç”¨ä¾‹çš„åˆ†ç»„"></a>æµ‹è¯•ç”¨ä¾‹çš„åˆ†ç»„</h3><p>â€‹ <code>å½“æµ‹è¯•ç”¨ä¾‹è¶³å¤Ÿå¤šæ—¶ï¼Œè¿‡é‡çš„æµ‹è¯•ç”¨ä¾‹ ä¸æ–¹ä¾¿ç®¡ç†åŠæŸ¥çœ‹ã€‚æ­¤æ—¶ä½¿ç”¨ describe(name, fn) å¯¹æµ‹è¯•ç”¨ä¾‹åˆ†ç»„ï¼›æ³¨æ„ï¼šåˆ†ç»„åè¿˜å¯ä»¥è¿›è¡Œå­åˆ†ç»„ï¼Œæœ€å¤–å±‚å¯ä»¥ç†è§£ä¸ºä¸€ä¸ª describe</code>ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// åŸ:</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'test a.a'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'test a.b'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'test b.a'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'test b.b'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// åˆ†ç»„åï¼š(å°†åŸæœ‰çš„ test ç”¨ä¾‹æ‹·è´åˆ° describe å›è°ƒå†…å³å¯å®Œæˆåˆ†ç»„)</span><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'test a'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'test a.a'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'test a.b'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'test b'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'test b.a'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'test b.b'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="å…¶ä»–-API"><a href="#å…¶ä»–-API" class="headerlink" title="å…¶ä»– API"></a>å…¶ä»– <code>API</code></h3><ul><li><code>test.only(name, fn)</code> å½“å­˜åœ¨ <code>test.only</code> æ—¶ï¼Œå…¶ä»–çš„æµ‹è¯•ç”¨ä¾‹ä¼šè¢« skipped è·³è¿‡ï¼Œåªæ‰§è¡Œå½“å‰çš„æµ‹è¯•ç”¨ä¾‹ï¼Œé€šå¸¸ç”¨äº <code>debug</code></li></ul><h3 id="æµ‹è¯•-Vue-ç»„ä»¶"><a href="#æµ‹è¯•-Vue-ç»„ä»¶" class="headerlink" title="æµ‹è¯• Vue ç»„ä»¶"></a>æµ‹è¯• <code>Vue</code> ç»„ä»¶</h3><p><code>é…åˆ @vue/test-utils æä¾›çš„ apiï¼Œå®Œæˆ vue ç»„ä»¶çš„ TDD(å•å…ƒ) æµ‹è¯•</code></p><ul><li><p>åœ¨é¡¹ç›®ä¸­ï¼Œèƒ½å¤Ÿè¢«æ­£ç¡®è¯†åˆ«çš„æµ‹è¯•æ–‡ä»¶ï¼Œé€šå¸¸è¢«æŒ‡å®šåœ¨ <code>**/tests/unit/**/*.spec.[jt]s?(x) or **/__tests__/*.[jt]s?(x) </code></p></li><li><p><code>it</code>(æ–­è¨€)ï¼Œ<code>test</code>æµ‹è¯•ï¼Œç±»ä¼¼ itã€‚</p></li><li><p>é€šè¿‡ <code>@vue/test-utils æä¾›çš„ mount or shadowMount å‡½æ•°æ¥æŒ‚è½½å¹¶æ¸²æŸ“ vue</code>ã€‚</p></li><li><p>ç”±äº <code>jest</code> é»˜è®¤é…ç½®åŒ…å«äº†å¯¹ <code>@</code> ç¬¦å·è·¯å¾„çš„æ˜ å°„ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// xx.spec.ts</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> mount<span class="token punctuation">,</span> shadowMount <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'@vue/test-utils'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token constant">XX</span> <span class="token keyword">from</span> <span class="token string">'@/xxx/Xx.vue'</span><span class="token punctuation">;</span> <span class="token comment">// ç”±äºé…ç½®äº†å¼•ç”¨åç¼€ï¼Œè¿™é‡Œå¯ä»¥ä¸å†™ .vue</span><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'æµ‹è¯•ä¸€ä¸ª XX ç»„ä»¶åŠŸèƒ½'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'æµ‹è¯• A å‡½æ•°'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">shadowMount</span><span class="token punctuation">(</span><span class="token constant">XX</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// æ–­è¨€ add TDD</span>    <span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatch</span><span class="token punctuation">(</span><span class="token string">'æµ‹è¯•'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p><code>shadowMount å’Œ mount</code> çš„åŒºåˆ«ï¼š<a href="https://github.com/holylovelqq/vue-unit-test-with-jest/issues/4">å‚è€ƒ</a></p><p><code>æ¸²æŸ“åŒºåˆ«ï¼š</code></p><pre class="language-none"><code class="language-none">mountï¼šè¸è¸å®å®çš„æ¸²æŸ“ï¼Œä¼šå°†è¢«æµ‹è¯•ç»„ä»¶ä¸­ä½¿ç”¨åˆ°çš„å­å­å­™å­™ç»„ä»¶å®Œå…¨æ¸²æŸ“ã€‚æœ€ç»ˆç»“æœå†…è‚¯å®šä¸å­˜åœ¨è‡ªå®šä¹‰ç»„ä»¶åä½œä¸ºæ ‡ç­¾åï¼ŒåŒ…æ‹¬æ’ä»¶æä¾›çš„V-btnä¹‹ç±»çš„domç»“æ„ï¼Œå…¨éƒ¨ä¸å­˜åœ¨ï¼Œå½»åº•æ¸²æŸ“åˆ°&lt;div&gt;&lt;span&gt;&lt;p&gt;ä¹‹ç±»shallowMountï¼šæµ…æ¸²æŸ“ï¼Œä¸mountç›¸åï¼Œæ—¢ä¸ä¼šæ¸²æŸ“å­ç»„ä»¶ï¼Œæ›´ä¸ç”¨æå­™å­è¾ˆçš„ç»„ä»¶ï¼Œä»…é™æµ‹è¯•ç»„ä»¶æœ¬èº«ã€‚å­ç»„ä»¶ä¼šåŸåŸæœ¬æœ¬çš„æ˜¾ç¤ºå­ç»„ä»¶çš„å­˜æ ¹ï¼Œå½“ä½¿ç”¨stubsçš„æ—¶å€™ï¼Œå­ç»„ä»¶å­˜æ ¹æ˜¯å¯ä»¥è‡ªå®šä¹‰æ˜¾ç¤ºå†…å®¹çš„ï¼Œå¦‚æœæœªè‡ªå®šä¹‰ï¼Œå°†ä¼šæ˜¾ç¤ºå­ç»„ä»¶å-stubçš„æ ‡ç­¾åï¼Œå¦‚&lt;my-componet-stub&gt;&lt;&#x2F;my-componet-stub&gt;</code></pre><p><code>åœºæ™¯</code>ï¼š</p><pre class="language-none"><code class="language-none">mountï¼šå¤šæ•°æƒ…å†µå‡ºç°åœ¨snapshotä¸­ä½¿ç”¨ï¼Œè€Œä¸”ä¹Ÿåªæ˜¯éƒ¨åˆ†snapshotä¸­å¿…é¡»ä½¿ç”¨mountã€‚ä¸‹é¢å°†è¯´æ˜ä½•ç§æƒ…å†µï¼šå½“è¢«æµ‹è¯•ç»„ä»¶å†…åŒ…å«å­ç»„ä»¶ï¼Œä¸”å­ç»„ä»¶çš„domç»“æ„é€šè¿‡slotåœ¨è¢«æµ‹è¯•ç»„ä»¶å†…å®šä¹‰çš„æ—¶å€™ï¼Œå¿…é¡»ä½¿ç”¨mountæ¥æµ‹è¯•snapshotã€‚hallowMountï¼šæ‰€æœ‰å¿…é¡»ä½¿ç”¨mountçš„æƒ…å†µä»¥å¤–éƒ½ä½¿ç”¨shallowMountï¼Œä½¿ç”¨mountå°†æ›´å¤§çš„æ¶ˆè€—æ—¶é—´å’Œæ€§èƒ½ï¼Œ----&gt; å®é™…ä¸Šæ‰€æœ‰æµ‹è¯•éƒ½å¯ä»¥ä¸ä½¿ç”¨mountï¼Œä½†æ˜¯é‰´äºæµ‹è¯•çš„å¤æ‚æ€§ï¼Œæœ‰å¯èƒ½ä¼šå‡ºç°ç”¨shallowMountæ€ä¹ˆä¹ŸæŠ¥é”™çš„æƒ…å†µï¼Œä½†æ˜¯æ”¹æˆmountå°±èƒ½æµ‹è¯•é€šè¿‡</code></pre><p><code>åŸºæœ¬å‡†åˆ™ï¼šæ‰€æœ‰ä½¿ç”¨ shallowMount çš„åœ°æ–¹éƒ½å¯ä»¥ç”¨ mount æ›¿æ¢ï¼Œä½†æ˜¯ä½†å‡¡èƒ½ä½¿ç”¨ shallowMount çš„åœ°æ–¹åšå†³ä¸ç”¨ mountï¼›</code></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å·¥ç¨‹åŒ– </category>
          
          <category> å•å…ƒæµ‹è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jest </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨ Typescript é¡¹ç›®ä¸­ä½¿ç”¨ Eslint å’Œ Prettier</title>
      <link href="/engineering/eslint-and-prettier-in-ts-project/"/>
      <url>/engineering/eslint-and-prettier-in-ts-project/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="ä¸ºä»€ä¹ˆæ˜¯eslintå’Œprettierï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆæ˜¯eslintå’Œprettierï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆæ˜¯eslintå’Œprettierï¼Ÿ"></a>ä¸ºä»€ä¹ˆæ˜¯<code>eslint</code>å’Œ<code>prettier</code>ï¼Ÿ</h3><blockquote><p>åœ¨<code>ESlint</code>æ¨å‡º<code>--fix</code>å‚æ•°å‰<code>ESLint</code>å¹¶æ²¡æœ‰è‡ªåŠ¨åŒ–æ ¼å¼ä»£ç çš„åŠŸèƒ½ï¼Œè¦å¯¹ä¸€äº›æ ¼å¼é—®é¢˜åšæ‰¹é‡æ ¼å¼åŒ–åªèƒ½ç”¨<code>Prettier</code>è¿™æ ·çš„å·¥å…·ã€‚å¹¶ä¸”<code>Prettier</code>åœ¨ä»£ç é£æ ¼çš„æ£€æµ‹ä¸Šæ¯”<code>ESlint</code>æ›´å…¨é¢ï¼Œæ‰€ä»¥ä¸¤è€…é€šå¸¸æ˜¯ç»“åˆåœ¨ä¸€èµ·ä½¿ç”¨çš„ã€‚</p></blockquote><blockquote><p>å¯¹<code>typescript</code>ä»£ç è¿›è¡Œ<code>linting</code>æ—¶ï¼Œæœ‰ä¸¤ä¸ªä¸»è¦çš„<code>linting</code>å·¥å…·å¯ä¾›é€‰æ‹©ï¼š<code>tslintã€eslint</code>ï¼Œ<code>tslint</code>æ˜¯ä¸€ä¸ªåªèƒ½ç”¨äº<code>typescript</code>é¡¹ç›®çš„<code>linter</code>ï¼Œè€Œ<code>eslint</code>åŒæ—¶æ”¯æŒ<code>typescriptã€javascript</code>.</p></blockquote><blockquote><p>æ®<code>typescript</code>æ ¸å¿ƒå›¢é˜Ÿè§£é‡Šï¼š<code>ESLint å…·æœ‰æ¯” TSLint æ›´é«˜æ€§èƒ½çš„æ¶æ„</code>ï¼Œå¹¶ä¸”åç»­åœ¨ä¸º<code>typescript</code>ä¸­<code>linting</code>é›†æˆæ—¶ï¼Œ<code>åªä¼šå…³æ³¨eslint</code>ï¼Œå¦å¤–å®˜æ–¹è‡ª<code>2019</code>èµ·å·²ç»å¼ƒç”¨<code>tslint</code>ï¼Œ**<a href="https://palantir.github.io/tslint/">TSLint has been deprecated as of 2019</a>**</p></blockquote><span id="more"></span><h3 id="åœ¨typescripté¡¹ç›®ä¸­æ­å»ºeslint"><a href="#åœ¨typescripté¡¹ç›®ä¸­æ­å»ºeslint" class="headerlink" title="åœ¨typescripté¡¹ç›®ä¸­æ­å»ºeslint"></a>åœ¨<code>typescript</code>é¡¹ç›®ä¸­æ­å»º<code>eslint</code></h3><blockquote><p><code>tips</code>ï¼šå¦‚æœæ˜¯<code>create-react-app</code>åˆ›å»ºçš„é¡¹ç›®ï¼Œ<code>eslint</code>å·²ç»è¢«ä½œä¸ºä¾èµ–é¡¹é›†æˆï¼Œæ— éœ€å¦å¤–å®‰è£….</p></blockquote><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># @typescript-eslint/parser å…è®¸ ESLint å¯¹ TypeScript ä»£ç è¿›è¡Œ lint è§£æ</span><span class="token comment"># @typescript-eslint/eslint-plugin åŒ…å«ä¸€å †ç‰¹å®šäº TypeScript çš„ ESLint è§„åˆ™</span><span class="token function">yarn</span> <span class="token function">add</span> -D eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin</code></pre><p><code>then..</code>åœ¨é¡¹ç›®æ ¹ç›®å½•æ·»åŠ <code>.eslintrc.js</code>çš„é…ç½®æ–‡ä»¶ï¼Œ<code>eg</code>ï¼š</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token literal-property property">env</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">node</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token string">'@typescript-eslint/parser'</span><span class="token punctuation">,</span> <span class="token comment">// Specifies the ESLint parser</span>  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'plugin:@typescript-eslint/recommended'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token literal-property property">parserOptions</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">ecmaVersion</span><span class="token operator">:</span> <span class="token number">2020</span><span class="token punctuation">,</span> <span class="token comment">// Allows for the parsing of modern ECMAScript features</span>    <span class="token literal-property property">sourceType</span><span class="token operator">:</span> <span class="token string">'module'</span><span class="token punctuation">,</span> <span class="token comment">// Allows for the use of imports</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token string">'plugin:@typescript-eslint/recommended'</span><span class="token punctuation">,</span> <span class="token comment">// Uses the recommended rules from the @typescript-eslint/eslint-plugin</span>  <span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// Place to specify ESLint rules. Can be used to overwrite rules specified from the extended configs</span>    <span class="token string-property property">'no-console'</span><span class="token operator">:</span>      process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'production'</span>        <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">allow</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'error'</span><span class="token punctuation">]</span> <span class="token punctuation">&#125;</span><span class="token punctuation">]</span>        <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'warn'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">allow</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'error'</span><span class="token punctuation">]</span> <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token string-property property">'no-debugger'</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'production'</span> <span class="token operator">?</span> <span class="token string">'warn'</span> <span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span>    <span class="token comment">// -----</span>    <span class="token comment">// é…ç½® unused-imports è§„åˆ™éœ€è¦å•ç‹¬å®‰è£…æ’ä»¶ yarn add -D eslint-plugin-unused-imports ç„¶ååœ¨æœ€å¤–å±‚æ·»åŠ é…ç½®é¡¹ plugins: ['unused-imports']</span>    <span class="token comment">// 'unused-imports/no-unused-imports': 'error',</span>    <span class="token comment">// -----</span>    <span class="token comment">// typescript configs e.g.</span>    <span class="token string-property property">'@typescript-eslint/no-unused-vars'</span><span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span>    <span class="token string-property property">'@typescript-eslint/explicit-function-return-type'</span><span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span>    <span class="token string-property property">'@typescript-eslint/no-explicit-any'</span><span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span>    <span class="token string-property property">'@typescript-eslint/consistent-type-imports'</span><span class="token operator">:</span> <span class="token string">'warn'</span><span class="token punctuation">,</span>    <span class="token string-property property">'@typescript-eslint/explicit-module-boundary-types'</span><span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span>    <span class="token string-property property">'@typescript-eslint/no-empty-function'</span><span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span>    <span class="token string-property property">'@typescript-eslint/no-non-null-assertion'</span><span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span>    <span class="token string-property property">'@typescript-eslint/no-this-alias'</span><span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><blockquote><p>å¦‚æœåœ¨<code>reactçš„ts</code>é …ç›®ä¸­ä½¿ç”¨ï¼Œå¦å¤–å®‰è£… <code>eslint-plugin-react dev</code>ä¾èµ–é¡¹ï¼Œå¹¶åœ¨ä¸Šé¢é…ç½®çš„<code>.eslintrc</code>ä¸­æ·»åŠ é…ç½®ï¼š</p></blockquote><pre class="language-javascript" data-language="javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// ... others</span>  <span class="token literal-property property">settings</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">react</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token string">'detect'</span><span class="token punctuation">,</span> <span class="token comment">// Tells eslint-plugin-react to automatically detect the version of React to use</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token literal-property property">parserOptions</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// ... others</span>    <span class="token literal-property property">ecmaFeatures</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token literal-property property">jsx</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Allows for the parsing of JSX</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token comment">// ... others</span>    <span class="token string">'plugin:react/recommended'</span><span class="token punctuation">,</span>  <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥é…ç½®<code>eslint</code>çš„<code>ignore</code>æ–‡ä»¶<code>.eslintignore</code>ï¼Œç¬¦åˆå…¶é…ç½®è§„åˆ™ï¼ˆè¯­æ³•åŒå…¶ä»–çš„<code>ignore</code>é…ç½®ï¼Œå¦‚<code>.gitignore</code>ï¼‰çš„æ–‡ä»¶å°†å¿½ç•¥<code>lint</code>æ£€æµ‹ã€‚</p><p>ğŸ˜ğŸ˜ğŸ˜<a href="https://eslint.org/docs/latest/">æŸ¥çœ‹æ›´å¤šçš„é…ç½®é¡¹åŠè§„åˆ™</a> -&gt; <a href="http://eslint.cn/docs/rules/">ä¸­æ–‡æ–‡æ¡£</a></p><h3 id="æ··å…¥prettieré…ç½®"><a href="#æ··å…¥prettieré…ç½®" class="headerlink" title="æ··å…¥prettieré…ç½®"></a>æ··å…¥<code>prettier</code>é…ç½®</h3><blockquote><p>æ··ç”¨åï¼Œå°±å¯ä»¥é€šè¿‡ eslint â€“fix æ¥è‡ªåŠ¨ä¿®å¤ä¸ç¬¦åˆ prettier è§„åˆ™çš„ä»£ç </p></blockquote><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># eslint-config-prettier ç¦ç”¨å¯èƒ½ä¸ prettier å†²çªçš„ ESLint è§„åˆ™</span><span class="token comment"># eslint-plugin-prettier å°† prettier ä½œä¸º eslint è§„åˆ™è¿è¡Œ</span><span class="token function">yarn</span> <span class="token function">add</span> -D prettier eslint-config-prettier eslint-plugin-prettier</code></pre><p>æ¥ä¸‹æ¥åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹æ·»åŠ ä¸€ä¸ª<code>.prettierrc</code>æ–‡ä»¶ï¼Œç”¨ä»¥é…ç½®<code>prettier</code>ï¼Œ<code>eg:</code></p><pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>  <span class="token property">"singleQuote"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token property">"trailingComma"</span><span class="token operator">:</span> <span class="token string">"all"</span><span class="token punctuation">,</span>  <span class="token property">"printWidth"</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>  <span class="token property">"arrowParens"</span><span class="token operator">:</span> <span class="token string">"always"</span><span class="token punctuation">&#125;</span></code></pre><p>ç»§ç»­â€¦åœ¨åŸæœ‰çš„é…ç½®åŸºç¡€ä¸Šï¼Œæ›´æ–°<code>.eslintrc.js</code>é…ç½®ï¼Œç”¨ä»¥æ”¯æŒæ··ç”¨ï¼š</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// ... others</span>  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token comment">// ... others</span>    <span class="token comment">// ç¡®ä¿æ·»åŠ çš„ 'plugin:prettier/recommended' åœ¨ extends é…ç½®çš„æœ€åä¸€é¡¹</span>    <span class="token string">'plugin:prettier/recommended'</span><span class="token punctuation">,</span>  <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å·¥ç¨‹åŒ– </category>
          
          <category> ä»£ç è§„èŒƒçº¦æŸ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> eslint </tag>
            
            <tag> prettier </tag>
            
            <tag> typescript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Typescript ä¸­çš„ç¬¦å·é›†åˆ</title>
      <link href="/share/typescript-mark/"/>
      <url>/share/typescript-mark/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><p>åœ¨ <code>typescript</code> ä»£ç æ—¥å¸¸ç¼–å†™è¿‡ç¨‹ä¸­ï¼Œä¼šç»å¸¸æ€§çš„é‡åˆ°ä¸€äº›ç¬¦å·ï¼Œè¿™é‡Œå¯¹ä¸€äº›ç¬¦å·è¿›è¡Œä¸€ä¸ªæ±‡æ€»ã€‚</p><p>ä¾‹å¦‚ï¼š<code>?ã€??ã€?.ã€!ã€_</code>ç­‰ä¸€ç³»åˆ—çš„ç¬¦å·ï¼Œå…¶ä¸­ï¼Œé™¤äº†<code>!</code>ï¼Œå…¶ä»–éƒ½æ˜¯<code>js</code>æä¾›çš„ï¼Œæ›´æ–¹ä¾¿çš„æœåŠ¡äº<code>ts</code>ã€‚</p><h3 id="ç±»å‹æŸ¥è¯¢æ“ä½œç¬¦"><a href="#ç±»å‹æŸ¥è¯¢æ“ä½œç¬¦" class="headerlink" title="ç±»å‹æŸ¥è¯¢æ“ä½œç¬¦"></a>ç±»å‹æŸ¥è¯¢æ“ä½œç¬¦</h3><p><code>typeof Tï¼› [ç±»å‹æŸ¥è¯¢æ“ä½œç¬¦] ç»“æœä¸º T ä¸Šå·²çŸ¥çš„ å…¬å…±å±æ€§ç±»å‹çš„ è”åˆã€‚ &#39;XXX&#39; | &#39;YYY&#39;...</code></p><span id="more"></span><h3 id="ç´¢å¼•ç±»å‹æŸ¥è¯¢æ“ä½œç¬¦"><a href="#ç´¢å¼•ç±»å‹æŸ¥è¯¢æ“ä½œç¬¦" class="headerlink" title="ç´¢å¼•ç±»å‹æŸ¥è¯¢æ“ä½œç¬¦"></a>ç´¢å¼•ç±»å‹æŸ¥è¯¢æ“ä½œç¬¦</h3><p><code>keyof Tï¼› [ç´¢å¼•ç±»å‹æŸ¥è¯¢æ“ä½œç¬¦] ç»“æœä¸º T ä¸Šå·²çŸ¥çš„ å…¬å…±å±æ€§åçš„ è”åˆã€‚ &#39;XXX&#39; | &#39;YYY&#39;...</code></p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// ä¾‹ï¼šæšä¸¾å·²çŸ¥å±æ€§çš„é›†åˆ</span><span class="token keyword">type</span> <span class="token class-name">Keys</span> <span class="token operator">=</span> <span class="token string">'A'</span> <span class="token operator">|</span> <span class="token string">'B'</span> <span class="token operator">|</span> <span class="token string">'C'</span><span class="token punctuation">;</span>or<span class="token punctuation">;</span><span class="token keyword">interface</span> <span class="token class-name">KeysProps</span> <span class="token punctuation">&#123;</span>  <span class="token constant">A</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  <span class="token constant">B</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  <span class="token constant">C</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">type</span> <span class="token class-name">Keys</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> KeysProps<span class="token punctuation">;</span></code></pre><h3 id="ç´¢å¼•è®¿é—®æ“ä½œç¬¦"><a href="#ç´¢å¼•è®¿é—®æ“ä½œç¬¦" class="headerlink" title="ç´¢å¼•è®¿é—®æ“ä½œç¬¦"></a>ç´¢å¼•è®¿é—®æ“ä½œç¬¦</h3><p><code>T[K]; [ç´¢å¼•è®¿é—®æ“ä½œç¬¦] å¯ä»¥é€šè¿‡ç´¢å¼•çš„æ–¹å¼ å–åˆ° Tä¸Šå±æ€§ä¸º K çš„ Type</code></p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// ä¾‹ï¼š</span><span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">&#123;</span>  b<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>  c<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> <span class="token constant">A</span><span class="token punctuation">[</span><span class="token string">'b'</span><span class="token punctuation">]</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> <span class="token constant">C</span> <span class="token operator">=</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span></code></pre><h3 id="æ˜ å°„ç±»å‹æ“ä½œç¬¦"><a href="#æ˜ å°„ç±»å‹æ“ä½œç¬¦" class="headerlink" title="æ˜ å°„ç±»å‹æ“ä½œç¬¦"></a>æ˜ å°„ç±»å‹æ“ä½œç¬¦</h3><p><code>in T ä»¥åŠ in keyof T [æ˜ å°„ç±»å‹]</code></p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// ä¾‹1  in T   [æ­¤æ—¶çš„ T åº”è¯¥ä¸ºè”åˆç±»å‹] å½“éœ€è¦ä¸ºæŒ‡å®šçš„ key é›†åˆçº¦æŸç±»å‹æ—¶ å¾ˆæœ‰ç”¨</span><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> <span class="token string">'aa'</span> <span class="token operator">|</span> <span class="token string">'bb'</span> <span class="token operator">|</span> <span class="token string">'cc'</span><span class="token punctuation">;</span><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">D</span></span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">[</span>k <span class="token keyword">in</span> <span class="token constant">C</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">//â†“ å¾—åˆ°çš„ç»“æœ</span><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">D</span></span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  aa<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  bb<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  cc<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">// ä¾‹2 in keyof T [æ­¤æ—¶çš„ T ä¸º interface å¯¹è±¡ç±»å‹] åœ¨å·²çŸ¥ keyé›†åˆçš„æƒ…å†µä¸‹ é‡çº¦æŸ keyçš„ç±»å‹</span><span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">&#123;</span>  aa<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  bb<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>  cc<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">[</span>k <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">A</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">//â†“ å¾—åˆ°çš„ç»“æœ</span><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  aa<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>  bb<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>  cc<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><h3 id="éç©ºæ–­è¨€æ“ä½œç¬¦"><a href="#éç©ºæ–­è¨€æ“ä½œç¬¦" class="headerlink" title="!éç©ºæ–­è¨€æ“ä½œç¬¦"></a><code>!</code>éç©ºæ–­è¨€æ“ä½œç¬¦</h3><p><code>ï¼æ–­è¨€åªæ˜¯å¿½ç•¥TSæ£€æŸ¥ï¼Œå®é™…è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œ è¯¥æŠ¥é”™è¿˜æ˜¯ä¼šæŠ¥é”™, æ­¤å¤– !æ˜¯æ”¾åœ¨å˜é‡åçš„ï¼Œæ³¨æ„éè¿ç®—ç¬¦åŒºåˆ«</code></p><ul><li>å¿½ç•¥<code>undefined</code>å’Œ<code>null</code>ç±»å‹ ï¼ˆ æ¯”å¦‚ï¼š<strong>x! å°†ä» x å€¼åŸŸä¸­æ’é™¤ null å’Œ undefined</strong> ï¼‰</li></ul><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">myFunc</span><span class="token punctuation">(</span>maybeString<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> onlyString<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> maybeString<span class="token punctuation">;</span> <span class="token comment">// Error</span>  <span class="token keyword">const</span> ignoreUndefinedAndNull<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> maybeString<span class="token operator">!</span><span class="token punctuation">;</span> <span class="token comment">// Ok</span><span class="token punctuation">&#125;</span></code></pre><ul><li>è°ƒç”¨å‡½æ•°æ—¶å¿½ç•¥<code>undefined</code></li></ul><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">NumGenerator</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">number</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">myFunc</span><span class="token punctuation">(</span>numGenerator<span class="token operator">:</span> NumGenerator <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> num1 <span class="token operator">=</span> <span class="token function">numGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error</span>  <span class="token keyword">const</span> num2 <span class="token operator">=</span> numGenerator<span class="token operator">!</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//OK</span><span class="token punctuation">&#125;</span></code></pre><h3 id="å¯é€‰å±æ€§"><a href="#å¯é€‰å±æ€§" class="headerlink" title="?:å¯é€‰å±æ€§"></a><code>?:</code>å¯é€‰å±æ€§</h3><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">&#123;</span>  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  age<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">const</span> a<span class="token operator">:</span> <span class="token constant">A</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'å¼ ä¸‰'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span> <span class="token comment">// age å¯é€‰</span></code></pre><h3 id="ç±»å‹è¿ç®—ç¬¦-amp-ã€"><a href="#ç±»å‹è¿ç®—ç¬¦-amp-ã€" class="headerlink" title="ç±»å‹è¿ç®—ç¬¦&amp;ã€ |"></a>ç±»å‹è¿ç®—ç¬¦<code>&amp;ã€ |</code></h3><p><code>ç”¨äºç±»å‹è¿ç®—ï¼š &amp; å°†å¤šä¸ªç±»å‹åˆå¹¶ä¸ºä¸€ä¸ªç±»å‹ï¼Œ | å–å€¼å¯ä»¥ä¸ºå¤šç§ç±»å‹ä¸­çš„ä¸€ç§ </code></p><blockquote><p>type A &#x3D; xx &amp; xxx äº¤å‰ç±»å‹</p></blockquote><blockquote><p>type B &#x3D; xx | xxx è”åˆç±»å‹</p></blockquote><h3 id="æ•°å­—åˆ†éš”ç¬¦"><a href="#æ•°å­—åˆ†éš”ç¬¦" class="headerlink" title="_æ•°å­—åˆ†éš”ç¬¦"></a><code>_</code>æ•°å­—åˆ†éš”ç¬¦</h3><p>ä½ å¯ä»¥æŠŠä¸€ä¸ªä¸‹åˆ’çº¿ä½œä¸ºæ•°å­—å†…éƒ¨çš„åˆ†éš”ç¬¦æ¥åˆ†ç»„æ•°å­—ï¼Œ æ¯”å¦‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">const</span> inhabitantsOfMunich <span class="token operator">=</span> <span class="token number">1_464_301</span><span class="token punctuation">;</span><span class="token keyword">const</span> distanceEarthSunInKm <span class="token operator">=</span> <span class="token number">149_600_000</span><span class="token punctuation">;</span><span class="token keyword">const</span> fileSystemPermission <span class="token operator">=</span> <span class="token number">0b111_111_000</span><span class="token punctuation">;</span><span class="token keyword">const</span> bytes <span class="token operator">=</span> <span class="token number">0b1111_10101011_11110000_00001101</span><span class="token punctuation">;</span></code></pre><p>ç¼–è¯‘åï¼Œä¼šç”Ÿæˆä»¥ä¸‹ ES5 ä»£ç ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token string">'use strict'</span><span class="token punctuation">;</span><span class="token keyword">var</span> inhabitantsOfMunich <span class="token operator">=</span> <span class="token number">1464301</span><span class="token punctuation">;</span><span class="token keyword">var</span> distanceEarthSunInKm <span class="token operator">=</span> <span class="token number">149600000</span><span class="token punctuation">;</span><span class="token keyword">var</span> fileSystemPermission <span class="token operator">=</span> <span class="token number">504</span><span class="token punctuation">;</span><span class="token keyword">var</span> bytes <span class="token operator">=</span> <span class="token number">262926349</span><span class="token punctuation">;</span></code></pre><p><code>æ³¨æ„ï¼š åªèƒ½åœ¨ä¸¤ä¸ªæ•°å­—ä¹‹é—´æ·»åŠ _åˆ†å‰²ç¬¦ï¼Œä¸èƒ½è¿ç»­ä½¿ç”¨å¤šä¸ª </code>_<code>åˆ†éš”ç¬¦</code></p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// Numeric separators are not allowed here.(6188)</span>3_<span class="token punctuation">.</span><span class="token number">141592</span> <span class="token comment">// Error</span><span class="token number">3</span><span class="token punctuation">.</span>_141592 <span class="token comment">// Error</span><span class="token comment">// Numeric separators are not allowed here.(6188)</span>1_e10 <span class="token comment">// Error</span>1e_10 <span class="token comment">// Error</span><span class="token comment">// Cannot find name '_126301'.(2304)</span>_126301  <span class="token comment">// Error</span><span class="token comment">// Numeric separators are not allowed here.(6188)</span>126301_ <span class="token comment">// Error</span><span class="token comment">// Cannot find name 'b111111000'.(2304)</span><span class="token comment">// An identifier or keyword cannot immediately follow a numeric literal.(1351)</span>0_b111111000 <span class="token comment">// Error</span><span class="token comment">// Numeric separators are not allowed here.(6188)</span>0b_111111000 <span class="token comment">// Error</span><span class="token comment">// Multiple consecutive numeric separators are not permitted.(6189)</span>123__456 <span class="token comment">// Error</span></code></pre><ul><li>æ•°å­—åˆ†éš”ç¬¦çš„è§£æï¼š</li></ul><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// ä¸èƒ½ä½¿ç”¨ Number() parseInt() parseFloat() è§£æ</span><span class="token comment">// è‡ªå®šä¹‰è½¬æ¢å‡½æ•°è§£æå‡ºå®é™…æ•°å­—</span><span class="token comment">// å¦‚  str.replace æ–¹æ³• æ›¿æ¢æ‰ _</span></code></pre><h3 id="lt-Type-gt-åŠ-as-æ–­è¨€"><a href="#lt-Type-gt-åŠ-as-æ–­è¨€" class="headerlink" title="&lt;Type&gt; åŠ as æ–­è¨€"></a><code>&lt;Type&gt; åŠ as</code> æ–­è¨€</h3><ul><li>å°–æ‹¬å·è¯­æ³•(<code>React</code>ä¸­ä¸æ”¯æŒ)</li></ul><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">const</span> a<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token string">'asf'</span><span class="token punctuation">;</span><span class="token keyword">const</span> n <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span>a<span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span></code></pre><ul><li><code>as</code>è¯­æ³•</li></ul><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">const</span> a<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token string">'asf'</span><span class="token punctuation">;</span><span class="token keyword">const</span> n <span class="token operator">=</span> <span class="token punctuation">(</span>a <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> TypeScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> typescript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Typescript é«˜çº§ç±»å‹ä»‹ç»</title>
      <link href="/share/typescript-types/"/>
      <url>/share/typescript-types/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><p><code>typescript</code>æ”¯æŒä¸<code>javascript</code>å‡ ä¹ç›¸åŒçš„æ•°æ®ç±»å‹ï¼Œæ­¤å¤–è¿˜æä¾›äº†å…¶ä»–å®ç”¨çš„ç±»å‹æ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨ã€‚</p><span id="more"></span><h3 id="åŸºç¡€ç±»å‹å›é¡¾"><a href="#åŸºç¡€ç±»å‹å›é¡¾" class="headerlink" title="åŸºç¡€ç±»å‹å›é¡¾"></a>åŸºç¡€ç±»å‹å›é¡¾</h3><ul><li>æ•°å­—ï¼š<code>number</code>ï¼›</li><li>å­—ç¬¦ä¸²ï¼š<code>string</code>ï¼›</li><li>å¸ƒå°”ç±»å‹ï¼š<code>boolean</code>ï¼›</li><li>æ•°ç»„ç±»å‹ï¼šå…ƒç´ ç±»å‹åè·Ÿ <code>number[]</code>ï¼›æˆ–è€…ä½¿ç”¨æ•°ç»„æ³›å‹ <code>Array&lt;number&gt;</code>;</li><li>å…ƒç»„ç±»å‹ï¼š å…è®¸è¡¨ç¤ºä¸€ä¸ªå·²çŸ¥å…ƒç´ æ•°é‡å’Œç±»å‹çš„æ•°ç»„ï¼Œå„å…ƒç´ çš„ç±»å‹ä¸å¿…ç›¸åŒã€‚å¦‚ï¼š<code>[string, number]</code>;</li><li>æšä¸¾ç±»å‹ï¼šç”¨äºå®šä¹‰æ•°å€¼é›†åˆ</li><li><code>any</code>ç±»å‹ï¼šä»»æ„ç±»å‹ï¼Œå¯ä»¥èµ‹äºˆä»»æ„ç±»å‹çš„å€¼ï¼›</li><li><code>void</code>ç±»å‹ï¼šä¸<code>any</code>ç›¸åï¼Œè¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹ï¼›</li><li><code>null</code>å’Œ<code>undefined</code>ç±»å‹ï¼šåªèƒ½æŒ‡<code>null</code>ä¸<code>undefined</code>å…ƒç´ æœ¬èº«ï¼›</li><li><code>never</code>ç±»å‹ï¼š<code>never</code>æ˜¯å…¶å®ƒç±»å‹ï¼ˆåŒ…æ‹¬<code>null å’Œ undefined</code>ï¼‰çš„å­ç±»å‹ï¼Œä»£è¡¨ä»ä¸ä¼šå‡ºç°çš„å€¼</li></ul><h3 id="äº¤å‰ç±»å‹"><a href="#äº¤å‰ç±»å‹" class="headerlink" title="äº¤å‰ç±»å‹"></a>äº¤å‰ç±»å‹</h3><p><code>type C = A &amp; B; ç±»å‹ C ä¸ºåŒæ—¶åŒ…å«ç±»å‹ Aã€B çš„æ–°ç±»å‹</code></p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">&#123;</span>  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  age<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token punctuation">&#123;</span>  <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>  say<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// äº¤å‰ç±»å‹å®ç°æ–¹å¼ 1ï¼š ç»§æ‰¿</span><span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">A</span></span><span class="token punctuation">,</span> <span class="token constant">B</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token comment">// äº¤å‰ç±»å‹å®ç°æ–¹å¼ 2ï¼š &amp; (æ­£å¸¸æƒ…å†µä¸‹)</span><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> <span class="token constant">A</span> <span class="token operator">&amp;</span> <span class="token constant">B</span><span class="token punctuation">;</span><span class="token comment">// äº¤å‰ç±»å‹å®ç°æ–¹å¼ 3ï¼šæ˜ å°„(ç±»ä¼¼éå†èµ‹å€¼...ä¸æ¨è)</span></code></pre><h3 id="è”åˆç±»å‹"><a href="#è”åˆç±»å‹" class="headerlink" title="è”åˆç±»å‹"></a>è”åˆç±»å‹</h3><p><code>type C = A | B; ç±»å‹ C ä¸º A æˆ– B å…¶ä¸­ä¸€ç§ç±»å‹</code></p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// å®šä¹‰å¦‚ä¸Š</span><span class="token comment">// ....</span><span class="token comment">// æ­£å¸¸ä½¿ç”¨ï¼š</span><span class="token keyword">const</span> c<span class="token operator">:</span> <span class="token constant">C</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span> age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'å¼ ä¸‰'</span> <span class="token punctuation">&#125;</span> <span class="token keyword">as</span> <span class="token constant">A</span><span class="token punctuation">;</span><span class="token comment">// or</span><span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token constant">C</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token comment">// é€šè¿‡è®¿é—® arg.name å±æ€§ï¼Œéšå¼åˆ¤æ–­å½“å‰ type ç±»å‹ã€‚A ä¸­ name ä¸ºå¿…é€‰é¡¹</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>arg<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arg<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    arg<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><h3 id="è”åˆç±»å‹ä¹‹ç±»å‹ä¿æŠ¤"><a href="#è”åˆç±»å‹ä¹‹ç±»å‹ä¿æŠ¤" class="headerlink" title="è”åˆç±»å‹ä¹‹ç±»å‹ä¿æŠ¤"></a>è”åˆç±»å‹ä¹‹ç±»å‹ä¿æŠ¤</h3><ul><li>in å…³é”®å­—</li></ul><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">&#123;</span>  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token punctuation">&#123;</span>  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  date<span class="token operator">:</span> Date<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">type</span> <span class="token class-name">UnknownT</span> <span class="token operator">=</span> <span class="token constant">A</span> <span class="token operator">|</span> <span class="token constant">B</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">printT</span><span class="token punctuation">(</span>ar<span class="token operator">:</span> UnknownT<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Name: '</span> <span class="token operator">+</span> ar<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'age'</span> <span class="token keyword">in</span> ar<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'age: '</span> <span class="token operator">+</span> ar<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'date'</span> <span class="token keyword">in</span> ar<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'date: '</span> <span class="token operator">+</span> ar<span class="token punctuation">.</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><ul><li>typeof å…³é”®å­—</li></ul><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> arg <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">'æ˜¯ç±»å‹ number'</span><span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> arg <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">'æ˜¯ç±»å‹ string'</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><ul><li>instanceof å…³é”®å­—</li></ul><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">&#123;</span>  <span class="token function">gitValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Aa</span> <span class="token keyword">implements</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">&#123;</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> val<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>  <span class="token function">gitValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>val<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Ab</span> <span class="token keyword">implements</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">&#123;</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> val<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>  <span class="token function">gitValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>val <span class="token operator">+</span> <span class="token string">''</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Aa</span><span class="token punctuation">(</span><span class="token string">'aaa'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token keyword">instanceof</span> <span class="token class-name">Aa</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></code></pre><ul><li>å­—é¢é‡ç±»å‹ä¿æŠ¤</li></ul><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">Foo</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  kind<span class="token operator">:</span> <span class="token string">'foo'</span><span class="token punctuation">;</span> <span class="token comment">// å­—é¢é‡ç±»å‹</span>  foo<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">type</span> <span class="token class-name">Bar</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  kind<span class="token operator">:</span> <span class="token string">'bar'</span><span class="token punctuation">;</span> <span class="token comment">// å­—é¢é‡ç±»å‹</span>  bar<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">doStuff</span><span class="token punctuation">(</span>arg<span class="token operator">:</span> Foo <span class="token operator">|</span> Bar<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>arg<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">'foo'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arg<span class="token punctuation">.</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ok</span>    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arg<span class="token punctuation">.</span>bar<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// ä¸€å®šæ˜¯ Bar</span>    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arg<span class="token punctuation">.</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error</span>    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arg<span class="token punctuation">.</span>bar<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ok</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><ul><li>è‡ªå®šä¹‰ç±»å‹ä¿æŠ¤çš„ç±»å‹è°“è¯</li></ul><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">isNumber</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> x <span class="token keyword">is</span> <span class="token builtin">number</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="é€šç”¨ç±»å‹"><a href="#é€šç”¨ç±»å‹" class="headerlink" title="é€šç”¨ç±»å‹"></a>é€šç”¨ç±»å‹</h3><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// æ¥å£é€šç”¨</span><span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">&#123;</span>  <span class="token punctuation">[</span>k<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="å­—é¢é‡ç±»å‹"><a href="#å­—é¢é‡ç±»å‹" class="headerlink" title="å­—é¢é‡ç±»å‹"></a>å­—é¢é‡ç±»å‹</h3><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// color çš„å€¼åªå¯ä»¥æ˜¯å­—ç¬¦ä¸² redã€blueã€yellow</span><span class="token keyword">type</span> <span class="token class-name">color</span> <span class="token operator">=</span> <span class="token string">'red'</span> <span class="token operator">|</span> <span class="token string">'blue'</span> <span class="token operator">|</span> <span class="token string">'yellow'</span><span class="token punctuation">;</span></code></pre><h3 id="æ¥å£æ•°æ®ç±»å‹"><a href="#æ¥å£æ•°æ®ç±»å‹" class="headerlink" title="æ¥å£æ•°æ®ç±»å‹"></a>æ¥å£æ•°æ®ç±»å‹</h3><p>ä»»ä½•ä¸€ä¸ªé¡¹ç›®éƒ½ç¦»ä¸å¼€å¯¹æ•°æ®å’Œæ¥å£çš„å¤„ç†ï¼Œæ‹¼æ¥æ•°æ®å’Œæ¥å£æ˜¯å½¢æˆä¸šåŠ¡é€»è¾‘ä¹Ÿæ˜¯å‰ç«¯çš„ä¸»è¦å·¥ä½œä¹‹ä¸€ï¼Œå°†æ¥å£è¿”å›çš„æ•°æ®å®šä¹‰ TypeScript ç±»å‹å¯ä»¥å‡å°‘å¾ˆå¤šç»´æŠ¤æˆæœ¬å’ŒæŸ¥è¯¢ api çš„æ—¶é—´ ã€‚</p><p><code>API.d.ts</code> <code>d.ts</code> ç»“å°¾çš„æ–‡ä»¶ä¼šè¢« TypeScript é»˜è®¤å¯¼å…¥åˆ°å…¨å±€ , æ— éœ€å†æ‰‹åŠ¨å¯¼å‡ºã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// ä¸èƒ½ä½¿ç”¨ import è¯­æ³•ï¼Œå¦‚æœéœ€è¦å¼•ç”¨éœ€è¦ä½¿ç”¨ä¸‰æ–œæ </span><span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token constant">API</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>  <span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// or</span><span class="token keyword">declare</span> <span class="token keyword">namespace</span> <span class="token constant">CAPI</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">interface</span> <span class="token class-name">CurrentUser</span> <span class="token punctuation">&#123;</span>    avatar<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>    name<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>    title<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// ä½¿ç”¨ API.A | API.B |  CAPI.CurrentUser</span></code></pre><h3 id="æ³›å‹"><a href="#æ³›å‹" class="headerlink" title="æ³›å‹"></a>æ³›å‹</h3><p>ç±»å‹å˜é‡<code>T</code> ã€‚é€šè¿‡ç±»å‹å˜é‡æ¥å¸®åŠ©æ•è·ç”¨æˆ·ä¼ å…¥çš„ç±»å‹ ï¼Œä»¥æ­¤æ¥é€‚é…å¤šä¸ªç±»å‹ä½¿ç”¨ã€‚</p><p>ä½ å¯ä»¥è¿™æ ·ï¼š</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">uniquefn</span><span class="token punctuation">(</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// ...   å¤§å¯ä¸å¿…</span><span class="token punctuation">&#125;</span></code></pre><p>å¾ˆæ˜æ˜¾ï¼Œå»é‡å‡½æ•°çš„å‚æ•°å¯ä»¥æ˜¯ä»»æ„çš„ç±»å‹ï¼Œä½¿ç”¨<code>any</code>ç±»å‹ä¼šå¯¼è‡´è¿™ä¸ªå‡½æ•°å¯ä»¥æ¥æ”¶ä»»ä½•ç±»å‹çš„<code>arg</code>å‚æ•°ï¼Œè¿™æ ·å°±ä¸¢å¤±äº†ä¸€äº›ä¿¡æ¯ ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•ä½¿è¿”å›å€¼çš„ç±»å‹ä¸ä¼ å…¥å‚æ•°çš„ç±»å‹æ˜¯ç›¸åŒçš„ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// ä¸¾æ — æ•°ç»„å»é‡</span><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">uniquefn</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>args<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// ...</span><span class="token punctuation">&#125;</span><span class="token comment">// ä½¿ç”¨</span><span class="token keyword">const</span> arr1 <span class="token operator">=</span> <span class="token generic-function"><span class="token function">uniquefn</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> age<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">&#125;</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">[</span>  <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'å¼ ä¸‰'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">18</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'æå››'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// or åˆ©ç”¨äº†ç±»å‹æ¨è®º â€”â€” å³ç¼–è¯‘å™¨ä¼šæ ¹æ®ä¼ å…¥çš„å‚æ•°è‡ªåŠ¨åœ°å¸®åŠ©æˆ‘ä»¬ç¡®å®šTçš„ç±»å‹</span><span class="token function">uniquefn</span><span class="token punctuation">(</span><span class="token punctuation">[</span>  <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'å¼ ä¸‰'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">18</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'æå››'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="é¢„å®šä¹‰ç±»å‹"><a href="#é¢„å®šä¹‰ç±»å‹" class="headerlink" title="é¢„å®šä¹‰ç±»å‹"></a>é¢„å®šä¹‰ç±»å‹</h3><p><code>TypeScript 2.8åœ¨lib.d.tsé‡Œå¢åŠ äº†ä¸€äº›é¢„å®šä¹‰çš„æœ‰æ¡ä»¶ç±»å‹ï¼š</code></p><ul><li><code>NonNullable&lt;T&gt;</code> â€“ ä» T ä¸­å‰”é™¤ null å’Œ undefinedã€‚</li><li><code>ReturnType&lt;T&gt;</code> â€“ è·å–å‡½æ•°è¿”å›å€¼ç±»å‹ã€‚</li><li><code>InstanceType&lt;T&gt;</code> â€“ è·å–æ„é€ å‡½æ•°ç±»å‹çš„å®ä¾‹ç±»å‹ã€‚</li></ul><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// typescript æ ‡å‡†åº“å†…çš„ä¸€äº›å®ç°</span><span class="token keyword">type</span> <span class="token class-name">Proxy<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span></span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>  <span class="token function">set</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><h3 id="å…¶ä»–å†…ç½®ç±»å‹"><a href="#å…¶ä»–å†…ç½®ç±»å‹" class="headerlink" title="å…¶ä»–å†…ç½®ç±»å‹"></a>å…¶ä»–å†…ç½®ç±»å‹</h3><ul><li><code>Required</code> ã€‚ä¸ <code>Partial</code> ç›¸å</li></ul><p><code>-?</code> çš„åŠŸèƒ½å°±æ˜¯æŠŠå¯é€‰å±æ€§çš„ <code>?</code> å»æ‰ï¼Œä½¿è¯¥å±æ€§å˜æˆå¿…é€‰é¡¹ï¼Œå¯¹åº”çš„è¿˜æœ‰ <code>+?</code> ï¼Œä½œç”¨ä¸ <code>-?</code> ç›¸åï¼Œæ˜¯æŠŠå±æ€§å˜ä¸ºå¯é€‰é¡¹ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">Partial<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span></span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">type</span> <span class="token class-name">Required<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span></span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><ul><li><p>Exclude&lt;T,U&gt;</p><p>ä» <code>T</code> ä¸­æ’é™¤é‚£äº›å¯ä»¥èµ‹å€¼ç»™ <code>U</code> çš„ç±»å‹ã€‚ (T âˆ© U) åœ¨ T çš„ è¡¥é›†</p></li></ul><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">Exclude<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">></span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">U</span></span> <span class="token operator">?</span> <span class="token builtin">never</span> <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">=</span> Exclude<span class="token operator">&lt;</span><span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2</span> <span class="token operator">|</span> <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">4</span> <span class="token operator">|</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">4</span><span class="token operator">></span><span class="token punctuation">;</span> <span class="token comment">// T = 1|2|5</span></code></pre><ul><li><p>Extract&lt;T,U&gt;</p><p>ä» <code>T</code> ä¸­æå–é‚£äº›å¯ä»¥èµ‹å€¼ç»™ <code>U</code> çš„ç±»å‹ã€‚ ç±»å‹ T âˆ© U</p></li></ul><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">Extract<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">></span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">U</span></span> <span class="token operator">?</span> <span class="token constant">T</span> <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">;</span><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">=</span> Extract<span class="token operator">&lt;</span><span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2</span> <span class="token operator">|</span> <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">4</span> <span class="token operator">|</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">4</span><span class="token operator">></span><span class="token punctuation">;</span> <span class="token comment">// T = 3|4</span></code></pre><ul><li><p>Pick&lt;T, K&gt;</p><p>ä» å¯¹è±¡<code>T</code> ä¸­å–å‡ºä¸€ç³»åˆ— <code>K</code> çš„å±æ€§</p></li></ul><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">Pick<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">></span></span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span>  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>  sex<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">const</span> person<span class="token operator">:</span> Pick<span class="token operator">&lt;</span>Person<span class="token punctuation">,</span> <span class="token string">'name'</span> <span class="token operator">|</span> <span class="token string">'age'</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  name<span class="token operator">:</span> <span class="token string">'å°ç‹'</span><span class="token punctuation">,</span>  age<span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><ul><li><p>Record&lt;K, T&gt;</p><p>å°† <code>K</code> ä¸­æ‰€æœ‰çš„å±æ€§çš„å€¼è½¬åŒ–ä¸º <code>T</code> ç±»å‹ã€‚</p></li></ul><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">Record<span class="token operator">&lt;</span><span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token operator">></span></span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">const</span> person<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token keyword">keyof</span> Person<span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  name<span class="token operator">:</span> <span class="token string">'å°ç‹'</span><span class="token punctuation">,</span>  age<span class="token operator">:</span> <span class="token string">'12'</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><ul><li>æ›´å¤šçš„å†…ç½®â€”â€”&gt; typescript æ“ä½œç¬¦åŠå…ƒç´ ç±»å‹</li></ul><h3 id="Omit-lt-T-K-gt-ï¼ˆæ²¡æœ‰å†…ç½®ï¼‰"><a href="#Omit-lt-T-K-gt-ï¼ˆæ²¡æœ‰å†…ç½®ï¼‰" class="headerlink" title="Omit&lt;T,K&gt;ï¼ˆæ²¡æœ‰å†…ç½®ï¼‰"></a>Omit&lt;T,K&gt;ï¼ˆæ²¡æœ‰å†…ç½®ï¼‰</h3><p>ä»å¯¹è±¡ <code>T</code> ä¸­æ’é™¤ <code>key</code> æ˜¯ <code>K</code> çš„å±æ€§ ã€‚ ä¸ Pick ç›¸å</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">Omit<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token operator">></span></span> <span class="token operator">=</span> Pick<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> Exclude<span class="token operator">&lt;</span><span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token operator">>></span><span class="token punctuation">;</span></code></pre><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span>  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>  sex<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">const</span> person<span class="token operator">:</span> Omit<span class="token operator">&lt;</span>Person<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  age<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>  sex<span class="token operator">:</span> <span class="token string">'ç”·'</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> TypeScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> typescript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>éœ€è¦äº†è§£çš„ Typescript çŸ¥è¯†ç‚¹</title>
      <link href="/share/typescript-declare/"/>
      <url>/share/typescript-declare/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><blockquote><p>å‰æ®µæ—¶é—´é¡¹ç›®å¿™ï¼ŒåŠ ä¹‹ç–«æƒ…åŸå› ï¼Œå°±æ²¡æœ‰æ›´æ–°ã€‚ğŸ˜ŠğŸ˜ŠğŸ˜Š</p></blockquote><blockquote><p>è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯ç±»å‹å£°æ˜è¿‡ç¨‹ä¸­é‡åˆ°çš„éœ€æ±‚å’Œé—®é¢˜åšçš„è®°å½•ã€‚</p></blockquote><blockquote><p>æŒç»­æ›´æ–°ä¸­â€¦</p></blockquote><span id="more"></span><h3 id="å¦‚ä½•ç¼–å†™-d-tså£°æ˜æ–‡ä»¶ï¼Ÿ"><a href="#å¦‚ä½•ç¼–å†™-d-tså£°æ˜æ–‡ä»¶ï¼Ÿ" class="headerlink" title="å¦‚ä½•ç¼–å†™.d.tså£°æ˜æ–‡ä»¶ï¼Ÿ"></a>å¦‚ä½•ç¼–å†™<code>.d.ts</code>å£°æ˜æ–‡ä»¶ï¼Ÿ</h3><p><code>.d.ts</code>æ–‡ä»¶æ˜¯åœ¨ç¼–å†™<code>typescript</code>é¡¹ç›®ä¸­å¿…ä¸å¯å°‘çš„ï¼Œå®ƒæ˜¯è®©æˆ‘ä»¬èƒ½åœ¨<code>ts</code>ä¸­è°ƒç”¨çš„<code>js</code>çš„å£°æ˜æ–‡ä»¶ã€‚æ¯”å¦‚æœ‰å¾ˆå¤šä¸»æµçš„<code>npmåº“</code>éƒ½æ˜¯åŸºäº<code>js</code>ç¼–å†™çš„ï¼Œé‚£ä¹ˆåœ¨ä½ çš„<code>ts</code>é¡¹ç›®ä¸­å¼•ç”¨æ—¶ï¼Œä¼šæç¤ºä½ æ‰¾ä¸åˆ°å¯¹åº”åŒ…æˆ–å‡½æ•°çš„å£°æ˜ï¼Œæ­¤æ—¶å¹¶ä¸éœ€è¦æˆ‘ä»¬ç”¨<code>ts</code>å¯¹ç»„ä»¶é‡å†™ï¼Œåªéœ€åœ¨ä½ çš„é¡¹ç›®ä¸­ç¼–å†™åŒ…å«è¯¥åº“ç±»å‹å£°æ˜çš„<code>.d.ts</code>æ–‡ä»¶å³å¯ã€‚</p><p>é€šå¸¸åœ¨å®šåˆ¶åŒ–ç¼–å†™ç»„ä»¶æ—¶ï¼Œ<code>.d.ts</code>ä¼šç»Ÿä¸€æ”¾åˆ°<code>@types</code>æˆ–è€…<code>typings</code>æ–‡ä»¶å¤¹ä¸‹ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ä¸å†™<code>.d.ts</code>ï¼Œè€Œé€šè¿‡<code>tsc</code>å¯¹<code>ts</code>æ–‡ä»¶åšç¼–è¯‘ç”Ÿæˆå¯¹åº”æ–‡ä»¶çš„<code>.d.ts</code>ã€‚</p><ul><li><a href="https://ts.xcatliu.com/basics/declaration-files.html#declare-var"><code>declare var</code></a> å£°æ˜å…¨å±€å˜é‡</li><li><a href="https://ts.xcatliu.com/basics/declaration-files.html#declare-function"><code>declare function</code></a> å£°æ˜å…¨å±€æ–¹æ³•</li><li><a href="https://ts.xcatliu.com/basics/declaration-files.html#declare-class"><code>declare class</code></a> å£°æ˜å…¨å±€ç±»</li><li><a href="https://ts.xcatliu.com/basics/declaration-files.html#declare-enum"><code>declare enum</code></a> å£°æ˜å…¨å±€æšä¸¾ç±»å‹</li><li><a href="https://ts.xcatliu.com/basics/declaration-files.html#declare-namespace"><code>declare namespace</code></a> å£°æ˜ï¼ˆå«æœ‰å­å±æ€§çš„ï¼‰å…¨å±€å¯¹è±¡</li><li><a href="https://ts.xcatliu.com/basics/declaration-files.html#interface-%E5%92%8C-type"><code>interface</code> å’Œ <code>type</code></a> å£°æ˜å…¨å±€ç±»å‹</li><li><a href="https://ts.xcatliu.com/basics/declaration-files.html#export"><code>export</code></a> å¯¼å‡ºå˜é‡</li><li><a href="https://ts.xcatliu.com/basics/declaration-files.html#export-namespace"><code>export namespace</code></a> å¯¼å‡ºï¼ˆå«æœ‰å­å±æ€§çš„ï¼‰å¯¹è±¡</li><li><a href="https://ts.xcatliu.com/basics/declaration-files.html#export-default"><code>export default</code></a> ES6 é»˜è®¤å¯¼å‡º</li><li><a href="https://ts.xcatliu.com/basics/declaration-files.html#export-1"><code>export =</code></a> commonjs å¯¼å‡ºæ¨¡å—</li><li><a href="https://ts.xcatliu.com/basics/declaration-files.html#export-as-namespace"><code>export as namespace</code></a> UMD åº“å£°æ˜å…¨å±€å˜é‡</li><li><a href="https://ts.xcatliu.com/basics/declaration-files.html#declare-global"><code>declare global</code></a> æ‰©å±•å…¨å±€å˜é‡</li><li><a href="https://ts.xcatliu.com/basics/declaration-files.html#declare-module"><code>declare module</code></a> æ‰©å±•æ¨¡å—</li><li><a href="https://ts.xcatliu.com/basics/declaration-files.html#san-xie-xian-zhi-ling"><code>/// </code></a> ä¸‰æ–œçº¿æŒ‡ä»¤</li></ul><p><code>eg. æ‰©å±• axios æ¨¡å—è¯·æ±‚çš„ config é…ç½®ã€‚</code> <del>axios.interceptors.response. errors.config äº¦å¯æ‹¿åˆ°</del></p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'axios'</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">AxiosRequestConfig</span> <span class="token punctuation">&#123;</span>    metadata<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      start<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token comment">/**     *  ç”¨äºæ§åˆ¶è¯¥è¯·æ±‚å‡ºç°é”™è¯¯æ—¶ï¼Œ æ˜¯å¦ç”±é»˜è®¤messageæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯     *     * @type &#123;boolean&#125;     * @memberof AxiosRequestConfig     */</span>    suppressError<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>    <span class="token comment">/**     * ç”¨äºè¯·æ±‚åœ¨401çŠ¶æ€ç æ—¶ï¼Œ æ˜¯å¦è‡ªåŠ¨é‡å®šå‘åˆ°ç™»é™†é¡µã€‚     *     * @type &#123;boolean&#125;     * @memberof AxiosRequestConfig     */</span>    suppressUnauthRedirect<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><div class="warning"><blockquote><p>å£°æ˜è¯­å¥ä¸­åªèƒ½å®šä¹‰ç±»å‹ï¼Œåˆ‡å‹¿åœ¨å£°æ˜è¯­å¥ä¸­å®šä¹‰å…·ä½“çš„å®ç°</p></blockquote></div><h4 id="ä¸‰æ–œçº¿æŒ‡ä»¤"><a href="#ä¸‰æ–œçº¿æŒ‡ä»¤" class="headerlink" title="///ä¸‰æ–œçº¿æŒ‡ä»¤"></a><code>///</code>ä¸‰æ–œçº¿æŒ‡ä»¤</h4><blockquote><p>&#x2F;&#x2F;&#x2F; &lt;reference path&#x3D;â€â€¦â€ /&gt;</p></blockquote><p>ä¸‰æ–œçº¿å¼•ç”¨å‘Šè¯‰ç¼–è¯‘å™¨åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­è¦å¼•å…¥çš„é¢å¤–çš„æ–‡ä»¶ã€‚<strong>ä¸‰æ–œçº¿æŒ‡ä»¤ä»…å¯æ”¾åœ¨åŒ…å«å®ƒçš„æ–‡ä»¶çš„æœ€é¡¶ç«¯ã€‚ ä¸€ä¸ªä¸‰æ–œçº¿æŒ‡ä»¤çš„å‰é¢åªèƒ½å‡ºç°å•è¡Œæˆ–å¤šè¡Œæ³¨é‡Šã€‚</strong></p><h4 id="declare-namespaceè¯¦è§£"><a href="#declare-namespaceè¯¦è§£" class="headerlink" title="declare namespaceè¯¦è§£"></a><code>declare namespace</code>è¯¦è§£</h4><p><code>namespace</code>ä¸­æ–‡ç§°å‘½åç©ºé—´ï¼Œç°åœ¨å·²ç»ä¸å»ºè®®å†ä½¿ç”¨<code>ts</code>ä¸­çš„<code>namespace</code>ï¼Œè€Œæ¨èä½¿ç”¨<code>ES6</code>çš„æ¨¡å—åŒ–æ–¹æ¡ˆäº†ï¼Œ<del>è™½ç„¶ç›®å‰ä»èƒ½ä½¿ç”¨</del>ã€‚</p><p><code>eg. jQuery</code>æä¾›äº†ä¸€ä¸ª<code>jQuery.ajax</code>æ–¹æ³•å¯ä»¥è°ƒç”¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±åº”è¯¥ä½¿ç”¨<code>declare namespace jQuery</code>æ¥å£°æ˜è¿™ä¸ªæ‹¥æœ‰å¤šä¸ªå­å±æ€§çš„å…¨å±€å˜é‡ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">declare</span> <span class="token keyword">namespace</span> jQuery <span class="token punctuation">&#123;</span>  <span class="token keyword">function</span> <span class="token function">ajax</span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> settings<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> version<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>  <span class="token keyword">class</span> <span class="token class-name">Event</span> <span class="token punctuation">&#123;</span>    <span class="token function">blur</span><span class="token punctuation">(</span>eventType<span class="token operator">:</span> EventType<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">enum</span> EventType <span class="token punctuation">&#123;</span>    CustomClick<span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>æ³¨æ„ï¼Œåœ¨<code>declare namespace</code>å†…éƒ¨ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨<code>function ajax</code>æ¥å£°æ˜å‡½æ•°ï¼Œè€Œä¸æ˜¯ä½¿ç”¨<code>declare function ajax</code>ã€‚ç±»ä¼¼çš„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <code>const</code>, <code>class</code>, <code>enum</code>ç­‰è¯­å¥&#96;</p><ul><li>åµŒå¥—çš„å‘½åç©ºé—´</li></ul><p>ä½¿ç”¨åœºæ™¯ï¼š è¯¸å¦‚ jQuery.fn.extend({})</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">declare</span> <span class="token keyword">namespace</span> jQuery <span class="token punctuation">&#123;</span>  <span class="token keyword">function</span> <span class="token function">ajax</span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> settings<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>  <span class="token keyword">namespace</span> fn <span class="token punctuation">&#123;</span>    <span class="token keyword">function</span> <span class="token function">extend</span><span class="token punctuation">(</span>object<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><ul><li>å½“ç„¶ä½ ä¹Ÿå¯ä»¥è¿™æ ·å†™ï¼š</li></ul><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// è¿™æ ·å†™æœ‰å¾ˆå¤šå±€é™æ€§ï¼Œ æ¯”å¦‚ jQueryä¸ä»…ä»…æœ‰ fnå±æ€§çš„æ—¶å€™</span><span class="token keyword">declare</span> <span class="token keyword">namespace</span> jQuery<span class="token punctuation">.</span>fn <span class="token punctuation">&#123;</span>  <span class="token keyword">function</span> <span class="token function">extend</span><span class="token punctuation">(</span>object<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="typeå’Œinterfaceå¦‚ä½•æŠ‰æ‹©ï¼Ÿ"><a href="#typeå’Œinterfaceå¦‚ä½•æŠ‰æ‹©ï¼Ÿ" class="headerlink" title="typeå’Œinterfaceå¦‚ä½•æŠ‰æ‹©ï¼Ÿ"></a><code>type</code>å’Œ<code>interface</code>å¦‚ä½•æŠ‰æ‹©ï¼Ÿ</h3><p>æ¨èä»»ä½•æ—¶å€™éƒ½æ˜¯ç”¨<code>type</code>ï¼Œ<code>type</code>ä½¿ç”¨èµ·æ¥æ›´åƒä¸€ä¸ªå˜é‡ï¼Œä¸<code>interface</code>ç›¸æ¯”ï¼Œ<code>type</code>çš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p><ul><li>è¡¨è¾¾åŠŸèƒ½æ›´å¼ºå¤§ï¼Œä¸å±€é™äº<code>object/class/function</code></li><li>è¦æ‰©å±•å·²æœ‰<code>type</code>éœ€è¦åˆ›å»ºæ–°<code>type</code>ï¼Œä¸å¯ä»¥é‡å</li><li>æ”¯æŒæ›´å¤æ‚çš„ç±»å‹æ“ä½œ</li></ul><p>åŸºæœ¬ä¸Šæ‰€æœ‰ç”¨<code>interface</code>è¡¨è¾¾çš„ç±»å‹éƒ½æœ‰å…¶ç­‰ä»·çš„<code>type</code>è¡¨è¾¾ã€‚</p><h3 id="ç»™å‡½æ•°æ·»åŠ å±æ€§ç”³æ˜"><a href="#ç»™å‡½æ•°æ·»åŠ å±æ€§ç”³æ˜" class="headerlink" title="ç»™å‡½æ•°æ·»åŠ å±æ€§ç”³æ˜"></a>ç»™å‡½æ•°æ·»åŠ å±æ€§ç”³æ˜</h3><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">interface</span> <span class="token class-name">FuncWithAttachment</span> <span class="token punctuation">&#123;</span>  <span class="token punctuation">(</span>param<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>  someProperty<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">const</span> testFunc<span class="token operator">:</span> <span class="token function-variable function">FuncWithAttachment</span> <span class="token operator">=</span> <span class="token punctuation">(</span>param<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">testFunc</span><span class="token punctuation">(</span><span class="token string">'mike'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æœ‰ç±»å‹æé†’</span>testFunc<span class="token punctuation">.</span>someProperty <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// æœ‰ç±»å‹æé†’</span></code></pre><p>ç­‰ä»·çš„<strong>å£°æ˜åˆå¹¶</strong>å†™æ³•:</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// ç»„åˆå¤šä¸ªå£°æ˜è¯­å¥ï¼Œå®ƒä»¬ä¸ä¼šäº§ç”Ÿå†²çª</span><span class="token keyword">type</span> <span class="token class-name">FuncWithAttachment</span> <span class="token operator">=</span> <span class="token punctuation">(</span>param<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">boolean</span><span class="token punctuation">;</span><span class="token keyword">type</span> <span class="token class-name">FuncWithAttachment</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  someProperty<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><h3 id="æšä¸¾ç±»å‹å£°æ˜åŠç±»å‹ä½¿ç”¨"><a href="#æšä¸¾ç±»å‹å£°æ˜åŠç±»å‹ä½¿ç”¨" class="headerlink" title="æšä¸¾ç±»å‹å£°æ˜åŠç±»å‹ä½¿ç”¨"></a>æšä¸¾ç±»å‹å£°æ˜åŠç±»å‹ä½¿ç”¨</h3><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// è”åˆç±»å‹</span><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> <span class="token string">'a'</span> <span class="token operator">|</span> <span class="token string">'b'</span> <span class="token operator">|</span> <span class="token string">'c'</span><span class="token punctuation">;</span><span class="token comment">// æšä¸¾ç±»å‹</span><span class="token keyword">enum</span> <span class="token constant">A</span> <span class="token punctuation">&#123;</span>  <span class="token string">'a'</span> <span class="token operator">=</span> <span class="token string">'a'</span><span class="token punctuation">,</span>  <span class="token string">'b'</span> <span class="token operator">=</span> <span class="token string">'b'</span><span class="token punctuation">,</span>  <span class="token string">'c'</span> <span class="token operator">=</span> <span class="token string">'c'</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span></code></pre><blockquote><p><strong>æ³¨æ„ (type)A ç­‰ä»· keyof typeof (enum çš„ keys)Aï¼Œå¦‚æœæƒ³ä½¿ç”¨ (enum çš„ values çš„è”åˆç±»å‹) ç›´æ¥ä½¿ç”¨ A å³å¯</strong></p></blockquote><h3 id="æ³›å‹çš„å…¶ä»–ä½¿ç”¨åœºæ™¯"><a href="#æ³›å‹çš„å…¶ä»–ä½¿ç”¨åœºæ™¯" class="headerlink" title="æ³›å‹çš„å…¶ä»–ä½¿ç”¨åœºæ™¯"></a>æ³›å‹çš„å…¶ä»–ä½¿ç”¨åœºæ™¯</h3><p><code>åˆ—ä¸¾é™¤äº†æ³›å‹å‡½æ•°å¤–çš„ä¸€äº›å¸¸è§ä½¿ç”¨åœºæ™¯ï¼š</code></p><ul><li>æ¥å£è¿”å›æ•°æ®ç±»å‹çº¦æŸ</li></ul><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// æœ‰è¿™ä¹ˆä¸€ä¸ª interface ,æ˜¾ç„¶ï¼Œ å¾ˆå¤šæ¥å£è¿”å›æ•°æ®éƒ½æ˜¯è¿™ç§ç»“æ„ï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨äº† æ³›å‹çº¦æŸ</span><span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">A</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span></span> <span class="token punctuation">&#123;</span>  page<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>  size<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>  results<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  total<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token punctuation">&#123;</span>  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  age<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token generic-function"><span class="token function">request</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&lt;</span><span class="token constant">B</span><span class="token operator">>></span></span></span><span class="token punctuation">(</span><span class="token string">'/api/xx'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><ul><li><code>Promise</code> ç±»å‹</li></ul><p>åœ¨åšå¼‚æ­¥æ“ä½œæ—¶æˆ‘ä»¬ç»å¸¸ä½¿ç”¨ <code>async</code> å‡½æ•°ï¼Œå‡½æ•°è°ƒç”¨æ—¶ä¼š <code>return</code> ä¸€ä¸ª <code>Promise</code> å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ <code>then</code> æ–¹æ³•æ·»åŠ å›è°ƒå‡½æ•°ã€‚</p><p><code>Promise</code> æ˜¯ä¸€ä¸ªæ³›å‹ç±»å‹ï¼Œ<code>T</code> æ³›å‹å˜é‡ç”¨äºç¡®å®šä½¿ç”¨ <code>then</code> æ–¹æ³•æ—¶æ¥æ”¶çš„ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼ˆ<code>onfulfilled</code>ï¼‰çš„å‚æ•°ç±»å‹ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// æŸ props æ¥æ”¶å¼‚æ­¥å¤„ç†å‡½æ•°</span>onTaskRequest<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>args<span class="token operator">:</span> <span class="token constant">API</span><span class="token punctuation">.</span><span class="token constant">X</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">API</span><span class="token punctuation">.</span><span class="token constant">X</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span></code></pre><ul><li><code>event</code> äº‹ä»¶ç±»å‹</li></ul><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// click ä½¿ç”¨ React.MouseEvent åŠ  dom ç±»å‹çš„æ³›å‹</span><span class="token comment">// HTMLInputElement ä»£è¡¨ inputæ ‡ç­¾ å¦å¤–ä¸€ä¸ªå¸¸ç”¨çš„æ˜¯ HTMLDivElement</span><span class="token keyword">const</span> <span class="token function-variable function">onClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> React<span class="token punctuation">.</span>MouseEvent<span class="token operator">&lt;</span>HTMLInputElement<span class="token operator">></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><ul><li>ä½œä¸ºç»„ä»¶ <code>Props</code> åŠ <code>hooks</code> å‚æ•°</li></ul><pre class="language-tsx" data-language="tsx"><code class="language-tsx"><span class="token keyword">interface</span> <span class="token class-name">FnComProps</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token keyword">const</span> FnCom<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token constant">FC</span><span class="token operator">&lt;</span>FnComProps<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text">ç»„ä»¶</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><p>â€¦</p><h3 id="åŠ¨æ€æ›´æ–°-Object-çš„-key"><a href="#åŠ¨æ€æ›´æ–°-Object-çš„-key" class="headerlink" title="åŠ¨æ€æ›´æ–° Object çš„ key"></a>åŠ¨æ€æ›´æ–° <code>Object</code> çš„ <code>key</code></h3><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>  age<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>  <span class="token punctuation">[</span>k<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span> <span class="token comment">// æŒ‡å®š k å¯ä»¥ä¸ºä»»æ„çš„ string</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><h3 id="åå‘ä½¿ç”¨-typeof"><a href="#åå‘ä½¿ç”¨-typeof" class="headerlink" title="åå‘ä½¿ç”¨ typeof"></a>åå‘ä½¿ç”¨ typeof</h3><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// NewsCard ç»„ä»¶æ¥æ”¶çš„ props ç±»å‹</span><span class="token keyword">interface</span> <span class="token class-name">NewsCardProps</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// ficusService.getNews: (params: API.NewsQuery) => Promise&lt;API.PaginationNewsResult&lt;API.News>></span>  <span class="token comment">// é€šè¿‡ typeof åå‘è·å–ç±»å‹</span>  provider<span class="token operator">:</span> <span class="token keyword">typeof</span> ficusService<span class="token punctuation">.</span>getNews<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="å·§ç”¨Partial"><a href="#å·§ç”¨Partial" class="headerlink" title="å·§ç”¨Partial"></a>å·§ç”¨<code>Partial</code></h3><p>ä½¿ç”¨ <code>Partial</code> å°†æ‰€æœ‰çš„ <code>props</code> å±æ€§éƒ½å˜ä¸ºå¯é€‰å€¼ã€‚â€”â€” è¿™å¯¹æˆ‘ä»¬åœ¨æ¥å£å®šä¹‰æ—¶å¾ˆæœ‰ç”¨</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">Partial<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span></span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// åœ¨ A æ¥å£ä¸­, æˆ‘ä»¬ä½¿ç”¨ interface X å®Œæˆäº†å¯¹æŸæ•°æ®çš„è¿”å›ç±»å‹å®šä¹‰ã€‚</span><span class="token comment">// åœ¨ B æ¥å£ä¸­, æˆ‘ä»¬å¯èƒ½ä¼šå¯¹ X ä¸­å®šä¹‰çš„å­—æ®µçš„éƒ¨åˆ†å­—æ®µè¿›è¡Œæ›´æ–°ï¼Œ ä½†åœ¨ A æ¥å£ ä¸ºå¿…é€‰å­—æ®µï¼Œ B æ¥å£ä¸ºå¯é€‰</span><span class="token keyword">export</span> <span class="token keyword">const</span> conditionService <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">async</span> <span class="token function">query</span><span class="token punctuation">(</span>query<span class="token operator">:</span> Query<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">get</span><span class="token generic class-name"><span class="token operator">&lt;</span>PageResult<span class="token operator">&lt;</span>ConditionTemp<span class="token operator">>></span></span></span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/v1.0/condition</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>      params<span class="token operator">:</span> query<span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token keyword">async</span> <span class="token function">update</span><span class="token punctuation">(</span>data<span class="token operator">:</span> Partial<span class="token operator">&lt;</span>ConditionTemp<span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/v1.0/condition</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><h3 id="ä¸º-Window-æ·»åŠ å‚æ•°"><a href="#ä¸º-Window-æ·»åŠ å‚æ•°" class="headerlink" title="ä¸º Window æ·»åŠ å‚æ•°"></a>ä¸º Window æ·»åŠ å‚æ•°</h3><p>ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æ—¶ï¼ˆgaï¼‰,ga æ˜¯å…¨å±€æ–¹æ³•ï¼Œåœ¨ä½¿ç”¨æ—¶ä¼šæç¤ºâ€ ç±»å‹â€œWindowâ€ä¸Šä¸å­˜åœ¨å±æ€§â€œgaâ€</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">interface</span> <span class="token class-name">Window</span> <span class="token punctuation">&#123;</span>  ga<span class="token operator">:</span> <span class="token punctuation">(</span>    command<span class="token operator">:</span> <span class="token string">'send'</span><span class="token punctuation">,</span>    hitType<span class="token operator">:</span> <span class="token string">'event'</span> <span class="token operator">|</span> <span class="token string">'pageview'</span><span class="token punctuation">,</span>    fieldsObject<span class="token operator">:</span> GAFieldsObject <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">,</span>  <span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">;</span>  <span class="token function-variable function">reloadAuthorized</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>ä¸æƒ³åœ¨ Window ä¸­å¢åŠ ï¼Œä½†æ˜¯æƒ³è¦å…¨å±€ä½¿ç”¨ï¼Œæ¯”å¦‚é€šè¿‡ define æ³¨å…¥çš„å‚æ•°ï¼Œæˆ‘ä»¬é€šè¿‡ <code>declare</code> å…³é”®å­—åœ¨ <code>/src/typings.d.ts</code> æ³¨å…¥ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">declare</span> <span class="token keyword">const</span> <span class="token constant">REACT_APP_ENV</span><span class="token operator">:</span> <span class="token string">'test'</span> <span class="token operator">|</span> <span class="token string">'dev'</span> <span class="token operator">|</span> <span class="token string">'pre'</span> <span class="token operator">|</span> <span class="token boolean">false</span><span class="token punctuation">;</span></code></pre><h3 id="è£…åŒ…æ²¡æœ‰ç›¸å¯¹åº”çš„-types"><a href="#è£…åŒ…æ²¡æœ‰ç›¸å¯¹åº”çš„-types" class="headerlink" title="è£…åŒ…æ²¡æœ‰ç›¸å¯¹åº”çš„ @types"></a>è£…åŒ…æ²¡æœ‰ç›¸å¯¹åº”çš„ <code>@types</code></h3><ul><li><p>å®‰è£…åŒ…å¯¹åº”çš„<code>@types</code>æ–‡ä»¶åŒ…ï¼Œå¦‚<code>@types/react</code>ã€<code>@types/react-dom</code></p></li><li><p>è‡ªå®šä¹‰å…¶ä¸º<code>any</code>ã€‚</p></li></ul><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'xxx'</span><span class="token punctuation">;</span> <span class="token comment">// d.ts</span><span class="token keyword">import</span> xxx <span class="token keyword">from</span> <span class="token string">'xxx'</span><span class="token punctuation">;</span> <span class="token comment">// tsx</span></code></pre><h3 id="ts-ignore"><a href="#ts-ignore" class="headerlink" title="@ts-ignore"></a>@ts-ignore</h3><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// @ts-ignore</span>xxx<span class="token punctuation">;</span></code></pre><p>é‡åˆ°åŠ¨æ€æ€§æ¯”è¾ƒå¼ºçš„ä»£ç ï¼Œä¸å¦¨ä½¿ç”¨ <code>as unknown as XXX</code></p><h3 id="typescript-å…¶ä»–ä½¿ç”¨å§¿åŠ¿"><a href="#typescript-å…¶ä»–ä½¿ç”¨å§¿åŠ¿" class="headerlink" title="typescript å…¶ä»–ä½¿ç”¨å§¿åŠ¿"></a><a href="https://ts.xcatliu.com/basics/declaration-files.html">typescript å…¶ä»–ä½¿ç”¨å§¿åŠ¿</a></h3>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> TypeScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> typescript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•æ„å»ºä½ æƒ³è¦çš„æ­£åˆ™è¡¨è¾¾å¼?</title>
      <link href="/share/regular-expression/"/>
      <url>/share/regular-expression/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="ä»€ä¹ˆæ˜¯æ­£åˆ™è¡¨è¾¾å¼"><a href="#ä»€ä¹ˆæ˜¯æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="ä»€ä¹ˆæ˜¯æ­£åˆ™è¡¨è¾¾å¼"></a>ä»€ä¹ˆæ˜¯æ­£åˆ™è¡¨è¾¾å¼</h3><p>æ­£åˆ™è¡¨è¾¾å¼<code>(regular expression)</code>æè¿°äº†ä¸€ç§å­—ç¬¦ä¸²åŒ¹é…çš„æ¨¡å¼<code>(pattern)</code>ï¼Œå¯ä»¥ç”¨æ¥æ£€æŸ¥ä¸€ä¸ªä¸²æ˜¯å¦å«æœ‰æŸç§å­ä¸²ã€å°†åŒ¹é…çš„å­ä¸²æ›¿æ¢æˆ–è€…ä»æŸä¸ªä¸²ä¸­å–å‡ºç¬¦åˆæŸä¸ªæ¡ä»¶çš„å­ä¸²ç­‰ã€‚</p><blockquote><p>æ­£åˆ™è¡¨è¾¾å¼æ˜¯ç”±æ™®é€šå­—ç¬¦ï¼ˆä¾‹å¦‚å­—ç¬¦ a åˆ° zï¼‰ä»¥åŠç‰¹æ®Šå­—ç¬¦ï¼ˆç§°ä¸ºâ€å…ƒå­—ç¬¦â€ï¼‰ç»„æˆçš„æ–‡å­—æ¨¡å¼ã€‚æ¨¡å¼æè¿°åœ¨æœç´¢æ–‡æœ¬æ—¶è¦åŒ¹é…çš„ä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ä¸²ã€‚æ­£åˆ™è¡¨è¾¾å¼ä½œä¸ºä¸€ä¸ªæ¨¡æ¿ï¼Œå°†æŸä¸ªå­—ç¬¦æ¨¡å¼ä¸æ‰€æœç´¢çš„å­—ç¬¦ä¸²è¿›è¡ŒåŒ¹é…ã€‚</p></blockquote><span id="more"></span><h3 id="æ­£åˆ™è¡¨è¾¾å¼çš„åˆ›å»º"><a href="#æ­£åˆ™è¡¨è¾¾å¼çš„åˆ›å»º" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼çš„åˆ›å»º"></a>æ­£åˆ™è¡¨è¾¾å¼çš„åˆ›å»º</h3><p>æ­£åˆ™è¡¨è¾¾å¼æ˜¯å¼•ç”¨æ•°æ®ç±»å‹ï¼Œåˆç§°è§„åˆ™è¡¨è¾¾å¼ã€‚å¯ä»¥é€šè¿‡å†…ç½®æ„é€ å‡½æ•°åˆ›å»ºï¼Œäº¦å¯ä»¥é€šè¿‡å­—é¢é‡æ–¹å¼åˆ›å»ºã€‚</p><h4 id="å­—é¢é‡æ–¹å¼åˆ›å»º"><a href="#å­—é¢é‡æ–¹å¼åˆ›å»º" class="headerlink" title="å­—é¢é‡æ–¹å¼åˆ›å»º"></a>å­—é¢é‡æ–¹å¼åˆ›å»º</h4><blockquote><p>è¯­æ³•ï¼š<code>const reg = /xxx/</code>åŒæ–œæ åŒ…å¤¹çš„å†…å®¹å°±æ˜¯æ­£åˆ™è¡¨è¾¾å¼ã€‚</p></blockquote><h4 id="å†…ç½®æ„é€ å‡½æ•°åˆ›å»º"><a href="#å†…ç½®æ„é€ å‡½æ•°åˆ›å»º" class="headerlink" title="å†…ç½®æ„é€ å‡½æ•°åˆ›å»º"></a>å†…ç½®æ„é€ å‡½æ•°åˆ›å»º</h4><blockquote><p>è¯­æ³•ï¼š<code>const reg = new RegExp(&#39;xxx&#39;)</code> é€šè¿‡<code>new</code>å…³é”®å­—åˆ›å»ºæ­£åˆ™å®ä¾‹ã€‚</p></blockquote><p><code>soï¼š</code>å¦‚æœå†™ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼<code>xxx</code>ï¼Œæ¥å…ˆäº†è§£æ­£åˆ™è¡¨è¾¾å¼çš„ä¸€äº›æ¯”è¾ƒç‰¹æ®Šçš„ç¬¦å·æ„ä¹‰æ‰€åœ¨ï¼Ÿ</p><h3 id="å…ƒå­—ç¬¦"><a href="#å…ƒå­—ç¬¦" class="headerlink" title="å…ƒå­—ç¬¦"></a>å…ƒå­—ç¬¦</h3><h4 id="då‡ºç°ä¸€ä¸ªæ•°å­—"><a href="#då‡ºç°ä¸€ä¸ªæ•°å­—" class="headerlink" title="\då‡ºç°ä¸€ä¸ªæ•°å­—"></a><code>\d</code>å‡ºç°ä¸€ä¸ªæ•°å­—</h4><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'sdasdna126sdfd6550sad'</span><span class="token punctuation">;</span><span class="token keyword">const</span> res <span class="token operator">=</span> reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></code></pre><p>å…¶ä»–å­—ç¬¦åŒç†ï¼Œå°±ä¸å•ç‹¬å†™ä¾‹å­äº†ï¼Œé€šè¿‡<code>test</code>åˆ™è¿”å›<code>true</code>.</p><h4 id="Då‡ºç°ä¸€ä¸ªéæ•°å­—"><a href="#Då‡ºç°ä¸€ä¸ªéæ•°å­—" class="headerlink" title="\Då‡ºç°ä¸€ä¸ªéæ•°å­—"></a><code>\D</code>å‡ºç°ä¸€ä¸ªéæ•°å­—</h4><h4 id="så‡ºç°ä¸€ä¸ªç©ºæ ¼"><a href="#så‡ºç°ä¸€ä¸ªç©ºæ ¼" class="headerlink" title="\så‡ºç°ä¸€ä¸ªç©ºæ ¼"></a><code>\s</code>å‡ºç°ä¸€ä¸ªç©ºæ ¼</h4><h4 id="Så‡ºç°ä¸€ä¸ªéç©ºæ ¼"><a href="#Så‡ºç°ä¸€ä¸ªéç©ºæ ¼" class="headerlink" title="\Så‡ºç°ä¸€ä¸ªéç©ºæ ¼"></a><code>\S</code>å‡ºç°ä¸€ä¸ªéç©ºæ ¼</h4><h4 id="wå‡ºç°ä¸€ä¸ªæ•°å­—å­—æ¯ä¸‹åˆ’çº¿"><a href="#wå‡ºç°ä¸€ä¸ªæ•°å­—å­—æ¯ä¸‹åˆ’çº¿" class="headerlink" title="\wå‡ºç°ä¸€ä¸ªæ•°å­—å­—æ¯ä¸‹åˆ’çº¿"></a><code>\w</code>å‡ºç°ä¸€ä¸ªæ•°å­—å­—æ¯ä¸‹åˆ’çº¿</h4><h4 id="Wå‡ºç°ä¸€ä¸ªéæ•°å­—å­—æ¯ä¸‹åˆ’çº¿"><a href="#Wå‡ºç°ä¸€ä¸ªéæ•°å­—å­—æ¯ä¸‹åˆ’çº¿" class="headerlink" title="\Wå‡ºç°ä¸€ä¸ªéæ•°å­—å­—æ¯ä¸‹åˆ’çº¿"></a><code>\W</code>å‡ºç°ä¸€ä¸ªéæ•°å­—å­—æ¯ä¸‹åˆ’çº¿</h4><h4 id="å‡ºç°ä¸€ä¸ªé™¤äº†æ¢è¡Œä»¥å¤–çš„å­—ç¬¦"><a href="#å‡ºç°ä¸€ä¸ªé™¤äº†æ¢è¡Œä»¥å¤–çš„å­—ç¬¦" class="headerlink" title=".å‡ºç°ä¸€ä¸ªé™¤äº†æ¢è¡Œä»¥å¤–çš„å­—ç¬¦"></a><code>.</code>å‡ºç°ä¸€ä¸ªé™¤äº†æ¢è¡Œä»¥å¤–çš„å­—ç¬¦</h4><p>å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œç§°ä¹‹ä¸ºä»»æ„å­—ç¬¦ä¹Ÿä¸ä¸ºè¿‡ã€‚</p><h3 id="é™å®šç¬¦"><a href="#é™å®šç¬¦" class="headerlink" title="é™å®šç¬¦"></a>é™å®šç¬¦</h3><h4 id=""><a href="#" class="headerlink" title="*"></a><code>*</code></h4><blockquote><p>å‡ºç°çš„æ¬¡æ•°ä¸º<code>0 - infinite</code>(æ­£æ— ç©·)ï¼Œ<code>eg.</code> <code>/a*/</code>è¡¨ç¤ºå‡ºç° 0 - æ— ç©·æ¬¡<del>ï¼ˆå› ä¸ºé™å®šçš„æ¬¡æ•°æœ€ä½å¯ä»¥æ˜¯ 0ï¼Œæ‰€ä»¥ç†è§£ä¸ºæ‰€æœ‰å­—ç¬¦äº¦å¯ï¼‰ğŸ˜‚ğŸ˜‚ğŸ˜‚</del></p></blockquote><h4 id="-1"><a href="#-1" class="headerlink" title="+"></a><code>+</code></h4><blockquote><p>å‡ºç°çš„æ¬¡æ•°ä¸º<code>1 - infinite</code>(æ­£æ— ç©·)ï¼Œ<code>eg.</code> <code>/\d+/</code>è¡¨ç¤ºæ•°å­—å‡ºç°ä¸€æ¬¡ä»¥ä¸Š</p></blockquote><h4 id="-2"><a href="#-2" class="headerlink" title="?"></a><code>?</code></h4><blockquote><p>å‡ºç°çš„æ¬¡æ•°ä¸º<code>0 - 1</code>ï¼Œ<code>eg:</code> <code>/\d?/</code>å¯ä»¥ä¸å‡ºç°æ•°å­—ï¼Œä¹Ÿå¯ä»¥å‡ºç°æ•°å­—ï¼ˆä»…åŒ¹é…å‡ºç°çš„ç¬¬ä¸€æ¬¡ï¼‰</p></blockquote><h4 id="n-å’Œ-n"><a href="#n-å’Œ-n" class="headerlink" title="{n} å’Œ {n,}"></a><code>&#123;n&#125; å’Œ &#123;n,&#125;</code></h4><blockquote><p>å•ç±»å‹å­—ç¬¦è¿ç»­å‡ºç°<code>n</code>ä¸ªï¼Œ<code>eg.</code> <code>/\d&#123;3&#125;/</code>è¡¨ç¤ºè¿ç»­ä¸‰ä¸ªæˆ–ä¸‰ä¸ªä»¥ä¸Šæ•°å­—åœ¨ä¸€å— ï¼Œåªè¦å‡ºç°ä¸€æ¬¡å³ä¸º<code>true</code>.</p></blockquote><h4 id="n-m"><a href="#n-m" class="headerlink" title="{n,m}"></a><code>&#123;n,m&#125;</code></h4><blockquote><p>å•ç±»å‹å­—ç¬¦è¿ç»­å‡ºç°<strong>è‡³å°‘</strong><code>n - m</code>æ¬¡ï¼ˆæ„å‘³ç€ä¹Ÿå¯ä»¥è¶…è¿‡ï¼‰ï¼Œ<code>eg.</code></p></blockquote><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'s354ada1sdf22515553sg4d5sf'</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d&#123;5,7&#125;</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></code></pre><p>ä¼°è®¡æœ‰äº›ç«¥é‹å·²ç»è’™åœˆäº†ï¼Œæ—¢ç„¶éƒ½æ˜¯è‡³å°‘è¿™ä¹ˆå¤šæ¬¡ï¼Œé‚£å®ƒä»¬ç›´æ¥æœ‰å•¥åŒºåˆ«ï¼Ÿæ¯”å¦‚<code>&#123;n,&#125; &#123;n,m&#125;</code>ï¼Œåˆè¯¥æ€ä¹ˆä½¿ç”¨ï¼Ÿï¼Œåˆ«æ€¥æ¥å…ˆçœ‹<strong>è¾¹ç•Œç¬¦</strong>ï¼š</p><h3 id="è¾¹ç•Œç¬¦"><a href="#è¾¹ç•Œç¬¦" class="headerlink" title="è¾¹ç•Œç¬¦"></a>è¾¹ç•Œç¬¦</h3><p>å†™äº†è¾¹ç•Œç¬¦åï¼Œåœ¨ä½¿ç”¨<code>test</code>æ£€æµ‹æ—¶ï¼Œæ­é…é™å®šç¬¦ï¼Œå°±å¯å®ç°åŒºåˆ†<code>&#123;n, m&#125; å’Œ &#123;n, &#125;</code>ï¼Œå‰è€…ä»£è¡¨æ•´ä¸ªé•¿åº¦åªèƒ½åœ¨<code>n - m</code>ï¼Œåè€…æ˜¯é•¿åº¦è‡³å°‘ä¸º<code>n</code>.</p><h4 id="ä»¥-å¼€å¤´"><a href="#ä»¥-å¼€å¤´" class="headerlink" title="^ ä»¥...å¼€å¤´"></a><code>^ ä»¥...å¼€å¤´</code></h4><h4 id="ä»¥-ç»“å°¾"><a href="#ä»¥-ç»“å°¾" class="headerlink" title="$ ä»¥...ç»“å°¾"></a><code>$ ä»¥...ç»“å°¾</code></h4><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> reg1 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\d$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span><span class="token keyword">const</span> str1 <span class="token operator">=</span> <span class="token string">'1'</span><span class="token punctuation">;</span><span class="token keyword">const</span> str2 <span class="token operator">=</span> <span class="token string">'123'</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg1<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg1<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>str2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//falseï¼ˆ\dåªèƒ½å‡ºç°ä¸€ä¸ªï¼‰</span><span class="token keyword">const</span> reg2 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\w&#123;4,9&#125;$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span><span class="token keyword">const</span> str3 <span class="token operator">=</span> <span class="token string">'_as123'</span><span class="token punctuation">;</span><span class="token keyword">const</span> str4 <span class="token operator">=</span> <span class="token string">'_as1234567'</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg2<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>str3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg2<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>str4<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//falseï¼ˆæŒ‡å®šäº†\w å‡ºç°4-9æ¬¡ é•¿åº¦  å­—ç¬¦ä¸²é•¿åº¦ä¸èƒ½è¶…è¿‡ 9ï¼ŒåŒæ—¶ åªèƒ½æ˜¯\wå­—ç¬¦ï¼‰</span></code></pre><h3 id="ç‰¹æ®Šç¬¦å·"><a href="#ç‰¹æ®Šç¬¦å·" class="headerlink" title="ç‰¹æ®Šç¬¦å·"></a>ç‰¹æ®Šç¬¦å·</h3><h4 id="è½¬è¯‘ç¬¦"><a href="#è½¬è¯‘ç¬¦" class="headerlink" title="\è½¬è¯‘ç¬¦"></a><code>\</code>è½¬è¯‘ç¬¦</h4><p>æ„æŒ‡æŠŠ <strong>åŸæœ¬æ²¡æœ‰ç‰¹æ®Šå«ä¹‰çš„ä¸œè¥¿ åŠ ä¸Š \å°±æ²¡äº†ç‰¹æ®Šå«ä¹‰</strong>ï¼›<del>æŠŠåŸæœ¬å°±æœ‰ç‰¹æ®Šå«ä¹‰çš„ä¸œè¥¿åŠ ä¸Š<code>\</code>å°±æ²¡æœ‰ç‰¹æ®Šå«ä¹‰äº†</del></p><h4 id="æŠŠä¸€å—ä¸œè¥¿å½“æˆæ•´ä½“"><a href="#æŠŠä¸€å—ä¸œè¥¿å½“æˆæ•´ä½“" class="headerlink" title="()æŠŠä¸€å—ä¸œè¥¿å½“æˆæ•´ä½“"></a><code>()</code>æŠŠä¸€å—ä¸œè¥¿å½“æˆæ•´ä½“</h4><h4 id="æˆ–"><a href="#æˆ–" class="headerlink" title="|æˆ–"></a><code>|</code>æˆ–</h4><blockquote><p>æ³¨æ„ï¼š<code>||</code>é€»è¾‘æˆ– <code>|</code>å ä½æˆ– ä¸¤è€…çš„åŒºåˆ«</p></blockquote><p><code>eg.</code> ç®€ç‰ˆé‚®ç®±<code>/^\w&#123;6,12&#125;@(qq|163|sina)\.(com|cn|net)/</code></p><h4 id="å–ä¸­é—´ä»»æ„ä¸€ä¸ª"><a href="#å–ä¸­é—´ä»»æ„ä¸€ä¸ª" class="headerlink" title="[]å–ä¸­é—´ä»»æ„ä¸€ä¸ª"></a><code>[]</code>å–ä¸­é—´ä»»æ„<strong>ä¸€ä¸ª</strong></h4><p>åªèƒ½å–ä¸­æ‹¬å·å†…çš„ä¸€ä¸ªå­—ç¬¦ï¼Œæ³¨æ„å­—ç¬¦é•¿åº¦ï¼Œ<code>eg.</code></p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[abcd]$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'a'</span><span class="token punctuation">;</span><span class="token keyword">const</span> str2 <span class="token operator">=</span> <span class="token string">'abcd'</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>str2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span></code></pre><h4 id="åˆ°-è‡³"><a href="#åˆ°-è‡³" class="headerlink" title="-åˆ°..è‡³.."></a><code>-</code>åˆ°..è‡³..</h4><p><code>eg. </code> å¯¹äºæ­£åˆ™ <code>/^[a-zA-Z0-9_]$/</code>ï¼Œå­—ç¬¦<code>M</code>å°±ç¬¦åˆ.</p><h4 id="é"><a href="#é" class="headerlink" title="[^]é"></a><code>[^]</code>é</h4><p>å¯¹<code>[]</code>çš„æ­£åˆ™å–éï¼Œ<code>eg. /^[^a-z]$/</code>ï¼ŒæŒ‡é<code>a-z</code>çš„å­—ç¬¦ï¼Œé•¿åº¦ä¸º 1.</p><p>å†ç„¶åè¦è¯´çš„å°±æ˜¯æ ‡è¯†ç¬¦äº†ï¼Œå®ƒå†™åœ¨<code>//</code>çš„åé¢ï¼Œå…·ä½“ä½¿ç”¨å¦‚ä¸‹ï¼š</p><h3 id="æ ‡è¯†ç¬¦"><a href="#æ ‡è¯†ç¬¦" class="headerlink" title="æ ‡è¯†ç¬¦"></a>æ ‡è¯†ç¬¦</h3><p><code>g</code>å…¨å±€åŒ¹é…ï¼Œ<code>i</code>å¿½ç•¥å¤§å°å†™ï¼Œ<code>eg.</code></p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">m</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">;</span><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">'MasnonasmsdfMasm'</span><span class="token punctuation">;</span>str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span> <span class="token string">'*'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// *asnonas*sdf*as*</span></code></pre><p>å½“ç„¶æ ‡è¯†ç¬¦ä¸ä»…ä»…æ˜¯ä¸Šé¢ä»‹ç»çš„è¿™ä¸¤ä¸ªï¼Œ<a href="https://regex101.com/">https://regex101.com/</a>å¯ä»¥åœ¨è¿™ä¸ªç½‘ç«™ä¸Šæµ‹è¯•åŠå­¦ä¹ â€¦</p><h3 id="æ­£åˆ™è¡¨è¾¾å¼åŸå‹ä¸Šçš„æ–¹æ³•"><a href="#æ­£åˆ™è¡¨è¾¾å¼åŸå‹ä¸Šçš„æ–¹æ³•" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼åŸå‹ä¸Šçš„æ–¹æ³•"></a>æ­£åˆ™è¡¨è¾¾å¼åŸå‹ä¸Šçš„æ–¹æ³•</h3><p><code>eg.</code>æ­£åˆ™è¡¨è¾¾å¼<code>reg = /xxx/</code>.</p><h4 id="å¯¹å­—ç¬¦ä¸²è¿›è¡ŒéªŒè¯"><a href="#å¯¹å­—ç¬¦ä¸²è¿›è¡ŒéªŒè¯" class="headerlink" title="å¯¹å­—ç¬¦ä¸²è¿›è¡ŒéªŒè¯"></a>å¯¹å­—ç¬¦ä¸²è¿›è¡ŒéªŒè¯</h4><p><code>reg.test(str)</code>. ç¬¦åˆè§„åˆ™å°±è¿”å›<code>true</code>å¦åˆ™è¿”å›<code>false</code>.</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">abc</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'ahsjdhaabbc'</span><span class="token punctuation">;</span><span class="token keyword">const</span> res <span class="token operator">=</span> reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span></code></pre><h4 id="æ•è·å­—ç¬¦ä¸²é‡Œé¢ç¬¦åˆè§„åˆ™çš„å†…å®¹"><a href="#æ•è·å­—ç¬¦ä¸²é‡Œé¢ç¬¦åˆè§„åˆ™çš„å†…å®¹" class="headerlink" title="æ•è·å­—ç¬¦ä¸²é‡Œé¢ç¬¦åˆè§„åˆ™çš„å†…å®¹"></a>æ•è·å­—ç¬¦ä¸²é‡Œé¢ç¬¦åˆè§„åˆ™çš„å†…å®¹</h4><p><code>reg.exec(str)</code>ç¬¬ä¸€æ¬¡æ˜¯ä»å¤´å¼€å§‹åŒ¹é…ï¼Œå¦‚æœæ‰¾åˆ°ç¬¦åˆè§„åˆ™çš„å­—ç¬¦ï¼Œé‚£ä¹ˆè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„çš„ç¬¬ 0 é¡¹å°±æ˜¯æ•è·åˆ°çš„ç¬¦åˆè§„åˆ™çš„å­—ç¬¦ï¼Œç¬¬äºŒæ¬¡åº”è¯¥ä»ç¬¬ä¸€æ¬¡ç»“æŸçš„ä½ç½®å¼€å§‹æ•è·ï¼Œå¦‚æœæ‰¾åˆ°ä¹Ÿæ˜¯è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ç¬¦åˆè§„åˆ™çš„å­—ç¬¦ï¼Œå°±è¿”å›ä¸€ä¸ª<code>null</code>ï¼Œä¸‹æ¬¡æ‰§è¡Œåˆæ˜¯ä»å¤´å¼€å§‹é‡æ–°æ•è·.<del>ï¼ˆç”¨çš„å¾ˆå°‘ï¼‰</del></p><h4 id="æ•°æ®è½¬æ¢"><a href="#æ•°æ®è½¬æ¢" class="headerlink" title="æ•°æ®è½¬æ¢"></a>æ•°æ®è½¬æ¢</h4><p><code>reg.toString()</code>å°†æ­£åˆ™è¡¨è¾¾å¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</p><h3 id="å­—ç¬¦ä¸²ä¸æ­£åˆ™ç›¸å…³æ–¹æ³•"><a href="#å­—ç¬¦ä¸²ä¸æ­£åˆ™ç›¸å…³æ–¹æ³•" class="headerlink" title="å­—ç¬¦ä¸²ä¸æ­£åˆ™ç›¸å…³æ–¹æ³•"></a>å­—ç¬¦ä¸²ä¸æ­£åˆ™ç›¸å…³æ–¹æ³•</h3><h4 id="å­—ç¬¦ä¸²åŸºäºæ­£åˆ™å®Œæˆæ›¿æ¢"><a href="#å­—ç¬¦ä¸²åŸºäºæ­£åˆ™å®Œæˆæ›¿æ¢" class="headerlink" title="å­—ç¬¦ä¸²åŸºäºæ­£åˆ™å®Œæˆæ›¿æ¢"></a>å­—ç¬¦ä¸²åŸºäºæ­£åˆ™å®Œæˆæ›¿æ¢</h4><p><code>str.replace(regexp|substr, newSubStr|function)</code>. <code>regï¼š</code>ä¸€ä¸ª<code>RegExp</code>å¯¹è±¡æˆ–è€…å…¶å­—é¢é‡ï¼Œè¯¥æ­£åˆ™æ‰€åŒ¹é…çš„å†…å®¹ä¼šè¢«ç¬¬äºŒä¸ªå‚æ•°çš„è¿”å›å€¼æ›¿æ¢æ‰<del>ï¼ˆè¯¥æ–¹æ³•çš„å…·ä½“å‚æ•°ä½¿ç”¨è¯·å‚é˜…æ–‡æ¡£ï¼Œè¿™é‡Œä»…ä»‹ç»æ­£åˆ™ç›¸å…³ï¼‰</del></p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">m</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">;</span><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">'MasnonasmsdfMasm'</span><span class="token punctuation">;</span>str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span> <span class="token string">'*'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// *asnonas*sdf*as*</span></code></pre><p>å’Œ<code>replace</code>ç›¸è¿‘çš„è¿˜æœ‰<code>replaceAll</code>ï¼Œä¸å‰è€…å·®åˆ«å°±æ˜¯åè€…åŒ¹é…æ‰€æœ‰ç¬¦åˆæ­£åˆ™çš„å­ä¸²å¹¶æ›¿æ¢ï¼Œè€Œå‰è€…åˆ™éœ€è¦é€šè¿‡æŒ‡å®š<code>g</code>å‚æ•°å®ç°ã€‚</p><h4 id="æå–å­—ç¬¦ä¸²ä¸­ç¬¦åˆæ­£åˆ™çš„åŒ¹é…é¡¹"><a href="#æå–å­—ç¬¦ä¸²ä¸­ç¬¦åˆæ­£åˆ™çš„åŒ¹é…é¡¹" class="headerlink" title="æå–å­—ç¬¦ä¸²ä¸­ç¬¦åˆæ­£åˆ™çš„åŒ¹é…é¡¹"></a>æå–å­—ç¬¦ä¸²ä¸­ç¬¦åˆæ­£åˆ™çš„åŒ¹é…é¡¹</h4><p><code>str.match(reg)</code>è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå°†æ‰€æœ‰ç¬¦åˆçš„å­ä¸²æå–å‡ºæ¥ã€‚</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'Ma123sdf4565dsfsdf789sdf35'</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d&#123;2&#125;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ["12", "45", "65", "78", "35"]</span></code></pre><h4 id="æŸ¥æ‰¾ç¬¦åˆè§„åˆ™çš„å­—ç¬¦ä¸²å­ä¸²"><a href="#æŸ¥æ‰¾ç¬¦åˆè§„åˆ™çš„å­—ç¬¦ä¸²å­ä¸²" class="headerlink" title="æŸ¥æ‰¾ç¬¦åˆè§„åˆ™çš„å­—ç¬¦ä¸²å­ä¸²"></a>æŸ¥æ‰¾ç¬¦åˆè§„åˆ™çš„å­—ç¬¦ä¸²å­ä¸²</h4><p><code>str.search(reg)</code>æŸ¥æ‰¾ç¬¦åˆè§„åˆ™çš„å­—ç¬¦ï¼Œè¿”å›ç›¸å¯¹åº”çš„ä¸‹æ ‡ï¼Œå¦‚æœæœ‰å¤šä¸ªç¬¦åˆï¼Œé‚£ä¹ˆå°±è¿”å›ç¬¬ä¸€ä¸ªï¼Œä½œç”¨åŒ<code>indexOf</code>ï¼Œä¸è¿‡åè€…æ— æ³•ä¼ å…¥<code>reg</code>æ­£åˆ™æŸ¥æ‰¾.</p><h3 id="è´ªå©ªæ¨¡å¼å’Œéè´ªå©ªæ¨¡å¼"><a href="#è´ªå©ªæ¨¡å¼å’Œéè´ªå©ªæ¨¡å¼" class="headerlink" title="è´ªå©ªæ¨¡å¼å’Œéè´ªå©ªæ¨¡å¼"></a>è´ªå©ªæ¨¡å¼å’Œéè´ªå©ªæ¨¡å¼</h3><p>åœ¨<code>javascript</code>ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…æ–¹å¼é»˜è®¤æ˜¯è´ªå©ªæ¨¡å¼ã€‚</p><p><code>eg. </code></p><h4 id="è´ªå©ªæ¨¡å¼"><a href="#è´ªå©ªæ¨¡å¼" class="headerlink" title="è´ªå©ªæ¨¡å¼"></a>è´ªå©ªæ¨¡å¼</h4><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// æŒ‡åŒ¹é… b å¼€å¤´ï¼Œåç»­å‡ºç° 0 -ä»»æ„æ¬¡æ•°çš„ a çš„å­ä¸²</span><span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">ba*</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'baaaabab'</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['baaaa', 'ba', 'b']</span></code></pre><p>æ­£æ˜¯å› ä¸ºè´ªå©ªåŒ¹é…ï¼ˆå°½å¯èƒ½å¤šçš„åŒ¹é…ç¬¦å·æ¡ä»¶çš„å­ä¸²ï¼‰ï¼Œå¯¼è‡´äº†åŒ¹é…å‡ºçš„ç¬¬ä¸€é¡¹æ˜¯<code>baaaa</code>ï¼ˆä»å‰å‘ååŒ¹é…ï¼Œä¸€ç›´åˆ°åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²ä¸ç¬¦åˆæ¡ä»¶æ—¶åœæ­¢ï¼‰, è€Œé<code>b</code>.</p><h4 id="éè´ªå©ªæ¨¡å¼"><a href="#éè´ªå©ªæ¨¡å¼" class="headerlink" title="éè´ªå©ªæ¨¡å¼"></a>éè´ªå©ªæ¨¡å¼</h4><p>å½“ç„¶æœ‰è´ªå©ªä¹Ÿå°±æœ‰éè´ªå©ªï¼Œå¦‚ä½•æŒ‡å®šï¼Ÿ</p><blockquote><p>ä½¿ç”¨å­—ç¬¦<code>?</code>æ ‡è¯†æ­£åˆ™ä½¿ç”¨éè´ªå©ªæ¨¡å¼è¿›è¡ŒåŒ¹é…(è¿™æ˜¯<code>?</code>çš„å¦å¤–ä¸€ç§ç”¨æ³•å«ä¹‰) <del>çœ‹ä½ æ€ä¹ˆç†è§£</del></p></blockquote><p>å¯¹ä¸Šé¢ä¾‹å­çš„æ­£åˆ™æ”¹é€ ä¸€ä¸‹ï¼š</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">ba*?</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'baaaabab'</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['b', 'b', 'b']</span></code></pre><p><code>/ba*</code>ä¸ºåŸæœ‰çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œåœ¨å…¶åæ·»åŠ <code>?</code>æŒ‡æ˜éè´ªå©ªï¼ŒåŒ¹é…åˆ°çš„ç»“æœè‡ªç„¶å°±æ˜¯<code>[&#39;b&#39;, &#39;b&#39;, &#39;b&#39;]</code>.</p><p>ä»¥ä¸ºè¿™æ ·å°±ç»“æŸäº†ï¼Ÿ<code>no no no...</code> æ­£åˆ™åœ¨åŒ¹é…æ—¶è¿˜æœ‰å¦å¤–ä¸€æ¡è§„åˆ™â€¦<strong>æ¯”è´ªå©ªè§„åˆ™çš„ä¼˜å…ˆçº§æ›´é«˜</strong>ï¼Œ<code>so</code>åœ¨ä½ ä½¿ç”¨æ—¶,å¦‚æœä¸æ³¨æ„â€¦ä½ ä¼šæ€€ç–‘è‡ªå·±çš„â€¦</p><h4 id="åŒ¹é…çš„ä¼˜å…ˆçº§"><a href="#åŒ¹é…çš„ä¼˜å…ˆçº§" class="headerlink" title="åŒ¹é…çš„ä¼˜å…ˆçº§"></a>åŒ¹é…çš„ä¼˜å…ˆçº§</h4><blockquote><p>æœ€å…ˆå¼€å§‹çš„åŒ¹é…æ‹¥æœ‰æœ€é«˜çš„ä¼˜å…ˆæƒ â€”â€” The match that begins earliest winsã€‚</p></blockquote><p>æ€ä¹ˆè§£é‡Šï¼ŒåŒ¹é…ä¼˜å…ˆåŒ¹é…å·¦è¾¹çš„<strong>ç¬¬ä¸€ä¸ªå­—ç¬¦</strong>ï¼Œç„¶åå°½å¯èƒ½å°‘çš„å»åŒ¹é…åç»­å­—ç¬¦ï¼Œè€Œä¸æ˜¯å¿½ç•¥ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œå»æ‰¾ç¬¬äºŒä¸ªâ€¦ğŸ˜‹ğŸ˜‹ğŸ˜‹ <del>åŒ¹é…ç»“æœä¸ä¼šä»å·¦ä¾§ç¼©å‡å­—ç¬¦ï¼Œè€Œåªä¼šè¿›è¡Œå³ä¾§çš„æ‡’æƒ°åŒ¹é…</del> <code>eg.</code></p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">a*?b</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'baaaabab'</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['b', 'aaaab', 'ab']</span></code></pre><p>å¦‚æœä½ æœªç†è§£è¯¥è§„åˆ™ï¼Œé‚£ä¹ˆæŒ‰ç…§éè´ªå©ªçš„ç†è§£ï¼Œæ‰“å°çš„ç»“æœåº”è¯¥æ˜¯<code>[&#39;b&#39;, &#39;b&#39;, &#39;b&#39;]</code>ï¼Œ<strong>è¿™æ˜¯é”™è¯¯çš„</strong>.</p><p><strong>æ­£ç¡®ç»“æœ</strong>åº”è¯¥æ˜¯<code>[&#39;b&#39;, &#39;aaaab&#39;, &#39;ab&#39;]</code>.</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> æ­£åˆ™è¡¨è¾¾å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ­£åˆ™è¡¨è¾¾å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®¹å™¨åµŒå…¥Iframeåçš„æ»šåŠ¨é—®é¢˜è®°å½•</title>
      <link href="/bugs/iframe-scroll/"/>
      <url>/bugs/iframe-scroll/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h3><p>æœ€åˆï¼Œæˆ‘åšäº†ä¸€ä¸ª<code>h5</code>çš„é¡µé¢ï¼Œè¯¥é¡µé¢ä½¿ç”¨<code>iframe</code>å†…é“¾äº†ä¸€ä¸ªç½‘é¡µã€‚å½“æˆ‘ç›´æ¥åœ¨æ‰‹æœºæµè§ˆå™¨æ‰“å¼€æ—¶ï¼Œå‘ç°æ— æ³•æ­£å¸¸è¿›è¡Œæ»šåŠ¨ã€‚</p><p>æ‹Ÿè§£å†³åŠæ³•ï¼šæˆ‘ç»™è¿™ä¸ª<code>iframe</code>æ·»åŠ äº†ä¸€ä¸ªåŒ…è£¹å®¹å™¨ï¼Œé€šè¿‡è®¾ç½®è¯¥å®¹å™¨çš„<code>overflow: auto</code>ï¼Œä»¥åŠè®¾ç½®<code>iframe height:100%</code>è¾¾åˆ°é¢„æœŸå¯æ»šåŠ¨çš„æ•ˆæœã€‚</p><p>æ–°é—®é¢˜ï¼šé¦–è½®è§£å†³åŠæ³•ç¡®å®èƒ½å¤Ÿè®© iframe æ»šåŠ¨ï¼Œä¸è¿‡é¡µé¢å´å‡ºç°äº†ä¸¤ä¸ªæ»šåŠ¨æ¡ï¼Œ<code>what f?</code>é‚£è‚¯å®šå°±æ˜¯<code>wrapper å’Œ iframe</code>å‡ºç°äº†é«˜åº¦å·®äº†ã€‚</p><span id="more"></span><h3 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h3><blockquote><p>åˆ†æé«˜åº¦å·®å‡ºç°çš„åŸå› ï¼Œç„¶åâ€¦è§£å†³ã€‚</p></blockquote><p>ä»èŠ‚ç‚¹æœ¬èº«å‡ºå‘ï¼Œ<code>iframe</code>æ˜¯å†…è”å…ƒç´ ï¼Œè€Œå†…è”å…ƒç´ æ˜¯è·ŸåŸºçº¿<code>baseline</code>å¯¹é½çš„ï¼Œiframe çš„åé¢æœ‰ä¸ª<code>è¡Œå†…ç©ºç™½èŠ‚ç‚¹</code>(è¯¥èŠ‚ç‚¹äº§ç”Ÿçš„åŸå› å…¶å®å’Œ<code>dom</code>ç»“æ„æœ‰å…³ç³»ï¼Œä¸‹é¢è´´ä¸Šæºä»£ç ï¼š)</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>iframe-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.baidu.com<span class="token punctuation">"</span></span> <span class="token attr-name">frameborder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100%<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>iframe<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><p>å¯ä»¥çœ‹åˆ°<code>iframe</code>ä¸<code>div</code>ä¹‹é—´æœ‰ä¸ªæ¢è¡Œç¬¦ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºç©ºç™½èŠ‚ç‚¹ï¼Œç©ºç™½èŠ‚ç‚¹å æ®ç€é«˜åº¦ï¼Œ<code>iframe</code>ä¸ç©ºç™½èŠ‚ç‚¹çš„åŸºçº¿å¯¹é½ï¼Œå¯¼è‡´äº†<code>div</code>è¢«æ’‘å¼€ï¼Œä»è€Œå‡ºç°æ»šåŠ¨æ¡ã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼š</p><pre class="language-none"><code class="language-none">æ–¹æ¡ˆä¸€ï¼šè®¾ç½®iframeçš„vertical-align:topæ–¹æ¡ˆäºŒï¼šè®¾ç½®çˆ¶divçš„font-size:0æ–¹æ¡ˆä¸‰ï¼šæ”¹å˜iframeçš„å†…è”å…ƒç´ æ€§è´¨ï¼Œdisplay: block</code></pre><p>é€šå¸¸é‡‡ç”¨ç¬¬ä¸‰ç§æ–¹æ¡ˆï¼Œæ”¹å˜<code>iframe</code>çš„å…ƒç´ æ€§è´¨ï¼Œè´´ä¸Šéƒ¨åˆ†æºç ï¼š</p><pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">.iframe-container</span> <span class="token punctuation">&#123;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>  <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>  <span class="token property">-webkit-overflow-scrolling</span><span class="token punctuation">:</span> touch<span class="token punctuation">;</span> // å…¼å®¹ ios<span class="token punctuation">&#125;</span><span class="token selector">.iframe-container .iframe</span> <span class="token punctuation">&#123;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>è‡³æ­¤ï¼Œ<code>iframe</code>çš„æ»šåŠ¨é—®é¢˜å¾—åˆ°å®Œç¾è§£å†³ã€‚<del>ç®—æ˜¯è¸©äº†ä¸ªå°å‘ï¼Œä»¥åæ³¨æ„å°±å¥½äº†</del></p><blockquote><p>è¯•ä¸€ä¸‹ï¼Œä½ ä¼šæ¯”ä½ è‡ªå·±æƒ³è±¡ä¸­çš„è¿˜è¦å¼ºå¤§</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> è¸©å‘è®°å½• </category>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bug </tag>
            
            <tag> iframeæ»šåŠ¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javascript ä¸­çš„ç»§æ‰¿æ–¹æ¡ˆåŠå…¶å®ç°</title>
      <link href="/share/javascript-extends/"/>
      <url>/share/javascript-extends/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="ç»§æ‰¿-extends-å¯¼è¯­"><a href="#ç»§æ‰¿-extends-å¯¼è¯­" class="headerlink" title="ç»§æ‰¿(extends) å¯¼è¯­"></a>ç»§æ‰¿(extends) å¯¼è¯­</h3><p>ä»»ä½•ä¸€é—¨é¢å‘å¯¹è±¡çš„è¯­è¨€éƒ½æœ‰ç»§æ‰¿ï¼Œç»§æ‰¿ç®€å•çš„è¯´ å³ä¸ºå­ç±»ç»§æ‰¿çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•ï¼Œå¹¶ä¸”åœ¨ç»§æ‰¿ä»¥åå¯ä»¥å¯¹è¿™äº›å±æ€§å’Œæ–¹æ³•è¿›è¡Œæ“ä½œåŠä½¿ç”¨ã€‚</p><p>ä¸¾ä¸ªæ —å­ï¼šï¼ˆä½ çš„çˆ¶äº²å¾ˆå¯Œæœ‰ï¼Œä½ ç»§æ‰¿ä½ çˆ¶äº²çš„è´¢äº§ä»¥åï¼Œä½ ä¹Ÿå°±å˜å¾—å’Œä»–ä¸€æ ·å¯Œæœ‰ã€‚ï¼‰</p><p><code>js</code>è™½ç„¶æ˜¯ä¸€é—¨å¼±ç±»å‹è¯­è¨€ï¼Œä½†æ˜¯å´ç»™æˆ‘ä»¬æä¾›äº†ä¸€ç§å¾ˆå¥½çš„å®ç°ç»§æ‰¿çš„æ–¹æ³•â€”â€”åŸºäºåŸå‹å®ç° ä¸çŸ¥é“åŸå‹çš„ç›†å‹ï¼Œ<a href="https://developer.mozilla.org/zh-CN/docs/Learn/JavaScript/Objects/Object_prototypes">æˆ³è¿™é‡Œ</a></p><span id="more"></span><h3 id="ç»§æ‰¿çš„å…­ç§å®ç°"><a href="#ç»§æ‰¿çš„å…­ç§å®ç°" class="headerlink" title="ç»§æ‰¿çš„å…­ç§å®ç°"></a>ç»§æ‰¿çš„å…­ç§å®ç°</h3><p><code>ä¸»è¦å¯¹ç»§æ‰¿ç†Ÿæ‚‰æŒæ¡ï¼Œæ‰€ä»¥æ²¡æœ‰å•ç‹¬å†™æµ‹è¯•ç”¨ä¾‹è¿›è¡Œæµ‹è¯•ã€‚</code></p><p>å®šä¹‰åŸºç±»(çˆ¶ç±»)<code>Man</code>ï¼š</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Man</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> params<span class="token punctuation">.</span>name<span class="token punctuation">;</span>  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">say</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'my name is '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// åŸå‹ä¸Šçš„æ–¹æ³•</span><span class="token class-name">Man</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">eat</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">food</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'æ­£åœ¨åƒ'</span> <span class="token operator">+</span> food<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><h4 id="æ‹·è´ç»§æ‰¿"><a href="#æ‹·è´ç»§æ‰¿" class="headerlink" title="æ‹·è´ç»§æ‰¿"></a>æ‹·è´ç»§æ‰¿</h4><blockquote><p>å®ç°ï¼šæšä¸¾çˆ¶ç±»å®ä¾‹çš„æ–¹æ³•åŠå±æ€§ï¼Œæ‹·è´åˆ°å­ç±»çš„åŸå‹ä¸Š</p></blockquote><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> man1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Man</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> man1<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// éœ€è¦æ‹·è´åŸºç±»åŸå‹ä¸Šçš„å±æ€§å’Œæ–¹æ³•ï¼Œæ‰€ä»¥ç§»é™¤äº† hasOwnProperty åˆ¤æ–­</span>    <span class="token comment">// if (Object.hasOwnProperty.call(man1, key)) &#123;</span>    <span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> man1<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment">// &#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// test</span><span class="token keyword">const</span> jack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'jack'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>jack<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// jack</span>jack<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// my name is jack</span>jack<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token string">'é›¶é£Ÿ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// jackæ­£åœ¨åƒé›¶é£Ÿ</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>jack <span class="token keyword">instanceof</span> <span class="token class-name">Man</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>jack <span class="token keyword">instanceof</span> <span class="token class-name">Student</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></code></pre><blockquote><p>ä¼˜ç¼ºç‚¹ï¼š</p></blockquote><ul><li><p>æ”¯æŒå¤šç»§æ‰¿</p></li><li><p>æ•ˆç‡è¾ƒä½ï¼Œå†…å­˜å ç”¨è¾ƒé«˜ã€‚ï¼ˆå› ä¸ºè¦æ‹·è´çˆ¶ç±»çš„å±æ€§ï¼‰</p></li><li><p>æ— æ³•è·å–çˆ¶ç±»ä¸å¯æšä¸¾çš„æ–¹æ³•ã€‚ï¼ˆä¸å¯æšä¸¾æ–¹æ³•ï¼Œä¸èƒ½ä½¿ç”¨ <code>for in</code> è®¿é—®ï¼‰</p></li></ul><h4 id="åŸå‹é“¾ç»§æ‰¿"><a href="#åŸå‹é“¾ç»§æ‰¿" class="headerlink" title="åŸå‹é“¾ç»§æ‰¿"></a>åŸå‹é“¾ç»§æ‰¿</h4><blockquote><p>å®ç°ï¼šå­ç±»çš„åŸå‹æŒ‡å‘çˆ¶ç±»çš„å®ä¾‹</p></blockquote><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> params<span class="token punctuation">.</span>name<span class="token punctuation">;</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> params<span class="token punctuation">.</span>age<span class="token punctuation">;</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>sex <span class="token operator">=</span> params<span class="token punctuation">.</span>sex<span class="token punctuation">;</span>  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">', my age is '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token class-name">Student</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Man</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// test</span><span class="token keyword">const</span> rose <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'rose'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rose<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// rose</span>rose<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// my name is rose</span>rose<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// hello rose, my age is 18</span></code></pre><blockquote><p>ä¼˜ç¼ºç‚¹ï¼š</p></blockquote><ul><li><p>éå¸¸çº¯ç²¹çš„ç»§æ‰¿å…³ç³»ï¼Œå®ä¾‹æ˜¯å­ç±»çš„å®ä¾‹ï¼Œä¹Ÿæ˜¯çˆ¶ç±»çš„å®ä¾‹ã€‚</p></li><li><p>çˆ¶ç±»æ–°å¢åŸå‹æ–¹æ³•&#x2F;åŸå‹å±æ€§ï¼Œå­ç±»ä¹Ÿèƒ½è®¿é—®åˆ°ã€‚</p></li><li><p>ç®€å•æ˜“å®ç°ã€‚</p></li><li><p>æ— æ³•å®ç°å¤šç»§æ‰¿ï¼Œä¸”æ¥è‡ªåŸå‹ä¸Šçš„å¼•ç”¨å±æ€§æ‰€æœ‰å®ä¾‹å…±äº«ï¼</p></li><li><p>å­ç±»éœ€è¦å¯¹è‡ªèº«(éåŸå‹)å±æ€§é‡è½½ï¼Œå› ä¸ºåŸºç±»(éåŸå‹)å±æ€§æ— æ³•åœ¨ç»§æ‰¿æ—¶è¢«å®ä¾‹åŒ–-åŸºäºåŸå‹é“¾ç»§æ‰¿å¯¼è‡´ã€‚</p></li></ul><h4 id="æ„é€ ç»§æ‰¿"><a href="#æ„é€ ç»§æ‰¿" class="headerlink" title="æ„é€ ç»§æ‰¿"></a>æ„é€ ç»§æ‰¿</h4><blockquote><p>å®ç°ï¼š</p></blockquote><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token function">Man</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// test</span><span class="token keyword">const</span> m1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'mm'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>m1<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// my name is mm</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m1 <span class="token keyword">instanceof</span> <span class="token class-name">Man</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m1 <span class="token keyword">instanceof</span> <span class="token class-name">Student</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></code></pre><blockquote><p>ä¼˜ç¼ºç‚¹ï¼š</p></blockquote><ul><li><p>è§£å†³å­ç±»å®ä¾‹å…±äº«çˆ¶ç±»å¼•ç”¨å±æ€§çš„é—®é¢˜. å¯ä»¥å®ç°å¤šç»§æ‰¿ï¼ˆ<code>call</code>å¤šä¸ªçˆ¶ç±»å¯¹è±¡ï¼‰ã€‚</p></li><li><p>å®ä¾‹å¹¶ä¸æ˜¯çˆ¶ç±»çš„å®ä¾‹ï¼Œåªæ˜¯å­ç±»çš„å®ä¾‹ã€‚</p></li><li><p>åªèƒ½ç»§æ‰¿çˆ¶ç±»çš„å®ä¾‹å±æ€§å’Œæ–¹æ³•ï¼Œä¸èƒ½ç»§æ‰¿åŸå‹å±æ€§&#x2F;æ–¹æ³•</p></li><li><p>æ— æ³•å®ç°å‡½æ•°å¤ç”¨ï¼Œæ¯ä¸ªå­ç±»éƒ½æœ‰çˆ¶ç±»å®ä¾‹å‡½æ•°çš„å‰¯æœ¬ï¼Œå½±å“æ€§èƒ½</p></li></ul><h4 id="ç»„åˆç»§æ‰¿"><a href="#ç»„åˆç»§æ‰¿" class="headerlink" title="ç»„åˆç»§æ‰¿"></a>ç»„åˆç»§æ‰¿</h4><blockquote><p>å®ç°ï¼š</p></blockquote><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token function">Man</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token class-name">Student</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Man</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Student<span class="token punctuation">;</span><span class="token comment">// test</span><span class="token keyword">let</span> m2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'mm2'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m2<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// mm2</span>m2<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// my name is mm2</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m2 <span class="token keyword">instanceof</span> <span class="token class-name">Man</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m2 <span class="token keyword">instanceof</span> <span class="token class-name">Student</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></code></pre><blockquote><p>ä¼˜ç¼ºç‚¹ï¼š</p></blockquote><ul><li><p>å¯ä»¥ç»§æ‰¿å®ä¾‹å±æ€§&#x2F;æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ç»§æ‰¿åŸå‹å±æ€§&#x2F;æ–¹æ³•ã€‚</p></li><li><p>å®ä¾‹æ—¢æ˜¯çˆ¶ç±»çš„å®ä¾‹ï¼Œä¹Ÿæ˜¯å­ç±»çš„å®ä¾‹ã€‚</p></li><li><p>å¯å®ç°å‡½æ•°æ–¹æ³•çš„å¤ç”¨</p></li><li><p>è°ƒç”¨äº†ä¸¤æ¬¡çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œç”Ÿæˆäº†ä¸¤ä»½å®ä¾‹.</p></li></ul><h4 id="å¯„ç”Ÿç»§æ‰¿"><a href="#å¯„ç”Ÿç»§æ‰¿" class="headerlink" title="å¯„ç”Ÿç»§æ‰¿"></a>å¯„ç”Ÿç»§æ‰¿</h4><p><code>æ¯”ç»„åˆå¤šäº†ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°, æ¶ˆé™¤å¤šä½™çš„å®ä¾‹</code></p><blockquote><p>å®ç°ï¼š</p></blockquote><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token function">Man</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// åˆ›å»ºä¸€ä¸ªæ²¡æœ‰å®ä¾‹æ–¹æ³•çš„ç±»</span>  <span class="token keyword">const</span> <span class="token function-variable function">Super</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token class-name">Super</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token class-name">Man</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>  <span class="token comment">// å°†å®ä¾‹ä½œä¸ºå­ç±»çš„åŸå‹</span>  <span class="token class-name">Student</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><blockquote><p>ä¼˜ç¼ºç‚¹ï¼š</p></blockquote><ul><li>å®ç°ç›¸å¯¹è¾ƒå¤æ‚ä¸€ç‚¹ã€‚</li></ul><h4 id="ES6è¯­æ³•ç³–"><a href="#ES6è¯­æ³•ç³–" class="headerlink" title="ES6è¯­æ³•ç³–"></a><code>ES6</code>è¯­æ³•ç³–</h4><blockquote><p>å®ç°ï¼š</p></blockquote><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Man</span> <span class="token punctuation">&#123;</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'my name is '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">extends</span> <span class="token class-name">Man</span> <span class="token punctuation">&#123;</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// test</span><span class="token keyword">const</span> m3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'mm3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>m3<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// my name is mm3</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m3 <span class="token keyword">instanceof</span> <span class="token class-name">Man</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m3 <span class="token keyword">instanceof</span> <span class="token class-name">Student</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></code></pre><blockquote><p>ä¼˜ç¼ºç‚¹ï¼š</p></blockquote><ul><li><code>ECMAscript6</code>æ ‡å‡†çš„ç»§æ‰¿æ–¹æ¡ˆ</li></ul><p><code>ç»§æ‰¿èƒ½å¤Ÿåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿä¾¿æ·çš„ä½¿ç”¨çˆ¶ç±»çš„å±æ€§åŠæ–¹æ³•ï¼Œåœ¨ js ä¸­å®ç°ç»§æ‰¿çš„æ–¹æ¡ˆå¤§è‡´å°±è¿™å…­ç§ï¼ŒåŸºæœ¬éƒ½æ˜¯ä¾æ‰˜åŸå‹å»ºç«‹çš„ç»§æ‰¿å…³ç³»ã€‚å…¶ä¸­çš„æ‹·è´ç»§æ‰¿ä¸ªäººä¸æ¨èä½¿ç”¨ï¼ŒES6ç»§æ‰¿èƒ½ç”¨åˆ™ç”¨</code></p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> ç»§æ‰¿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javascript ä½œç”¨åŸŸç†è§£</title>
      <link href="/share/javascript-scope/"/>
      <url>/share/javascript-scope/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸï¼Ÿ</h3><p>åŸŸï¼šèŒƒå›´ã€åŒºåŸŸ</p><p>ä½œç”¨åŸŸï¼šå˜é‡èµ·ä½œç”¨çš„ä¸€ä¸ªåŸŸ â€“&gt; å˜é‡èµ·ä½œç”¨çš„ä¸€ä¸ªèŒƒå›´</p><p>é‚£ä¹ˆï¼Œåœ¨<code>js</code>ä¸­çš„ä½œç”¨åŸŸåˆæ˜¯æ€ä¹ˆè®¾å®šçš„å‘¢ï¼Ÿç›´æ¥å†™åœ¨<code>script</code>è„šæœ¬çš„æœ€å¤–å±‚å’Œå†™åœ¨å‡½æ•°ä½“å†…åˆæœ‰å•¥ä¸åŒï¼Ÿ</p><span id="more"></span><h3 id="ä½œç”¨åŸŸåˆ†ç±»"><a href="#ä½œç”¨åŸŸåˆ†ç±»" class="headerlink" title="ä½œç”¨åŸŸåˆ†ç±»"></a>ä½œç”¨åŸŸåˆ†ç±»</h3><p>åœ¨<code>es5 å³ ECMAscript5</code>æ ¹æ®èŒƒå›´çš„ä¸åŒï¼Œä½œç”¨åŸŸåˆ†ä¸ºäº†<strong>å…¨å±€ä½œç”¨åŸŸ</strong>å’Œ<strong>å±€éƒ¨ä½œç”¨åŸŸ</strong>ã€‚<strong>è¿™ä¸ªæ ‡å‡†ä¸­åªæœ‰å‡½æ•°æ‹¥æœ‰å±€éƒ¨ä½œç”¨åŸŸã€‚</strong></p><p>åœ¨<code>es6 ä¸­æ–°å¢äº†å—ä½œç”¨åŸŸã€‚</code></p><h4 id="å…¨å±€ä½œç”¨åŸŸ"><a href="#å…¨å±€ä½œç”¨åŸŸ" class="headerlink" title="å…¨å±€ä½œç”¨åŸŸ"></a>å…¨å±€ä½œç”¨åŸŸ</h4><p>åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹å£°æ˜çš„å˜é‡å°±æ˜¯å…¨å±€å˜é‡ã€‚è€Œ<strong>å…¨å±€ä½œç”¨åŸŸæ˜¯å”¯ä¸€çš„ï¼Œåªæœ‰ä¸€ä¸ª</strong>ã€‚</p><p>ä½ å¯ä»¥ç†è§£ä¸ºï¼š <code>&lt;script&gt;</code>æ ‡ç­¾ä¸‹çš„æœ€å¤–å±‚å˜é‡æˆ–è€…å‡½æ•°ã€ä»¥åŠ<strong>æ‰€æœ‰èƒ½å¤Ÿåœ¨<code>js</code>ä»£ç çš„ä»»ä½•åœ°æ–¹èƒ½å¤Ÿè®¿é—®çš„å¯¹è±¡æ‹¥æœ‰å…¨å±€ä½œç”¨åŸŸã€‚</strong>ï¼Œé‚£ä¹ˆä¸éš¾å¾—çŸ¥ï¼š**<code>window</code>å¯¹è±¡æ‹¥æœ‰å…¨å±€ä½œç”¨åŸŸã€‚**</p><p>ä¾‹å¦‚ä»£ç ï¼š</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">'test'</span><span class="token punctuation">;</span>  <span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    c <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">var</span> <span class="token function-variable function">d</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><p>åœ¨è¿™ä¸ªä»£ç ç‰‡æ®µä¸­ï¼Œå˜é‡<code>a</code>ã€å‡½æ•°<code>fn1ï¼Œd</code>ã€å±æ€§<code>cï¼ˆä¸ºä»€ä¹ˆæ˜¯å±æ€§ï¼Ÿï¼‰</code>ï¼Œå‡èƒ½å¤Ÿåœ¨ä»£ç çš„ä»»ä½•åœ°æ–¹è¿›è¡Œè®¿é—®ï¼ˆä¹Ÿæ˜¯â€˜æ‰€è°“çš„â€™å¤„åœ¨æœ€å¤–å±‚ï¼‰ï¼Œéƒ½å¤„åœ¨åŒä¸€ä¸ªå…¨å±€ä½œç”¨åŸŸä¸­ã€‚<code>fn1 ä¸­çš„ c ä¼šä¸æ–­å‘ä¸Šå¯»å€ï¼Œç›´åˆ°å…¨å±€ä½œç”¨åŸŸï¼Œå¦‚æœæ²¡æœ‰ä»»ä½• var å£°æ˜ï¼Œé‚£ä¹ˆå®ƒçš„èµ‹å€¼åˆ™ä¼šè¢«å½“åšæ˜¯ window çš„å¤–æŒ‚å±æ€§è¿›è¡Œè®¾ç½®å¹¶èµ‹å€¼ï¼Œè®©ä½¿ç”¨è€…äº§ç”Ÿäº†ä¸€ç§ä¸ç”¨å£°æ˜çš„å‡è±¡ã€‚</code></p><h4 id="å±€éƒ¨ä½œç”¨åŸŸï¼ˆç§æœ‰ä½œç”¨åŸŸï¼‰"><a href="#å±€éƒ¨ä½œç”¨åŸŸï¼ˆç§æœ‰ä½œç”¨åŸŸï¼‰" class="headerlink" title="å±€éƒ¨ä½œç”¨åŸŸï¼ˆç§æœ‰ä½œç”¨åŸŸï¼‰"></a>å±€éƒ¨ä½œç”¨åŸŸï¼ˆç§æœ‰ä½œç”¨åŸŸï¼‰</h4><p><code>es5</code>æ ‡å‡†ä¸­ï¼Œåªæœ‰å‡½æ•°æœ‰ç§æœ‰ä½œç”¨åŸŸã€‚åœ¨å‡½æ•°ä½“å†…å®šä¹‰çš„ä¸€åˆ‡å˜é‡å’Œå‡½æ•°ï¼Œå½±å“èŒƒå›´å’Œå¯è®¿é—®èŒƒå›´ä»…åœ¨å‡½æ•°ä½“å†…ï¼Œå¦‚ä¸Šé¢ä»£ç ç‰‡æ®µä¸­çš„å˜é‡<code>b å’Œ f</code>ã€‚</p><blockquote><p><strong>æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ç§æœ‰ä½œç”¨åŸŸã€‚</strong></p></blockquote><h4 id="å—çº§ä½œç”¨åŸŸ"><a href="#å—çº§ä½œç”¨åŸŸ" class="headerlink" title="å—çº§ä½œç”¨åŸŸ"></a><strong>å—çº§ä½œç”¨åŸŸ</strong></h4><h5 id="why"><a href="#why" class="headerlink" title="why?"></a><strong>why?</strong></h5><p>è¿™ä¸ªæ˜¯<code>es6</code>æå‡ºçš„æ¦‚å¿µï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆéœ€è¦å—ä½œç”¨åŸŸï¼Ÿ</p><blockquote><p>å—ä½œç”¨åŸŸçš„å‡ºç°ï¼Œé¿å…äº†å†…å­˜æ³„æ¼ï¼Œä¾‹å¦‚ä¸‹é¢ä»£ç ï¼šç”¨æ¥è®¡æ•°çš„å¾ªç¯å˜é‡æ³„éœ²ä¸ºå…¨å±€å˜é‡</p></blockquote><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// ...</span><span class="token punctuation">&#125;</span></code></pre><blockquote><p>é¢„è§£æå¯¼è‡´çš„è¯¯åˆ¤ï¼Œè¯¯åˆ¤å¤–å±‚å˜é‡è¢«è¦†ç›–ã€‚<del>ï¼ˆè¿™ä¸ªé—®é¢˜æˆ‘è®¤ä¸ºå½±å“è¿˜æ²¡é‚£ä¹ˆå¤§ï¼Œæ¯•ç«Ÿåªè¦å†™çš„å¤Ÿè§„èŒƒï¼Œå°±ä¸å­˜åœ¨ï¼‰</del></p></blockquote><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  i <span class="token operator">*=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// NaN</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>å¤§å®¶å¯ä»¥çŒœä¸€ä¸‹ç»“æœï¼Œæˆ‘å…ˆè¯´é”™è¯¯ç­”æ¡ˆï¼š<del><code>10, 20</code></del>ï¼Œç›¸ä¿¡æœ‰ä¸€éƒ¨åˆ†åŒå¿—å·²ç»ç»•è¿›å»äº†ã€‚</p><p>å…¶å®ç»†çœ‹ï¼Œåœ¨ä»£ç è¿è¡Œåˆ°<code>fn()</code>æ—¶ï¼Œå¼€å§‹å¯¹<code>fn</code>å‡½æ•°ä½“è¿›è¡Œé¢„è§£æï¼Œè¿™ä¸ªè¿‡ç¨‹ä¹Ÿå¯ä»¥ç†è§£ä¸ºâ€˜å˜é‡æå‡â€™ï¼Œç„¶åå†å¼€å§‹æ‰§è¡Œå‡½æ•°ä½“ä»£ç ï¼Œæ­¤æ—¶çš„<code>i *= 10</code>å…¶å®æ˜¯å¯¹å±€éƒ¨å˜é‡çš„èµ‹å€¼æ“ä½œã€‚è¯´åˆ°è¿™å°±ä¸éš¾å‘ç°ï¼Œæ­¤æ—¶çš„å…¨å±€å˜é‡<code>i</code>å€¼ä¸º<code>1</code>ã€‚</p><h5 id="å®šä¹‰å’Œè§„èŒƒ"><a href="#å®šä¹‰å’Œè§„èŒƒ" class="headerlink" title="å®šä¹‰å’Œè§„èŒƒ"></a>å®šä¹‰å’Œè§„èŒƒ</h5><p>ä»»ä½•<code>&#123;&#125;</code>åŒ…è£¹çš„ä»£ç éƒ½å¯ä»¥ç§°ä¹‹ä¸ºå—ï¼Œè€ŒåŒ…è£¹åœ¨å†…çš„å˜é‡éƒ½ä¼šå—å—ä½œç”¨åŸŸçš„å½±å“ã€‚è€Œè®©è¿™ä¸ªå—ä½œç”¨åŸŸç”Ÿæ•ˆçš„ï¼Œæ­£æ˜¯<code>let å’Œ const</code>ã€‚</p><p>é€šè¿‡<code>let</code>å’Œ<code>const</code>å£°æ˜çš„å˜é‡ï¼Œæ— æ³•åœ¨å—çš„å¤–éƒ¨è®¿é—®ã€‚è€Œä¸¤è€…çš„åŒºåˆ«ï¼Œå°±æ˜¯<code>let</code>çš„å€¼å¯ä»¥è¢«ä¿®æ”¹ï¼Œ<code>const</code>å®šä¹‰çš„æ˜¯å¸¸é‡ï¼Œæ— æ³•è¢«ä¿®æ”¹ã€‚</p><p>ä¸<code>var</code>çš„åŒºåˆ«ï¼š</p><blockquote><p><strong>let å’Œ const å£°æ˜çš„å˜é‡ï¼Œä¸ä¼šè¢«æå‰é¢„è§£æï¼Œæ²¡æœ‰æ‰€è°“çš„å˜é‡æå‡ç‰¹æ€§ï¼Œè€Œæ˜¯â€˜æš‚æ—¶æ€§æ­»åŒºï¼ˆtemporal dead zoneï¼‰â€™ç‰¹æ€§</strong>ã€‚</p></blockquote><blockquote><p><strong>let å’Œ const å£°æ˜çš„å˜é‡ï¼Œä»…åœ¨â€˜å—ä½œç”¨åŸŸâ€™ä¸­ç”Ÿæ•ˆã€‚</strong></p></blockquote><h3 id="ä½œç”¨åŸŸå˜é‡çš„è®¿é—®è§„åˆ™ï¼ˆå˜é‡æå‡ï¼‰"><a href="#ä½œç”¨åŸŸå˜é‡çš„è®¿é—®è§„åˆ™ï¼ˆå˜é‡æå‡ï¼‰" class="headerlink" title="ä½œç”¨åŸŸå˜é‡çš„è®¿é—®è§„åˆ™ï¼ˆå˜é‡æå‡ï¼‰"></a>ä½œç”¨åŸŸå˜é‡çš„è®¿é—®è§„åˆ™ï¼ˆ<strong>å˜é‡æå‡</strong>ï¼‰</h3><blockquote><p>è¦ä½¿ç”¨æŸä¸ªå˜é‡ï¼Œä¼šå…ˆåœ¨è‡ªå·±çš„ä½œç”¨åŸŸé‡ŒæŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾åˆ°ï¼Œé‚£å°±ç›´æ¥ä½¿ç”¨ï¼ˆ<strong>å¦‚æœä½¿ç”¨è¿™ä¸ªå˜é‡çš„è¯­å¥åœ¨å£°æ˜å®ƒä¹‹å‰ï¼Œé‚£ä¹ˆæ­¤æ—¶ä½¿ç”¨çš„è¿™ä¸ªå˜é‡å€¼ä¸º undefinedï¼ŒåŒæ—¶åº”è¯¥æ³¨æ„ï¼šåªæœ‰ var å£°æ˜çš„å˜é‡å…è®¸åœ¨å£°æ˜å‰è®¿é—®</strong>ï¼‰ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œå°±å¾€ä¸Šä¸€çº§æŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾åˆ°ï¼Œå°±ç›´æ¥æ‹¿æ¥ç”¨ï¼Œå¦‚æœè¿˜æ˜¯æ‰¾ä¸åˆ°ï¼Œå†ç»§ç»­â€¦ å¾€ä¸Šä¸€çº§æŸ¥æ‰¾ï¼Œç›´åˆ°å…¨å±€ä½œç”¨åŸŸã€‚ å¦‚æœæœ€ç»ˆæ‰¾åˆ°ï¼Œé‚£å°±ç›´æ¥ç”¨ï¼Œæ‰¾ä¸åˆ°é‚£å°±æŠ¥é”™ xxx is not defined.</p></blockquote><blockquote><p>å˜é‡æŸ¥æ‰¾ï¼Œåªèƒ½å¾€ä¸ŠæŸ¥æ‰¾ï¼Œä¸èƒ½å¾€ä¸‹ã€‚</p></blockquote><p>æ€»ç»“å°±æ˜¯ï¼š<strong>å…¨å±€ä¸èƒ½è®¿é—®å±€éƒ¨ï¼Œå±€éƒ¨å¯ä»¥æ‹¿åˆ°å…¨å±€ã€‚</strong></p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> n <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span>  m <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 15</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 20</span><span class="token punctuation">&#125;</span><span class="token function">fn2</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><code>n</code>ä¼šä¼˜å…ˆä»å±€éƒ¨å˜é‡è¯»å–ï¼Œ<code>m</code>å±€éƒ¨æ²¡æœ‰å£°æ˜ï¼Œå‘ä¸Šå¯»å€ï¼Œåœ¨å…¨å±€ä½œç”¨åŸŸä¸­æ‰¾åˆ°ã€‚</p><h3 id="ä½œç”¨åŸŸå˜é‡çš„èµ‹å€¼è§„åˆ™"><a href="#ä½œç”¨åŸŸå˜é‡çš„èµ‹å€¼è§„åˆ™" class="headerlink" title="ä½œç”¨åŸŸå˜é‡çš„èµ‹å€¼è§„åˆ™"></a>ä½œç”¨åŸŸå˜é‡çš„èµ‹å€¼è§„åˆ™</h3><p>æ³¨æ„ï¼š<strong>èµ‹å€¼çš„è¿™ä¸ªå˜é‡çš„å¯»å€è¿‡ç¨‹éœ€è¦éµå¾ªä½œç”¨åŸŸå˜é‡çš„è®¿é—®è§„åˆ™</strong>ã€‚</p><blockquote><p>å¦‚æœè‡ªå·±çš„ä½œç”¨åŸŸï¼Œæœ‰è¿™ä¸ªå˜é‡ï¼Œé‚£ä¹ˆç›´æ¥ç»™è‡ªå·±ä½œç”¨åŸŸçš„è¿™ä¸ªå˜é‡èµ‹å€¼ã€‚</p></blockquote><blockquote><p>å¦‚æœè‡ªå·±çš„ä½œç”¨åŸŸæ²¡æœ‰è¿™ä¸ªå˜é‡ï¼Œé‚£å°±å¾€ä¸Šä¸€çº§æŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾åˆ°ï¼Œé‚£å°±èµ‹å€¼ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±ç»§ç»­å¾€ä¸Šä¸€çº§æŸ¥æ‰¾â€¦ç›´åˆ°å…¨å±€ä½œç”¨åŸŸï¼Œå¦‚æœæ‰¾åˆ°ï¼Œé‚£å°±èµ‹å€¼ï¼Œæ‰¾ä¸åˆ°å°±ä¼šè¢«å½“åšæ˜¯ window çš„ä¸€ä¸ªå±æ€§ï¼Œå¹¶è¿›è¡Œèµ‹å€¼ã€‚</p></blockquote><p><strong>æ³¨æ„è¿™ä¸ªå¯»æ‰¾çš„è¿‡ç¨‹ï¼Œåªæœ‰ var å˜é‡å…è®¸åœ¨å£°æ˜ä¹‹å‰èµ‹å€¼ï¼Œlet ä¸å…è®¸ã€‚</strong></p><h3 id="ä½œç”¨åŸŸå˜é‡çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#ä½œç”¨åŸŸå˜é‡çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ä½œç”¨åŸŸå˜é‡çš„ç”Ÿå‘½å‘¨æœŸ"></a>ä½œç”¨åŸŸå˜é‡çš„ç”Ÿå‘½å‘¨æœŸ</h3><p><code>å°±æ˜¯ä½œç”¨åŸŸå˜é‡åœ¨å†…å­˜ä¹‹ä¸­å­˜æ´»çš„æ—¶é—´ã€‚</code></p><blockquote><p>å…¨å±€å˜é‡ï¼šç”Ÿå‘½å‘¨æœŸæ˜¯å’Œç¨‹åºåŒæ­¥çš„ï¼Œ ç¨‹åºä¸å…³é—­ï¼Œå˜é‡å°±ä¸€ç›´å­˜åœ¨ã€‚</p></blockquote><blockquote><p>å±€éƒ¨å˜é‡ï¼šç”Ÿå‘½å‘¨æœŸæ˜¯å’Œå‡½æ•°æ‰§è¡ŒåŒæ­¥çš„ï¼Œå‡½æ•°æ‰§è¡Œç»“æŸå˜é‡å°±è¢«åˆ é™¤äº†ã€‚</p></blockquote><blockquote><p>å—ä½œç”¨åŸŸå˜é‡ï¼šä»…å­˜æ´»ä¸å—ä»£ç æ‰§è¡Œæ—¶ï¼Œæ‰§è¡Œç»“æŸå†…å­˜å°±ä¼šé‡Šæ”¾ã€‚</p></blockquote><p>ç»¼ä¸Šï¼Œå…¨å±€å˜é‡çš„å¤§é‡ä½¿ç”¨ä¼šå¯¼è‡´ç¨‹åºå˜å¾—æ›´é‡ã€‚å¦‚æœä»£ç é€»è¾‘å†™çš„ä¸å¤Ÿä¸¥è°¨ï¼Œå¾ˆå®¹æ˜“é€ æˆå†…å­˜æ³„æ¼å—ï¼ˆä¾‹å¦‚ï¼šä¸å£°æ˜å˜é‡ç›´æ¥èµ‹å€¼ï¼Œä¼šæŒ‚è½½åˆ° window å¯¹è±¡ï¼‰ï¼Œå½±å“åˆ°æˆ‘ä»¬ç¨‹åºçš„è¿è¡Œæ•ˆç‡ã€‚<del>å¦‚æœå¯èƒ½ï¼Œè¿˜æ˜¯å°‘è®¾è®¡ä¸€ç‚¹å…¨å±€å˜é‡å§ï¼å¯¹å¤§å®¶éƒ½å¥½â€¦hh</del></p><blockquote><p>å»ºè®®ï¼šä»»ä½•ä¸€ä¸ªç‹¬ç«‹çš„ script æ ‡ç­¾ä¸‹çš„ä»£ç ï¼Œéƒ½åº”ç”¨åŒ¿åå‡½æ•°åŒ…è£¹ï¼Œå¹¶è‡ªè°ƒç”¨ã€‚é¿å…æ±¡æŸ“å…¨å±€ï¼Œå¹¶é€ æˆå…¶ä»–æœªçŸ¥çš„ç¨‹åºé”™è¯¯ã€‚</p></blockquote><p>ä¾‹å¦‚ï¼š</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// ...</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// æˆ–è€…ï¼šè¿™æ˜¯è‡ªè°ƒç”¨çš„å‡ ç§å†™æ³•ï¼Œæ¨èç”¨ä¸Šé¢é‚£ç§ï¼Œä¸‹é¢çš„ä»…åšäº†è§£</span><span class="token operator">~</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token operator">!</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> ä½œç”¨åŸŸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javascript[ES6] ä¸­çš„ç®­å¤´å‡½æ•°å­¦ä¹ åŠ This æŒ‡å‘ç†è§£</title>
      <link href="/share/javascript-arrow-function/"/>
      <url>/share/javascript-arrow-function/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="ç®­å¤´å‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ç®­å¤´å‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ç®­å¤´å‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ç®­å¤´å‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>ç®€å•çš„è¯´ï¼Œç®­å¤´å‡½æ•°å°±æ˜¯å¯¹åŒ¿åå‡½æ•°çš„ç®€åŒ–ã€‚</p><p>ä½œä¸º<code>ES6</code>çš„ä¸€ç§æ–°è§„èŒƒï¼Œç®­å¤´å‡½æ•°çš„ä¼˜ç‚¹ä¸ä»…åœ¨äºå†™æ³•ä¸Šçš„ç®€åŒ–ï¼Œè€Œä¸”èƒ½å¤Ÿæ ¹æ®æƒ…å†µï¼Œä¸åŒ¿åå‡½æ•°ä¹‹é—´åˆ‡æ¢ä½¿ç”¨ï¼Œä½¿<code>this</code>æŒ‡å‘ä¸åŒçš„å€¼ã€‚</p><p><code>so</code>ï¼Œç®­å¤´å‡½æ•°å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿ</p><span id="more"></span><h3 id="æ ¼å¼ç”¨æ³•"><a href="#æ ¼å¼ç”¨æ³•" class="headerlink" title="æ ¼å¼ç”¨æ³•"></a>æ ¼å¼ç”¨æ³•</h3><p>ä¸€èˆ¬å½¢å¼ä¸Šçš„ç®­å¤´å‡½æ•°é•¿è¿™æ ·<del>ï¼ˆçœ‹äº†æ¡ˆä¾‹è¿˜æ˜¯ä¸æ˜ç™½çš„ï¼Œå¯ä»¥è¿è¡Œä»£ç çœ‹ä¸€ä¸‹ç»“æœï¼Œæˆ–è®¸ä½ å°±æ˜ç™½äº†ï¼‰</del></p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><h4 id="å•å‚æ•°å•è¿”å›è¯­å¥"><a href="#å•å‚æ•°å•è¿”å›è¯­å¥" class="headerlink" title="å•å‚æ•°å•è¿”å›è¯­å¥"></a><strong>å•å‚æ•°å•è¿”å›è¯­å¥</strong></h4><blockquote><p>å•å‚æ•°ï¼šåœ¨ç®­å¤´å‡½æ•°ä¸­å‚æ•°çš„æ‹¬å·å¯ä»¥çœç•¥ï¼Œä½†ä¸å»ºè®®<del>ä¸€èˆ¬é¡¹ç›®è§„èŒƒç®­å¤´å‡½æ•°ï¼Œå‚æ•°ä½ç½®å¿…é¡»åŠ æ‹¬å·</del></p></blockquote><blockquote><p>å•è¿”å›è¯­å¥ï¼šå‡½æ•°ä½“ {} æ‹¬å·å¯ä»¥çœç•¥ã€‚ï¼ˆ<strong>ç‰¹æ®Šè¯´æ˜ï¼šæ³¨æ„è¿”å›å¯¹è±¡æ—¶çš„ä¹¦å†™æ ¼å¼ï¼Œé¿å…ä¸å‡½æ•°ä½“çš„ {} å†²çª</strong>ï¼Œ<del>é”™è¯¯ç¤ºèŒƒï¼šy &#x3D;&gt; { y };</del>ï¼‰</p></blockquote><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token parameter">x</span> <span class="token operator">=></span> x<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">;</span><span class="token parameter">y</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">&#123;</span> y <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ç­‰ä»·å†™æ³•ï¼š</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=></span> x<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> x<span class="token operator">*</span><span class="token number">2</span> <span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token parameter">y</span><span class="token punctuation">)</span> <span class="token operator">=></span> y <span class="token operator">=</span> <span class="token punctuation">&#123;</span> y <span class="token punctuation">&#125;</span><span class="token punctuation">;</span> <span class="token comment">// (y) => (y = &#123; y &#125;); // (y) => y = (&#123; y &#125;);</span><span class="token punctuation">(</span><span class="token parameter">y</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> <span class="token punctuation">&#123;</span> y <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token comment">// ç­‰ä»·çš„åŒ¿åå‡½æ•°å†™æ³•</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> x<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">y</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token punctuation">&#123;</span> y <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><blockquote><p>å½“åªæœ‰ä¸€ä¸ªæ‰§è¡Œè¯­å¥ï¼Œä¸”æ— éœ€è¿”å›æ•°æ®æ—¶ï¼Œå¯ä»¥è¿”å›å¯æ‰§è¡Œä»£ç ï¼š<strong>æ­¤æ—¶è¿”å›çš„æ‰§è¡Œè¯­å¥å¿…é¡»ç”¨å°æ‹¬å·åŒ…è£¹</strong></p></blockquote><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> y<span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>y <span class="token operator">=</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ç­‰ä»·çš„åŒ¿åå‡½æ•°å†™æ³•</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  y <span class="token operator">=</span> x<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="å•å‚æ•°å¤šæ‰§è¡Œè¯­å¥"><a href="#å•å‚æ•°å¤šæ‰§è¡Œè¯­å¥" class="headerlink" title="å•å‚æ•°å¤šæ‰§è¡Œè¯­å¥"></a><strong>å•å‚æ•°å¤šæ‰§è¡Œè¯­å¥</strong></h4><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token parameter">x</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> flag <span class="token operator">=</span> x <span class="token operator">></span> <span class="token number">5</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> flag <span class="token operator">?</span> x <span class="token operator">:</span> x <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// ç­‰ä»·å†™æ³•ï¼š</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> x <span class="token operator">></span> <span class="token number">5</span> <span class="token operator">?</span> x <span class="token operator">:</span> x <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// ç­‰ä»·çš„åŒ¿åå‡½æ•°å†™æ³•</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> x <span class="token operator">></span> <span class="token number">5</span> <span class="token operator">?</span> x <span class="token operator">:</span> x <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="å¤šå‚æ•°å•è¿”å›è¯­å¥"><a href="#å¤šå‚æ•°å•è¿”å›è¯­å¥" class="headerlink" title="å¤šå‚æ•°å•è¿”å›è¯­å¥"></a><strong>å¤šå‚æ•°å•è¿”å›è¯­å¥</strong></h4><p>ä¸å•å‚æ•°å•è¿”å›è¯­å¥çš„<strong>å”¯ä¸€åŒºåˆ«</strong>å°±æ˜¯å‚æ•°å¿…é¡»ç”¨å°æ‹¬å·åŒ…è£¹ã€‚</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token operator">=></span> x<span class="token operator">*</span>y<span class="token punctuation">;</span><span class="token comment">// ç­‰ä»·å†™æ³•ï¼š</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> x<span class="token operator">*</span>y<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token comment">// ç­‰ä»·çš„åŒ¿åå‡½æ•°å†™æ³•</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> x<span class="token operator">*</span>y<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="å¤šå‚æ•°å¤šæ‰§è¡Œè¯­å¥"><a href="#å¤šå‚æ•°å¤šæ‰§è¡Œè¯­å¥" class="headerlink" title="å¤šå‚æ•°å¤šæ‰§è¡Œè¯­å¥"></a><strong>å¤šå‚æ•°å¤šæ‰§è¡Œè¯­å¥</strong></h4><p>ä¸å•å‚æ•°å¤šæ‰§è¡Œè¯­å¥çš„<strong>å”¯ä¸€åŒºåˆ«</strong>å°±æ˜¯å‚æ•°å¿…é¡»ç”¨å°æ‹¬å·åŒ…è£¹ã€‚</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> flag <span class="token operator">=</span> x <span class="token operator">></span> <span class="token number">5</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> flag <span class="token operator">?</span> y <span class="token operator">:</span> x <span class="token operator">*</span> y<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// ç­‰ä»·çš„åŒ¿åå‡½æ•°å†™æ³•</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> x <span class="token operator">></span> <span class="token number">5</span> <span class="token operator">?</span> y <span class="token operator">:</span> x <span class="token operator">*</span> y<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="æ²¡æœ‰å‚æ•°"><a href="#æ²¡æœ‰å‚æ•°" class="headerlink" title="æ²¡æœ‰å‚æ•°"></a><strong>æ²¡æœ‰å‚æ•°</strong></h4><p><strong>å‚æ•°ä½ç½®å¿…é¡»åŠ æ‹¬å·</strong>ï¼Œå…¶ä»–å•&#x2F;å¤šè¯­å¥æ‰§è¡Œçš„ä¹¦å†™æ ¼å¼åŒä¸Šã€‚</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token number">99</span><span class="token punctuation">;</span><span class="token comment">// ç­‰ä»·çš„åŒ¿åå‡½æ•°å†™æ³•</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token number">99</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="å¯å˜å‚æ•°"><a href="#å¯å˜å‚æ•°" class="headerlink" title="å¯å˜å‚æ•°"></a><strong>å¯å˜å‚æ•°</strong></h4><p>åˆ©ç”¨<code>rest</code>å˜é‡å–å€¼ï¼Œå¯ä»¥åˆ©ç”¨â€¦å¯¹ä¸ªæ•°ä¸æ˜å‚æ•°çš„å‚æ•°è¿›è¡Œå›Šæ‹¬ï¼Œå¾—åˆ°å˜é‡ç»„æˆçš„æ•°ç»„ã€‚</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> <span class="token operator">...</span>rest</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">let</span> sum <span class="token operator">=</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rest<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> rest<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    sum <span class="token operator">+=</span> rest<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// sum += 4; sum += 5;sum += 6  4/8/13/19</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">return</span> sum<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 19</span></code></pre><p>çœ‹å®Œæ˜¯ä¸æ˜¯æ„Ÿè§‰ï¼ŒåŸæ¥ç®­å¤´å‡½æ•°è¿™ä¹ˆç®€å•ï¼Œå¯¹æ²¡é”™â€¦å°±æ˜¯å¦‚æ­¤ç®€å•ã€‚</p><p>ç®­å¤´å‡½æ•°åœ¨ä¸€å®šå½¢å¼ä¸Šä¸åŒ¿åå‡½æ•°æ²¡æœ‰å¤ªå¤§çš„å·®å¼‚ï¼Œå†™æ³•ä¸Šé™¤äº†å‡½æ•°å¤´å°¾éƒ¨ï¼Œå‡½æ•°ä½“ä¾æ—§æ˜¯é€»è¾‘æ€§çš„ä»£ç ã€‚</p><hr><h3 id="ä¸æ™®é€šåŒ¿åå‡½æ•°çš„åŒºåˆ«"><a href="#ä¸æ™®é€šåŒ¿åå‡½æ•°çš„åŒºåˆ«" class="headerlink" title="ä¸æ™®é€šåŒ¿åå‡½æ•°çš„åŒºåˆ«"></a>ä¸æ™®é€šåŒ¿åå‡½æ•°çš„åŒºåˆ«</h3><ul><li><p>ç®­å¤´å‡½æ•°å½¢å¼ä¸Šåšäº†æ”¹å˜ï¼Œç®€åŒ–äº†å‡½æ•°ä½“ã€‚</p></li><li><p>æ™®é€šå‡½æ•°æ”¯æŒé€šè¿‡<code>arguments</code>è·å–æœªçŸ¥ä¸ªæ•°çš„å®å‚ï¼Œè€Œç®­å¤´å‡½æ•°ä¸æ”¯æŒ<code>arguments</code>ç”¨æ³•ï¼Œç©¶å…¶åŸå› ï¼šç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªèº«çš„<code>thisã€arguments</code>ï¼Œä½†æ˜¯â€¦å¦‚è‹¥å®ƒçš„çˆ¶çº§å­˜åœ¨ï¼Œé‚£ä¹ˆåœ¨ç®­å¤´å‡½æ•°å†…è·å–çš„å°±æ˜¯å…¶çˆ¶çº§å¯¹åº”çš„<code>thisã€arguments</code>ã€‚å¦‚æœåœ¨ç®­å¤´å‡½æ•°ä¸­æœ‰è¿™ä¸ªè·å–è‡ªèº«çš„<code>arguments</code>éœ€æ±‚ï¼Œå¯ä»¥ç”¨<code>...rest</code>æ›¿ä»£ã€‚</p></li><li><p>ç®­å¤´å‡½æ•°åœ¨<code>ES6</code>æ ‡å‡†ä¸‹å¯ä½¿ç”¨ï¼Œæ™®é€šå‡½æ•°åˆ™æ²¡æœ‰è¿™ä¸ªé™åˆ¶ã€‚</p></li><li><p><code>this</code>æŒ‡å‘çš„ä¿®æ”¹ã€‚ç®­å¤´å‡½æ•°çš„<code>this</code>æŒ‡å‘å¤–éƒ¨ï¼Œå¸¸åœ¨å¯¹ç±»çš„æ–¹æ³•è¿›è¡Œæ„é€ æ—¶ä½¿ç”¨ï¼Œä½¿å‡½æ•°ä½“å†…çš„<code>this</code>å§‹ç»ˆæŒ‡å‘è¿™ä¸ªç±»ã€‚å¦‚æœéœ€è¦ <code>this</code>æŒ‡å‘å½“å‰æºï¼Œå»ºè®®ä½¿ç”¨æ™®é€šå‡½æ•°ã€‚</p></li></ul><div class="primary"><blockquote><p>è¡¥å……è¯´æ˜ï¼š</p></blockquote></div><blockquote><p><strong>ç®­å¤´å‡½æ•°é™¤äº†æ²¡æœ‰è‡ªèº«çš„ thisã€arguments å¤–ï¼Œnew.targetã€super ä¹Ÿæ²¡æœ‰</strong>ã€‚ï¼ˆæ³¨æ„åªæ˜¯è‡ªèº«æ²¡æœ‰ï¼Œå®ƒä¼šä»å®ƒçš„å¤–éƒ¨è·å–ï¼Œå°±è¿‘åŸåˆ™ï¼Œå¦‚æœå¤–éƒ¨è¿˜æ˜¯æ²¡æœ‰è‡ªèº«çš„ï¼Œç»§ç»­å‘å¤–â€¦ï¼‰ï¼›å¦ï¼š<strong>ä¸å¯ä»¥ä½¿ç”¨ yield å‘½ä»¤ï¼Œå› æ­¤ç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ä½œ Generator å‡½æ•°</strong>ã€‚</p></blockquote><blockquote><p><strong>ç®­å¤´å‡½æ•°æœ‰ä½œç”¨åŸŸ</strong>ï¼ˆè¯æ³•ä½œç”¨åŸŸï¼‰ï¼Œè¯æ³•ä½œç”¨åŸŸç®€å•æ¥è®²å°±æ˜¯ï¼Œä¸€åˆ‡å˜é‡ï¼ˆåŒ…æ‹¬ thisï¼‰éƒ½æ ¹æ®ä½œç”¨åŸŸé“¾æ¥æŸ¥æ‰¾ã€‚</p></blockquote><blockquote><p>è‡³äºä¸ºå•¥ç®­å¤´å‡½æ•°è‡ªèº«æ²¡æœ‰ï¼Ÿè¿™ç©æ„å„¿è¿ ES6 è§„èŒƒåŸæ–‡é‡Œéƒ½æ²¡å†™åŸå› ï¼ˆ<a href="https://262.ecma-international.org/6.0/#sec-arrow-function-definitions">https://262.ecma-international.org/6.0/#sec-arrow-function-definitions</a>ï¼‰ï¼Œåªè¦çŸ¥é“æ˜¯è§„èŒƒæ ‡å‡†å°±è¡Œï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºæ˜¯ç®­å¤´å‡½æ•°çš„ç‰¹æ€§â€¦</p></blockquote><h3 id="ç®­å¤´å‡½æ•°ä¸­çš„this"><a href="#ç®­å¤´å‡½æ•°ä¸­çš„this" class="headerlink" title="ç®­å¤´å‡½æ•°ä¸­çš„this"></a>ç®­å¤´å‡½æ•°ä¸­çš„<code>this</code></h3><blockquote><p>è¯·è®°ä½ï¼šç®­å¤´å‡½æ•°è‡ªèº«æ²¡æœ‰ thisï¼Œå¦‚è‹¥ä½ åœ¨ç®­å¤´å‡½æ•°ä¸­ä½¿ç”¨äº†å®ƒï¼Œé‚£ä¹ˆå®ƒå…¶å®æ˜¯<strong>ç®­å¤´å‡½æ•°çˆ¶çº§</strong>çš„ thisã€‚</p></blockquote><p>æ€ä¹ˆç†è§£è¿™ä¸ª<strong>ç®­å¤´å‡½æ•°çš„çˆ¶çº§</strong>ï¼Ÿå¯ä»¥å‚è€ƒ<strong>ä½ç½®</strong>ï¼Œå®ƒçš„å¤–å±‚çš„<code>console.log</code>çš„<code>this</code>å€¼å³ä¸ºå®ƒçš„<code>this</code>å€¼ã€‚</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// äº‹ä»¶å‡½æ•°ä¸­ï¼š</span><span class="token comment">// æ™®é€šåŒ¿åå‡½æ•°ä¸­çš„ thisï¼ŒæŒ‡å‘äº†äº‹ä»¶æº ele</span>ele<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ele</span>  <span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// æ™®é€šåŒ¿åå‡½æ•° thisï¼Œæ‰§è¡Œäº†å®ƒçš„è°ƒç”¨è€… window</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// window</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">// ä¸‹é¢çš„ç®­å¤´å‡½æ•°å¤–éƒ¨ï¼Œæˆ–è€…å¯ä»¥ç†è§£ä¸ºå…¶ çˆ¶çº§</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ele<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token comment">// ç®­å¤´å‡½æ•°å†…éƒ¨</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä¸ä¸Šé¢é‚£ä¸ª log ä¸€è‡´ï¼Œéƒ½æ˜¯æŒ‡å‘çš„ window</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><p>åˆæ¯”å¦‚ï¼š</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">parentFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// è¿™æ˜¯æ™®é€šåŒ¿åå‡½æ•°çš„å†…éƒ¨ï¼Œå®ƒçš„è°ƒç”¨è€…æ˜¯ windowï¼Œæ‰€ä»¥ä¸‹é¢è¿™å¥ log å°±æ˜¯ window</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token comment">// è¿™é‡Œæ˜¯ç®­å¤´å‡½æ•°å†…éƒ¨ï¼Œä¸Šé¢é‚£å¥ log å°±æ˜¯å¤–éƒ¨ï¼Œè€Œå¤–éƒ¨ this æŒ‡å‘äº† windowï¼Œæ‰€ä»¥ä¸‹é¢è¿™å¥ log çš„å€¼ä¹Ÿæ˜¯ window</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token function">parentFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// window.parentFn()</span></code></pre><p>ç»“åˆä¸Šé¢ä¸¤ç§æ–¹å¼ï¼š</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">ele<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// è¿™é‡Œæ˜¯æ™®é€šåŒ¿åå‡½æ•°çš„å†…éƒ¨ï¼Œthis æŒ‡å‘äº†å®ƒçš„è°ƒç”¨è€…ï¼šele</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token comment">// è¿™é‡Œçš„ this å–å†³äºå¤–é¢çš„ logï¼ŒåŒä¸º ele</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><h4 id="è°ˆè°ˆæˆ‘å¯¹ç®­å¤´å‡½æ•°ä¸æ™®é€šåŒ¿åå‡½æ•°çš„thisåŒºåˆ†ç†è§£"><a href="#è°ˆè°ˆæˆ‘å¯¹ç®­å¤´å‡½æ•°ä¸æ™®é€šåŒ¿åå‡½æ•°çš„thisåŒºåˆ†ç†è§£" class="headerlink" title="è°ˆè°ˆæˆ‘å¯¹ç®­å¤´å‡½æ•°ä¸æ™®é€šåŒ¿åå‡½æ•°çš„thisåŒºåˆ†ç†è§£"></a>è°ˆè°ˆæˆ‘å¯¹ç®­å¤´å‡½æ•°ä¸æ™®é€šåŒ¿åå‡½æ•°çš„<code>this</code>åŒºåˆ†ç†è§£</h4><p>ä»ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªç°è±¡ï¼šå°±æ˜¯åªè¦æœ‰ç®­å¤´å‡½æ•°å­˜åœ¨ï¼Œé‚£ä¹ˆå®ƒçš„<code>this</code>ï¼Œå§‹ç»ˆéƒ½æ˜¯å’Œå¤–é¢ä¸€å±‚æ‰“å°çš„<code>this</code>ä¸€æ ·ã€‚è€Œæ™®é€šçš„åŒ¿åå‡½æ•°ï¼Œä¸ç®¡æ˜¯å¦å¤„äºå…¶ä»–åŒ¿åå‡½æ•°&#x2F;ç®­å¤´å‡½æ•°å†…éƒ¨ï¼ˆä¸ç®¡å±‚çº§å¤šæ·±ï¼‰ï¼Œå®ƒè‡ªèº«çš„<code>this</code>éƒ½åªä¼šæŒ‡å‘å®ƒçš„è°ƒç”¨è€…ã€‚</p><p><strong>æ™®é€šåŒ¿åå‡½æ•°çš„è°ƒç”¨è€…åˆæ˜¯ä¸ªå•¥ï¼Ÿ</strong></p><blockquote><p>é€šè¿‡ fn() æ–¹å¼è°ƒç”¨ï¼šå‡½æ•°åœ¨é€šè¿‡å‡½æ•°åè°ƒç”¨æ—¶ï¼Œè°ƒç”¨è€…å°±æ˜¯ windowï¼Œå¯ä»¥ç†è§£ä¸º window.fn()ï¼Œåªä¸è¿‡ window çœç•¥äº†ã€‚</p></blockquote><blockquote><p>é€šè¿‡ obj.fn() æ–¹å¼è°ƒç”¨ï¼šæ­¤æ—¶è¿™ä¸ªæ™®é€šåŒ¿åå‡½æ•°æ˜¯å¯¹è±¡èº«ä¸Šä¸€ä¸ªæ–¹æ³•ï¼Œå¯¹è±¡è°ƒç”¨è‡ªèº«çš„æ–¹æ³•ï¼Œè°ƒç”¨è€…å°±æ˜¯è¿™ä¸ª objã€‚</p></blockquote><blockquote><p>å¦‚æœæ˜¯äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œä¾‹å¦‚ ele.onclick è§¦å‘çš„äº‹ä»¶ï¼Œè™½ç„¶æ²¡æœ‰æ˜¾å¼çš„è°ƒç”¨è€…ï¼Œä½†æ˜¯å´ç”± ele å¼•èµ·ï¼Œå®ƒçš„è°ƒç”¨è€…å¯ä»¥ç†è§£ä¸º eleã€‚</p></blockquote><div class="success"><blockquote><p>æ€»ç»“ï¼šç®­å¤´å‡½æ•° this å–å†³äºå…¶å‡½æ•°ä½“çš„ä½ç½®ï¼ˆä¸è°ƒç”¨è€…æ— å…³ï¼‰ï¼Œå€¼å§‹ç»ˆä¸å…¶å¤–å±‚çš„ this ä¸€è‡´ã€‚æ™®é€šåŒ¿åå‡½æ•° this å–å†³äºå…¶è°ƒç”¨è€…ï¼ˆä¸ä½ç½®æ— å…³ï¼‰ï¼Œå€¼å§‹ç»ˆæ˜¯è°ƒç”¨è€…ã€‚</p></blockquote></div>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> ECMAScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> ç®­å¤´å‡½æ•° </tag>
            
            <tag> es6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javascript ä¸­çš„äº‹ä»¶ç»„æˆã€åˆ†ç±»ã€ç»‘å®šä¸ç›‘å¬</title>
      <link href="/share/javascript-event/"/>
      <url>/share/javascript-event/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="What"><a href="#What" class="headerlink" title="What?"></a>What?</h3><p>ä¸»è¦æ˜¯ä»‹ç»äº‹ä»¶ç›¸å…³çŸ¥è¯†ã€‚æ¶µç›–äº‹ä»¶çš„ç»„æˆéƒ¨åˆ†ã€å¸¸è§äº‹ä»¶åˆ†ç±»ã€ä»¥åŠå½“æˆ‘ä»¬ä¸ºå…ƒç´ ç»‘å®šäº‹ä»¶ç›‘å¬ä»¥åï¼Œå¦‚ä½•é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼ˆæ•è·ï¼‰ã€é˜»æ­¢é»˜è®¤äº‹ä»¶ã€å§”æ´¾ã€å¦‚ä½•è§£ç»‘â€¦</p><span id="more"></span><h3 id="äº‹ä»¶æ˜¯ç”±å“ªäº›å…ƒç´ æ„æˆçš„ï¼Ÿ"><a href="#äº‹ä»¶æ˜¯ç”±å“ªäº›å…ƒç´ æ„æˆçš„ï¼Ÿ" class="headerlink" title="äº‹ä»¶æ˜¯ç”±å“ªäº›å…ƒç´ æ„æˆçš„ï¼Ÿ"></a>äº‹ä»¶æ˜¯ç”±å“ªäº›å…ƒç´ æ„æˆçš„ï¼Ÿ</h3><h4 id="äº‹ä»¶æº"><a href="#äº‹ä»¶æº" class="headerlink" title="äº‹ä»¶æº"></a>äº‹ä»¶æº</h4><p>æºï¼šæºå¤´ï¼Œæ¥æºã€‚æè¿°äº‹ä»¶çš„äº§ç”Ÿæºå¤´ï¼Œä¾‹å¦‚ç»™ä¸€ä¸ªæŒ‰é’®ç»‘å®šäº†ç‚¹å‡»äº‹ä»¶ï¼Œé‚£ä¹ˆè¿™ä¸ªæŒ‰é’®å°±æ˜¯äº‹ä»¶æº â€”â€” è°ƒç”¨è€…ã€‚</p><blockquote><p>btn.onclick &#x3D; function(){}ï¼Œbtn å³ä¸ºäº‹ä»¶æº</p></blockquote><h4 id="äº‹ä»¶ç±»å‹"><a href="#äº‹ä»¶ç±»å‹" class="headerlink" title="äº‹ä»¶ç±»å‹"></a>äº‹ä»¶ç±»å‹</h4><p>äº‹ä»¶ç±»å‹ï¼Œæ¯”å¦‚å·²çŸ¥çš„ç‚¹å‡»äº‹ä»¶ã€ ç§»å…¥ç§»å‡ºäº‹ä»¶ã€è¡¨å•æäº¤äº‹ä»¶ã€æµè§ˆå™¨äº‹ä»¶â€¦</p><blockquote><p>æ³¨æ„ï¼šç±»ä¼¼äº onclick è¿™ç§æ–¹å¼çš„äº‹ä»¶ç»‘å®šï¼Œå®ƒçš„ç±»å‹æ˜¯ clickã€‚on å‰ç¼€åªæ˜¯ç»‘å®šäº‹ä»¶çš„ä¸€ç§æ–¹å¼ onclick ä¸æ˜¯ç±»å‹ã€‚</p></blockquote><h4 id="äº‹ä»¶å¤„ç†å‡½æ•°"><a href="#äº‹ä»¶å¤„ç†å‡½æ•°" class="headerlink" title="äº‹ä»¶å¤„ç†å‡½æ•°"></a>äº‹ä»¶å¤„ç†å‡½æ•°</h4><p>äº‹ä»¶è¢«è§¦å‘ä»¥åï¼Œæ‰€æ‰§è¡Œçš„å‡½æ•°ä½“ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ˜¯åŒ¿åå‡½æ•°ã€‚</p><blockquote><p>function(){}</p></blockquote><h3 id="äº‹ä»¶å¯¹è±¡-e"><a href="#äº‹ä»¶å¯¹è±¡-e" class="headerlink" title="äº‹ä»¶å¯¹è±¡ e"></a>äº‹ä»¶å¯¹è±¡ <code>e</code></h3><h4 id="äº‹ä»¶å¯¹è±¡è·å–"><a href="#äº‹ä»¶å¯¹è±¡è·å–" class="headerlink" title="äº‹ä»¶å¯¹è±¡è·å–"></a>äº‹ä»¶å¯¹è±¡è·å–</h4><blockquote><p>window.event ä»¥å‰åªèƒ½åœ¨ IE ä¸­èƒ½ä½¿ç”¨</p></blockquote><blockquote><p>Chrome å’Œ Firefox æä¾›äº†å¦ä¸€ç§æ–¹æ³• å³ æä¾›ä¸€ä¸ª å‚æ•°ã€‚ï¼ˆäº‹ä»¶å¤„ç†å‡½æ•°çš„ç¬¬ä¸€ä¸ªé»˜è®¤å‚æ•°ï¼‰</p></blockquote><p>å­˜åœ¨å…¼å®¹æ€§ï¼Œå…¼å®¹å¤„ç†ï¼š</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> e <span class="token operator">=</span> e <span class="token operator">||</span> window<span class="token punctuation">.</span>e<span class="token punctuation">;</span>  <span class="token comment">// ...</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><h4 id="äº‹ä»¶ç›®æ ‡å…ƒç´ è·å–"><a href="#äº‹ä»¶ç›®æ ‡å…ƒç´ è·å–" class="headerlink" title="äº‹ä»¶ç›®æ ‡å…ƒç´ è·å–"></a>äº‹ä»¶ç›®æ ‡å…ƒç´ è·å–</h4><p>å…¼å®¹æ€§å¤„ç†ï¼š</p><blockquote><p>target &#x3D; e.target || e.srcEle (IE)</p></blockquote><h4 id="è·å–è§¦å‘äº‹ä»¶çš„é¼ æ ‡æŒ‰é”®"><a href="#è·å–è§¦å‘äº‹ä»¶çš„é¼ æ ‡æŒ‰é”®" class="headerlink" title="è·å–è§¦å‘äº‹ä»¶çš„é¼ æ ‡æŒ‰é”®"></a>è·å–è§¦å‘äº‹ä»¶çš„é¼ æ ‡æŒ‰é”®</h4><p>è·å–ï¼šé<code>IE</code>ä¸‹ä¸º<code>e.button</code>ï¼Œ<code>IE</code>ä¸‹ä¸º<code>e.which</code>ã€‚</p><p>å¯¹åº”å€¼ï¼š</p><table><thead><tr><th>ç¯å¢ƒ</th><th>é¼ æ ‡å·¦é”®</th><th>é¼ æ ‡æ»šè½®</th><th>é¼ æ ‡å³é”®</th></tr></thead><tbody><tr><td>IE</td><td>1</td><td>2</td><td>3</td></tr><tr><td>é IE</td><td>0</td><td>1</td><td>2</td></tr></tbody></table><h4 id="è·å–å…‰æ ‡ä½ç½®"><a href="#è·å–å…‰æ ‡ä½ç½®" class="headerlink" title="è·å–å…‰æ ‡ä½ç½®"></a>è·å–å…‰æ ‡ä½ç½®</h4><ul><li><code>e.clientX/clientYY</code>è·å–åˆ°çš„æ˜¯<strong>è§¦å‘ç‚¹</strong>ç›¸å¯¹æµè§ˆå™¨å¯è§†åŒºåŸŸå·¦ä¸Šè§’è·ç¦»ï¼Œä¸éšé¡µé¢æ»šåŠ¨è€Œæ”¹å˜ã€‚</li><li><code>e.pageX/pageY</code>è·å–åˆ°çš„æ˜¯<strong>è§¦å‘ç‚¹</strong>ç›¸å¯¹æ–‡æ¡£åŒºåŸŸå·¦ä¸Šè§’è·ç¦»ï¼Œä¼šéšç€é¡µé¢æ»šåŠ¨è€Œæ”¹å˜</li></ul><p><strong>æ‹“å±•ï¼Œæ³¨æ„ display ä¸º none æ—¶ï¼Œ å®½é«˜å‡ä¸º 0ï¼Œæ‹¿æ•°æ®çš„æ—¶å€™æ³¨æ„åˆ¤æ–­</strong>ï¼Œ<code>ele</code>æŒ‡çš„å…ƒç´ ã€‚</p><ul><li><p><code>ele.offsetX/offsetY</code>è·å–åˆ°æ˜¯<strong>è§¦å‘ç‚¹</strong>ç›¸å¯¹è¢«è§¦å‘<code>dom</code>çš„å·¦ä¸Šè§’è·ç¦»ï¼Œä¸è¿‡å·¦ä¸Šè§’åŸºå‡†ç‚¹åœ¨ä¸åŒæµè§ˆå™¨ä¸­æœ‰åŒºåˆ«ï¼Œå…¶ä¸­åœ¨<code>IE</code>ä¸­ä»¥å†…å®¹åŒºå·¦ä¸Šè§’ä¸ºåŸºå‡†ç‚¹ä¸åŒ…æ‹¬è¾¹æ¡†ï¼Œå¦‚æœ<strong>è§¦å‘ç‚¹</strong>åœ¨è¾¹æ¡†ä¸Šä¼šè¿”å›è´Ÿå€¼ï¼Œè€Œ<code>chrome</code>ä¸­ä»¥è¾¹æ¡†å·¦ä¸Šè§’ä¸ºåŸºå‡†ç‚¹ã€‚</p></li><li><p><code>ele.layerX/layerY</code>è·å–åˆ°çš„æ˜¯<strong>è§¦å‘ç‚¹</strong>ç›¸å¯¹è¢«è§¦å‘<code>dom</code>å·¦ä¸Šè§’çš„è·ç¦»ï¼Œæ•°å€¼ä¸<code>offsetX/offsetY</code>ç›¸åŒï¼Œè¿™ä¸ªå˜é‡å°±æ˜¯<code>firefox</code>ç”¨æ¥æ›¿ä»£<code>offsetX/offsetY</code>çš„ã€‚ï¼ˆæœ‰ä¸ªå‰ææ¡ä»¶å°±æ˜¯ï¼Œè¢«è§¦å‘çš„ dom éœ€è¦æ˜¯æœ‰å®šä½çš„å…ƒç´ ï¼Œå¦åˆ™ä¼šè¿”å›ç›¸å¯¹<code>html</code>æ–‡æ¡£åŒºåŸŸå·¦ä¸Šè§’çš„è·ç¦»ï¼‰</p></li><li><p><code>ele.offsetWidth/offsetHeight</code><strong>å…ƒç´ </strong>çš„å®½åº¦&#x2F;é«˜åº¦ï¼ŒåŒ…æ‹¬<code>border</code>ã€‚</p></li><li><p><code>ele.offsetLeft/offsetTop</code><strong>å…ƒç´ </strong>åˆ°æœ‰å®šä½çš„çˆ¶å…ƒç´ çš„å·¦è¾¹&#x2F;ä¸Šè¾¹çš„è·ç¦» ï¼Œå¦‚æœçˆ¶å…ƒç´ éƒ½æ²¡æœ‰å®šä½ ï¼Œé‚£å°±æ˜¯ç›¸å¯¹äº body ä¸Šè¾¹çš„è·ç¦»ã€‚</p></li><li><p><code>ele.offsetParent</code>æ‹¿åˆ°æœ‰å®šä½çš„çˆ¶å…ƒç´ ï¼Œéƒ½æ²¡å®šä½ï¼Œé‚£ä¹ˆæ‹¿åˆ°çš„å°±æ˜¯<code>body</code>ã€‚</p></li><li><p><code>ele.clientWidth/clientHeight</code>å…ƒç´ çš„å®½åº¦&#x2F;é«˜åº¦ï¼Œä¸å«<code>border</code>ã€‚</p></li><li><p><code>ele.clientLeft/clientTop</code>å…ƒç´ çš„å·¦&#x2F;ä¸Šè¾¹æ¡†å®½åº¦</p></li></ul><p><strong>ç«ç‹ä»¥å¤–çš„æ‰€æœ‰æµè§ˆå™¨ä½¿ç”¨ï¼ˆå…¼å®¹ IEï¼‰</strong></p><ul><li><p><code>window.screenLeft</code>æµè§ˆå™¨çª—å£ç›¸å¯¹äºæ˜¾ç¤ºå™¨(å±å¹•)å·¦è¾¹çš„è·ç¦»</p></li><li><p><code>window.screenTop</code>æµè§ˆå™¨çª—å£ç›¸å¯¹äºæ˜¾ç¤ºå™¨(å±å¹•)ä¸Šè¾¹çš„è·ç¦»</p></li></ul><p><strong>ç«ç‹æµè§ˆå™¨ä½¿ç”¨ï¼ˆä¸å…¼å®¹ IEï¼‰</strong></p><ul><li><p><code>window.screenX</code>æµè§ˆå™¨çª—å£ç›¸å¯¹äºæ˜¾ç¤ºå™¨(å±å¹•)å·¦è¾¹çš„è·ç¦»</p></li><li><p><code>window.screenY</code>æµè§ˆå™¨çª—å£ç›¸å¯¹äºæ˜¾ç¤ºå™¨(å±å¹•)ä¸Šè¾¹çš„è·ç¦»</p></li></ul><h4 id="é”®ç›˜äº‹ä»¶å¯¹è±¡çš„å±æ€§"><a href="#é”®ç›˜äº‹ä»¶å¯¹è±¡çš„å±æ€§" class="headerlink" title="é”®ç›˜äº‹ä»¶å¯¹è±¡çš„å±æ€§"></a>é”®ç›˜äº‹ä»¶å¯¹è±¡çš„å±æ€§</h4><blockquote><p>ctrlkey ctrl æŒ‰é’®æ˜¯å¦è¢«æŒ‰ä¸‹ï¼Œå€¼ä¸º boolean</p></blockquote><blockquote><p>shiftkey shift æŒ‰é’®æ˜¯å¦è¢«æŒ‰ä¸‹ï¼Œå€¼ä¸º boolean</p></blockquote><blockquote><p>altkey alt æŒ‰é’®æ˜¯å¦è¢«æŒ‰ä¸‹ï¼Œå€¼ä¸º boolean</p></blockquote><p>â€¦</p><p><code>keyCode</code>è·å–è§¦å‘<code>kayup</code>äº‹ä»¶çš„é”®ç›˜æŒ‰é’®ç¼–å·ï¼Œå¯ä»¥é€šè¿‡<code>keyCode</code>ä¸ºå…·ä½“çš„æŸä¸€ä¸ªæŒ‰é”®æ·»åŠ å¯¹åº”çš„åŠŸèƒ½é€»è¾‘ã€‚</p><hr><h3 id="å¸¸è§çš„å‡ ç§äº‹ä»¶ç±»å‹"><a href="#å¸¸è§çš„å‡ ç§äº‹ä»¶ç±»å‹" class="headerlink" title="å¸¸è§çš„å‡ ç§äº‹ä»¶ç±»å‹"></a><strong>å¸¸è§çš„å‡ ç§äº‹ä»¶ç±»å‹</strong></h3><h4 id="é¼ æ ‡äº‹ä»¶"><a href="#é¼ æ ‡äº‹ä»¶" class="headerlink" title="é¼ æ ‡äº‹ä»¶"></a>é¼ æ ‡äº‹ä»¶</h4><ul><li><code>click</code>â€”é¼ æ ‡å·¦é”®å•å‡»ã€‚</li><li><code>dblclick</code>â€”é¼ æ ‡åŒå‡»ã€‚</li><li><code>contextmenu</code>â€”é¼ æ ‡å³é”®ç‚¹å‡»äº‹ä»¶ã€‚</li><li><code>mousedown</code>â€”é¼ æ ‡æŒ‰ä¸‹ã€‚</li><li><code>mouseup</code>â€”é¼ æ ‡æŠ¬èµ·(æ¾å¼€æŒ‰é”®)ã€‚</li><li><code>mousemove</code>â€”é¼ æ ‡ç§»åŠ¨ã€‚</li><li><code>mouseenter</code>â€”é¼ æ ‡ç§»å…¥ã€‚</li><li><code>mouseover</code>â€”é¼ æ ‡ç§»å…¥ã€‚</li><li><code>mouseleave</code>â€”é¼ æ ‡ç¦»å¼€ã€‚</li><li><code>mouseout</code>â€”é¼ æ ‡ç¦»å¼€ã€‚</li></ul><h5 id="mouseenterå’Œmouseoverçš„åŒºåˆ«ï¼š"><a href="#mouseenterå’Œmouseoverçš„åŒºåˆ«ï¼š" class="headerlink" title="mouseenterå’Œmouseoverçš„åŒºåˆ«ï¼š"></a><code>mouseenter</code>å’Œ<code>mouseover</code>çš„åŒºåˆ«ï¼š</h5><blockquote><p><code>over</code>ä¼šç»™å­å…ƒç´ åŒæ—¶ç»‘å®šæœ‰å†’æ³¡çš„è¡Œä¸º</p></blockquote><blockquote><p><code>enter</code>æ²¡æœ‰å†’æ³¡ï¼Œä¸ä¼šç»™å…¶å­å…ƒç´ ç»‘å®šäº‹ä»¶</p></blockquote><h4 id="é”®ç›˜äº‹ä»¶"><a href="#é”®ç›˜äº‹ä»¶" class="headerlink" title="é”®ç›˜äº‹ä»¶"></a>é”®ç›˜äº‹ä»¶</h4><ul><li><code>keydown</code>æŒ‰ä¸‹é”®ç›˜é”®</li><li><code>keyup</code>ç´§æ¥ç€<code>keydown</code>äº‹ä»¶è§¦å‘ï¼ˆåªæœ‰æŒ‰ä¸‹å­—ç¬¦é”®æ—¶è§¦å‘ï¼‰ã€‚</li><li><code>keypress</code>é‡Šæ”¾é”®ç›˜é”®ã€‚</li></ul><h4 id="æµè§ˆå™¨äº‹ä»¶"><a href="#æµè§ˆå™¨äº‹ä»¶" class="headerlink" title="æµè§ˆå™¨äº‹ä»¶"></a>æµè§ˆå™¨äº‹ä»¶</h4><ul><li><code>load</code>â€”é¡µé¢èµ„æºåŠ è½½ç»“æŸæ—¶æ‰§è¡Œ, é€šè¿‡è¿™ä¸ªå‡½æ•°å¯ä»¥ä½¿<code>js</code>æ”¾åœ¨<code>head</code>ä¸­ä¸å½±å“æ­£å¸¸åŠ è½½ã€‚</li><li><code>scroll</code>â€”æµè§ˆå™¨æ»šåŠ¨æ—¶æ‰§è¡Œï¼Œä¸æ»šè½®æ— å…³ï¼Œåªå’Œæµè§ˆå™¨çš„æ»šåŠ¨æ¡æ˜¯å¦æ»šåŠ¨æœ‰å…³ç³»ã€‚</li><li><code>resize</code>â€”æµè§ˆå™¨çš„å°ºå¯¸å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘æ‰§è¡Œã€‚<del>ï¼ˆå¯ä»¥ç”¨<code>js</code>å®ç°ï¼Œå“åº”å¼å¸ƒå±€ï¼‰ä¸å’‹ç”¨</del></li></ul><pre class="language-javascript" data-language="javascript"><code class="language-javascript">window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><h4 id="è§¦æ‘¸äº‹ä»¶"><a href="#è§¦æ‘¸äº‹ä»¶" class="headerlink" title="è§¦æ‘¸äº‹ä»¶"></a>è§¦æ‘¸äº‹ä»¶</h4><p><strong><code>touchstart</code>ä¼šå…ˆäº<code>click</code>äº‹ä»¶æ‰§è¡Œï¼Œå¦‚æœä¸æƒ³æ‰§è¡Œ<code>click</code>ï¼Œå¯ä»¥é˜»æ­¢é»˜è®¤äº‹ä»¶ã€‚</strong></p><ul><li><code>touchstart</code>æ‰‹æŒ‡è§¦æ‘¸å±å¹•æ—¶è§¦å‘ï¼Œå³ä½¿å·²ç»æœ‰æ‰‹æŒ‡åœ¨å±å¹•ä¸Šä¹Ÿä¼šè§¦å‘ã€‚</li><li><code>touchmove</code>æ‰‹æŒ‡åœ¨å±å¹•æ»‘åŠ¨æ—¶è§¦å‘ã€‚</li><li><code>touchend</code>æ‰‹æŒ‡ä»å±å¹•æ—¶ç§»å¼€æ—¶è§¦å‘ã€‚</li></ul><pre class="language-javascript" data-language="javascript"><code class="language-javascript">ele<span class="token punctuation">.</span><span class="token function-variable function">ontouchstart</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><h4 id="è¡¨å•äº‹ä»¶"><a href="#è¡¨å•äº‹ä»¶" class="headerlink" title="è¡¨å•äº‹ä»¶"></a>è¡¨å•äº‹ä»¶</h4><ul><li><code>change</code>â€”ç„¦ç‚¹å‰åæ¯”è¾ƒï¼Œå‘ç”Ÿäº†æ”¹å˜åˆ™è§¦å‘è¯¥å‡½æ•°ã€‚</li><li><code>input</code>â€”åªè¦è¾“å…¥äº†å†…å®¹å°±ä¼šè§¦å‘ï¼Œä¸€ç›´è¾“å…¥ä¸€ç›´è§¦å‘ã€‚</li><li><code>focus</code>â€”è·å–ç„¦ç‚¹ã€‚</li><li><code>blur</code>â€”å¤±å»ç„¦ç‚¹ã€‚</li><li><code>submit</code>â€”æäº¤äº‹ä»¶ã€‚</li></ul><hr><h3 id="äº‹ä»¶ç»‘å®šä¸äº‹ä»¶è§£ç»‘"><a href="#äº‹ä»¶ç»‘å®šä¸äº‹ä»¶è§£ç»‘" class="headerlink" title="äº‹ä»¶ç»‘å®šä¸äº‹ä»¶è§£ç»‘"></a><strong>äº‹ä»¶ç»‘å®šä¸äº‹ä»¶è§£ç»‘</strong></h3><h4 id="æ·»åŠ ä¸€ä¸ªäº‹ä»¶ç›‘å¬"><a href="#æ·»åŠ ä¸€ä¸ªäº‹ä»¶ç›‘å¬" class="headerlink" title="æ·»åŠ ä¸€ä¸ªäº‹ä»¶ç›‘å¬"></a>æ·»åŠ ä¸€ä¸ªäº‹ä»¶ç›‘å¬</h4><h5 id="addEventListener"><a href="#addEventListener" class="headerlink" title="addEventListener"></a><code>addEventListener</code></h5><p><strong>æ³¨æ„ï¼šé€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥åŒæ—¶ç»‘å®šå¤šä¸ªåŒç±»å‹äº‹ä»¶ã€‚</strong></p><ul><li>ç¬¬ä¸€ä¸ªå‚æ•°ï¼šäº‹ä»¶çš„ç±»å‹ï¼Œä¸éœ€è¦åŠ <code>on</code>å‰ç¼€ã€‚</li><li>ç¬¬äºŒä¸ªå‚æ•°ï¼šæ˜¯å‡½æ•°æ‰§è¡Œçš„å†…å®¹ã€‚</li><li>ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šå†’æ³¡è¿˜æ˜¯æ•è·<code>false</code>ä¸ºå†’æ³¡ï¼Œ<code>true</code>ä¸ºæ•è·ï¼Œé»˜è®¤ä¸ºå†’æ³¡<code>false</code>ã€‚</li></ul><pre class="language-javascript" data-language="javascript"><code class="language-javascript">ele<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æˆ‘æ˜¯ç»‘å®šçš„ç¬¬ä¸€ä¸ªäº‹ä»¶'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ele<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æˆ‘æ˜¯ç»‘å®šçš„ç¬¬äºŒä¸ªäº‹ä»¶'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h5 id="attachEvent"><a href="#attachEvent" class="headerlink" title="attachEvent"></a><code>attachEvent</code></h5><ul><li>ç¬¬ä¸€ä¸ªå‚æ•°ï¼š<code>on</code> + äº‹ä»¶ç±»å‹ã€‚</li><li>ç¬¬äºŒä¸ªå‚æ•°ï¼šæ˜¯å‡½æ•°ï¼Œéœ€è¦æ‰§è¡Œçš„ä»£ç ã€‚</li></ul><pre class="language-javascript" data-language="javascript"><code class="language-javascript">ele<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">'onclick'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æˆ‘æ˜¯ç»‘å®šçš„ç¬¬ä¸€ä¸ªäº‹ä»¶'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ele<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">'onclick'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æˆ‘æ˜¯ç»‘å®šçš„ç¬¬äºŒä¸ªäº‹ä»¶'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h5 id="ä¸¤è€…åŒºåˆ«"><a href="#ä¸¤è€…åŒºåˆ«" class="headerlink" title="ä¸¤è€…åŒºåˆ«"></a>ä¸¤è€…åŒºåˆ«</h5><p>å­˜åœ¨å…¼å®¹æ€§çš„é—®é¢˜ï¼Œå¯ä»¥è‡ªå·±é€šè¿‡å°è£…å‡½æ•°è§£å†³å…¼å®¹é—®é¢˜ã€‚</p><blockquote><p>addEventListenerï¼š-ie 8 ä»¥ä¸Šç‰ˆæœ¬çš„æµè§ˆå™¨æ”¯æŒï¼Œ<strong>é¡ºåºç»‘å®š -&gt; é¡ºåºæ‰§è¡Œ</strong></p></blockquote><blockquote><p>attachEventï¼š**-ie 10 å’Œ ie 9ï¼Œé¡ºåºç»‘å®š é¡ºåºæ‰§è¡Œã€‚-ie 8 åŠä»¥ä¸‹æ˜¯é¡ºåºç»‘å®š -&gt; å€’å™æ‰§è¡Œã€‚**</p></blockquote><h4 id="è§£ç»‘äº‹ä»¶"><a href="#è§£ç»‘äº‹ä»¶" class="headerlink" title="è§£ç»‘äº‹ä»¶"></a>è§£ç»‘äº‹ä»¶</h4><h5 id="removeEvent-â€˜äº‹ä»¶ç±»å‹â€™ï¼Œfn"><a href="#removeEvent-â€˜äº‹ä»¶ç±»å‹â€™ï¼Œfn" class="headerlink" title="removeEvent(â€˜äº‹ä»¶ç±»å‹â€™ï¼Œfn)"></a><code>removeEvent</code>(â€˜äº‹ä»¶ç±»å‹â€™ï¼Œfn)</h5><blockquote><p>addEventListener -&gt; removeEventListener è§£ç»‘çš„æ—¶å€™ï¼Œäº‹ä»¶ç±»å‹å’Œäº‹ä»¶å¤„ç†å‡½æ•°(<strong>åœ°å€</strong>)å¿…é¡»æ˜¯ä¸€æ ·çš„ã€‚</p></blockquote><p><strong>æ³¨æ„ï¼šéœ€è¦è§£ç»‘çš„æ—¶å€™ï¼Œäº‹ä»¶å¤„ç†å‡½æ•° fn ä¸èƒ½æ˜¯åŒ¿åå‡½æ•°ï¼Œå¦åˆ™æ— æ³•æ­£å¸¸è§£ç»‘ã€‚fn åœ¨ç»‘å®šå’Œè§£ç»‘è¿‡ç¨‹ä¸­ï¼Œä¹¦å†™ç»“æ„è¦å®Œå…¨ä¿æŒä¸€è‡´ã€‚</strong></p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// æ³¨æ„ï¼šç”±äºåŒ¿å fnåœ°å€ä¸ä¸€æ · è¿™ç§æ–¹å¼ è§£ç»‘ä¸äº†</span>ele<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'object'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// Error</span>document<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  ele<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'object'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">// é‡‡ç”¨è¿™ç§æ–¹å¼è¿›è¡Œå‡½æ•°è§£ç»‘</span><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'object'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>ele<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>document<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  ele<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><h5 id="detachEvent-â€˜äº‹ä»¶ç±»å‹â€™ï¼Œfn"><a href="#detachEvent-â€˜äº‹ä»¶ç±»å‹â€™ï¼Œfn" class="headerlink" title="detachEvent(â€˜äº‹ä»¶ç±»å‹â€™ï¼Œfn)"></a><code>detachEvent</code>(â€˜äº‹ä»¶ç±»å‹â€™ï¼Œfn)</h5><p>è¦æ±‚åŒä¸Šã€‚</p><blockquote><p>attachEvent -&gt; detachEvent</p></blockquote><hr><h3 id="é˜»æ­¢é»˜è®¤äº‹ä»¶"><a href="#é˜»æ­¢é»˜è®¤äº‹ä»¶" class="headerlink" title="é˜»æ­¢é»˜è®¤äº‹ä»¶"></a><strong>é˜»æ­¢é»˜è®¤äº‹ä»¶</strong></h3><p>æ¯”å¦‚<code>a</code>æ ‡ç­¾æœ‰<code>href</code>æ—¶ï¼Œä¼šè‡ªåŠ¨è·³è½¬ï¼Œå¦‚æœè¦é˜»æ­¢è¿™ä¸ªè¡Œä¸ºï¼š</p><blockquote><p>æ–¹å¼ä¸€ï¼še.parentDefault() é IE æµè§ˆå™¨</p></blockquote><blockquote><p>æ–¹å¼äºŒï¼šreturn false; ä½¿ç”¨ return false é˜»æ­¢é»˜è®¤äº‹ä»¶ï¼Œåªèƒ½å°† return false æ”¾åœ¨å‡½æ•°çš„æœ€åé¢</p></blockquote><blockquote><p>æ–¹å¼ä¸‰ï¼še.returnValue &#x3D; falseï¼›</p></blockquote><h3 id="äº‹ä»¶å†’æ³¡ä¸äº‹ä»¶æ•è·"><a href="#äº‹ä»¶å†’æ³¡ä¸äº‹ä»¶æ•è·" class="headerlink" title="äº‹ä»¶å†’æ³¡ä¸äº‹ä»¶æ•è·"></a><strong>äº‹ä»¶å†’æ³¡ä¸äº‹ä»¶æ•è·</strong></h3><p><strong>å†’æ³¡ï¼šä»å­å…ƒç´ åˆ°æ ¹å…ƒç´ ï¼Œä»å°åˆ°å¤§ã€‚æ•è·ï¼šä»æ ¹å…ƒç´ åˆ°å­å…ƒç´ ï¼Œä»å¤§åˆ°å°ã€‚</strong></p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/* â€‹      inner â€‹        center â€‹          outerâ€‹            bodyâ€‹              htmlâ€‹                documwntâ€‹                  windowâ€‹    äº‹ä»¶æ‰§è¡Œæœºåˆ¶ å†’æ³¡ æ•è·â€‹    */</span></code></pre><h4 id="é˜»æ­¢å†’æ³¡ï¼ˆå­˜åœ¨ä½ç‰ˆæœ¬å…¼å®¹ï¼‰"><a href="#é˜»æ­¢å†’æ³¡ï¼ˆå­˜åœ¨ä½ç‰ˆæœ¬å…¼å®¹ï¼‰" class="headerlink" title="é˜»æ­¢å†’æ³¡ï¼ˆå­˜åœ¨ä½ç‰ˆæœ¬å…¼å®¹ï¼‰"></a>é˜»æ­¢å†’æ³¡ï¼ˆå­˜åœ¨ä½ç‰ˆæœ¬å…¼å®¹ï¼‰</h4><blockquote><p>e.stopPropagation(); or e.cancelBubble &#x3D; true;</p></blockquote><p>åªæœ‰ç»‘å®šäº†åŒç±»å‹äº‹ä»¶æ‰ä¼šè§¦å‘å†’æ³¡ã€‚</p><p>é˜»æ­¢å†’æ³¡æœºåˆ¶ï¼Œåªé’ˆå¯¹äº‹ä»¶æºæœ¬èº«ï¼Œå¦‚æœé€šè¿‡äº‹ä»¶å§”æ´¾çš„å½¢å¼ä¸ºå…¶å­å…ƒç´ æ·»åŠ äº‹ä»¶ï¼Œé‚£ä¹ˆå°±ä¸èƒ½å¯¹å…¶å­å…ƒç´ å®è¡Œé˜»æ­¢å†’æ³¡</p><hr><h3 id="äº‹ä»¶å§”æ´¾"><a href="#äº‹ä»¶å§”æ´¾" class="headerlink" title="äº‹ä»¶å§”æ´¾"></a><strong>äº‹ä»¶å§”æ´¾</strong></h3><p>æŠŠè¿™ä¸ªäº‹ä»¶ç»‘å®šåœ¨çˆ¶å…ƒç´ èº«ä¸Šï¼Œç„¶åç”±çˆ¶å…ƒç´ å§”æ´¾ç»™å­å…ƒç´ ã€‚</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">box<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// é€šè¿‡ e.target å»åˆ¤æ–­ ç›®æ ‡æºå…ƒç´ æ˜¯å“ªä¸€ä¸ª</span>  <span class="token comment">// console.log(e.target)</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>className <span class="token operator">==</span> <span class="token string">'dv'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ç‚¹åˆ°å°çš„äº†'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// æ¯”å¦‚è¿™é‡Œï¼Œè®¾ç½®é˜»æ­¢å†’æ³¡å°±ä¼šå¤±æ•ˆ</span>    <span class="token comment">//e.target.stopPropagation()</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> äº‹ä»¶å†’æ³¡ </tag>
            
            <tag> äº‹ä»¶å§”æ´¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javascript ä¸­çš„ç¬¦å·é›†åˆ</title>
      <link href="/share/javascript-mark/"/>
      <url>/share/javascript-mark/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><p>é€†æ°´è¡ŒèˆŸï¼Œä¸è¿›åˆ™é€€ã€‚</p><p>éšç€<code>ECMAScript</code>æ ‡å‡†çš„ä¸æ–­æ›´æ–°è¿­ä»£ï¼Œä½ ä¼šå‘ç°åœ¨<code>js</code>ä»£ç ä¸­ï¼Œç¬¦å·è¶Šæ¥è¶Šå¤šï¼Œç¨ä¸å­¦ä¹ å°±ä¼šä¸æ‡‚å…¶å«ä¹‰ï¼Œæ›´åˆ«è°ˆä½¿ç”¨äº†ã€‚</p><p>æœ¬æ–‡å°±ä¸ªäººåœ¨é¡¹ç›®ä¸­ä½¿ç”¨åˆ°çš„ç¬¦å·ç»“åˆä»£ç è¿›è¡Œä»‹ç» ğŸ˜®â€ğŸ’¨ğŸ˜®â€ğŸ’¨ğŸ˜®â€ğŸ’¨<del>å½“ç„¶ç±»ä¼¼åŸºç¡€è¿ç®—ã€å¹‚è¿ç®—ã€è‡ªå¢è‡ªå‡ã€å¤§å°æ¯”è¾ƒã€ä¸‰ç›®è¿ç®—ç¬¦ç­‰ç­‰å°±å¿½ç•¥äº†</del>â€¦</p><span id="more"></span><h3 id="é€»è¾‘ä½è¿ç®—-ã€-amp-ã€-ã€-ã€-lt-lt-ã€-gt-gt"><a href="#é€»è¾‘ä½è¿ç®—-ã€-amp-ã€-ã€-ã€-lt-lt-ã€-gt-gt" class="headerlink" title="é€»è¾‘ä½è¿ç®—|ã€&amp;ã€~ã€^ã€&lt;&lt;ã€&gt;&gt;"></a>é€»è¾‘ä½è¿ç®—<code>|ã€&amp;ã€~ã€^ã€&lt;&lt;ã€&gt;&gt;</code></h3><p>å°†éœ€è¦è¿ç®—çš„ä¸¤ä¸ªå€¼è½¬ä¸ºäºŒè¿›åˆ¶æ•°ï¼Œè¿›è¡Œä½<strong>æˆ–ã€ä¸ã€éã€å¼‚æˆ–ã€å·¦ç§»ã€å³ç§»</strong>è¿ç®—ã€‚ å¯¹åº”è¡ç”Ÿçš„æœ‰<code>~=ã€&amp;=ã€|=ã€^=ã€&lt;&lt;=ã€&gt;&gt;=</code>ã€‚ğŸ™„ğŸ™„<br>ğŸ™„<del>è¿™ä¸ªç›¸å¯¹æ¥è¯´ç”¨çš„å¾ˆå°‘ï¼Œä½†ä½ å¿…é¡»è¦äº†è§£ã€‚</del></p><p><code>eg.</code></p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>a <span class="token operator">&amp;=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// a = a &amp; 3 = 5 &amp; 3 = 1;</span></code></pre><blockquote><p><code>&gt;&gt;</code> å’Œ <code>&lt;&lt;</code> å³ç§»å·¦ç§»è¿ç®—ï¼Œå°†æ“ä½œæ•°è½¬ä¸ºäºŒè¿›åˆ¶åï¼Œè¿”å›ç§»åŠ¨å¯¹åº”ä½æ•°åçš„æ–°å€¼ï¼Œç§»åŠ¨è¿‡ç¨‹ä¸­ï¼Œè¶…å‡ºéƒ¨åˆ†å»é™¤ï¼Œè¡¥å……éƒ¨åˆ†è¡¥ 0</p></blockquote><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">//  00000000000000000000000000000101</span><span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">//  00000000000000000000000000000010</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">>></span> b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  00000000000000000000000000000001</span></code></pre><p>é™¤æ­¤ä¹‹å¤–è¿˜æœ‰æ— ç¬¦å·å³ä½ç§» <code>&gt;&gt;&gt;</code>ï¼Œä¸å³ä½ç§» <code>&gt;&gt;</code>çš„åŒºåˆ«å°±æ˜¯å‰è€…çš„ç¬¦å·ä½å§‹ç»ˆä¸º 0ï¼Œå³æ­£æ•°ã€‚</p><h3 id="é€—å·æ“ä½œç¬¦"><a href="#é€—å·æ“ä½œç¬¦" class="headerlink" title="é€—å·æ“ä½œç¬¦"></a>é€—å·æ“ä½œç¬¦</h3><p>å¯¹é€—å·è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼ï¼Œå¹¶è¿”å›æœ€åä¸€é¡¹çš„å€¼ã€‚<del>è¿™ä¸ªç›®å‰ä¹Ÿä¸æ˜¯ç‰¹åˆ«å¸¸è§</del></p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>a <span class="token operator">=</span> <span class="token punctuation">(</span>i<span class="token operator">++</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// a = 2</span></code></pre><h3 id="è§£æ„èµ‹å€¼è¿ç®—ç¬¦"><a href="#è§£æ„èµ‹å€¼è¿ç®—ç¬¦" class="headerlink" title="è§£æ„èµ‹å€¼è¿ç®—ç¬¦..."></a>è§£æ„èµ‹å€¼è¿ç®—ç¬¦<code>...</code></h3><p>æ¯”è¾ƒå¸¸è§çš„ä¸€ä¸ªéœ€æ±‚ï¼ŒåŒæ—¶åœ¨é¢è¯•çš„æ—¶å€™ä¹Ÿæœ‰å¯èƒ½ä¼šè¢«é—®åˆ°ã€‚<strong>å¦‚ä½•å¯¹æœªçŸ¥ keys çš„å¯¹è±¡è§£æ„ï¼Œæ‹¿åˆ°é™¤å±æ€§ xx å¤–çš„å…¶ä»–å±æ€§é›†åˆï¼Ÿ</strong></p><p>æœ‰çš„ç«¥é‹å¯èƒ½é©¬ä¸Šå°±æƒ³åˆ°<code>copy å† delete obj.xx</code>â€¦<del>å½“ç„¶æˆ‘ä¸å»ºè®®è¿™ä¹ˆå¹²</del></p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token punctuation">&#123;</span> a<span class="token punctuation">,</span> <span class="token operator">...</span>other <span class="token punctuation">&#125;</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>other<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#123; b: 'b', c: false &#125;</span><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token punctuation">[</span>arr0<span class="token punctuation">,</span> <span class="token operator">...</span>arrOther<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr0<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arrOther<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [2, 3, 4, 5]</span></code></pre><h3 id="å¯é€‰é“¾æ“ä½œç¬¦"><a href="#å¯é€‰é“¾æ“ä½œç¬¦" class="headerlink" title="å¯é€‰é“¾æ“ä½œç¬¦?."></a>å¯é€‰é“¾æ“ä½œç¬¦<code>?.</code></h3><p><strong>å¾ˆå¸¸ç”¨ï¼Œå¿…é¡»æŒæ¡</strong>ã€‚å…è®¸è¯»å–ä½äºè¿æ¥å¯¹è±¡é“¾æ·±å¤„çš„å±æ€§çš„å€¼ï¼Œä½œç”¨ç±»ä¼¼<code>.</code>åŒºåˆ«å°±æ˜¯å‰è€…<code>?.</code>å…è®¸å¯¹è±¡ä¸º<code>null/undefined</code>ï¼Œå½“è®¿é—®çš„å¯¹è±¡ä¸º<code>null/undefined</code>æ—¶ï¼Œä¸ä¼šæ‰§è¡Œ<code>.</code>åé¢çš„é€»è¾‘ï¼Œä¸”ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼ˆæ­¤æ—¶è¿”å›<code>undefined</code>ï¼‰ã€‚é™¤æ­¤å¤–ï¼Œ<code>?.</code>ä¹Ÿå¯ä½œç”¨äºæ•°ç»„ã€å‡½æ•°â€¦<code>eg.</code></p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> <span class="token comment">// å‡è®¾ obj å­˜åœ¨ä¸€ä¸ª å­å±æ€§ hh: &#123; a: 11 &#125; ï¼ˆæ¯”å¦‚é€šè¿‡æ¥å£è¿”å›çš„ä¸€ä¸ªå­—æ®µå±æ€§ï¼Œå¯èƒ½æœ‰å€¼ï¼Œå¯èƒ½æ²¡æœ‰ï¼‰</span><span class="token keyword">const</span> fn <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// å‡è®¾è¿™ä¸ªå‡½æ•°æ˜¯ undefinedï¼Œï¼ˆæ¯”å¦‚æŸäº›é€šè¿‡ props ä¼ é€’ fn åœºæ™¯ï¼Œå¯èƒ½ä¸º undefinedï¼‰</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>hh<span class="token operator">?.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ­¤å¤„ hh æ²¡æœ‰å€¼ï¼Œè¿”å›ä¸€ä¸ª undefinedï¼Œ å¦‚æœä¸å†™ ?. ç›´æ¥ obj.hh.a ä¼šæŠ›å¼‚å¸¸ a of undefined</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token operator">?.</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å‡½æ•°è°ƒç”¨ï¼Œfn ä¸ºç©ºï¼Œè¿”å›ä¸€ä¸ª undefinedï¼Œï¼ˆï¼‰å†…ä¼ å…¥å‡½æ•°å®å‚ args</span><span class="token comment">// æ•°ç»„å€¼è®¿é—® (æ•°ç»„å¯èƒ½ä¸º null æˆ– undefined) åŒä¸Š</span><span class="token comment">// arr?.[index]?.xxx;</span><span class="token comment">// æ”¯æŒé“¾å¼æ“ä½œ</span><span class="token comment">// obj?.xx?.xx?.xxx</span></code></pre><h3 id="ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦"><a href="#ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦" class="headerlink" title="??ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦"></a><code>??</code>ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦</h3><p>å½“å·¦ä¾§æ“ä½œæ•°ä¸º<code>null</code>æˆ–<code>undefined</code>æ—¶ï¼Œå…¶è¿”å›å³ä¾§çš„æ“ä½œæ•°ï¼Œå¦åˆ™è¿”å›å·¦ä¾§çš„æ“ä½œæ•° <strong>(æ³¨æ„<code>&quot;&quot;ã€0ã€falseã€NaN</code>ç­‰å€¼ä¼šè¿”å›å·¦ä¾§å€¼)</strong></p><ul><li>çŸ­è·¯è¿ç®—</li></ul><p>ä¸é€»è¾‘æˆ–<code>||</code>è¿ç®—ç¬¦ä¸åŒï¼Œé€»è¾‘æˆ–ä¼šåœ¨å·¦æ“ä½œæ•°ä¸º<code>false</code>å€¼æ—¶è¿”å›å³ä¾§æ“ä½œæ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ ä½¿ç”¨<code>||</code>æ¥ä¸ºæŸäº›å˜é‡è®¾ç½®é»˜è®¤çš„å€¼æ—¶ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°æ„æ–™ä¹‹å¤–çš„è¡Œä¸ºã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token string">'saasf'</span><span class="token punctuation">;</span><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// saasf</span><span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">??</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span></code></pre><ul><li>ä¸<code>&amp;&amp;</code>æˆ–<code>||</code>æ“ä½œç¬¦å…±ç”¨</li></ul><p>è‹¥ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦<code>??</code>ç›´æ¥ä¸ <code>ANDï¼ˆ&amp;&amp;ï¼‰</code>å’Œ<code>ORï¼ˆ||ï¼‰</code>æ“ä½œç¬¦ç»„åˆä½¿ç”¨<code>??</code>æ˜¯ä¸è¡Œçš„ã€‚è¿™ç§æƒ…å†µä¸‹ä¼šæŠ›å‡º<code>SyntaxError</code>, æ‰€ä»¥åœ¨ä½¿ç”¨æ—¶éœ€è¦æ˜¾ç¤ºè¡¨æ˜ä¼˜å…ˆçº§ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">||</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token string">'foo'</span><span class="token punctuation">;</span> <span class="token comment">// è¿”å› "foo"</span></code></pre><ul><li>ä¸<code>?.</code>è”åŠ¨</li></ul><p>ä¸€èˆ¬ç”¨äºæ¥å£æ•°æ®ä½¿ç”¨æˆ–è€…<code>props</code>ä¼ é€’ç­‰åœºæ™¯</p><pre class="language-tsx" data-language="tsx"><code class="language-tsx"><span class="token keyword">interface</span> <span class="token class-name">PageAProps</span> <span class="token punctuation">&#123;</span>  title<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">const</span> <span class="token function-variable function">PageA</span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token operator">:</span> PageAProps<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">&#123;</span>props<span class="token operator">?.</span>title <span class="token operator">??</span> <span class="token string">'é¡µé¢A'</span><span class="token punctuation">&#125;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">// props?.title ?? 'é¡µé¢A' è”åŠ¨è®¾ç½®é»˜è®¤çš„å€¼</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯åˆ†äº« </category>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>viã€vim ç¼–è¾‘å™¨å­¦ä¹ </title>
      <link href="/tools/vi-vim/"/>
      <url>/tools/vi-vim/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="Why-study"><a href="#Why-study" class="headerlink" title="Why study?"></a>Why study?</h3><p>åœ¨<code>linux</code>ç³»ç»Ÿä¸­ï¼Œå¦‚æœéœ€è¦å¯¹æ–‡ä»¶è¿›è¡Œä¿®æ”¹ç¼–è¾‘ï¼Œä¸€èˆ¬å¯ä»¥ä½¿ç”¨<code>vi/vim</code>ç¼–è¾‘å™¨ã€‚<code>vim</code>æ˜¯<code>vi</code>çš„å‡çº§ç‰ˆæœ¬ï¼Œæ‰€ä»¥åŒæ ·å…¼å®¹<code>vi</code>çš„æ‰€æœ‰æŒ‡ä»¤ï¼Œå®ƒä»¬éƒ½æ˜¯å¤šæ¨¡å¼ç¼–è¾‘å™¨ã€‚</p><p><code>git-bash</code>å·¥å…·åœ¨<code>windows</code>ä¸­å®ç°äº†è¯¥åŠŸèƒ½ï¼Œå› æ­¤å¯ä»¥ç›´æ¥åœ¨<code>git-bash</code>ä¸­ä½¿ç”¨<code>vi/vim</code>ã€‚</p><p><del>ä¸€æ¬¡å¶ç„¶çš„éœ€æ±‚ï¼Œåœ¨<code>rancher</code>ç®¡ç†å¹³å°é‡Œå¯¹æ­£åœ¨è¿è¡Œçš„å®¹å™¨æ—¥å¿—åœ¨çº¿ä¿®æ”¹ï¼Œé¢†å¯¼éšå£æäº†ä¸€å¥ç”¨<code>vi</code>ï¼Œå½“æ—¶çš„æˆ‘å¾ˆæ‡µé€¼ï¼Œä¹Ÿå¾ˆå°´å°¬ã€‚ğŸ™„ğŸ¤¥ğŸ˜Œ ç„¶åå°±æŸ¥é˜…äº†ç›¸å…³èµ„æ–™ï¼Œè‡ªå·±åŠ¨æ‰‹æ•²äº†è¯•äº†ä¸€ä¸‹ï¼Œæ„Ÿè§‰è¿˜æ˜¯æœ‰å¿…è¦å­¦ä¹ ä¸€ä¸‹ã€‚</del></p><span id="more"></span><h3 id="vi-vimæ¨¡å¼ä»‹ç»"><a href="#vi-vimæ¨¡å¼ä»‹ç»" class="headerlink" title="vi/vimæ¨¡å¼ä»‹ç»"></a><code>vi/vim</code>æ¨¡å¼ä»‹ç»</h3><p><code>vi</code>ç¼–è¾‘å™¨æœ‰ä¸¤ç§æ“ä½œæ¨¡å¼ï¼š</p><blockquote><p><strong>å‘½ä»¤æ¨¡å¼</strong>ï¼šè¾“å…¥çš„æ¯ä¸ªå­—ç¬¦éƒ½æ˜¯å¯¹æ­£åœ¨ç¼–è¾‘çš„æ–‡æœ¬æ–‡ä»¶æ‰§è¡ŒæŸäº›æ“ä½œçš„å‘½ä»¤ã€‚<strong>éƒ¨åˆ†æŒ‰é”®æŒ‰ä¸‹ä¼šåˆ‡æ¢å‘½ä»¤æ¨¡å¼è‡³æ’å…¥æ¨¡å¼</strong>ï¼Œåé¢è¯¦ç»†ä»‹ç»ã€‚</p></blockquote><blockquote><p><strong>æ’å…¥æ¨¡å¼</strong>ï¼šè¾“å…¥çš„æ¯ä¸ªå­—ç¬¦éƒ½ä¼šæ·»åŠ åˆ°æ–‡ä»¶ä¸­çš„æ–‡æœ¬ä¸­ã€‚<strong>æŒ‰&lt;Esc&gt; ( Escape ) é”®å…³é—­æ’å…¥æ¨¡å¼ï¼ŒåŒæ—¶å…‰æ ‡ä¼šå‘å‰ç§»ä¸€ä½</strong>ã€‚</p></blockquote><p><strong><code>æ³¨æ„ï¼šUNIX å’Œviéƒ½åŒºåˆ†å¤§å°å†™ã€‚ç¡®ä¿ä¸è¦ä½¿ç”¨å¤§å†™å­—æ¯ä»£æ›¿å°å†™å­—æ¯ï¼›å¦åˆ™ç»“æœå¯èƒ½ä¸ä¼šæ˜¯ä½ æ‰€æœŸæœ›çš„ã€‚</code></strong></p><hr><h3 id="ç¼–è¾‘å™¨çš„å¯åŠ¨å’Œå…³é—­"><a href="#ç¼–è¾‘å™¨çš„å¯åŠ¨å’Œå…³é—­" class="headerlink" title="ç¼–è¾‘å™¨çš„å¯åŠ¨å’Œå…³é—­"></a>ç¼–è¾‘å™¨çš„å¯åŠ¨å’Œå…³é—­</h3><h4 id="å¯åŠ¨vi-vimç¼–è¾‘å™¨ï¼ˆè¿›å…¥viï¼‰"><a href="#å¯åŠ¨vi-vimç¼–è¾‘å™¨ï¼ˆè¿›å…¥viï¼‰" class="headerlink" title="å¯åŠ¨vi/vimç¼–è¾‘å™¨ï¼ˆè¿›å…¥viï¼‰"></a>å¯åŠ¨<code>vi/vim</code>ç¼–è¾‘å™¨ï¼ˆè¿›å…¥<code>vi</code>ï¼‰</h4><blockquote><p>vi æ–‡ä»¶å. ï¼ˆè¯´æ˜ï¼šå¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œåˆ™æ‰“å¼€è¯¥æ–‡ä»¶ï¼Œå¦‚æœå‚æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™ä¼šæ–°å»ºè¯¥æ–‡ä»¶ã€‚ä¸æ˜¯ç«‹å³åˆ›å»ºï¼Œè€Œæ˜¯åœ¨ä¿å­˜çš„æ—¶å€™åˆ›å»ºï¼‰</p></blockquote><p><strong>æ³¨æ„</strong>ï¼šå¦‚æœåœ¨<code>vi</code>ç¼–è¾‘è¿‡ç¨‹ä¸­é‡åˆ°ä¸å¯é€†çš„æ“ä½œå¯¼è‡´å¼ºåˆ¶é€€å‡ºçš„æƒ…å†µï¼Œç›´æ¥è¾“å…¥ä¸Šé¢å‘½ä»¤ä¼šæŠ›å¼‚å¸¸ã€‚å½“ç„¶å¯ä»¥åœ¨æŠ›å¼‚å¸¸åæ ¹æ®æç¤ºè¾“å…¥<code>r</code>æ¢å¤ï¼›ä¹Ÿå¯ä»¥ç›´æ¥åœ¨<code>vi</code>å¯åŠ¨çš„æ—¶å€™æ·»åŠ <code>-r</code>å‚æ•°é¿å…è¿™ä¸ªå¼‚å¸¸æç¤ºã€‚</p><blockquote><p>vi -r æ–‡ä»¶å</p></blockquote><p>è¿›å…¥è¿‡åï¼Œé»˜è®¤æ˜¯æ’å…¥æ¨¡å¼ï¼Œå¯ä»¥å¯¹æ–‡ä»¶å†…å®¹åšä»»æ„ä¿®æ”¹ã€‚</p><h4 id="å…³é—­vi-vimç¼–è¾‘å™¨"><a href="#å…³é—­vi-vimç¼–è¾‘å™¨" class="headerlink" title="å…³é—­vi/vimç¼–è¾‘å™¨"></a>å…³é—­<code>vi/vim</code>ç¼–è¾‘å™¨</h4><p>é€šå¸¸åœ¨ä½ æƒ³ç¦»å¼€<code>vi</code>ç•Œé¢ï¼Œå¹¶ä¸”ä¿å­˜ä½ æ‰€ä¿®æ”¹çš„å†…å®¹çš„æ—¶å€™ä½¿ç”¨ã€‚æˆ–è€…ä¸ä¿å­˜ç›´æ¥é€€å‡ºã€‚</p><blockquote><p><strong>åªè¦é”®å…¥å†’å·(:)ï¼Œå…‰æ ‡å°±ä¼šç§»åŠ¨åˆ°åº•éƒ¨å‘½ä»¤è¡Œ</strong>ã€‚</p></blockquote><blockquote><p>è¾“å…¥ <strong>:wq æˆ–è€… :x</strong> å›è½¦å³å¯å®Œæˆä¿å­˜å¹¶é€€å‡ºï¼›</p></blockquote><blockquote><p>è¾“å…¥ <strong>:q! æˆ–è€… :q</strong> å›è½¦å³å¯ä¸ä¿å­˜ç›´æ¥é€€å‡ºï¼›</p></blockquote><hr><h3 id="ç¼–è¾‘å™¨ä¸­çš„å…‰æ ‡ç§»åŠ¨"><a href="#ç¼–è¾‘å™¨ä¸­çš„å…‰æ ‡ç§»åŠ¨" class="headerlink" title="ç¼–è¾‘å™¨ä¸­çš„å…‰æ ‡ç§»åŠ¨"></a>ç¼–è¾‘å™¨ä¸­çš„å…‰æ ‡ç§»åŠ¨</h3><p>ä¸å…¶ä»–ç¼–è¾‘å™¨ä¸åŒçš„æ˜¯ï¼Œé¼ æ ‡æ— æ³•åœ¨<code>vi</code>æ“ä½œç•Œé¢ç§»åŠ¨æˆ–è€…æŒ‡å®šå…‰æ ‡çš„ä½ç½®ï¼Œåªèƒ½é€šè¿‡é”®ç›˜å®Œæˆè¿™ä¸ªæ“ä½œã€‚</p><p>åœ¨æŸäº›å¹³å°ä¸Šï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨æ–¹å‘ï¼ˆç®­å¤´ï¼‰é”®ï¼Œä½†æ˜¯éƒ¨åˆ†ä¸åŒ…æ‹¬ç®­å¤´é”®çš„é”®ç›˜åˆè¯¥å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿ<code>vi</code>ä¹Ÿæ˜¯è€ƒè™‘è¿‡è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥é€šè¿‡å­—æ¯é”®æ¥ç§»åŠ¨ã€‚</p><p>å€¼å¾—ä¸€æçš„æ˜¯ï¼šæ–¹å‘é”®åœ¨ä¸¤ç§æ¨¡å¼ä¸‹å‡å¯ä½¿ç”¨ï¼Œè€Œ<strong>ä»£æ›¿é”®ä»…å¯åœ¨å‘½ä»¤æ¨¡å¼ä¸‹ä½¿ç”¨</strong>ã€‚ï¼ˆé¿å…ä¸æ’å…¥æ¨¡å¼ä¸‹è¾“å…¥çš„å­—ç¬¦å†²çªï¼‰</p><blockquote><p>å·¦ï¼šh æˆ–è€… â† é”®ï¼Œå°†å…‰æ ‡å·¦ç§»ä¸€ä¸ªå­—ç¬¦ã€‚</p></blockquote><blockquote><p>å³ï¼šl æˆ–è€… â†’ é”®ï¼Œå°†å…‰æ ‡åˆä»¥ä¸€ä¸ªå­—ç¬¦ã€‚</p></blockquote><blockquote><p>ä¸Šï¼šk æˆ–è€… â†‘ é”®ï¼Œå°†å…‰æ ‡ä¸Šç§»ä¸€è¡Œã€‚</p></blockquote><blockquote><p>ä¸‹ï¼šj æˆ–è€… â†“ é”®ï¼Œå°†å…‰æ ‡ä¸‹ç§»ä¸€è¡Œã€‚</p></blockquote><blockquote><p>è·³è½¬åˆ°é¦–è¡Œï¼šgg æˆ–è€… :0 æˆ–è€… :1 é”®</p></blockquote><blockquote><p>è·³è½¬åˆ°æœ€åä¸€è¡Œï¼šG é”®</p></blockquote><blockquote><p>è·³è½¬è‡³ n è¡Œï¼šè¾“å…¥ :n å›è½¦ï¼Œè¿™é‡Œ n ä»£è¡¨æ•°å­—ã€‚</p></blockquote><blockquote><p>è·³è½¬è‡³å½“å‰è¡Œè¡Œå¤´ï¼š0 æˆ–è€… ^ é”®ã€‚</p></blockquote><blockquote><p>è·³è½¬åˆ°å½“å‰è¡Œè¡Œå°¾ï¼š$ é”®ã€‚</p></blockquote><blockquote><p>è·³è½¬åˆ°ä¸Šä¸ªå•è¯çš„å¼€å¤´ï¼šb é”®ã€‚</p></blockquote><blockquote><p>è·³è½¬åˆ°ä¸‹ä¸ªå•è¯çš„å¼€å¤´ï¼šw é”®ã€‚</p></blockquote><p><strong><code>æ³¨æ„ï¼šæ–¹å‘é”®ï¼ˆå·¦å³ï¼‰åªèƒ½åœ¨å½“å‰è¡Œçš„å¯ç¼–è¾‘åŒºåŸŸè¿›è¡Œç§»åŠ¨ï¼Œä¸ä¼šè·¨è¡Œè¾¹ç•Œ</code></strong></p><hr><h3 id="å±å¹•æ“ä½œ"><a href="#å±å¹•æ“ä½œ" class="headerlink" title="å±å¹•æ“ä½œ"></a>å±å¹•æ“ä½œ</h3><p>ä»¥ä¸‹å‘½ä»¤å…è®¸<code>vi</code>ç¼–è¾‘å™¨å±å¹•ï¼ˆæˆ–çª—å£ï¼‰å‘ä¸Šæˆ–å‘ä¸‹ç§»åŠ¨å‡ è¡Œå¹¶è¿›è¡Œåˆ·æ–°ã€‚</p><blockquote><p>ä¸Šç¿»ä¸€å±ï¼šCtrl + bï¼ˆPageUpï¼‰ã€‚</p></blockquote><blockquote><p>ä¸Šç¿»åŠå±ï¼šCtrl + uã€‚</p></blockquote><blockquote><p>ä¸‹ç¿»ä¸€å±ï¼šCtrl + fï¼ˆPageDownï¼‰ã€‚</p></blockquote><blockquote><p>ä¸‹ç¿»åŠå±ï¼šCtrl + dã€‚</p></blockquote><hr><h3 id="æ’¤é”€ã€åˆ é™¤å’Œå¤åˆ¶ç²˜è´´"><a href="#æ’¤é”€ã€åˆ é™¤å’Œå¤åˆ¶ç²˜è´´" class="headerlink" title="æ’¤é”€ã€åˆ é™¤å’Œå¤åˆ¶ç²˜è´´"></a>æ’¤é”€ã€åˆ é™¤å’Œå¤åˆ¶ç²˜è´´</h3><h4 id="å›é€€ã€æ’¤é”€"><a href="#å›é€€ã€æ’¤é”€" class="headerlink" title="å›é€€ã€æ’¤é”€"></a>å›é€€ã€æ’¤é”€</h4><blockquote><p>Ctrl + u æ’¤æ¶ˆæ‚¨åˆšæ‰æ‰€åšçš„ä¸€åˆ‡ï¼ˆè€Œéä¸€æ­¥æ“ä½œï¼‰ã€‚</p></blockquote><h4 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h4><blockquote><p>åˆ é™¤æ•´ä¸ªå½“å‰è¡Œï¼šdd</p></blockquote><blockquote><p>åˆ é™¤å¤šè¡Œï¼šdnd æˆ–è€… nddï¼Œn æŒ‡çš„è¡Œæ•°</p></blockquote><blockquote><p>åˆ é™¤å•ä¸ªå­—ç¬¦ï¼šxï¼Œç±»ä¼¼äº backspace é”®æ•ˆæœ</p></blockquote><blockquote><p>åˆ é™¤å¤šä¸ªå­—ç¬¦ï¼šnxï¼Œn æŒ‡çš„æ•°å­—ï¼Œä»å…‰æ ‡ä½ç½®å¼€å§‹</p></blockquote><h4 id="å¤åˆ¶ç²˜è´´"><a href="#å¤åˆ¶ç²˜è´´" class="headerlink" title="å¤åˆ¶ç²˜è´´"></a>å¤åˆ¶ç²˜è´´</h4><blockquote><p>ç²˜è´´ï¼špï¼Œå°†ç²˜è´´å†…å®¹æ”¾åˆ°å½“å‰è¡Œæ–‡æœ¬ä¹‹åã€‚</p></blockquote><blockquote><p>å¤åˆ¶å½“å‰è¡Œï¼šyy</p></blockquote><blockquote><p>å¤åˆ¶å¤šè¡Œï¼šnyy æˆ–è€… ynyï¼Œn å€¼è¡Œæ•°</p></blockquote><h4 id="ä¿®æ”¹"><a href="#ä¿®æ”¹" class="headerlink" title="ä¿®æ”¹"></a>ä¿®æ”¹</h4><p><del>åæ­£æˆ‘æ˜¯æ²¡æ€ä¹ˆç”¨è¿‡è¿™ä¸ªä¿®æ”¹æŒ‡ä»¤ï¼Œä¹ æƒ¯ä½¿ç„¶ï¼Œæœ‰è¿™ä¸ªéœ€æ±‚çš„æ—¶å€™æˆ‘éƒ½æ˜¯å…ˆåˆ é™¤å†æ·»åŠ ï¼Œé¿å…å‡ºé”™ ğŸ™ˆğŸ™‰ğŸ™Š</del>è¯¦è§æœ«å°¾<strong>å…¶ä»–æŒ‡ä»¤</strong>ã€‚</p><blockquote><p>å…‰æ ‡ä½ç½®çš„å­—ç¬¦æ›¿æ¢ï¼šr é”® + è¾“å…¥ä½ è¦æ›¿æ¢çš„å­—ç¬¦</p></blockquote><hr><h3 id="æ¨¡å¼åˆ‡æ¢-and-æ’å…¥æ“ä½œ"><a href="#æ¨¡å¼åˆ‡æ¢-and-æ’å…¥æ“ä½œ" class="headerlink" title="æ¨¡å¼åˆ‡æ¢ and æ’å…¥æ“ä½œ"></a>æ¨¡å¼åˆ‡æ¢ and æ’å…¥æ“ä½œ</h3><p>åœ¨å‘½ä»¤æ¨¡å¼ä¸‹ï¼Œæƒ³è¦è¾“å…¥æ–‡æœ¬å†…å®¹ï¼Œå°±éœ€è¦åˆ‡æ¢åˆ°ç¼–è¾‘æ¨¡å¼ã€‚æ¶‰åŠçš„é”®æœ‰å¥½å‡ ä¸ªï¼Œåˆ†åˆ«æ˜¯<code>a i o s</code>ï¼Œå®ƒä»¬çš„åŒºåˆ«ï¼š</p><blockquote><p>aï¼šåœ¨å…‰æ ‡åè¿½åŠ æ–‡æœ¬ï¼ˆå…‰æ ‡ä¼šå‘åç§»åŠ¨ä¸€ä½ï¼‰</p></blockquote><blockquote><p>iï¼šåœ¨å…‰æ ‡å‰æ’å…¥æ–‡æœ¬ï¼ˆå…‰æ ‡ä½ç½®ä¸ä¼šå˜åŒ–ï¼‰</p></blockquote><blockquote><p>oï¼šæ–°å»ºå¹¶è·³è½¬è‡³å…‰æ ‡è¡Œçš„ä¸‹ä¸€è¡Œ</p></blockquote><blockquote><p>sï¼šåˆ é™¤å…‰æ ‡åä¸€ä¸ªå­—ç¬¦ï¼Œå¹¶åˆ‡æ¢è‡³æ’å…¥æ¨¡å¼</p></blockquote><h3 id="æ–‡æœ¬æœç´¢"><a href="#æ–‡æœ¬æœç´¢" class="headerlink" title="æ–‡æœ¬æœç´¢"></a>æ–‡æœ¬æœç´¢</h3><p><del>å…‰é€Ÿæ‰“è„¸ï¼Œåˆšè¯´ä¿®æ”¹å­—ç¬¦çš„å‘½ä»¤æ²¡å•¥ç”¨ï¼Œè¿™å°±æ¥äº†</del></p><p>åœºæ™¯ï¼šè¾“å…¥ä½ è¦æœç´¢çš„æ–‡æœ¬ï¼Œæ›¿æ¢ä¸ºä½ æƒ³è¦çš„æ–°å†…å®¹ã€‚</p><blockquote><p>ä»ä¸Šåˆ°ä¸‹æœç´¢ï¼š&#x2F; + ä½ è¦æœç´¢çš„å†…å®¹ + å›è½¦</p></blockquote><blockquote><p>ä»ä¸‹å‘ä¸Šæœç´¢ï¼š? + ä½ è¦æœç´¢çš„å†…å®¹ + å›è½¦ã€‚</p></blockquote><blockquote><p>è·³è½¬è‡³æœç´¢åˆ°çš„ä¸‹ä¸€ä¸ªåŒ¹é…é¡¹ï¼šn é”®ï¼Œä¸€ç›´æŒ‰ï¼Œä¸€ç›´å‘ååŒ¹é…</p></blockquote><h3 id="è·å–è¡Œå·"><a href="#è·å–è¡Œå·" class="headerlink" title="è·å–è¡Œå·"></a>è·å–è¡Œå·</h3><blockquote><p>è·å–å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œçš„è¡Œå·ï¼š:.&#x3D; é”®å›è½¦</p></blockquote><blockquote><p>è·å–æ–‡ä»¶æ€»è¡Œæ•°ï¼ˆæœ«å°¾è¡Œå·ï¼‰ï¼š:&#x3D; é”®å›è½¦</p></blockquote><h3 id="å…¶ä»–æŒ‡ä»¤"><a href="#å…¶ä»–æŒ‡ä»¤" class="headerlink" title="å…¶ä»–æŒ‡ä»¤"></a><a href="https://www.cs.colostate.edu/helpdocs/vi.html">å…¶ä»–æŒ‡ä»¤</a></h3>]]></content>
      
      
      <categories>
          
          <category> å·¥å…·å­¦ä¹  </category>
          
          <category> Vi/Vim </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vi </tag>
            
            <tag> vim </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•å‘å¸ƒä¸€ä¸ª npm-package?</title>
      <link href="/tools/npm-publish/"/>
      <url>/tools/npm-publish/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="ä»€ä¹ˆæ˜¯npm-packageï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯npm-packageï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯npm-packageï¼Ÿ"></a>ä»€ä¹ˆæ˜¯<code>npm-package</code>ï¼Ÿ</h3><p>å…ˆè¯´æ¨¡å—ï¼Œ<code>node</code>æ¨¡å—å¤§è‡´å¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼šå†…ç½®æ¨¡å—ï¼ˆç”±<code>nodeJs</code>åŸç”Ÿæä¾›ï¼Œå¯ç›´æ¥ä½¿ç”¨ï¼‰ã€è‡ªå®šä¹‰æ¨¡å—ï¼ˆ<code>module.export/requireã€export/import</code>ï¼‰ã€ç¬¬ä¸‰æ–¹æ¨¡å—ï¼ˆéœ€è¦é€šè¿‡<code>npm install</code>ä¸‹è½½åæ‰èƒ½ä½¿ç”¨ï¼‰ã€‚</p><p>æˆ‘è¿™é‡Œæåˆ°<code>npm-package</code>çš„å‘å¸ƒï¼Œè‡ªç„¶æ˜¯æŒ‡çš„ä¸‰æ–¹æ¨¡å—ã€‚åç»­å¦‚æœæœ‰ä½¿ç”¨éœ€æ±‚ï¼Œå¯ä»¥ç›´æ¥<code>install</code>å®‰è£…ä½¿ç”¨ï¼Œå¤§å¤§æé«˜å’±çš„å¼€å‘æ•ˆç‡ã€‚</p><blockquote><p>æœ¬æ–‡ä¸»è¦é’ˆå¯¹<code>publish</code>åšè¯´æ˜ã€‚è‡³äº<code>package</code>æ¨¡å—å¦‚ä½•å®šä¹‰ï¼Œä»¥åŠå…·ä½“å¦‚ä½•é…ç½®ï¼Œåç»­ä¼šå†™å¦å¤–ä¸€ç¯‡æ–‡ç« è¡¥å……ã€‚</p></blockquote><span id="more"></span><h3 id="åˆ›å»ºä¸€ä¸ªnpmè´¦å·"><a href="#åˆ›å»ºä¸€ä¸ªnpmè´¦å·" class="headerlink" title="åˆ›å»ºä¸€ä¸ªnpmè´¦å·"></a>åˆ›å»ºä¸€ä¸ª<code>npm</code>è´¦å·</h3><p>å¦‚æœä½ æœ‰ç›¸å…³çš„è´¦å·ï¼Œè¯·è·³è¿‡è¯¥æ­¥éª¤ï¼›å¦‚æœä½ æ²¡æœ‰<code>npm</code>çš„è´¦å·ï¼Œé‚£å°±éœ€è¦å…ˆæ³¨å†Œã€‚æ³¨å†Œæœ‰ä¸¤ç§æ–¹å¼ï¼šå®˜ç½‘æ³¨å†Œ &#x2F; å‘½ä»¤è¡Œåˆ›å»º</p><h4 id="å®˜ç½‘æ³¨å†Œ"><a href="#å®˜ç½‘æ³¨å†Œ" class="headerlink" title="å®˜ç½‘æ³¨å†Œ"></a>å®˜ç½‘æ³¨å†Œ</h4><p>è¿›å…¥<a href="https://www.npmjs.com/signup">https://www.npmjs.com/signup</a>è¾“å…¥ç”¨æˆ·ã€å¯†ç ã€é‚®ç®±æ³¨å†Œã€‚</p><h4 id="å‘½ä»¤è¡Œåˆ›å»º"><a href="#å‘½ä»¤è¡Œåˆ›å»º" class="headerlink" title="å‘½ä»¤è¡Œåˆ›å»º"></a>å‘½ä»¤è¡Œåˆ›å»º</h4><blockquote><p><strong>å¦‚æœä½ é€šè¿‡è¿™ç§æ–¹å¼åˆ›å»ºè´¦å·ï¼Œåˆ›å»ºæˆåŠŸè¿‡åä¼šé»˜è®¤ä½ å·²ç»ç™»å½•ï¼Œæ— éœ€ä½¿ç”¨ç™»å½•æŒ‡ä»¤å†æ¬¡ç™»å½•ã€‚</strong></p></blockquote><p>å¦‚æœä½ é…ç½®è¿‡<code>npm-registry</code> <del>ï¼ˆä¾‹å¦‚ä½ é…ç½®äº†æ·˜å®é•œåƒã€æˆ–è€…ä½ æ‰€åœ¨å…¬å¸çš„<code>private-npm</code>ï¼‰</del>ï¼Œè¯·è®°å¾—åœ¨å‘å¸ƒä¹‹å‰åˆ‡æ¢åˆ°<code>npm</code>çš„å®˜æ–¹æº<code>https://registry.npmjs.org</code>ã€‚</p><h5 id="é‡ç½®registryåœ°å€"><a href="#é‡ç½®registryåœ°å€" class="headerlink" title="é‡ç½®registryåœ°å€"></a>é‡ç½®<code>registry</code>åœ°å€</h5><p><strong>é‡ç½®çš„å‰æ</strong>ä½ è¿™ä¸ªåŒ…æ˜¯è¦å‘å¸ƒåˆ°<code>npmjs</code>ï¼Œå¦‚æœä½ è¦å‘å¸ƒè‡³ä½ æ‰€é…ç½®çš„<code>registry</code>ï¼Œé‚£å°±ä¸éœ€è¦æ“ä½œã€‚</p><blockquote><p>npm config set registry <a href="https://registry.npmjs.org/">https://registry.npmjs.org</a></p></blockquote><p>æ€»æœ‰ä¸€äº›æ‡’äººä¸æƒ³è¿™ä¹ˆå¹²ï¼Œæ¯•ç«ŸåŒ…å‘å¸ƒå®Œäº†è¿‡åè¿˜è¦åˆ‡å›åŸæ¥çš„<code>registry</code>ï¼Œè§‰å¾—éº»çƒ¦ <del>ï¼ˆä¸ä¼šæ‰¿è®¤æ˜¯æˆ‘ï¼‰</del>ï¼Œæœ‰æ²¡æœ‰åˆ«çš„åŠæ³•å’§ï¼Ÿ</p><blockquote><p>åœ¨ä½¿ç”¨ addUser æŒ‡ä»¤æ—¶ï¼ŒæŒ‡å®šå½“å‰æ³¨å†Œå¹¶ç™»å½•çš„ registryï¼Œè¦†ç›–å…¨å±€é…ç½®ä¸­çš„ registry.ï¼ˆä¸ä¼šä¿®æ”¹å…¨å±€é…ç½®ï¼‰ å…·ä½“ç”¨æ³•å¦‚ä¸‹ï¼š</p></blockquote><h5 id="å¼€å§‹åˆ›å»º"><a href="#å¼€å§‹åˆ›å»º" class="headerlink" title="å¼€å§‹åˆ›å»º"></a>å¼€å§‹åˆ›å»º</h5><blockquote><p>npm addUser --registry&#x3D;<a href="https://registry.npmjs.org/">https://registry.npmjs.org</a></p></blockquote><p>å¦‚æœä½ æ˜¯é€šè¿‡<code>npm config set registry xx</code>é‡ç½®çš„<code>registry</code>ï¼š</p><blockquote><p>npm addUser</p></blockquote><p>å›è½¦ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ª<code>Usernameã€Passwordã€Email</code>çš„è¾“å…¥æç¤ºï¼Œå½•å…¥ä½ çš„ç”¨æˆ·ä¿¡æ¯ï¼ˆæ³¨æ„<code>password</code>ä¸æ˜¯æ˜æ–‡æ˜¾ç¤ºçš„ï¼Œä¼šè¢«éšè—ï¼‰ã€‚</p><p>å½•å®Œå›è½¦ï¼Œå¾—åˆ°ä¸€ä¸ª<code>Enter one-time password from your authenticator app</code>çš„è¾“å…¥æç¤ºï¼Œå½•å…¥éªŒè¯ç ã€‚<del>è¿™ä¸ªéªŒè¯ç ä¼šå‘é€åˆ°ä½ ä¸Šé¢å¡«çš„é‚®ç®±é‡Œ</del></p><p>ç»§ç»­å›è½¦ï¼Œæç¤º<code>Logged in as xxx on https://registry.npmjs.org/.</code>ç™»å½•æˆåŠŸã€‚</p><hr><h3 id="å‡†å¤‡å¥½æ¨¡å—"><a href="#å‡†å¤‡å¥½æ¨¡å—" class="headerlink" title="å‡†å¤‡å¥½æ¨¡å—"></a>å‡†å¤‡å¥½æ¨¡å—</h3><blockquote><p><strong>å‹æƒ…æç¤ºï¼šæœ€å¥½ä¸ºä½ çš„æ¨¡å—åŒ…æ·»åŠ ç§æœ‰å‰ç¼€ï¼Œé¿å…ä¸å·²ç»å‘å¸ƒçš„åŒ…å†²çªï¼Œå¯¼è‡´å‘å¸ƒä¸æˆåŠŸâ€¦</strong></p></blockquote><p>åˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®ï¼Œ<code>-y</code>ä½¿ç”¨é»˜è®¤é…ç½®é¡¹ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> test-publish-project<span class="token builtin class-name">cd</span> ./test-publish-project<span class="token function">npm</span> init -y</code></pre><p>åˆ›å»ºä¸€ä¸ª<code>index.js</code>çš„å…¥å£æ–‡ä»¶ï¼ˆåŒ<code>package.json</code>ä¸­æŒ‡å®šçš„<code>main</code>å­—æ®µï¼‰ï¼Œéšä¾¿å†™ç‚¹ä¸œè¥¿â€¦ <del>è¿™é‡Œåªæ˜¯ä¸€ä¸ªç®€å•æ¼”ç¤º</del></p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•ç”¨çš„æ¨¡å—å…¥å£'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><hr><h3 id="ç™»å½•npm"><a href="#ç™»å½•npm" class="headerlink" title="ç™»å½•npm"></a><strong>ç™»å½•<code>npm</code></strong></h3><p>å‰é¢æœ‰æåˆ°ï¼šé€šè¿‡<code>addUser</code>æ–¹å¼åˆ›å»ºçš„è´¦æˆ·åœ¨åˆ›å»ºæˆåŠŸåä¼šé»˜è®¤ç™»å½•ï¼Œæ‰€ä»¥å¦‚æœä½ æ˜¯é€šè¿‡å‘½ä»¤è¡Œçš„æ–¹å¼æ³¨å†Œçš„ï¼Œå¯ä»¥è·³è¿‡å½“å‰æ­¥éª¤â€¦</p><blockquote><p>npm login</p></blockquote><p>åŒæ—¶ä½ ä¹Ÿå¯ä»¥ç™»å½•åˆ°æŒ‡å®š<code>registry</code>ï¼Œé¿å…<code>publish</code>è¿‡ç¨‹ä¸­æŠ›å‡º<code>401</code>ã€‚</p><blockquote><p>npm login --registry&#x3D;xxx</p></blockquote><h3 id="å‘å¸ƒï¼ˆpublishï¼‰"><a href="#å‘å¸ƒï¼ˆpublishï¼‰" class="headerlink" title="å‘å¸ƒï¼ˆpublishï¼‰"></a><strong>å‘å¸ƒï¼ˆ<code>publish</code>ï¼‰</strong></h3><p>å¦‚æœä½ ä¸æ˜¯é€šè¿‡<code>npm config set registry</code>ä¿®æ”¹çš„æºåœ°å€ï¼Œé‚£ä¹ˆå‘å¸ƒçš„æ—¶å€™åŒæ ·è¦æŒ‡å®š<code>registry</code>å‚æ•° ğŸ˜¢ğŸ˜¢ğŸ˜¢ã€‚</p><blockquote><p>npm publish --registry&#x3D;xxx</p></blockquote><p>æœ‰æ²¡æœ‰è§‰å¾—è¿™ä¸ªå¾ˆé¸¡è‚‹ï¼Ÿåˆ«æ€¥â€¦å’±è¿™å°±è§£å†³</p><p>ä¿®æ”¹<code>package.json</code>ï¼Œæ·»åŠ <code>publishConfig</code>é…ç½®é¡¹ï¼š</p><pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>  <span class="token comment">// other config...</span>  <span class="token property">"publishConfig"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"registry"</span><span class="token operator">:</span> <span class="token string">"https://registry.npmjs.org/"</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>å¥½äº†ï¼ˆæ„å‘³ç€ï¼Œä»¥ååªæœ‰<code>login or addUser</code>çš„æ—¶å€™éœ€è¦æŒ‡å®š<code>registry</code>ğŸ‰ğŸ‰ğŸ‰ï¼‰ï¼Œç°åœ¨å¯ä»¥æ„‰å¿«çš„ç›´æ¥ä½¿ç”¨<code>npm publish</code>ã€‚</p><p>å‘å¸ƒæˆåŠŸï¼<del>è™½ç„¶é‡åˆ°äº†ä¸€ç‚¹ç‚¹å°é—®é¢˜ï¼Œå†™åœ¨ä¸‹é¢äº†</del></p><p>æ‰“å¼€ <a href="https://www.npmjs.com/">https://www.npmjs.com</a> æ‰¾äº†ä¸€ä¸‹æˆ‘çš„åŒ…ï¼Œçº³å°¼ ğŸ¤”ğŸ¤”ğŸ¤”ï¼Œå±…ç„¶æœä¸åˆ°ã€‚ã€‚<del>å¯èƒ½æ˜¯å› ä¸ºç¼“å­˜?</del></p><p>é€šè¿‡è·¯å¾„ç›´æ¥æœç´¢ï¼š<a href="https://www.npmjs.com/package/your-project-name">https://www.npmjs.com/package/your-project-name</a> èƒ½æ‰¾åˆ°ï¼Œé€šè¿‡<code>npm install packagename</code>ä¹ŸæˆåŠŸäº†ï¼Œè¯´æ˜åŒ…å®å®åœ¨åœ¨æ˜¯å‘å¸ƒä¸Šå»äº†â€¦</p><h3 id="ç‰ˆæœ¬æ›´æ–°è¿­ä»£"><a href="#ç‰ˆæœ¬æ›´æ–°è¿­ä»£" class="headerlink" title="ç‰ˆæœ¬æ›´æ–°è¿­ä»£"></a><strong>ç‰ˆæœ¬æ›´æ–°è¿­ä»£</strong></h3><p>æ·»åŠ &#x2F;ä¿®æ”¹ä½ çš„åŠŸèƒ½ï¼Œä¿®æ”¹å®Œæˆä»¥åâ€¦</p><h4 id="æ‰‹åŠ¨ä¿®æ”¹ç‰ˆæœ¬å·"><a href="#æ‰‹åŠ¨ä¿®æ”¹ç‰ˆæœ¬å·" class="headerlink" title="æ‰‹åŠ¨ä¿®æ”¹ç‰ˆæœ¬å·"></a>æ‰‹åŠ¨ä¿®æ”¹ç‰ˆæœ¬å·</h4><p>æ‰“å¼€<code>package.json</code>æ–‡ä»¶ï¼Œä¿®æ”¹<code>version</code>å­—æ®µã€‚</p><h4 id="æŒ‡ä»¤ä¿®æ”¹ç‰ˆæœ¬å·"><a href="#æŒ‡ä»¤ä¿®æ”¹ç‰ˆæœ¬å·" class="headerlink" title="æŒ‡ä»¤ä¿®æ”¹ç‰ˆæœ¬å·"></a>æŒ‡ä»¤ä¿®æ”¹ç‰ˆæœ¬å·</h4><p>å°ç‰ˆæœ¬å‡çº§ï¼š<code>1.0.0 -&gt; 1.0.1</code></p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å¦‚æœæ²¡æœ‰é¢„å‘å¸ƒå·ï¼šç›´æ¥å‡çº§å°å·ï¼Œå»æ‰é¢„å‘å¸ƒå·ï¼›å¦‚æœæœ‰é¢„å‘å¸ƒå·ï¼šå»æ‰é¢„å‘å¸ƒå·ï¼Œå…¶ä»–ä¸åŠ¨</span><span class="token function">npm</span> version patch<span class="token comment"># ç›´æ¥å‡çº§å°å·ï¼Œå¢åŠ é¢„å‘å¸ƒå·ä¸º 0</span><span class="token function">npm</span> version prepatch</code></pre><p>ä¸­ç‰ˆæœ¬å‡çº§ï¼š<code>1.0.0 -&gt; 1.1.0</code></p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å¦‚æœæ²¡æœ‰é¢„å‘å¸ƒå·ï¼Œåˆ™å‡çº§ä¸€ä½ä¸­å·ï¼Œå¤§å·ä¸åŠ¨ï¼Œå°å·ç½®ä¸ºç©ºï¼›å¦‚æœæœ‰é¢„å‘å¸ƒå·å°å·ä¸º0ï¼Œåˆ™ä¸å‡çº§ä¸­å·ï¼Œå°†é¢„å‘å¸ƒå·å»æ‰</span><span class="token function">npm</span> version minor<span class="token comment"># ç›´æ¥å‡çº§ä¸­å·ï¼Œå°å·ç½®ä¸º 0ï¼Œå¢åŠ é¢„å‘å¸ƒå·ä¸º 0</span><span class="token function">npm</span> version preminor</code></pre><p>å¤§ç‰ˆæœ¬å‡çº§ï¼š<code>1.0.0 -&gt; 2.0.0</code></p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å¦‚æœæ²¡æœ‰é¢„å‘å¸ƒå·ï¼Œåˆ™ç›´æ¥å‡çº§ä¸€ä½å¤§å·ï¼Œå…¶ä»–ä½éƒ½ç½®ä¸º0ï¼›å¦‚æœæœ‰é¢„å‘å¸ƒå·ï¼šä¸­å·å’Œå°å·éƒ½ä¸º0ï¼Œåˆ™ä¸å‡çº§å¤§å·ï¼Œè€Œå°†é¢„å‘å¸ƒå·åˆ æ‰ï¼Œä¸­å·å°å·å­˜åœ¨ä¸ä¸º0ï¼Œåˆ™å‡çº§å¤§å·ï¼Œæ¸…ç©ºé¢„å‘å¸ƒå·ã€‚</span><span class="token function">npm</span> version major<span class="token comment"># ç›´æ¥å‡çº§ä¸­å·ï¼Œå°å·ç½®ä¸º 0ï¼Œå¢åŠ é¢„å‘å¸ƒå·ä¸º 0</span><span class="token function">npm</span> version premajor</code></pre><h5 id="ä¿®æ”¹ç‰ˆæœ¬å·çš„åŒæ—¶æ·»åŠ commit"><a href="#ä¿®æ”¹ç‰ˆæœ¬å·çš„åŒæ—¶æ·»åŠ commit" class="headerlink" title="ä¿®æ”¹ç‰ˆæœ¬å·çš„åŒæ—¶æ·»åŠ commit"></a>ä¿®æ”¹ç‰ˆæœ¬å·çš„åŒæ—¶æ·»åŠ <code>commit</code></h5><blockquote><p>npm version [patch] -m â€˜ä½ çš„ commit å†…å®¹â€™</p></blockquote><h4 id="å†æ¬¡å‘å¸ƒ"><a href="#å†æ¬¡å‘å¸ƒ" class="headerlink" title="å†æ¬¡å‘å¸ƒ"></a>å†æ¬¡å‘å¸ƒ</h4><p>å¯ä»¥åœ¨å‘å¸ƒä¹‹å‰ç¡®è®¤ä¸€ä¸‹å½“å‰ç™»å½•ä¿¡æ¯<code>npm whoami --registry=xx</code>ï¼Œå¦‚æœæ²¡ç™»å½•ï¼Œéœ€è¦é‡æ–°ç™»å½•ã€‚</p><blockquote><p>npm publish</p></blockquote><h3 id="åŒ…å¸è½½"><a href="#åŒ…å¸è½½" class="headerlink" title="åŒ…å¸è½½"></a><strong>åŒ…å¸è½½</strong></h3><p>å‚è€ƒï¼š<a href="https://www.npmjs.cn/cli/unpublish/">https://www.npmjs.cn/cli/unpublish/</a></p><p>æ³¨æ„ï¼š<code>npm -f unpublish</code>ä¸å…è®¸æ‚¨å–æ¶ˆå‘å¸ƒè¶…è¿‡<code>24</code>å°æ—¶çš„ä»»ä½•å†…å®¹ã€‚</p><blockquote><p>npm -f unpublish</p></blockquote><p><strong>tipsï¼šå¦‚æœè¿™ä¸ªåŒ…ä¸æ˜¯ä»…æµ‹è¯•ä½¿ç”¨ï¼Œå»ºè®®ä¸è¦åˆ é™¤â€¦å¦åˆ™ï¼Œå¯¹åˆ«çš„ç”¨æˆ·è€Œè¨€æ˜¯æä¸é“å¾·çš„è¡Œä¸ºã€‚</strong></p><hr><h3 id="è¿‡ç¨‹ä¸­çš„é”™è¯¯è®°å½•"><a href="#è¿‡ç¨‹ä¸­çš„é”™è¯¯è®°å½•" class="headerlink" title="è¿‡ç¨‹ä¸­çš„é”™è¯¯è®°å½•"></a>è¿‡ç¨‹ä¸­çš„é”™è¯¯è®°å½•</h3><h4 id="å¦‚ä½•åªå‘å¸ƒæŒ‡å®šæ–‡ä»¶è‡³npm"><a href="#å¦‚ä½•åªå‘å¸ƒæŒ‡å®šæ–‡ä»¶è‡³npm" class="headerlink" title="å¦‚ä½•åªå‘å¸ƒæŒ‡å®šæ–‡ä»¶è‡³npm?"></a>å¦‚ä½•åªå‘å¸ƒæŒ‡å®šæ–‡ä»¶è‡³<code>npm</code>?</h4><blockquote><p>æ·»åŠ  .npmignore è§„åˆ™åŒ .gitignoreï¼Œæ·»åŠ  .gitignore ä¹Ÿæ˜¯å¯ä»¥çš„</p></blockquote><blockquote><p>æˆ–è€…é…ç½®å½“å‰åŒ…çš„ package.json çš„ files å­—æ®µæŒ‡å®š</p></blockquote><h4 id="400-Bad-Request"><a href="#400-Bad-Request" class="headerlink" title="400 Bad Request"></a>400 Bad Request</h4><p><code>The password you have entered was detected on a public list of known compromised passwords. Please enter a different password.</code></p><p>é‡æ–°è®¾ä¸ªå¯†ç â€¦ <del>å¯†ç è®¾ç½®ç®€å•äº†ï¼ŒæŠ›äº†ä¸ªå¼‚å¸¸â€¦</del></p><h4 id="403-Forbidden"><a href="#403-Forbidden" class="headerlink" title="403 Forbidden"></a>403 Forbidden</h4><p><code>You do not have permission to publish &quot;test-publish-project&quot;. Are you logged in as the correct user?</code></p><p><del>what?å‘Šè¯‰æˆ‘æ²¡æœ‰æƒé™å‘å¸ƒâ€¦æˆ‘è¿™ä¸æ˜¯å·²ç»ç™»å½•äº†å—ï¼Œæ€ä¹ˆè‚¥å››ï¼Ÿ</del></p><p>èµ¶ç´§æŸ¥ä¸€ä¸‹æ˜¯å¦ç™»å½•æˆåŠŸï¼ï¼ï¼</p><blockquote><p>npm whoami --registry&#x3D;xxx</p></blockquote><p>ç¡®å®å·²ç»ç™»å½•äº† ğŸ¤£ğŸ¤£ğŸ¤£ã€‚<del>ä¸€ä¸‡ä¸ªå°¼ç›å¿ƒä¸­é£˜è¿‡</del></p><p>æŸ¥äº†ç›¸å…³èµ„æ–™ï¼Œæ€»ç»“å¯èƒ½æ€§ï¼š<code>è¯¥åŒ…å·²è¢«åˆ«çš„ä½œè€…å‘å¸ƒ</code>ï¼›<code>é‚®ç®±æœªéªŒè¯</code><del>ï¼ˆæ‰¯æ·¡ï¼Œé‚®ç®±æˆ‘å·²ç»éªŒè¯äº†ï¼‰</del></p><p>é‚£å°±éªŒè¯ä¸€ä¸‹æ˜¯åŒ…æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œå»æœäº†ä¸€ä¸‹ï¼ˆæˆ–è€…ç›´æ¥<code>install</code>ï¼‰ï¼Œè¿˜çœŸæœ‰â€¦ <del>é‚£å¥½å§ï¼Œå’±æ”¹ä¸ªå</del>ï¼Œé‡æ–°æ”¹äº†ä¸ªåŒ…åï¼ˆ<code>package.json</code>ä¸­çš„<code>name</code>å€¼ï¼‰å†æ¬¡<code>publish</code>ï¼ŒæˆåŠŸ!!!</p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…·å­¦ä¹  </category>
          
          <category> åŒ…ç®¡ç†å™¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> npm </tag>
            
            <tag> npm-publish </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‰‹æŠŠæ‰‹æ•™ä½ ä½¿ç”¨ npm-link è½¯é“¾</title>
      <link href="/tools/npm-link/"/>
      <url>/tools/npm-link/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="æµ…è°ˆä¸€ä¸‹"><a href="#æµ…è°ˆä¸€ä¸‹" class="headerlink" title="æµ…è°ˆä¸€ä¸‹"></a>æµ…è°ˆä¸€ä¸‹</h3><p>å‰æ®µæ—¶é—´ï¼Œå¼€å‘äº†ä¸€ä¸ªç»„ä»¶ï¼Œéœ€è¦åœ¨æœ¬åœ°<code>debug</code>éªŒè¯ç›¸å…³åŠŸèƒ½ï¼Œæœ‰äº›çº ç»“æ˜¯ç”¨<code>npm link</code>è¿˜æ˜¯<code>npx link</code>ï¼Œäº¦æˆ–æ˜¯<code>npm install</code>ã€‚ã€‚ã€‚</p><p>æœ‰äº›å¿˜è®°äº†ç›¸å…³ç”¨æ³•ä»¥åŠå¸¦æ¥çš„å½±å“â€¦è§‰å¾—è¿˜æ˜¯æœ‰å¿…è¦å†™ä¸€ç¯‡æ–‡ç« è®°å½•ä¸€ä¸‹è¿‡ç¨‹ï¼Œä»¥åŠæ–°çš„ä¸œè¥¿ã€‚ğŸ˜®â€ğŸ’¨ğŸ˜®â€ğŸ’¨ğŸ˜®â€ğŸ’¨</p><h3 id="npm-linkæ˜¯å¹²å•¥çš„ï¼Ÿ"><a href="#npm-linkæ˜¯å¹²å•¥çš„ï¼Ÿ" class="headerlink" title="npm linkæ˜¯å¹²å•¥çš„ï¼Ÿ"></a><code>npm link</code>æ˜¯å¹²å•¥çš„ï¼Ÿ</h3><p><a href="https://docs.npmjs.com/cli/v7/commands/npm-link">npm æ–‡æ¡£</a> ä¹Ÿæœ‰è¯´æ˜ï¼šä¸ºäº†æ–¹ä¾¿ä½ çš„è¿­ä»£æµ‹è¯•ï¼Œ<code>npm link</code>å°†åœ¨å…¨å±€çš„<code>node_modules</code>åˆ›å»ºä¸€ä¸ªæŒ‡å‘å½“å‰è‡ªå®šä¹‰çš„<code>npm</code>æ¨¡å—çš„è½¯é“¾æ¥ï¼Œå¹¶åœ¨ä½ éœ€è¦ä½¿ç”¨çš„åœ°æ–¹é€šè¿‡<code>npm link packagename</code>åˆ›å»ºä¸€ä¸ªä»å…¨å±€å®‰è£…çš„<code>package-name</code>åˆ°<code>å½“å‰æ–‡ä»¶å¤¹/node_modules</code>çš„ç¬¦å·é“¾æ¥ã€‚ä½ å¯¹è‡ªå®šä¹‰åŒ…çš„ä»»ä½•æ”¹åŠ¨éƒ½å°†åŒæ­¥åˆ°<code>link</code>åˆ°çš„é¡¹ç›®ä¸­ã€‚<del>å¯ä»¥ç†è§£ä¸º mklink</del></p><span id="more"></span><h3 id="ç¬¬ä¸€è§†è§’å¸¦ä½ å­¦ä¹ linkæŒ‡ä»¤"><a href="#ç¬¬ä¸€è§†è§’å¸¦ä½ å­¦ä¹ linkæŒ‡ä»¤" class="headerlink" title="ç¬¬ä¸€è§†è§’å¸¦ä½ å­¦ä¹ linkæŒ‡ä»¤"></a>ç¬¬ä¸€è§†è§’å¸¦ä½ å­¦ä¹ <code>link</code>æŒ‡ä»¤</h3><h4 id="å‡†å¤‡å¥½é¢„å‘å¸ƒåŒ…"><a href="#å‡†å¤‡å¥½é¢„å‘å¸ƒåŒ…" class="headerlink" title="å‡†å¤‡å¥½é¢„å‘å¸ƒåŒ…"></a>å‡†å¤‡å¥½é¢„å‘å¸ƒåŒ…</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> my-test-component-zhl<span class="token builtin class-name">cd</span> ./my-test-component-zhl<span class="token function">npm</span> init -y<span class="token comment"># å‡†å¤‡å…¥å£æ–‡ä»¶ index</span><span class="token comment"># (() => &#123;</span><span class="token comment">#   console.log('è¿™æ˜¯æˆ‘çš„ç»„ä»¶æ¨¡å—');</span><span class="token comment"># &#125;)();</span></code></pre><h4 id="å‡†å¤‡ä¸€ä¸ªç”¨äºæµ‹è¯•çš„é¡¹ç›®"><a href="#å‡†å¤‡ä¸€ä¸ªç”¨äºæµ‹è¯•çš„é¡¹ç›®" class="headerlink" title="å‡†å¤‡ä¸€ä¸ªç”¨äºæµ‹è¯•çš„é¡¹ç›®*"></a>å‡†å¤‡ä¸€ä¸ªç”¨äºæµ‹è¯•çš„é¡¹ç›®*</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>/<span class="token function">mkdir</span> my-test-project<span class="token builtin class-name">cd</span> ./my-test-project<span class="token function">npm</span> init -y</code></pre><h4 id="ä¸ºé¢„å‘å¸ƒåŒ…åˆ›å»ºè½¯é“¾æ¥"><a href="#ä¸ºé¢„å‘å¸ƒåŒ…åˆ›å»ºè½¯é“¾æ¥" class="headerlink" title="ä¸ºé¢„å‘å¸ƒåŒ…åˆ›å»ºè½¯é“¾æ¥"></a>ä¸ºé¢„å‘å¸ƒåŒ…åˆ›å»ºè½¯é“¾æ¥</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>/my-test-component-zhl<span class="token function">npm</span> <span class="token function">link</span></code></pre><p>ç»“æœé¢„è§ˆï¼š</p><p><a href="/images/tools/npm-link/p1.png"><img src="/images/tools/npm-link/p1.png" alt="npm-link-p1" loading="lazy"></a></p><p>é“¾æ¥çš„ä½ç½®å°±æ˜¯ä½ <code>nodejs</code>å®‰è£…ç›®å½•ä¸‹çš„<code>node_modules</code>ç›®å½•ä¸‹ï¼ŒæŒ‡å‘äº†å½“å‰çš„ç»„ä»¶ã€‚</p><h4 id="åœ¨é¡¹ç›®ä¸­å¼•ç”¨è¿™ä¸ªé¢„å‘å¸ƒåŒ…"><a href="#åœ¨é¡¹ç›®ä¸­å¼•ç”¨è¿™ä¸ªé¢„å‘å¸ƒåŒ…" class="headerlink" title="åœ¨é¡¹ç›®ä¸­å¼•ç”¨è¿™ä¸ªé¢„å‘å¸ƒåŒ…"></a>åœ¨é¡¹ç›®ä¸­å¼•ç”¨è¿™ä¸ªé¢„å‘å¸ƒåŒ…</h4><p>ä½ ä¼šå‘ç°ï¼Œ<code>link</code>çš„åŒ…å¹¶ä¸ä¼šåœ¨<code>package.json</code>çš„<code>dependencies</code>é‡Œå‡ºç°ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>/my-test-project<span class="token function">npm</span> <span class="token function">link</span> my-test-component-zhl</code></pre><p>ç»“æœé¢„è§ˆï¼š</p><p><a href="/images/tools/npm-link/p2.png"><img src="/images/tools/npm-link/p2.png" alt="npm-link-p2" loading="lazy"></a><br><a href="/images/tools/npm-link/p3.png"><img src="/images/tools/npm-link/p3.png" alt="npm-link-p3" loading="lazy"></a></p><p>å®é™…ä½¿ç”¨è°ƒè¯•ï¼š</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'my-test-component-zhl'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><a href="/images/tools/npm-link/p4.png"><img src="/images/tools/npm-link/p4.png" alt="npm-link-p4" loading="lazy"></a></p><h4 id="è°ƒè¯•"><a href="#è°ƒè¯•" class="headerlink" title="è°ƒè¯•"></a>è°ƒè¯•</h4><p>ä¿®æ”¹<code>my-test-component-zhl</code>çš„å†…å®¹ï¼Œä¼šåŒæ­¥æ›´æ–°åˆ°å½“å‰å¼•ç”¨çš„é¡¹ç›®ä¸­â€¦å¾ˆæ–¹ä¾¿ã€‚</p><p>æ•ˆæœï¼š</p><p><a href="/images/tools/npm-link/p5.png"><img src="/images/tools/npm-link/p5.png" alt="npm-link-p5" loading="lazy"></a></p><h4 id="è§£é™¤link"><a href="#è§£é™¤link" class="headerlink" title="è§£é™¤link"></a>è§£é™¤<code>link</code></h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> unlink --no-save packagename <span class="token operator">&amp;&amp;</span> <span class="token function">npm</span> <span class="token function">install</span></code></pre><p>æŸ¥é˜…äº†æ–‡æ¡£ï¼Œå‘ç°<code>unlink</code>å…¶å®æ˜¯<code>uninstall</code>çš„åˆ«åã€‚<a href="https://docs.npmjs.com/cli/v7/commands/npm-uninstall">-&gt; æˆ³è¿™é‡Œ</a></p><p>å½“ç„¶ï¼Œå¦‚æœä½ ä¸éœ€è¦<code>link</code>è¯¥ç»„ä»¶åŒ…è¿›è¡Œæµ‹è¯•æ—¶ï¼Œå»ºè®®ä½ åŒæ—¶ä¹Ÿå¸è½½æ‰<code>link</code>åˆ°å…¨å±€çš„åŒ…ã€‚å¦‚ä¸‹ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>/my-test-component-zhl<span class="token function">npm</span> unlink <span class="token punctuation">[</span>-g<span class="token punctuation">]</span></code></pre><h3 id="è¯´è¯´npm-linkçš„ç¼ºç‚¹"><a href="#è¯´è¯´npm-linkçš„ç¼ºç‚¹" class="headerlink" title="è¯´è¯´npm linkçš„ç¼ºç‚¹"></a>è¯´è¯´<code>npm link</code>çš„ç¼ºç‚¹</h3><p>å¥½ç”¨ç¡®å®æ˜¯å¥½ç”¨ï¼Œä½†æ˜¯ä¹Ÿæœ‰å‡ ä¸ªç¼ºç‚¹ï¼ˆæ§½ç‚¹ï¼‰ï¼š</p><details><summary>å»ºç«‹äº† link è¿‡åï¼Œè·¨ node ç‰ˆæœ¬ä½¿ç”¨å®¹æ˜“å‡ºé”™</summary><p>å…¶å®è¿™ä¸ªåœ¨æˆ‘æœ¬æœºä¸Šæ²¡æœ‰é‡åˆ°ï¼Œå‰é¢æµ‹è¯•çš„æ—¶å€™ï¼Œç»†å¿ƒçš„ä¼™ä¼´å¯èƒ½ä¹Ÿå‘ç°äº†ï¼Œ<code>link</code>çš„<code>global</code>åœ°å€å¹¶æ²¡æœ‰å¸¦<code>node</code>ç‰ˆæœ¬ä¿¡æ¯ï¼ˆå¹¶ä¸æ˜¯åœ¨<code>nvm/nodeversion/node_modules</code>ä¸‹ï¼Œæ„å‘³ç€æˆ‘æ¢ä¸€ä¸ª<code>node</code>çš„ç‰ˆæœ¬ï¼Œè½¯é“¾æ¥ä»ç„¶æ˜¯å­˜åœ¨ä¸”æœ‰æ•ˆçš„ã€‚ğŸ˜®â€ğŸ’¨ğŸ˜®â€ğŸ’¨ğŸ˜®â€ğŸ’¨ å¦‚ä½•åšåˆ°çš„ï¼Ÿ<del>å°ä¼™ä¼´å¯ä»¥è‡ªå·±éªŒè¯ä¸€ä¸‹æ˜¯å¦å¯è¡Œ</del></p><p>é…ç½®<code>npm</code>çš„å…¨å±€å®‰è£…ä½ç½®ï¼š</p><blockquote><p>npm config set prefix xxx</p></blockquote></details><details><summary>link å¤±è´¥ä¸ä¼šæŠ¥é”™å¹¶ä¸”ä¼šå›é€€åˆ°ç›´æ¥ä» npm ä»“åº“è¿›è¡Œå®‰è£…</summary><p>è¿™ä¸ªç¡®å®ï¼Œå¦‚æœ<code>link</code>æœ¬åœ°é¢„å‘å¸ƒåŒ…å¤±è´¥ï¼Œ<code>npm</code>ä¼šå…¨å±€å®‰è£…ä¸€ä¸ªä½ <code>link çš„ packagename</code>åŒ…ï¼Œç„¶åå†å»ºç«‹è½¯é“¾æ¥ï¼Œå¦‚æœ<code>npm-registry</code>ä»“åº“ä¹Ÿæ²¡æœ‰è¿™ä¸ªåŒ…ï¼Œæ‰ä¼šæŠ›å¼‚å¸¸ã€‚ğŸ’€ğŸ’€ğŸ’€ <del>æ½œåœ¨é—®é¢˜ï¼Œä¸å®¹æ˜“å‘ç°ï¼Œå½“ç„¶ä½ å¯ä»¥é€šè¿‡ä¸ºè‡ªå·±æ¨¡å—æ·»åŠ ç§æœ‰å‰ç¼€é¿å…è¿™ä¸€é—®é¢˜</del></p></details><details><summary>ä¼šæœ‰é¢„æœŸä¹‹å¤–çš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶å®‰è£…</summary><p><code>é€šè¿‡ npm uninstall -g packagename</code>å¯ä»¥åŒæ—¶å¸è½½å…¨å±€åŒ…å’Œå®ƒçš„äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ã€‚é‚£ä¹ˆæ ¹æ®<code>unlink</code>æ˜¯<code>uninstall</code>çš„åˆ«åï¼Œå¯ä»¥å¾ˆå®¹æ˜“æ¨å‡ºå¦å¤–ä¸€ä¸ªç­‰ä»·æŒ‡ä»¤ï¼š</p><blockquote><p>npm unlink [-g]</p></blockquote></details><details><summary>ä¸ç¬¦åˆé¢„æœŸçš„è½¯é“¾æ¥åˆ é™¤</summary><p>æ¯ä¸€æ¬¡çš„<code>npm link</code>ï¼Œéƒ½æ˜¯ä¸€æ¬¡<strong>é‡æ–°å»ºç«‹è½¯é“¾æ¥</strong>çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šå–æ¶ˆä¹‹å‰å·²ç»é“¾æ¥çš„åŒ…ã€‚</p><p>å¦‚æœä½ æƒ³åŒæ—¶ä¿ç•™å¤šä¸ªåŒ…çš„è½¯é“¾æ¥ï¼Œè®°å¾—åŒæ—¶<code>link</code>å¤šä¸ªï¼š</p><blockquote><p>npm link ..&#x2F;packageA ..&#x2F;packageB</p></blockquote></details><p>è¿™ä¹ˆä¸€åˆ†æï¼Œå¥½åƒä¹Ÿå°±ä¸æ˜¯é—®é¢˜äº†â€¦ğŸ˜‚ğŸ˜‚ğŸ˜‚ ä¸è¿‡è¿˜æ˜¯ä»‹ç»ä¸€ä¸‹å¦å¤–çš„ä¸¤ç§æ–¹å¼ï¼š</p><h3 id="npm-installæ›¿ä»£"><a href="#npm-installæ›¿ä»£" class="headerlink" title="npm installæ›¿ä»£"></a><code>npm install</code>æ›¿ä»£</h3><p>ä½¿ç”¨å®‰è£…æŒ‡ä»¤ï¼Œæ‹¼ä¸Š<code>ä½ è‡ªå®šä¹‰çš„æ¨¡å—çš„è·¯å¾„åœ°å€ï¼Œå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„</code>ï¼Œè¿™ç§æ–¹å¼åŒæ ·æ˜¯å»ºç«‹è½¯é“¾æ¥ï¼Œå¹¶ä¸æ˜¯çœŸçš„å°†èµ„æºä¸‹è½½åˆ°<code>node_modules</code>ï¼Œåªä¸è¿‡å°‘äº†ä¸ª<code>global</code>çš„ä¸­é—´è¿‡ç¨‹ã€‚è²Œä¼¼æ›´åŠ æ–¹ä¾¿ä¸€ç‚¹ã€‚</p><blockquote><p>npm install &lt;package-path&gt;</p></blockquote><p>å¦‚æœä½ ä¸æƒ³å†™å…¥<code>package.json</code>ï¼Œå¯ä»¥å¸¦ä¸Š<code>--no-save</code>å‚æ•°ï¼š</p><blockquote><p>npm install â€“no-save &lt;package-path&gt;</p></blockquote><p>å–æ¶ˆçš„è¯ï¼Œå¯ä»¥ç”¨<code>uninstall</code>ï¼š</p><blockquote><p>npm uninstall package-path</p></blockquote><h3 id="æ‰©å±•ã€ä»…åšäº†è§£ã€‘"><a href="#æ‰©å±•ã€ä»…åšäº†è§£ã€‘" class="headerlink" title="æ‰©å±•ã€ä»…åšäº†è§£ã€‘"></a>æ‰©å±•ã€ä»…åšäº†è§£ã€‘</h3><p>é€šè¿‡<code>link</code>å·¥å…·é¿å…ä¸Šé¢æåˆ°çš„é—®é¢˜ã€‚<a href="https://github.com/privatenumber/link">-&gt; è¯¦è§</a></p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> i -g <span class="token function">link</span><span class="token comment"># æ–¹å¼ä¸€</span>npx <span class="token function">link</span> package-path<span class="token comment"># æ–¹å¼äºŒï¼šé¡¹ç›®æ ¹ç›®å½•æ·»åŠ  link.config.json é…ç½®æ–‡ä»¶ï¼Œå†æ‰§è¡Œ</span>npx <span class="token function">link</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å·¥å…·å­¦ä¹  </category>
          
          <category> åŒ…ç®¡ç†å™¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> npm </tag>
            
            <tag> npm-link </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>npm ä»¥åŠ yarn çš„æŒ‡ä»¤ä½¿ç”¨</title>
      <link href="/tools/npm-and-yarn/"/>
      <url>/tools/npm-and-yarn/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><blockquote><h3 id="npmï¼Œnpxæ¦‚å¿µåŠæŒ‡ä»¤ç®€å•ä»‹ç»"><a href="#npmï¼Œnpxæ¦‚å¿µåŠæŒ‡ä»¤ç®€å•ä»‹ç»" class="headerlink" title="npmï¼Œnpxæ¦‚å¿µåŠæŒ‡ä»¤ç®€å•ä»‹ç»"></a><code>npmï¼Œnpx</code>æ¦‚å¿µåŠæŒ‡ä»¤ç®€å•ä»‹ç»</h3></blockquote><p><code>tipsï¼šç›¸å…³é…ç½®æŒ‡ä»¤åœ¨ç¯å¢ƒé…ç½®ç« èŠ‚</code></p><p><code>npm</code>æ˜¯éš<code>node</code>ä¸€èµ·å®‰è£…çš„åŒ…ç®¡ç†å™¨ã€‚ä¸»è¦ä½œç”¨æ˜¯ç”¨äºå‘å¸ƒå’Œä¸‹è½½ç¨‹åºåŒ…çš„<code>CLI(å‘½ä»¤è¡Œ)</code>å·¥å…·ï¼Œä»¥åŠæ‰˜ç®¡<code>javascriptç¨‹åºåŒ…çš„åœ¨çº¿å­˜å‚¨åº“</code>ã€‚</p><p>ä¸åŒäº<code>npm</code>ï¼Œ<code>npx</code>çš„<code>x</code>å¯ç†è§£ä¸º<code>eXecute</code>ï¼Œä¸»è¦ä½œä¸ºå‘½ä»¤è¡Œçš„å¯»å€ç­‰è¾…åŠ©åŠŸèƒ½ã€‚<code>npx xxx</code>æ—¶ï¼Œ<code>npx</code>ä¼šå…ˆçœ‹<code>xxx</code>åœ¨<code>$PATH</code>æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™ä¼šæ‰¾å½“å‰ç›®å½•çš„<code>node_modules</code>ï¼Œå¦‚æœè¿˜æ˜¯æ²¡æœ‰ï¼Œé‚£ä¹ˆä¼šå…ˆä¸‹è½½å®‰è£…è¿™ä¸ª<code>xxx</code>å†æ‰§è¡Œã€‚</p><span id="more"></span><h4 id="å¸¸ç”¨å®‰è£…æŒ‡ä»¤è¯´æ˜"><a href="#å¸¸ç”¨å®‰è£…æŒ‡ä»¤è¯´æ˜" class="headerlink" title="å¸¸ç”¨å®‰è£…æŒ‡ä»¤è¯´æ˜"></a>å¸¸ç”¨å®‰è£…æŒ‡ä»¤è¯´æ˜</h4><p>å®‰è£…ä½¿ç”¨ i or installã€‚<code>å¸è½½æ—¶ä½¿ç”¨ uni or uninstallï¼Œå°±ä¸å¦å¤–è¯´æ˜äº†</code>ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å®‰è£… npm åŒ… i ä¸º install ç®€å†™</span><span class="token comment"># ä¸å¸¦ä»»ä½•å‚æ•°ï¼šä¸´æ—¶å®‰è£…åˆ° node_modulesï¼Œä¸ä¼šæ·»åŠ åˆ° devDependencies å’Œ dependencies</span><span class="token function">npm</span> i <span class="token punctuation">[</span>package<span class="token punctuation">]</span><span class="token comment"># å®‰è£…æŒ‡å®šç‰ˆæœ¬or tagçš„åŒ…</span><span class="token function">npm</span> <span class="token function">install</span> package@version<span class="token function">npm</span> i package@tag<span class="token comment"># å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„åŒ…</span><span class="token function">npm</span> i package@latest<span class="token comment"># å®‰è£…æ—¶çš„ä¸€äº›å‚æ•°è¯´æ˜ï¼š</span><span class="token comment"># --save-dev or -D or --dev or -S-D è¡¨ç¤ºå®‰è£…ä¾èµ–åˆ° devDependencies</span><span class="token function">npm</span> i package -D<span class="token comment"># -S or --save è¡¨ç¤ºå®‰è£…ä¾èµ–åˆ° dependencies</span><span class="token function">npm</span> i package --save<span class="token comment"># å…¨å±€å®‰è£…</span><span class="token function">npm</span> i --global package</code></pre><h4 id="å…¶ä»–æŒ‡ä»¤åŠé™„å¸¦é…ç½®è¯´æ˜ï¼š"><a href="#å…¶ä»–æŒ‡ä»¤åŠé™„å¸¦é…ç½®è¯´æ˜ï¼š" class="headerlink" title="å…¶ä»–æŒ‡ä»¤åŠé™„å¸¦é…ç½®è¯´æ˜ï¼š"></a>å…¶ä»–æŒ‡ä»¤åŠé™„å¸¦é…ç½®è¯´æ˜ï¼š</h4><blockquote><p>npm help æŸ¥çœ‹å…¨éƒ¨æŒ‡ä»¤</p></blockquote><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æ¸…é™¤ç¼“å­˜</span><span class="token function">npm</span> cache clean --force<span class="token comment"># config åˆ«å c</span><span class="token comment"># è®¾ç½®å…¨å±€å®‰è£…ä½ç½®</span><span class="token function">npm</span> config <span class="token builtin class-name">set</span> prefix <span class="token string">'C:\Users\xx\AppData\Roaming\npm'</span><span class="token comment"># è®¾ç½®ç¼“å­˜è·¯å¾„ï¼Œé»˜è®¤åœ¨ c ç›˜</span><span class="token function">npm</span> config <span class="token builtin class-name">set</span> cache <span class="token string">"C:\Users\xx\AppData\Roaming<span class="token entity" title="\n">\n</span>pm_cache"</span><span class="token comment"># å…¶ä»– npm é…ç½®ï¼Œæ ¼å¼å‡åŒä¸Šï¼Œset è®¾ç½®ï¼Œget è¯»å–ï¼Œdeleteåˆ é™¤ï¼Œä¾‹å¦‚ï¼š</span><span class="token function">npm</span> config get registry<span class="token comment"># å½“ç„¶å¯ä»¥æ·»åŠ é™åˆ¶å‚æ•°ï¼Œè¡¨ç¤ºæ˜¯æœ¬åœ°é…ç½®ã€å…¨å±€é…ç½®ã€ç”¨æˆ·é…ç½®</span><span class="token function">npm</span> config --global <span class="token builtin class-name">set</span> registry xxx<span class="token comment"># æŸ¥çœ‹é…ç½®</span><span class="token function">npm</span> config <span class="token function">ls</span> -l<span class="token comment"># ç‰ˆæœ¬å· -v or --version</span><span class="token function">npm</span> -v<span class="token comment"># é¡¹ç›®åˆå§‹åŒ– -y å‚æ•°å¯é€‰</span><span class="token function">npm</span> init -y<span class="token comment"># æ‰§è¡ŒæŸä¸ªæŸä¸ªè„šæœ¬å‘½ä»¤ ä¾‹å¦‚(package.json çš„ scripts)</span><span class="token function">npm</span> run <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token comment"># ç™»å½•åˆ° npmï¼Œå¯ä»¥æ·»åŠ ç™»å½•å‚æ•°,å¦‚ä¸‹ç™»å½•åˆ°xxx npmä»“åº“ï¼Œä¸€èˆ¬ç”¨äºå…¬å¸å†…éƒ¨npmç§æœ</span><span class="token function">npm</span> login<span class="token function">npm</span> login --registry<span class="token operator">=</span>xxx<span class="token comment"># æ²¡æœ‰è´¦å·ï¼Œæ·»åŠ è´¦å·ç™»å½•ã€‚åŒç†å¯è®¾ç½® registry</span><span class="token function">npm</span> adduser<span class="token comment"># æŸ¥çœ‹å½“å‰ç™»å½•ä¿¡æ¯</span><span class="token function">npm</span> <span class="token function">whoami</span><span class="token comment"># æŸ¥çœ‹ä¸€ä¸ª npm åŒ…çš„æœ€æ–°ç‰ˆæœ¬/æ‰€æœ‰ç‰ˆæœ¬</span><span class="token function">npm</span> view package version/versions</code></pre><p>è¡¥å……ï¼š <code>npm link</code>è¯¦è§ï¼š<a href="/share/npm-link">æ‰‹æŠŠæ‰‹æ•™ä½ ä½¿ç”¨ npm-link è½¯é“¾</a>ï¼Œ<code>npm publish</code>è¯¦è§ï¼š<a href="/share/npm-publish">å¦‚ä½•å‘å¸ƒä¸€ä¸ª npm-package?</a></p><p>å…¶ä»–æŒ‡ä»¤ï¼š<a href="https://docs.npmjs.com/cli/v7/commands/npm-install">-&gt; è¯¦è§ v7</a></p><blockquote><p>tips: npm config è¯»å–çš„å†…å®¹æ˜¯æœ‰ä¼˜å…ˆçº§çš„ï¼Œé¡¹ç›®ä¸‹çš„ <code>.npmrc</code> -&gt; ç”¨æˆ·çº§<code>~/.npmrc</code> -&gt; å…¨å±€<code>å®‰è£…ç›®å½•/etc/.npmrc</code>ï¼ˆç¨ä¸æ³¨æ„å°±ä¼šå­˜åœ¨ä½ é…ç½®çš„ global registry ä¸ç”Ÿæ•ˆâ€¦ï¼‰</p></blockquote><blockquote><h3 id="yarnå¸¸ç”¨æŒ‡ä»¤ä»‹ç»"><a href="#yarnå¸¸ç”¨æŒ‡ä»¤ä»‹ç»" class="headerlink" title="yarnå¸¸ç”¨æŒ‡ä»¤ä»‹ç»"></a><code>yarn</code>å¸¸ç”¨æŒ‡ä»¤ä»‹ç»</h3></blockquote><blockquote><p>yarn help æŸ¥çœ‹å…¨éƒ¨æŒ‡ä»¤</p></blockquote><p>å¤§éƒ¨åˆ†æŒ‡ä»¤ä¸<code>npm</code>å¤§åŒå°å¼‚ï¼Œä¸»è¦ä»‹ç»ä¸€äº›é¡¹ç›®å¸¸ç”¨çš„ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#åˆå§‹åŒ–é¡¹ç›® (é¿å…ä½¿ç”¨Git bash)</span><span class="token function">yarn</span> init<span class="token comment"># å®‰è£…ä¾èµ–</span><span class="token comment"># add å‚æ•°è¯´æ˜ --dev or -D å®‰è£…åˆ° devDependenciesï¼Œä¸åŠ å‚æ•°åˆ™å®‰è£…åˆ° dependencies</span><span class="token function">yarn</span> <span class="token function">add</span> <span class="token punctuation">[</span>package<span class="token punctuation">]</span><span class="token function">yarn</span> <span class="token function">add</span> <span class="token punctuation">[</span>package<span class="token punctuation">]</span>@<span class="token punctuation">[</span>version<span class="token punctuation">]</span><span class="token function">yarn</span> <span class="token function">add</span> <span class="token punctuation">[</span>package<span class="token punctuation">]</span>@<span class="token punctuation">[</span>tag<span class="token punctuation">]</span><span class="token function">yarn</span> <span class="token function">add</span> <span class="token punctuation">[</span>package<span class="token punctuation">]</span> --dev<span class="token comment"># å‡çº§ä¾èµ–çš„åŒ…ç‰ˆæœ¬</span><span class="token function">yarn</span> upgrade <span class="token punctuation">[</span>package<span class="token punctuation">]</span><span class="token function">yarn</span> upgrade <span class="token punctuation">[</span>package<span class="token punctuation">]</span>@<span class="token punctuation">[</span>version<span class="token punctuation">]</span><span class="token function">yarn</span> upgrade <span class="token punctuation">[</span>package<span class="token punctuation">]</span>@<span class="token punctuation">[</span>tag<span class="token punctuation">]</span><span class="token comment"># å®‰è£…æŒ‡å®šåŒ…çš„æœ€æ–°ç‰ˆæœ¬</span><span class="token comment"># eg. yarn add ioredis@latest</span><span class="token function">yarn</span> <span class="token function">add</span> <span class="token punctuation">[</span>packageName<span class="token punctuation">]</span>@latest<span class="token comment"># å…¨å±€å®‰è£…</span><span class="token function">yarn</span> global <span class="token function">add</span> xx<span class="token comment"># ç§»é™¤ä¾èµ–</span><span class="token function">yarn</span> remove <span class="token punctuation">[</span>package<span class="token punctuation">]</span><span class="token comment"># æ‰§è¡ŒæŸä¸ªè„šæœ¬å‘½ä»¤ run å¯ä»¥çœç•¥</span><span class="token function">yarn</span> run <span class="token punctuation">[</span>scriptName<span class="token punctuation">]</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å·¥å…·å­¦ä¹  </category>
          
          <category> åŒ…ç®¡ç†å™¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> npm </tag>
            
            <tag> yarn </tag>
            
            <tag> npx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>github ä¸Šå¦‚ä½•ä¸ºå¼€æºé¡¹ç›®æäº¤ pr?</title>
      <link href="/posts/github-create-pr/"/>
      <url>/posts/github-create-pr/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><p>æœ¬æ–‡ä¸»è¦æ˜¯æ ¹æ®è‡ªå·±åœ¨æ‘¸ç´¢æäº¤<code>pr (pull-request)</code>è¿‡ç¨‹ç¨‹çš„ä¸€äº›æ€»ç»“ã€‚</p><p>ä¸ºäº†æ–¹ä¾¿æè¿°ï¼Œçº¦å®šæœ¬æ–‡éœ€è¦<code>fork</code>çš„é¡¹ç›®ä¸º<code>test-project</code>ï¼Œæºä»“åº“åœ°å€<code>regionUser/test-project</code>ï¼Œä½ ï¼ˆæ<code>pr</code>çš„ç”¨æˆ·ï¼‰çš„ç”¨æˆ·åä¸º<code>userA</code>ã€‚</p><span id="more"></span><h3 id="forkåŸé¡¹ç›®"><a href="#forkåŸé¡¹ç›®" class="headerlink" title="forkåŸé¡¹ç›®"></a><code>fork</code>åŸé¡¹ç›®</h3><p>ç™»å…¥è‡ªå·±çš„<code>github</code>è´¦å·ï¼Œè¿›å…¥ä½ éœ€è¦æ<code>pr</code>çš„é‚£ä¸ªé¡¹ç›®ä¸‹ï¼Œç‚¹å‡»å·¦ä¸Šè§’çš„<code>fork</code>ã€‚</p><p>ç„¶åè¿›å…¥ä½ çš„<code>Repositories</code>åˆ—è¡¨ï¼Œä½ ä¼šå‘ç°åä¸º<code>test-project</code>ä»“åº“ã€‚</p><h3 id="clone-è¿™ä¸ª-forké¡¹ç›®"><a href="#clone-è¿™ä¸ª-forké¡¹ç›®" class="headerlink" title="clone è¿™ä¸ª forké¡¹ç›®"></a><code>clone è¿™ä¸ª fork</code>é¡¹ç›®</h3><p>æ‰“å¼€<code>userA/test-project</code>ï¼ˆå³ä½ <code>fork</code>çš„é¡¹ç›®ä¸‹ï¼‰ï¼Œ<code>clone</code>åˆ°æœ¬åœ°ã€‚</p><blockquote><p>git clone <a href="https://github.com/userA/test-project.git">https://github.com/userA/test-project.git</a></p></blockquote><h3 id="å»ºç«‹upstreamä¸Šæ¸¸é“¾æ¥"><a href="#å»ºç«‹upstreamä¸Šæ¸¸é“¾æ¥" class="headerlink" title="å»ºç«‹upstreamä¸Šæ¸¸é“¾æ¥"></a>å»ºç«‹<code>upstream</code>ä¸Šæ¸¸é“¾æ¥</h3><p>è¿™é‡Œä¸Šæ¸¸æŒ‡çš„æ˜¯ä¸€å¼€å§‹<code>fork</code>çš„é‚£ä¸ªé¡¹ç›®æºã€‚</p><blockquote><p>git remote add upstream <a href="https://github.com/regionUser/test-project.git">https://github.com/regionUser/test-project.git</a></p></blockquote><p>æŸ¥çœ‹è¿œç¨‹ä»“åº“ä¿¡æ¯ï¼š</p><blockquote><p>git remote -v</p></blockquote><div class="error"><blockquote><p>ä¸€å®šç¡®å®š<code>origin</code>æ˜¯ä½ è‡ªå·±çš„åœ°å€ï¼Œ<code>upstream</code>æ˜¯è¿œç¨‹çš„åœ°å€ã€‚</p></blockquote></div><h3 id="æ–°å¢ã€æäº¤å˜åŠ¨"><a href="#æ–°å¢ã€æäº¤å˜åŠ¨" class="headerlink" title="æ–°å¢ã€æäº¤å˜åŠ¨"></a>æ–°å¢ã€æäº¤å˜åŠ¨</h3><p>è¿™é‡Œä¿®æ”¹çš„æ˜¯ä½ <code>clone</code>ä¸‹æ¥çš„é¡¹ç›®ï¼Œåˆ—ä¸¾äº†ä¸¤ç§æ–¹å¼ã€‚</p><h4 id="åœ¨mainåˆ†æ”¯ä¿®æ”¹"><a href="#åœ¨mainåˆ†æ”¯ä¿®æ”¹" class="headerlink" title="åœ¨mainåˆ†æ”¯ä¿®æ”¹"></a>åœ¨<code>main</code>åˆ†æ”¯ä¿®æ”¹</h4><p>æˆ‘è¿™é‡Œä¸ºäº†æµ‹è¯•ï¼Œé€‰æ‹©å°±åœ¨<code>main</code>ä¸Šä¿®æ”¹ï¼Œä¸”æ¨¡æ‹Ÿäº†æºé¡¹ç›®<code>main</code>å˜æ›´ï¼Œä»¥åŠ<code>userA</code>çš„å¤šæ¬¡æäº¤ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span><span class="token function">git</span> commit -m <span class="token string">'userAçš„ç¬¬ä¸€æ¬¡æäº¤'</span><span class="token function">git</span> commit -m <span class="token string">'userAçš„ç¬¬äºŒæ¬¡æäº¤'</span><span class="token function">git</span> push origin main</code></pre><h4 id="åŸºäºæ–°çš„åˆ†æ”¯"><a href="#åŸºäºæ–°çš„åˆ†æ”¯" class="headerlink" title="åŸºäºæ–°çš„åˆ†æ”¯"></a>åŸºäºæ–°çš„åˆ†æ”¯</h4><p>åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„<code>fix/fs-fix</code></p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> checkout -b fix/fs-fix<span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span><span class="token function">git</span> commit -m <span class="token string">'userAçš„ç¬¬ä¸€æ¬¡æäº¤'</span><span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span><span class="token function">git</span> commit -m <span class="token string">'userAçš„ç¬¬äºŒæ¬¡æäº¤'</span><span class="token function">git</span> push origin fix/fs-fix</code></pre><p>å†™å®Œååˆå¹¶åˆ°ä¸»åˆ†æ”¯<code>main</code></p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> merge fix/fs-fix<span class="token function">git</span> push origin main</code></pre><h3 id="æ–°å»ºpull-request"><a href="#æ–°å»ºpull-request" class="headerlink" title="æ–°å»ºpull-request"></a>æ–°å»º<code>pull-request</code></h3><p>åœ¨<code>github</code>æ‰“å¼€ä½ <code>fork</code>çš„é¡¹ç›®ã€‚<code>userA/test-project</code>ï¼Œç‚¹å‡»<code>Pull requests</code> -&gt; <code>New pul request</code>æ–°å»º<code>pr</code>ï¼Œä¼šè‡ªåŠ¨è·³è½¬è‡³<code>regionUser/test-project</code>ä¸‹çš„<code>compare</code>ï¼Œå‡ºç°ä¸‹é¢ç•Œé¢ï¼š</p><p><a href="/images/posts/github-create-pr/p1.png"><img src="/images/posts/github-create-pr/p1.png" alt="github-create-pr-p1" loading="lazy"></a></p><blockquote><p><code>base repositories</code>æºé¡¹ç›®ä»“åº“ï¼Œ<code>head repositories</code>æ˜¯<code>fork</code>çš„é¡¹ç›®ä»“åº“(<code>userA</code>).</p></blockquote><p>æˆ‘è¿™é‡Œåˆ›å»ºçš„æ—¶å€™å‡ºç°<code>check</code>ä¸é€šè¿‡çš„æç¤ºï¼ˆå¦‚æœä½ æ²¡æœ‰é‡åˆ°ï¼Œå°±è·³è¿‡ï¼‰ï¼š</p><blockquote><p>Canâ€™t automatically merge. Donâ€™t worry, you can still create the pull request.</p></blockquote><p>å¯ä»¥é¢„æ–™åˆ°ï¼Œå› ä¸ºåŸé¡¹ç›®çš„ä½œè€…åœ¨æˆ‘ä»¬ä¹‹å‰<code>fork</code>ä»¥åï¼Œåˆæ–°å¢äº†åŠŸèƒ½æäº¤ã€‚ <del>è™½ç„¶ä»ç„¶å¯ä»¥åˆ›å»ºæˆåŠŸï¼Œä½†ä¸å»ºè®®ï¼Œä¹Ÿä¸ä¸€å®šä¼šè¢«é‡‡çº³</del></p><p>æ­¤æ—¶ï¼Œéœ€è¦æˆ‘ä»¬å¯¹<code>fork</code>çš„é¡¹ç›®æºç åšä»£ç åŒæ­¥ã€‚å¦‚ä¸‹ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æ‹‰å– upstream æœ€æ–°ä»£ç </span><span class="token function">git</span> fetch upstream<span class="token comment"># (è¿™é‡Œä¸ä¸€å®šæ˜¯ä½¿ç”¨ rebaseï¼Œmerge åŒæ ·å¯ä»¥ï¼Œåªæ˜¯ä¸€ä¸ªåŒæ­¥æœ€æ–°ä»£ç çš„ä¸€ä¸ªæ–¹å¼è€Œå·²)</span><span class="token comment"># å† rebaseï¼Œmain æ˜¯åˆ†æ”¯åï¼Œæˆ‘è¿™å·äº†ä¸ªæ‡’</span><span class="token comment"># æ­¤è¿‡ç¨‹å¯èƒ½ä¼šé‡åˆ°å†²çªï¼Œè§£å†³å†²çª</span><span class="token function">git</span> rebase upstream/main<span class="token comment"># å½“ç„¶ç›´æ¥ä½¿ç”¨ git pull upstream branch ä¹Ÿæ˜¯å¯ä»¥çš„ === fetch + merge</span><span class="token comment"># æ­¤è¿‡ç¨‹å¯èƒ½ä¼šé‡åˆ°å†²çªï¼Œè§£å†³å†²çªå†æ¬¡ rebase</span><span class="token function">git</span> status<span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span><span class="token function">git</span> rebase --continue<span class="token comment"># rebase ï¼ˆå˜åŸºï¼‰æ˜¯åˆå¹¶çš„å¦å¤–ä¸€ç§æ–¹å¼ï¼Œä¸åŒäºmergeçš„æ˜¯ï¼Œä¸ä¼šäº§ç”Ÿæ—æ”¯å’Œå†—ä½™çš„æäº¤è®°å½•ã€‚</span><span class="token comment"># æ‰§è¡Œåä¼šåœ¨ terminal ä¸­æ‰“å¼€ç¼–è¾‘å™¨äº¤äº’ï¼Œå®Œæˆå˜åŸºæ“ä½œï¼ˆä¸çŸ¥é“æ€ä¹ˆåœ¨è¿™ä¸ªç•Œé¢æ“ä½œçš„ï¼Œå¯ä»¥çœ‹æˆ‘çš„å¦å¤–ä¸€ç¯‡æ–‡ç« 'vi ç¼–è¾‘å™¨å­¦ä¹ 'ï¼‰</span><span class="token comment"># åœ¨ç•Œé¢ä¸Šæ–¹åˆ—å‡ºäº†éœ€è¦ç¼–è¾‘çš„æ‰€æœ‰æäº¤ï¼Œåœ¨æ¯ä¸ªcommit idå‰çš„æ˜¯æŒ‡ä»¤ç±»å‹(pick)ï¼Œåœ¨Commandsä¸­æœ‰ç›¸å…³çš„æŒ‡ä»¤è¯´æ˜ã€‚</span><span class="token comment"># p, pick = ä¿ç•™è¯¥commit</span><span class="token comment"># r, reword = ä¿ç•™è¯¥commitï¼Œä½†ä¿®æ”¹å®ƒçš„æäº¤ä¿¡æ¯</span><span class="token comment"># e, edit = ä¿ç•™è¯¥commitï¼Œåœ¨åˆå¹¶è¯¥è¯·æ±‚æ—¶æš‚åœ</span><span class="token comment"># s, squash = ä¿ç•™è¯¥commitï¼Œåˆå¹¶åˆ°å‰ä¸€ä¸ªæäº¤ä¸­</span><span class="token comment"># f, fixup = ç±»ä¼¼äºsquashï¼Œä½†æŠ›å¼ƒæäº¤å®ƒçš„æäº¤ä¿¡æ¯</span><span class="token comment"># x, exec = æ‰§è¡Œshellå‘½ä»¤</span><span class="token comment"># d, drop = ä¸¢å¼ƒè¯¥commit</span><span class="token comment"># è§£å†³æ‰æ‰€æœ‰å†²çª æ¨é€æ­¤æ¬¡åˆå¹¶ï¼Œæ·»åŠ  -f å¼ºåˆ¶æ¨é€</span><span class="token function">git</span> push -f origin main</code></pre><p>æŒ‰ä¸Šé¢æµç¨‹æ“ä½œå®Œäº†ä»¥åï¼Œé‡æ–°åˆ›å»º<code>pull-request</code>ï¼Œ<code>check</code>é”™è¯¯å·²ç»æ¶ˆå¤±ï¼š</p><p><a href="/images/posts/github-create-pr/p2.png"><img src="/images/posts/github-create-pr/p2.png" alt="github-create-pr-p2" loading="lazy"></a></p><p><code>å¡«å†™pull-request çš„ titleï¼Œä½ ä¹Ÿå¯ä»¥æ·»åŠ  comment</code>ï¼Œå®Œæˆåï¼Œä½ å¯ä»¥åœ¨<code>regionUser/test-project</code>çš„<code>Pull requests</code>ä¸‹çœ‹åˆ°ä½ æ–°æäº¤çš„<code>pr</code>.æ•ˆæœå¦‚ä¸‹ï¼š</p><p><a href="/images/posts/github-create-pr/p3.png"><img src="/images/posts/github-create-pr/p3.png" alt="github-create-pr-p3" loading="lazy"></a></p><p>è‡³æ­¤ï¼Œ<code>pr</code>åˆ›å»ºå°±å®Œæˆäº†ï¼Œç­‰å¾…åŸé¡¹ç›®ä½œè€…å®¡æ ¸ååˆå¹¶ã€‚</p><h3 id="åŸä»“åº“ä½œè€…è§†è§’"><a href="#åŸä»“åº“ä½œè€…è§†è§’" class="headerlink" title="åŸä»“åº“ä½œè€…è§†è§’"></a>åŸä»“åº“ä½œè€…è§†è§’</h3><p><a href="/images/posts/github-create-pr/p4.png"><img src="/images/posts/github-create-pr/p4.png" alt="github-create-pr-p4" loading="lazy"></a></p><p>é€‰æ‹©åˆå¹¶çš„æ–¹å¼ï¼Œå†æ¬¡ç‚¹å‡»ç¡®è®¤å³å¯å®Œæˆåˆå¹¶ã€‚</p><h3 id="æ›´æ–°forké¡¹ç›®"><a href="#æ›´æ–°forké¡¹ç›®" class="headerlink" title="æ›´æ–°forké¡¹ç›®"></a>æ›´æ–°<code>fork</code>é¡¹ç›®</h3><p>å½“ä½ çš„æäº¤è¢«é‡‡çº³ä»¥åï¼ŒåŸé¡¹ç›®<code>regionUser/test-project</code>ä¼šæ–°å¢ä¸€ä¸ªåˆå¹¶çš„æäº¤è®°å½•ï¼Œä¸ºäº†ä¿æŒä¸€è‡´ï¼Œéœ€è¦åœ¨<code>fork</code>çš„æœ¬åœ°ä»“åº“è¿›è¡Œæ›´æ–°ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> pull --rebase upstream <span class="token punctuation">[</span>branch<span class="token punctuation">]</span><span class="token comment"># æˆ–è€…</span><span class="token function">git</span> fetch upstream<span class="token function">git</span> merge upstream/main<span class="token comment"># æ›´æ–°æ¨é€è‡³è¿œç¨‹</span><span class="token function">git</span> push origin main</code></pre><h3 id="å…¶ä»–é—®é¢˜"><a href="#å…¶ä»–é—®é¢˜" class="headerlink" title="å…¶ä»–é—®é¢˜"></a>å…¶ä»–é—®é¢˜</h3><h4 id="å¦‚ä½•å†æ¬¡æäº¤pr"><a href="#å¦‚ä½•å†æ¬¡æäº¤pr" class="headerlink" title="å¦‚ä½•å†æ¬¡æäº¤pr?"></a>å¦‚ä½•å†æ¬¡æäº¤<code>pr</code>?</h4><p><code>answer</code>ï¼šé‡å¤ä¸Šé¢æ–°å»º<code>pull-request</code>çš„æµç¨‹ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼šè®°å¾—å…ˆåŒæ­¥ä¸»åˆ†æ”¯ä»£ç ï¼Œä¿è¯ä¸<code>fork</code>çš„åŸé¡¹ç›®ä»£ç ä¸€è‡´ï¼Œå¦åˆ™ä½ ä¼šç»§ç»­é‡åˆ°å†²çªã€‚</p><h4 id="æäº¤pråï¼Œæˆ‘forkçš„ä»“åº“å¯ä»¥åˆ é™¤å—"><a href="#æäº¤pråï¼Œæˆ‘forkçš„ä»“åº“å¯ä»¥åˆ é™¤å—" class="headerlink" title="æäº¤pråï¼Œæˆ‘forkçš„ä»“åº“å¯ä»¥åˆ é™¤å—?"></a>æäº¤<code>pr</code>åï¼Œæˆ‘<code>fork</code>çš„ä»“åº“å¯ä»¥åˆ é™¤å—?</h4><p><code>answer</code>ï¼šåœ¨<code>pr</code>è¢«é‡‡çº³å‰ï¼Œä¸èƒ½åˆ é™¤ï¼Œå¦åˆ™è¯¥<code>pr</code>ä¼šè‡ªåŠ¨å…³é—­ï¼›åœ¨é‡‡çº³åæ˜¯å¯ä»¥åˆ é™¤æ‰çš„ï¼Œå› ä¸ºä»£ç å·²ç»è¢«åˆå¹¶è‡³ä¸»é¡¹ç›®é‡Œäº†ï¼ˆå­˜åœ¨äºä¸»ä»“åº“çš„<code>Pull requests</code>è®°å½•ä¹Ÿä¼šè¢«åˆ é™¤ï¼‰ã€‚</p><div class="success"><blockquote><p>ä¸–äº‹åƒå¸†è¿‡ï¼Œå‰æ–¹ç»ˆä¼šæ˜¯æ¸©æŸ”å’Œæœˆå…‰ã€‚</p></blockquote></div>]]></content>
      
      
      <categories>
          
          <category> æ”¶è—å®‰åˆ© </category>
          
          <category> Github </category>
          
      </categories>
      
      
        <tags>
            
            <tag> github </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨æµè§ˆå™¨ä¸Šæ›´è½»æ¾çš„é˜…è¯» Github æºç </title>
      <link href="/posts/github-code-read/"/>
      <url>/posts/github-code-read/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><blockquote><p>å·ç§°åªéœ€è¦<code>1s</code>ï¼Œå°±å¯ä»¥åœ¨æµè§ˆå™¨ä¸Šä½¿ç”¨<code>vscode</code>é˜…è¯»<code>Github</code>ä»£ç . <del>å½“ç„¶<code>vscode</code>çš„å¿«æ·é”®ä¹Ÿæ˜¯æ”¯æŒçš„.</del></p></blockquote><h3 id="æ•ˆæœå±•ç¤º"><a href="#æ•ˆæœå±•ç¤º" class="headerlink" title="æ•ˆæœå±•ç¤º"></a>æ•ˆæœå±•ç¤º</h3><p><a href="/images/posts/github-code-read/p1.png"><img src="/images/posts/github-code-read/p1.png" alt="github-code-read-p1" loading="lazy"></a></p><span id="more"></span><h3 id="ä½¿ç”¨æ–¹å¼"><a href="#ä½¿ç”¨æ–¹å¼" class="headerlink" title="ä½¿ç”¨æ–¹å¼"></a>ä½¿ç”¨æ–¹å¼</h3><h4 id="åœ¨github-comçš„githubåæ·»åŠ 1sï¼Œç„¶åå›è½¦"><a href="#åœ¨github-comçš„githubåæ·»åŠ 1sï¼Œç„¶åå›è½¦" class="headerlink" title="åœ¨github.comçš„githubåæ·»åŠ 1sï¼Œç„¶åå›è½¦"></a>åœ¨<code>github.com</code>çš„<code>github</code>åæ·»åŠ <code>1s</code>ï¼Œç„¶åå›è½¦</h4><p><code>eg. https://github1s.com/conwnet/github1s/blob/HEAD/extensions/vlang-web/snippets/snippets.json</code></p><p>é¡¹ç›®æºç åœ°å€ï¼š<a href="https://github.com/conwnet/github1s">https://github.com/conwnet/github1s</a></p><h4 id="å°†github-comçš„comæ”¹ä¸ºdevï¼Œç„¶åå›è½¦"><a href="#å°†github-comçš„comæ”¹ä¸ºdevï¼Œç„¶åå›è½¦" class="headerlink" title="å°†github.comçš„comæ”¹ä¸ºdevï¼Œç„¶åå›è½¦"></a>å°†<code>github.com</code>çš„<code>com</code>æ”¹ä¸º<code>dev</code>ï¼Œç„¶åå›è½¦</h4><blockquote><p>æˆ–è€…ä½ å¯ä»¥ç›´æ¥ä½¿ç”¨å¿«æ·é”® . å®Œæˆæ›¿æ¢å¹¶æ‰“å¼€ <code>eg. https://github.dev/vuejs/vue</code></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ”¶è—å®‰åˆ© </category>
          
          <category> Github </category>
          
      </categories>
      
      
        <tags>
            
            <tag> github </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäº Husky å’Œ Commitlint å®ç° Git æäº¤è§„èŒƒæ ¡éªŒ</title>
      <link href="/engineering/git-precommit-and-commitmsg-hooks/"/>
      <url>/engineering/git-precommit-and-commitmsg-hooks/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="Beforeâ€¦"><a href="#Beforeâ€¦" class="headerlink" title="Beforeâ€¦"></a>Beforeâ€¦</h3><p><code>husky</code>åœ¨å‰ç«¯å·¥ç¨‹åŒ–çš„è¿‡ç¨‹ä¸­å¯ä»¥è¯´æ˜¯å¿…ä¸å¯å°‘ï¼Œ<code>why?</code> å®ƒå¯ä»¥è®©æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­æ›´åŠ æ–¹ä¾¿çš„å»ä½¿ç”¨<code>git hooks</code>ï¼Œè€Œéä¼ ç»Ÿæ„ä¹‰ä¸Šçš„<code>.git/hooks</code>ä¸‹ç¼–è¾‘ä¿®æ”¹ã€‚</p><p><code>git hooks</code>åˆ™æ˜¯<code>git</code>åœ¨è§¦å‘æŸä¸ªé‡è¦æ“ä½œæ—¶è‡ªåŠ¨æ‰§è¡Œçš„è„šæœ¬ï¼Œæœ¬æ–‡ä¸»è¦å›´ç»•<code>commit-msg and pre-commit</code>ä»‹ç»ã€‚<a href="https://git-scm.com/docs/githooks">äº†è§£æ›´å¤š</a></p><span id="more"></span><h3 id="husky-6â†‘å·¥ä½œåŸç†"><a href="#husky-6â†‘å·¥ä½œåŸç†" class="headerlink" title="husky@6â†‘å·¥ä½œåŸç†"></a><code>husky@6â†‘</code>å·¥ä½œåŸç†</h3><blockquote><p><code>husky@6</code>æ”¾å¼ƒäº†åŸæœ‰çš„é…ç½®æ–¹å¼ï¼ˆåˆ›å»ºæ‰€æœ‰ç±»å‹çš„<code>git hooks</code>ï¼Œæ–¹ä¾¿ç”¨æˆ·è®¾ç½®ä»»ä½•ç±»å‹é’©å­éƒ½èƒ½æ­£å¸¸å·¥ä½œï¼‰ã€‚æ–°ç‰ˆæœ¬æ”¾å¼ƒäº†ä½¿ç”¨é»˜è®¤çš„<code>.git/hooks</code>ï¼Œè€Œæ˜¯æ ¹æ®<code>git@2.9</code>æä¾›çš„æ–°ç‰¹æ€§<code>core.hooksPath</code>æŒ‡å®šäº†<code>hooks</code>æ‰€åœ¨çš„ç›®å½•<code>.husky/</code>ï¼Œå®ç°åªæ·»åŠ ç”¨æˆ·æƒ³è¦çš„<code>hooks</code></p></blockquote><blockquote><p><del>æ—¢ç„¶çŸ¥é“äº†æ–°ç‰ˆæœ¬çš„ç ´åæ€§å˜æ›´ï¼Œä»¥åŠå…¶åŸç†ï¼Œé‚£è‚¯å®šé€‰æ‹©ç”¨æ–°ç‰ˆæœ¬ã€‚ç›®å‰æœ€æ–°ç‰ˆå·²ç»åˆ°<code>8.0.1</code>äº†.</del></p></blockquote><h3 id="æ–°ç‰ˆhuskyä½¿ç”¨"><a href="#æ–°ç‰ˆhuskyä½¿ç”¨" class="headerlink" title="æ–°ç‰ˆhuskyä½¿ç”¨"></a><strong>æ–°ç‰ˆ<code>husky</code>ä½¿ç”¨</strong></h3><h4 id="å®‰è£…husky"><a href="#å®‰è£…husky" class="headerlink" title="å®‰è£…husky"></a>å®‰è£…<code>husky</code></h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">yarn</span> <span class="token function">add</span> -D husky</code></pre><h4 id="å¸è½½husky"><a href="#å¸è½½husky" class="headerlink" title="å¸è½½husky"></a>å¸è½½<code>husky</code></h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">yarn</span> remove husky<span class="token function">git</span> config --unset core.hooksPath</code></pre><h4 id="åˆå§‹åŒ–husky"><a href="#åˆå§‹åŒ–husky" class="headerlink" title="åˆå§‹åŒ–husky"></a>åˆå§‹åŒ–<code>husky</code></h4><pre class="language-bash" data-language="bash"><code class="language-bash">npx husky <span class="token function">install</span><span class="token comment"># æˆ–è€…æ·»åŠ  prepare è„šæœ¬å‘½ä»¤</span><span class="token function">npm</span> set-script prepare <span class="token string">"husky install"</span><span class="token function">yarn</span> prepare<span class="token comment"># install åˆ°æŒ‡å®šçš„ç›®å½•</span>npx husky <span class="token function">install</span> .config/husky</code></pre><h4 id="åˆ›å»ºhooks"><a href="#åˆ›å»ºhooks" class="headerlink" title="åˆ›å»ºhooks"></a>åˆ›å»º<code>hooks</code></h4><blockquote><p>è¯­æ³•ï¼š<code>husky add &lt;file&gt; [cmd]</code></p></blockquote><p><code>eg.</code></p><pre class="language-bash" data-language="bash"><code class="language-bash">husky <span class="token function">add</span> .husky/pre-commit <span class="token string">'eslint'</span></code></pre><h4 id="ç»•è¿‡é’©å­"><a href="#ç»•è¿‡é’©å­" class="headerlink" title="ç»•è¿‡é’©å­"></a>ç»•è¿‡é’©å­</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æ·»åŠ  --no-verify eg.</span><span class="token function">git</span> commit -m <span class="token string">"test"</span> --no-verify</code></pre><h4 id="ç®€å•ä¸¾ä¾‹"><a href="#ç®€å•ä¸¾ä¾‹" class="headerlink" title="ç®€å•ä¸¾ä¾‹"></a>ç®€å•ä¸¾ä¾‹</h4><h5 id="æ·»åŠ pre-commité’©å­ï¼š"><a href="#æ·»åŠ pre-commité’©å­ï¼š" class="headerlink" title="æ·»åŠ pre-commité’©å­ï¼š"></a>æ·»åŠ <code>pre-commit</code>é’©å­ï¼š</h5><p>é€šè¿‡<code>husky add</code>é’©å­æ·»åŠ çš„<code>cmd</code>åœ¨åˆ›å»ºåä½œä¸ºåˆå§‹çš„è„šæœ¬å‘½ä»¤ï¼Œä½ å¯ä»¥å¯¹å…¶åšä»»ä½•ä¿®æ”¹ã€‚<del>æ„å‘³ç€åˆ›å»ºçš„æ—¶å€™å¯ä»¥ä¸åŠ  ğŸ˜ŠğŸ˜ŠğŸ˜Š</del></p><p><code>eg.</code>å½“è§¦å‘<code>pre-commit</code>çš„æ—¶å€™ï¼Œå¯¹ä»£ç æ‰§è¡Œ<code>lint</code>è„šæœ¬æ£€æŸ¥ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash">npx husky <span class="token function">add</span> .husky/pre-commit <span class="token string">'npm run lint'</span><span class="token comment"># or å¦‚æœä½ çš„é¡¹ç›®ä½¿ç”¨äº†è„šæ‰‹æ¶çš„ lintï¼Œä¾‹å¦‚ vue-cli-service...</span><span class="token function">npm</span> set-script lint <span class="token string">"vue-cli-service lint"</span></code></pre><blockquote><p>é’©å­é‡Œé…ç½®çš„<code>npm run lint</code>ï¼Œè¯·ç¡®è®¤ä½ çš„é¡¹ç›®å·²ç»åŒ…å«äº†<code>lint</code>æ ¡éªŒé…ç½®ï¼Œå¹¶è‡ªè¡Œå®‰è£…<code>devDependencies</code>ã€‚<del>åªæ˜¯ä¸ªæ —å­ï¼Œä¸ä¸€å®šå°±æ˜¯åš<code>lint</code>æ ¡éªŒ â¤â¤â¤</del> æ•ˆæœå›¾å¦‚ä¸‹ï¼š</p></blockquote><p><a href="/images/engineering/git-precommit-and-commitmsg-hooks/p1.png"><img src="/images/engineering/git-precommit-and-commitmsg-hooks/p1.png" alt="git-precommit-and-commitmsg-hooks-p1" loading="lazy"></a><br><a href="/images/engineering/git-precommit-and-commitmsg-hooks/p2.png"><img src="/images/engineering/git-precommit-and-commitmsg-hooks/p2.png" alt="git-precommit-and-commitmsg-hooks-p2" loading="lazy"></a></p><h3 id="pre-commitæ­é…lint-staged"><a href="#pre-commitæ­é…lint-staged" class="headerlink" title="pre-commitæ­é…lint-staged"></a><code>pre-commit</code>æ­é…<code>lint-staged</code></h3><p>ä¸Šé¢åªæ˜¯ä¸¾äº†ä¸€ä¸ªæ —å­â€¦<code>pre-commit</code>çš„æ—¶å€™ï¼Œè¿˜å¯ä»¥åšå¾—åˆ°äº‹æƒ…æœ‰å¾ˆå¤šï¼Œä¾‹å¦‚æ‰§è¡Œæµ‹è¯•è„šæœ¬â€¦</p><p><strong>Butâ€¦æ¯æ¬¡è§¦å‘ pre-commit éƒ½å¯¹æ‰€æœ‰çš„æ–‡ä»¶æ‰§è¡Œ lintï¼Œå±å®æ˜¯æœ‰ä¸€ç‚¹ç‚¹æ¶è¶£å‘³äº†ï¼Œè¿™é‡Œä½¿ç”¨ lint-staged å·¥å…·åšä¸€ç‚¹ä¼˜åŒ–.</strong> <del>å¦‚æœä½ ä¸ä»‹æ„â€¦å¯ä»¥è·³è¿‡ä¸‹é¢çš„<code>lint-staged</code>ğŸ˜¢ğŸ˜¢ğŸ˜¢</del></p><h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">yarn</span> <span class="token function">add</span> -D lint-staged</code></pre><h4 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><p>åœ¨é¡¹ç›®çš„<code>package.json</code>ä¸­æ·»åŠ ï¼š</p><pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>  <span class="token comment">// é…ç½®æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­æ¯ä¸ªå€¼éƒ½æ˜¯è¦è¿è¡Œçš„å‘½ä»¤ï¼Œå…¶é”®è¦ç”¨äºæ­¤å‘½ä»¤çš„ glob æ¨¡å¼ï¼Œå€¼ï¼ˆcmdï¼‰å¯ä»¥æ˜¯æ•°ç»„ï¼Œå¦‚æœæ˜¯æ•°ç»„ï¼Œåˆ™æŒ‰é¡ºåºè¿è¡Œå‘½ä»¤ã€‚</span>  <span class="token comment">// ç”šè‡³æ”¯æŒé…ç½®æˆå‡½æ•°ï¼š(filenames: string[]) => string | string[] | Promise&lt;string | string[]></span>  <span class="token comment">// eg. '**/*.js?(x)': filenames => filenames.map(filename => `prettier --write '$&#123;filename&#125;'`)</span>  <span class="token property">"lint-staged"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// ä¾‹å¦‚æ­¤é…ç½®ï¼šé€šè¿‡ eslint å·¥å…·æ£€æµ‹ ä¿®å¤æäº¤çš„ .js .vue .ts çš„é”™è¯¯é¡¹ï¼Œç„¶åæ·»åŠ åˆ°æš‚å­˜åŒº</span>    <span class="token property">"**/*.&#123;js,vue,ts&#125;"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"eslint --fix"</span><span class="token punctuation">,</span> <span class="token string">"git add ."</span><span class="token punctuation">]</span>    <span class="token comment">// ä½ ä¹Ÿå¯ä»¥åªæ˜¯æäº¤å‰æ£€æµ‹</span>    <span class="token comment">// "**/*.&#123;js,vue,ts&#125;": "eslint"</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><blockquote><p>æäº¤å‰ä¼šè‡ªåŠ¨é¡ºåºæ‰§è¡Œ<code>cmd</code>ã€‚ä¾‹å¦‚ä¸Šé¢é…ç½®ï¼Œä¼šå…ˆ<code>eslint --fix</code>å°è¯•ä¿®å¤ï¼Œä¿®å¤æˆåŠŸæ‰§è¡Œ<code>add</code>æ“ä½œï¼Œä¿®å¤å¤±è´¥æŠ›å‡ºå¼‚å¸¸ï¼Œæ­¤æ—¶éœ€è¦æ‰‹åŠ¨ä¿®å¤ï¼Œç„¶åå†æäº¤ã€‚</p></blockquote><p>ä¿®æ”¹<code>.husky/pre-commit</code>é’©å­ï¼Œæ”¹ç”¨<code>lint-staged</code>ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æ‰“å¼€ .husky/pre-commit æ–‡ä»¶ï¼Œä¿®æ”¹ä¹‹å‰ç”Ÿæˆçš„ cmd</span>npx lint-staged<span class="token comment"># or é…ç½® lint-staged è„šæœ¬</span><span class="token function">npm</span> run lint-staged<span class="token comment"># &#123;</span><span class="token comment">#   "scripts": &#123;</span><span class="token comment">#     "lint-staged": "lint-staged"</span><span class="token comment">#   &#125;</span><span class="token comment"># &#125;</span></code></pre><p><a href="https://github.com/okonet/lint-staged">äº†è§£æ›´å¤š<code>lint-staged</code></a></p><p>é™¤äº†åœ¨<code>commit</code>ä¹‹å‰æ·»åŠ ä»£ç æ ¡éªŒå¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹æäº¤çš„<code>message(-m)</code>ä½œè§„èŒƒçº¦æŸã€‚å¦‚ä½•åšï¼Ÿå¾€ä¸‹çœ‹ â†“</p><h3 id="commit-msgæ­é…commitlint"><a href="#commit-msgæ­é…commitlint" class="headerlink" title="commit-msgæ­é…commitlint"></a><code>commit-msg</code>æ­é…<code>commitlint</code></h3><p><code>commit-msg</code>æ˜¯<code>git</code>æäº¤æ—¶æ ¡éªŒæäº¤ä¿¡æ¯çš„é’©å­ï¼ˆæ­¤æ—¶ç”±<code>husky</code>æ¥æŒ‡å®šï¼‰ï¼Œå½“è§¦å‘æ—¶ä¾¿ä¼šä½¿ç”¨<code>commitlit</code>æ¥æ ¡éªŒã€‚å®‰è£…é…ç½®å®Œæˆåï¼Œæƒ³é€šè¿‡<code>git commit</code>æˆ–è€…å…¶å®ƒç¬¬ä¸‰æ–¹å·¥å…·æäº¤æ—¶ï¼Œåªè¦æäº¤ä¿¡æ¯ï¼ˆ<code>-m</code>æŒ‡å®šçš„<code>message</code>ï¼‰ä¸ç¬¦åˆè§„èŒƒå°±æ— æ³•æäº¤ï¼Œå¹¶æç¤ºã€‚</p><blockquote><p>çº¦å®šæ ¼å¼ï¼š git commit -m &lt;type&gt;[optional scope]: &lt;description&gt;</p></blockquote><h4 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">yarn</span> <span class="token function">add</span> -D @commitlint/cli @commitlint/config-conventional</code></pre><h4 id="é…ç½®commmitlint"><a href="#é…ç½®commmitlint" class="headerlink" title="é…ç½®commmitlint"></a>é…ç½®<code>commmitlint</code></h4><p><a href="https://github.com/conventional-changelog/commitlint/blob/master/%40commitlint/config-conventional/index.js">æ›´å¤šé…ç½®é¡¹å‚è€ƒ</a></p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// commmitlint.config.js or .commmitlintrc.js</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@commitlint/config-conventional'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment">// rulesï¼škvç»„æˆçš„å¯¹è±¡ï¼Œeg. 'name:[0, 'always', 72]'</span>  <span class="token comment">// æ•°ç»„ä¸­ç¬¬ä¸€ä½ä¸º levelï¼Œå¯é€‰0,1,2ï¼Œ0ä¸ºdisableï¼Œ1ä¸ºwarningï¼Œ2ä¸ºerror</span>  <span class="token comment">// ç¬¬äºŒä½ä¸ºåº”ç”¨ä¸å¦ï¼Œå¯é€‰ always|never</span>  <span class="token comment">// ç¬¬ä¸‰ä½è¯¥ rule çš„å€¼</span>  <span class="token comment">// rules: &#123;&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code></pre><p>ç„¶åæ·»åŠ <code>husky</code>çš„<code>commit-msg</code>é’©å­ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash">npx husky <span class="token function">add</span> .husky/commit-msg <span class="token string">'npx --no-install commitlint -e'</span></code></pre><p>è²Œä¼¼å·²ç»å¾ˆå®Œç¾äº†ï¼Œ<code>emmm~~</code>ä½†å¼€å§‹å¯¹è§„èŒƒä½¿ç”¨ä¸ç†Ÿæ‚‰çš„ç«¥é‹ï¼Œå¯èƒ½ä¸å¤ªå‹å¥½â€¦æˆ‘ä¸‹é¢æ·»åŠ äº†<code>commitizen</code>ä¼˜åŒ–æ–¹æ¡ˆä½¿ç”¨ï¼Œä¸éœ€è¦å¯ä»¥è·³è¿‡ ğŸ˜ŒğŸ˜ŒğŸ˜Œ</p><h4 id="é…ç½®commitizen"><a href="#é…ç½®commitizen" class="headerlink" title="é…ç½®commitizen"></a>é…ç½®<code>commitizen</code></h4><p><code>commitizen</code>å¯ä»¥è®©ç”¨æˆ·é€šè¿‡ç•Œé¢åŒ–é—®ç­”çš„æ–¹å¼å®Œæˆæäº¤ä¿¡æ¯çš„å½•å…¥ï¼Œå¹¶ç”±ç”¨æˆ·å†³å®šæ˜¯å¦æ¨é€ï¼ˆè¿™ä¸ªè¿‡ç¨‹ä»…ç›¸å½“äºå‘½ä»¤<code>git commit -m &#39;xxx&#39;</code>ï¼‰</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">yarn</span> <span class="token function">add</span> -D commitizen cz-conventional-changelog</code></pre><p>é…ç½®<code>commitizen</code>å¹¶æ·»åŠ <code>commit</code>ä¸º<code>npm script</code>ï¼š</p><pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>  <span class="token comment">// ...</span>  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// cz æœ¬è´¨å°±æ˜¯ commitizen ä¸€æ®µçŸ­å‘½ä»¤ï¼Œä»£æ›¿ git commit ç”Ÿæˆä¸“ä¸šçš„ commit-message</span>    <span class="token property">"commit"</span><span class="token operator">:</span> <span class="token string">"git-cz"</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token property">"config"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"commitizen"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"cz-conventional-changelog"</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>åç»­<code>commit</code>ï¼Œå°±å¯ä»¥ä½¿ç”¨<code>yarn commit</code>è¿›è¡Œ<code>commit</code>ï¼Œå…¶ä¼šè‡ªåŠ¨åšå‡ºå¦‚ä¸‹æç¤ºï¼š</p><p><a href="/images/engineering/git-precommit-and-commitmsg-hooks/p3.png"><img src="/images/engineering/git-precommit-and-commitmsg-hooks/p3.png" alt="git-precommit-and-commitmsg-hooks-p3" loading="lazy"></a></p><div class="warning"><blockquote><p>å› ä¸ºä½ ï¼Œæˆ‘çš„å¿ƒè„æ€»æ˜¯å¿™ä¸ªä¸åœ</p></blockquote></div>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å·¥ç¨‹åŒ– </category>
          
          <category> ä»£ç è§„èŒƒçº¦æŸ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> husky </tag>
            
            <tag> git-hooks </tag>
            
            <tag> commitlint </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git-commit æ·»åŠ  emoji çš„ message æ˜¾ç¤º</title>
      <link href="/posts/git-commit-emoji/"/>
      <url>/posts/git-commit-emoji/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="å…ˆçœ‹æ•ˆæœ"><a href="#å…ˆçœ‹æ•ˆæœ" class="headerlink" title="å…ˆçœ‹æ•ˆæœ"></a>å…ˆçœ‹æ•ˆæœ</h3><p><a href="/images/posts/git-commit-emoji/p1.png"><img src="/images/posts/git-commit-emoji/p1.png" alt="git-commit-emoji-p1" loading="lazy"></a></p><span id="more"></span><blockquote><p>åœ¨æ‰§è¡Œ<code>git commit</code>çš„æ—¶å€™ï¼Œä¸ºè¿™æ¬¡å†…å®¹æäº¤æ‰“ä¸Šæ ‡è®°ï¼ˆä»… emoji æ˜¾ç¤ºï¼‰,å‡¸æ˜¾æ­¤æ¬¡æäº¤çš„å†…å®¹ä¸»ä½“ç±»å‹ï¼Œä¹Ÿä½¿å¾—åœ¨æ•´ä¸ªå†å²æäº¤ä¸­æ˜“äºåŒºåˆ†æŸ¥æ‰¾ã€‚</p></blockquote><blockquote><p>å½“ç„¶ï¼Œè¿™ç§<code>emoji</code>çš„ä»£ç å¹¶ä¸å¼ºåˆ¶ä½¿ç”¨ <del>å¯ä»¥ä¸ç”¨ï¼Œä½†ä¸èƒ½ä¸çŸ¥é“</del></p></blockquote><h3 id="æ ¼å¼è§„èŒƒ"><a href="#æ ¼å¼è§„èŒƒ" class="headerlink" title="æ ¼å¼è§„èŒƒ"></a>æ ¼å¼è§„èŒƒ</h3><p><code>:code:</code><strong>æ³¨æ„è¿™é‡Œçš„å†’å·æ˜¯è‹±æ–‡ï¼Œä¸”ä¸ code ä¹‹é—´æ²¡æœ‰ç©ºæ ¼</strong>.</p><p><code>eg.</code></p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> commit -m <span class="token string">':bug: ä¿®å¤äº†xxxåŠŸèƒ½'</span><span class="token function">git</span> commit -m <span class="token string">':xxx: :xxx: å®Œæˆäº†ä¸€ç³»åˆ—åŠŸèƒ½'</span></code></pre><h3 id="emojiä»£ç "><a href="#emojiä»£ç " class="headerlink" title="emojiä»£ç "></a><code>emoji</code>ä»£ç </h3><table><thead><tr><th>emoji</th><th>emoji ä»£ç </th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>:art:</code> (è°ƒè‰²æ¿)</td><td><code>:art:</code></td><td>æ”¹è¿›ä»£ç ç»“æ„&#x2F;ä»£ç æ ¼å¼</td></tr><tr><td><code>:zap:</code> (é—ªç”µ) <code>:racehorse:</code> (èµ›é©¬)</td><td><code>:zap :racehorse:</code></td><td>æå‡æ€§èƒ½</td></tr><tr><td><code>:fire:</code> (ç«ç„°)</td><td><code>:fire:</code></td><td>ç§»é™¤ä»£ç æˆ–æ–‡ä»¶</td></tr><tr><td><code>:bug:</code> (bug)</td><td><code>:bug:</code></td><td>ä¿®å¤ bug</td></tr><tr><td><code>:ambulance:</code> (æ€¥æ•‘è½¦)</td><td><code>:ambulance:</code></td><td>é‡è¦è¡¥ä¸</td></tr><tr><td><code>:sparkles:</code> (ç«èŠ±)</td><td><code>:sparkles:</code></td><td>å¼•å…¥æ–°åŠŸèƒ½</td></tr><tr><td><code>:memo:</code> (å¤‡å¿˜å½•)</td><td><code>:memo:</code></td><td>æ’°å†™æ–‡æ¡£</td></tr><tr><td><code>:rocket:</code> (ç«ç®­)</td><td><code>:rocket:</code></td><td>éƒ¨ç½²åŠŸèƒ½</td></tr><tr><td><code>:lipstick:</code> (å£çº¢)</td><td><code>:lipstick:</code></td><td>æ›´æ–° UI å’Œæ ·å¼æ–‡ä»¶</td></tr><tr><td><code>:tada:</code> (åº†ç¥)</td><td><code>:tada:</code></td><td>åˆæ¬¡æäº¤</td></tr><tr><td><code>:white_check_mark:</code> (ç™½è‰²å¤é€‰æ¡†)</td><td><code>:white_check_mark:</code></td><td>å¢åŠ æµ‹è¯•</td></tr><tr><td><code>:lock:</code> (é”)</td><td><code>:lock:</code></td><td>ä¿®å¤å®‰å…¨é—®é¢˜</td></tr><tr><td><code>:apple:</code> (è‹¹æœ)</td><td><code>:apple:</code></td><td>ä¿®å¤ macOS ä¸‹çš„é—®é¢˜</td></tr><tr><td><code>:penguin:</code> (ä¼é¹…)</td><td><code>:penguin:</code></td><td>ä¿®å¤ Linux ä¸‹çš„é—®é¢˜</td></tr><tr><td><code>:checkered_flag:</code> (æ——å¸œ)</td><td><code>:checked_flag:</code></td><td>ä¿®å¤ Windows ä¸‹çš„é—®é¢˜</td></tr><tr><td><code>:bookmark:</code> (ä¹¦ç­¾)</td><td><code>:bookmark:</code></td><td>å‘è¡Œ&#x2F;ç‰ˆæœ¬æ ‡ç­¾</td></tr><tr><td><code>:rotating_light:</code> (è­¦è½¦ç¯)</td><td><code>:rotating_light:</code></td><td>ç§»é™¤ linter è­¦å‘Š</td></tr><tr><td><code>:construction:</code> (æ–½å·¥)</td><td><code>:construction:</code></td><td>å·¥ä½œè¿›è¡Œä¸­</td></tr><tr><td><code>:green_heart:</code> (ç»¿å¿ƒ)</td><td><code>:green_heart:</code></td><td>ä¿®å¤ CI æ„å»ºé—®é¢˜</td></tr><tr><td><code>:arrow_down:</code> (ä¸‹é™ç®­å¤´)</td><td><code>:arrow_down:</code></td><td>é™çº§ä¾èµ–</td></tr><tr><td><code>:arrow_up:</code> (ä¸Šå‡ç®­å¤´)</td><td><code>:arrow_up:</code></td><td>å‡çº§ä¾èµ–</td></tr><tr><td><code>:construction_worker:</code> (å·¥äºº)</td><td><code>:construction_worker:</code></td><td>æ·»åŠ  CI æ„å»ºç³»ç»Ÿ</td></tr><tr><td><code>:chart_with_upwards_trend:</code> (ä¸Šå‡è¶‹åŠ¿å›¾)</td><td><code>:chart_with_upwards_trend:</code></td><td>æ·»åŠ åˆ†ææˆ–è·Ÿè¸ªä»£ç </td></tr><tr><td><code>:hammer:</code> (é”¤å­)</td><td><code>:hammer:</code></td><td>é‡å¤§é‡æ„</td></tr><tr><td><code>:heavy_minus_sign:</code> (å‡å·)</td><td><code>:heavy_minus_sign:</code></td><td>å‡å°‘ä¸€ä¸ªä¾èµ–</td></tr><tr><td><code>:heavy_plus_sign:</code> (åŠ å·)</td><td><code>:heavy_plug_sign:</code></td><td>å¢åŠ ä¸€ä¸ªä¾èµ–</td></tr><tr><td><code>:whale:</code> (é²¸é±¼)</td><td><code>:whale:</code></td><td>Docker ç›¸å…³å·¥ä½œ</td></tr><tr><td><code>:wrench:</code> (æ‰³æ‰‹)</td><td><code>:wrench:</code></td><td>ä¿®æ”¹é…ç½®æ–‡ä»¶</td></tr><tr><td><code>:globe_with_meridians:</code> (åœ°çƒ)</td><td><code>:globe_with_meridians:</code></td><td>å›½é™…åŒ–ä¸æœ¬åœ°åŒ–</td></tr><tr><td><code>:pencil2:</code> (é“…ç¬”)</td><td><code>:pencil2:</code></td><td>ä¿®å¤ typo</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> æ”¶è—å®‰åˆ© </category>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> emoji </tag>
            
            <tag> git-commit </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git ä½¿ç”¨è¿‡ç¨‹ä¸­çš„è¸©å‘è®°å½•</title>
      <link href="/bugs/git-errors/"/>
      <url>/bugs/git-errors/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><blockquote><p>ç”¨äºè®°å½•ç”±äº<code>git</code>çš„ä¸è§„èŒƒä½¿ç”¨<code>or</code>å…¶ä»–é—®é¢˜å¯¼è‡´çš„<strong>é”™è¯¯å’Œå¥‡æ€ªç°è±¡</strong>ï¼ŒåŠå…¶å®é™…è§£å†³æ–¹æ¡ˆæ±‡æ€»ã€‚</p></blockquote><span id="more"></span><h3 id="åˆ†æ”¯ä¿¡æ¯ä¸åŒæ­¥"><a href="#åˆ†æ”¯ä¿¡æ¯ä¸åŒæ­¥" class="headerlink" title="åˆ†æ”¯ä¿¡æ¯ä¸åŒæ­¥"></a>åˆ†æ”¯ä¿¡æ¯ä¸åŒæ­¥</h3><blockquote><p>ç”¨æˆ·<code>A</code>åˆ é™¤äº†æœ¬åœ°åŠè¿œç¨‹çš„æŸåˆ†æ”¯<code>fz</code>åï¼Œç”¨æˆ·<code>B</code>æ‰§è¡Œ<code>git branch -a</code>ä¾æ—§èƒ½å¤Ÿçœ‹åˆ°è¯¥åˆ†æ”¯.</p></blockquote><p>å°½ç®¡ç”¨æˆ·<code>B</code>æ‰§è¡Œ<code>git pull</code>æ‹‰å–å¹¶åˆå¹¶ä¿®æ”¹ï¼Œç”¨æˆ·<code>B</code>ä»ç„¶èƒ½å¤Ÿçœ‹åˆ°è¢«åˆ é™¤<code>origin/fz</code>åˆ†æ”¯.é‚£ä¹ˆæ­¤æ—¶åº”è¯¥æ€ä¹ˆè§£å†³ï¼Ÿ</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æ‰§è¡Œä¸‹é¢å‘½ä»¤ --- åˆ é™¤è¿œç¨‹ä¸å­˜åœ¨ï¼Œä½†æœ¬åœ°é€šè¿‡æŒ‡ä»¤ä»èƒ½çœ‹åˆ°çš„æŸ origin/xxx åˆ†æ”¯</span><span class="token function">git</span> remote prune origin<span class="token comment"># å¦‚æœç”¨æˆ· B æ˜¾ç¤ºæœ¬åœ°ä¹Ÿè¿˜å­˜åœ¨ fz åˆ†æ”¯ï¼Œéœ€è¦å†åˆ é™¤æœ¬åœ°çš„ fzï¼ˆå…ˆåˆ‡åˆ°å¦å¤–ä¸€ä¸ªé fz åˆ†æ”¯ï¼Œå½“ç„¶ä¸åˆ é™¤ä¹Ÿä¸å½±å“ï¼‰</span><span class="token function">git</span> branch -d fz</code></pre><h3 id="æ‹’ç»åˆå¹¶ä¸ç›¸å…³çš„å†å²"><a href="#æ‹’ç»åˆå¹¶ä¸ç›¸å…³çš„å†å²" class="headerlink" title="æ‹’ç»åˆå¹¶ä¸ç›¸å…³çš„å†å²"></a>æ‹’ç»åˆå¹¶ä¸ç›¸å…³çš„å†å²</h3><p><code>refusing to merge unrelated histories: </code>å‡ºç°è¿™ä¸ªé—®é¢˜çš„æœ€ä¸»è¦åŸå› è¿˜æ˜¯åœ¨äºæœ¬åœ°ä»“åº“å’Œè¿œç¨‹ä»“åº“å®é™…ä¸Šæ˜¯ç‹¬ç«‹çš„ä¸¤ä¸ªä»“åº“ã€‚ï¼ˆä¾‹å¦‚ä½ åœ¨æœ¬åœ°åˆå§‹åŒ–äº†ä¸€ä¸ªä»“åº“ï¼Œå¹¶æäº¤äº†ä¸€äº›ä¸œè¥¿ï¼Œç„¶åä¸è¿œç¨‹ä»“åº“å»ºç«‹å…³è”ï¼Œæ­¤æ—¶æ¨é€å°±ä¼šæŠ›è¿™ä¸ªå¼‚å¸¸ï¼‰ç›´æ¥<code>clone</code>çš„æ–¹å¼åœ¨æœ¬åœ°å»ºç«‹èµ·è¿œç¨‹<code>github</code>ä»“åº“çš„å…‹éš†æœ¬åœ°ä»“åº“å°±ä¸ä¼šæœ‰è¿™ä¸ªé—®é¢˜ã€‚è§£å†³åŠæ³•ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> pull origin master --allow-unrelated-histories</code></pre><h3 id="æ–°å»ºåˆ†æ”¯é¦–æ¬¡æäº¤é”™è¯¯"><a href="#æ–°å»ºåˆ†æ”¯é¦–æ¬¡æäº¤é”™è¯¯" class="headerlink" title="æ–°å»ºåˆ†æ”¯é¦–æ¬¡æäº¤é”™è¯¯"></a>æ–°å»ºåˆ†æ”¯é¦–æ¬¡æäº¤é”™è¯¯</h3><p><code>There is no tracking information for the current branch</code>ï¼Œæ­¤æ—¶éœ€è¦åœ¨æ¨é€çš„æ—¶å€™å»ºç«‹å…³è”ï¼Œæ ¹æ®æç¤ºå®Œæˆå³å¯ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># (åˆ†æ”¯åç§°)ï¼Œå»ºç«‹å…³è”å…³ç³»å³å¯</span><span class="token function">git</span> branch --set-upstream-to<span class="token operator">=</span>origin/xxx</code></pre><h3 id="æ¨é€è¢«æ‹’ç»"><a href="#æ¨é€è¢«æ‹’ç»" class="headerlink" title="æ¨é€è¢«æ‹’ç»"></a>æ¨é€è¢«æ‹’ç»</h3><p><code>Updates were rejected because a pushed branch tip is behind its remote.</code>æ¨é€çš„åˆ†æ”¯æç¤ºä½äºå…¶è¿œç¨‹æäº¤çš„åé¢ã€‚æ¯”å¦‚åˆ«äººæäº¤äº†ï¼Œä½ å¹¶æ²¡æœ‰æ‹‰å–æœ€æ–°ä»£ç ï¼Œç›´æ¥<code>push</code>å°±ä¼šå­˜åœ¨è¯¥æç¤ºã€‚</p><blockquote><p>å»ºè®®ï¼šæ¯æ¬¡<code>push</code>ä¹‹å‰æœ€å¥½å…ˆ<code>pull</code>æ‹‰å–å¹¶åˆå¹¶ä»£ç ï¼Œå¦‚æœæœ‰å†²çªå°±è§£å†³å†²çªï¼Œç„¶åå†æ‰§è¡Œ<code>push</code>ï¼Œå¯ä»¥é¿å…å¾ˆå¤šé—®é¢˜ã€‚</p></blockquote><blockquote><p>è§£å†³åŠæ³•ï¼šå…ˆ<code>pull</code>æ‹‰å–æœ€æ–°ä»£ç åˆå¹¶ï¼Œç„¶åå†æäº¤ã€‚<strong>æˆ–è€…</strong>: æ·»åŠ  <code>-f</code> å‚æ•°å¼ºåˆ¶æ¨é€ã€‚</p></blockquote><h3 id="æ–‡ä»¶åå¤§å°å†™ä¸æ•æ„Ÿ"><a href="#æ–‡ä»¶åå¤§å°å†™ä¸æ•æ„Ÿ" class="headerlink" title="æ–‡ä»¶åå¤§å°å†™ä¸æ•æ„Ÿ"></a>æ–‡ä»¶åå¤§å°å†™ä¸æ•æ„Ÿ</h3><p>è¿™ä¸ªåœ¨å¦å¤–ä¸€ç¯‡<code>gitæŒ‡ä»¤ä½¿ç”¨</code>ä¸­ä¹Ÿæåˆ°è¿‡ï¼Œ<code>windows</code>ç¯å¢ƒä¸‹<code>git</code>å¯¹å¤§å°å†™è¯†åˆ«ä¸æ•æ„Ÿï¼Œè§£å†³åŠæ³•ï¼š</p><blockquote><p>æ–¹æ¡ˆä¸€ï¼šé‡å‘½åä¸ºå¦å¤–ä¸€ä¸ªåå­—ï¼Œç„¶åæäº¤ï¼ˆä¸€å®šè¦æäº¤ï¼‰ï¼Œç„¶åå†æ”¹å›ä½ è¦ä¿®æ”¹çš„å¤§ã€å°å†™åç§°ã€‚ï¼ˆä¸ä»…éº»çƒ¦ï¼Œè€Œä¸”è¿˜ä¼šå¤šäº§ç”Ÿä¸€æ¡æ— å…³çš„æäº¤ï¼‰</p></blockquote><blockquote><p>æ–¹æ¡ˆäºŒï¼šä½¿ç”¨<code>git mv [file] [newfile]</code>æŒ‡ä»¤ä¿®æ”¹ã€‚</p></blockquote><h3 id="è¡Œå°¾ç»“æŸç¬¦ç»Ÿä¸€"><a href="#è¡Œå°¾ç»“æŸç¬¦ç»Ÿä¸€" class="headerlink" title="è¡Œå°¾ç»“æŸç¬¦ç»Ÿä¸€"></a>è¡Œå°¾ç»“æŸç¬¦ç»Ÿä¸€</h3><p>é—®é¢˜æè¿°åŠè§£å†³æ–¹æ¡ˆè¯¦è§<a href="/envConstruct/git-install-and-terminal-config">-&gt; git ç¯å¢ƒæ­å»º</a></p><h3 id="HttpRequestException-encountered"><a href="#HttpRequestException-encountered" class="headerlink" title="HttpRequestException encountered"></a>HttpRequestException encountered</h3><p>ä½¿ç”¨<code>Git</code>ä¸‹è½½æˆ–è€…æ›´æ–°ä»£ç æ—¶å‡ºç°<code>fatalï¼šHttpRequestException encountered</code>æç¤ºä¿¡æ¯ï¼Œä½†æ˜¯å®ƒåˆä¸ä¼šå½±å“ Git çš„æ­£å¸¸ä½¿ç”¨</p><blockquote><p>è§£å†³åŠæ³•ï¼šæ›´æ–°<code>Windows</code>çš„<code>git</code>å‡­è¯ç®¡ç†å™¨ï¼Œæ‰“å¼€é“¾æ¥ï¼Œä¸‹è½½å®‰è£…å³å¯ <a href="https://github.com/Microsoft/Git-Credential-Manager-for-Windows/releases/tag/v1.14.0">https://github.com/Microsoft/Git-Credential-Manager-for-Windows/releases/tag/v1.14.0</a></p></blockquote><h3 id="æŒç»­æ›´æ–°ä¸­â€¦"><a href="#æŒç»­æ›´æ–°ä¸­â€¦" class="headerlink" title="æŒç»­æ›´æ–°ä¸­â€¦"></a>æŒç»­æ›´æ–°ä¸­â€¦</h3>]]></content>
      
      
      <categories>
          
          <category> è¸©å‘è®°å½• </category>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bug </tag>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git çš„åŸºæœ¬ä½¿ç”¨</title>
      <link href="/tools/git/"/>
      <url>/tools/git/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><blockquote><p>Git is a free and open source distributed version control system</p></blockquote><h3 id="Gitæ˜¯ç”¨æ¥åšä»€ä¹ˆçš„"><a href="#Gitæ˜¯ç”¨æ¥åšä»€ä¹ˆçš„" class="headerlink" title="Gitæ˜¯ç”¨æ¥åšä»€ä¹ˆçš„?"></a><code>Git</code>æ˜¯ç”¨æ¥åšä»€ä¹ˆçš„?</h3><ul><li><p>æ‰˜ç®¡ä»£ç åˆ°è¿œç¨‹ï¼Œåˆ†å¸ƒå¼æ‰˜ç®¡ï¼Œé¿å…æœ¬æœºç£ç›˜æŸåé€ æˆä¸å¯æŒ½å›çš„å±€é¢ã€‚</p></li><li><p>ç‰ˆæœ¬æ§åˆ¶ï¼Œå¯ä»¥å‘å¸ƒå¤šä¸ªç‰ˆæœ¬å¹¶ä¸”å®ç°åœ¨å„ä¸ªç‰ˆæœ¬ä¹‹é—´æ¥å›ç©¿æ¢­ï¼ˆå®ç°åŸç†ï¼šæ–‡ä»¶å¿«ç…§ï¼Œæ¯ä¸ªç‰ˆæœ¬éƒ½ä¼šæœ‰ä¸€ä¸ªæ–‡ä»¶å¿«ç…§ï¼Œæ¯”ç›´æ¥å¤‡ä»½æ–‡ä»¶å¿«é€Ÿä¾¿æ·ã€‚å› æ­¤ï¼ŒGit ä»“åº“åˆè¢«ç§°ä¸ºç‰ˆæœ¬åº“ï¼‰ã€‚</p></li><li><p>å›¢é˜Ÿåä½œï¼Œå¼ºå¤§çš„åˆ†æ”¯åŠŸèƒ½ï¼Œå¯ä»¥å¿«é€Ÿå®ç°å›¢é˜Ÿåä½œ</p></li></ul><span id="more"></span><p>ç¯å¢ƒæ­å»ºï¼š<a href="/envConstruct/git-install-and-terminal-config">-&gt; æˆ³è¿™é‡Œ</a></p><hr><h3 id="æŒ‡ä»¤ä½¿ç”¨"><a href="#æŒ‡ä»¤ä½¿ç”¨" class="headerlink" title="æŒ‡ä»¤ä½¿ç”¨"></a>æŒ‡ä»¤ä½¿ç”¨</h3><h4 id="é…ç½®ä¿¡æ¯"><a href="#é…ç½®ä¿¡æ¯" class="headerlink" title="é…ç½®ä¿¡æ¯"></a>é…ç½®ä¿¡æ¯</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config <span class="token operator">&lt;</span>scope<span class="token operator">></span> <span class="token operator">&lt;</span>key<span class="token operator">></span> <span class="token operator">&lt;</span>value<span class="token operator">></span><span class="token comment"># åˆ—å‡ºç”¨æˆ·çº§çš„æ‰€æœ‰é…ç½®ä¿¡æ¯</span><span class="token function">git</span> config --global -l<span class="token comment"># å¢åŠ é…ç½®é¡¹ é»˜è®¤æ˜¯è·å–localé…ç½®ä¸­å†…å®¹</span><span class="token function">git</span> config <span class="token punctuation">[</span>--local<span class="token operator">|</span>--global<span class="token operator">|</span>--system<span class="token punctuation">]</span> --get section.key<span class="token comment"># è·å–ä¸€ä¸ªé…ç½®é¡¹</span><span class="token function">git</span> config <span class="token punctuation">[</span>--local<span class="token operator">|</span>--global<span class="token operator">|</span>--system<span class="token punctuation">]</span> --get section.key<span class="token comment"># åˆ é™¤ä¸€ä¸ªé…ç½®é¡¹</span><span class="token function">git</span> config <span class="token punctuation">[</span>--local<span class="token operator">|</span>--global<span class="token operator">|</span>--system<span class="token punctuation">]</span> --unset section.key</code></pre><p><code>git</code>çš„é…ç½®çº§åˆ«ä¸»è¦æœ‰ä¸‰ç±»ï¼ŒæŒ‰ä¼˜å…ˆçº§é¡ºåºåˆ†ä¸ºï¼š<code>local(ä»“åº“çº§)ã€global(ç”¨æˆ·çº§)ã€system(ç³»ç»Ÿçº§)</code>ï¼š</p><blockquote><p><code>local</code>(ä»“åº“çº§)ï¼šå¯¹åº”çš„é…ç½®æ–‡ä»¶æ˜¯å½“å‰ä»“åº“ä¸‹çš„<code>.git/config</code> ï¼ˆé»˜è®¤æ˜¯éšè—çš„ï¼‰</p></blockquote><blockquote><p><code>global</code>(ç”¨æˆ·çº§)ï¼šå¯¹åº”çš„é…ç½®æ–‡ä»¶æ˜¯ç”¨æˆ·å®¿ä¸»ç›®å½•ä¸‹çš„<code>~/.gitconfig</code></p></blockquote><blockquote><p><code>system</code>(ç³»ç»Ÿçº§)ï¼šå¯¹åº”çš„é…ç½®æ–‡ä»¶æ˜¯<code>git</code>å®‰è£…ç›®å½•ä¸‹çš„<code>/etc/gitconfig</code></p></blockquote><h4 id="åˆå§‹åŒ–é¡¹ç›®ä»“åº“"><a href="#åˆå§‹åŒ–é¡¹ç›®ä»“åº“" class="headerlink" title="åˆå§‹åŒ–é¡¹ç›®ä»“åº“"></a>åˆå§‹åŒ–é¡¹ç›®ä»“åº“</h4><p>åŒºåˆ«äºå…‹éš†ï¼Œåˆå§‹åŒ–ä»“åº“é€šå¸¸æ˜¯åœ¨æ–°å»ºé¡¹ç›®æ—¶ä½¿ç”¨ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–ä»“åº“</span><span class="token function">git</span> init<span class="token comment"># ç¬¬äºŒæ­¥ï¼šå»ºç«‹æœ¬åœ°ä»“åº“ä¸è¿œç¨‹ä»“åº“çš„å…³è”</span><span class="token function">git</span> remote <span class="token function">add</span> origin <span class="token punctuation">[</span>çº¿ä¸Šä»“åº“åœ°å€<span class="token punctuation">]</span><span class="token comment"># å¦‚æœæ­¤å‘½ä»¤æŠ›å‡º fatal: remote origin already exists. å¼‚å¸¸ï¼Œé‚£ä¹ˆç»§ç»­æ‰§è¡Œï¼š</span><span class="token function">git</span> remote <span class="token function">rm</span> origin<span class="token function">git</span> remote <span class="token function">add</span> origin <span class="token punctuation">[</span>çº¿ä¸Šä»“åº“çš„SSHåœ°å€<span class="token punctuation">]</span></code></pre><p><code>æ³¨æ„ï¼š.git æ–‡ä»¶ä¸èƒ½åµŒå¥—ï¼ˆä»“åº“ä¸èƒ½åµŒå¥—ï¼‰</code></p><h4 id="å…‹éš†ä¸€ä¸ªé¡¹ç›®"><a href="#å…‹éš†ä¸€ä¸ªé¡¹ç›®" class="headerlink" title="å…‹éš†ä¸€ä¸ªé¡¹ç›®"></a>å…‹éš†ä¸€ä¸ªé¡¹ç›®</h4><p>å…‹éš†ä¸€ä¸ªå·²ç»å­˜åœ¨çš„é¡¹ç›®åˆ°æœ¬åœ°ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> clone <span class="token punctuation">[</span>url<span class="token punctuation">]</span></code></pre><h4 id="ä¸€æ¬¡æäº¤æµç¨‹"><a href="#ä¸€æ¬¡æäº¤æµç¨‹" class="headerlink" title="ä¸€æ¬¡æäº¤æµç¨‹"></a>ä¸€æ¬¡æäº¤æµç¨‹</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å…ˆæ‹‰å–ç›®æ ‡åˆ†æ”¯çš„æœ€æ–°ä»£ç ï¼Œæ‹‰å–ä¹‹åç›´æ¥åˆå¹¶ã€‚å¯ä»¥ç®€å†™ä¸º git pull</span><span class="token function">git</span> pull origin <span class="token punctuation">[</span>åˆ†æ”¯å<span class="token punctuation">]</span><span class="token comment"># git pull = git fetch + git merge</span><span class="token comment"># git fetch origin [åˆ†æ”¯å] ï¼šå…ˆæ‹‰å–ç›®æ ‡åˆ†æ”¯çš„æœ€æ–°ä»£ç ï¼Œæ‹‰å–ä¹‹åç”±ç”¨æˆ·å†³å®šæ˜¯å¦åˆå¹¶</span><span class="token comment"># å°†æ”¹åŠ¨çš„ä»£ç æ–‡ä»¶æ·»åŠ è‡³æš‚å­˜åŒº</span><span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span><span class="token comment"># ä¹Ÿå¯ä»¥ git add [æ–‡ä»¶å] æ¥å•ç‹¬æ·»åŠ æŸä¸€ä¸ªæ–‡ä»¶</span><span class="token function">git</span> <span class="token function">add</span> -A<span class="token comment"># å°†æš‚å­˜åŒºçš„æ–‡ä»¶æäº¤è‡³æœ¬åœ°ä»“åº“</span><span class="token function">git</span> commit -m <span class="token string">'è¿™æ¬¡æäº¤çš„æè¿°ä¿¡æ¯'</span><span class="token comment"># å°†ä»£ç æ¨é€åˆ°è¿œç¨‹ å¦‚æœä¸æ˜¯è¯¥åˆ†æ”¯çš„ç¬¬ä¸€æ¬¡æ¨é€ï¼Œå¯ä»¥ç®€å†™ä¸º git push</span><span class="token function">git</span> push origin <span class="token punctuation">[</span>åˆ†æ”¯å<span class="token punctuation">]</span><span class="token comment"># å½“ç„¶è¿™ä¸ªè¿‡ç¨‹ä½ ä¹Ÿå¯ä»¥æŸ¥çœ‹å½“å‰ä»“åº“çš„çŠ¶æ€</span><span class="token function">git</span> status</code></pre><p>å¦‚å›¾ï¼š</p><p><a href="/images/tools/git/p1.png"><img src="/images/tools/git/p1.png" alt="git-p1" loading="lazy"></a></p><h4 id="æŸ¥çœ‹æäº¤æ—¥å¿—"><a href="#æŸ¥çœ‹æäº¤æ—¥å¿—" class="headerlink" title="æŸ¥çœ‹æäº¤æ—¥å¿—"></a>æŸ¥çœ‹æäº¤æ—¥å¿—</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> log</code></pre><h4 id="ç§»åŠ¨ã€é‡å‘½åæ–‡ä»¶"><a href="#ç§»åŠ¨ã€é‡å‘½åæ–‡ä»¶" class="headerlink" title="ç§»åŠ¨ã€é‡å‘½åæ–‡ä»¶"></a><strong>ç§»åŠ¨ã€é‡å‘½åæ–‡ä»¶</strong></h4><div class="success"><blockquote><p><code>git mv</code>å‘½ä»¤ç”¨äºç§»åŠ¨æˆ–é‡å‘½åä¸€ä¸ªæ–‡ä»¶ã€ç›®å½•æˆ–è½¯è¿æ¥ï¼Œå¯ä»¥è§£å†³<code>windows</code>ç¯å¢ƒä¸‹<code>git</code>å¯¹æ–‡ä»¶åŠæ–‡ä»¶å¤¹å¤§å°å†™ä¸æ•æ„Ÿé—®é¢˜ã€‚ï¼ˆ<del>å½“ç„¶åˆ é™¤å†æäº¤ï¼Œé‡æ–°æ·»åŠ å†æäº¤ä¹Ÿæ˜¯å¯ä»¥æ»´ ğŸ˜‚ğŸ˜‚ğŸ˜‚</del>ï¼‰</p></blockquote></div><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å…ˆ cd åˆ°ä½ è¦é‡å‘½åçš„æ–‡ä»¶å¤¹ï¼Œç„¶åæ‰§è¡Œä¸‹é¢å‘½ä»¤</span><span class="token function">git</span> <span class="token function">mv</span> <span class="token punctuation">[</span>file<span class="token punctuation">]</span> <span class="token punctuation">[</span>newfile<span class="token punctuation">]</span><span class="token comment"># eg. root/static/images -> root/static/image</span><span class="token builtin class-name">cd</span> ./static<span class="token function">git</span> <span class="token function">mv</span> images image<span class="token comment"># é‡å‘½åçš„æ–‡ä»¶å¤¹ å·²å­˜åœ¨ï¼Œæ­¤æ—¶çš„ mv å°±æ˜¯ç§»åŠ¨æŒ‡ä»¤æŒ‡--ç§»åŠ¨åˆ°--   å¦‚æœæƒ³ç§»åŠ¨åˆ° ä¸Šä¸€çº§ï¼š</span><span class="token function">git</span> <span class="token function">mv</span> files <span class="token punctuation">..</span><span class="token comment"># å¯¹äºæ–‡ä»¶è€Œè¨€ï¼Œå¦‚æœå·²å­˜åœ¨ï¼Œæ·»åŠ  -f å¼ºåˆ¶ä¿®æ”¹</span><span class="token function">git</span> <span class="token function">mv</span> -f <span class="token punctuation">[</span>file<span class="token punctuation">]</span> <span class="token punctuation">[</span>newfile<span class="token punctuation">]</span></code></pre><h4 id="å­˜å‚¨æ–‡ä»¶æ”¹åŠ¨"><a href="#å­˜å‚¨æ–‡ä»¶æ”¹åŠ¨" class="headerlink" title="å­˜å‚¨æ–‡ä»¶æ”¹åŠ¨"></a>å­˜å‚¨æ–‡ä»¶æ”¹åŠ¨</h4><p>åœºæ™¯ï¼šå½“å‰å·¥ä½œåŒºè¢«æ±¡æŸ“ï¼Œå†…å®¹æœªå®Œæˆï¼Œä¸æƒ³ç›´æ¥æäº¤ï¼Œ éœ€è¦åˆ‡åˆ°æŒ‡å®šåˆ†æ”¯ç‰ˆæœ¬ç´§æ€¥è§£å†³å…¶ä»–éœ€æ±‚ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å­˜å‚¨å½“å‰å·¥ä½œåŒºçš„æ”¹åŠ¨ï¼ˆä¸å­˜å‚¨æ–°æ–‡ä»¶åŠ ignore çš„æ–‡ä»¶</span><span class="token function">git</span> stash<span class="token comment"># å­˜å‚¨æ‰€æœ‰æ”¹åŠ¨</span><span class="token function">git</span> stash -a<span class="token comment"># æŒ‡å®šç‰ˆæœ¬ test å¹¶å­˜å‚¨</span><span class="token function">git</span> stash save <span class="token string">'test'</span><span class="token comment"># æŸ¥çœ‹å½“å‰å­˜å‚¨çš„æ‰€æœ‰ç‰ˆæœ¬</span><span class="token function">git</span> stash list<span class="token comment"># å¼¹å‡ºæœ€æ–°çš„å­˜å‚¨å†…å®¹è‡³å·¥ä½œåŒº å¹¶åˆ é™¤å­˜å‚¨å¯¹åº”çš„ç‰ˆæœ¬çš„å­˜å‚¨</span><span class="token function">git</span> stash pop<span class="token comment"># åº”ç”¨æŒ‡å®šç‰ˆæœ¬çš„å­˜å‚¨å†…å®¹è‡³å·¥ä½œåŒº ä¸åˆ é™¤å­˜å‚¨ version å¯¹åº”å­˜å‚¨çš„ç‰ˆæœ¬å· 0ã€1ã€ã€</span><span class="token function">git</span> stash apply stash@<span class="token punctuation">&#123;</span>version<span class="token punctuation">&#125;</span><span class="token comment"># åˆ é™¤æŒ‡å®šçš„å­˜å‚¨ç‰ˆæœ¬å†…å®¹ 0 ä¸ºç‰ˆæœ¬å·</span><span class="token function">git</span> stash drop stash@<span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token comment"># åˆ é™¤æ‰€æœ‰çš„å­˜å‚¨</span><span class="token function">git</span> stash <span class="token function">clear</span><span class="token comment"># ...</span></code></pre><h4 id="å°†æŸæ¬¡æäº¤åˆå¹¶è‡³å½“å‰åˆ†æ”¯"><a href="#å°†æŸæ¬¡æäº¤åˆå¹¶è‡³å½“å‰åˆ†æ”¯" class="headerlink" title="å°†æŸæ¬¡æäº¤åˆå¹¶è‡³å½“å‰åˆ†æ”¯"></a>å°†æŸæ¬¡æäº¤åˆå¹¶è‡³å½“å‰åˆ†æ”¯</h4><p>åœºæ™¯ï¼šåœ¨æŸä¸ªåŠŸèƒ½åˆ†æ”¯<code>A</code>ä¸Šæ–°å¢äº†ä¸€ä¸ªåŠŸèƒ½æäº¤ï¼Œæƒ³åœ¨å¦å¤–ä¸€ä¸ªåˆ†æ”¯<code>B</code>ä½¿ç”¨ï¼Œä½†åˆä¸æƒ³è®©å¦å¤–è¿™ä¸ªåˆ†æ”¯<code>B</code>åˆå¹¶<code>A</code>çš„å…¶ä»–åŠŸèƒ½ï¼Œæ­¤æ—¶ï¼Œå¯ä»¥é€šè¿‡<code>cherry-pick</code>å°†<code>A</code>çš„æŸæ¬¡æäº¤åˆå¹¶åˆ°<code>B</code>ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åˆ‡æ¢åˆ°åˆ†æ”¯ B</span><span class="token function">git</span> checkout B<span class="token comment"># å°†åˆ†æ”¯ A æäº¤çš„ asgasgasgnajsgank å†…å®¹åˆå¹¶å½“å½“å‰çš„ B åˆ†æ”¯</span><span class="token function">git</span> cherry-pick asgasgasgnajsgank<span class="token comment"># é‡åˆ°å†²çª</span><span class="token comment"># è§£å†³å†²çª å…ˆæ‰“å¼€ç¼–è¾‘å™¨è§£å†³å†²çª</span><span class="token comment"># -- å·¥ä½œåŒºæ˜¯å¹²å‡€çš„</span><span class="token function">git</span> cherry-pick --continue<span class="token comment"># -- å·¥ä½œåŒºä¸å¹²å‡€</span><span class="token function">git</span> <span class="token function">add</span> xxx<span class="token function">git</span> commit -m <span class="token string">''</span><span class="token function">git</span> push æˆ– <span class="token function">git</span> push origin B<span class="token comment"># ä¸è§£å†³å†²çª</span><span class="token comment"># -- é€€å›åˆ° cherry-pick ä¹‹å‰çš„çŠ¶æ€</span><span class="token function">git</span> cherry-pick --abort<span class="token comment"># -- é€€å‡º cherry-pick ä½†ä¸å›åˆ°ä¹‹å‰çš„çŠ¶æ€</span><span class="token function">git</span> cherry-pick --quit</code></pre><h4 id="å›é€€ç‰ˆæœ¬"><a href="#å›é€€ç‰ˆæœ¬" class="headerlink" title="å›é€€ç‰ˆæœ¬"></a>å›é€€ç‰ˆæœ¬</h4><p>å›é€€åˆ°æŒ‡å®šç‰ˆæœ¬åï¼ŒæŒ‡å®šç‰ˆæœ¬çš„åç»­ç‰ˆæœ¬å°†è¢«åˆ é™¤</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æŸ¥çœ‹ç‰ˆæœ¬å·</span><span class="token function">git</span> log<span class="token comment"># ç‰ˆæœ¬å›é€€è‡³ asgasjgajsga</span><span class="token function">git</span> reset --hard asgasjgajsga<span class="token comment"># æ¨é€æ›´æ”¹</span><span class="token comment"># ç›´æ¥ git push ä¼šæŠ¥é”™ï¼Œå› ä¸ºæ­¤æ—¶æœ¬åœ°çš„ HEAD æŒ‡å‘ç‰ˆæœ¬å’Œè¿œç¨‹ä¸ä¸€æ ·</span><span class="token function">git</span> push origin A  <span class="token operator">||</span> <span class="token function">git</span> push -f</code></pre><h4 id="è¿˜åŸæŸä¸€æ¬¡æäº¤"><a href="#è¿˜åŸæŸä¸€æ¬¡æäº¤" class="headerlink" title="è¿˜åŸæŸä¸€æ¬¡æäº¤"></a>è¿˜åŸæŸä¸€æ¬¡æäº¤</h4><p>åœºæ™¯ï¼šç”¨äºå›é€€ä¹‹å‰çš„é”™è¯¯æäº¤æˆ–è€…å–æ¶ˆæŸä¸€æ¬¡çš„å†…å®¹æäº¤ï¼Œä¸å½±å“å…¶ä»–çš„æäº¤å†…å®¹</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å–æ¶ˆ asgasgasgjaj è¿™æ¬¡æäº¤</span><span class="token function">git</span> revert -n asgasgasgjaj<span class="token comment"># é‡åˆ°å†²çªå…ˆè§£å†³</span><span class="token comment"># æäº¤è¿™æ¬¡ revert</span><span class="token function">git</span> commit -m <span class="token string">'Revert: å–æ¶ˆ asgasgasgjaj çš„æäº¤å†…å®¹'</span><span class="token comment"># æ¨é€</span><span class="token function">git</span> push</code></pre><h4 id="åˆ†æ”¯ç®¡ç†"><a href="#åˆ†æ”¯ç®¡ç†" class="headerlink" title="åˆ†æ”¯ç®¡ç†"></a><strong>åˆ†æ”¯ç®¡ç†</strong></h4><h5 id="åˆ†æ”¯æŸ¥çœ‹"><a href="#åˆ†æ”¯æŸ¥çœ‹" class="headerlink" title="åˆ†æ”¯æŸ¥çœ‹"></a>åˆ†æ”¯æŸ¥çœ‹</h5><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯åˆ—è¡¨</span><span class="token function">git</span> branch æˆ– <span class="token function">git</span> branch -a<span class="token comment"># æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯</span><span class="token function">git</span> branch -l</code></pre><h5 id="åˆ†æ”¯åˆ›å»º"><a href="#åˆ†æ”¯åˆ›å»º" class="headerlink" title="åˆ†æ”¯åˆ›å»º"></a>åˆ†æ”¯åˆ›å»º</h5><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åˆ›å»ºåˆ†æ”¯ A</span><span class="token function">git</span> branch A<span class="token comment"># æŒ‡å®šä»¥ asgasgl è¿™æ¬¡æäº¤çš„å†…å®¹ åˆ›å»ºçš„åˆ†æ”¯å A</span><span class="token function">git</span> branch A asgasgl<span class="token comment"># åˆ›å»ºå¹¶åˆ‡æ¢è‡³åˆ†æ”¯ B</span><span class="token function">git</span> checkout -b B</code></pre><h5 id="é‡å‘½ååˆ†æ”¯"><a href="#é‡å‘½ååˆ†æ”¯" class="headerlink" title="é‡å‘½ååˆ†æ”¯"></a>é‡å‘½ååˆ†æ”¯</h5><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># é‡å‘½åå½“å‰åˆ†æ”¯ä¸º B</span><span class="token function">git</span> branch -M B</code></pre><h5 id="åˆ†æ”¯åˆ‡æ¢"><a href="#åˆ†æ”¯åˆ‡æ¢" class="headerlink" title="åˆ†æ”¯åˆ‡æ¢"></a>åˆ†æ”¯åˆ‡æ¢</h5><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åˆ‡æ¢è‡³åˆ†æ”¯ B</span><span class="token function">git</span> checkout B</code></pre><h5 id="åˆ†æ”¯æ›´æ–°"><a href="#åˆ†æ”¯æ›´æ–°" class="headerlink" title="åˆ†æ”¯æ›´æ–°"></a>åˆ†æ”¯æ›´æ–°</h5><p>åœºæ™¯ï¼šè¿œç¨‹åˆ†æ”¯è¢«åˆ é™¤ï¼Œä½†è‡ªå·±æœ¬åœ°æ˜¾ç¤ºè¿œç¨‹åˆ†æ”¯å­˜åœ¨</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æ›´æ–°è¿œç¨‹åˆ†æ”¯</span><span class="token function">git</span> remote update origin --prune<span class="token comment"># æŸ¥çœ‹éœ€è¦æ¸…ç†çš„æœ¬åœ°åˆ†æ”¯</span><span class="token function">git</span> remote prune origin --dry-run<span class="token comment"># åˆ é™¤æœ¬åœ°å­˜åœ¨ï¼Œä½†è¿œç¨‹ä¸å­˜åœ¨çš„åˆ†æ”¯</span><span class="token function">git</span> remote prune origin -n</code></pre><h5 id="åˆ†æ”¯åˆ é™¤"><a href="#åˆ†æ”¯åˆ é™¤" class="headerlink" title="åˆ†æ”¯åˆ é™¤"></a>åˆ†æ”¯åˆ é™¤</h5><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åˆ é™¤æœ¬åœ°åˆ†æ”¯ B, éœ€è¦å…ˆåˆ‡åˆ°ä¸€ä¸ªé B çš„åˆ†æ”¯ A</span><span class="token function">git</span> checkout A<span class="token function">git</span> branch -d B<span class="token comment"># åˆ é™¤è¿œç¨‹åˆ†æ”¯ B</span><span class="token function">git</span> push origin --delete B</code></pre><h5 id="åˆ†æ”¯åˆå¹¶"><a href="#åˆ†æ”¯åˆå¹¶" class="headerlink" title="åˆ†æ”¯åˆå¹¶"></a>åˆ†æ”¯åˆå¹¶</h5><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åŠŸèƒ½åˆ†æ”¯çš„ä»£ç æ¨é€è‡³è¿œç«¯</span><span class="token function">git</span> push origin feature/xxx<span class="token comment"># æ¨é€ä»£ç å¹¶ä¸åˆ†æ”¯å»ºç«‹å…³è”å…³ç³» --- å»ºç«‹å…³ç³»å åç»­æäº¤å¯ä»¥ç›´æ¥ git push</span><span class="token function">git</span> push -u origin feature/xxx<span class="token comment"># åˆ‡æ¢è‡³ä¸»åˆ†æ”¯</span><span class="token function">git</span> checkout develop<span class="token comment"># æ‹‰å–ä¸»åˆ†æ”¯æœ€æ–°ä»£ç </span><span class="token function">git</span> pull origin develop <span class="token operator">||</span> <span class="token function">git</span> pull<span class="token comment"># åˆå¹¶åŠŸèƒ½åˆ†æ”¯è‡³ develop</span><span class="token function">git</span> merge feature/xxx<span class="token comment"># é‡åˆ°å†²çª --- ä¸¢å¼ƒ ä¸åˆå¹¶äº†</span><span class="token function">git</span> merge --abort<span class="token comment"># å¦å¤–ä¸€ç§å˜åŸºåˆå¹¶</span><span class="token function">git</span> rebase branch</code></pre><h4 id="ä¸ºæŸæ¬¡æäº¤æ‰“æ ‡ç­¾"><a href="#ä¸ºæŸæ¬¡æäº¤æ‰“æ ‡ç­¾" class="headerlink" title="ä¸ºæŸæ¬¡æäº¤æ‰“æ ‡ç­¾"></a>ä¸ºæŸæ¬¡æäº¤æ‰“æ ‡ç­¾</h4><p>æ ‡ç­¾åˆ†ä¸º<strong>è½»é‡æ ‡ç­¾ï¼ˆ<code>lightweight</code>ï¼‰</strong>ä¸é™„æ³¨æ ‡ç­¾ <strong>ï¼ˆ<code>annotated</code>ï¼‰</strong></p><h5 id="æ ‡ç­¾æŸ¥çœ‹"><a href="#æ ‡ç­¾æŸ¥çœ‹" class="headerlink" title="æ ‡ç­¾æŸ¥çœ‹"></a>æ ‡ç­¾æŸ¥çœ‹</h5><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åˆ—å‡ºæ‰€æœ‰æ ‡ç­¾</span><span class="token function">git</span> tag<span class="token comment"># æŒ‰ç…§é€šé…ç¬¦åˆ—å‡ºæ ‡ç­¾éœ€è¦ -l æˆ– --list é€‰é¡¹ï¼ˆä¸‹é¢é€šé…ç¬¦æŒ‡ v1.0.0 å¼€å¤´çš„æ‰€æœ‰æ ‡ç­¾ï¼‰</span><span class="token function">git</span> tag -l <span class="token string">'v1.0.0*'</span><span class="token comment"># æŸ¥çœ‹å…·ä½“æŸä¸€ä¸ªæ ‡ç­¾ï¼ˆv1.0.0ï¼‰ä¿¡æ¯å’Œä¸ä¹‹å¯¹åº”çš„æäº¤ä¿¡æ¯</span><span class="token function">git</span> show v1.0.0</code></pre><h5 id="æ ‡ç­¾åˆ›å»º"><a href="#æ ‡ç­¾åˆ›å»º" class="headerlink" title="æ ‡ç­¾åˆ›å»º"></a>æ ‡ç­¾åˆ›å»º</h5><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># -a åˆ›å»ºé™„æ³¨æ ‡ç­¾ï¼ˆv1.0.0ï¼‰ -m æŒ‡å®šäº†ä¸€æ¡å°†ä¼šå­˜å‚¨åœ¨æ ‡ç­¾ä¸­çš„ä¿¡æ¯</span><span class="token function">git</span> tag -a v1.0.0 -m <span class="token string">"my version 1.4"</span><span class="token comment"># åˆ›å»ºè½»é‡æ ‡ç­¾ï¼ˆv1.0.0ï¼‰ï¼Œä¸åŒ…å«ä»»ä½•å…¶ä»–ä¿¡æ¯</span><span class="token function">git</span> tag v1.0.0<span class="token comment"># é’ˆå¯¹å†å²æäº¤è®°å½•çš„æŸä¸€æ¬¡çš„æäº¤ï¼Œåˆ›å»ºæ ‡ç­¾ï¼ˆv1.0.0ï¼‰</span><span class="token function">git</span> tag -a v1.0.0 9fceb02xxx</code></pre><h5 id="æ ‡ç­¾å…±äº«ï¼ˆæ¨é€è¿œç¨‹ï¼‰"><a href="#æ ‡ç­¾å…±äº«ï¼ˆæ¨é€è¿œç¨‹ï¼‰" class="headerlink" title="æ ‡ç­¾å…±äº«ï¼ˆæ¨é€è¿œç¨‹ï¼‰"></a>æ ‡ç­¾å…±äº«ï¼ˆæ¨é€è¿œç¨‹ï¼‰</h5><p>æ³¨æ„éœ€è¦æ˜¾å¼çš„æ¨é€ï¼Œä¸èƒ½ç®€å†™ä¸º<code>git push</code>.</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å°†æ ‡ç­¾ v1.0.0 æ¨é€åˆ°è¿œç¨‹ï¼Œæ–¹ä¾¿å…¶ä»–äººå…±äº«</span><span class="token function">git</span> push origin v1.0.0<span class="token comment"># å°†æ‰€æœ‰æ ‡ç­¾æ¨é€è‡³è¿œç¨‹</span><span class="token function">git</span> push origin --tags</code></pre><h5 id="æ ‡ç­¾åˆ é™¤"><a href="#æ ‡ç­¾åˆ é™¤" class="headerlink" title="æ ‡ç­¾åˆ é™¤"></a>æ ‡ç­¾åˆ é™¤</h5><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åˆ é™¤æœ¬åœ°æ ‡ç­¾ v1.0.0</span><span class="token function">git</span> tag -d v1.0.0<span class="token comment"># åˆ é™¤è¿œç¨‹çš„ä¸€ä¸ªæ ‡ç­¾ git push &lt;remote> :refs/tags/&lt;tagname></span><span class="token function">git</span> push origin :refs/tags/v1.0.0<span class="token comment"># æˆ–è€…</span><span class="token function">git</span> push origin --delete v1.0.0</code></pre><h5 id="æ£€å‡ºæ ‡ç­¾"><a href="#æ£€å‡ºæ ‡ç­¾" class="headerlink" title="æ£€å‡ºæ ‡ç­¾"></a>æ£€å‡ºæ ‡ç­¾</h5><p>åœ¨æ ‡ç­¾åˆ›å»ºå®Œæˆåï¼Œä½ åœ¨ä¸Šçº¿ä¹‹å‰åˆåšè¿‡å¤šæ¬¡ä¿®æ”¹ã€‚è¿™æ—¶ä½ å¯ä»¥æ£€å‡ºä½ ä¹‹å‰é‚£ä¸ªå‡†å¤‡å‘å¸ƒçš„ç‰ˆæœ¬ï¼ˆæ‰“æ ‡ç­¾çš„ç‰ˆæœ¬ï¼‰è¿›è¡Œéƒ¨ç½²ã€‚</p><p><code>Git</code>ä¸­ä¸èƒ½çœŸçš„æ£€å‡ºä¸€ä¸ªæ ‡ç­¾ï¼Œå› ä¸ºä»–ä»¬å¹¶ä¸èƒ½åƒåˆ†æ”¯ä¸€æ ·æ¥å›ç§»åŠ¨ã€‚å¦‚æœä½ åˆ‡æ¢åˆ°æŸä¸ªæ ‡ç­¾ååˆæäº¤äº†æ–°ä¸œè¥¿ï¼Œé‚£ä¹ˆè¿™äº›æ–°çš„æäº¤å°†ä¸å±äºä»»ä½•åˆ†æ”¯ï¼Œå¹¶ä¸”æ— æ³•è®¿é—®ï¼Œé™¤éé€šè¿‡ç¡®åˆ‡çš„æäº¤å“ˆå¸Œæ‰èƒ½è®¿é—®ã€‚</p><p>é‚£ä¹ˆ<strong>å¦‚æœçœŸçš„éœ€è¦åœ¨æŸä¸€ä¸ªæ ‡ç­¾ç‰ˆæœ¬ä¿®å¤ä¸€äº›å†…å®¹ï¼šé‚£ä¹ˆæ¨èçš„åšæ³•æ˜¯åŸºäºè¿™ä¸ªæ ‡ç­¾ç‰ˆæœ¬åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯ã€‚</strong>å¦‚ä¸‹ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># git checkout -b [åˆ†æ”¯å] [æ ‡ç­¾å]</span><span class="token function">git</span> checkout -b version1 v1.0.0</code></pre><div class="success"><blockquote><p>è¯´äº†è¿™ä¹ˆå¤šæŒ‡ä»¤ï¼Œä¸ç”¨åˆ»æ„å»è®°ï¼Œå­°èƒ½ç”Ÿå·§ã€‚å¦å¤–ï¼šå®‰åˆ© vscode çš„æ’ä»¶ Git Graphã€GitLens â€” Git superchargedï¼Œæ‰€æœ‰çš„<code>git</code>æŒ‡ä»¤éƒ½èƒ½é€šè¿‡ç•Œé¢æ“ä½œã€‚å¯ä»¥çœ‹ä¸€ä¸‹æˆ‘å¦å¤–ä¸€ç¯‡æ–‡ç« ï¼š <a href="/posts/vscode-setting-and-plugins">vscode çš„ä½¿ç”¨ï¼Œè®¾ç½®åˆ†äº«ä»¥åŠæ’ä»¶æ¨è</a></p></blockquote></div><h3 id="ä»£ç æäº¤è§„èŒƒ"><a href="#ä»£ç æäº¤è§„èŒƒ" class="headerlink" title="ä»£ç æäº¤è§„èŒƒ"></a>ä»£ç æäº¤è§„èŒƒ</h3><p>æ¯ä¸€æ¬¡æäº¤ä»£ç æ—¶éƒ½ä¼šå†™ <code>commit message</code>ï¼Œå¦‚æœä¹¦å†™é£æ ¼ä¸ç»Ÿä¸€ï¼Œååˆ†ä¸åˆ©äºé˜…è¯»å’Œç»´æŠ¤ã€‚æ¨èæ ¼å¼ï¼š</p><blockquote><p>type(scope) : subject</p></blockquote><p><code>type</code>ï¼šæŒ‡<code>commit</code>çš„ç±»åˆ«ï¼Œæ­¤é¡¹å¿…å¡«ã€‚</p><ul><li><p><code>feat</code>: <code>new feature for the user, not a new feature for build script</code></p></li><li><p><code>fix</code>: <code>bug fix for the user, not a fix to a build script</code></p></li><li><p><code>docs</code>: <code>changes to the documentation</code></p></li><li><p><code>style</code>: <code>formatting, missing semi colons, etc; no production code change</code></p></li><li><p><code>refactor</code>: <code>refactoring production code, eg. renaming a variable</code></p></li><li><p><code>perf</code>: <code>code or performance optimization</code></p></li><li><p><code>test</code>: <code>adding missing tests, refactoring tests; no production code change</code></p></li><li><p><code>build</code>: <code>change the build tool such as grunt to npm</code></p></li><li><p><code>revert</code>: <code>undo the last commit</code></p></li><li><p><code>chore</code>: <code>updating grunt tasks etc; no production code change</code></p></li></ul><p><code>scope</code>ï¼šè¯´æ˜ <code>commit</code> å½±å“çš„èŒƒå›´ï¼Œæ­¤é¡¹é€‰é¢˜</p><p><code>subject</code>ï¼š<code>commit</code> çš„ç®€çŸ­æè¿°ï¼Œä¸è¶…è¿‡ <code>50</code> ä¸ªå­—ç¬¦</p><blockquote><p><code>tips</code>ï¼šä»…ä½œä¸ºä¸€ä¸ªæ¨èçš„è§„èŒƒæ ¼å¼ï¼Œå¹¶ä¸ä¼šå¯¹ä½ çš„ <code>commit-message</code> åšä»»ä½•æ ¡éªŒï¼Œè‡ªè§‰éµå®ˆå³å¯ï¼›å¦å¤–å¦‚æœä½ çš„å›¢é˜Ÿæœ‰è‡ªå·±çš„æäº¤è§„èŒƒï¼Œè¯·ä¼˜å…ˆä»¥å›¢é˜Ÿæäº¤è§„èŒƒä¸ºä¸»ã€‚</p></blockquote><blockquote><p>å‚è€ƒï¼š<a href="https://gist.github.com/joshbuchea/6f47e86d2510bce28f8e7f42ae84c716">Semantic Commit Messages</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å·¥å…·å­¦ä¹  </category>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
            <tag> gitæŒ‡ä»¤ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vscode çš„ä½¿ç”¨ï¼Œè®¾ç½®åˆ†äº«ä»¥åŠæ’ä»¶æ¨è</title>
      <link href="/posts/vscode-setting-and-plugins/"/>
      <url>/posts/vscode-setting-and-plugins/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><blockquote><p>å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨</p></blockquote><p>å‰ç«¯å¼€å‘å·¥å…·æœ‰å¾ˆå¤šï¼Œç±»ä¼¼<code>HBuilderã€WebStormã€Visual Studio Code...</code>ç­‰ï¼Œå…¶ä¸­<code>vscode</code>ä»¥å…¶è½»é‡ä¸”å¼ºå¤§çš„ä»£ç ç¼–è¾‘åŠŸèƒ½å’Œä¸°å¯Œçš„æ’ä»¶ç”Ÿæ€ç³»ç»Ÿï¼Œç‹¬å—å‰ç«¯å·¥å¸ˆçš„é’çã€‚</p><span id="more"></span><h3 id="ç¼–è¾‘å™¨æ±‰åŒ–"><a href="#ç¼–è¾‘å™¨æ±‰åŒ–" class="headerlink" title="ç¼–è¾‘å™¨æ±‰åŒ–"></a>ç¼–è¾‘å™¨æ±‰åŒ–</h3><ul><li><p>æ–¹å¼ä¸€ï¼š<code>Ctrl+Shift+P</code>ï¼Œè¾“å…¥<code>configure language</code>å›è½¦ï¼Œåœ¨æ‰“å¼€çš„è¯­è¨€é…ç½®æ–‡ä»¶ä¸­å°†<code>en-us</code>ä¿®æ”¹ä¸º<code>zh-cn</code>ï¼Œ<code>Ctrl+S</code>ä¿å­˜è®¾ç½®ï¼Œé‡å¯ç”Ÿæ•ˆã€‚</p></li><li><p>æ–¹å¼äºŒï¼šæ’ä»¶å®‰è£…ã€‚æ‰“å¼€æ‰©å±•æœç´¢<code>Chinese (Simplified) (ç®€ä½“ä¸­æ–‡) Language Pack</code>å®‰è£…ï¼Œé‡å¯ç”Ÿæ•ˆã€‚</p></li></ul><hr><h3 id="vscode-æ¨èçš„ç”¨æˆ·è®¾ç½®"><a href="#vscode-æ¨èçš„ç”¨æˆ·è®¾ç½®" class="headerlink" title="vscode æ¨èçš„ç”¨æˆ·è®¾ç½®"></a>vscode æ¨èçš„ç”¨æˆ·è®¾ç½®</h3><p>å·¦ä¸‹è§’è®¾ç½®å›¾æ ‡ï¼Œç‚¹å‡»ï¼Œé€‰æ‹©è®¾ç½®ï¼Œæœç´¢è®¾ç½®ï¼Œè®¾ç½®ä»¥ä¸‹å†…å®¹(æ¨è)ã€‚æˆ–è€…ç›´æ¥<code>Ctrl+Shift+P</code>æœç´¢<code>setting.json</code>ï¼Œç›´æ¥åœ¨æ–‡ä»¶ä¸­ç¼–è¾‘ä¿®æ”¹ï¼Œç•Œé¢åŒ–æ“ä½œçš„è®¾ç½®æœ€ç»ˆä¹Ÿä¼šåŒæ­¥åˆ°è¯¥æ–‡ä»¶ä¸­ã€‚</p><h4 id="å…³é—­vscodeçš„è‡ªåŠ¨æ›´æ–°"><a href="#å…³é—­vscodeçš„è‡ªåŠ¨æ›´æ–°" class="headerlink" title="å…³é—­vscodeçš„è‡ªåŠ¨æ›´æ–°"></a>å…³é—­<code>vscode</code>çš„è‡ªåŠ¨æ›´æ–°</h4><p>é…ç½®æ˜¯å¦æ¥æ”¶è‡ªåŠ¨æ›´æ–°ï¼Œæ›´æ”¹åéœ€è¦é‡æ–°å¯åŠ¨ã€‚</p><blockquote><p>update mode:none</p></blockquote><h4 id="é»˜è®¤è¡Œå°¾å­—ç¬¦"><a href="#é»˜è®¤è¡Œå°¾å­—ç¬¦" class="headerlink" title="é»˜è®¤è¡Œå°¾å­—ç¬¦"></a>é»˜è®¤è¡Œå°¾å­—ç¬¦</h4><p><code>windows</code>ç³»ç»Ÿç¯å¢ƒä¸‹çš„æ¢è¡Œæ–¹å¼é»˜è®¤ä¸º<code>CRLF: \r\n</code>ï¼Œ<code>linux</code>ç³»ç»Ÿç¯å¢ƒä¸‹çš„æ¢è¡Œæ–¹å¼é»˜è®¤ä¸º<code>LF: \n</code>ã€‚é…ç½®è¡Œä½å­—ç¬¦ä¸º<code>\n</code>ã€‚</p><blockquote><p>Eol: \n</p></blockquote><h4 id="è‡ªåŠ¨ä¿å­˜"><a href="#è‡ªåŠ¨ä¿å­˜" class="headerlink" title="è‡ªåŠ¨ä¿å­˜"></a>è‡ªåŠ¨ä¿å­˜</h4><p>é¿å…ä¸€äº›ä¸å¯é€†çš„å¼‚å¸¸å…³é—­å¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚<code>onFocusChange</code>-æ–‡ä»¶ç„¦ç‚¹å˜åŒ–æ—¶è‡ªåŠ¨ä¿å­˜ã€‚</p><blockquote><p>autoSave: onFocusChange</p></blockquote><h4 id="tabç›¸å…³"><a href="#tabç›¸å…³" class="headerlink" title="tabç›¸å…³"></a><code>tab</code>ç›¸å…³</h4><p>é…ç½®ä¸€ä¸ªåˆ¶è¡¨ç¬¦ç­‰äºçš„ç©ºæ ¼æ•°ä»¥åŠæ˜¯å¦å¯ç”¨<code>tab</code>è¡¥å…¨ã€‚</p><blockquote><p>Tab Size: 2</p></blockquote><blockquote><p>Tab Completion: on</p></blockquote><h4 id="â€˜æ‹¬å·å¯¹â€™ç€è‰²å’ŒåŒ¹é…"><a href="#â€˜æ‹¬å·å¯¹â€™ç€è‰²å’ŒåŒ¹é…" class="headerlink" title="â€˜æ‹¬å·å¯¹â€™ç€è‰²å’ŒåŒ¹é…"></a>â€˜æ‹¬å·å¯¹â€™ç€è‰²å’ŒåŒ¹é…</h4><p><code>Bracket Pair Colorization</code>æ’ä»¶å¼ƒç”¨ï¼Œæ’ä»¶åŠŸèƒ½å·²ç»è¢«<code>vscode</code>å†…ç½®ã€‚ç›´æ¥è®¾ç½®å°±å¯ä»¥æ§åˆ¶æ¯ä¸ªæ‹¬å·ç±»å‹æ˜¯å¦å…·æœ‰è‡ªå·±çš„ç‹¬ç«‹é¢œè‰²æ± ã€‚</p><blockquote><p>Bracket Pair Colorization: Enabled</p></blockquote><blockquote><p>Bracket Pair Colorzation: Independent Color Pool Per Bracket Type</p></blockquote><blockquote><p>Bracket Pairs: active</p></blockquote><h4 id="å…¶ä»–é…ç½®é¡¹"><a href="#å…¶ä»–é…ç½®é¡¹" class="headerlink" title="å…¶ä»–é…ç½®é¡¹"></a>å…¶ä»–é…ç½®é¡¹</h4><p>è®¾ç½®å­—ä½“å¤§å°</p><blockquote><p>Font Size: 14</p></blockquote><p>æ§åˆ¶åœ¨åˆ é™¤æ‹¬å·æˆ–è€…å¼•å·æ—¶ç¼–è¾‘å™¨æ˜¯å¦åº”åˆ é™¤ç›¸é‚»çš„å³å¼•å·æˆ–å³æ–¹æ‹¬å·ã€‚</p><blockquote><p>Auto Closing Delete: always</p></blockquote><p>åœ¨ä¿å­˜æ–‡ä»¶æ—¶è‡ªåŠ¨è¿è¡Œ<code>ESLint</code>çš„è‡ªåŠ¨ä¿®å¤å‘½ä»¤<code>eslint --fix</code>ï¼Œä¿®æ”¹<code>setting.json</code></p><pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>  <span class="token property">"editor.codeActionsOnSave"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"source.fixAll.eslint"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// å°è¯•è‡ªåŠ¨ä¿®å¤ä»£ç ä¸­çš„ Eslint é—®é¢˜</span>    <span class="token property">"eslint.autoFixOnSave"</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// ä¿å­˜æ—¶è‡ªåŠ¨åº”ç”¨ Eslint çš„ä¿®å¤å»ºè®®</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¶…å‡ºæ˜¾ç¤ºèŒƒå›´ï¼Œè‡ªåŠ¨æ¢è¡Œï¼ˆåªæ˜¯æ˜¾ç¤ºæ•ˆæœä¸Šï¼Œå¹¶æ²¡æœ‰çœŸæ­£æ¢è¡Œï¼‰</p><blockquote><p>word Wrap: on</p></blockquote><p>åœ¨<code>Word Wrap</code>ä¸º<code>wordWrapColumn</code>æˆ–<code>bounded</code>æ—¶ï¼Œæ§åˆ¶ç¼–è¾‘å™¨çš„æŠ˜è¡Œåˆ—ã€‚ï¼ˆä¸<code>word Wrap: on</code>ç›¸æ‚–ï¼Œæ ¹æ®è‡ªå·±å–œå¥½è®¾ç½®ï¼‰</p><blockquote><p>Word Wrap Column: 100</p></blockquote><p>å·®å¼‚ç¼–è¾‘å™¨æ˜¯å¦å¿½ç•¥å‰å¯¼ç©ºæ ¼æˆ–å°¾éšç©ºæ ¼ä¸­çš„æ›´æ”¹ã€‚</p><blockquote><p>Ignore Trim Whitespace: false</p></blockquote><hr><h3 id="æ’ä»¶-plugins-æ¨è"><a href="#æ’ä»¶-plugins-æ¨è" class="headerlink" title="æ’ä»¶(plugins)æ¨è"></a>æ’ä»¶(<code>plugins</code>)æ¨è</h3><h4 id="Guides"><a href="#Guides" class="headerlink" title="Guides"></a><a href="https://marketplace.visualstudio.com/items?itemName=spywhere.guides"><code>Guides</code></a></h4><p>å¸¦è‰²ç«–çº¿æç¤ºæ‰€å±åŒºåŸŸå—ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p><p><a href="/images/posts/vscode-setting-and-plugins/p1.png"><img src="/images/posts/vscode-setting-and-plugins/p1.png" alt="vscode-setting-and-plugins-p1" loading="lazy"></a></p><h4 id="ESLint-ä»£ç è¯­æ³•è§„èŒƒæ ¡éªŒ"><a href="#ESLint-ä»£ç è¯­æ³•è§„èŒƒæ ¡éªŒ" class="headerlink" title="ESLint-ä»£ç è¯­æ³•è§„èŒƒæ ¡éªŒ"></a><a href="https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint"><code>ESLint</code></a>-ä»£ç è¯­æ³•è§„èŒƒæ ¡éªŒ</h4><p>è¯¥æ‰©å±•ä½¿ç”¨å®‰è£…åœ¨æ‰“å¼€çš„å·¥ä½œåŒºæ–‡ä»¶å¤¹ä¸­çš„<code>ESLint</code>åº“ã€‚å¦‚æœè¯¥æ–‡ä»¶å¤¹æ²¡æœ‰æä¾›ä¸€ä¸ªï¼Œåˆ™æ‰©å±•ç¨‹åºä¼šæŸ¥æ‰¾å…¨å±€å®‰è£…ç‰ˆæœ¬ã€‚(éœ€è¦å…ˆå®‰è£…-ä¸€èˆ¬å®‰è£…åœ¨é¡¹ç›®çš„<code>devDependenice</code>)</p><p>é…ç½®æ–‡ä»¶ï¼šæ·»åŠ <code>.eslintrc</code>ï¼Œæˆ–è€…ç»ˆç«¯<code>Create ESLint configuration</code>ï¼Œå¦‚æœä½ åœ¨å…¨å±€å®‰è£…äº†<code>ESLint</code>ï¼Œæ‰§è¡Œ<code>eslint --init</code>ã€‚</p><h4 id="Prettier-Code-formatter-ä»£ç é£æ ¼æ ¼å¼åŒ–"><a href="#Prettier-Code-formatter-ä»£ç é£æ ¼æ ¼å¼åŒ–" class="headerlink" title="Prettier - Code formatter-ä»£ç é£æ ¼æ ¼å¼åŒ–"></a><a href="https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode"><code>Prettier - Code formatter</code></a>-ä»£ç é£æ ¼æ ¼å¼åŒ–</h4><p>ä¸ºä¸åŒæ–‡ä»¶é…ç½®é»˜è®¤çš„æ ¼å¼åŒ–ç¨‹åºã€‚</p><ul><li><p>å¯é€šè¿‡ç•Œé¢æ“ä½œï¼ˆå³é”® -&gt; ä½¿ç”¨â€¦æ ¼å¼åŒ–æ–‡æ¡£ -&gt; é…ç½®é»˜è®¤æ ¼å¼åŒ–ç¨‹åº -&gt; é€‰æ‹©<code>prettier</code>ï¼‰</p></li><li><p>åœ¨<code>setting.json</code>æ–‡ä»¶ä¸­æ·»åŠ å­—æ®µé…ç½®ã€‚</p></li></ul><pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>  <span class="token comment">// ... å…¶ä»–é…ç½®</span>  <span class="token property">"[javascript]"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"editor.defaultFormatter"</span><span class="token operator">:</span> <span class="token string">"esbenp.prettier-vscode"</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p><code>prettier</code>ç›¸å…³é…ç½®é¡¹ï¼Œå¯é€šè¿‡ä¸‹é¢ä¸¤ç§æ–¹å¼è®¾ç½®ã€‚</p><ul><li>æ–¹å¼ä¸€ï¼Œæ·»åŠ å…¨å±€ç”¨æˆ·é…ç½®ï¼ˆ<code>vscode</code>è®¾ç½®ï¼‰</li></ul><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ä½¿ç”¨å•å¼•å·ã€‚</span>singleQuote: <span class="token boolean">true</span><span class="token comment"># å°½å¯èƒ½æ§åˆ¶å°¾éšé€—å·çš„è¾“å‡ºã€‚</span>trailingComma: all<span class="token comment"># æŒ‡å®šæ¯è¡Œä»£ç çš„æœ€ä½³é•¿åº¦ï¼Œå¦‚æœè¶…å‡ºé•¿åº¦åˆ™æ¢è¡Œã€‚</span>printWidth: <span class="token number">100</span><span class="token comment"># å½“ç®­å¤´å‡½æ•°ä»…æœ‰ä¸€ä¸ªå‚æ•°æ—¶åŠ ä¸Šæ‹¬å·ã€‚</span>arrowParens: always</code></pre><ul><li>æ–¹å¼äºŒï¼šé¡¹ç›®çš„<code>package.json</code>ç§æ·»åŠ <code>prettier</code>å­—æ®µé…ç½®ã€‚</li></ul><h4 id="Document-This-js-ts-æ³¨é‡Šç”Ÿæˆ"><a href="#Document-This-js-ts-æ³¨é‡Šç”Ÿæˆ" class="headerlink" title="Document This-js/ts-æ³¨é‡Šç”Ÿæˆ"></a><a href="https://marketplace.visualstudio.com/items?itemName=oouo-diogo-perdigao.docthis"><code>Document This</code></a>-<code>js/ts</code>-æ³¨é‡Šç”Ÿæˆ</h4><p>å¯ä»¥è‡ªåŠ¨ä¸º<code>TypeScript</code>å’Œ<code>JavaScript</code>æ–‡ä»¶ç”Ÿæˆè¯¦ç»†çš„<code>JSDoc</code>æ³¨é‡Šã€‚ä½¿ç”¨ï¼š</p><ul><li><p>æ–¹å¼ä¸€ï¼šï¼Œå…‰æ ‡æŒ‡ä¸­éœ€è¦æ³¨é‡Šçš„å‡½æ•°ä½“ï¼ŒæŒ‰ä¸¤æ¬¡<code>Ctrl + Alt + d</code>å³å¯ã€‚</p></li><li><p>æ–¹å¼äºŒï¼šæ‰“å¼€å‘½ä»¤è¡Œæ–¹å¼<code>Ctrl + Shift + p</code>è¾“å…¥<code>document this</code>ã€‚</p></li></ul><h4 id="TODO-Highlight-é«˜äº®æç¤º"><a href="#TODO-Highlight-é«˜äº®æç¤º" class="headerlink" title="TODO Highlight-é«˜äº®æç¤º"></a><a href="https://marketplace.visualstudio.com/items?itemName=wayou.vscode-todo-highlight"><code>TODO Highlight</code></a>-é«˜äº®æç¤º</h4><p>ä»£ç è¡Œæ·»åŠ <code>TODO</code>å­—æ ·ï¼Œé«˜äº®æ•ˆæœæç¤ºã€‚çªå‡ºå°šæœªå®Œæˆçš„åŠŸèƒ½æˆ–è€…äº‹æƒ…ã€‚</p><h4 id="GitLens-â€”-Git-superchargedå’ŒGit-Graph"><a href="#GitLens-â€”-Git-superchargedå’ŒGit-Graph" class="headerlink" title="GitLens â€” Git superchargedå’ŒGit Graph"></a><a href="https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens"><code>GitLens â€” Git supercharged</code></a>å’Œ<a href="https://marketplace.visualstudio.com/items?itemName=mhutchie.git-graph"><code>Git Graph</code></a></h4><p>å‰è€…ï¼š</p><ul><li>æŸ¥çœ‹å•ä¸ªæ–‡ä»¶çš„æäº¤è®°å½•</li><li>ä»£ç è¡Œå°¾æµ…è‰²çš„<code>commit-message</code></li><li>é¼ æ ‡è¦†ç›–åˆ°ä»£ç å—ä¸Šï¼Œå¯ä»¥æŸ¥çœ‹æ›´è¯¦ç»†çš„æäº¤ä¿¡æ¯å’Œ<code>commit-id</code>ï¼Œæ›´ç”šè‡³èƒ½è·³è½¬åˆ°å½“æ¬¡è®°å½•æŸ¥çœ‹è¯¦ç»†æäº¤</li><li><code>git</code>å‘½ä»¤ç•Œé¢åŒ–æ“ä½œ</li><li>å…¶ä»–çš„ä¾§è¾¹æ è§†å›¾å’ŒåŠŸèƒ½</li></ul><p>åè€…ï¼š</p><ul><li>å›¾å½¢åŒ–å±•ç¤ºæ‰€æœ‰åˆ†æ”¯åŠç»“æ„ï¼Œå¯é€‰æ‹©æ€§è¿‡æ»¤åˆ†æ”¯å†æŸ¥çœ‹</li><li>å¯ç›´æ¥é€‰æ‹©æŸä¸€æ¬¡çš„æäº¤èŠ‚ç‚¹å³é”®æ‰§è¡ŒæŸäº›æ“ä½œï¼ˆ<code>revert/cherryPick/createBranch/drop?/checkOut/addTag</code>ç­‰ï¼‰</li><li>ç‚¹å‡»èŠ‚ç‚¹ï¼ŒæŸ¥çœ‹å½“æ¬¡æäº¤çš„è¯¦ç»†æ–‡ä»¶ä¿®æ”¹ï¼Œè¿›è¡Œä»£ç å®¡æŸ¥</li><li>å•å‡»ä¸€ä¸ªæäº¤ï¼Œ<code>CTRL/CMD</code>å•å‡»å¦ä¸€ä¸ªæäº¤æ¯”è¾ƒä»»ä½•ä¸¤ä¸ªæäº¤</li><li>å…¶ä»–åŠŸèƒ½</li></ul><h4 id="Search-node-modules-node-modulesæ–‡ä»¶æœç´¢"><a href="#Search-node-modules-node-modulesæ–‡ä»¶æœç´¢" class="headerlink" title="Search node_modules-node_modulesæ–‡ä»¶æœç´¢"></a><a href="https://marketplace.visualstudio.com/items?itemName=jasonnutter.search-node-modules"><code>Search node_modules</code></a>-<code>node_modules</code>æ–‡ä»¶æœç´¢</h4><p><code>Ctrl + Shift + p</code>ï¼Œæˆ–è€…<code>Ctrl + p è¾“å…¥ &gt;</code> æˆ–è€…æŒ‰ä¸‹ <code>F1</code>ã€‚åœ¨æ‰“å¼€çš„é¢æ¿ä¸­è¾“å…¥æˆ–è€…é€‰æ‹©<code>Search node_modules</code>ã€‚ç‚¹å‡»æŸ¥è¯¢å‡ºæ¥çš„<code>Search node_modules</code>åï¼Œä¼šæ ¹æ®å½“å‰çš„å·¥ä½œåŒºæ–‡ä»¶å¤¹æŸ¥æ‰¾<code>node_modules</code>å¹¶æ‰“å¼€ï¼Œæ”¯æŒ<strong>ç±»ä¼¼</strong><code>Ctrl + f</code>å¯¹è·¯å¾„çš„æ–‡ä»¶å¤¹æˆ–è€…æ–‡ä»¶è¿›è¡Œæœç´¢ã€‚</p><h4 id="DotENV-envæ–‡ä»¶ä»£ç é«˜äº®"><a href="#DotENV-envæ–‡ä»¶ä»£ç é«˜äº®" class="headerlink" title="DotENV-.envæ–‡ä»¶ä»£ç é«˜äº®"></a><a href="https://marketplace.visualstudio.com/items?itemName=mikestead.dotenv"><code>DotENV</code></a>-<code>.env</code>æ–‡ä»¶ä»£ç é«˜äº®</h4><h4 id="Import-Cost-å†…è”æ˜¾ç¤ºå¯¼å…¥çš„åŒ…æ–‡ä»¶å¤§å°"><a href="#Import-Cost-å†…è”æ˜¾ç¤ºå¯¼å…¥çš„åŒ…æ–‡ä»¶å¤§å°" class="headerlink" title="Import Cost-å†…è”æ˜¾ç¤ºå¯¼å…¥çš„åŒ…æ–‡ä»¶å¤§å°"></a><a href="https://marketplace.visualstudio.com/items?itemName=wix.vscode-import-cost"><code>Import Cost</code></a>-å†…è”æ˜¾ç¤ºå¯¼å…¥çš„åŒ…æ–‡ä»¶å¤§å°</h4><h4 id="Template-String-Converter-å­—ç¬¦ä¸²ä¸æ¨¡æ¿å­—ç¬¦ä¸²çš„è‡ªåŠ¨è½¬æ¢"><a href="#Template-String-Converter-å­—ç¬¦ä¸²ä¸æ¨¡æ¿å­—ç¬¦ä¸²çš„è‡ªåŠ¨è½¬æ¢" class="headerlink" title="Template String Converter-å­—ç¬¦ä¸²ä¸æ¨¡æ¿å­—ç¬¦ä¸²çš„è‡ªåŠ¨è½¬æ¢"></a><a href="https://marketplace.visualstudio.com/items?itemName=meganrogge.template-string-converter"><code>Template String Converter</code></a>-å­—ç¬¦ä¸²ä¸æ¨¡æ¿å­—ç¬¦ä¸²çš„è‡ªåŠ¨è½¬æ¢</h4><h4 id="TypeScript-Barrel-Generator-tsæ–‡ä»¶å¯¼å‡ºåˆ°index"><a href="#TypeScript-Barrel-Generator-tsæ–‡ä»¶å¯¼å‡ºåˆ°index" class="headerlink" title="TypeScript Barrel Generator-tsæ–‡ä»¶å¯¼å‡ºåˆ°index"></a><a href="https://marketplace.visualstudio.com/items?itemName=eliostruyf.vscode-typescript-exportallmodules"><code>TypeScript Barrel Generator</code></a>-<code>ts</code>æ–‡ä»¶å¯¼å‡ºåˆ°<code>index</code></h4><p>å…è®¸é€šè¿‡æˆ–è€…è‡ªåŠ¨å¯¼å‡ºæŸä¸ªæ–‡ä»¶å¤¹ï¼ˆæ¨¡å—ï¼‰çš„æ‰€æœ‰<code>export</code>è‡³<code>index.ts</code>ï¼Œä½¿ç”¨æ—¶ç›´æ¥å¼•å…¥<code>index</code>å³å¯ã€‚</p><p>ä½¿ç”¨ï¼š</p><ul><li><p>æ–¹å¼ä¸€ï¼šå³é”®æ–‡ä»¶å¤¹ï¼Œé€‰æ‹©<code>Typescript: export all modules</code></p></li><li><p>æ–¹å¼äºŒï¼šæ‰‹åŠ¨åˆ›å»º<code>index.ts</code>ï¼Œå¦‚ä¸‹ï¼š</p></li></ul><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// ä¾‹å¦‚ folder/aã€folder/b éƒ½ export äº†ä¸€äº›å˜é‡æˆ–è€…å‡½æ•°</span><span class="token comment">// åˆ›å»º folder/index.ts</span><span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">'./a'</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">'./b'</span><span class="token punctuation">;</span></code></pre><h4 id="Code-Runner-ä»£ç è¿è¡Œå™¨"><a href="#Code-Runner-ä»£ç è¿è¡Œå™¨" class="headerlink" title="Code Runner-ä»£ç è¿è¡Œå™¨"></a><a href="https://marketplace.visualstudio.com/items?itemName=formulahendry.code-runner"><code>Code Runner</code></a>-ä»£ç è¿è¡Œå™¨</h4><p>ç‚¹å‡»ç¼–è¾‘å™¨å³ä¸Šè§’ç±»ä¼¼ |&gt; çš„æŒ‰é’®ï¼Œå³å¯æ‰§è¡Œå½“å‰æ–‡ä»¶ä»£ç ç‰‡æ®µï¼Œå¹¶åœ¨ç¼–è¾‘å™¨å†…è¾“å‡ºç»“æœã€‚</p><h4 id="Path-Intellisense-è·¯å¾„æ„ŸçŸ¥"><a href="#Path-Intellisense-è·¯å¾„æ„ŸçŸ¥" class="headerlink" title="Path Intellisense-è·¯å¾„æ„ŸçŸ¥"></a><a href="https://marketplace.visualstudio.com/items?itemName=christian-kohler.path-intellisense"><code>Path Intellisense</code></a>-è·¯å¾„æ„ŸçŸ¥</h4><p>è¾“å…¥è·¯å¾„æ—¶ï¼Œæ™ºèƒ½æç¤ºï¼Œå¸®åŠ©è‡ªåŠ¨å®Œæˆæ–‡ä»¶åå¡«å……ã€‚</p><h4 id="Better-Comments-æ³¨é‡Šç¾åŒ–"><a href="#Better-Comments-æ³¨é‡Šç¾åŒ–" class="headerlink" title="Better Comments-æ³¨é‡Šç¾åŒ–"></a><code>Better Comments</code>-æ³¨é‡Šç¾åŒ–</h4><p>æ ¹æ®ç‰¹æ®Šå­—ç¬¦å‰ç¼€æ ‡è¯†ä¸åŒç±»å‹çš„æ³¨é‡Šã€‚</p><h4 id="Auto-Rename-Tagå’ŒAuto-Close-Tag"><a href="#Auto-Rename-Tagå’ŒAuto-Close-Tag" class="headerlink" title="Auto Rename Tagå’ŒAuto Close Tag"></a><a href="https://marketplace.visualstudio.com/items?itemName=formulahendry.auto-rename-tag"><code>Auto Rename Tag</code></a>å’Œ<a href="https://marketplace.visualstudio.com/items?itemName=formulahendry.auto-close-tag"><code>Auto Close Tag</code></a></h4><p>å‰è€…ï¼šæ ‡ç­¾é‡å‘½åæ—¶ï¼Œæˆå¯¹çš„å¦å¤–ä¸€åŠæ ‡ç­¾ä¼šè‡ªåŠ¨é‡å‘½åã€‚</p><p>åè€…ï¼šè¾“å…¥å‰åŠä¸ªæ ‡ç­¾<code>&lt;div&gt;</code>ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆå¦å¤–ä¸€åŠç”¨äºå…³é—­çš„æ ‡ç­¾<code>&lt;/div&gt;</code></p><h4 id="Markdown-All-in-One-Markdown-æ‰€æœ‰åŠŸèƒ½æ”¯æŒ"><a href="#Markdown-All-in-One-Markdown-æ‰€æœ‰åŠŸèƒ½æ”¯æŒ" class="headerlink" title="Markdown All in One-Markdown æ‰€æœ‰åŠŸèƒ½æ”¯æŒ"></a><a href="https://marketplace.visualstudio.com/items?itemName=yzhang.markdown-all-in-one"><code>Markdown All in One</code></a>-<code>Markdown æ‰€æœ‰åŠŸèƒ½æ”¯æŒ</code></h4><p>åœ¨<code>typora</code>å¼€å§‹æ”¶è´¹åï¼Œå‘ç°çš„ä¸€æ¬¾<code>markdown</code>æ’ä»¶ã€‚<code>.md</code>æ–‡ä»¶çš„å³ä¸Šè§’ç±»ä¼¼çª—å£æ‰©å±•çš„æŸ¥çœ‹å›¾æ ‡ï¼Œç‚¹å‡»åä¼šåœ¨å³ä¾§çª—å£æ‰“å¼€<code>Markdown</code>çš„é¢„è§ˆæ•ˆæœé¡µé¢ã€‚</p><h4 id="open-in-browser-æµè§ˆå™¨æ‰“å¼€æ–‡ä»¶"><a href="#open-in-browser-æµè§ˆå™¨æ‰“å¼€æ–‡ä»¶" class="headerlink" title="open in browser-æµè§ˆå™¨æ‰“å¼€æ–‡ä»¶"></a><a href="https://marketplace.visualstudio.com/items?itemName=techer.open-in-browser"><code>open in browser</code></a>-æµè§ˆå™¨æ‰“å¼€æ–‡ä»¶</h4><p>åœ¨å†™<code>html</code>æ–‡ä»¶çš„æ—¶å€™ï¼Œæ–¹ä¾¿å¿«é€Ÿåœ¨æµè§ˆå™¨æ‰“å¼€è¯¥æ–‡ä»¶ã€‚<code>Alt + b</code>å¿«æ·é”®æ‰“å¼€ï¼Œæˆ–è€…å³é”® <code>open in browser</code>ã€‚å¯¹åº”è¿˜æœ‰ä¸€ä¸ªæ’ä»¶<code>View In Browser</code>ï¼Œä¸è¿‡ä½œè€…å·²ç»ä¸å†ç»´æŠ¤äº†ã€‚</p><h4 id="Color-Highlight-é¢œè‰²ä»£ç æ•ˆæœå®æ—¶é¢„è§ˆ"><a href="#Color-Highlight-é¢œè‰²ä»£ç æ•ˆæœå®æ—¶é¢„è§ˆ" class="headerlink" title="Color Highlight-é¢œè‰²ä»£ç æ•ˆæœå®æ—¶é¢„è§ˆ"></a><a href="https://marketplace.visualstudio.com/items?itemName=naumovs.color-highlight"><code>Color Highlight</code></a>-é¢œè‰²ä»£ç æ•ˆæœå®æ—¶é¢„è§ˆ</h4><p>å¦‚æœä½ ä¸ä»…ä»…æ˜¯æƒ³é¢„è§ˆé¢œè‰²ï¼Œè€Œæ˜¯éœ€è¦ç±»ä¼¼<code>picker</code>çš„é¢œè‰²é€‰æ‹©å™¨æ¥å¯¹å·²æœ‰çš„é¢œè‰²è¿›è¡Œä¿®æ”¹ï¼Œå¯ä»¥å®‰è£…å¦å¤–ä¸€ä¸ªæ’ä»¶<code>Flutter Color</code>ï¼Œåˆæˆ–è€…ä½ å¯ä»¥ä¸¤è€…ä¸€èµ·ä½¿ç”¨ã€‚</p><h4 id="Code-Spell-Checker-å•è¯æ‹¼å†™æ£€æµ‹"><a href="#Code-Spell-Checker-å•è¯æ‹¼å†™æ£€æµ‹" class="headerlink" title="Code Spell Checker-å•è¯æ‹¼å†™æ£€æµ‹"></a><a href="https://marketplace.visualstudio.com/items?itemName=streetsidesoftware.code-spell-checker"><code>Code Spell Checker</code></a>-å•è¯æ‹¼å†™æ£€æµ‹</h4><p>è‡ªåŠ¨æ•è·å¸¸è§çš„ï¼ˆå•è¯ï¼‰æ‹¼å†™é”™è¯¯ï¼ŒåŒæ—¶é™ä½è¯¯æŠ¥ï¼Œé€‚ç”¨äºé©¼å³°å¼ä»£ç ã€‚</p><h4 id="filesize-å®æ—¶è§‚æµ‹æ–‡ä»¶bundle"><a href="#filesize-å®æ—¶è§‚æµ‹æ–‡ä»¶bundle" class="headerlink" title="filesize-å®æ—¶è§‚æµ‹æ–‡ä»¶bundle"></a><a href="https://marketplace.visualstudio.com/items?itemName=mkxml.vscode-filesize"><code>filesize</code></a>-å®æ—¶è§‚æµ‹æ–‡ä»¶<code>bundle</code></h4><p>åœ¨çŠ¶æ€æ ä¸­æ˜¾ç¤ºå½“å‰æ–‡ä»¶å¤§å°ï¼Œç‚¹å‡»çŠ¶æ€æ ä¸­çš„æ–‡ä»¶å¤§å°æ—¶ï¼Œä¼šåœ¨<code>OUTPUT</code>ä¸­è¾“å‡º<code>Gzip</code>å¤§å°ã€‚</p><h4 id="json2ts-å°†å‰ªè´´æ¿å†…å®¹è½¬ä¸ºts-interface"><a href="#json2ts-å°†å‰ªè´´æ¿å†…å®¹è½¬ä¸ºts-interface" class="headerlink" title="json2ts-å°†å‰ªè´´æ¿å†…å®¹è½¬ä¸ºts-interface"></a><a href="https://marketplace.visualstudio.com/items?itemName=GregorBiswanger.json2ts"><code>json2ts</code></a>-å°†å‰ªè´´æ¿å†…å®¹è½¬ä¸º<code>ts-interface</code></h4><p>ç®€ç›´<code>yyds...</code>ï¼Œå®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¦‚æœä½ ä½¿ç”¨åˆ°äº†<code>ts</code>ï¼Œå¯ä»¥ä¸ºä½ çœå»å¾ˆå¤šå®šä¹‰ç±»å‹çš„æ—¶é—´ã€‚~~æ¯”å¦‚ï¼šå°†æ¥å£è¿”å›çš„æ•°æ®è½¬ä¸º interface ~~</p><p>é™¤äº†è¿™ä¸ªæ’ä»¶ä»¥å¤–ï¼Œä½ ä¹Ÿå¯ä»¥åˆ° <a href="http://json2ts.com/">http://json2ts.com/</a> å®ç°æ›´å®Œæ•´çš„è½¬æ¢ï¼ˆå› ä¸ºæ’ä»¶åªä¼šæå–<code>json</code>å†…å®¹è¿›è¡Œè½¬æ¢ï¼‰</p><h4 id="koroFileHeader-or-fileheader-åœ¨æ–‡ä»¶å¤´ç”Ÿæˆä½œè€…ä¿¡æ¯"><a href="#koroFileHeader-or-fileheader-åœ¨æ–‡ä»¶å¤´ç”Ÿæˆä½œè€…ä¿¡æ¯" class="headerlink" title="[koroFileHeader or fileheader]-åœ¨æ–‡ä»¶å¤´ç”Ÿæˆä½œè€…ä¿¡æ¯"></a>[<code>koroFileHeader</code> or <code>fileheader</code>]-åœ¨æ–‡ä»¶å¤´ç”Ÿæˆä½œè€…ä¿¡æ¯</h4><p>æ„Ÿè§‰å¾ˆé¸¡è‚‹çš„ä¸€ä¸ªåŠŸèƒ½ <del>git çš„ æ–‡ä»¶å˜æ›´è®°å½•åŒæ ·å¯ä»¥æŸ¥çœ‹ï¼Œä¸”æ›´åŠ å¼ºå¤§</del> â€¦ç›®å‰æ²¡æ€ä¹ˆç”¨åˆ°ï¼Œä¸æ’é™¤åˆ«çš„é¡¹ç›®ç»„æœ‰è¿™ç§çˆ±å¥½â€¦</p><h4 id="vscode-pdf-é¢„è§ˆpdf"><a href="#vscode-pdf-é¢„è§ˆpdf" class="headerlink" title="vscode-pdf-é¢„è§ˆpdf"></a><a href="https://marketplace.visualstudio.com/items?itemName=tomoki1207.pdf">vscode-pdf</a>-é¢„è§ˆ<code>pdf</code></h4><h4 id="LeetCode"><a href="#LeetCode" class="headerlink" title="LeetCode"></a><a href="https://marketplace.visualstudio.com/items?itemName=LeetCode.vscode-leetcode"><code>LeetCode</code></a></h4><p>LeetCode åœ¨ VS Code ä¸­åˆ·é¢˜ã€‚<del>ï¼ˆå¦‚æœä½ è§‰å¾—æœ‰å¿…è¦ï¼‰</del></p><h4 id="CodeGeeX-ä»£ç è‡ªåŠ¨è¡¥å…¨"><a href="#CodeGeeX-ä»£ç è‡ªåŠ¨è¡¥å…¨" class="headerlink" title="CodeGeeX-ä»£ç è‡ªåŠ¨è¡¥å…¨"></a><a href="https://marketplace.visualstudio.com/items?itemName=aminer.codegeex"><code>CodeGeeX</code></a>-ä»£ç è‡ªåŠ¨è¡¥å…¨</h4><p>åŠŸèƒ½æ²¡æœ‰ <code>github Copilot</code> å¼ºå¤§ï¼Œä½†èƒœåœ¨å…è´¹ï¼Œå¯ä»¥ç™½å«–â€¦</p><div class="success"><blockquote><p>æ¡†æ¶ç›¸å…³</p></blockquote></div><h4 id="ES7-React-Redux-React-Native-snippets-Reactä»£ç ç‰‡æ®µ"><a href="#ES7-React-Redux-React-Native-snippets-Reactä»£ç ç‰‡æ®µ" class="headerlink" title="ES7+ React/Redux/React-Native snippets-Reactä»£ç ç‰‡æ®µ"></a><a href="https://marketplace.visualstudio.com/items?itemName=dsznajder.es7-react-js-snippets"><code>ES7+ React/Redux/React-Native snippets</code></a>-<code>React</code>ä»£ç ç‰‡æ®µ</h4><p>é›†æˆäº†<code>ES7</code>æ ‡å‡†åŠä¸€ä¸‹çš„è¯­æ³•ç‰‡æ®µâ€¦æ„å‘³ç€ä¾‹å¦‚<code>JavaScript (ES6) code snippets</code>æä¾›çš„ç‰‡æ®µï¼Œä¹Ÿæ˜¯æ”¯æŒçš„â€¦</p><h4 id="Vue-3-Snippets-Vueä»£ç ç‰‡æ®µ"><a href="#Vue-3-Snippets-Vueä»£ç ç‰‡æ®µ" class="headerlink" title="Vue 3 Snippets-Vueä»£ç ç‰‡æ®µ"></a><a href="https://marketplace.visualstudio.com/items?itemName=hollowtree.vue-snippets"><code>Vue 3 Snippets</code></a>-<code>Vue</code>ä»£ç ç‰‡æ®µ</h4><p>åŸºäº<code>Vue 2 Snippets</code>å¼€å‘çš„å…¼å®¹é€‚é…<code>Vue 3</code>çš„æ’ä»¶ã€‚å¦å¤–ä¸€ä¸ªç‰‡æ®µæ’ä»¶<code>VueHelper</code>ã€‚</p><h4 id="TypeScript-Vue-Plugin-Volar-Ts-Vue-æ’ä»¶"><a href="#TypeScript-Vue-Plugin-Volar-Ts-Vue-æ’ä»¶" class="headerlink" title="TypeScript Vue Plugin (Volar)-Ts-Vue æ’ä»¶"></a><a href="https://marketplace.visualstudio.com/items?itemName=Vue.vscode-typescript-vue-plugin"><code>TypeScript Vue Plugin (Volar)</code></a>-<code>Ts-Vue</code> æ’ä»¶</h4><p>ç”¨äºè®© <code>TS</code> æœåŠ¡å™¨è¯†åˆ« <code>*.vue</code> æ–‡ä»¶ã€‚</p><ul><li>åœ¨ <code>*.ts</code> æ–‡ä»¶ä¸­æŸ¥æ‰¾å¼•ç”¨æ—¶ï¼Œæ‚¨è¿˜å¯ä»¥ä» <code>*.vue</code> æ–‡ä»¶ä¸­è·å–ç»“æœ</li><li>åœ¨ <code>*.ts</code> æ–‡ä»¶ä¸­é‡å‘½åæ—¶ï¼Œå¯¹ <code>*.vue</code> æ–‡ä»¶çš„å¼•ç”¨ä¹Ÿä¼šè¿›è¡Œè°ƒæ•´</li><li>å½“è¾“å…¥ <code>import</code> è¯­å¥æ—¶ï¼Œ<code>*.vue</code> æ–‡ä»¶ä¹Ÿä¼šå‡ºç°ä»¥è¿›è¡Œè‡ªåŠ¨è¡¥å…¨</li></ul><h4 id="Vue-Language-Features-Volar-Vue-è¯­è¨€æ‰©å±•"><a href="#Vue-Language-Features-Volar-Vue-è¯­è¨€æ‰©å±•" class="headerlink" title="Vue Language Features (Volar)-Vue è¯­è¨€æ‰©å±•"></a><a href="https://marketplace.visualstudio.com/items?itemName=Vue.volar"><code>Vue Language Features (Volar)</code></a>-<code>Vue è¯­è¨€æ‰©å±•</code></h4><p>ä¸º<code>Vue template</code>æä¾›åŸç”Ÿçš„<code>TypeScript</code>è¯­è¨€æœåŠ¡ã€‚<strong>æ¨èåœ¨<code>Vue3</code>é¡¹ç›®ä¸­å¼€å¯ã€‚</strong></p><h4 id="Vetur-Vue2ç›¸å…³æ”¯æŒ"><a href="#Vetur-Vue2ç›¸å…³æ”¯æŒ" class="headerlink" title="Vetur-Vue2ç›¸å…³æ”¯æŒ"></a><a href="https://marketplace.visualstudio.com/items?itemName=octref.vetur"><code>Vetur</code></a>-<code>Vue2ç›¸å…³æ”¯æŒ</code></h4><p><strong>æ¨èåœ¨<code>Vue2</code>é¡¹ç›®ä¸­ä½¿ç”¨ï¼Œ<code>Vue3</code>é¡¹ç›®è¯·ç¦ç”¨ã€‚</strong></p><ul><li>è¯­æ³•ã€è¯­ä¹‰é«˜äº®</li><li><code>Vue</code>ä»£ç ç‰‡æ®µ</li><li>æ ¼å¼åŒ–ç›¸å…³ä»£ç </li><li>æ™ºèƒ½æ„ŸçŸ¥åŠ<code>debug</code></li><li>é”™è¯¯æ£€æµ‹</li><li>å…¶ä»–åŠŸèƒ½</li></ul><div class="success"><blockquote><p>ä¸»é¢˜ç›¸å…³</p></blockquote></div><h4 id="One-Dark-Proå’ŒMaterial-Theme-vscodeä¸»é¢˜"><a href="#One-Dark-Proå’ŒMaterial-Theme-vscodeä¸»é¢˜" class="headerlink" title="One Dark Proå’ŒMaterial Theme-vscodeä¸»é¢˜"></a><a href="https://marketplace.visualstudio.com/items?itemName=zhuangtongfa.Material-theme"><code>One Dark Pro</code></a>å’Œ<a href="https://marketplace.visualstudio.com/items?itemName=Equinusocio.vsc-material-theme"><code>Material Theme</code></a>-<code>vscodeä¸»é¢˜</code></h4><h4 id="Material-Icon-Theme-vscodeæ–‡ä»¶å›¾æ ‡ä¸»é¢˜"><a href="#Material-Icon-Theme-vscodeæ–‡ä»¶å›¾æ ‡ä¸»é¢˜" class="headerlink" title="Material Icon Theme-vscodeæ–‡ä»¶å›¾æ ‡ä¸»é¢˜"></a><a href="https://marketplace.visualstudio.com/items?itemName=PKief.material-icon-theme"><code>Material Icon Theme</code></a>-<code>vscodeæ–‡ä»¶å›¾æ ‡ä¸»é¢˜</code></h4><hr><h3 id="å¸¸ç”¨å¿«æ·é”®"><a href="#å¸¸ç”¨å¿«æ·é”®" class="headerlink" title="å¸¸ç”¨å¿«æ·é”®"></a>å¸¸ç”¨å¿«æ·é”®</h3><p>ä»¥ä¸‹ç»„åˆé”® <code>+</code> ä»£è¡¨ç»„åˆçš„æ„æ€â€¦</p><h4 id="ç¼©æ”¾è§†å£"><a href="#ç¼©æ”¾è§†å£" class="headerlink" title="ç¼©æ”¾è§†å£"></a>ç¼©æ”¾è§†å£</h4><p><code>Ctrl + +</code> or <code>Ctrl + -</code> åˆ†åˆ«è¡¨ç¤ºæ”¾å¤§&#x2F;ç¼©å°</p><h4 id="è·³è½¬åˆ°ä»£ç è¡Œ"><a href="#è·³è½¬åˆ°ä»£ç è¡Œ" class="headerlink" title="è·³è½¬åˆ°ä»£ç è¡Œ"></a>è·³è½¬åˆ°ä»£ç è¡Œ</h4><p><code>Ctrl + g</code>æˆ–è€…<code>Ctrl + p</code>è¾“å…¥<code>:</code>ï¼Œå†è¾“å…¥è¡Œå·å›è½¦ï¼Œå³å¯å®Œæˆè¡Œè·³è½¬</p><h4 id="æ–‡ä»¶æœç´¢"><a href="#æ–‡ä»¶æœç´¢" class="headerlink" title="æ–‡ä»¶æœç´¢"></a>æ–‡ä»¶æœç´¢</h4><p><code>Ctrl + p</code>è¾“å…¥æ–‡ä»¶åï¼Œå›è½¦ã€‚æ–‡ä»¶å…§æœç´¢<code>Ctrl + f</code></p><h4 id="æ‰“å¼€æœ€è¿‘å·¥ä½œåŒºæˆ–è€…æ–‡ä»¶ï¼ˆå¤¹ï¼‰"><a href="#æ‰“å¼€æœ€è¿‘å·¥ä½œåŒºæˆ–è€…æ–‡ä»¶ï¼ˆå¤¹ï¼‰" class="headerlink" title="æ‰“å¼€æœ€è¿‘å·¥ä½œåŒºæˆ–è€…æ–‡ä»¶ï¼ˆå¤¹ï¼‰"></a>æ‰“å¼€æœ€è¿‘å·¥ä½œåŒºæˆ–è€…æ–‡ä»¶ï¼ˆå¤¹ï¼‰</h4><p><code>Ctrl + r</code> é€‰æ‹©ä½ çš„å·¥ä½œåŒºï¼ŒæŒ‰ä½<code>Ctrl</code>ç‚¹å‡»æ‰“å¼€ï¼Œä¼šæ–°å¼€ä¸€ä¸ª<code>vscode</code>æ‰“å¼€ã€‚ä¸åŠ <code>Ctrl</code>ä¼šåœ¨å½“å‰çª—å£æ›¿æ¢å¹¶æ‰“å¼€ã€‚</p><h4 id="æ–°å»ºæ–‡ä»¶å’Œæ–°å¼€vscode"><a href="#æ–°å»ºæ–‡ä»¶å’Œæ–°å¼€vscode" class="headerlink" title="æ–°å»ºæ–‡ä»¶å’Œæ–°å¼€vscode"></a>æ–°å»ºæ–‡ä»¶å’Œæ–°å¼€<code>vscode</code></h4><p><code>Ctrl + n</code>æ–°å»ºæ–‡ä»¶ï¼Œ<code>Ctrl + Shift + n</code>æ–°å¼€<code>vscode</code>ã€‚</p><h4 id="æ–°é”®è¡Œ"><a href="#æ–°é”®è¡Œ" class="headerlink" title="æ–°é”®è¡Œ"></a>æ–°é”®è¡Œ</h4><p><code>Ctrl + å›è½¦</code>ï¼Œæ•ˆæœç±»ä¼¼åœ¨è¡Œå°¾æŒ‰ä¸‹å›è½¦ã€‚å¸¦æ¥çš„ä¾¿æ·å°±æ˜¯ä¸éœ€è¦å…ˆå°†å…‰æ ‡ç§»åŠ¨åˆ°è¡Œå°¾ã€‚</p><h4 id="æ‰“å¼€æ–‡ä»¶Ctrl-oï¼Œæ‰“å¼€ã€å…³é—­ç»ˆç«¯Ctrl"><a href="#æ‰“å¼€æ–‡ä»¶Ctrl-oï¼Œæ‰“å¼€ã€å…³é—­ç»ˆç«¯Ctrl" class="headerlink" title="æ‰“å¼€æ–‡ä»¶Ctrl + oï¼Œæ‰“å¼€ã€å…³é—­ç»ˆç«¯Ctrl + ~"></a>æ‰“å¼€æ–‡ä»¶<code>Ctrl + o</code>ï¼Œæ‰“å¼€ã€å…³é—­ç»ˆç«¯<code>Ctrl + ~</code></h4><h4 id="ä»£ç è¡Œå¿«é€Ÿå¤åˆ¶ã€å‰ªè´´"><a href="#ä»£ç è¡Œå¿«é€Ÿå¤åˆ¶ã€å‰ªè´´" class="headerlink" title="ä»£ç è¡Œå¿«é€Ÿå¤åˆ¶ã€å‰ªè´´"></a>ä»£ç è¡Œå¿«é€Ÿå¤åˆ¶ã€å‰ªè´´</h4><p>å½“éœ€è¦å¯¹æ•´è¡Œä»£ç æ“ä½œæ—¶ï¼Œæ— éœ€é€‰ä¸­ç›´æ¥<code>Ctrl + c</code>å³å¯å¤åˆ¶ï¼Œ<code>Ctrl + x</code>å³å¯å‰ªè´´ã€‚</p><p>åŒæ—¶æŒ‰ä½<code>Shift + Alt + æ–¹å‘é”®ï¼ˆä¸Š/ä¸‹ï¼‰</code>ï¼Œå¯å®ç°åŸºäºå½“å‰è¡Œçš„å‘ä¸Šå‘ä¸‹å¤åˆ¶ç²˜è´´ã€‚</p><h4 id="ç¼©è¿›è°ƒæ•´"><a href="#ç¼©è¿›è°ƒæ•´" class="headerlink" title="ç¼©è¿›è°ƒæ•´"></a>ç¼©è¿›è°ƒæ•´</h4><p><code>Tab</code>å‘åç¼©è¿›ï¼Œ<code>Shift + Tab</code>å‘å‰ç¼©è¿›ã€‚</p><h4 id="æ‰¹é‡é€‰ä¸­"><a href="#æ‰¹é‡é€‰ä¸­" class="headerlink" title="æ‰¹é‡é€‰ä¸­"></a>æ‰¹é‡é€‰ä¸­</h4><p>æŒ‰ä½<code>Shift</code>ï¼Œé¼ æ ‡å·¦é”®ç‚¹å‡»å¼€å¤´ç»“å°¾ï¼ˆæˆ–è€…æ–¹å‘é”®ï¼‰ï¼Œå³å¯é€‰ä¸­ã€‚<code>Ctrl + a</code>é€‰ä¸­æ‰€æœ‰ã€‚é€‰ä¸­å˜é‡<code>or</code>å‡½æ•°å<code>Ctrl + d</code>æŒç»­ä½¿ç”¨å³å¯<strong>æ‰¹é‡æŸ¥æ‰¾</strong>è¯¥å‡½æ•°æˆ–å˜é‡ã€‚</p><h4 id="ä¿®æ”¹å¼•ç”¨"><a href="#ä¿®æ”¹å¼•ç”¨" class="headerlink" title="ä¿®æ”¹å¼•ç”¨"></a>ä¿®æ”¹å¼•ç”¨</h4><p>é¼ æ ‡ç‚¹å‡»å˜é‡æˆ–è€…å‡½æ•°ï¼ŒæŒ‰ä¸‹<code>F2</code>ï¼Œè¾“å…¥ä½ è¦æ›´æ”¹çš„åç§°ï¼Œå›è½¦å³å¯<strong>åŒæ­¥ä¿®æ”¹</strong>æ‰€æœ‰ç”¨åˆ°è¯¥å˜é‡çš„åç§°ã€‚</p><h4 id="æ·»åŠ æ³¨é‡Š"><a href="#æ·»åŠ æ³¨é‡Š" class="headerlink" title="æ·»åŠ æ³¨é‡Š"></a>æ·»åŠ æ³¨é‡Š</h4><p>å•è¡Œæ³¨é‡Š<code>Ctrl + /</code>ï¼Œå¤šè¡Œæ³¨é‡Š<code>Shift + Alt + a</code>ã€‚</p><h4 id="å¤šå…‰æ ‡"><a href="#å¤šå…‰æ ‡" class="headerlink" title="å¤šå…‰æ ‡"></a>å¤šå…‰æ ‡</h4><p>æŒ‰ä½<code>Alt</code>é”®ï¼Œé¼ æ ‡å·¦é”®æ¯æ¬¡ç‚¹å‡»éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„å…‰æ ‡ã€‚æˆ–è€…<code>Ctrl + Alt + æ–¹å‘é”®</code>åˆ›å»ºå¤šä¸ªå…‰æ ‡ã€‚</p><h4 id="çª—å£æ‹†åˆ†"><a href="#çª—å£æ‹†åˆ†" class="headerlink" title="çª—å£æ‹†åˆ†"></a>çª—å£æ‹†åˆ†</h4><p><code>Ctrl + \</code>ï¼Œåœ¨å³ä¾§å¼€ä¸€ä¸ªç¼–è¾‘å™¨ã€‚</p><h4 id="çª—å£è§†å›¾ç§»åŠ¨ï¼ˆæ»šè½®æ•ˆæœï¼‰"><a href="#çª—å£è§†å›¾ç§»åŠ¨ï¼ˆæ»šè½®æ•ˆæœï¼‰" class="headerlink" title="çª—å£è§†å›¾ç§»åŠ¨ï¼ˆæ»šè½®æ•ˆæœï¼‰"></a>çª—å£è§†å›¾ç§»åŠ¨ï¼ˆæ»šè½®æ•ˆæœï¼‰</h4><p>æŒ‰ä½<code>Ctrl</code>ï¼Œç‚¹å‡»æ–¹å‘é”®ä¸Šä¸‹ï¼Œå³å¯å®ç°æ»šåŠ¨ã€‚</p><h4 id="ä»£ç è¡Œç§»åŠ¨"><a href="#ä»£ç è¡Œç§»åŠ¨" class="headerlink" title="ä»£ç è¡Œç§»åŠ¨"></a>ä»£ç è¡Œç§»åŠ¨</h4><p>æŒ‰ä½<code>Alt</code>ï¼Œç‚¹å‡»æ–¹å‘é”®ä¸Šä¸‹ï¼Œå³å¯å®Œæˆå…‰æ ‡ä»£ç è¡Œçš„ç§»åŠ¨ï¼Œå¦‚è¡Œ 11 ç§»åŠ¨åˆ°è¡Œ 19ã€‚</p><h4 id="ä»£ç debug"><a href="#ä»£ç debug" class="headerlink" title="ä»£ç debug"></a>ä»£ç <code>debug</code></h4><ul><li><p>æ–¹å¼ä¸€ï¼šå¯ä»¥é€‰æ‹©ä¾§è¾¹æ çš„è°ƒè¯•æŒ‰é’®ï¼Œé€‰æ‹©é…ç½®è¿›è¡Œè°ƒè¯•ã€‚</p></li><li><p>æ–¹å¼äºŒï¼š<code>F5</code>è¿è¡Œè°ƒè¯•ã€‚</p></li></ul><h4 id="ä»£ç æ ¼å¼åŒ–"><a href="#ä»£ç æ ¼å¼åŒ–" class="headerlink" title="ä»£ç æ ¼å¼åŒ–"></a>ä»£ç æ ¼å¼åŒ–</h4><blockquote><p>(Code å¿«æ·é”® Shift + Alt + F) æ ¼å¼åŒ–å·¥å…·ä½¿ç”¨ prettier</p></blockquote><blockquote><p>(Code å¿«æ·é”® Shift + Alt + O) æ•´ç† import å¼•ç”¨</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ”¶è—å®‰åˆ© </category>
          
          <category> VScodeæ’ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vscode </tag>
            
            <tag> plugins </tag>
            
            <tag> è®¾ç½® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>windows ç¯å¢ƒçš„ git-bash ç»ˆç«¯ç¾åŒ–</title>
      <link href="/posts/git-bash-prettify/"/>
      <url>/posts/git-bash-prettify/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="Before-this"><a href="#Before-this" class="headerlink" title="Before this"></a>Before this</h3><p>æœ€å¼€å§‹æ˜¯æƒ³ç€ç›´æ¥å®‰è£…<code>zsh</code>ï¼Œä½†æ˜¯æˆ–å¤šæˆ–å°‘è¿˜æ˜¯å­˜åœ¨é—®é¢˜ã€‚</p><p>æ¯”å¦‚ï¼šå®‰è£…å®Œäº†è¿‡åï¼Œé™¤å»<code>vscode</code>çš„å…¶ä»–è¿è¡Œæ–¹å¼å’Œç¯å¢ƒéƒ½å¾ˆ<code>ok</code>ï¼Œåœ¨<code>vscode</code>çš„<code>terminal</code>ä¸­ï¼Œå¦‚æœä½¿ç”¨<code>git-bash</code>å¹¶ä¸”å®‰è£…äº†<code>zsh</code>ï¼Œé‚£ä¹ˆåªè¦<code>terminal</code>çš„çª—å£è§†å›¾å‘ç”Ÿå˜åŒ–ï¼ˆæ–°å»ºã€æ‹†åˆ†ç»ˆç«¯ï¼Œåˆæˆ–è€…æ”¹å˜<code>terminal</code>çš„é«˜åº¦ï¼‰ï¼Œéƒ½ä¼šå¯¼è‡´å‘½ä»¤è¡Œæ— æ³•æ­£å¸¸è¾“å…¥ï¼Œå°±åƒå¡æ­»äº†ä¸€èˆ¬ã€‚å…¶ä»–çš„è¿è¡Œæ–¹å¼ï¼Œæ¯”å¦‚ç›´æ¥å³é”®åœ¨æ–‡ä»¶ä¸­ä½¿ç”¨<code>git-bash</code>ï¼Œåˆæˆ–è€…æ˜¯åœ¨<code>windows-terminal</code>ä¸­ä½¿ç”¨ï¼Œéƒ½æ˜¯æ²¡å¾—é—®é¢˜çš„ã€‚å¦‚æœæœ‰æƒ³è¦äº†è§£çš„ä¼™ä¼´ï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ã€‚<a href="https://zhuanlan.zhihu.com/p/455925403">ä¸€æ–‡æå®š<code>Windows Terminal</code>è®¾ç½®ä¸<code>zsh</code>å®‰è£…ã€é<code>WSL</code>ã€‘</a></p><p>å½“ç„¶ï¼Œå¦‚æœ<strong>åªæ˜¯æƒ³ç¾åŒ–</strong>ï¼Œåšåˆ°ç±»ä¼¼<code>zsh</code>çš„æ˜¾ç¤ºæ•ˆæœï¼Œæœ‰æ²¡æœ‰åŠæ³•å’§ï¼Ÿ<del>ğŸ’€ğŸ’€ğŸ’€</del></p><span id="more"></span><h3 id="ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶</h3><p>æ‰¾åˆ°æ–‡ä»¶<code>git-prompt.sh</code>ï¼Œåœ¨å®‰è£…ç›®å½•ä¸‹çš„<code>Git/etc/profile.d/git-prompt.sh</code>ã€‚å³é”®åœ¨<code>vscode</code>ä¸­æ‰“å¼€ï¼Œæˆ–è€…ç»ˆç«¯è¾“å…¥<code>code git-prompt.sh(ç»å¯¹è·¯å¾„ï¼Œæˆ–è€…ç›¸å¯¹è·¯å¾„éƒ½å¯ä»¥)</code>ã€‚</p><p>æ›¿æ¢ä¸ºä¸‹é¢ä»£ç ã€‚å®é™…åªä¿®æ”¹äº†<code>$PS1</code>çš„å€¼ï¼š</p><blockquote><p>æ³¨æ„ï¼š\w è¡¨ç¤ºçš„è¯¦ç»†è·¯å¾„ï¼Œå¦‚æœåªæƒ³å±•ç¤ºå½“å‰å·¥ä½œåŒºï¼Œè®¾ç½®ä¸º \W</p></blockquote><blockquote><p>ç±»ä¼¼äº [\033[32m] è¿™æ ·çš„å€¼ï¼Œæ˜¯å‘½ä»¤è¡Œçš„é¢œè‰²è‰²å€¼ï¼Œå…·ä½“å¯å‚è€ƒï¼š<a href="https://gist.github.com/vratiu/9780109">.bash_aliases</a></p></blockquote><pre class="language-sh" data-language="sh"><code class="language-sh">if test -f &#x2F;etc&#x2F;profile.d&#x2F;git-sdk.shthen    TITLEPREFIX&#x3D;SDK-$&#123;MSYSTEM#MINGW&#125;else    TITLEPREFIX&#x3D;$MSYSTEMfiif test -f ~&#x2F;.config&#x2F;git&#x2F;git-prompt.shthen    . ~&#x2F;.config&#x2F;git&#x2F;git-prompt.shelse    PS1&#x3D;&#39;\[\033]0;Bash\007\]&#39;      # çª—å£æ ‡é¢˜    # PS1&#x3D;&quot;$PS1&quot;&#39;\n&#39;               # æ¢è¡Œ    PS1&#x3D;&quot;$PS1&quot;&#39;\[\033[32m\]&#39;     # é«˜äº®ç»¿è‰²    PS1&#x3D;&quot;$PS1&quot;&#39;âœ &#39;               # å³ç®­å¤´    PS1&#x3D;&quot;$PS1&quot;&#39;\[\033[33m\]&#39;     # é«˜äº®é»„è‰²    PS1&#x3D;&quot;$PS1&quot;&#39;[\w]&#39;                 # å½“å‰ç›®å½•    if test -z &quot;$WINELOADERNOEXEC&quot;    then        GIT_EXEC_PATH&#x3D;&quot;$(git --exec-path 2&gt;&#x2F;dev&#x2F;null)&quot;        COMPLETION_PATH&#x3D;&quot;$&#123;GIT_EXEC_PATH%&#x2F;libexec&#x2F;git-core&#125;&quot;        COMPLETION_PATH&#x3D;&quot;$&#123;COMPLETION_PATH%&#x2F;lib&#x2F;git-core&#125;&quot;        COMPLETION_PATH&#x3D;&quot;$COMPLETION_PATH&#x2F;share&#x2F;git&#x2F;completion&quot;        if test -f &quot;$COMPLETION_PATH&#x2F;git-prompt.sh&quot;        then            . &quot;$COMPLETION_PATH&#x2F;git-completion.bash&quot;            . &quot;$COMPLETION_PATH&#x2F;git-prompt.sh&quot;            PS1&#x3D;&quot;$PS1&quot;&#39;\[\033[31m\]&#39;   # çº¢è‰²            PS1&#x3D;&quot;$PS1&quot;&#39;&#96;__git_ps1&#96;&#39;    # git æ’ä»¶        fi    fi    PS1&#x3D;&quot;$PS1&quot;&#39;\[\033[0;36m\] &#39;      # é’è‰²fiMSYS2_PS1&#x3D;&quot;$PS1&quot;</code></pre><h3 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h3><p><a href="/images/posts/git-bash-prettify/p1.png"><img src="/images/posts/git-bash-prettify/p1.png" alt="&#39;git-bash-preview&#39;" loading="lazy"></a></p><div class="primary"><blockquote><p>æŠŠä½ çš„è„¸è¿å‘é˜³å…‰ï¼Œé‚£å°±ä¸ä¼šæœ‰é˜´å½±</p></blockquote></div>]]></content>
      
      
      <categories>
          
          <category> æ”¶è—å®‰åˆ© </category>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git-bash </tag>
            
            <tag> terminal </tag>
            
            <tag> ç»ˆç«¯ç¾åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vscode é…ç½® GitBash ä½œä¸ºé»˜è®¤çš„ Terminal</title>
      <link href="/envConstruct/vscode-terminal-config/"/>
      <url>/envConstruct/vscode-terminal-config/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><p>å°† <code>Git Bash</code>è®¾ç½®ä¸º <code>VSCode</code> çš„é»˜è®¤ç»ˆç«¯ï¼Œèƒ½å¤Ÿä¸ºæˆ‘ä»¬å¼€å‘å¸¦æ¥å¾ˆå¤šå¥½å¤„ï¼š</p><ul><li><p>ä¸€è‡´æ€§: å¦‚æœä½ åœ¨å‘½ä»¤è¡Œä¸­å·²ç»ç†Ÿæ‚‰ä½¿ç”¨ <code>Git Bash</code> æˆ–ç±»ä¼¼çš„ <code>Unix-like</code> å‘½ä»¤è¡Œå·¥å…·ï¼Œå°†å…¶è®¾ç½®ä¸º <code>VSCode</code> çš„é»˜è®¤ç»ˆç«¯å¯ä»¥ä¿æŒå·¥ä½œç¯å¢ƒçš„ä¸€è‡´æ€§ï¼Œæ— éœ€åˆ‡æ¢ä¸åŒçš„ç»ˆç«¯ã€‚</p></li><li><p>å¼ºå¤§çš„å‘½ä»¤è¡Œæ”¯æŒ: <code>Git Bash</code> æä¾›äº†å¼ºå¤§çš„å‘½ä»¤è¡Œæ”¯æŒï¼Œå¯ä»¥æ‰§è¡Œå„ç§ <code>Git</code> å‘½ä»¤å’Œå…¶ä»–å‘½ä»¤è¡Œä»»åŠ¡ï¼Œæ— éœ€ç¦»å¼€ <code>VSCode</code> ç•Œé¢ã€‚</p></li><li><p>é›†æˆ <code>Git:</code> ä½¿ç”¨ <code>Git Bash</code> ä½œä¸ºé»˜è®¤ç»ˆç«¯å¯ä»¥ç¡®ä¿ä¸ <code>Git</code> ç‰ˆæœ¬æ§åˆ¶å·¥ä½œæµçš„ç´§å¯†é›†æˆã€‚ä½ å¯ä»¥è½»æ¾åœ°æäº¤ã€æ¨é€ã€æ‹‰å–å’Œè§£å†³å†²çªï¼ŒåŒæ—¶è§‚å¯Ÿ <code>Git</code> æ“ä½œçš„è¾“å‡ºã€‚</p></li><li><p>è‡ªå®šä¹‰æ€§: <code>Git Bash</code> å’Œ <code>VSCode</code> éƒ½æ”¯æŒä¸°å¯Œçš„è‡ªå®šä¹‰é€‰é¡¹ã€‚ä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„åå¥½é…ç½®ç»ˆç«¯çš„å¤–è§‚å’Œè¡Œä¸ºã€‚</p></li></ul><p>â€¦</p><span id="more"></span><h3 id="VsCode-Terminalé…ç½®ä¸ºé»˜è®¤git-bash"><a href="#VsCode-Terminalé…ç½®ä¸ºé»˜è®¤git-bash" class="headerlink" title="VsCode Terminalé…ç½®ä¸ºé»˜è®¤git-bash"></a><code>VsCode Terminal</code>é…ç½®ä¸ºé»˜è®¤<code>git-bash</code></h3><ul><li><p>æ‰¾åˆ°<code>Terminal &gt; Integrated &gt; Profiles: Windows</code>ï¼Œé€‰æ‹©åœ¨<code>settings.json</code>ä¸­ç¼–è¾‘ã€‚</p></li><li><p>æ·»åŠ <code>GItBash</code>å­é¡¹ï¼ˆæ³¨æ„é¦–å­—æ¯å¤§å†™ï¼Œæˆ‘é…ç½®çš„æ—¶å€™å°å†™æ²¡æœ‰ç”Ÿæ•ˆï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯ç‰ˆæœ¬é—®é¢˜å¯¼è‡´çš„ï¼‰ä¿®æ”¹<code>path</code>ï¼Œå¦‚ä¸‹å›¾ã€‚</p></li><li><p>é…ç½®é»˜è®¤çš„<code>terminal</code>ä¸º<code>GitBash</code>, æ–¹å¼ä¸€ï¼šè®¾ç½®ä¸­æœç´¢<code>Default Profile: Windows</code>ï¼Œé€‰æ‹©<code>GitBash</code>ï¼Œæ–¹å¼äºŒï¼šç›´æ¥åœ¨<code>settings</code>ä¸­æ·»åŠ ä¸‹é¢é…ç½®ã€‚</p></li></ul><p><a href="/images/envConstruct/vscode-terminal-config/p1.png"><img src="/images/envConstruct/vscode-terminal-config/p1.png" alt="&#39;vscode-terminal&#39;" loading="lazy"></a></p><h3 id="é…ç½®æŒ‡ä»¤çš„alias"><a href="#é…ç½®æŒ‡ä»¤çš„alias" class="headerlink" title="é…ç½®æŒ‡ä»¤çš„alias"></a>é…ç½®æŒ‡ä»¤çš„<code>alias</code></h3><p>æ‰“å¼€æ–‡ä»¶<code>bash.bashrc</code>ï¼Œåœ¨å®‰è£…ç›®å½•ä¸‹çš„<code>Git/etc/bash.bashrc</code>ã€‚</p><p>æœ«å°¾æ·»åŠ ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">alias</span> <span class="token assign-left variable">blog</span><span class="token operator">=</span><span class="token string">'cd /e/flynn/flynna.github.io'</span><span class="token builtin class-name">alias</span> <span class="token assign-left variable">serve</span><span class="token operator">=</span><span class="token string">'yarn serve'</span><span class="token comment"># ...</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ç¯å¢ƒæ­å»º </category>
          
          <category> Vscode </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vscode </tag>
            
            <tag> terminal </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨ Windows ä¸­å®‰è£…å’Œä½¿ç”¨ WSL</title>
      <link href="/envConstruct/wsl-ubuntu/"/>
      <url>/envConstruct/wsl-ubuntu/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a><code>Overview</code></h3><p><code>WSLï¼ˆWindows Subsystem for Linuxï¼Œå…¨ç§° Microsoft-Windows-Subsystem-Linuxï¼‰</code>æ˜¯ä¸€ç§ç”±å¾®è½¯å¼€å‘çš„åœ¨ <code>Windows</code> æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œ <code>Linux</code> åº”ç”¨ç¨‹åºçš„å…¼å®¹æ€§å±‚ï¼ˆæ¨¡æ‹Ÿ <code>Linux</code> è¿è¡Œç¯å¢ƒ | è½»å‹è™šæ‹Ÿæœºï¼‰ã€‚</p><p><code>WSL</code> æ”¯æŒå¤šä¸ª <code>Linux</code> å‘è¡Œç‰ˆï¼ŒåŒ…æ‹¬ <code>Ubuntu</code>ã€<code>Debian</code>ã€<code>Kali Linux</code>ï¼ˆæ“ä½œç³»ç»Ÿï¼‰ã€‚</p><p><strong>æ³¨æ„ï¼šåœ¨ <code>WSL</code> ä¸­ï¼Œåªæœ‰ä¸€ä¸ªé»˜è®¤çš„ <code>Linux</code> å‘è¡Œç‰ˆç‰ˆæœ¬ï¼Œå³ <code>Ubuntu</code>ã€‚å…¶ä»–çš„æ“ä½œç³»ç»Ÿå¯ä»¥é€šè¿‡åº”ç”¨å•†åº—å®‰è£…ï¼Œ<code>WSL</code> æä¾›äº†å…¼å®¹æ€§æ”¯æŒã€‚</strong></p><span id="more"></span><h3 id="å®‰è£…-WSL"><a href="#å®‰è£…-WSL" class="headerlink" title="å®‰è£… WSL"></a>å®‰è£… <code>WSL</code></h3><p>æ‰“å¼€ <code>Windows PowerShell</code>ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><ul><li>å®‰è£… <code>WSL2</code>(æ¨è)ï¼š</li></ul><pre class="language-css" data-language="css"><code class="language-css"><span class="token comment">/* è¿™ä¸ªæŒ‡ä»¤é»˜è®¤ä¼šè®¾ç½® WSL ç‰ˆæœ¬ä¸º 2 */</span>wsl --install</code></pre><ul><li>å®‰è£… <code>WSL1</code>(æ—§ç‰ˆ<code>Windows</code>)ï¼š</li></ul><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># /online æŒ‡å®šåœ¨å½“å‰æ­£åœ¨è¿è¡Œçš„æ“ä½œç³»ç»Ÿä¸­æ‰§è¡Œæ“ä½œ</span><span class="token comment"># /enable-feature å¯ç”¨ä¸€ä¸ªæˆ–å¤šä¸ª Windows åŠŸèƒ½</span><span class="token comment"># /featurename:Microsoft-Windows-Subsystem-Linux æŒ‡å®šè¦å¯ç”¨çš„ç‰¹å®šåŠŸèƒ½ï¼Œå³ WSL</span><span class="token comment"># /all å¯ç”¨æ‰€æœ‰ä¾èµ–äºæŒ‡å®šåŠŸèƒ½çš„å­åŠŸèƒ½</span><span class="token comment"># /norestart åœ¨å®Œæˆæ“ä½œåä¸è¦é‡æ–°å¯åŠ¨è®¡ç®—æœº</span><span class="token comment"># å¯ç”¨ Linux å­ç³»ç»Ÿ</span>dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart<span class="token comment"># å¯ç”¨è™šæ‹Ÿæœº</span>dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart<span class="token comment"># ä¸‹è½½ Linux å†…æ ¸æ›´æ–°åŒ… ---> å®‰è£… ---> è®¾ç½® WSL ç‰ˆæœ¬å·</span><span class="token comment"># ä¸‹è½½å­æ“ä½œç³»ç»Ÿ ï¼ˆå¯ä»¥åœ¨åº”ç”¨å•†åº—é‡Œä¸‹è½½å®‰è£…ï¼‰</span><span class="token comment"># è®¾ç½®è´¦æˆ·å¯†ç </span></code></pre><blockquote><p><code>dism.exe</code> æ˜¯ <code>Windows</code> æ“ä½œç³»ç»Ÿä¸­çš„ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œå…¨ç§°ä¸º <code>Deployment Image Servicing and Management (DISM)</code>ã€‚å®ƒç”¨äºç®¡ç†å’Œç»´æŠ¤ <code>Windows</code> æ˜ åƒæ–‡ä»¶ï¼ˆå¦‚ <code>Windows</code> å®‰è£…æ–‡ä»¶å’Œæ˜ åƒæ–‡ä»¶ï¼‰ä»¥åŠ <code>Windows</code> ç»„ä»¶ã€é©±åŠ¨ç¨‹åºå’Œè½¯ä»¶åŒ…ã€‚</p></blockquote><h3 id="åˆ‡æ¢-WSL-ç‰ˆæœ¬"><a href="#åˆ‡æ¢-WSL-ç‰ˆæœ¬" class="headerlink" title="åˆ‡æ¢ WSL ç‰ˆæœ¬"></a>åˆ‡æ¢ <code>WSL</code> ç‰ˆæœ¬</h3><h4 id="æŸ¥çœ‹-Linux-åˆ†å‘ç‰ˆæœ¬"><a href="#æŸ¥çœ‹-Linux-åˆ†å‘ç‰ˆæœ¬" class="headerlink" title="æŸ¥çœ‹ Linux åˆ†å‘ç‰ˆæœ¬"></a>æŸ¥çœ‹ <code>Linux</code> åˆ†å‘ç‰ˆæœ¬</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># è¿›å…¥ wsl</span>wsl<span class="token comment"># æŸ¥çœ‹</span>lsb_release -a</code></pre><h4 id="æŸ¥çœ‹å·²ä¸‹è½½çš„ç‰ˆæœ¬"><a href="#æŸ¥çœ‹å·²ä¸‹è½½çš„ç‰ˆæœ¬" class="headerlink" title="æŸ¥çœ‹å·²ä¸‹è½½çš„ç‰ˆæœ¬"></a>æŸ¥çœ‹å·²ä¸‹è½½çš„ç‰ˆæœ¬</h4><pre class="language-bash" data-language="bash"><code class="language-bash">wsl -l -v<span class="token comment"># eg. Ubuntu Running 2 å®‰è£…çš„ Ubuntu ä½¿ç”¨çš„æ˜¯ WSL 2</span></code></pre><h4 id="è®¾ç½®åˆ‡æ¢ç‰ˆæœ¬"><a href="#è®¾ç½®åˆ‡æ¢ç‰ˆæœ¬" class="headerlink" title="è®¾ç½®åˆ‡æ¢ç‰ˆæœ¬"></a>è®¾ç½®åˆ‡æ¢ç‰ˆæœ¬</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># é»˜è®¤ä½¿ç”¨ WSL2</span>wsl --set-default-version <span class="token number">2</span><span class="token comment"># åˆ‡æ¢ç‰ˆæœ¬ ä½¿ç”¨ Ubuntu-20.04 çš„ WSL 1 ç‰ˆæœ¬</span>wsl --set-version Ubuntu-20.04 <span class="token number">1</span></code></pre><h3 id="å®‰è£…-WSL-çš„æ“ä½œç³»ç»Ÿ-Ubuntu"><a href="#å®‰è£…-WSL-çš„æ“ä½œç³»ç»Ÿ-Ubuntu" class="headerlink" title="å®‰è£… WSL çš„æ“ä½œç³»ç»Ÿ Ubuntu"></a>å®‰è£… <code>WSL</code> çš„æ“ä½œç³»ç»Ÿ <code>Ubuntu</code></h3><ul><li><p>åº”ç”¨å•†åº—å®‰è£…<code>Ubuntu</code></p><p>ä¸‹è½½å®‰è£…åå¯åŠ¨ï¼Œè®¾ç½®ç”¨æˆ·åå¯†ç ï¼Œè®¾ç½®å®Œæˆåä¼šå¯åŠ¨ <code>Ubuntu</code>ï¼Œç„¶åæ‰§è¡Œ <code>Linux</code> ç¨‹åºå’Œå‘½ä»¤</p></li><li><p>å‘½ä»¤è¡Œå®‰è£…</p></li></ul><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># or wsl --install -d Ubuntu-20.04 [è¿™ä¸ªè¿‡ç¨‹å¯èƒ½éœ€è¦ç®¡ç†å‘˜æƒé™]</span>wsl --install -d Ubuntu</code></pre><h3 id="å¯åŠ¨-x2F-é€€å‡º-WSL"><a href="#å¯åŠ¨-x2F-é€€å‡º-WSL" class="headerlink" title="å¯åŠ¨&#x2F;é€€å‡º WSL"></a>å¯åŠ¨&#x2F;é€€å‡º <code>WSL</code></h3><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å¯åŠ¨</span>wsl<span class="token comment"># é€€å‡º å…³é—­ç»ˆç«¯ | å…³æœº ç›´æ¥é€€å‡º or (â†“æ¨è exit)</span><span class="token builtin class-name">exit</span><span class="token comment"># or å…³é—­æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„ WSL ä¼šè¯ [åœ¨é Ubuntu ç¯å¢ƒä¸‹æ‰§è¡Œ wsl å‘½ä»¤, æ¯”å¦‚æ–°å»ºçª—å£]</span>wsl --shutdown</code></pre><blockquote><p>é¦–æ¬¡å¯åŠ¨ä¼šæç¤ºè¾“å…¥ç”¨æˆ·åå’Œå¯†ç </p></blockquote><h4 id="å¿˜è®°è´¦æˆ·å¯†ç "><a href="#å¿˜è®°è´¦æˆ·å¯†ç " class="headerlink" title="å¿˜è®°è´¦æˆ·å¯†ç "></a>å¿˜è®°è´¦æˆ·å¯†ç </h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># è¿›å…¥é»˜è®¤çš„ WSL ç³»ç»Ÿ</span>wsl -u root<span class="token comment"># è¿›å…¥æŒ‡å®šç³»ç»Ÿ &lt;åç§°> ---> Ubuntu</span>wsl -d <span class="token operator">&lt;</span>åç§°<span class="token operator">></span> -u root<span class="token comment"># ä¿®æ”¹å¯†ç  &lt;username> å¯¹åº”å¿˜è®°å¯†ç çš„è´¦æˆ·å</span><span class="token function">passwd</span> <span class="token operator">&lt;</span>username<span class="token operator">></span><span class="token comment"># ä¿®æ”¹æˆåŠŸ é€€å‡º</span><span class="token builtin class-name">exit</span></code></pre><h3 id="åŒ…ç®¡ç†å™¨sudo"><a href="#åŒ…ç®¡ç†å™¨sudo" class="headerlink" title="åŒ…ç®¡ç†å™¨sudo"></a>åŒ…ç®¡ç†å™¨<code>sudo</code></h3><p><code>sudo</code> æ˜¯ <code>Linux</code> å’Œ <code>Unix</code> æ“ä½œç³»ç»Ÿä¸­ç”¨äºæš‚æ—¶è·å–ç®¡ç†å‘˜æƒé™çš„å‘½ä»¤ã€‚å®ƒå…è®¸ç”¨æˆ·ä½¿ç”¨æ ¹çº§åˆ«æƒé™æ‰§è¡Œå‘½ä»¤ï¼Œæ˜¯å‘è¡Œç‰ˆçš„é¦–é€‰åŒ…ç®¡ç†å™¨ã€‚</p><h4 id="æ›´æ–°è½¯ä»¶åŒ…"><a href="#æ›´æ–°è½¯ä»¶åŒ…" class="headerlink" title="æ›´æ–°è½¯ä»¶åŒ…"></a>æ›´æ–°è½¯ä»¶åŒ…</h4><blockquote><p><code>sudo</code> æ˜¯åœ¨ <code>Unixã€Linux</code> å’Œç±»ä¼¼ç³»ç»Ÿä¸­ç”¨äºä»¥è¶…çº§ç”¨æˆ·æˆ–ç®¡ç†å‘˜æƒé™æ‰§è¡Œå‘½ä»¤çš„æŒ‡ä»¤</p></blockquote><blockquote><p>ä¾‹å¦‚ <code>sudo -u john ls /home/john</code> è¿™ä¼šä»¥ <code>john</code> ç”¨æˆ·èº«ä»½æ‰§è¡Œ <code>ls /home/john</code> å‘½ä»¤ï¼Œè€Œä¸æ˜¯å½“å‰ç”¨æˆ·çš„èº«ä»½ã€‚</p></blockquote><p>å»ºè®®<strong>å®šæœŸæ›´æ–°å’Œå‡çº§åŒ…</strong>ã€‚ä»¥ç®¡ç†å‘˜æƒé™æ›´æ–° <code>Ubuntu</code> æ“ä½œç³»ç»Ÿçš„è½¯ä»¶åŒ…åˆ—è¡¨:</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å¯åŠ¨å¹¶è¿›å…¥ Ubuntu</span>wsl<span class="token comment"># æ›´æ–°ã€å‡çº§è½¯ä»¶åŒ…</span><span class="token function">sudo</span> <span class="token function">apt</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">sudo</span> <span class="token function">apt</span> upgrade</code></pre><h4 id="å®‰è£…-x2F-åˆ é™¤è½¯ä»¶åŒ…"><a href="#å®‰è£…-x2F-åˆ é™¤è½¯ä»¶åŒ…" class="headerlink" title="å®‰è£…&#x2F;åˆ é™¤è½¯ä»¶åŒ…"></a>å®‰è£…&#x2F;åˆ é™¤è½¯ä»¶åŒ…</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ä»¥ç®¡ç†å‘˜èº«ä»½å®‰è£…è½¯ä»¶åŒ…</span><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token punctuation">[</span>package-name<span class="token punctuation">]</span><span class="token comment"># åˆ é™¤åŒ…</span><span class="token function">sudo</span> <span class="token function">apt</span> remove <span class="token punctuation">[</span>package-name<span class="token punctuation">]</span></code></pre><h3 id="æ–‡ä»¶å­˜å‚¨å’Œå†…å­˜å ç”¨"><a href="#æ–‡ä»¶å­˜å‚¨å’Œå†…å­˜å ç”¨" class="headerlink" title="æ–‡ä»¶å­˜å‚¨å’Œå†…å­˜å ç”¨"></a>æ–‡ä»¶å­˜å‚¨å’Œå†…å­˜å ç”¨</h3><p>æ—¢ç„¶ <code>WSL</code> æä¾›äº†è™šæ‹Ÿæœºç¯å¢ƒï¼Œé‚£ä¹ˆåœ¨ <code>Ubuntu</code> å®‰è£…çš„æ–‡ä»¶åˆå»äº†å“ªé‡Œï¼Œå†…å­˜åˆæ˜¯æ€ä¹ˆåˆ†é…çš„ï¼Ÿ</p><blockquote><p><code>Ubuntu</code> æ–‡ä»¶å¤§å°å¯èƒ½ä¼šéšç€ä½¿ç”¨æƒ…å†µè€Œå˜åŒ–ï¼Œå› æ­¤å»ºè®®å®šæœŸæ£€æŸ¥å¹¶ç®¡ç† <code>Ubuntu</code> çš„æ–‡ä»¶å ç”¨ç©ºé—´ï¼Œä»¥ç¡®ä¿ç£ç›˜ç©ºé—´å……è¶³ã€‚</p></blockquote><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># è¿›å…¥ wsl å¯åŠ¨ Ubuntu</span>wsl<span class="token comment"># du [é€‰é¡¹] [ç›®å½•æˆ–æ–‡ä»¶] æŸ¥çœ‹æ–‡ä»¶å†…å­˜å ç”¨ du -s[æ€»è®¡]-h[å¯è¯»æ€§] [ç›®å½•æœªæŒ‡å®šæ—¶ç»Ÿè®¡å½“å‰ç›®å½•]</span><span class="token function">du</span> -sh<span class="token comment">#  åªç»Ÿè®¡ /path å‰ä¸¤å±‚å­ç›®å½•çš„ç£ç›˜å ç”¨</span><span class="token function">du</span> -h --max-depth<span class="token operator">=</span><span class="token number">2</span> /path</code></pre><ul><li><p><code>Ubuntu</code> æ–‡ä»¶å­˜å‚¨åœ¨ <code>Windows</code> æ–‡ä»¶ç³»ç»Ÿçš„è™šæ‹Ÿç£ç›˜æ–‡ä»¶ï¼ˆé€šå¸¸ä¸º VHD æˆ– VHDX æ ¼å¼ <code>\\wsl$\Ubuntu\</code>ï¼‰ã€‚<code>\\wsl$</code> æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ <code>UNC (Uniform Naming Convention)</code> è·¯å¾„ï¼Œå¯ç”¨äºè®¿é—® <code>WSL</code> çš„æ–‡ä»¶ç³»ç»Ÿã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹å­˜å‚¨åœ¨ <code>Windows</code> ç”¨æˆ·ç›®å½•ä¸‹çš„éšè—ç›®å½•ä¸­ï¼Œå…·ä½“è·¯å¾„ä¸º <code>%LOCALAPPDATA%\Packages\&lt;DistroName&gt;\LocalState\</code> <del>ä¸å»ºè®®å»åŠ¨å®ƒï¼Œé¿å…é€ æˆä¸å¯é¢„çŸ¥çš„é”™è¯¯</del></p></li><li><p><code>WSL</code> ä¼šå°†æ–‡ä»¶æ˜ å°„åˆ° <code>Ubuntu</code> æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œä½¿å¾— <code>Ubuntu</code> ä¸­ä¹Ÿå¯ä»¥è®¿é—®å’Œæ“ä½œè¿™äº›æ–‡ä»¶ã€‚<code>æ®æˆ‘è‡ªå·±æµ‹è¯•ï¼Œæ˜¯åœ¨ /mnt æ–‡ä»¶å¤¹ä¸‹ï¼Œeg. /mnt/c/...</code></p></li></ul><h3 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h3><table><thead><tr><th>name</th><th align="left">å«ä¹‰</th></tr></thead><tbody><tr><td><code>/bin</code></td><td align="left">åŒ…å«äº†å¯æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œç”¨äºå­˜æ”¾ç³»ç»Ÿå’Œç”¨æˆ·çº§çš„åŸºæœ¬å‘½ä»¤å’Œå·¥å…·ã€‚</td></tr><tr><td><code>/boot</code></td><td align="left">åŒ…å«äº†ç³»ç»Ÿå¼•å¯¼ç›¸å…³çš„æ–‡ä»¶ï¼Œå¦‚å†…æ ¸æ–‡ä»¶ã€å¼•å¯¼åŠ è½½ç¨‹åºå’Œå¼•å¯¼é…ç½®æ–‡ä»¶ç­‰ã€‚</td></tr><tr><td><code>/dev</code></td><td align="left">åŒ…å«äº†è®¾å¤‡æ–‡ä»¶ï¼Œç”¨äºä¸ç³»ç»Ÿä¸­çš„è®¾å¤‡è¿›è¡Œäº¤äº’ï¼Œå¦‚ç¡¬ç›˜ã€ç»ˆç«¯ã€USB è®¾å¤‡ç­‰ã€‚</td></tr><tr><td><code>/etc</code></td><td align="left">åŒ…å«äº†ç³»ç»Ÿçº§çš„é…ç½®æ–‡ä»¶ï¼Œå¦‚ç½‘ç»œé…ç½®ã€ç”¨æˆ·è´¦æˆ·é…ç½®ã€æœåŠ¡é…ç½®ç­‰ã€‚</td></tr><tr><td><code>/home</code></td><td align="left">åŒ…å«äº†ç”¨æˆ·çš„ä¸ªäººç›®å½•ï¼Œæ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„ç›®å½•ï¼Œç”¨äºå­˜æ”¾ç”¨æˆ·çš„ä¸ªäººæ–‡ä»¶ã€é…ç½®æ–‡ä»¶å’Œè®¾ç½®ã€‚</td></tr><tr><td><code>/lib</code> å’Œ <code>/lib64</code></td><td align="left">åˆ†åˆ«åŒ…å«äº†ç³»ç»Ÿå’Œç”¨æˆ·çº§çš„å…±äº«åº“æ–‡ä»¶ï¼Œç”¨äºæ”¯æŒç¨‹åºè¿è¡Œæ—¶çš„ä¾èµ–å…³ç³»ã€‚</td></tr><tr><td><code>/media</code></td><td align="left">ç”¨äºæŒ‚è½½å¯ç§»åŠ¨ä»‹è´¨ï¼Œå¦‚å…‰ç›˜ã€USB è®¾å¤‡ç­‰ã€‚</td></tr><tr><td><code>/opt</code></td><td align="left">ç”¨äºå®‰è£…ç¬¬ä¸‰æ–¹è½¯ä»¶çš„ç›®å½•ï¼Œé€šå¸¸ç”±ç”¨æˆ·è‡ªè¡Œå®‰è£…çš„è½¯ä»¶ä¼šè¢«å®‰è£…åˆ°è¯¥ç›®å½•ä¸‹ã€‚</td></tr><tr><td><code>/proc</code></td><td align="left">åŒ…å«äº†å†…æ ¸å’Œè¿›ç¨‹ç›¸å…³çš„è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œç”¨äºæŸ¥çœ‹ç³»ç»Ÿè¿è¡Œæ—¶çš„ä¿¡æ¯å’ŒçŠ¶æ€ã€‚</td></tr><tr><td><code>/root</code></td><td align="left">è¶…çº§ç”¨æˆ·ï¼ˆrootï¼‰çš„ä¸ªäººç›®å½•ï¼Œé€šå¸¸åªæœ‰è¶…çº§ç”¨æˆ·æ‰æœ‰æƒé™è®¿é—®ã€‚</td></tr><tr><td><code>/sbin</code></td><td align="left">åŒ…å«äº†ç³»ç»Ÿçº§çš„å¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œç”¨äºå­˜æ”¾ç³»ç»Ÿç®¡ç†å’Œç»´æŠ¤çš„å·¥å…·ã€‚</td></tr><tr><td><code>/srv</code></td><td align="left">ç”¨äºå­˜æ”¾ç³»ç»ŸæœåŠ¡ç›¸å…³çš„æ•°æ®æ–‡ä»¶ï¼Œå¦‚ç½‘ç«™çš„æ•°æ®æ–‡ä»¶ã€FTP æœåŠ¡å™¨çš„æ–‡ä»¶ç­‰ã€‚</td></tr><tr><td><code>/tmp</code></td><td align="left">ç”¨äºå­˜æ”¾ä¸´æ—¶æ–‡ä»¶å’Œç›®å½•ï¼Œé€šå¸¸åœ¨ç³»ç»Ÿé‡å¯æ—¶ä¼šè¢«æ¸…ç©ºã€‚</td></tr><tr><td><code>/usr</code></td><td align="left">ç”¨äºå­˜æ”¾ç”¨æˆ·çº§çš„åº”ç”¨ç¨‹åºã€åº“æ–‡ä»¶ã€å¤´æ–‡ä»¶ã€æ–‡æ¡£ç­‰ã€‚</td></tr><tr><td><code>/var</code></td><td align="left">åŒ…å«äº†ç³»ç»Ÿè¿è¡Œæ—¶äº§ç”Ÿçš„å˜åŒ–çš„æ–‡ä»¶ï¼Œå¦‚æ—¥å¿—æ–‡ä»¶ã€æ•°æ®åº“æ–‡ä»¶ã€ç¼“å­˜æ–‡ä»¶ç­‰ã€‚</td></tr></tbody></table><blockquote><p>å¦‚æœéœ€è¦æŸ¥çœ‹æ–‡ä»¶å†…å®¹</p></blockquote><h3 id="æ–‡ä»¶æ“ä½œæŒ‡ä»¤"><a href="#æ–‡ä»¶æ“ä½œæŒ‡ä»¤" class="headerlink" title="æ–‡ä»¶æ“ä½œæŒ‡ä»¤"></a>æ–‡ä»¶æ“ä½œæŒ‡ä»¤</h3><p>ä¸€äº›å¸¸ç”¨çš„æ–‡ä»¶æ“ä½œæŒ‡ä»¤ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åˆ›å»ºæ–‡ä»¶å¤¹</span><span class="token function">mkdir</span> <span class="token punctuation">[</span>æ–‡ä»¶å¤¹åç§°<span class="token punctuation">]</span><span class="token comment"># åˆ›å»ºç©ºæ–‡ä»¶ touch test.txt</span><span class="token function">touch</span> <span class="token punctuation">[</span>æ–‡ä»¶å<span class="token punctuation">]</span><span class="token comment"># åˆ é™¤æ–‡ä»¶ -r[åˆ é™¤æ‰€æœ‰æ–‡ä»¶] -f[å¼ºåˆ¶åˆ é™¤ï¼Œä¸æç¤º]   rm -rf *</span><span class="token function">rm</span> <span class="token punctuation">[</span>æ–‡ä»¶å<span class="token punctuation">]</span><span class="token comment"># ç§»åŠ¨ | é‡å‘½åæ–‡ä»¶ æ–‡ä»¶ -> æ–‡ä»¶å¤¹ || æ–‡ä»¶å¤¹ -> æ–‡ä»¶å¤¹[å·²å­˜åœ¨]ï¼Œä¸ºç§»åŠ¨ï¼Œå¦åˆ™å°±æ˜¯é‡å‘½å</span><span class="token function">mv</span> <span class="token punctuation">[</span>æ—§æ–‡ä»¶<span class="token punctuation">]</span> <span class="token punctuation">[</span>æ–‡ä»¶ <span class="token operator">|</span> æ–‡ä»¶å¤¹è·¯å¾„<span class="token punctuation">]</span><span class="token comment"># å¤åˆ¶æ–‡ä»¶ åŒä¸Šè§£é‡Š</span><span class="token function">cp</span> <span class="token punctuation">[</span>æ—§æ–‡ä»¶<span class="token punctuation">]</span> <span class="token punctuation">[</span>æ–°æ–‡ä»¶å <span class="token operator">|</span> è·¯å¾„<span class="token punctuation">]</span><span class="token comment"># åˆ›å»ºå¹¶å†™å…¥å†…å®¹åˆ°æ–‡ä»¶</span><span class="token builtin class-name">echo</span> <span class="token string">"Hello, World!"</span> <span class="token operator">></span> file.txt<span class="token comment"># æŸ¥çœ‹æ–‡ä»¶å†…å®¹</span><span class="token function">cat</span> <span class="token punctuation">[</span>æ–‡ä»¶å<span class="token punctuation">]</span><span class="token comment"># åˆ†é¡µæŸ¥çœ‹å†…å®¹</span><span class="token function">less</span> <span class="token punctuation">[</span>æ–‡ä»¶å<span class="token punctuation">]</span><span class="token function">more</span> <span class="token punctuation">[</span>æ–‡ä»¶å<span class="token punctuation">]</span><span class="token comment"># ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨ç¼–è¾‘æ–‡ä»¶ --- è¯¦ç»†å¯è§å¦å¤–ä¸€ç¯‡æ–‡ç«  ã€viã€vim ç¼–è¾‘å™¨å­¦ä¹ ã€‘</span>vi/vim <span class="token punctuation">[</span>æ–‡ä»¶å<span class="token punctuation">]</span><span class="token function">nano</span> <span class="token punctuation">[</span>æ–‡ä»¶å<span class="token punctuation">]</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ç¯å¢ƒæ­å»º </category>
          
          <category> WSL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> terminal </tag>
            
            <tag> wsl </tag>
            
            <tag> ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git å¸¸ç”¨ alias åˆ«åé…ç½®</title>
      <link href="/posts/git-alias/"/>
      <url>/posts/git-alias/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="ç‚¹äº®ä½ çš„æŠ€å·§ç‚¹"><a href="#ç‚¹äº®ä½ çš„æŠ€å·§ç‚¹" class="headerlink" title="ç‚¹äº®ä½ çš„æŠ€å·§ç‚¹"></a>ç‚¹äº®ä½ çš„æŠ€å·§ç‚¹</h3><p>é€šè¿‡æ›´åŠ ç®€æ´æ˜“è®°çš„å•è¯æˆ–è€…çŸ­è¯­æ¥æ ‡è®°å¸¸ç”¨çš„æŒ‡ä»¤â€“åˆ«å<code>alias</code>ã€‚å®ƒçš„å¦å¤–ä¸€ä¸ªä¸å®¹å¿½è§†çš„å¥½å¤„å°±æ˜¯å¯ä»¥å°½å¯èƒ½çš„é¿å…æŒ‡ä»¤è¾“å‡ºé”™è¯¯~~</p><span id="more"></span><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p><code>eg.</code>é…ç½®<code>git status</code>çš„<code>status</code>åˆ«åä¸º<code>st</code>ï¼š</p><blockquote><p>git config â€“global alias.st status</p></blockquote><p>æ·»åŠ <code>--global</code>é’ˆå¯¹ç”¨æˆ·çº§èµ·ä½œç”¨ï¼Œå¦‚æœä¸åŠ ï¼Œåˆ™åªä¼šåœ¨å½“å‰ä»“åº“èµ·ä½œç”¨</p><p>é™¤äº†é€šè¿‡æŒ‡ä»¤è¿›è¡Œè®¾ç½®ä»¥å¤–ï¼Œä½ å¯ä»¥æ‰“å¼€<code>~/.globalConfig</code>æ–‡ä»¶ï¼Œç„¶åç¼–è¾‘å½•å…¥ä½ æƒ³è¦çš„<code>alias</code>â€¦è¯­æ³•å¦‚ä¸‹ï¼š</p><pre class="language-none"><code class="language-none">[alias]  st &#x3D; status  xx &#x3D; xxxx</code></pre><p>è¿™æ ·å°±é…ç½®å¥½äº†ï¼Œä¾‹å¦‚ä¸Šé¢é…ç½®çš„<code>status</code>ï¼Œå½“ä½ ä»<code>terminal</code>å½•å…¥<code>git s</code>çš„æŒ‡ä»¤æ—¶ï¼Œä¼šè‡ªåŠ¨ä½¿ç”¨<code>git status</code>æ¥æ›¿æ¢å½“å‰æŒ‡ä»¤ã€‚</p><p>æœ‰çš„ç«¥é‹è¦è¯´äº†ï¼Œé‚£éƒ½è¿™æ ·äº† æˆ‘<code>git</code>ä¹Ÿæƒ³ç®€å†™ï¼Œè¡Œå¦ï¼Ÿå½“ç„¶æ˜¯å¯ä»¥æ»´~~ğŸ˜‹ğŸ˜‹ğŸ˜‹</p><p>ä¾‹å¦‚æˆ‘å¹³æ—¶æäº¤ä»£ç çš„<code>terminal</code>æ˜¯<code>git bash</code>ï¼Œæˆ‘ä»¬å¯ä»¥ä¸º<code>git bash</code>æ·»åŠ <code>alias</code>çš„é…ç½®é¡¹ï¼Œè¾…åŠ©è¯†åˆ«æŒ‡ä»¤ï¼šæ‰¾åˆ°<code>~/.bash_profile</code>æˆ–è€…æ˜¯<code>prefix/etc/bash.bashrc</code>ï¼Œæœ«å°¾è¿½åŠ ï¼š</p><blockquote><p><code>alias g=&#39;git&#39;</code></p></blockquote><p>ç°åœ¨<code>g st</code>å°±ç­‰ä»·<code>git status</code>â€¦æœ‰æœ¨æœ‰æ„Ÿè§‰å¾ˆçˆ½ï¼Ÿæ—¢ç„¶çŸ¥é“äº†æ€ä¹ˆé…ï¼Œå¤§å®¶æ ¹æ®è‡ªå·±çš„æ—¥å¸¸ä¹ æƒ¯å’Œéœ€è¦ï¼Œè¿›è¡Œé…ç½®å³å¯â€¦</p><p>å†™ä¸‹æˆ‘å¸¸ç”¨çš„ä¸€äº›<code>alias</code>é…ç½®ï¼Œå…¶ä¸­æœ‰ä¸€éƒ¨åˆ†ä¹Ÿæ˜¯å®˜æ–¹æ¨èçš„é…ç½®é¡¹ï¼š -&gt; <a href="https://git-scm.com/book/zh/v2/Git-%E5%9F%BA%E7%A1%80-Git-%E5%88%AB%E5%90%8D">è¿™é‡Œ</a></p><table><thead><tr><th align="center">åˆ«å<code>alias</code></th><th align="left">åŸæŒ‡</th></tr></thead><tbody><tr><td align="center"><code>a</code></td><td align="left"><code>add .</code></td></tr><tr><td align="center"><code>cm</code></td><td align="left"><code>commit -m</code></td></tr><tr><td align="center"><code>st</code></td><td align="left"><code>status</code></td></tr><tr><td align="center"><code>co</code></td><td align="left"><code>checkout</code></td></tr><tr><td align="center"><code>ci</code></td><td align="left"><code>commit</code></td></tr><tr><td align="center"><code>rci</code></td><td align="left"><code>commit --amend --no-edit</code></td></tr><tr><td align="center"><code>br</code></td><td align="left"><code>branch</code></td></tr><tr><td align="center"><code>unstage</code></td><td align="left"><code>reset HEAD</code></td></tr><tr><td align="center"><code>last</code></td><td align="left"><code> log -1</code></td></tr><tr><td align="center"><code>lg</code></td><td align="left"><code>log --color --graph --pretty=format:&#39;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset&#39; --abbrev-commit</code></td></tr><tr><td align="center"><code>pr</code></td><td align="left"><code>pull --rebase</code></td></tr><tr><td align="center"><code>pl</code></td><td align="left"><code>pull</code></td></tr></tbody></table><p>ä¾‹å¦‚ï¼š<code>g last</code> å¯ä»¥æŸ¥çœ‹æœ€è¿‘ä¸€æ¡çš„<code>git</code>æäº¤è®°å½•ï¼Œ<code>g rci</code>å¯ä»¥å°†æš‚å­˜åŒºå†…çš„æ–‡ä»¶æ”¹åŠ¨åˆå¹¶è‡³ä¸Šä¸€æ¬¡æäº¤ï¼Œä¸”ä¸ç”Ÿæˆæ–°çš„æäº¤è®°å½• <del>æœ‰æ—¶å€™ä¿®æ”¹äº†å†…å®¹æäº¤äº†æ‰å‘ç°ï¼Œå¯èƒ½å¿˜è®° format ï¼Ÿ æˆ–è€…æ˜¯å˜é‡åæ‹¼å†™é”™è¯¯ï¼Ÿç­‰ç­‰éœ€è¦é‡æ–°ç¼–è¾‘æäº¤çš„ï¼Œä½†åˆä¸æƒ³åœ¨æ—¥å¿—ä¸­å†ç”Ÿæˆä¸€æ¡æäº¤è®°å½•ï¼Œå°±å¯ä»¥ä½¿ç”¨ rci å¹¶å…¥æäº¤</del>ï¼Œ<code>g unstage</code>å¯ä»¥å–æ¶ˆ<code>add</code>åˆ°æš‚å­˜åŒºçš„æ–‡ä»¶ï¼Œ<code>lg</code>å¯ä»¥æŸ¥çœ‹<code>git</code>æäº¤æ—¥å¿—ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ”¶è—å®‰åˆ© </category>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git-alias </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git ç¯å¢ƒæ­å»º</title>
      <link href="/envConstruct/git-install/"/>
      <url>/envConstruct/git-install/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><blockquote><p><code>Git</code> æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œç”¨äºè·Ÿè¸ªæ–‡ä»¶å’Œä»£ç çš„å˜åŒ–ï¼Œåä½œå¼€å‘ä»¥åŠç®¡ç†é¡¹ç›®çš„ç‰ˆæœ¬ã€‚<strong>æ˜¯æ”¯æŒç‰ˆæœ¬ç®¡ç†ã€å¤šäººåä½œã€åˆ†æ”¯ç®¡ç†ã€è½»é‡çº§ã€å¼€æºï¼Œå¹¶æ‹¥æœ‰ä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿ</strong></p></blockquote><span id="more"></span><h3 id="å·¥å…·ä¸‹è½½"><a href="#å·¥å…·ä¸‹è½½" class="headerlink" title="å·¥å…·ä¸‹è½½"></a>å·¥å…·ä¸‹è½½</h3><p><code>å‚»ç“œå¼å®‰è£…ï¼Œé€‰æ‹©ç›˜ç¬¦- æ³¨æ„å®‰è£…è¿‡ç¨‹ä¸­ä¼šæç¤ºæ˜¯å¦å°†bashåŠ å…¥å³é”®èœå•ï¼Œå‹¾é€‰</code></p><p><a href="https://git-scm.com/download/win">windows ä¸‹è½½</a></p><p><a href="https://git-scm.com/download/mac">mac ä¸‹è½½</a></p><h3 id="å…¨å±€é…ç½®"><a href="#å…¨å±€é…ç½®" class="headerlink" title="å…¨å±€é…ç½®"></a>å…¨å±€é…ç½®</h3><h4 id="é…ç½®å½“å‰gitç”¨æˆ·ä¿¡æ¯"><a href="#é…ç½®å½“å‰gitç”¨æˆ·ä¿¡æ¯" class="headerlink" title="é…ç½®å½“å‰gitç”¨æˆ·ä¿¡æ¯"></a>é…ç½®å½“å‰<code>git</code>ç”¨æˆ·ä¿¡æ¯</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config --global user.name <span class="token punctuation">[</span>gitæäº¤æ˜¾ç¤ºçš„ç”¨æˆ·å<span class="token punctuation">]</span><span class="token function">git</span> config --global user.email <span class="token punctuation">[</span>gitæäº¤ç”¨æˆ·æ‰€å±é‚®ç®±<span class="token punctuation">]</span><span class="token comment"># æŸ¥çœ‹ç³»ç»Ÿé…ç½®</span><span class="token function">git</span> config --system --list <span class="token operator">||</span> <span class="token function">git</span> config --system -l<span class="token comment"># æŸ¥çœ‹ç”¨æˆ·å…¨å±€é…ç½®</span><span class="token function">git</span> config --global --list <span class="token operator">||</span> <span class="token function">git</span> config --global -l<span class="token comment"># æŸ¥çœ‹å½“å‰ä»“åº“é…ç½®</span><span class="token function">git</span> config --local --list <span class="token operator">||</span> <span class="token function">git</span> config --local -l</code></pre><h4 id="é…ç½®gitè§„èŒƒ"><a href="#é…ç½®gitè§„èŒƒ" class="headerlink" title="é…ç½®gitè§„èŒƒ"></a>é…ç½®<code>git</code>è§„èŒƒ</h4><div class="primary"><blockquote><p>æ¢è¡Œç¬¦çº¦æŸï¼ˆé—®é¢˜è®°å½•ï¼‰</p></blockquote></div><p>å¤šäººåä½œé¡¹ç›®ï¼Œå¦‚æœå…¶ä»–äººç”¨çš„æ—¶<code>linux</code>ï¼Œä½ ç”¨çš„<code>windows</code>ï¼Œä¼šå­˜åœ¨è¡Œå°¾ç»“æŸç¬¦é—®é¢˜æ‰°ä¹±åä½œï¼Œå› ä¸º<code>windows</code>ä½¿ç”¨å›è½¦å’Œæ¢è¡Œä¸¤ä¸ªå­—ç¬¦æ¥ç»“æŸä¸€è¡Œã€‚</p><p>é…ç½®<code>core.autocrlf</code>å¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜ã€‚</p><p>å‚æ•°è¯´æ˜ï¼š</p><blockquote><p>trueï¼šé»˜è®¤å€¼ï¼Œæ‹‰å–ï¼ˆç­¾å‡ºï¼‰ä»£ç çš„æ—¶å€™ï¼ŒLF ä¼šè¢«è½¬æ¢æˆ CRLFã€‚å¤§å®¶ä¹Ÿåº”è¯¥å‘ç°äº†ï¼Œå¦‚æœæºä»£ç ä¸­æ˜¯ LFï¼Œé‚£ä¹ˆæäº¤çš„æ—¶å€™è‚¯å®šä¼šé‡åˆ°é”™è¯¯å†²çª LF would be replaced by CRLF.</p></blockquote><blockquote><p>inputï¼šæäº¤ï¼ˆç­¾å…¥ï¼‰æ—¶æŠŠ CRLF è½¬æ¢æˆ LFã€‚åŒç†ï¼Œå½“è¿œç¨‹ä»“åº“æºä»£ç ä½¿ç”¨çš„æ˜¯ CRLFï¼Œé‚£ä¹ˆæäº¤ä¹Ÿä¼šé‡åˆ°é”™è¯¯å†²çª CRLF would be replaced by LF.</p></blockquote><blockquote><p>falseï¼šå–æ¶ˆæ­¤åŠŸèƒ½ï¼Œå³ç­¾å…¥ç­¾å‡ºä»£ç æ—¶ï¼Œä¸åšä»»ä½•å¤„ç†ã€‚æºä»£ç æ˜¯ LFï¼Œé‚£ä¹ˆæäº¤å°±æ˜¯ LFï¼Œæºä»£ç æ˜¯ CRLFï¼Œé‚£ä¹ˆæäº¤ä¹Ÿå°±æ˜¯ CRLFã€‚æ‰€ä»¥ï¼Œå½“é‡åˆ°ä¸Šé¢ä¸¤ç§é”™è¯¯å†²çªæ—¶ï¼Œè®¾ç½®ä¸º false é€šå¸¸å¯ä»¥é¿å…ã€‚</p></blockquote><p>å¦‚æœé¡¹ç›®ä¸­æ²¡æœ‰å¯¹æºæ–‡ä»¶çš„æ¢è¡Œç¬¦ä½œå‡ºè§„å®šï¼Œ**æºä»£ç ä½¿ç”¨çš„æ˜¯ LFï¼Œè®¾ç½®<code>autocrlf=input</code>, æºä»£ç ä½¿ç”¨çš„æ˜¯ CRLFï¼Œè®¾ç½®<code>autocrlf=true</code>**ã€‚</p><p>å½“æˆ‘ç”¨<code>windows</code>ç”µè„‘<code>git clone</code>ä»£ç çš„æ—¶å€™ï¼Œè‹¥æˆ‘çš„<code>autocrlf</code>(åœ¨<code>windows</code>ä¸‹å®‰è£…<code>git</code>ï¼Œè¯¥é€‰é¡¹é»˜è®¤ä¸º<code>true</code>)ä¸º<code>true</code>ï¼Œé‚£ä¹ˆæ–‡ä»¶æ¯è¡Œä¼šè¢«è‡ªåŠ¨è½¬æˆä»¥<code>CRLF</code>ç»“å°¾ï¼Œè‹¥å¯¹æ–‡ä»¶ä¸åšä»»ä½•ä¿®æ”¹ï¼Œ<code>pre-commit</code>æ‰§è¡Œ<code>eslint</code>çš„æ—¶å€™å°±ä¼šæç¤ºä½ åˆ é™¤<code>CR</code>ã€‚</p><p>é¡¹ç›®ä»“åº“ä¸­ä¸€èˆ¬æ˜¯<code>Linux</code>ç¯å¢ƒä¸‹æäº¤çš„ä»£ç ï¼Œæ–‡ä»¶æ¢è¡Œç¬¦é»˜è®¤æ˜¯ä»¥<code>LF</code>ç»“å°¾çš„(å·¥ç¨‹åŒ–éœ€è¦ï¼Œç»Ÿä¸€æ ‡å‡†)ï¼Œå¦‚æœä½ æ˜¯<code>windows</code>ç”¨æˆ·ï¼Œè®¾ç½®ä¸º<code>false</code>æœ€ç¨³å¦¥ã€‚<del>æ¯•ç«Ÿä¸å¯èƒ½æ¯ä¸ªé¡¹ç›®éƒ½å»é…ä¸€æ¬¡ï¼Œè€Œä¸åŒçš„é¡¹ç›®å®Œå…¨æœ‰å¯èƒ½æ˜¯ä¸åŒçš„ç¯å¢ƒå’Œæ¢è¡Œç¬¦ï¼Œè®¾ç½®ä¸º false å¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜</del></p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config --global core.autocrlf <span class="token boolean">false</span></code></pre><h4 id="é…ç½®å¯†é’¥å¯¹"><a href="#é…ç½®å¯†é’¥å¯¹" class="headerlink" title="é…ç½®å¯†é’¥å¯¹"></a>é…ç½®å¯†é’¥å¯¹</h4><p>ç”Ÿæˆå…¬é’¥å’Œç§é’¥ï¼Œç”¨äºä¸Šä¼ ä»£ç æ—¶çš„å®‰å…¨éªŒè¯</p><pre class="language-none"><code class="language-none">åœ¨git bashé‡Œæ‰§è¡Œå‘½ä»¤ssh-keygen ä¸€è·¯å›è½¦ï¼Œå°±å¯ä»¥ç”Ÿæˆå¯†é’¥å¯¹ï¼Œé»˜è®¤å¯†é’¥å¯¹æ˜¯å­˜æ”¾åœ¨(&#x2F;c&#x2F;Users&#x2F;[ä¸»æœºç”¨æˆ·å]&#x2F;.ssh&#x2F;) ã€‚è¿™ä¸ªç›®å½•ä¸‹æœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼Œ .pubå°±æ˜¯å…¬é’¥ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯ç§é’¥åˆ°çº¿ä¸Šï¼ˆgitlabæˆ–å…¶ä»–å¹³å°ï¼‰æ‰“å¼€è®¾ç½®-&gt;å®‰å…¨è®¾ç½®-&gt;sshå…¬é’¥ï¼ŒæŠŠæœ¬åœ°çš„å…¬é’¥æ–‡ä»¶å…¨é€‰å¤åˆ¶è¿›æ¥ï¼Œè¾“å…¥ç™»å½•å¯†ç ï¼Œå°±é…ç½®æˆåŠŸäº†ã€‚</code></pre><h4 id="é…ç½®https-proxyä»£ç†"><a href="#é…ç½®https-proxyä»£ç†" class="headerlink" title="é…ç½®https.proxyä»£ç†"></a>é…ç½®<code>https.proxy</code>ä»£ç†</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config --global https.proxy http:<span class="token punctuation">\</span><span class="token number">127.0</span>.0.1:xxx</code></pre>]]></content>
      
      
      <categories>
          
          <category> ç¯å¢ƒæ­å»º </category>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
            <tag> git-bash </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nvm å®‰è£…åŠ Node ç¯å¢ƒæ­å»º</title>
      <link href="/envConstruct/nvm-and-node-install/"/>
      <url>/envConstruct/nvm-and-node-install/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><p><code>NVMï¼ˆNode Version Managerï¼‰</code> æ˜¯ä¸€ä¸ªç”¨äºç®¡ç†å’Œåˆ‡æ¢ <code>Node.js</code> ç‰ˆæœ¬çš„å¼€å‘å·¥å…·ã€‚</p><p>å®ƒå…è®¸å¼€å‘è€…åœ¨åŒä¸€å°è®¡ç®—æœºä¸Šå®‰è£…å’Œç®¡ç†å¤šä¸ª <code>Node.js</code> ç‰ˆæœ¬ï¼Œä»¥ä¾¿åœ¨ä¸åŒçš„é¡¹ç›®ä¸­ä½¿ç”¨ä¸åŒçš„ <code>Node.js</code> ç‰ˆæœ¬ï¼Œæˆ–è€…åœ¨åŒä¸€é¡¹ç›®ä¸­åˆ‡æ¢åˆ°ç‰¹å®šç‰ˆæœ¬ä»¥ç¡®ä¿å…¼å®¹æ€§ã€‚</p><span id="more"></span><blockquote><h3 id="nvmä¸‹è½½åŠå®‰è£…"><a href="#nvmä¸‹è½½åŠå®‰è£…" class="headerlink" title="nvmä¸‹è½½åŠå®‰è£…"></a><code>nvm</code>ä¸‹è½½åŠå®‰è£…</h3></blockquote><p>ä¸‹è½½åœ°å€ï¼š<a href="https://github.com/coreybutler/nvm-windows/releases">é“¾æ¥</a></p><p><code>ä¸‹è½½exeçš„packageæ–‡ä»¶ï¼Œé€‰æ‹©è‡ªå®šä¹‰çš„å®‰è£…ç›˜ç¬¦ï¼Œå‚»ç“œå¼å®‰è£…å³å¯ï¼Œç¯å¢ƒå˜é‡ä¼šè‡ªåŠ¨æ·»åŠ ã€‚</code></p><p>å®‰è£…å®Œæˆåï¼Œé…ç½®<code>node</code>åŠ<code>nvm</code>çš„<code>mirror</code>åœ°å€ (ä¸é…ç½®ä¼šå¯¼è‡´ä¸‹è½½<code>node</code>åï¼Œåœ¨ä¸‹è½½<code>npm</code>è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‘ç”Ÿé”™è¯¯ï¼Œéœ€è¦æ‰‹åŠ¨ä¸‹è½½å®‰è£…<code>npm</code>)ã€‚é…ç½®å¦‚ä¸‹ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æ–¹å¼ä¸€ï¼šæ‰‹åŠ¨æ·»åŠ åˆ°é…ç½®æ–‡ä»¶ä¸­ï¼šnvmå®‰è£…ç›®å½•/settings.txt æœ«å°¾è¿½åŠ </span>node_mirror: https://npm.taobao.org/mirrors/node/npm_mirror: https://npm.taobao.org/mirrors/npm/<span class="token comment"># æ–¹å¼äºŒï¼šé€šè¿‡æŒ‡ä»¤ä¿®æ”¹</span>nvm node_mirror <span class="token punctuation">[</span>url<span class="token punctuation">]</span>nvm npm_mirror <span class="token punctuation">[</span>url<span class="token punctuation">]</span></code></pre><blockquote><h3 id="å®‰è£…nodeä»¥åŠnpm"><a href="#å®‰è£…nodeä»¥åŠnpm" class="headerlink" title="å®‰è£…nodeä»¥åŠnpm"></a>å®‰è£…<code>node</code>ä»¥åŠ<code>npm</code></h3></blockquote><p><code>æ‰“å¼€windows terminalï¼Œå¹¶ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ(é¿å…æƒé™é—®é¢˜å¯¼è‡´å®‰è£…è¿‡ç¨‹æŠ›å‡ºå¼‚å¸¸)</code></p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æ˜¾ç¤ºæ‰€æœ‰å¯ä»¥ä¸‹è½½çš„ NodeJs ç‰ˆæœ¬ï¼š</span>nvm list available<span class="token comment"># å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ NodeJs (é€‰æ‹©ç‰ˆæœ¬å·å®‰è£…) ä½ å¯ä»¥å®‰è£…å¤šä¸ªç‰ˆæœ¬</span>nvm <span class="token function">install</span> <span class="token number">14.5</span>.0<span class="token comment"># or ç›´æ¥å®‰è£…æœ€æ–°ç‰ˆ(ä¸å»ºè®®)</span>nvm <span class="token function">install</span> latest<span class="token comment"># åˆ—å‡ºä½ ä»¥åŠå®‰è£…çš„ NodeJs ç‰ˆæœ¬ï¼Œä¸‹é¢ä¸€è¡ŒæŒ‡ä»¤åŒ nvm list</span>nvm list installed<span class="token comment"># ä½¿ç”¨æŸä¸ªç‰ˆæœ¬å·çš„ NodeJs (ä»ä½ å®‰è£…çš„ç‰ˆæœ¬ä¸­é€‰æ‹©)</span>nvm use <span class="token number">14.5</span>.0</code></pre><p>æ£€æµ‹<code>nodeåŠnpm</code>æ˜¯å¦æˆåŠŸå®‰è£…ï¼šå‡ºç°ç‰ˆæœ¬å·ä»£è¡¨å®‰è£…æˆåŠŸ</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">node</span> -v<span class="token function">npm</span> -v</code></pre><p>å¦‚æœ<code>nvm</code>æ²¡æœ‰é…ç½®<code>mirror</code>ï¼Œæˆ–è€…å…¶ä»–åŸå› å¯¼è‡´ä½ çš„<code>npm</code>ä¸èƒ½æ­£å¸¸ä¸‹è½½å®‰è£…ã€‚å¯ä»¥é€šè¿‡ä¸Šé¢é…ç½®çš„æ–¹å¼ï¼Œé‡æ–°å®‰è£…<code>node</code>ï¼Œä¼šè‡ªåŠ¨åŒ¹é…å¯¹åº”çš„<code>npm</code>ä¸‹è½½å®‰è£…ã€‚å½“ç„¶ä½ æƒ³æ‰‹åŠ¨å®‰è£…å¹¶é…ç½®<code>npm</code>ï¼Œä¹Ÿæ˜¯ ok çš„ï¼Œå¦‚ä¸‹ä»‹ç»æ‰‹åŠ¨é…ç½®æ–¹å¼ï¼š(æ­£å¸¸å®‰è£…è¯·è·³è¿‡)</p><ul><li><p>æ ¹æ®<code>nvm</code>ä¸‹è½½å®‰è£…<code>node</code>æ—¶ï¼ŒæŠ›å‡ºçš„å¼‚å¸¸ä¿¡æ¯å¾—çŸ¥<code>npm</code>çš„ä¸‹è½½åœ°å€ï¼š<a href="https://github.com/npm/cli/releases/tag/v6.14.11">ä¸‹è½½ npm</a></p></li><li><p>å°†<code>npm</code>è§£å‹åˆ°<code>nvm/væŒ‡å®šç‰ˆæœ¬/node_modules/</code>ä¸‹ï¼Œå°†<code>npm</code>è§£å‹æ–‡ä»¶å¤¹é‡å‘½åä¸º<code>npm</code></p></li><li><p>å°†<code>npm/bin/</code>æ–‡ä»¶ä¸‹çš„<code>npm</code>åŠ<code>npx</code>ç›¸å…³æ–‡ä»¶æ‹·è´åˆ°<code>nvm/væŒ‡å®šç‰ˆæœ¬/</code>ä¸‹</p></li><li><p>åœ¨å½“å‰ç›®å½•æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥<code>npm -v</code>ï¼Œå‡ºç°ç‰ˆæœ¬å·è¡¨ç¤ºå®‰è£…æˆåŠŸï¼Œå¦‚æœæ¢äº†æ–‡ä»¶å¤¹åæç¤ºæŒ‡ä»¤ä¸å­˜åœ¨ï¼Œå¯åœ¨ç¯å¢ƒå˜é‡<code>path</code>å†…æ·»åŠ å½“å‰è·¯å¾„</p></li></ul><blockquote><h3 id="nrmçš„å®‰è£…åŠåˆ‡æ¢é•œåƒæº"><a href="#nrmçš„å®‰è£…åŠåˆ‡æ¢é•œåƒæº" class="headerlink" title="nrmçš„å®‰è£…åŠåˆ‡æ¢é•œåƒæº"></a><code>nrm</code>çš„å®‰è£…åŠåˆ‡æ¢é•œåƒæº</h3></blockquote><p><code>nrm</code>æä¾›äº†å¿«é€Ÿåˆ‡æ¢é•œåƒæºçš„æ–¹æ¡ˆï¼Œå¦‚æœé€šè¿‡<code>npm</code>æŒ‡ä»¤é…ç½®ï¼Œåˆ™æ— éœ€å®‰è£…</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å…¨å±€å®‰è£…</span><span class="token function">npm</span> i<span class="token punctuation">(</span>install<span class="token punctuation">)</span> nrm -g<span class="token comment"># æ£€æµ‹æ˜¯å¦å®‰è£…æˆåŠŸ</span>nrm --version<span class="token comment"># åˆ—å‡ºå¯ç”¨çš„é•œåƒæº</span>nrm <span class="token function">ls</span><span class="token comment"># æµ‹è¯•é•œåƒåœ°å€é€Ÿåº¦</span>nrm <span class="token builtin class-name">test</span><span class="token comment"># åˆ‡æ¢åˆ°æŒ‡å®šé•œåƒ</span>nrm use <span class="token punctuation">[</span>é•œåƒåç§°<span class="token punctuation">]</span></code></pre><blockquote><h3 id="npmå…¨å±€é…ç½®åŠyarnå®‰è£…"><a href="#npmå…¨å±€é…ç½®åŠyarnå®‰è£…" class="headerlink" title="npmå…¨å±€é…ç½®åŠyarnå®‰è£…"></a><code>npm</code>å…¨å±€é…ç½®åŠ<code>yarn</code>å®‰è£…</h3></blockquote><ul><li>å®‰è£…<code>yarn</code></li></ul><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># [ä¸‹è½½é•œåƒå®‰è£…](https://classic.yarnpkg.com/en/docs/install#windows-stable)</span><span class="token comment"># npm å®‰è£…</span><span class="token function">npm</span> <span class="token function">install</span> --global <span class="token function">yarn</span><span class="token comment"># [2.x å®‰è£…ä½¿ç”¨](https://yarnpkg.com/getting-started/install)</span></code></pre><ul><li>é…ç½®<code>npm</code>åŠ<code>yarn</code>çš„<code>registry</code>ï¼š</li></ul><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># é»˜è®¤æº</span><span class="token function">npm</span> config <span class="token builtin class-name">set</span> registry https://registry.npmjs.org<span class="token function">yarn</span> config <span class="token builtin class-name">set</span> registry https://registry.yarnpkg.com<span class="token comment"># é…ç½®åˆ°å†…ç½‘ç¯å¢ƒ</span><span class="token function">npm</span> config --global <span class="token builtin class-name">set</span> registry http://172.xxx/repository/npm/<span class="token comment"># é…ç½®æ·˜å®é•œåƒ</span><span class="token comment"># (æˆªæ­¢22-5-31)</span><span class="token function">npm</span> config <span class="token builtin class-name">set</span> registry https://registry.npm.taobao.org<span class="token function">yarn</span> config <span class="token builtin class-name">set</span> registry https://registry.npm.taobao.org<span class="token comment"># new</span><span class="token function">npm</span> config <span class="token builtin class-name">set</span> registry https://registry.npmmirror.com<span class="token comment"># é…ç½®æºï¼Œä¸”åŒæ­¥å®‰è£…ä½¿ç”¨ cnpm</span><span class="token function">npm</span> <span class="token function">install</span> -g cnpm --registry<span class="token operator">=</span>https://registry.npmmirror.com<span class="token comment"># å¦‚æœå‘½ä»¤è¡Œä¿®æ”¹å¤±è´¥ - æ‰‹åŠ¨ä¿®æ”¹é…ç½® c:/ç”¨æˆ·/user/.npmrc æ–‡ä»¶</span><span class="token assign-left variable">registry</span><span class="token operator">=</span>http://172.xxx/repository/npm/<span class="token comment"># å…¶ä»–é•œåƒ</span><span class="token assign-left variable">CHROMEDRIVER_CDNURL</span><span class="token operator">=</span><span class="token string">"https://registry.npmmirror.com/-/binary/chromedriver"</span><span class="token assign-left variable">SASS_BINARY_SITE</span><span class="token operator">=</span><span class="token string">"https://registry.npmmirror.com/-/binary/node-sass"</span><span class="token assign-left variable">PUPPETEER_DOWNLOAD_HOST</span><span class="token operator">=</span><span class="token string">"https://registry.npmmirror.com/-/binary"</span><span class="token assign-left variable">NODEJS_ORG_MIRROR</span><span class="token operator">=</span><span class="token string">"https://registry.npmmirror.com/-/binary/node"</span><span class="token assign-left variable">NVM_NODEJS_ORG_MIRROR</span><span class="token operator">=</span><span class="token string">"https://registry.npmmirror.com/-/binary/node"</span></code></pre><ul><li>è®¾ç½®å…¨å±€å®‰è£…åŠç¼“å­˜è·¯å¾„</li></ul><p><code>é…ç½®ä½¿ç”¨ setï¼ŒæŸ¥çœ‹ä½¿ç”¨ getã€‚é™¤äº†æŒ‡ä»¤è®¾ç½®é…ç½®é¡¹å¤–ï¼Œä¹Ÿå¯æ‰‹åŠ¨æ·»åŠ é…ç½®ï¼Œæ–‡ä»¶ä½ç½®ï¼š~/.npmrc ~/.yarnrc</code></p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æ¸…é™¤ç¼“å­˜</span><span class="token function">npm</span> cache clean --force<span class="token function">yarn</span> cache clean<span class="token comment"># è®¾ç½®å…¨å±€å®‰è£…ä½ç½®</span><span class="token function">npm</span> config <span class="token builtin class-name">set</span> prefix <span class="token string">'C:\Users\xx\AppData\Roaming\npm'</span><span class="token function">yarn</span> config <span class="token builtin class-name">set</span> global-folder <span class="token string">"D:\yarn\yarnDate"</span><span class="token comment"># è®¾ç½®ç¼“å­˜è·¯å¾„ï¼Œé»˜è®¤åœ¨ c ç›˜</span><span class="token function">npm</span> config <span class="token builtin class-name">set</span> cache <span class="token string">"C:\Users\xx\AppData\Roaming<span class="token entity" title="\n">\n</span>pm_cache"</span><span class="token function">yarn</span> config <span class="token builtin class-name">set</span> cache-folder e:<span class="token punctuation">\</span>YarnCache<span class="token comment"># æŸ¥çœ‹é…ç½®ä¿¡æ¯ --global or -l</span><span class="token function">npm</span> config <span class="token function">ls</span><span class="token function">yarn</span> config list</code></pre>]]></content>
      
      
      <categories>
          
          <category> ç¯å¢ƒæ­å»º </category>
          
          <category> Node </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nvm </tag>
            
            <tag> node </tag>
            
            <tag> nrm </tag>
            
            <tag> npm </tag>
            
            <tag> yarn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo-Gitalk è¯„è®ºæ¨¡å—çš„è‡ªåŠ¨åŒ–åˆ›å»º</title>
      <link href="/posts/hexo-gitalk-auto-init/"/>
      <url>/posts/hexo-gitalk-auto-init/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><p>ç›®å‰å‡ ä¹æ‰€æœ‰çš„ <code>hexo</code> æ¡†æ¶éƒ½ä¸ºå¤§å®¶é›†æˆäº† <code>comment</code> è¯„è®ºæ¨¡å—ï¼Œæœ¬æ–‡ä¸»è¦é¢å‘çš„æ˜¯è¿™éƒ¨åˆ†å·²é›†æˆ <code>Gitalk</code> è¯„è®ºçš„åšå®¢ã€‚<del>å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡æ’ä»¶é›†æˆåˆ°æ²¡æœ‰æä¾› comment çš„ hexo ä¹Ÿæ˜¯å¯ä»¥çš„ ğŸ˜ŠğŸ˜ŠğŸ˜Š</del></p><p>åœ¨è¯¥æ¡†æ¶åŸºç¡€ä¸Šï¼Œå®Œæˆ <code>å†™æ–‡ç«  -&gt; æ–‡ç« å‘å¸ƒ -&gt; issue åˆå§‹åŒ– -&gt; å¯è¯„è®º</code> è¿™ä¸ªè‡ªåŠ¨åŒ–æµç¨‹ã€‚</p><p>é¿å…æ‰“å¼€æ–°å‘å¸ƒçš„åšå®¢æ–‡ç« åï¼Œ<strong>åº•éƒ¨æç¤º <code>æœªæ‰¾åˆ°ç›¸å…³çš„ Issues è¿›è¡Œè¯„è®º è¯·è”ç³»\***\***\* åˆå§‹åŒ–åˆ›å»º</code>ï¼Œéœ€è¦ç™»é™† <code>github</code>ï¼Œå®Œæˆåˆå§‹åŒ–åæ‰èƒ½ä½¿ç”¨</strong>ã€‚</p><p>â€‹ å’±æ€»ä¸èƒ½æ–°å†™ä¸€ç¯‡æ–‡ç« å°±å»ä»“åº“æ‰‹åŠ¨åˆå§‹åŒ– <code>issue</code> å§â€¦.æœ‰ç‚¹é˜”æ€• ğŸ¤ğŸ¤ğŸ¤</p><span id="more"></span><h3 id="è‡ªåŠ¨åŒ–åˆ›å»º-issues-è¯„è®ºä»“åº“"><a href="#è‡ªåŠ¨åŒ–åˆ›å»º-issues-è¯„è®ºä»“åº“" class="headerlink" title="è‡ªåŠ¨åŒ–åˆ›å»º issues è¯„è®ºä»“åº“"></a>è‡ªåŠ¨åŒ–åˆ›å»º <code>issues</code> è¯„è®ºä»“åº“</h3><h4 id="sitemap-ç«™ç‚¹åœ°å›¾"><a href="#sitemap-ç«™ç‚¹åœ°å›¾" class="headerlink" title="sitemap ç«™ç‚¹åœ°å›¾"></a><code>sitemap</code> ç«™ç‚¹åœ°å›¾</h4><p>ç«™ç‚¹åœ°å›¾æ˜¯ä¸€ç§æ–‡ä»¶ï¼Œæ‚¨å¯ä»¥é€šè¿‡è¯¥æ–‡ä»¶åˆ—å‡ºæ‚¨ç½‘ç«™ä¸Šçš„ç½‘é¡µï¼Œä»è€Œå°†æ‚¨ç½‘ç«™å†…å®¹çš„ç»„ç»‡æ¶æ„å‘ŠçŸ¥ <code>Google</code> å’Œå…¶ä»–æœç´¢å¼•æ“ã€‚æœç´¢å¼•æ“ç½‘é¡µæŠ“å–å·¥å…·ä¼šè¯»å–æ­¤æ–‡ä»¶ï¼Œä»¥ä¾¿æ›´åŠ æ™ºèƒ½åœ°æŠ“å–æ‚¨çš„ç½‘ç«™ ã€‚</p><p>â€‹ ç®€è¨€ä¹‹ï¼Œå°±æ˜¯é€šè¿‡ <code>sitemap</code>ï¼Œè®°å½•ä¸‹å½“å‰åšå®¢çš„æ‰€æœ‰åœ°å€é“¾æ¥(åŒ…æ‹¬æ‰€æœ‰çš„æ–‡ç« )ï¼Œç”¨äºåæœŸè‡ªåŠ¨åŒ–åˆ›å»ºã€‚</p><ul><li>é€šè¿‡æ’ä»¶ç”Ÿæˆ <code>sitemap</code> ( åœ¨ä½  <code>hexo</code> çš„æ ¹ç›®å½•ï¼Œæ‰§è¡Œä¸‹é¢ä¸¤ä¸ªå‘½ä»¤æ¥å®‰è£…é’ˆå¯¹ <code>google</code> å’Œç™¾åº¦çš„æ’ä»¶ )ï¼š</li></ul><blockquote><p><code>npm i hexo-generator-sitemap hexo-generator-baidu-sitemap --save</code></p></blockquote><ul><li>æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> é…ç½® <code>sitemap</code> æ˜ å°„</li></ul><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># hexo sitemapç½‘ç«™åœ°å›¾</span><span class="token key atrule">sitemap</span><span class="token punctuation">:</span>  <span class="token key atrule">path</span><span class="token punctuation">:</span> sitemap.xml<span class="token key atrule">baidusitemap</span><span class="token punctuation">:</span>  <span class="token key atrule">path</span><span class="token punctuation">:</span> baidusitemap.xml</code></pre><ul><li>æ‰§è¡Œ <code>hexo generate</code> , <code>public</code> æ–‡ä»¶å¤¹ä¸‹é¢ï¼Œå°±ä¼šç”Ÿæˆ <code>sitemap.xml</code>å’Œ<code>baidusitemap.xml </code></li></ul><h4 id="access-token-è·å–"><a href="#access-token-è·å–" class="headerlink" title="access token è·å–"></a><code>access token</code> è·å–</h4><p>â€‹ æœ‰äº† <code>sitemap</code> åï¼Œ æˆ‘ä»¬éœ€è¦è°ƒç”¨ <code>github</code> çš„ç›¸å…³æ¥å£ï¼Œ<code>token</code> å¿…ä¸å¯å°‘ï¼Œ<code>token</code> æ€ä¹ˆè·å–å‘¢ï¼Ÿ åˆ›å»ºä¸€ä¸ªå°±æ˜¯äº†</p><ul><li><a href="https://github.com/settings/tokens/new">åˆ›å»ºä¸€ä¸ª <code>access token</code></a></li><li><code>access token</code> é…ç½®é¡¹ï¼š <code>Note</code> æè¿°(éšä¾¿å†™), <code>Select scopes / repo</code> å‹¾é€‰ <code>repo:status repo_deployment public_repo</code></li><li>å°†ç”Ÿæˆçš„ <code>token</code> è®°å½•ä¸‹æ¥ï¼Œæ–¹ä¾¿è‡ªåŠ¨åŒ–æ—¶ä½¿ç”¨</li></ul><h4 id="æ·»åŠ è„šæœ¬æ–‡ä»¶"><a href="#æ·»åŠ è„šæœ¬æ–‡ä»¶" class="headerlink" title="æ·»åŠ è„šæœ¬æ–‡ä»¶"></a>æ·»åŠ è„šæœ¬æ–‡ä»¶</h4><ul><li>å®‰è£…è„šæœ¬æ–‡ä»¶ä¾èµ–åŒ…</li></ul><blockquote><p><code>npm i request xml-parser yamljs cheerio --save</code></p></blockquote><ul><li>æ·»åŠ  <code>comment.js</code> è„šæœ¬ä»£ç ï¼ˆéƒ¨åˆ†ä»£ç éœ€è¦ç»“åˆè‡ªèº«æƒ…å†µä¿®æ”¹ï¼‰</li></ul><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> request <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'request'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> xmlParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'xml-parser'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token constant">YAML</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'yamljs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> cheerio <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cheerio'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// æ ¹æ®è‡ªå·±çš„æƒ…å†µè¿›è¡Œé…ç½®</span><span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">'GitHub ç”¨æˆ·å'</span><span class="token punctuation">,</span> <span class="token comment">// GitHub ç”¨æˆ·å</span>  <span class="token literal-property property">token</span><span class="token operator">:</span> <span class="token string">'GitHub Token'</span><span class="token punctuation">,</span> <span class="token comment">// GitHub Token</span>  <span class="token literal-property property">repo</span><span class="token operator">:</span> <span class="token string">'xxx.github.io'</span><span class="token punctuation">,</span> <span class="token comment">// å­˜æ”¾ issuesçš„gitä»“åº“</span>  <span class="token comment">// sitemap.xmlçš„è·¯å¾„ï¼Œcommit.jsæ”¾ç½®åœ¨æ ¹ç›®å½•ä¸‹ï¼Œæ— éœ€ä¿®æ”¹ï¼Œå…¶ä»–æƒ…å†µè‡ªè¡Œå¤„ç†</span>  <span class="token literal-property property">sitemapUrl</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./public/sitemap.xml'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token literal-property property">kind</span><span class="token operator">:</span> <span class="token string">'Gitalk'</span><span class="token punctuation">,</span> <span class="token comment">// "Gitalk" or "Gitment"</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">let</span> issuesUrl <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://api.github.com/repos/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>config<span class="token punctuation">.</span>username<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>config<span class="token punctuation">.</span>repo<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">/issues?access_token=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>config<span class="token punctuation">.</span>token<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><span class="token keyword">let</span> requestGetOpt <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>issuesUrl<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&amp;page=1&amp;per_page=1000</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>  <span class="token literal-property property">json</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token string-property property">'User-Agent'</span><span class="token operator">:</span> <span class="token string">'github-user'</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">let</span> requestPostOpt <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token operator">...</span>requestGetOpt<span class="token punctuation">,</span>  <span class="token literal-property property">url</span><span class="token operator">:</span> issuesUrl<span class="token punctuation">,</span>  <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>  <span class="token literal-property property">form</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å¼€å§‹åˆå§‹åŒ–è¯„è®º...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å¼€å§‹æ£€ç´¢é“¾æ¥ï¼Œè¯·ç¨ç­‰...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">let</span> websiteConfig <span class="token operator">=</span> <span class="token constant">YAML</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>      fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./_config.yml'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> urls <span class="token operator">=</span> <span class="token function">sitemapXmlReader</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>sitemapUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">å…±æ£€ç´¢åˆ°</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>urls<span class="token punctuation">.</span>length<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">ä¸ªé“¾æ¥</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å¼€å§‹è·å–å·²ç»åˆå§‹åŒ–çš„issues:'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> issues <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">send</span><span class="token punctuation">(</span>requestGetOpt<span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">å·²ç»å­˜åœ¨</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>issues<span class="token punctuation">.</span>length<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">ä¸ªissues</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> notInitIssueLinks <span class="token operator">=</span> urls<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">link</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> <span class="token operator">!</span>issues<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>        link <span class="token operator">=</span> <span class="token function">removeProtocol</span><span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> item<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>notInitIssueLinks<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">æœ¬æ¬¡æœ‰</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>notInitIssueLinks<span class="token punctuation">.</span>length<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">ä¸ªé“¾æ¥éœ€è¦åˆå§‹åŒ–issueï¼š</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>notInitIssueLinks<span class="token punctuation">)</span><span class="token punctuation">;</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å¼€å§‹æäº¤åˆå§‹åŒ–è¯·æ±‚, å¤§çº¦éœ€è¦40ç§’...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">/**       * éƒ¨ç½²å¥½ç½‘ç«™åï¼Œç›´æ¥æ‰§è¡Œstartï¼Œæ–°å¢æ–‡ç« å¹¶ä¸ä¼šç”Ÿæˆè¯„è®º       * ç»æµ‹è¯•ï¼Œæœ€å°‘éœ€è¦ç­‰å¾…40ç§’ï¼Œæ‰å¯ä»¥æ­£ç¡®ç”Ÿæˆï¼Œ æ€€ç–‘è·Ÿgithubçš„apiæœ‰å…³ç³»ï¼Œæ²¡æœ‰æ‰¾åˆ°å®é”¤       */</span>      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>        <span class="token keyword">let</span> initRet <span class="token operator">=</span> <span class="token keyword">await</span> notInitIssueLinks<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>          <span class="token keyword">let</span> html <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token operator">...</span>requestGetOpt<span class="token punctuation">,</span> <span class="token literal-property property">url</span><span class="token operator">:</span> item <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token keyword">let</span> title <span class="token operator">=</span> cheerio<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token keyword">let</span> pathLabel <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">.</span>path<span class="token punctuation">;</span>          <span class="token keyword">let</span> body <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;br>&lt;br></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>websiteConfig<span class="token punctuation">.</span>description<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>          <span class="token keyword">let</span> form <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> body<span class="token punctuation">,</span> <span class="token literal-property property">labels</span><span class="token operator">:</span> <span class="token punctuation">[</span>config<span class="token punctuation">.</span>kind<span class="token punctuation">,</span> pathLabel<span class="token punctuation">]</span><span class="token punctuation">,</span> title <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token keyword">return</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token operator">...</span>requestPostOpt<span class="token punctuation">,</span> form <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">å·²å®Œæˆ</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>initRet<span class="token punctuation">.</span>length<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">ä¸ªï¼</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å¯ä»¥æ„‰å¿«çš„å‘è¡¨è¯„è®ºäº†ï¼'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">40000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æœ¬æ¬¡å‘å¸ƒæ— æ–°å¢é¡µé¢ï¼Œæ— éœ€åˆå§‹åŒ–issue!!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">åˆå§‹åŒ–issueå‡ºé”™ï¼Œé”™è¯¯å¦‚ä¸‹ï¼š</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">sitemapXmlReader</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">let</span> data <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">let</span> sitemap <span class="token operator">=</span> <span class="token function">xmlParser</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> sitemap<span class="token punctuation">.</span>root<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">let</span> loc <span class="token operator">=</span> url<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> item<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'loc'</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> loc<span class="token punctuation">.</span>content<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">removeProtocol</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> url<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>url<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">request</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> response<span class="token punctuation">,</span> body</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">resolve</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>        <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><ul><li>ä¿®æ”¹ä»£ç ä¸­ <code>config</code> éƒ¨åˆ† <code>username</code>ã€ <code>token</code>ã€<code> repo</code> (å­˜æ”¾ <code>issues</code> çš„ä»“åº“åç§°)</li></ul><h4 id="è„šæœ¬æ‰§è¡Œ"><a href="#è„šæœ¬æ‰§è¡Œ" class="headerlink" title="è„šæœ¬æ‰§è¡Œ"></a>è„šæœ¬æ‰§è¡Œ</h4><ul><li>æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå°±å¯ä»¥éƒ¨ç½²ç«™ç‚¹ï¼Œå¹¶åˆå§‹åŒ–æ‰€æœ‰çš„è¯„è®ºäº†ã€‚</li></ul><pre class="language-bash" data-language="bash"><code class="language-bash">hexo cleanhexo generatehexo deploy<span class="token function">node</span> ./comment.js</code></pre><ul><li>ä¹Ÿå¯ä»¥é€šè¿‡åœ¨ç«™ç‚¹æ ¹ç›®å½•çš„ <code>package.json</code> æ–‡ä»¶ä¸­ï¼Œæ–°å»º <code>npm</code> è„šæœ¬</li></ul><pre class="language-json" data-language="json"><code class="language-json"><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"talk"</span><span class="token operator">:</span> <span class="token string">"hexo clean &amp;&amp; hexo generate &amp;&amp; hexo deploy &amp;&amp; node ./comment.js"</span><span class="token punctuation">&#125;</span></code></pre><ul><li>æ‰§è¡Œ <code>yarn talk</code> å³å¯ä¸€é”®å®Œæˆæ‰€æœ‰æ“ä½œ</li></ul><h4 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h4><p>â€‹ ç¬¬ä¸€æ­¥ä¸­çš„ <code>sitemap</code> æ’ä»¶ä¼šç”Ÿæˆçš„ <code>sitemap.xml</code> ä¼šåŒ…å«<strong>å…¨éƒ¨çš„ç•Œé¢</strong>ï¼ŒåŒ…æ‹¬æ ‡ç­¾é¡µã€å…³äºé¡µç­‰ï¼Œæ‰§è¡Œä¸Šé¢çš„ä»£ç ä¹Ÿä¼šå¯¹è¿™äº›é¡µé¢ç”Ÿæˆè¯„è®ºæ¡†(ä¹Ÿå°±æ˜¯ <code>issue</code>) ï¼Œæˆ‘åœ¨åŸä½œè€…çš„åŸºç¡€ä¸Šæ·»åŠ äº†æ–‡ç« çš„è¿‡æ»¤é€»è¾‘ï¼š</p><ul><li>è¿‡æ»¤ <code>sitemap</code> ä¸­éæ–‡ç« çš„é“¾æ¥</li></ul><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// comment.js 42 è¡Œ</span><span class="token keyword">const</span> oUrls <span class="token operator">=</span> <span class="token function">sitemapXmlReader</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>sitemapUrl<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// oUrls å³ä¸ºåˆ†æå‡ºçš„ç½‘ç«™é“¾æ¥ å­—ç¬¦ä¸²æ•°ç»„ --- æ·»åŠ è‡ªèº«çš„è¿‡æ»¤é€»è¾‘</span><span class="token comment">// æˆ‘è¿™é‡Œï¼Œè®¿é—®æ¯ä¸ªæ–‡ç« æ—¶ï¼Œé“¾æ¥ä¸Šéƒ½æœ‰æ—¶é—´ä¿¡æ¯ï¼Œå³ 2021/xx/xx æŒ‰ç…§æ—¶é—´æ ¼å¼è¿‡æ»¤æ‰émdæ–‡æ¡£çš„é“¾æ¥</span><span class="token keyword">const</span> urls <span class="token operator">=</span> oUrls<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">l</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\/(\d&#123;4&#125;)\/(\d&#123;2&#125;)\/(\d&#123;2&#125;)\/</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><ul><li><code>id</code> è§„åˆ™ä¸ä¸€æ ·å¯¼è‡´çš„ <code>issues-lable</code> ä¸æ–‡ç« ä¸åŒ¹é…</li></ul><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// åœ¨ç”Ÿæˆ gitalkæ—¶ï¼Œæ¯ä¸€ç¯‡æ–‡ç« æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ idï¼Œ è§„åˆ™æ˜¯ä¸åŒä¸»é¢˜è‡ªå·±å®šçš„ å³ï¼š new Gitalk ä¼ å…¥çš„ id è§„åˆ™</span><span class="token comment">// è°ƒæ•´ comment.js 66 è¡Œ(3-hexo ä¸»é¢˜ æ–‡ç« id é€šè¿‡ decodeURIè§£è¿‡ç )</span></code></pre><pre class="language-diff" data-language="diff"><code class="language-diff"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> let pathLabel = url.parse(item).path;</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> let pathLabel = decodeURI(url.parse(item).pathname);</span></span></code></pre><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://daihaoxin.github.io/post/322747ae.html"><code>nodejs</code> ç‰ˆæœ¬çš„ <code>Gitalk/Gitment</code> è¯„è®ºè‡ªåŠ¨åˆå§‹åŒ–</a></p>]]></content>
      
      
      <categories>
          
          <category> æ”¶è—å®‰åˆ© </category>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> gitalk </tag>
            
            <tag> issue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäº Gitalk å®ç°è¯„è®ºåŠŸèƒ½</title>
      <link href="/posts/hexo-gitalk-generate/"/>
      <url>/posts/hexo-gitalk-generate/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="å…³äº-gitalk"><a href="#å…³äº-gitalk" class="headerlink" title="å…³äº gitalk"></a>å…³äº gitalk</h3><p><a href="https://github.com/gitalk/gitalk">Gitalk</a> æ˜¯ä¸€ä¸ªåŸºäº <code>GitHub Issue</code> å’Œ <code>Preact</code> å¼€å‘çš„è¯„è®ºæ’ä»¶ã€‚ <a href="https://gitalk.github.io/"> https://gitalk.github.io/ </a></p><h4 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h4><ul><li>ä½¿ç”¨ <code>GitHub</code> ç™»å½•</li><li>æ”¯æŒå¤šè¯­è¨€ <code>[en, zh-CN, zh-TW, es-ES, fr, ru, de, pl, ko, fa, ja]</code></li><li>æ”¯æŒä¸ªäººæˆ–ç»„ç»‡</li><li>æ— å¹²æ‰°æ¨¡å¼ï¼ˆè®¾ç½® <code>distractionFreeMode</code> ä¸º <code>true</code> å¼€å¯ï¼‰</li><li>å¿«æ·é”®æäº¤è¯„è®º ï¼ˆ<code>cmd|ctrl + enter</code>ï¼‰</li></ul><span id="more"></span><h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><ul><li><code>cdn</code> æ–¹å¼ç›´æ¥å¼•å…¥</li></ul><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- or --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/gitalk/dist/gitalk.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/gitalk/dist/gitalk.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><ul><li><code>npm</code> æ–¹å¼å®‰è£…</li></ul><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> i --save gitalk</code></pre><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">import</span> <span class="token string">'gitalk/dist/gitalk.css'</span><span class="token function">import</span> Gitalk from <span class="token string">'gitalk'</span></code></pre><h4 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h4><ul><li>é€šè¿‡ <code>javascript</code> ä»£ç ç”Ÿæˆæ’ä»¶</li></ul><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!-- æ·»åŠ å®¹å™¨ ç”¨äºæ˜¾ç¤ºè¯„è®º --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gitalk-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- ä»£ç ç”Ÿæˆ gitalk æ’ä»¶ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">  <span class="token keyword">var</span> gitalk <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gitalk</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>    <span class="token literal-property property">clientID</span><span class="token operator">:</span> <span class="token string">'GitHub Application Client ID'</span><span class="token punctuation">,</span>    <span class="token literal-property property">clientSecret</span><span class="token operator">:</span> <span class="token string">'GitHub Application Client Secret'</span><span class="token punctuation">,</span>    <span class="token literal-property property">repo</span><span class="token operator">:</span> <span class="token string">'GitHub repo'</span><span class="token punctuation">,</span>    <span class="token literal-property property">owner</span><span class="token operator">:</span> <span class="token string">'GitHub repo owner'</span><span class="token punctuation">,</span>    <span class="token literal-property property">admin</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'GitHub repo owner and collaborators, only these guys can initialize github issues'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token literal-property property">id</span><span class="token operator">:</span> location<span class="token punctuation">.</span>pathname<span class="token punctuation">,</span> <span class="token comment">// Ensure uniqueness and length less than 50</span>    <span class="token literal-property property">distractionFreeMode</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// Facebook-like distraction free mode</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// å®ä¾‹æ–¹æ³•ï¼š render åˆå§‹åŒ–æ¸²æŸ“å¹¶æŒ‚è½½æ’ä»¶ã€‚</span>  gitalk<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'gitalk-container'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><ul><li>é€šè¿‡ç»„ä»¶æ–¹å¼ä½¿ç”¨</li></ul><pre class="language-tsx" data-language="tsx"><code class="language-tsx"><span class="token keyword">import</span> GitalkComponent <span class="token keyword">from</span> <span class="token string">'gitalk/dist/gitalk-component'</span><span class="token punctuation">;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">GitalkComponent</span></span>  <span class="token attr-name">options</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span>    clientID<span class="token operator">:</span> <span class="token string">'...'</span><span class="token punctuation">,</span>    <span class="token comment">// ...</span>    <span class="token comment">// è®¾ç½®é¡¹</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></span><span class="token punctuation">/></span></span><span class="token punctuation">;</span></code></pre><h4 id="é…ç½®é¡¹"><a href="#é…ç½®é¡¹" class="headerlink" title="é…ç½®é¡¹"></a>é…ç½®é¡¹</h4><p><code>éå¿…é¡»é¡¹å‡å­˜åœ¨é»˜è®¤å€¼ã€‚</code> <a href="https://github.com/gitalk/gitalk/blob/master/readme-cn.md">äº†è§£æ›´å¤š</a></p><table><thead><tr><th>key</th><th>type</th><th>required</th><th>description</th></tr></thead><tbody><tr><td><strong>clientID</strong></td><td>String</td><td><strong>å¿…é¡»</strong></td><td>GitHub Application Client ID.</td></tr><tr><td><strong>clientSecret</strong></td><td>String</td><td><strong>å¿…é¡»</strong></td><td>GitHub Application Client Secret.</td></tr><tr><td><strong>repo</strong></td><td>String</td><td><strong>å¿…é¡»</strong></td><td>GitHub repository.</td></tr><tr><td><strong>owner</strong></td><td>String</td><td><strong>å¿…é¡»</strong></td><td>GitHub repository æ‰€æœ‰è€…ï¼Œå¯ä»¥æ˜¯ä¸ªäººæˆ–è€…ç»„ç»‡ã€‚</td></tr><tr><td><strong>admin</strong></td><td>Array</td><td><strong>å¿…é¡»</strong></td><td>GitHub repository çš„æ‰€æœ‰è€…å’Œåˆä½œè€… (å¯¹è¿™ä¸ª repository æœ‰å†™æƒé™çš„ç”¨æˆ·)ã€‚</td></tr><tr><td><strong>id</strong></td><td>String</td><td>éå¿…é¡»</td><td>é¡µé¢çš„å”¯ä¸€æ ‡è¯†ã€‚é•¿åº¦å¿…é¡»å°äº 50ï¼ŒDefault: <code>location.href</code>.</td></tr><tr><td><strong>number</strong></td><td>Number</td><td>éå¿…é¡»</td><td>é¡µé¢çš„ issue ID æ ‡è¯†ï¼Œè‹¥æœªå®šä¹‰<code>number</code>å±æ€§åˆ™ä¼šç”¨<code>id</code>å®šä½ã€‚</td></tr><tr><td><strong>labels</strong></td><td>Array</td><td>éå¿…é¡»</td><td>GitHub issue çš„æ ‡ç­¾ã€‚</td></tr><tr><td><strong>title</strong></td><td>String</td><td>éå¿…é¡»</td><td>GitHub issue çš„æ ‡é¢˜ã€‚</td></tr><tr><td><strong>body</strong></td><td>String</td><td>éå¿…é¡»</td><td>GitHub issue çš„å†…å®¹ã€‚</td></tr><tr><td><strong>language</strong></td><td>String</td><td>éå¿…é¡»</td><td>è¯­è¨€æ”¯æŒ [en, zh-CN, zh-TW, es-ES, fr, ru, de, pl, ko, fa, ja]ã€‚</td></tr><tr><td><strong>perPage</strong></td><td>Number</td><td>éå¿…é¡»</td><td>æ¯æ¬¡åŠ è½½çš„æ•°æ®å¤§å°ï¼Œæœ€å¤š 100ã€‚</td></tr><tr><td><strong>distractionFreeMode</strong></td><td>Boolean</td><td>éå¿…é¡»</td><td>ç±»ä¼¼ Facebook è¯„è®ºæ¡†çš„å…¨å±é®ç½©æ•ˆæœ</td></tr><tr><td><strong>pagerDirection</strong></td><td>String</td><td>éå¿…é¡»</td><td>è¯„è®ºæ’åº <code>last</code>ä¸ºæŒ‰è¯„è®ºåˆ›å»ºæ—¶é—´å€’åºï¼Œ<code>first</code>æ­£åºã€‚</td></tr><tr><td><strong>createIssueManually</strong></td><td>Boolean</td><td>éå¿…é¡»</td><td>å¦‚æœå½“å‰é¡µé¢æ²¡æœ‰ç›¸åº”çš„ isssue ä¸”ç™»å½•çš„ç”¨æˆ·å±äº adminï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ›å»º issueã€‚å¦‚æœè®¾ç½®ä¸º <code>true</code>ï¼Œåˆ™æ˜¾ç¤ºä¸€ä¸ªåˆå§‹åŒ–é¡µé¢ï¼Œåˆ›å»º issue éœ€è¦ç‚¹å‡» <code>init</code> æŒ‰é’®ã€‚</td></tr><tr><td><strong>proxy</strong></td><td>String</td><td>éå¿…é¡»</td><td>GitHub oauth è¯·æ±‚åˆ°åå‘ä»£ç†ï¼Œä¸ºäº†æ”¯æŒ CORSã€‚</td></tr><tr><td><strong>flipMoveOptions</strong></td><td>Object</td><td>éå¿…é¡»</td><td>è¯„è®ºåˆ—è¡¨çš„åŠ¨ç”»</td></tr><tr><td><strong>enableHotKey</strong></td><td>Boolean</td><td>éå¿…é¡»</td><td>å¯ç”¨å¿«æ·é”®(cmd|ctrl + enter) æäº¤è¯„è®º</td></tr></tbody></table><p><code>repo: github ä»“åº“çš„åç§°(æ³¨æ„ä¸æ˜¯åœ°å€) ...</code></p><p><code>å¿…é¡»é¡¹ clientIDã€clientSecret æ˜¯é€šè¿‡ Github Appã€OAuth App åˆ›å»ºç”Ÿæˆçš„ï¼Œæ€ä¹ˆåˆ›å»ºå‘¢?</code></p><h3 id="å…³äº-Github-Appã€OAuth-App"><a href="#å…³äº-Github-Appã€OAuth-App" class="headerlink" title="å…³äº Github Appã€OAuth App"></a>å…³äº <code>Github Appã€OAuth App</code></h3><p>å®˜æ–¹çš„è¯´æ³•ï¼š</p><blockquote><p><code>GitHub Apps are first-class actors within GitHub. A GitHub App acts on its own behalf, taking actions via the API directly using its own identity, which means you don&#39;t need to maintain a bot or service account as a separate user.</code></p></blockquote><p>ç®€è¨€ä¹‹å°±æ˜¯ï¼š é€šè¿‡ <code>Github</code> æä¾›çš„è®¤è¯ä¿¡æ¯å»è°ƒç”¨ <code>Github API</code>ã€‚</p><ul><li>ä¸¤è€…å¼‚åŒç‚¹ï¼š</li></ul><p>â€‹ <code>OAuth App</code> ä½¿ç”¨æ–¹å¼å’Œ <code>Github App</code> éå¸¸ç±»ä¼¼ï¼Œæœ€å¤§çš„ä¸åŒç‚¹æ˜¯ <code>OAuth App</code> æ‰€è·å–çš„æƒé™éƒ½æ˜¯<strong>å›ºå®š</strong>ä¸”<strong>åªè¯»</strong>çš„ï¼Œç”¨æˆ·åªèƒ½è¯»å–å›ºå®šçš„æ•°æ®è€Œä¸èƒ½ä¿®æ”¹æ•°æ®ï¼›è€Œ <code>Github App</code> å‡ ä¹å¯ä»¥è·å–<strong>Github</strong>æä¾›çš„æ‰€æœ‰åŠŸèƒ½æƒé™ï¼Œä¸”æ‰€è·å–çš„æƒé™å¯ä»¥è¢«è®¾å®šä¸ºâ€œåªè¯»â€ï¼Œâ€œå¯è¯»å¯å†™â€å’Œâ€œç¦æ­¢è®¿é—®â€ï¼Œå¯¹äºæƒé™çš„æˆæƒç²’åº¦ä¼šæ›´ç»†ã€‚</p><h3 id="ç¬¬ä¸‰æ–¹ç™»å½•çš„åŸç†"><a href="#ç¬¬ä¸‰æ–¹ç™»å½•çš„åŸç†" class="headerlink" title="ç¬¬ä¸‰æ–¹ç™»å½•çš„åŸç†"></a>ç¬¬ä¸‰æ–¹ç™»å½•çš„åŸç†</h3><p><code>Github App</code> å¯ä»¥å…å»ç”¨æˆ·åœ¨ç¬¬ä¸‰æ–¹é¡µé¢è¾“å…¥è´¦å·å¯†ç æˆ–è€… <code>Token</code> çš„æ“ä½œè€Œå®Œæˆæˆæƒï¼ŒåŸç†ï¼š</p><ul><li><p><code>A</code> ç½‘ç«™è·³è½¬åˆ° <code>Github</code> çš„æˆæƒé¡µé¢ã€‚</p></li><li><p><code>Github</code> æˆæƒé¡µé¢è¯¢é—®ç”¨æˆ·ï¼šâ€œæ˜¯å¦å…è®¸ <code>A</code> ç½‘ç«™è·å–ä¸‹åˆ—æƒé™â€ï¼Œç”¨æˆ·ç‚¹å‡»â€œå…è®¸â€ï¼Œå–å¾—æˆæƒç ã€‚</p></li><li><p><code>Github</code> æˆæƒé¡µé¢é‡å®šå‘å› <code>A</code> ç½‘ç«™ï¼ŒåŒæ—¶åœ¨ <code>URL</code> ä¸Šå¸¦ä¸Šæˆæƒç ã€‚</p></li><li><p><code>A</code> ç½‘ç«™é€šè¿‡ <code>URL</code> ä¸Šçš„æˆæƒç å¾€ <code>Github</code> å–å› <code>Token</code>ã€‚</p></li><li><p><code>A</code> ç½‘ç«™ä½¿ç”¨è¿™ä¸ª <code>Token</code> å»è°ƒç”¨ <code>Github API</code>ã€‚</p></li></ul><p>è¦å®Œæˆä¸Šè¿°çš„æµç¨‹ï¼Œé¦–å…ˆå¿…é¡»å…ˆæ³¨å†Œä¸€ä¸ª <code>Github App</code>ã€‚</p><h3 id="æ·»åŠ -gitalk-è¯„è®º"><a href="#æ·»åŠ -gitalk-è¯„è®º" class="headerlink" title="æ·»åŠ  gitalk è¯„è®º"></a>æ·»åŠ  <code>gitalk</code> è¯„è®º</h3><h4 id="åˆ›å»ºä»“åº“"><a href="#åˆ›å»ºä»“åº“" class="headerlink" title="åˆ›å»ºä»“åº“"></a>åˆ›å»ºä»“åº“</h4><p><code>gitalk æ˜¯åŸºäº Github çš„ Issueçš„ï¼Œéœ€è¦æŒ‡å®šä»“åº“æ¥æ‰¿è½½è¯„è®ºï¼Œ å½“ç„¶è¿™ä¸ªä»“åº“å¯ä»¥æ˜¯ä½ ç°æœ‰çš„ blog ä»“åº“ï¼Œä¹Ÿå¯ä»¥å•ç‹¬åˆ›å»ºã€‚</code></p><h4 id="åˆ›å»º-OAuth-App"><a href="#åˆ›å»º-OAuth-App" class="headerlink" title="åˆ›å»º OAuth App"></a>åˆ›å»º <code>OAuth App</code></h4><p><code>åˆ›å»ºæˆåŠŸåç”Ÿæˆ clientIDã€clientSecret å‡­è¯ï¼Œä¾› hexo è·å–ç”¨äºè°ƒç”¨ github-api çš„ token.</code></p><ul><li><strong>ç™»å½•</strong> -&gt; ç‚¹å‡»å¤´åƒè¿›å…¥ <strong>Settings</strong> -&gt; ç‚¹å‡»è¿›å…¥ <strong>Developer settings</strong> -&gt; ç‚¹å‡»å·¦ä¾§ <strong>OAuth App</strong>é¢æ¿ -&gt; ç‚¹å‡» <strong>New OAuth App</strong></li><li>or <a href="https://github.com/settings/applications/new">é“¾æ¥</a></li></ul><p><a href="/images/posts/hexo-gitalk-generate/p1.png"><img src="/images/posts/hexo-gitalk-generate/p1.png" alt="hexo-gitalk-generate-p1" loading="lazy"></a></p><h4 id="é›†æˆæ’ä»¶"><a href="#é›†æˆæ’ä»¶" class="headerlink" title="é›†æˆæ’ä»¶"></a>é›†æˆæ’ä»¶</h4><p><em>éƒ¨åˆ† <code>hexo</code> æ¡†æ¶å·²ç»é›†æˆäº† <code>gitalk</code> æ’ä»¶èµ„æºï¼Œåªéœ€è¦å¼€å¯é…ç½®å°±å¯ä»¥äº†ï¼Œå¦‚æœæ˜¯ç”¨äºåˆ«çš„ç³»ç»Ÿæˆ–åšå®¢ï¼Œå¯ä»¥é€šè¿‡ä¸Šé¢çš„â€œ<code>gitalk</code> å®‰è£…ä½¿ç”¨â€ å®Œæˆé›†æˆ</em>.</p><h3 id="è¿‡ç¨‹é—®é¢˜è®°å½•"><a href="#è¿‡ç¨‹é—®é¢˜è®°å½•" class="headerlink" title="è¿‡ç¨‹é—®é¢˜è®°å½•"></a>è¿‡ç¨‹é—®é¢˜è®°å½•</h3><p>æŒ‰ç€æµç¨‹ï¼Œä¸€æ­¥ä¸€æ­¥å°å¿ƒç¿¼ç¿¼çš„å®Œæˆæ‰€æœ‰é…ç½®ï¼Œé‡åˆ°äº†ä¸€äº›å‘ï¼Œæœ‰å› ä¸ºè‡ªå·± sb å¯¼è‡´çš„é—®é¢˜ï¼Œä¹Ÿæœ‰å› ä¸ºç‰ˆæœ¬å¯¼è‡´çš„é—®é¢˜.</p><ul><li><code>Error: Not Found.</code></li></ul><p>å‡ºç°è¿™ä¸ªç°è±¡ï¼Œæ‰“å¼€è°ƒè¯•æ¨¡å¼å‘ç°ï¼š<code>issues</code> æŠ¥é”™ï¼ˆæ‰¾ä¸åˆ°é…ç½®ä¸­å¡«å†™çš„ä»“åº“ï¼‰ï¼ŒéªŒè¯ï¼š æµè§ˆå™¨æ‰“å¼€ <code>https://github.com/ç”¨æˆ·å/ä½ é…ç½®çš„ä»“åº“åç§°</code>, è§‚å¯Ÿæ˜¯å¦èƒ½å¤Ÿè®¿é—®</p><ul><li>æ‰“å¼€å³æ˜¾ç¤ºï¼šæœªæ‰¾åˆ°ç›¸å…³çš„ <code>Issues</code> è¿›è¡Œè¯„è®º è¯·è”ç³»<strong>***</strong> åˆå§‹åŒ–åˆ›å»º(åŒæ—¶æ¥å£æŠ¥é”™)</li></ul><p>â€‹ å¼€å§‹æˆ‘ä»¥ä¸ºæ˜¯çœŸçš„æ²¡æœ‰åˆå§‹åŒ–åˆ›å»ºå¯¼è‡´çš„ï¼Œç‚¹å‡»æˆæƒåï¼Œ<code>redirect</code> å›æ¥ è¯„è®ºè¿™ä¸ªåœ°æ–¹ä¸€ç›´ <code>loading</code> ç„¶åæŠ¥é”™ <code>403</code>ã€‚</p><p>â€‹ æ‰“å¼€è°ƒè¯•æ¨¡å¼ï¼š <code>issues</code> æ¥å£æ­£å¸¸ï¼Œæ•°æ®ä¸ºç©º(ç°åœ¨è¿˜æ²¡æœ‰è¯„è®ºæ•°æ®ï¼Œæ­£å¸¸),è¯´æ˜ä»“åº“æ²¡æœ‰é—®é¢˜ï¼Œæ˜¯åˆ›å»ºå¥½çš„ï¼Œç»§ç»­è§‚å¯Ÿæœ‰æ²¡æœ‰æ¥å£æŠ¥é”™: <code>user</code> æ¥å£æŠ¥é”™ï¼Œè¯´æ˜é…ç½®çš„ <code>github</code> è´¦å·åœ¨ç™»å½•è¿‡ç¨‹ä¸­å‡ºäº†é—®é¢˜ï¼Œæ²¡æœ‰ç™»å½•æˆåŠŸï¼Œ <code>access_token</code> æŠ¥é”™ <code>403</code>ã€‚</p><p>â€‹ é€šè¿‡æŸ¥é˜…ï¼Œæœ€åå‘ç°äº†è¿™ä¸ªï¼š</p><blockquote><p><code>PSA: Public demo server (cors-anywhere.herokuapp.com) will be very limited by January 2021, 31st</code></p><p><code>The demo server of CORS Anywhere (cors-anywhere.herokuapp.com) is meant to be a demo of this project. But abuse has become so common that the platform where the demo is hosted (Heroku) has asked me to shut down the server, despite efforts to counter the abuse (rate limits in [#45](https://github.com/Rob--W/cors-anywhere/issues/45) and [#164](https://github.com/Rob--W/cors-anywhere/issues/164), and blocking other forms of requests). Downtime becomes increasingly frequent (e.g. recently [#300](https://github.com/Rob--W/cors-anywhere/issues/300), [#299](https://github.com/Rob--W/cors-anywhere/issues/299), [#295](https://github.com/Rob--W/cors-anywhere/issues/295), [#294](https://github.com/Rob--W/cors-anywhere/issues/294), [#287](https://github.com/Rob--W/cors-anywhere/issues/287)) due to abuse and its popularity.</code></p><p><code>To counter this, I will make the following changes:</code></p><p><code>1. The rate limit will decrease from 200 ([#164](https://github.com/Rob--W/cors-anywhere/issues/164)) per hour to 50 per hour.</code> &gt; <code>2. By January 31st, 2021, cors-anywhere.herokuapp.com will stop serving as an open proxy.</code> &gt; <code>3. From February 1st. 2021, cors-anywhere.herokuapp.com will only serve requests after the visitor has completed a challenge: The user (developer) must visit a page at cors-anywhere.herokuapp.com to temporarily unlock the demo for their browser. This allows developers to try out the functionality, to help with deciding on self-hosting or looking for alternatives.</code></p></blockquote><p>â€‹ å› ä¸º <code>gitalk</code> æ˜¯åŸºäº <code>cors-anywhere.herokuapp.com</code> å®ç°çš„åå‘ä»£ç†ã€‚<code>cors-anywhere</code> ç¦ç”¨äº†ï¼Œ <code>gitalk</code> æ²¡æœ‰æ‹¿åˆ° <code>github</code> çš„æˆæƒï¼Œå¯¼è‡´é—®é¢˜å‡ºç°ã€‚é—®é¢˜åŸå› æ‰¾åˆ°äº†ï¼Œé‚£æˆ‘ä»¬æ€ä¹ˆè§£å†³å‘¢ï¼Ÿç™½å«–å…¬å…±çš„ <code>CORS proxy</code> ï¼Ÿ è‡ªå·±éƒ¨ç½²ï¼Ÿæœ‰æ²¡æœ‰å¸ˆå…„åŒæ ·é‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œæ€ä¹ˆè§£å†³çš„ï¼Ÿ</p><p>ç™½å«–å…¬å…±çš„ <code>CORS proxy</code>ï¼Œå¾—éœ€è¦æ”¹ <code>gitalk.js</code> çš„æºç ï¼Œå±€é™æ€§é«˜ï¼Œå¹¶ä¸å¤ªå¥½ã€‚æƒ³ç€ <code>gitalk</code> ä¹Ÿç”¨åˆ°äº†è¿™ä¸ªï¼Œäºæ˜¯åœ¨ç¿»äº†æ–‡æ¡£åå‘ç°ï¼š</p><blockquote><p>åœ¨ <code>1.7.2</code> ç‰ˆæœ¬çš„ <code>gitalk.min.js</code> ä¸­ï¼Œ<code>proxy</code> å·²ç»æ¢æˆäº†<br><code>https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token</code></p></blockquote><p>æ›´æ–°ç‰ˆæœ¬åˆ° <code>1.7.2</code> â€“ ä¿®æ”¹ <code>cdn</code> å¼•ç”¨å³å¯</p><pre class="language-diff" data-language="diff"><code class="language-diff"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> gitalk_js:</span><span class="token prefix deleted">-</span><span class="token line"> gitalk_css:</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> gitalk_js: //cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js</span><span class="token prefix inserted">+</span><span class="token line"> gitalk_css: //cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css</span></span></code></pre><p>â€‹ é™¤æ­¤ä¹‹å¤–ï¼Œåœ¨å¦å¤–ä¸€ç¯‡æ–‡ç« é‡Œæˆ‘ä»‹ç»äº†æ·»åŠ è‡ªåŠ¨åŒ–åˆ›å»º <code>Issues</code> çš„è¿‡ç¨‹ã€‚è¯¦è§ ã€<a href="/posts/hexo-gitalk-auto-init">Hexo-Gitalk è¯„è®ºæ¨¡å—çš„è‡ªåŠ¨åŒ–åˆ›å»º</a>ã€‘</p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul><li><a href="https://github.com/gitalk/gitalk/issues/429">åœ¨æˆæƒ gitalk åå‡ºç° 403 é”™è¯¯</a></li><li><a href="https://cuiqingcai.com/30010.html">Gitalk è¯„è®ºç™»å½• 403 é—®é¢˜è§£å†³</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> æ”¶è—å®‰åˆ© </category>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> gitalk </tag>
            
            <tag> issue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>emoji è¡¨æƒ…æ”¶è—åˆ†äº«</title>
      <link href="/posts/emoji-collect/"/>
      <url>/posts/emoji-collect/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><blockquote><p>æ”¶é›†ä¸€äº›å¸¸ç”¨çš„ emojiï¼Œç”¨ä»–ä»¬æ¥è¡¨è¾¾è‡ªå·±çš„æƒ…ç»ª ğŸ˜‚ã€‚Emoji è™½ç„¶æ˜¯æ–‡å­—ï¼Œä½†æ˜¯æ— æ³•ä¹¦å†™ï¼Œå¿…é¡»ä½¿ç”¨å…¶ä»–æ–¹æ³•æ’å…¥æ–‡æ¡£ ï¼Œæ¯”å¦‚ CTRL C + CTRL Vï¼Œæ­¤å¤–ä¹Ÿå¯ä»¥é€šè¿‡å¿«æ·é”®çš„æ–¹å¼æ’å…¥ï¼Œæ¯”å¦‚ windows ä¸‹çš„ win + ã€‚</p></blockquote><span id="more"></span><h3 id="äººè„¸æƒ…æ„Ÿç±»"><a href="#äººè„¸æƒ…æ„Ÿç±»" class="headerlink" title="äººè„¸æƒ…æ„Ÿç±»"></a>äººè„¸æƒ…æ„Ÿç±»</h3><hr><p>ğŸ˜€ğŸ˜ƒğŸ˜„ğŸ˜ğŸ˜†ğŸ˜…ğŸ¤£ğŸ˜‚ğŸ™‚ğŸ™ƒğŸ˜‰ğŸ˜ŠğŸ˜‡ğŸ¥°ğŸ˜ğŸ¤©ğŸ˜˜ğŸ˜—ğŸ˜šğŸ˜™ğŸ˜‹ğŸ˜›ğŸ˜œğŸ¤ªğŸ˜ğŸ¤‘ğŸ¤—ğŸ¤­ğŸ¤«ğŸ¤”ğŸ¤ğŸ¤¨ğŸ˜ğŸ˜‘ğŸ˜¶ğŸ˜ğŸ˜’ğŸ™„ğŸ˜¬ğŸ¤¥ğŸ˜ŒğŸ˜”ğŸ˜ªğŸ¤¤ğŸ˜´ğŸ˜·ğŸ¤’ğŸ¤•ğŸ¤¢ğŸ¤®ğŸ¤§ğŸ¥µğŸ¥¶ğŸ¥´ğŸ˜µğŸ¤¯ğŸ¤ ğŸ¥³ğŸ˜ğŸ¤“ğŸ§ğŸ˜•ğŸ˜ŸğŸ™ğŸ˜®ğŸ˜¯ğŸ˜²ğŸ˜³ğŸ¥ºğŸ˜¦ğŸ˜§ğŸ˜¨ğŸ˜°ğŸ˜¥ğŸ˜¢ğŸ˜­ğŸ˜±ğŸ˜–ğŸ˜£ğŸ˜ğŸ˜“ğŸ˜©ğŸ˜«ğŸ˜¤ğŸ˜ <br>ğŸ˜¡ğŸ¤¬ğŸ˜ˆğŸ‘¿ğŸ’€ğŸ’©ğŸ¤¡ğŸ‘¹ğŸ‘ºğŸ‘»ğŸ‘½ğŸ‘¾ğŸ¤–ğŸ˜ºğŸ˜¸ğŸ˜¹ğŸ˜»ğŸ˜¼ğŸ˜½ğŸ™€ğŸ˜¿ğŸ˜¾ğŸ’‹<br>ğŸ‘‹ğŸ¤šğŸ–âœ‹ğŸ––ğŸ‘ŒâœŒğŸ¤ğŸ¤ŸğŸ¤˜ğŸ¤™ğŸ‘ˆğŸ‘‰ğŸ‘†ğŸ–•ğŸ‘‡â˜ğŸ‘ğŸ‘âœŠğŸ‘ŠğŸ¤›ğŸ¤œğŸ‘ğŸ™ŒğŸ‘ğŸ¤²ğŸ¤ğŸ™âœğŸ’…ğŸ¤³ğŸ’ªğŸ¦µğŸ¦¶ğŸ‘‚ğŸ‘ƒğŸ§ ğŸ¦·ğŸ¦´ğŸ‘€ğŸ‘ğŸ‘…ğŸ‘„<br>ğŸ‘¶ğŸ§’ğŸ‘¦ğŸ‘§ğŸ§‘ğŸ‘±ğŸ‘¨ğŸ§”ğŸ‘¨â€ğŸ¦°ğŸ‘¨â€ğŸ¦±ğŸ‘¨â€ğŸ¦³ğŸ‘¨â€ğŸ¦²ğŸ‘©ğŸ‘©â€ğŸ¦°ğŸ‘©â€ğŸ¦±ğŸ‘©â€ğŸ¦³ğŸ‘©â€ğŸ¦²ğŸ‘±â€â™€ï¸ğŸ‘±â€â™‚ï¸ğŸ§“ğŸ‘´ğŸ‘µğŸ™ğŸ™â€â™‚ï¸ğŸ™â€â™€ï¸ğŸ™ğŸ™â€â™‚ï¸ğŸ™â€â™€ï¸ğŸ™…ğŸ™…â€â™‚ï¸ğŸ™…â€â™€ï¸ğŸ™†ğŸ™†â€â™‚ï¸ğŸ™†â€â™€ï¸ğŸ’ğŸ’â€â™‚ï¸ğŸ’â€â™€ï¸ğŸ™‹ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™€ï¸ğŸ™‡ğŸ™‡â€â™‚ï¸ğŸ™‡â€â™€ï¸ğŸ¤¦ğŸ¤¦â€â™‚ï¸ğŸ¤¦â€â™€ï¸ğŸ¤·ğŸ¤·â€â™‚ï¸ğŸ¤·â€â™€ï¸ğŸ‘¨â€âš•ï¸ğŸ‘©â€âš•ï¸ğŸ‘¨â€ğŸ“ğŸ‘©â€ğŸ“ğŸ‘¨â€ğŸ«ğŸ‘©â€ğŸ«ğŸ‘¨â€âš–ï¸ğŸ‘©â€âš–ï¸ğŸ‘¨â€ğŸŒ¾ğŸ‘©â€ğŸŒ¾ğŸ‘¨â€ğŸ³ğŸ‘©â€ğŸ³ğŸ‘¨â€ğŸ”§ğŸ‘©â€ğŸ”§ğŸ‘¨â€ğŸ­ğŸ‘©â€ğŸ­ğŸ‘¨â€ğŸ’¼ğŸ‘©â€ğŸ’¼ğŸ‘¨â€ğŸ”¬ğŸ‘©â€ğŸ”¬ğŸ‘¨â€ğŸ’»ğŸ‘©â€ğŸ’»ğŸ‘¨â€ğŸ¤ğŸ‘©â€ğŸ¤ğŸ‘¨â€ğŸ¨ğŸ‘©â€ğŸ¨ğŸ‘¨â€âœˆï¸ğŸ‘©â€âœˆï¸ğŸ‘¨â€ğŸš€ğŸ‘©â€ğŸš€ğŸ‘¨â€ğŸš’ğŸ‘©â€ğŸš’ğŸ‘®ğŸ‘®â€â™‚ï¸ğŸ‘®â€â™€ï¸ğŸ•µğŸ•µï¸â€â™‚ï¸ğŸ•µï¸â€â™€ï¸ğŸ’‚ğŸ’‚â€â™‚ï¸ğŸ’‚â€â™€ï¸ğŸ‘·ğŸ‘·â€â™‚ï¸ğŸ‘·â€â™€ï¸ğŸ¤´ğŸ‘¸ğŸ‘³ğŸ‘³â€â™‚ï¸ğŸ‘³â€â™€ï¸ğŸ‘²ğŸ§•ğŸ¤µğŸ‘°ğŸ¤°ğŸ¤±ğŸ‘¼ğŸ…ğŸ¤¶ğŸ¦¸ğŸ¦¸â€â™‚ï¸ğŸ¦¸â€â™€ï¸ğŸ¦¹ğŸ¦¹â€â™‚ï¸ğŸ¦¹â€â™€ï¸ğŸ§™ğŸ§™â€â™‚ï¸ğŸ§™â€â™€ï¸ğŸ§šğŸ§šâ€â™‚ï¸ğŸ§šâ€â™€ï¸ğŸ§›ğŸ§›â€â™‚ï¸ğŸ§›â€â™€ï¸ğŸ§œğŸ§œâ€â™‚ï¸ğŸ§œâ€â™€ï¸ğŸ§ğŸ§â€â™‚ï¸ğŸ§â€â™€ï¸ğŸ§ğŸ§â€â™‚ï¸ğŸ§â€â™€ï¸ğŸ§ŸğŸ§Ÿâ€â™‚ï¸ğŸ§Ÿâ€â™€ï¸ğŸ’†ğŸ’†â€â™‚ï¸ğŸ’†â€â™€ï¸ğŸ’‡ğŸ’‡â€â™‚ï¸ğŸ’‡â€â™€ï¸<br>ğŸš¶ğŸš¶â€â™‚ï¸ğŸš¶â€â™€ï¸ğŸƒğŸƒâ€â™‚ï¸ğŸƒâ€â™€ï¸ğŸ’ƒğŸ•ºğŸ•´ğŸ‘¯ğŸ‘¯â€â™‚ï¸ğŸ‘¯â€â™€ï¸ğŸ§–ğŸ§–â€â™‚ï¸ğŸ§–â€â™€ï¸ğŸ§˜ğŸ‘­ğŸ‘«ğŸ‘¬ğŸ’ğŸ‘¨â€â¤ï¸â€ğŸ’‹â€ğŸ‘¨ğŸ‘©â€â¤ï¸â€ğŸ’‹â€ğŸ‘©ğŸ’‘ğŸ‘¨â€â¤ï¸â€ğŸ‘¨ğŸ‘©â€â¤ï¸â€ğŸ‘©ğŸ‘ªğŸ‘¨â€ğŸ‘©â€ğŸ‘¦ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘§ğŸ‘¨â€ğŸ‘¨â€ğŸ‘¦ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦ğŸ‘¨â€ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘§ğŸ‘©â€ğŸ‘©â€ğŸ‘¦ğŸ‘©â€ğŸ‘©â€ğŸ‘§ğŸ‘©â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ğŸ‘©â€ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦ğŸ‘©â€ğŸ‘©â€ğŸ‘§â€ğŸ‘§ğŸ‘¨â€ğŸ‘¦ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦ğŸ‘¨â€ğŸ‘§ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦ğŸ‘¨â€ğŸ‘§â€ğŸ‘§ğŸ‘©â€ğŸ‘¦ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦ğŸ‘©â€ğŸ‘§ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ğŸ‘©â€ğŸ‘§â€ğŸ‘§ğŸ—£<br>ğŸ‘¤ğŸ‘¥ğŸ‘£ğŸ§³ğŸŒ‚â˜‚ğŸ§µğŸ§¶ğŸ‘“ğŸ•¶ğŸ¥½ğŸ¥¼ğŸ‘”ğŸ‘•ğŸ‘–ğŸ§£ğŸ§¤ğŸ§¥ğŸ§¦ğŸ‘—ğŸ‘˜ğŸ‘™ğŸ‘šğŸ‘›ğŸ‘œğŸ‘ğŸ’ğŸ‘ğŸ‘ŸğŸ¥¾ğŸ¥¿ğŸ‘ ğŸ‘¡ğŸ‘¢ğŸ‘‘ğŸ‘’ğŸ©ğŸ“ğŸ§¢â›‘ğŸ’„ğŸ’ğŸ’¼</p><h3 id="åŠ¨ç‰©ä¸è‡ªç„¶ç±»"><a href="#åŠ¨ç‰©ä¸è‡ªç„¶ç±»" class="headerlink" title="åŠ¨ç‰©ä¸è‡ªç„¶ç±»"></a>åŠ¨ç‰©ä¸è‡ªç„¶ç±»</h3><hr><p>ğŸ™ˆğŸ™‰ğŸ™ŠğŸ’¥ğŸ’«ğŸ’¦ğŸ’¨ğŸµğŸ’ğŸ¦ğŸ¶ğŸ•ğŸ©ğŸºğŸ¦ŠğŸ¦ğŸ±ğŸˆğŸ¦ğŸ¯ğŸ…ğŸ†ğŸ´ğŸğŸ¦„ğŸ¦“ğŸ¦ŒğŸ®ğŸ‚ğŸƒğŸ„ğŸ·ğŸ–ğŸ—ğŸ½ğŸğŸ‘ğŸğŸªğŸ«ğŸ¦™ğŸ¦’ğŸ˜ğŸ¦ğŸ¦›ğŸ­ğŸğŸ€ğŸ¹ğŸ°ğŸ‡ğŸ¿ğŸ¦”ğŸ¦‡ğŸ»ğŸ¨ğŸ¼ğŸ¦˜ğŸ¦¡ğŸ¾ğŸ¦ƒğŸ”ğŸ“ğŸ£ğŸ¤ğŸ¥ğŸ¦ğŸ§ğŸ•ŠğŸ¦…ğŸ¦†ğŸ¦¢ğŸ¦‰ğŸ¦šğŸ¦œğŸ¸ğŸŠğŸ¢ğŸ¦ğŸğŸ²ğŸ‰ğŸ¦•ğŸ¦–ğŸ³ğŸ‹ğŸ¬ğŸŸğŸ ğŸ¡ğŸ¦ˆğŸ™ğŸšğŸŒğŸ¦‹ğŸ›ğŸœğŸğŸğŸ¦—ğŸ•·ğŸ•¸ğŸ¦‚ğŸ¦ŸğŸ¦ <br>ğŸ’ğŸŒ¸ğŸ’®ğŸµğŸŒ¹ğŸ¥€ğŸŒºğŸŒ»ğŸŒ¼ğŸŒ·ğŸŒ±ğŸŒ²ğŸŒ³ğŸŒ´ğŸŒµğŸŒ¾ğŸŒ¿â˜˜ğŸ€ğŸğŸ‚ğŸƒğŸ„ğŸŒ°ğŸ¦€ğŸ¦ğŸ¦ğŸ¦‘<br>ğŸŒğŸŒğŸŒğŸŒğŸŒ‘ğŸŒ’ğŸŒ“ğŸŒ”ğŸŒ•ğŸŒ–ğŸŒ—ğŸŒ˜ğŸŒ™ğŸŒšğŸŒ›ğŸŒœâ˜€ğŸŒğŸŒâ­ğŸŒŸğŸŒ â˜â›…â›ˆğŸŒ¤ğŸŒ¥ğŸŒ¦ğŸŒ§ğŸŒ¨ğŸŒ©ğŸŒªğŸŒ«ğŸŒ¬ğŸŒˆ<br>â˜‚â˜”âš¡â„â˜ƒâ›„â˜„ğŸ”¥ğŸ’§ğŸŒŠğŸ„âœ¨ğŸ‹ğŸ</p><h3 id="é£Ÿç‰©ç±»"><a href="#é£Ÿç‰©ç±»" class="headerlink" title="é£Ÿç‰©ç±»"></a>é£Ÿç‰©ç±»</h3><hr><p>ğŸ‡ğŸˆğŸ‰ğŸŠğŸ‹ğŸŒğŸğŸ¥­ğŸğŸğŸğŸ‘ğŸ’ğŸ“ğŸ¥ğŸ…ğŸ¥¥ğŸ¥‘ğŸ†ğŸ¥”ğŸ¥•ğŸŒ½ğŸŒ¶ğŸ¥’ğŸ¥¬ğŸ¥¦ğŸ„ğŸ¥œğŸŒ°ğŸğŸ¥ğŸ¥–ğŸ¥¨ğŸ¥¯ğŸ¥ğŸ§€ğŸ–ğŸ—ğŸ¥©ğŸ¥“ğŸ”ğŸŸğŸ•ğŸŒ­ğŸ¥ªğŸŒ®ğŸŒ¯ğŸ¥™ğŸ³ğŸ¥˜ğŸ²ğŸ¥£ğŸ¥—ğŸ¿ğŸ§‚ğŸ¥«ğŸ±ğŸ˜ğŸ™ğŸšğŸ›ğŸœğŸğŸ ğŸ¢ğŸ£ğŸ¤ğŸ¥ğŸ¥®ğŸ¡ğŸ¥ŸğŸ¥ ğŸ¥¡ğŸ¦ğŸ§ğŸ¨ğŸ©ğŸªğŸ‚ğŸ°ğŸ§ğŸ¥§ğŸ«ğŸ¬ğŸ­ğŸ®ğŸ¯ğŸ¼ğŸ¥›â˜•ğŸµğŸ¶ğŸ¾ğŸ·ğŸ¸ğŸ¹ğŸºğŸ»ğŸ¥‚ğŸ¥ƒğŸ¥¤ğŸ¥¢ğŸ½ğŸ´ğŸ¥„</p><h3 id="æ´»åŠ¨ç±»"><a href="#æ´»åŠ¨ç±»" class="headerlink" title="æ´»åŠ¨ç±»"></a>æ´»åŠ¨ç±»</h3><hr><p>ğŸ•´ğŸ§—ğŸ§—â€â™‚ï¸ğŸ§—â€â™€ï¸ğŸ‡â›·ğŸ‚ğŸŒğŸŒï¸â€â™‚ï¸ğŸŒï¸â€â™€ï¸ğŸ„ğŸ„â€â™‚ï¸ğŸ„â€â™€ï¸ğŸš£ğŸš£â€â™‚ï¸ğŸš£â€â™€ï¸ğŸŠğŸŠâ€â™‚ï¸ğŸŠâ€â™€ï¸â›¹â›¹ï¸â€â™‚ï¸â›¹ï¸â€â™€ï¸ğŸ‹ğŸ‹ï¸â€â™‚ï¸ğŸ‹ï¸â€â™€ï¸ğŸš´ğŸš´â€â™‚ï¸ğŸš´â€â™€ï¸ğŸšµğŸšµâ€â™‚ï¸ğŸšµâ€â™€ï¸ğŸ¤¸ğŸ¤¸â€â™‚ï¸ğŸ¤¸â€â™€ï¸ğŸ¤¼ğŸ¤¼â€â™‚ï¸ğŸ¤¼â€â™€ï¸ğŸ¤½ğŸ¤½â€â™‚ï¸ğŸ¤½â€â™€ï¸ğŸ¤¾ğŸ¤¾â€â™‚ï¸ğŸ¤¾â€â™€ï¸ğŸ¤¹ğŸ¤¹â€â™‚ï¸ğŸ¤¹â€â™€ï¸ğŸ§˜ğŸ§˜â€â™‚ï¸ğŸ§˜â€â™€ï¸ğŸªğŸ›¹ğŸ—ğŸŸğŸ«ğŸ–ğŸ†ğŸ…ğŸ¥‡ğŸ¥ˆğŸ¥‰âš½âš¾ğŸ¥ğŸ€ğŸğŸˆğŸ‰ğŸ¾ğŸ¥ğŸ³ğŸğŸ‘ğŸ’ğŸ¥ğŸ“ğŸ¸ğŸ¥ŠğŸ¥‹â›³â›¸ğŸ£ğŸ½ğŸ¿ğŸ›·ğŸ¥ŒğŸ¯ğŸ±ğŸ®ğŸ°ğŸ²ğŸ§©â™ŸğŸ­ğŸ¨ğŸ§µğŸ§¶ğŸ¼ğŸ¤ğŸ§ğŸ·ğŸ¸ğŸ¹ğŸºğŸ»ğŸ¥ğŸ¬ğŸ¹</p><h3 id="äº¤é€šä¸åœ°ç‚¹ç±»"><a href="#äº¤é€šä¸åœ°ç‚¹ç±»" class="headerlink" title="äº¤é€šä¸åœ°ç‚¹ç±»"></a>äº¤é€šä¸åœ°ç‚¹ç±»</h3><hr><p>ğŸš£ğŸ—¾ğŸ”â›°ğŸŒ‹ğŸ—»ğŸ•ğŸ–ğŸœğŸğŸğŸŸğŸ›ğŸ—ğŸ˜ğŸšğŸ ğŸ¡ğŸ¢ğŸ£ğŸ¤ğŸ¥ğŸ¦ğŸ¨ğŸ©ğŸªğŸ«ğŸ¬ğŸ­ğŸ¯ğŸ°ğŸ’’ğŸ—¼ğŸ—½â›ªğŸ•ŒğŸ•â›©ğŸ•‹â›²â›ºğŸŒğŸŒƒğŸ™ğŸŒ„ğŸŒ…ğŸŒ†ğŸŒ‡ğŸŒ‰ğŸ ğŸ¡ğŸ¢ğŸš‚ğŸšƒğŸš„ğŸš…ğŸš†ğŸš‡ğŸšˆğŸš‰ğŸšŠğŸšğŸšğŸš‹ğŸšŒğŸšğŸšğŸšğŸš‘ğŸš’ğŸš“ğŸš”ğŸš•ğŸš–ğŸš—ğŸš˜ğŸššğŸš›ğŸšœğŸğŸğŸ›µğŸš²ğŸ›´ğŸšğŸ›¤â›½ğŸš¨ğŸš¥ğŸš¦ğŸš§âš“â›µğŸš¤ğŸ›³â›´ğŸ›¥ğŸš¢âœˆğŸ›©ğŸ›«ğŸ›¬ğŸ’ºğŸšğŸšŸğŸš ğŸš¡ğŸ›°ğŸš€ğŸ›¸ğŸŒ ğŸŒŒâ›±ğŸ†ğŸ‡ğŸ‘ğŸ’´ğŸ’µğŸ’¶ğŸ’·ğŸ—¿ğŸ›‚ğŸ›ƒğŸ›„ğŸ›…</p><h3 id="å¸¸è§äº‹ç‰©ç±»"><a href="#å¸¸è§äº‹ç‰©ç±»" class="headerlink" title="å¸¸è§äº‹ç‰©ç±»"></a>å¸¸è§äº‹ç‰©ç±»</h3><hr><p>ğŸ’ŒğŸ•³ğŸ’£ğŸ›€ğŸ›ŒğŸ”ªğŸºğŸ—ºğŸ§­ğŸ§±ğŸ’ˆğŸ›¢ğŸ›ğŸ§³âŒ›â³âŒšâ°â±â²ğŸ•°ğŸŒ¡â›±ğŸ§¨ğŸˆğŸ‰ğŸŠğŸğŸğŸğŸ§§ğŸ€ğŸğŸ”®ğŸ§¿ğŸ•¹ğŸ§¸ğŸ–¼ğŸ§µğŸ§¶ğŸ›ğŸ“¿ğŸ’ğŸ“¯ğŸ™ğŸšğŸ›ğŸ“»ğŸ“±ğŸ“²â˜ğŸ“ğŸ“ŸğŸ“ ğŸ”‹ğŸ”ŒğŸ’»ğŸ–¥ğŸ–¨âŒ¨ğŸ–±ğŸ–²ğŸ’½ğŸ’¾ğŸ’¿ğŸ“€ğŸ§®ğŸ¥ğŸğŸ“½ğŸ“ºğŸ“·ğŸ“¸ğŸ“¹ğŸ“¼ğŸ”ğŸ”ğŸ•¯ğŸ’¡ğŸ”¦ğŸ®ğŸ“”ğŸ“•ğŸ“–ğŸ“—ğŸ“˜ğŸ“™ğŸ“šğŸ““ğŸ“ƒğŸ“œğŸ“„ğŸ“°ğŸ—ğŸ“‘ğŸ”–ğŸ·ğŸ’°ğŸ’´ğŸ’µğŸ’¶ğŸ’·ğŸ’¸ğŸ’³ğŸ§¾âœ‰ğŸ“§ğŸ“¨ğŸ“©ğŸ“¤ğŸ“¥ğŸ“¦ğŸ“«ğŸ“ªğŸ“¬ğŸ“­ğŸ“®ğŸ—³âœâœ’ğŸ–‹ğŸ–ŠğŸ–ŒğŸ–ğŸ“ğŸ“ğŸ“‚ğŸ—‚ğŸ“…ğŸ“†ğŸ—’ğŸ—“ğŸ“‡ğŸ“ˆğŸ“‰ğŸ“ŠğŸ“‹ğŸ“ŒğŸ“ğŸ“ğŸ–‡ğŸ“ğŸ“âœ‚ğŸ—ƒğŸ—„ğŸ—‘ğŸ”’ğŸ”“ğŸ”ğŸ”ğŸ”‘ğŸ—ğŸ”¨â›âš’ğŸ› ğŸ—¡âš”ğŸ”«ğŸ›¡ğŸ”§ğŸ”©âš™ğŸ—œâš–ğŸ”—â›“ğŸ§°ğŸ§²âš—ğŸ§ªğŸ§«ğŸ§¬ğŸ”¬ğŸ”­ğŸ“¡ğŸ’‰ğŸ’ŠğŸšªğŸ›ğŸ›‹ğŸš½ğŸš¿ğŸ›ğŸ§´ğŸ§·ğŸ§¹ğŸ§ºğŸ§»ğŸ§¼ğŸ§½ğŸ§¯ğŸš¬âš°âš±ğŸ—¿ğŸš°</p><h3 id="æ ‡å¿—ç±»"><a href="#æ ‡å¿—ç±»" class="headerlink" title="æ ‡å¿—ç±»"></a>æ ‡å¿—ç±»</h3><hr><p>ğŸ’˜ğŸ’ğŸ’–ğŸ’—ğŸ’“ğŸ’ğŸ’•ğŸ’Ÿâ£ğŸ’”â¤ğŸ§¡ğŸ’›ğŸ’šğŸ’™ğŸ’œğŸ–¤ğŸ’¯ğŸ’¢ğŸ’¬ğŸ‘ï¸â€ğŸ—¨ï¸ğŸ—¯ğŸ’­ğŸ’¤ğŸ’®â™¨ğŸ’ˆğŸ›‘<br>ğŸ•›ğŸ•§ğŸ•ğŸ•œğŸ•‘ğŸ•ğŸ•’ğŸ•ğŸ•“ğŸ•ŸğŸ•”ğŸ• ğŸ••ğŸ•¡ğŸ•–ğŸ•¢ğŸ•—ğŸ•£ğŸ•˜ğŸ•¤ğŸ•™ğŸ•¥ğŸ•šğŸ•¦<br>ğŸŒ€â™ â™¥â™¦â™£ğŸƒğŸ€„ğŸ´ğŸ”‡ğŸ”ˆğŸ”‰ğŸ”ŠğŸ“¢ğŸ“£ğŸ“¯ğŸ””ğŸ”•ğŸµğŸ¶ğŸ§ğŸš®ğŸš°â™¿ğŸš¹ğŸšºğŸš»ğŸš¼ğŸš¾âš ğŸš¸â›”ğŸš«ğŸš³ğŸš­ğŸš¯ğŸš±ğŸš·ğŸ”<br>â˜¢â˜£â¬†â†—â¡â†˜â¬‡â†™â¬…â†–â†•â†”â†©â†ªâ¤´â¤µğŸ”ƒğŸ”„ğŸ”™ğŸ”šğŸ”›ğŸ”œğŸ”ğŸ›âš›ğŸ•‰âœ¡â˜¸â˜¯âœâ˜¦â˜ªâ˜®<br>ğŸ•ğŸ”¯â™ˆâ™‰â™Šâ™‹â™Œâ™â™â™â™â™‘â™’â™“â›ğŸ”€ğŸ”ğŸ”‚â–¶â©â—€âªğŸ”¼â«ğŸ”½â¬â¹âğŸ¦<br>ğŸ”…ğŸ”†ğŸ“¶ğŸ“³ğŸ“´â™¾â™»ğŸ”±ğŸ“›ğŸ”°â­•âœ…â˜‘âœ”âœ–âŒââ•â–â—â°â¿ã€½âœ³âœ´â‡â€¼â‰â“â”â•â—Â©Â®â„¢</p><p>ï¸ğŸ”ŸğŸ” ğŸ”¡ğŸ”¢ğŸ”£ğŸ”¤ğŸ…°ğŸ†ğŸ…±ğŸ†‘ğŸ†’ğŸ†“â„¹ğŸ†”â“‚ğŸ†•ğŸ†–ğŸ…¾ğŸ†—ğŸ…¿ğŸ†˜ğŸ†™ğŸ†šğŸˆ</p><p>ğŸˆ‚ğŸˆ·ğŸˆ¶ğŸˆ¯ ğŸ‰ ğŸˆ¹ğŸˆšğŸˆ² ğŸ‰‘ ğŸˆ¸ğŸˆ´ğŸˆ³ ãŠ—ãŠ™ ğŸˆºğŸˆµ<br>ğŸ”´ğŸ”µâš«âšªâ¬›â¬œâ—¼â—»â—¾â—½â–ªâ–«ğŸ”¶ğŸ”·ğŸ”¸ğŸ”¹ğŸ”ºğŸ”»ğŸ’ ğŸ”³ğŸ”²</p><h3 id="æ——å¸œç±»"><a href="#æ——å¸œç±»" class="headerlink" title="æ——å¸œç±»"></a>æ——å¸œç±»</h3><hr><p>ğŸğŸš©ğŸŒğŸ´ğŸ³ğŸ³ï¸â€ğŸŒˆğŸ³ï¸â€âš§ï¸ğŸ´â€â˜ ï¸ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿ğŸ´ó §ó ¢ó ³ó £ó ´ó ¿ğŸ´ó §ó ¢ó ·ó ¬ó ³ó ¿ğŸ´ó µó ³ó ´ó ¸ó ¿</p>]]></content>
      
      
      <categories>
          
          <category> æ”¶è—å®‰åˆ© </category>
          
          <category> Emoji </category>
          
      </categories>
      
      
        <tags>
            
            <tag> emoji </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœç‹—è¾“å…¥æ³•è‡ªå®šä¹‰æ—¶é—´ä»£ç ç‰‡æ®µ</title>
      <link href="/posts/keyboard-input-snippet/"/>
      <url>/posts/keyboard-input-snippet/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="æµ…è°ˆ"><a href="#æµ…è°ˆ" class="headerlink" title="æµ…è°ˆ"></a>æµ…è°ˆ</h3><p>ä»€ä¹ˆæ˜¯è¾“å…¥æ³•ç‰‡æ®µï¼Ÿæ—¨åœ¨é€šè¿‡ç‰¹æ®Šçš„å­—ç¬¦ä¸²æ¥è¾“å‡ºè‡ªå®šä¹‰å¥½çš„æ–‡æœ¬ï¼Œè¾¾åˆ°ä¾¿æ·è¾“å‡ºçš„ç›®çš„ã€‚<a href="https://pinyin.sogou.com/help.php?list=1&q=9">https://pinyin.sogou.com/help.php?list=1&q=9</a></p><p>å½“ç„¶é™¤äº†è‡ªå·±å®šä¹‰å¤–ï¼Œè¿˜æœ‰ä¸€äº›å†…ç½®çš„çŸ­è¯­ç‰‡æ®µï¼Œä¾‹å¦‚<code>sj</code>ä¼šè¾“å‡ºæ—¶é—´ï¼Œ<code>xq</code>ä¼šè¾“å‡ºæ˜ŸæœŸå†…å®¹ï¼Œ<code>rq</code>ä¼šè¾“å‡ºå…·ä½“æ—¥æœŸ..å¦‚å›¾ï¼š</p><p><a href="/images/posts/keyboard-input-snippet/p1.png"><img src="/images/posts/keyboard-input-snippet/p1.png" alt="keyboard-input-snippet-p1" loading="lazy"></a></p><p>ç„¶åæ¥è¯´è¯´æ€ä¹ˆè‡ªå®šä¹‰ï¼Œå°±æ‹¿æ—¶é—´ä¸¾ä¾‹â€¦<del>å› ä¸ºæˆ‘è§‰å¾—å†…ç½®çš„<code>sj</code>çŸ­è¯­ä¸å¤ªèƒ½æ»¡è¶³æˆ‘çš„æ ¼å¼éœ€æ±‚</del></p><span id="more"></span><h3 id="æ·»åŠ æ—¶é—´çŸ­è¯­"><a href="#æ·»åŠ æ—¶é—´çŸ­è¯­" class="headerlink" title="æ·»åŠ æ—¶é—´çŸ­è¯­"></a>æ·»åŠ æ—¶é—´çŸ­è¯­</h3><blockquote><p>è¾“å…¥æ³•-&gt; å±æ€§è®¾ç½® -&gt; é«˜çº§ -&gt; å€™é€‰æ‰©å±• -&gt; è‡ªå®šä¹‰çŸ­è¯­è®¾ç½® -&gt; æ·»åŠ æ–°çŸ­è¯­</p></blockquote><p>çŸ­è¯­é™¤äº†å›ºå®šæ€§çš„å†…å®¹ä»¥å¤–ï¼Œè¿˜å¯ä»¥æ˜¯æ¨¡æ¿â€¦ <code>#å¼€å¤´</code>å½¢å¦‚<code>#xxxxxx</code>,äº†è§£æ¨¡æ¿çš„å…³é”®å­—å‡½æ•°ï¼š</p><h3 id="å‡½æ•°å…¬å¼"><a href="#å‡½æ•°å…¬å¼" class="headerlink" title="å‡½æ•°å…¬å¼"></a>å‡½æ•°å…¬å¼</h3><table><thead><tr><th align="left">å‡½æ•°</th><th align="center">å«ä¹‰</th><th align="right">ä¸¾ä¾‹</th></tr></thead><tbody><tr><td align="left">$year</td><td align="center">å¹´(4 ä½)</td><td align="right">2006ã€2008</td></tr><tr><td align="left">$year_yy</td><td align="center">å¹´(2 ä½)</td><td align="right">06ã€08</td></tr><tr><td align="left">$month</td><td align="center">æœˆ</td><td align="right">12ã€8ã€3</td></tr><tr><td align="left">$month_mm</td><td align="center">æœˆ</td><td align="right">12ã€08ã€03 æ­¤å‡½æ•°åœ¨è¾“å…¥æ³• 3.1 ç‰ˆä¹‹åï¼ˆå«ï¼‰æœ‰æ•ˆ</td></tr><tr><td align="left">$day</td><td align="center">æ—¥</td><td align="right">3ã€13ã€22</td></tr><tr><td align="left">$day_dd</td><td align="center">æ—¥</td><td align="right">03ã€13ã€22 æ­¤å‡½æ•°åœ¨è¾“å…¥æ³• 3.1 ç‰ˆä¹‹åï¼ˆå«ï¼‰æœ‰æ•ˆ</td></tr><tr><td align="left">$weekday</td><td align="center">æ˜ŸæœŸ</td><td align="right">0ã€1ã€2ã€5ã€6</td></tr><tr><td align="left">$fullhour</td><td align="center">æ—¶(24 å°æ—¶åˆ¶)</td><td align="right">02ã€08ã€13ã€23</td></tr><tr><td align="left">$halfhour</td><td align="center">(12 å°æ—¶åˆ¶)</td><td align="right">02ã€08ã€01ã€11</td></tr><tr><td align="left">$ampm</td><td align="center">AMã€PM(è‹±)</td><td align="right">AMã€PMï¼ˆå¤§å†™ï¼‰</td></tr><tr><td align="left">$minute</td><td align="center">åˆ†</td><td align="right">02ã€08ã€15ã€28</td></tr><tr><td align="left">$second</td><td align="center">ç§’</td><td align="right">02ã€08ã€15ã€28</td></tr><tr><td align="left">$year_cn</td><td align="center">å¹´(ä¸­æ–‡ 4 ä½)</td><td align="right">äºŒã€‡ã€‡å…­</td></tr><tr><td align="left">$year_yy_cn</td><td align="center">å¹´(ä¸­æ–‡ 2 ä½)</td><td align="right">ã€‡å…­</td></tr><tr><td align="left">$month_cn</td><td align="center">æœˆ(ä¸­æ–‡)</td><td align="right">åäºŒã€å…«ã€ä¸‰</td></tr><tr><td align="left">$day_cn</td><td align="center">æ—¥(ä¸­æ–‡)</td><td align="right">ä¸‰ã€åä¸‰ã€äºŒåäºŒ</td></tr><tr><td align="left">$weekday_cn</td><td align="center">æ˜ŸæœŸ(ä¸­æ–‡)</td><td align="right">æ—¥ã€ä¸€ã€äºŒã€äº”ã€å…­</td></tr><tr><td align="left">$fullhour_cn</td><td align="center">æ—¶(ä¸­æ–‡ 24 æ—¶åˆ¶)</td><td align="right">äºŒã€å…«ã€åä¸‰ã€äºŒåä¸‰</td></tr><tr><td align="left">$halfhour_cn</td><td align="center">æ—¶(ä¸­æ–‡ 12 æ—¶åˆ¶)</td><td align="right">äºŒã€å…«ã€ä¸€ã€åä¸€</td></tr><tr><td align="left">$ampm_cn</td><td align="center">ä¸Šåˆä¸‹åˆ(ä¸­æ–‡)</td><td align="right">ä¸Šåˆã€ä¸‹åˆ</td></tr><tr><td align="left">$minute_cn</td><td align="center">åˆ†(ä¸­æ–‡)</td><td align="right">é›¶äºŒã€é›¶å…«ã€åäº”ã€äºŒåå…«</td></tr><tr><td align="left">$second_cn</td><td align="center">ç§’(ä¸­æ–‡)</td><td align="right">é›¶äºŒã€é›¶å…«ã€åäº”ã€äºŒåå…«</td></tr></tbody></table><p><code>eg.</code>è®¾ç½®å½¢å¦‚<code>2022-08-17 11:31:14</code>æ ¼å¼çš„çŸ­è¯­ï¼š</p><blockquote><p><code>#$year-$month_mm-$day_dd $fullhour:$minute:$second</code></p></blockquote><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><a href="/images/posts/keyboard-input-snippet/p2.png"><img src="/images/posts/keyboard-input-snippet/p2.png" alt="keyboard-input-snippet-p2" loading="lazy"></a></p>]]></content>
      
      
      <categories>
          
          <category> æ”¶è—å®‰åˆ© </category>
          
          <category> ä»£ç ç‰‡æ®µ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¾“å…¥æ³• </tag>
            
            <tag> snippet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo çš„æœåŠ¡æ­å»ºå’Œç®€å•ä½¿ç”¨</title>
      <link href="/tools/hexo/"/>
      <url>/tools/hexo/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js"></script><h3 id="What-is-Hexo"><a href="#What-is-Hexo" class="headerlink" title="What is Hexo?"></a>What is Hexo?</h3><p>Hexo æ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ã€‚Hexo ä½¿ç”¨ Markdownï¼ˆæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“ï¼‰è§£ææ–‡ç« ï¼Œåœ¨å‡ ç§’å†…ï¼Œå³å¯åˆ©ç”¨é“ä¸½çš„ä¸»é¢˜ç”Ÿæˆé™æ€ç½‘é¡µã€‚<a href="https://hexo.io/docs/">è¯¦è§æ–‡æ¡£</a></p><span id="more"></span><h3 id="å¼€å§‹æ­å»ºä½ çš„HexoæœåŠ¡"><a href="#å¼€å§‹æ­å»ºä½ çš„HexoæœåŠ¡" class="headerlink" title="å¼€å§‹æ­å»ºä½ çš„HexoæœåŠ¡"></a>å¼€å§‹æ­å»ºä½ çš„<code>Hexo</code>æœåŠ¡</h3><h4 id="å®‰è£…è„šæ‰‹æ¶"><a href="#å®‰è£…è„šæ‰‹æ¶" class="headerlink" title="å®‰è£…è„šæ‰‹æ¶"></a>å®‰è£…è„šæ‰‹æ¶</h4><blockquote><p>npm install -g hexo-cli</p></blockquote><p>ä»…å±€éƒ¨å®‰è£…ï¼š</p><blockquote><p>npm install hexo</p></blockquote><h4 id="åˆå§‹åŒ–ä½ çš„åšå®¢é¡¹ç›®"><a href="#åˆå§‹åŒ–ä½ çš„åšå®¢é¡¹ç›®" class="headerlink" title="åˆå§‹åŒ–ä½ çš„åšå®¢é¡¹ç›®"></a>åˆå§‹åŒ–ä½ çš„åšå®¢é¡¹ç›®</h4><blockquote><p>hexo init <blogName><br>cd blogName<br>yarn or npm i</p></blockquote><h4 id="é…ç½®ä½ çš„åšå®¢ä¿¡æ¯"><a href="#é…ç½®ä½ çš„åšå®¢ä¿¡æ¯" class="headerlink" title="é…ç½®ä½ çš„åšå®¢ä¿¡æ¯"></a>é…ç½®ä½ çš„åšå®¢ä¿¡æ¯</h4><p><code>_config.yml</code>å³ä¸ºåšå®¢çš„é…ç½®ä¿¡æ¯æ–‡ä»¶ï¼Œè¯¦è§<a href="https://hexo.io/zh-cn/docs/configuration">é…ç½®</a> ã€‚</p><h4 id="ä¸»è¦æ–‡ä»¶å¤¹è¯´æ˜"><a href="#ä¸»è¦æ–‡ä»¶å¤¹è¯´æ˜" class="headerlink" title="ä¸»è¦æ–‡ä»¶å¤¹è¯´æ˜"></a>ä¸»è¦æ–‡ä»¶å¤¹è¯´æ˜</h4><p><code>scaffolds</code>æ–‡ä»¶å¤¹å¯ä»¥é…ç½®ä½ çš„æ–‡ç« æ¨¡æ¿ï¼Œå³æ¯æ¬¡ hexo æ–°å»ºæ–‡ç« éƒ½ä¼šæ ¹æ®æ­¤æ–‡ä»¶å¤¹é…ç½®å»ºç«‹æ–‡ä»¶ã€‚</p><p><code>source</code>å°±æ˜¯ä½ çš„æ–‡ç« ç›¸å…³çš„èµ„æºæ–‡ä»¶ã€‚</p><p><code>themes</code>ä¸»é¢˜æ–‡ä»¶å¤¹ï¼Œæ ¹æ®ä¸»é¢˜æ¥ç”Ÿæˆå¯¹åº”é™æ€é¡µé¢ã€‚</p><h4 id="å¯åŠ¨æœåŠ¡"><a href="#å¯åŠ¨æœåŠ¡" class="headerlink" title="å¯åŠ¨æœåŠ¡"></a>å¯åŠ¨æœåŠ¡</h4><p>åœ¨<code>package.json</code>ä¸­å¯ä»¥å‘ç°ç¨‹åºçš„å¯åŠ¨æŒ‡ä»¤ã€‚</p><blockquote><p>hexo server [hexo s] [yarn server]</p></blockquote><p>åœ¨<code>terminal</code>ä¸­æ‰¾åˆ°æœåŠ¡åœ°å€ï¼Œé»˜è®¤<code>http://localhost:4000/</code>,æ‰“å¼€æµè§ˆå™¨å³å¯æµè§ˆä½ çš„åšå®¢</p><h3 id="æ ¹æ®ä½ çš„å£å‘³é…ç½®æƒ³è¦çš„ä¸»é¢˜æ¨¡æ¿"><a href="#æ ¹æ®ä½ çš„å£å‘³é…ç½®æƒ³è¦çš„ä¸»é¢˜æ¨¡æ¿" class="headerlink" title="æ ¹æ®ä½ çš„å£å‘³é…ç½®æƒ³è¦çš„ä¸»é¢˜æ¨¡æ¿"></a>æ ¹æ®ä½ çš„å£å‘³é…ç½®æƒ³è¦çš„ä¸»é¢˜æ¨¡æ¿</h3><ul><li><p>æ‰“å¼€<code>github</code>ï¼Œæœç´¢<code>hexo-theme</code>ï¼Œæ ¹æ®<code>star</code>çš„æ•°é‡æ’ä¸ªåºï¼ŒæŒ¨ä¸ªå»çœ‹æ•ˆæœï¼Œé€‰æ‹©è‡ªå·±å¿ƒä»ªçš„ä¸»é¢˜</p></li><li><p><code>cd themes &amp;&amp; git clone xxx</code>ï¼Œå°†æ‰¾åˆ°çš„ä¸»é¢˜æ–‡ä»¶èµ„æºå…‹éš†åˆ°<code>themes</code>æ–‡ä»¶å¤¹ä¸‹</p></li><li><p>æ ¹æ®ä¸»é¢˜çš„ç›¸å…³é…ç½®é¡¹æç¤ºè¿›è¡Œé…ç½®ï¼Œé‡å¯æœåŠ¡å³å¯çœ‹åˆ°æ•ˆæœã€‚(æ¯ä¸ªä¸»é¢˜å¯èƒ½é…ç½®æ–¹å¼ä¸ä¸€æ ·ï¼Œå¤§åŒå°å¼‚)</p></li></ul><h3 id="å¼€å¯ä½ çš„åšå®¢ä¹‹è·¯"><a href="#å¼€å¯ä½ çš„åšå®¢ä¹‹è·¯" class="headerlink" title="å¼€å¯ä½ çš„åšå®¢ä¹‹è·¯"></a>å¼€å¯ä½ çš„åšå®¢ä¹‹è·¯</h3><blockquote><p>æ–°å»ºæ–‡ç« ï¼Œ<code>layout</code>å¯¹åº”<code>draftã€postã€page(è‰ç¨¿source/_draftsã€æ–‡ç« source/_postsã€é¡µé¢source)</code></p></blockquote><pre class="language-bash" data-language="bash"><code class="language-bash">hexo new <span class="token punctuation">[</span>layout<span class="token punctuation">]</span> <span class="token operator">&lt;</span>title<span class="token operator">></span></code></pre><p>å…¶ä»–è¾…åŠ©å‚æ•°ï¼š</p><pre class="language-none"><code class="language-none">-p, --pathè‡ªå®šä¹‰æ–°æ–‡ç« çš„è·¯å¾„-r, --replaceå¦‚æœå­˜åœ¨åŒåæ–‡ç« ï¼Œå°†å…¶æ›¿æ¢-s, --slugæ–‡ç« çš„ Slugï¼Œä½œä¸ºæ–°æ–‡ç« çš„æ–‡ä»¶åå’Œå‘å¸ƒåçš„ URL</code></pre><p><code>eg</code>. æˆ‘æƒ³åœ¨<code>_posts/share</code>æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ç‰‡<code>a.md</code>çš„æ–‡ç« ï¼Œä¸”æ–‡ç« çš„é¡µé¢<code>title</code>ä¸ºâ€˜è¿™æ˜¯ Aâ€™</p><pre class="language-bash" data-language="bash"><code class="language-bash">hexo new post -p share/a <span class="token string">'è¿™æ˜¯A'</span><span class="token comment"># åˆ›å»ºä¸€ç¯‡è‰ç¨¿</span>hexo new draft <span class="token punctuation">..</span>.<span class="token comment"># å‘å¸ƒ</span>hexo publish <span class="token punctuation">[</span>layout<span class="token punctuation">]</span> <span class="token operator">&lt;</span>title<span class="token operator">></span></code></pre><blockquote><p>å…¶ä»–å¸¸ç”¨æŒ‡ä»¤è¯´æ˜ï¼š</p></blockquote><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œåœ¨ public æ–‡ä»¶å¤¹ä¸‹</span>hexo generatehexo g<span class="token comment"># æ¸…é™¤ç¼“å­˜æ–‡ä»¶ (db.json) å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶ (public)</span>hexo clean<span class="token comment"># éƒ¨ç½²ç½‘ç«™ -g, --generateéƒ¨ç½²ä¹‹å‰é¢„å…ˆç”Ÿæˆé™æ€æ–‡ä»¶</span>hexo deploy<span class="token comment"># è‰ç¨¿å‘è¡¨ï¼Œç§»åŠ¨åˆ° source/_posts æ–‡ä»¶å¤¹</span>hexo publish <span class="token punctuation">[</span>layout<span class="token punctuation">]</span> <span class="token operator">&lt;</span>filename<span class="token operator">></span></code></pre><h3 id="å°†Hexoéƒ¨ç½²åˆ°GitHub-Pages"><a href="#å°†Hexoéƒ¨ç½²åˆ°GitHub-Pages" class="headerlink" title="å°†Hexoéƒ¨ç½²åˆ°GitHub Pages"></a><a href="https://hexo.io/zh-cn/docs/github-pages">å°†<code>Hexo</code>éƒ¨ç½²åˆ°<code>GitHub Pages</code></a></h3>]]></content>
      
      
      <categories>
          
          <category> å·¥å…·å­¦ä¹  </category>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> hexo-cli </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
