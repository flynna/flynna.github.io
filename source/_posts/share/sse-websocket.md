---
title: SSE 和 WebSocket 通信以及它们之间的区别
date: 2023-04-11 10:36:07
updated: 2023-04-11 10:36:07
tags:
  - 网络通信
  - SSE
  - WebSocket
categories:
  - 技术分享
  - 前后端交互
---

### `What`？

`SSE`又称`Server-Sent-Events`，是一种基于 `HTTP` 的单向通信协议，允许服务器向客户端发送异步事件流。它是 `HTML5` 规范的一部分，通过常规的 `HTTP` 连接（使用"长轮询"技术）从服务器向客户端推送数据。`SSE` 不需要额外的协议切换，因为它构建在现有的 `HTTP` 协议之上。

`WebSocket` 是一种全双工通信协议，允许在单个 `TCP` 连接上进行双向通信。它提供了一个持久化的连接，可以在客户端和服务器之间实时地双向传输数据，而不需要像 `HTTP` 请求那样频繁地创建和关闭连接。

<!-- more -->

### `SSE`

#### 工作原理

- 客户端通过简单的 `EventSource API` 连接到服务器。

- 一旦连接建立，服务器可以在任何时候异步地向客户端发送事件数据。

- 客户端通过监听 `onmessage` 事件来接收来自服务器的消息。

#### 优点

- 简单易用，不需要特殊的协议或库。

- 服务器向客户端推送数据时比传统轮询（`polling`）更高效。

#### 缺点

- 只能由服务器单向向客户端发送数据，客户端无法直接向服务器发送消息。

- 支持度较低：虽然主流浏览器都支持 `SSE`，但在一些旧版本或特定情况下可能不兼容。

### `WebSocket`

#### 工作原理

- 客户端通过 `WebSocket API` 与服务器建立 `WebSocket` 连接。

- 一旦连接建立，客户端和服务器可以在任何时候通过发送消息进行双向通信。

- 连接保持打开状态，直到其中一方显式关闭连接。

#### 优点

- 实时性和效率高：由于 `WebSocket` 建立一次连接后就保持打开状态，可以实时地在客户端和服务器之间传递数据，减少了额外的连接建立和 `HTTP` 头信息的开销。

- 双向通信：服务器和客户端之间可以实现双向实时通信。

#### 缺点

- 实现复杂一些：相对于 `SSE，WebSocket` 的实现可能需要一些额外的编程工作。

- 兼容性问题：虽然现代浏览器普遍支持 `WebSocket`，但在一些特殊情况下，可能需要处理一些兼容性问题。

### `SSE` vs `WebSocket` 区别?

- `SSE` 使用 `HTTP` 协议，现有的服务器软件都支持。`WebSocket` 是一个独立协议。

- `SSE` 是单工通信，只能服务器向浏览器推送，`WebSocket` 是双向通信。

- `SSE` 属于轻量级，使用简单；`WebSocket` 协议相对复杂。

- `SSE` 默认支持断线重连，`WebSocket` 需要自己实现。

- `SSE` 一般只用来传送文本，二进制数据需要编码后传送，`WebSocket` 默认支持传送二进制数据。

- `SSE` 支持自定义发送的消息类型。

### 使用示例

#### `SSE` 优化登录状态心跳检测

### 问题记录
